jQuery(document).ready((function(t){let r=!1;const o=wp.template("string-locator-search-result");function s(r,o,s){t(".notices").append('<div class="notice notice-'+s+' is-dismissible"><p><strong>'+r+"</strong><br />"+o+"</p></div>")}function a(o,a){r=!1,t(".string-locator-feedback").hide(),s(o,a,"error")}function e(n,c){if(c>=n||!r)return t("#string-locator-feedback-text").html(string_locator.saving_results_string),r=!1,t("#string-locator-feedback-text").text(""),t.post(string_locator.url.clean,{_wpnonce:string_locator.rest_nonce},(function(){t(".string-locator-feedback").hide(),t("tbody",".tools_page_string-locator").is(":empty")&&t("tbody",".tools_page_string-locator").html('<tr><td colspan="3">'+string_locator.search_no_results+"</td></tr>")})).fail((function(t,r,o){a(t.status+" "+o,string_locator.search_error)})),!1;const i={filenum:c,_wpnonce:string_locator.rest_nonce};t.post(string_locator.url.search,i,(function(r){if(!r.success){if(!1===r.data.continue)return a(string_locator.warning_title,r.data.message),!1;s(string_locator.warning_title,r.data.message,"warning")}void 0!==r.data.search&&(t("#string-locator-search-progress").val(r.data.filenum),t("#string-locator-feedback-text").html(string_locator.search_current_prefix+r.data.next_file),function(r){if(t(".no-items",".tools_page_string-locator").is(":visible")&&t(".no-items",".tools_page_string-locator").hide(),Array!==r.constructor)return!1;r.forEach((function(r){if(r)for(let s=0,a=r.length;s<a;s++){const a=r[s];void 0!==a.stringresult&&t("tbody",".tools_page_string-locator").append(o(a))}}))}(r.data.search));const c=r.data.filenum+1;e(n,c)}),"json").fail((function(t,r,o){a(t.status+" "+o,string_locator.search_error)}))}t("#string-locator-search-form").on("submit",(function(o){o.preventDefault(),t("#string-locator-feedback-text").text(string_locator.search_preparing),t(".string-locator-feedback").show(),r=!0,t(".notices").html(""),t("#string-locator-search-progress").removeAttr("value"),t("tbody",".tools_page_string-locator").html("");const n={directory:t("#string-locator-search").val(),search:t("#string-locator-string").val(),regex:t("#string-locator-regex").is(":checked"),_wpnonce:string_locator.rest_nonce};t("table.tools_page_string-locator").show(),t.post(string_locator.url.directory_structure,n,(function(r){r.success?(t("#string-locator-search-progress").attr("max",r.data.total).val(r.data.current),t("#string-locator-feedback-text").text(string_locator.search_started),e(r.data.total,0)):s(r.data,"alert")}),"json").fail((function(t,r,o){a(t.status+" "+o,string_locator.search_error)}))}))}));