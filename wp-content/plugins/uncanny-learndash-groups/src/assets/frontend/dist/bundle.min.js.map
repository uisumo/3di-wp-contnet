{"version":3,"sources":["webpack://uncanny-groups-frontend/./src/js/define-main-object.js","webpack://uncanny-groups-frontend/./src/js/front.js","webpack://uncanny-groups-frontend/./src/js/learndash_template_script.js","webpack://uncanny-groups-frontend/./src/js/ulgm-assignments.js","webpack://uncanny-groups-frontend/./src/js/ulgm-essays.js","webpack://uncanny-groups-frontend/./src/js/ulgm-reporting.js","webpack://uncanny-groups-frontend/./src/js/ulgm-rest-forms.js","webpack://uncanny-groups-frontend/./node_modules/css-element-queries/src/ElementQueries.js","webpack://uncanny-groups-frontend/./node_modules/css-element-queries/src/ResizeSensor.js","webpack://uncanny-groups-frontend/webpack/bootstrap","webpack://uncanny-groups-frontend/webpack/runtime/compat get default export","webpack://uncanny-groups-frontend/webpack/runtime/define property getters","webpack://uncanny-groups-frontend/webpack/runtime/hasOwnProperty shorthand","webpack://uncanny-groups-frontend/external \"jQuery\"","webpack://uncanny-groups-frontend/./src/js/utilities.js","webpack://uncanny-groups-frontend/./src/js/uncanny-owl-groups-ui.js","webpack://uncanny-groups-frontend/./src/js/group-management.js","webpack://uncanny-groups-frontend/./src/js/group-course-report.js","webpack://uncanny-groups-frontend/./src/js/course-dashboard.js","webpack://uncanny-groups-frontend/./src/js/manage-progress.js","webpack://uncanny-groups-frontend/./src/js/buy-courses.js","webpack://uncanny-groups-frontend/./src/js/create-group.js","webpack://uncanny-groups-frontend/./src/index.js"],"names":["window","ulgmGroupManagement","jQuery","$","accountSwitch","length","attr","parent","hide","show","String","prototype","toHHMMSS","sec_numb","parseInt","this","hours","Math","floor","minutes","seconds","f1","f2","css","undefined","replace","document","ready","timer_el","timer_seconds","timer_button_el","cookie_key","cookie_name","cookie_timer_seconds","cookie","removeCookie","learndash_timer_var","setInterval","time_display","toString","html","clearInterval","trigger","sfwd_data","json","parseJSON","on","e","_this","addressValue","indexOf","groupLeaderCourseReportSetup","preventDefault","dataVars","essayUrl","ajax","method","data","url","root","beforeSend","xhr","setRequestHeader","nonce","success","response","essay","append","fail","alert","refId","quizId","userId","statistic_nonce","action","groupQuizReportSetup","statistic_action","ULGM_ManageProgress","post_data","content","type","ajaxurl","dataType","cache","error","jqXHR","textStatus","errorThrown","reply_data","remove","find","click","parents","next","toggle","transitionTimeout","Assignments","constructor","assignment_id","val","serialize","actionsAssignment","post_id","editAssignmentsData","saveAssignmentsData","mouseenter","clearTimeout","focusedRowActions","not","removeClass","addClass","mouseleave","setTimeout","uoTable","uoTableHidden","lessonId","groupId","courseId","status","elements","select","group","element","options","course","no_element","lesson","createTable","createTableHidden","addEvents","getAssignmentsData","$table","getElementById","columns","title","className","groupAssignments","localized","name","visible","columns_visibilities","first_name","last_name","author","orderable","points","assignedCourse","assignedlesson","comments","date","buttonsShared","exportOptions","join","format","body","row","column","node","classList","contains","querySelector","i18n","notApproved","innerText","trim","filename","filenameParts","reportBaseName","forEach","filterID","$filter","filterValue","value","push","reportButtons","dataset","csv","Object","assign","extend","text","exportCSV","excel","exportExcel","console","log","tableVars","aLengthMenu","all","responsive","iDisplayLength","columnDefs","full","meta","style","selector","stateSave","dom","buttons","destroy","language","processing","search","searchPlaceholder","lengthMenu","info","infoEmpty","infoFiltered","infoPostFix","loadingRecords","zeroRecords","emptyTable","paginate","first","previous","last","aria","sortAscending","sortDescending","initComplete","s","d","approveAssignments","deleteAssignments","insertAfter","addColumnsFilter","DataTable","fn","dataTable","ColReorder","csvExport","isDataTable","flattenArray","array","remove_stats","flatArray","each","key","question","key2","value2","state","colFilter_container","sInstance","customizeColumns","hideCustomizeColumns","__this","oSavedState","aoColumns","sTitle","addColumnCheckbox","bVisible","label","column_key","is_visible","checkbox","id","checked","headers","header","current_check","is_checked","is","selectot","create_options","source","ids","map","Number","$this","select_option","$select","prop","__select_option","index","el","get","indeterminate","group_id","empty","options_course","courses_to_show","courseGrouplessons","removeAttr","course_id","lessons_to_show","relationships","lesson_id","tr","closest","child","isShown","rows","answer","isNormalInteger","str","n","spinner","i","loading","Array","postId","post_type","security","ajax_nonce","appendTo","modal","message","Essays","essay_id","actionsEssays","editEssaysData","saveEssaysData","quiz","getEssaysData","getParam","results","RegExp","exec","location","decodeURIComponent","groupEssays","idColumn","question_text","assignedquiz","ungraded","$input","targets","draw","clone","filter","submit","options_quiz","reduce","accumulator","currentValue","$noResultsOption","quizzes_to_show","quiz_relationships","options_quizzes","quiz_id","tinymce","edId","tinyMCE","editors","save","Function","reportingTemplating","quizReport","select2","rowTemplate","itemTemplate","liTemplate","items","itemsEl","jpL","split","setItems","item","render","props","tok","populateCoursesDropDown","courseDropDown","group_courses","ulgmRestApiSetup","selectCourse","ID","post_title","columnsVisibility","username","includes","firstName","lastName","userEmail","quizScore","detailedReport","searchable","defaultContent","settings","table","oInstance","api","addColumnCourseCheckbox","buttonCommon","every","quiz_name","quiz_score","courseGroupQuizzes","reporting","event","getQuizData","scoreType","groupLeaderId","getGroupCourses","getQueryVariable","createCourseDropDown","courses","createUserDropDown","users","posts","dropDown","post_count","noCourse","post","selectUser","noUsers","user","display_name","trunc","isNaN","variable","vars","substring","pair","file_frame","restForms","wp","media","frames","button","multiple","attachment","toJSON","open","addFormSubmitEvents","wpColorPicker","err","makeAjaxCall","endPoint","restData","associatedForm","$error_container","uploadedUsers","uploaded_users","statusCode","403","youCantDoThat","href","encodeURIComponent","reload","test","slice","origin","pathname","hash","call_function","function_vars","endpoint","documentElement","animate","scrollTop","offset","top","total_rows","entry","createElement","setAttribute","emailCol","statusCol","email","reason","appendChild","resultsDiv","completed","hasOwnProperty","sendRestCall","selected_value","_currentTarget","currentTarget","onsubmit","checkValidity","fields","serializeArray","field","reportValidity","serializeObject","o","a","ResizeSensor","ElementQueries","cssStyleElement","allQueries","idToSelectorMapping","getEmSize","fontSize","getComputedStyle","parseFloat","convertToPx","numbers","units","clientWidth","clientHeight","vw","vh","chooser","SetupInformation","option","elementSize","actualValue","attrValues","attrValue","attrName","attributes","call","getBoundingClientRect","width","offsetWidth","height","offsetHeight","rect","round","getElementSize","property","mode","k","substr","removeAttribute","setupElement","elementQueriesSetupInformation","elementQueriesSensor","queueQuery","innerHTML","getQuery","container","query","querySelectorAll","bind","$$","attachResponsiveImage","children","rules","sources","defaultImageId","lastActiveImage","loadedImages","tagName","toLowerCase","minWidth","getAttribute","src","rule","display","check","imageToDisplay","image","Image","onload","resizeSensorInstance","regex","attrRegex","extractQuery","match","smatch","attrs","attrMatch","readRules","j","selectorText","cssText","cssRules","styleSheet","defaultCssInjected","init","animationStart","addEventListener","target","styles","animationName","getPropertyValue","resizeSensor","getElementsByTagName","styleSheets","warn","findResponsiveImages","findElementQueriesElements","update","instance","detach","listen","callback","navigator","userAgent","DOMLoadTimer","readyState","domLoaded","globalWindow","self","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","timer","forEachElement","elementsType","isCollectionTyped","Elements","setStyle","keys","lastAnimationFrameForInvisibleCheck","EventQueue","q","add","ev","sizeInfo","newQueue","attachResizeEvent","resized","resizedAttached","dir","pointerEvents","position","left","right","bottom","overflow","zIndex","visibility","maxWidth","styleChild","transition","expand","expandChild","shrink","shrinkChild","computedStyle","dirty","rafId","size","lastWidth","lastHeight","initialHiddenCheck","reset","scrollLeft","resetSensor","onResized","onScroll","addEvent","cb","attachEvent","elem","removeChild","MutationObserver","observer","mutations","addedNodes","observe","childList","subtree","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","getter","__esModule","definition","defineProperty","enumerable","obj","restCall","parameters","doing_rest","isDefined","onDone","onSuccess","onFail","isEmpty","isArray","isObject","formatNumber","amount","decimalCount","decimal","thousands","abs","toFixed","destroyiCheck","iCheck","progress_report","closest_group","direction","execCommand","slideToggle","group_leaders_checkboxes","btn_add_leader","bind_click_outside","mouseup","has","unbind","$currentButton","dropdownDirection","$targetGroup","hasClass","ux_buttons","change","GroupManagement","isGroupManagement","EnrolledUsersTable","groupManagementModal","modals","editor","initialize","min_height","formats","alignleft","textAlign","classes","aligncenter","alignright","strikethrough","inline","toolbar1","plugins","quicktags","addGroupManagementEvents","openModal","parseCsv","modalContainer","downloadCsv","blob","Blob","csvDataString","saveAs","fileName","modalId","x","is_editable","input","messageContainer","reader","FileReader","ulgmGroupManagementLocalized","file_api_is_not_supported","file","files","csvText","pop","select_a_csv","readAsText","result","csv_file_error","csvArray","csvHead","shift","delimiter","incompatible_format","emailIndex","verifyRequiredHeader","not_contains_email","not_contains_first","not_contains_last","newArray","mapper","v","verifyEmptyRows","must_contain_email","choose_file","headerArray","columnsAmount","columnIndex","hasEnrolledUsersTable","getElements","getData","addSelect2","createDataTables","listenCheckboxToSelectAll","listenCheckboxesChanges","updateDataOnModal","$elements","selectEl","enrolledUsersTableDT","enrolledLeaderTableDT","removeUsersButton","removeLeadersButton","sendEmailsButton","numberOfUsers","sendEmailsModal","sendEmailsField","removeUsersField","canRemoveUsers","canRemoveUsersAnytime","ulgmGroupLeaderData","selectedUsers","selectedLeaders","ext","order","b","textA","textContent","textB","localeCompare","userColumns","enrolled_user_columns","populate_management_features","unshift","check_all","splice","userTable","userTableVars","enrolled_user_data","searchDelay","pageLength","groupName","groupNamePrefix","serverSide","createdRow","dataIndex","status_id","$fakeExportCSV","$fakeExportExcel","$realExportCSV","createEvent","initEvent","dispatchEvent","$realExportExcel","leaderColumns","enrolled_leader_columns","leaderTable","leaderTableVars","enrolled_leader_data","checkAllEl","isChecked","$allCheckboxes","updateSelectedUsers","evaluateRemoveUsersButtonVisiblity","evaluateRemoveLeadersButtonVisiblity","evaluateSendEmailsButtonVisiblity","$allUserCheckboxes","$allLeaderCheckboxes","allCheckedCheckboxes","leaders","$checkedCheckboxes","$checkbox","$row","progressIsNotStarted","showRemoveUsersButton","showRemoveLeadersButton","groupLeaderIds","JSON","stringify","userIds","GroupCourseReport","isCourseReport","CourseReportTable","restPopulateTable","courseReport","that","user_name","user_email","percent_completed","date_completed","date_enrolled","course_name","group_name","transcript_page_url","user_id","details","courseNamePrefix","$courseId","courseName","getUrlParameter","populateReportTable","clear","user_course_data","adjust","sParam","sParameterName","sURLVariables","require","CourseDashboard","hasDashboard","defineSettings","createCourses","filters","form","selects","slideToggleDuration","$courses","$element","Course","expandAll","collapseAll","lessons","topic","elementType","$containers","$container","dashboardSettings","defineCssClasses","getCourseData","toggleCourseContent","createLessons","courseData","hasLessons","hasQuizzes","hasCertificate","cssClasses","collapsed","collapsing","expanding","expanded","toggleBtn","isCollapsed","setToggleClass","slideDown","slideUp","$lessons","Lesson","$quizzesContainers","Quizzes","values","getLessonData","toggleLessonContent","createTopics","lessonData","availableOn","isCompleted","isAvailable","hasTopics","$topics","Topic","getTopicData","toggleTopicContent","topicData","topicId","ManageProgress","isManageProgress","canManageProgress","setSettings","listenProgressChangesOnCourses","$course","createChildren","listenCheckboxChanges","confirmationVisible","actions","cancel","progress","number","bar","quizzes","topics","rightContainer","$lesson","$quiz","Quiz","$topic","concat","percentage","certificateUrl","$certificateButton","certificate","prepend","wantsToCompleteCourse","quizData","topic_quizzes","topic_quizzes_string","_topic","_topic_id","restUrl","rest_user_id","rest_course_id","rest_lessons","rest_topics","rest_quizzes","postNonce","setProgress","setCertificate","certificate_url","completeCourseItems","course_completed_children","confirmChanges","off","completedChildren","completedChildrenObj","shouldBeCompleted","getTheId","markAsNotComplete","markAsComplete","hasChildren","wantsToCompleteLesson","wantsToCompleteTopic","wantsToCompleteQuiz","childrenData","isBuyCourses","getConfiguration","modifyCourses","listenQuantityChanges","listenFormSubmission","errorNotice","quantity","totals","subtotal","discount","total","bulkDiscountData","bulkDiscountEnabled","enabled","discounts","bulkDiscountGroups","minimumQuantity","qty","percent","config","bulkDiscount","groups","formatPrice","template","ULG_BuyCourses","numberOfDecimals","thousandSeparator","decimalSeparator","numberOfSeats","numberOfStudents","toggleClass","updateTotals","validation","validate","isValid","$selectedCourses","numberOfCourses","toArray","discountGroup","getDiscountPercentage","getTotals","selectAtLeastOne","hasError","price","$price","oldHtml","dummyPrice","priceFormatted","isCreateGroup","addPillboxToGroupCourses","coursesList","theme","BuyCourses","CreateGroup"],"mappings":"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","file":"bundle.min.js","sourcesContent":["window.ulgmGroupManagement = {};","\njQuery(function($){\n\tvar accountSwitch = $('input#createaccount');\n\tif(accountSwitch.length){\n\t\taccountSwitch.attr( 'checked', true ).parent().hide();\n\t\t$( '.create-account' ).show();\n\t\taccountSwitch.parent().hide();\n\t}\n});\n","if (typeof flip_expand_collapse == 'undefined') {\n\tfunction flip_expand_collapse(what, id) {\n\n\t    if (jQuery( what + '-' + id + ' .list_arrow.flippable' ).hasClass( 'expand' ) ) {\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).removeClass( 'expand' );\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).addClass( 'collapse' );\n\t        jQuery( what + '-' + id + ' .flip' ).slideUp();\n\t    } else {\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).removeClass( 'collapse' );\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).addClass( 'expand' );\n\t        jQuery( what + '-' + id + ' .flip' ).slideDown();\n\t    }\n\t    return false;\n\t}\n}\n\nif (typeof flip_expand_all == 'undefined') {\n\tfunction flip_expand_all(what) {\n\t    jQuery( what + ' .list_arrow.flippable' ).removeClass( 'collapse' );\n\t    jQuery( what + ' .list_arrow.flippable' ).addClass( 'expand' );\n\t    jQuery( what + ' .flip' ).slideDown();\n\t    return false;\n\t}\n}\n\nif (typeof flip_collapse_all == 'undefined') {\n\tfunction flip_collapse_all(what) {\n\t    jQuery( what + ' .list_arrow.flippable' ).removeClass( 'expand' );\n\t    jQuery( what + ' .list_arrow.flippable' ).addClass( 'collapse' );\n\t    jQuery( what + ' .flip' ).slideUp();\n\t    return false;\n\t}\n}\n\nString.prototype.toHHMMSS = function() {\n    sec_numb = parseInt( this, 10 );\n    var hours = Math.floor( sec_numb / 3600 );\n    var minutes = Math.floor( ( sec_numb - ( hours * 3600 ) ) / 60 );\n    var seconds = sec_numb - ( hours * 3600 ) - ( minutes * 60 );\n    if ( hours < 10 ) {\n        hours = '0' + hours;\n    }\n    if ( minutes < 10 ) {\n        minutes = '0' + minutes;\n    }\n    if ( seconds < 10 ) {\n        seconds = '0' + seconds;\n    }\n    var time = hours + ':' + minutes + ':' + seconds;\n    return time;\n}\n\nfunction learndash_timer() {\n    document.getElementById( 'learndash_mark_complete_button' ).disabled = true;\n    learndash_forced_lesson_time = learndash_forced_lesson_time - 1;\n    document.getElementById( 'learndash_timer' ).innerHTML = learndash_forced_lesson_time.toString().toHHMMSS();\n    if ( learndash_forced_lesson_time <= 0 ) {\n        clearInterval( learndash_timer_var );\n        document.getElementById( 'learndash_mark_complete_button' ).disabled = false;\n        document.getElementById( 'learndash_timer' ).innerHTML = '';\n    }\n}\n\njQuery( function() {\n    function force_max_12px_font_size() {\n        var f1 = jQuery( '#course_navigation .learndash_navigation_lesson_topics_list a' ).css( 'font-size' );\n        var f2 = jQuery( '#course_navigation .learndash_navigation_lesson_topics_list a span' ).css( 'font-size' );\n        if ( f1 != undefined && f1.replace( 'px', '' ) > 12 || f2 != undefined && f2.replace( 'px', '' ) > 12 ) {\n            jQuery( '#course_navigation .learndash_navigation_lesson_topics_list a, #course_navigation .learndash_navigation_lesson_topics_list a span' ).css( 'font-size', 12 );\n        }\n    }\n    force_max_12px_font_size();\n});\n\njQuery(document).ready(function() {\n\t\n\tif ( jQuery( '#learndash_timer' ).length ) {\n\t\tvar timer_el \t\t= jQuery( '#learndash_timer' );\n\t\tvar timer_seconds \t= timer_el.attr('data-timer-seconds');\n\n\t\tvar timer_button_el = jQuery( timer_el.attr('data-button') );\n\n\t\tif ( ( typeof timer_seconds !== 'undefined' ) && ( typeof timer_button_el !== 'undefined' ) ) {\n\n\t        timer_button_el.attr('disabled', true);\n\t\t\t\n\t\t\ttimer_seconds = parseInt( timer_seconds );\n\n\n\t\t\tvar cookie_key \t\t= timer_el.attr('data-cookie-key');\n\t\t\tif (typeof cookie_key !== 'undefined') {\n\t\t\t\tvar cookie_name = 'learndash_timer_cookie_'+cookie_key;\n\t\t\t} else {\n\t\t\t\tvar cookie_name = 'learndash_timer_cookie';\n\t\t\t}\n\t\t\tcookie_timer_seconds = jQuery.cookie(cookie_name);\n\t\t\tif (typeof cookie_timer_seconds !== 'undefined') {\n\t\t\t\ttimer_seconds = parseInt( cookie_timer_seconds );\n\t\t\t}\n\t\t\tjQuery.removeCookie( cookie_name );\n\t\t\t\n\t\t\tif ( timer_seconds >= 1 ) {\n\t\t\t\tvar learndash_timer_var = setInterval( function() {\n\t\t\t\t    timer_seconds = timer_seconds - 1;\n\t\t\t\t\n\t\t\t\t\tvar time_display = timer_seconds.toString().toHHMMSS();\n\t\t\t\t    timer_el.html(time_display);\n\t\t\t\t    if ( timer_seconds <= 0 ) {\n\t\t\t\t\t\t\n\t\t\t\t        clearInterval( learndash_timer_var );\n\t\t\t\t        timer_button_el.attr('disabled', false);\n\t\t\t\t        timer_el.html('');\n\t\t\t\t\t\tjQuery.cookie(cookie_name, 0);\n\t\t\t\t\t\t//jQuery.removeCookie( cookie_name );\n\t\t\t\t\t\t\n\t\t\t\t\t\ttimer_button_el.trigger('learndash-time-finished');\n\t\t\t\t    }\n\t\t\t\t\t// Store the timer state (value) into a cookie. This is done if the page reloads the student can resume\n\t\t\t\t\t// the time instead of restarting.\n\t\t\t\t\tjQuery.cookie(cookie_name, timer_seconds);\n\t\t\t\t},1000);\t\n\t\t\t} else {\n\t\t        timer_button_el.attr('disabled', false);\n\t\t        timer_el.html('');\n\t\t\t\tjQuery.cookie(cookie_name, 0);\n\t\t\t\t//jQuery.removeCookie( cookie_name );\n\t\t\t}\n\t\t}\n\t}\n});\n\n\njQuery(document).ready(function(){\n\n\tif (typeof sfwd_data !== 'undefined') {\n\t\tif ( typeof sfwd_data.json !== 'undefined' ) {\n\t\t\tsfwd_data = sfwd_data.json.replace(/&quot;/g, '\"');\n\t\t\tsfwd_data = jQuery.parseJSON( sfwd_data );\n\t\t}\n\t}\n\n\t// load essay in the modal\n\tjQuery(document).on('click','.wpProQuiz_sortablezzz a', function(e) {\n\t\tvar _this = jQuery(this);\n\t\tvar addressValue = jQuery(this).attr(\"href\");\n\t\tvar substring = 'essay';\n\n\t\tif( addressValue.indexOf(substring) !== -1 && typeof groupLeaderCourseReportSetup !== 'undefined'){\n\t\t\te.preventDefault();\n\n\t\t\tvar dataVars = {\n\t\t\t\tessayUrl: addressValue\n\t\t\t};\n\n\t\t\t// Rest api call to activate/deactivate plugins\n\t\t\tjQuery.ajax({\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: dataVars,\n\t\t\t\turl: groupLeaderCourseReportSetup.root + 'get_user_essay/',\n\t\t\t\tbeforeSend: function (xhr) {\n\t\t\t\t\txhr.setRequestHeader('X-WP-Nonce', groupLeaderCourseReportSetup.nonce);\n\t\t\t\t},\n\t\t\t\tsuccess: function (response) {\n\n\t\t\t\t\tvar essay = '<div style=\"background:white;padding:10px;\">'+response+'</div>';\n\t\t\t\t\t_this.parent().append(essay);\n\t\t\t\t\t_this.hide();\n\n\t\t\t\t},\n\t\t\t\tfail: function (response) {\n\t\t\t\t\talert('Rest Call Failed');\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\t});\n\n\tjQuery(document).on('click','a.user_statistic', function(e) {\n\t\te.preventDefault();\n\t\t\n\t\tvar refId \t\t\t\t= \tjQuery(this).data('ref_id');\n\t\tvar quizId \t\t\t\t= \tjQuery(this).data('quiz_id');\n\t\tvar userId \t\t\t\t= \tjQuery(this).data('user_id');\n\t\tvar statistic_nonce \t= \tjQuery(this).data('statistic_nonce');\n\t\tvar action \t\t\t\t= \t'wp_pro_quiz_admin_ajax';\n        var nonce \t\t\t\t= \tjQuery(this).data('nonce');\n        if (typeof groupQuizReportSetup !== 'undefined' && typeof groupQuizReportSetup.statistic_action !== 'undefined') {\n            action = groupQuizReportSetup.statistic_action;\n        }\n        if (typeof ULGM_ManageProgress !== 'undefined' && typeof ULGM_ManageProgress.statistic_action !== 'undefined') {\n            action = ULGM_ManageProgress.statistic_action;\n        }\n\n\t\tvar post_data = {\n\t\t\t'action': action,\n\t\t\t'func': 'statisticLoadUser',\n            'nonce': nonce,\n\t\t\t'data': {\n\t\t\t\t'quizId': quizId,\n            \t'userId': userId,\n            \t'refId': refId,\n\t\t\t\t'statistic_nonce': statistic_nonce,\n            \t'avg': 0\n\t\t\t}\n\t\t}\n\t\t\n\t\tjQuery('#wpProQuiz_user_overlay, #wpProQuiz_loadUserData').show();\n\t\tvar content = jQuery('#wpProQuiz_user_content').hide();\n\n\t\tjQuery.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: sfwd_data.ajaxurl,\n\t\t\tdataType: \"json\",\n\t\t\tcache: false,\n\t\t\tdata: post_data,\n\t\t\terror: function(jqXHR, textStatus, errorThrown ) {\n\t\t\t},\n\t\t\tsuccess: function(reply_data) {\n\n\t\t\t\tif ( typeof reply_data.html !== 'undefined' ) {\n\t\t\t\t\tcontent.html(reply_data.html);\n\t\t\t\t\tjQuery('a.wpProQuiz_update', content).remove();\n\t\t\t\t\tjQuery('a#wpProQuiz_resetUserStatistic', content).remove();\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tjQuery('#wpProQuiz_user_content').show();\n\n\t\t\t\t\tjQuery('#wpProQuiz_loadUserData').hide();\n\t\t\t\t\n\t\t\t\t\tcontent.find('.statistic_data').click(function() {\n\t\t\t\t\t\tjQuery(this).parents('tr').next().toggle('fast');\n\t\t\t\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\t\t\n\t\tjQuery('#wpProQuiz_overlay_close').click(function() {\n\t\t\tjQuery('#wpProQuiz_user_overlay').hide();\n\t\t});\n\t});\n\t\n});\n","(function ($) { // Self Executing function with $ alias for jQuery\n\n    /**\n     *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n     *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n     */\n    $(document).ready(function () {\n\n        if ($('#uo-group-assignments-table').length > 0 ){\n            window.ulgmGroupManagement.Assignments.constructor();\n\n            jQuery('form#uo-groups-assignments-management-form').on('click', 'button.assignment_approve_single,a.assignment_approve_single,button#group-approve-assignments-button', function (e) {\n                e.preventDefault();\n                var assignment_id = jQuery(this).attr('id').replace('assignment_approve_', '');\n                assignment_id = assignment_id.replace('a_', '');\n                if ((typeof assignment_id !== 'undefined') && (assignment_id != '')) {\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').val(assignment_id);\n                    }\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('approve_assignment');\n                    }\n                    var dataVars = $('form#uo-groups-assignments-management-form').serialize();\n                    window.ulgmGroupManagement.Assignments.actionsAssignment(dataVars);\n                }\n            });\n            jQuery('form#uo-groups-assignments-management-form').on('click','a.delete_assignment_single,button#group-trash-assignments-button',function(e) {\n                e.preventDefault();\n                var assignment_id = jQuery(this).attr('id').replace('a_assignment_trash_', '');\n\n                if ( ( typeof assignment_id !== 'undefined' ) && ( assignment_id != '' ) ) {\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').val(assignment_id);\n                    }\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('trash_assignment');\n                    }\n                    var dataVars = $('form#uo-groups-assignments-management-form').serialize();\n                    window.ulgmGroupManagement.Assignments.actionsAssignment(dataVars);\n                }\n            });\n\n\n            $('#uo-group-assignments-table').on('click','a.edit_assignment_single',function(){\n                var post_id = $(this).data('assignment-id');\n                window.ulgmGroupManagement.Assignments.editAssignmentsData(post_id);\n            });\n            $('body').on('click','button#uo-assignment-edit-button',function(){\n                window.ulgmGroupManagement.Assignments.saveAssignmentsData();\n            });\n            $('body').on('click','#uo-assignment-update-button',function(){\n                window.ulgmGroupManagement.Assignments.saveAssignmentsData();\n            });\n\n            var transitionTimeout;\n            $( '#uo-group-assignments-table tbody' ).on({\n                mouseenter: function() {\n                    clearTimeout( transitionTimeout );\n                    focusedRowActions = $( this ).find( '.row-actions' );\n                    // transitionTimeout is necessary for Firefox, but Chrome won't remove the CSS class without a little help.\n                    $( '.row-actions' ).not( this ).removeClass( 'visible' );\n                    focusedRowActions.addClass( 'visible' );\n                },\n                mouseleave: function() {\n                    // Tabbing between post title and .row-actions links needs a brief pause, otherwise\n                    // the .row-actions div gets hidden in transit in some browsers (ahem, Firefox).\n                    transitionTimeout = setTimeout( function() {\n                        focusedRowActions.removeClass( 'visible' );\n                    }, 30 );\n                }\n            }, 'tr' );\n        }\n    });\n\n\n    window.ulgmGroupManagement.Assignments = {\n\n        uoTable: null,\n\n        uoTableHidden: null,\n\n        lessonId: 0,\n\n        groupId: 0,\n\n        courseId: 0,\n\n        status: 'not-approved',\n\n        elements: {\n            select: {\n                group: {\n                    element: null,\n                    options: null\n                },\n                course: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                lesson: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                status: {\n                    element: null,\n                    options: null,\n                },\n            }\n        },\n\n        constructor: function () {\n            this.elements.select.group.element  = $('#uo-group-report-group');\n            this.elements.select.course.element = $('#uo-group-report-courses');\n            this.elements.select.lesson.element   = $('#uo-group-report-lessons');\n            this.elements.select.status.element   = $('#uo-group-report-status');\n\n\n            this.elements.select.course.no_element = $('#uo-group-report-nocourses');\n            this.elements.select.lesson.no_element   = $('#uo-group-report-nolessons');\n\n            this.elements.select.group.options  = $('#uo-group-report-group option');\n            this.elements.select.course.options = $('#uo-group-report-courses option');\n            this.elements.select.lesson.options   = $('#uo-group-report-lessons option');\n            this.elements.select.status.options   = $('#uo-group-report-status option');\n\n            this.createTable();\n            this.createTableHidden();\n            this.addEvents();\n            window.ulgmGroupManagement.Assignments.status = this.elements.select.status.element.val();\n            // Request data\n            window.ulgmGroupManagement.Assignments.getAssignmentsData( 0, 0, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n        },\n\n        createTable: function (data) {\n\n            const $table = document.getElementById( 'uo-group-assignments-table' );\n            \n            var columns = [\n                {\n                    title: 'select',\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--select-row',\n                },\n                {\n                    title: groupAssignments.localized.title,\n                    data: 'title',\n                    className: 'has-row-actions',\n                    name: 'title',\n                    visible: groupAssignments.columns_visibilities.title,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--title',\n                },\n                {\n                    title: groupAssignments.localized.first_name,\n                    data: 'first_name',\n                    name: 'first_name',\n                    visible: groupAssignments.columns_visibilities.first_name,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--first-name',\n                },\n                {\n                    title: groupAssignments.localized.last_name,\n                    data: 'last_name',\n                    name: 'last_name',\n                    visible: groupAssignments.columns_visibilities.last_name,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--last-name',\n                },\n                {\n                    title: groupAssignments.localized.author,\n                    data: 'author',\n                    name: 'author',\n                    visible: groupAssignments.columns_visibilities.author,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--author',\n                },\n                {\n                    title: groupAssignments.localized.status,\n                    data: 'status',\n                    orderable: true,\n                    name: 'status',\n                    visible: groupAssignments.columns_visibilities.status,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--status',\n                },\n                {\n                    title: groupAssignments.localized.points,\n                    data: 'points',\n                    orderable: false,\n                    name: 'points',\n                    visible: groupAssignments.columns_visibilities.points,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--points',\n                },\n                {\n                    title: groupAssignments.localized.assignedCourse,\n                    data: 'assignedCourse',\n                    orderable: true,\n                    name: 'assignedCourse',\n                    visible: groupAssignments.columns_visibilities.assignedCourse,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-course',\n                },\n                {\n                    title: groupAssignments.localized.assignedlesson,\n                    data: 'assignedlesson',\n                    orderable: true,\n                    name: 'assignedlesson',\n                    visible: groupAssignments.columns_visibilities.assignedlesson,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-lesson',\n                },\n                {\n                    title: groupAssignments.localized.comments,\n                    data: 'comments',\n                    name: 'comments',\n                    visible: groupAssignments.columns_visibilities.comments,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--comments',\n                },\n                {\n                    title: groupAssignments.localized.date,\n                    data: 'date',\n                    name: 'date',\n                    visible: groupAssignments.columns_visibilities.date,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--date',\n                },\n            ];\n\n            const buttonsShared = {\n                exportOptions: {\n                    columns: [\n                        '.ulg-report-assignments-cell',\n                        ':not(.ulg-report-assignments-cell--select-row)',\n                        ':not(.ulg-report-assignments-cell--title)',\n                        ':visible'\n                    ].join( '' ),\n\n                    format: {\n                        body: function ( data, row, column, node ) {\n\n                            // Check if it's the \"Status\" column\n                            if ( node.classList.contains( 'ulg-report-assignments-cell--status' ) ) {\n                                // Check if it has the \"Approve\" button\n                                if ( node.querySelector( 'button.assignment_approve_single' ) ) {\n                                    // Format data. If it has the button, it's not approved. Use that instead.\n                                    data = groupAssignments.i18n.notApproved;\n                                }\n                            } \n                            // Format all other columns\n                            else {\n                                // Remove HTML\n                                data = node.innerText.trim();\n                            }\n\n                            // Remove HTML\n                            return data;\n                        }\n                    }\n                },\n\n                filename: () => {\n                    // File name parts\n                    const filenameParts = [\n                        // Base name\n                        groupAssignments.i18n.reportBaseName\n                    ];\n\n                    // Get the ID of the dropdowns used to set the filters\n                    const filtersFields = [\n                        'uo-group-report-group',\n                        'uo-group-report-courses',\n                        'uo-group-report-lessons',\n                        'uo-group-report-status'\n                    ];\n\n                    // Get the value of the filters\n                    filtersFields.forEach( ( filterID ) => {\n                        // Get the field of the filter\n                        const $filter = document.getElementById( filterID );\n\n                        try {\n                            // Check if it exists\n                            if ( $filter ) {\n                                // Get the value\n                                const filterValue = $filter.value;\n\n                                // Make sure the value is not empty\n                                if (\n                                    filterValue !== ''\n                                    && filterValue != '0'\n                                ) {\n                                    // Get the TEXT of the option\n                                    filenameParts.push(\n                                        $filter.querySelector( `option[value=\"${ filterValue }\"]` )\n                                            .innerText\n                                            .trim()\n                                    );\n                                }\n                            }\n                        } catch ( e ) {}\n                    } );\n\n                    // Return the name\n                    return filenameParts.join( ' - ' );\n                } \n            }\n\n            const reportButtons = [];\n\n            // Check if we have to add the CSV button\n            if ( $table.dataset.csv == 'show' ) {\n                reportButtons.push( Object.assign( {}, buttonsShared, {\n                    extend: 'csv',\n                    text: groupAssignments.i18n.exportCSV,\n                } ) );\n            }\n\n            // Check if we have to add the Excel button\n            if ( $table.dataset.excel == 'show' ) {\n                reportButtons.push( Object.assign( {}, buttonsShared, {\n                    extend: 'excelHtml5',\n                    text: groupAssignments.i18n.exportExcel,\n                } ) );\n            }\n\n            console.log( columns );\n\n            var tableVars = {\n                aLengthMenu: [\n                    [15, 30, 60, -1],\n                    [15, 30, 60, groupAssignments.localized.all]\n                ],\n                responsive: true,\n                iDisplayLength: 30,\n                columns: columns,\n                columnDefs: [{\n                    \"targets\": 0,\n                    \"orderable\": false,\n                    \"searchable\": false,\n                    'render': function (data, type, full, meta){\n                        return '<input type=\"checkbox\" name=\"post[]\" value=\"' + $('<div/>').text(data).html() + '\">';\n                    },\n                    'checkboxes': {\n                        'selectRow': true\n                    }\n                }],\n                select: {\n                    style: 'multi',\n                    selector: 'td:first-child'\n                },\n                stateSave: true,\n                //responsive: true,\n\n                dom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n                buttons: reportButtons,\n\n            };\n\n            if (null !== this.uoTable) {\n\n                this.uoTable.destroy();\n\n                tableVars.data = data;\n\n                tableVars.columns = [\n                    {\n                        title: '<input type=\"checkbox\" name=\"select_all\" value=\"1\" id=\"uo-assignments-select-all\">',\n                        data: 'id',\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--select-row',\n                    },\n                    {\n                        title: groupAssignments.localized.title,\n                        data: 'title',\n                        className: 'has-row-actions',\n                        name: 'title',\n                        visible: groupAssignments.columns_visibilities.title,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--title',\n                    },\n                    {\n                        title: groupAssignments.localized.first_name,\n                        data: 'first_name',\n                        name: 'first_name',\n                        visible: groupAssignments.columns_visibilities.first_name,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--first-name',\n                    },\n                    {\n                        title: groupAssignments.localized.last_name,\n                        data: 'last_name',\n                        name: 'last_name',\n                        visible: groupAssignments.columns_visibilities.last_name,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--last-name',\n                    },\n                    {\n                        title: groupAssignments.localized.author,\n                        data: 'author',\n                        name: 'author',\n                        visible: groupAssignments.columns_visibilities.author,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--author',\n                    },\n                    {\n                        title: groupAssignments.localized.status,\n                        data: 'status',\n                        orderable: true,\n                        name: 'status',\n                        visible: groupAssignments.columns_visibilities.status,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--status',\n                    },\n                    {\n                        title: groupAssignments.localized.points,\n                        data: 'points',\n                        orderable: false,\n                        name: 'points',\n                        visible: groupAssignments.columns_visibilities.points,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--points',\n                    },\n                    {\n                        title: groupAssignments.localized.assignedCourse,\n                        data: 'assignedCourse',\n                        orderable: true,\n                        name: 'assignedCourse',\n                        visible: groupAssignments.columns_visibilities.assignedCourse,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-course',\n                    },\n                    {\n                        title: groupAssignments.localized.assignedlesson,\n                        data: 'assignedlesson',\n                        orderable: true,\n                        name: 'assignedlesson',\n                        visible: groupAssignments.columns_visibilities.assignedlesson,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-lesson',\n                    },\n                    {\n                        title: groupAssignments.localized.comments,\n                        data: 'comments',\n                        name: 'comments',\n                        visible: groupAssignments.columns_visibilities.comments,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--comments',\n                    },\n                    {\n                        title: groupAssignments.localized.date,\n                        data: 'date',\n                        name: 'date',\n                        visible: groupAssignments.columns_visibilities.date,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--date',\n                    },\n                ];\n\n            }\n            tableVars.language = {\n                processing:        groupAssignments.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupAssignments.localized.searchPlaceholder,\n                lengthMenu:        groupAssignments.localized.lengthMenu,\n                info:              groupAssignments.localized.info,\n                infoEmpty:         groupAssignments.localized.infoEmpty,\n                infoFiltered:      groupAssignments.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupAssignments.localized.loadingRecords,\n                zeroRecords:       groupAssignments.localized.zeroRecords,\n                emptyTable:        groupAssignments.localized.emptyTable,\n                paginate: {\n                    first:         groupAssignments.localized.paginate.first,\n                    previous:      groupAssignments.localized.paginate.previous,\n                    next:          groupAssignments.localized.paginate.next,\n                    last:          groupAssignments.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupAssignments.localized.sortAscending,\n                    sortDescending: groupAssignments.localized.sortDescending\n                }\n            };\n            tableVars.initComplete = function(s,d) {\n                jQuery( `\n                    <div class=\"group-assignments-buttons uo-hidden\">\n                        <button class=\"uo-btn uo-left\" id=\"group-approve-assignments-button\">\n                            ${ groupAssignments.localized.approveAssignments }\n                        </button>\n                        <button class=\"uo-btn uo-left\" id=\"group-trash-assignments-button\">\n                            ${ groupAssignments.localized.deleteAssignments }\n                        </button>\n                    </div>\n                ` ).insertAfter( '#uo-group-assignments-table_filter' );\n                jQuery(window.ulgmGroupManagement.Assignments.addColumnsFilter(s)).insertAfter( '#uo-group-assignments-table_filter' );\n            };\n\n            this.uoTable = jQuery('#uo-group-assignments-table');\n\n            if ( jQuery('#uo-group-assignments-table').length > 0 ){\n                this.uoTable = jQuery('#uo-group-assignments-table').DataTable(tableVars);\n                new jQuery.fn.dataTable.ColReorder( this.uoTable );\n            }\n\n        },\n\n        createTableHidden: function (data) {\n\n            var columns = [\n                {title: groupAssignments.localized.title, data: 'title', className:'has-row-actions', name: 'title', visible: groupAssignments.columns_visibilities.title},\n                {title: groupAssignments.localized.first_name, data: 'first_name', name: 'first_name', visible: groupAssignments.columns_visibilities.first_name},\n                {title: groupAssignments.localized.last_name, data: 'last_name', name: 'last_name', visible: groupAssignments.columns_visibilities.last_name},\n                {title: groupAssignments.localized.author, data: 'author', name: 'author', visible: groupAssignments.columns_visibilities.author},\n                {title: groupAssignments.localized.status, data: 'status', orderable: true, name: 'status', visible: groupAssignments.columns_visibilities.status},\n                {title: groupAssignments.localized.points, data: 'points', orderable: false, name: 'points', visible: groupAssignments.columns_visibilities.points},\n                {title: groupAssignments.localized.assignedCourse, data: 'assignedCourse',orderable: true, name: 'assignedCourse', visible: groupAssignments.columns_visibilities.assignedCourse},\n                {title: groupAssignments.localized.assignedlesson, data: 'assignedlesson',orderable: true, name: 'assignedlesson', visible: groupAssignments.columns_visibilities.assignedlesson},\n                {title: groupAssignments.localized.comments, data: 'comments', name: 'comments', visible: groupAssignments.columns_visibilities.comments},\n                {title: groupAssignments.localized.date, data: 'date', name: 'date', visible: groupAssignments.columns_visibilities.date},\n            ];\n\n            /*var language = [\n                \"lengthMenu\": groupAssignments.localized.lengthMenu,\n                \"zeroRecords\": groupAssignments.localized.zeroRecords,\n                \"info\": groupAssignments.localized.info,\n                \"infoEmpty\": groupAssignments.localized.infoEmpty,\n                \"infoFiltered\": groupAssignments.localized.infoFiltered,\n                \"loadingRecords\": groupAssignments.localized.loadingRecords,\n                \"emptyTable\": groupAssignments.localized.emptyTable\n            ];*/\n\t\t\tvar buttonCommon = {\n\t\t\t\texportOptions: {\n\t\t\t\t\tformat: {\n\t\t\t\t\t\tbody: function (data, row, column, node) {\n\t\t\t\t\t\t\t// Strips hidden timestamp <span>\n\t\t\t\t\t\t\treturn data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n            var tableVars = {\n                iDisplayLength: -1,\n                columns: columns,\n                dom: 'Bfrtip',\n                buttons: [\n\t\t\t\t\t$.extend(true, {}, buttonCommon, {\n\t\t\t\t\t\textend: 'csv',\n\t\t\t\t\t\ttext: groupAssignments.localized.buttons.csvExport,\n\t\t\t\t\t\ttitle: 'lesson-report'\n\t\t\t\t\t})\n                ],\n                stateSave: true,\n                //responsive: true,\n            };\n\n            if ($.fn.DataTable.isDataTable( '#uo-lesson-report-table-hidden' )) {\n\n                $( '#uo-lesson-report-table-hidden' ).DataTable().destroy();\n\n                tableVars.data = data;\n\n                tableVars.columns = [\n                    {title: groupAssignments.localized.title, data: 'title', name: 'title', visible: groupAssignments.columns_visibilities.title},\n                    {title: groupAssignments.localized.first_name, data: 'first_name', name: 'first_name', visible: groupAssignments.columns_visibilities.first_name},\n                    {title: groupAssignments.localized.last_name, data: 'last_name', name: 'last_name', visible: groupAssignments.columns_visibilities.last_name},\n                    {title: groupAssignments.localized.author, data: 'author', name: 'author', visible: groupAssignments.columns_visibilities.author},\n                    {title: groupAssignments.localized.status, data: 'status', orderable: true, name: 'status', visible: groupAssignments.columns_visibilities.status},\n                    {title: groupAssignments.localized.points, data: 'points', orderable: false, name: 'points', visible: groupAssignments.columns_visibilities.points},\n                    {title: groupAssignments.localized.assignedCourse, data: 'assignedCourse',orderable: true, name: 'assignedCourse', visible: groupAssignments.columns_visibilities.assignedCourse},\n                    {title: groupAssignments.localized.assignedlesson, data: 'assignedlesson',orderable: true, name: 'assignedlesson', visible: groupAssignments.columns_visibilities.assignedlesson},\n                    {title: groupAssignments.localized.comments, data: 'comments', name: 'comments', visible: groupAssignments.columns_visibilities.comments},\n                    {title: groupAssignments.localized.date, data: 'date', name: 'date', visible: groupAssignments.columns_visibilities.date},\n                ];\n\n            }\n\n            tableVars.language = {\n                processing:        groupAssignments.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupAssignments.localized.searchPlaceholder,\n                lengthMenu:        groupAssignments.localized.lengthMenu,\n                info:              groupAssignments.localized.info,\n                infoEmpty:         groupAssignments.localized.infoEmpty,\n                infoFiltered:      groupAssignments.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupAssignments.localized.loadingRecords,\n                zeroRecords:       groupAssignments.localized.zeroRecords,\n                emptyTable:        groupAssignments.localized.emptyTable,\n                paginate: {\n                    first:         groupAssignments.localized.paginate.first,\n                    previous:      groupAssignments.localized.paginate.previous,\n                    next:          groupAssignments.localized.paginate.next,\n                    last:          groupAssignments.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupAssignments.localized.sortAscending,\n                    sortDescending: groupAssignments.localized.sortDescending\n                }\n            };\n\n            if ( jQuery('#uo-lesson-report-table-hidden').length > 0 ){\n                jQuery('#uo-lesson-report-table-hidden').DataTable(tableVars);\n            }\n\n            $('.buttons-csv').show();\n\n        },\n\n        flattenArray: function (array, remove_stats) {\n\n            var flatArray = [];\n\n            jQuery.each(array, function (key, value) {\n\n                var lesson_name = value;\n                jQuery.each(value.question, function (key2, value2) {\n                    flatArray.push({\n                        \"title\": value.title,\n                        \"first_name\": value.first_name,\n                        \"last_name\": value.last_name,\n                        \"author\": value.author,\n                        \"status\": value.status,\n                        \"points\": value.points,\n                        \"assignedCourse\": value.assignedCourse,\n                        \"assignedlesson\": value.assignedlesson,\n                        \"comments\": value.comments,\n                        \"date\": value.date,\n                    })\n                });\n\n            });\n\n            return flatArray;\n\n        },\n        addColumnsFilter: function (state) {\n            var colFilter_container = $( `<div id=\"${ state.sInstance }-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${ state.sInstance }-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${ state.sInstance }-filter-columns-field\" data-label-enable=\"${ groupAssignments.localized.customizeColumns }\" data-label-disable=\"${ groupAssignments.localized.hideCustomizeColumns }\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n            __this = window.ulgmGroupManagement.Assignments;\n\n            if( state.oSavedState !== null ) {\n                jQuery.each(state.oSavedState.columns, function (key, value) {\n                    if (key > 0) {\n                        var title = state.aoColumns[key].sTitle;\n                        colFilter_container.find( '.dataTables-filter-columns__fields' ).append(__this.addColumnCheckbox(title, key, value.visible));\n                    }\n                });\n            } else {\n                jQuery.each(state.aoColumns, function (key, value) {\n                    if (key > 0) {\n                        var title = state.aoColumns[key].sTitle;\n                        colFilter_container.find( '.dataTables-filter-columns__fields' ).append(__this.addColumnCheckbox(title, key, value.bVisible));\n                    }\n                });\n            }\n            return colFilter_container;\n        },\n        addColumnCheckbox: function (label, column_key, is_visible) {\n            var checkbox = jQuery('<input />', {\n                type: 'checkbox',\n                id: 'dt_' + column_key,\n                value: label,\n                checked: is_visible\n            });\n            checkbox.on('change', function (e) {\n                // Get the column API object\n                var headers = window.ulgmGroupManagement.Assignments.uoTable.columns().header();\n                var current_check = jQuery(this).attr('value');\n                var is_checked = jQuery(this).is(':checked');\n\n                jQuery.each(headers, function (key, selectot) {\n                    if (jQuery(selectot).html() === current_check) {\n                        var column = window.ulgmGroupManagement.Assignments.uoTable.column(key);\n                        if (is_checked) {\n                            // Toggle the visibility\n                            column.visible(true);\n                        } else {\n                            column.visible(false);\n                        }\n                    }\n                });\n\n            });\n            var $label = jQuery('<label/>').append(checkbox).append(label);\n            return $label;\n        },\n        create_options: function( source, ids ){\n            /*\n            * @param source string, values \"group\", \"course\", \"lesson\"\n            * @param ids    array,  ids of options that have to be shown\n            *\n            * @return array of jQuery DOM elements with the option elements\n            */\n\n            let options = [];\n\n            // Convert parameters to int\n            ids = ids.map( Number );\n\n            // Add empty option\n            // if there are more then one option\n            if( ids.length > 1 ){\n                ids.push(0);\n            }\n\n\n            // Get options by ID\n            this.elements.select[source].options.each(function(){\n                let $this   = $(this),\n                    id      = parseInt( $this.val() );\n                $this.show();\n                if ( ids.indexOf( id ) != -1 ){\n                    options.push( $this );\n                }\n            });\n\n            // Return options\n            return options;\n        },\n\n        select_option: function( $select, value ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[value=\"' + value + '\"]' ).prop( 'selected', true );\n        },\n        __select_option: function( $select, index ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[' + index + ']' ).prop( 'selected', true );\n        },\n        addEvents: function (){\n            var _this = this;\n\n            // Handle click on \"Select all\" control\n            $('#uo-groups-assignments-management').on('click','#uo-assignments-select-all', function(){\n                // Check/uncheck checkboxes for all rows in the table\n                $('input[name=\"post[]\"]').prop('checked', this.checked);\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-assignments-buttons').show();\n                } else {\n                    $('.group-assignments-buttons').hide();\n                    $('#uo-assignments-select-all').prop('checked', false);\n                }\n            });\n\n            // Handle click on checkbox to set state of \"Select all\" control\n            $('#uo-group-assignments-table tbody').on('change', 'input[name=\"post[]\"]', function(){\n                // If checkbox is not checked\n                if(!this.checked){\n                    var el = $('#uo-assignments-select-all').get(0);\n                    // If \"Select all\" control is checked and has 'indeterminate' property\n                    if(el && el.checked && ('indeterminate' in el)){\n                        // Set visual state of \"Select all\" control\n                        // as 'indeterminate'\n                        el.indeterminate = true;\n                    }\n                }\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-assignments-buttons').show();\n                } else {\n                    $('.group-assignments-buttons').hide();\n                    $('#uo-assignments-select-all').prop('checked', false);\n                }\n            });\n\n            $('#uo-groups-assignments-management').on('click','#group-approve-assignments-button',function(){\n                if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('approve_assignment');\n                }\n                //jQuery('form#uo-groups-assignments-management-form').submit();\n            });\n\n            $('#uo-groups-assignments-management').on('click','#group-trash-assignments-button',function(){\n                if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('trash_assignment');\n                }\n                //jQuery('form#uo-groups-assignments-management-form').submit();\n\n            });\n\n            this.elements.select.group.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // Hide lesson select\n                //_this.elements.select.lesson.element.hide();\n                _this.elements.select.course.element.show();\n\n                // Group ID\n                let group_id = $this.val();\n                // Return if course id is 0\n                if( group_id == 0 || group_id == null ){\n                    _this.elements.select.course.element.empty();\n                    let options_course = _this.create_options( 'course', [0] );\n                    _this.elements.select.course.element.html(options_course);\n                    _this.elements.select.course.element.attr('disabled','disabled');\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    return;\n                }\n                // Get relationships\n                let courses_to_show = groupAssignments.courseGrouplessons[ group_id ];\n                courses_to_show = courses_to_show === undefined ? [] : courses_to_show;\n\n                // Create options\n                let options = _this.create_options( 'course', courses_to_show );\n\n                if ( options.length > 0 ){\n                     // Show \"Select course\" dropdown\n                    _this.elements.select.course.element.show();\n                    _this.elements.select.course.element.html( options );\n                    _this.elements.select.course.no_element.hide();\n                    //_this.elements.select.course.element.html(_this.elements.select.course.element.find('option').sort(function(x, y) {\n                        // to change to descending order switch \"<\" for \">\"\n                    //    return $(x).text() > $(y).text() ? 1 : -1;\n                    //}));\n                    _this.elements.select.course.element.removeAttr('disabled');\n\n                    // Select empty option\n\n                    _this.__select_option( _this.elements.select.course.element, 0 );\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.groupId = group_id;\n                    // trigger change after value set on load\n                    _this.elements.select.course.element.trigger('change');\n                }\n                else {\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.course.element.empty();\n                    let options_course = _this.create_options( 'course', [0] );\n                    _this.elements.select.course.element.html(options_course);\n                    _this.elements.select.course.element.attr('disabled','disabled');\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.groupId = group_id;\n                }\n                // Request data\n                window.ulgmGroupManagement.Assignments.getAssignmentsData( 0, 0, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n            });\n\n            this.elements.select.course.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // Course ID\n                let course_id = $this.val();\n                // Return if course id is 0\n                if( course_id == 0){\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    return;\n                }\n\n                // Get relationships\n                let lessons_to_show = groupAssignments.relationships[ window.ulgmGroupManagement.Assignments.groupId ][ course_id ];\n                lessons_to_show = lessons_to_show === undefined ? [] : lessons_to_show;\n\n                // Create options\n                let options = _this.create_options( 'lesson', lessons_to_show );\n\n                if ( options.length > 0 ) {\n                    // Show \"Select lesson\" dropdown\n                    _this.elements.select.lesson.element.show();\n                    _this.elements.select.lesson.element.html(options);\n                    jQuery('#uo-group-report-lessons option').show();\n                    _this.elements.select.lesson.no_element.hide();\n\n                    // Select empty option\n                    _this.__select_option( _this.elements.select.lesson.element, 0 );\n                    _this.elements.select.lesson.element.removeAttr('disabled');\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.courseId = course_id;\n                    // trigger change after value set on load\n                    _this.elements.select.lesson.element.trigger('change');\n                }else{\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.courseId = course_id;\n                    // Request data\n                    window.ulgmGroupManagement.Assignments.getAssignmentsData( 0, window.ulgmGroupManagement.Assignments.courseId, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n                }\n\n            });\n\n            this.elements.select.lesson.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // lesson ID\n                let lesson_id = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Assignments.lessonId = lesson_id;\n\n                // Request data\n                window.ulgmGroupManagement.Assignments.getAssignmentsData( lesson_id, window.ulgmGroupManagement.Assignments.courseId, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n            });\n\n            this.elements.select.status.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // lesson ID\n                let status = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Assignments.status = status;\n\n                // Request data\n                window.ulgmGroupManagement.Assignments.getAssignmentsData( window.ulgmGroupManagement.Assignments.lessonId, window.ulgmGroupManagement.Assignments.courseId, window.ulgmGroupManagement.Assignments.groupId, status );\n            });\n\n            // Add event listener for opening and closing details\n            $('#uo-lesson-report-table').on('click', 'td.details-control', function () {\n\n                var tr = $(this).closest('tr');\n                var row = window.ulgmGroupManagement.Assignments.uoTable.row(tr);\n\n                if (row.child.isShown()) {\n                    // This row is already open - close it\n                    row.child.hide();\n                    tr.removeClass('shown');\n                }\n                else {\n                    // Open this row\n                    row.child(window.ulgmGroupManagement.Assignments.format(row.data())).show();\n                    tr.addClass('shown');\n                }\n            });\n\n        },\n\n        format: function (d) {\n\n            var rows = '';\n            $.each(d.answer, function (key, value) {\n                rows +=\n                    '<tr>' +\n                    '<td>' + d.question[key] + '</td>' +\n                    '<td>' + value + '</td>' +\n                    '</tr>';\n            });\n            // `d` is the original data object for the row\n            return '<table cellpadding=\"5\" cellspacing=\"0\" border=\"0\" style=\"padding-left:50px;\">' + rows + '</table>';\n        },\n        isNormalInteger: function (str) {\n            var n = ~~Number(str);\n            return String(n) === str && n > 0;\n        },\n\n        getAssignmentsData: function (lessonId, courseId, groupId, status) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            var i = 0;\n\n            var loading = setInterval(function () {\n                i = ++i % 4;\n                $(\"#uo-group-assignments-table tbody\").html(\"<div id='group-loader'>\" + groupAssignments.localized.loadingRecords + new Array(i + 1).join(\".\") + \"</div>\");\n            }, 500);\n\n\n            var dataVars = {\n                groupId: groupId,\n                lessonId: lessonId,\n                courseId: courseId,\n                status: status,\n            };\n\n            $.ajax({\n\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'get_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    clearInterval(loading);\n                    $('#group-loader').remove();\n\n                    window.ulgmGroupManagement.Assignments.createTable(response);\n                    window.ulgmGroupManagement.Assignments.createTableHidden(response);\n\n\n                },\n                fail: function (response) {\n                    alert('Rest Call Failed');\n                }\n\n            });\n\n        },\n        editAssignmentsData: function (postId) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            var dataVars = {\n                assignment_id: postId,\n                action: 'edit_assignments',\n                post_type:'sfwd-assignment',\n                security:groupAssignments.ajax_nonce\n            };\n\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'edit_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    $(\".modal\").remove();\n                    $(response.html).appendTo('body').modal();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        saveAssignmentsData: function () {\n            var dataVars = $('#edit_assignment_form').serialize();\n            var spinner = $('.uo-modal-spinner');\n            //$('#group-management-message').hide();\n            $('.uo-groups-message-ok').hide();\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'save_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    window.ulgmGroupManagement.Assignments.elements.select.lesson.element.trigger('change');\n                    //$('#group-management-message').html(response.message).show();\n                    $('.uo-groups-message-ok').html(response.message).show();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        actionsAssignment: function ( dataVars ) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'save_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    window.ulgmGroupManagement.Assignments.elements.select.lesson.element.trigger('change');\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        }\n    };\n\n\n})(jQuery);\n","(function ($) { // Self Executing function with $ alias for jQuery\n\n    /**\n     *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n     *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n     */\n    $(document).ready(function () {\n\n        if ($('#uo-group-essays-table').length > 0 ){\n            window.ulgmGroupManagement.Essays.constructor();\n\n            jQuery('form#uo-groups-essays-management-form').on('click', 'button.essay_approve_single,a.essay_approve_single', function (e) {\n                e.preventDefault();\n                var essay_id = jQuery(this).attr('id').replace('essay_approve_', '');\n                essay_id = essay_id.replace('a_', '');\n                if ((typeof essay_id !== 'undefined') && (essay_id != '')) {\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').val(essay_id);\n                    }\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('graded');\n                    }\n                    //jQuery('form#uo-groups-essays-management-form').submit();\n                    var dataVars = $('form#uo-groups-essays-management-form').serialize();\n                    window.ulgmGroupManagement.Essays.actionsEssays(dataVars);\n                }\n            });\n            jQuery('form#uo-groups-essays-management-form').on('click','a.delete_essay_single',function(e) {\n                e.preventDefault();\n                var essay_id = jQuery(this).attr('id').replace('a_essay_trash_', '');\n\n                if ( ( typeof essay_id !== 'undefined' ) && ( essay_id != '' ) ) {\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').val(essay_id);\n                    }\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('trash_essay');\n                    }\n                    var dataVars = $('form#uo-groups-essays-management-form').serialize();\n                    window.ulgmGroupManagement.Essays.actionsEssays(dataVars);\n                }\n            });\n\n\n            $('#uo-group-essays-table').on('click','a.edit_essay_single',function(){\n                var post_id = $(this).data('essay-id');\n                window.ulgmGroupManagement.Essays.editEssaysData(post_id);\n            });\n            $('body').on('click','button#uo-essay-edit-button',function(){\n                window.ulgmGroupManagement.Essays.saveEssaysData();\n            });\n            $('body').on('click','#uo-essay-update-button',function(){\n                window.ulgmGroupManagement.Essays.saveEssaysData();\n            });\n\n            var transitionTimeout;\n            $( '#uo-group-essays-table tbody' ).on({\n                mouseenter: function() {\n                    clearTimeout( transitionTimeout );\n                    focusedRowActions = $( this ).find( '.row-actions' );\n                    // transitionTimeout is necessary for Firefox, but Chrome won't remove the CSS class without a little help.\n                    $( '.row-actions' ).not( this ).removeClass( 'visible' );\n                    focusedRowActions.addClass( 'visible' );\n                },\n                mouseleave: function() {\n                    // Tabbing between post title and .row-actions links needs a brief pause, otherwise\n                    // the .row-actions div gets hidden in transit in some browsers (ahem, Firefox).\n                    transitionTimeout = setTimeout( function() {\n                        focusedRowActions.removeClass( 'visible' );\n                    }, 30 );\n                }\n            }, 'tr' );\n        }\n    });\n\n\n    window.ulgmGroupManagement.Essays = {\n\n        uoTable: null,\n\n        uoTableHidden: null,\n\n        lessonId: 0,\n\n        groupId: 0,\n\n        courseId: 0,\n\n        quizId: 0,\n\n        status: 'ungraded',\n\n        elements: {\n            select: {\n                group: {\n                    element: null,\n                    options: null\n                },\n                course: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                lesson: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                quiz: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                status: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n            }\n        },\n\n        constructor: function () {\n            this.elements.select.group.element = $('#uo-group-report-group');\n            this.elements.select.course.element = $('#uo-group-report-courses');\n            this.elements.select.lesson.element = $('#uo-group-report-lessons');\n            this.elements.select.quiz.element = $('#uo-group-report-quizzes');\n            this.elements.select.status.element = $('#uo-group-report-status');\n            this.elements.select.course.no_element = $('#uo-group-report-nocourses');\n            this.elements.select.lesson.no_element = $('#uo-group-report-nolessons');\n            this.elements.select.quiz.no_element = $('#uo-group-report-noquizzes');\n\n            this.elements.select.group.options  = $('#uo-group-report-group option');\n            this.elements.select.course.options = $('#uo-group-report-courses option');\n            this.elements.select.lesson.options   = $('#uo-group-report-lessons option');\n            this.elements.select.quiz.options   = $('#uo-group-report-quizzes option');\n            this.elements.select.status.options   = $('#uo-group-report-status option');\n            this.status = this.elements.select.status.element.val();\n            this.createTable();\n            this.createTableHidden();\n            this.addEvents();\n            // Request data\n            window.ulgmGroupManagement.Essays.getEssaysData( 0, 0, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status );\n        },\n\n\t\tgetParam: function(name) {\n\t\t\tname = name.replace(/[[]/, \"\\[\").replace(/[]]/, \"\\]\");\n\t\t\tvar regex = new RegExp(\"[\\?&]\" + name + \"=([^&#]*)\"),\n\t\t\t\tresults = regex.exec(location.search);\n\t\t\treturn results === null ? \"\" : decodeURIComponent(results[1].replace(\"+\", \" \"));\n\t\t},\n        createTable: function (data) {\n\n            const $table = document.getElementById( 'uo-group-essays-table' );\n\n            var columns = [\n                {\n                    data:      'id',\n                    title:     groupEssays.localized.idColumn,\n                    className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id',\n                },\n                {\n                    data:      'title',\n                    title:     groupEssays.localized.title,\n                    visible:   groupEssays.columns_visibilities.title,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                },\n                {\n                    data:      'first_name',\n                    title:     groupEssays.localized.first_name,\n                    visible:   groupEssays.columns_visibilities.first_name,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                },\n                {\n                    data:      'last_name',\n                    title:     groupEssays.localized.last_name,\n                    visible:   groupEssays.columns_visibilities.last_name,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                },\n                {\n                    data:      'author',\n                    title:     groupEssays.localized.author,\n                    visible:   groupEssays.columns_visibilities.author,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                },\n                {\n                    data:      'status',\n                    title:     groupEssays.localized.status,\n                    visible:   groupEssays.columns_visibilities.status,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                },\n                {\n                    data:      'points',\n                    title:     groupEssays.localized.points,\n                    visible:   groupEssays.columns_visibilities.points,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                },\n                {\n                    data:      'question_text',\n                    title:     groupEssays.localized.question_text,\n                    visible:   groupEssays.columns_visibilities.question_text,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                },\n                {\n                    data:      'content',\n                    title:     groupEssays.localized.content,\n                    visible:   groupEssays.columns_visibilities.content,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                },\n                {\n                    data:      'assignedCourse',\n                    title:     groupEssays.localized.assignedCourse,\n                    visible:   groupEssays.columns_visibilities.assignedCourse,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                },\n                {\n                    data:      'assignedlesson',\n                    title:     groupEssays.localized.assignedlesson,\n                    visible:   groupEssays.columns_visibilities.assignedlesson,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                },\n                {\n                    data:      'assignedquiz',\n                    title:     groupEssays.localized.assignedquiz,\n                    visible:   groupEssays.columns_visibilities.assignedquiz,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                },\n                {\n                    data:      'comments',\n                    title:     groupEssays.localized.comments,\n                    visible:   groupEssays.columns_visibilities.comments,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                },\n                {\n                    data:      'date',\n                    title:     groupEssays.localized.date,\n                    visible:   groupEssays.columns_visibilities.date,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                },\n            ];\n\n            const buttonsShared = {\n                exportOptions: {\n                    columns: ':visible',\n\n                    format: {\n                        body: function ( data, row, column, node ) {\n                            // Check if it's the \"Status\" column\n                            if ( node.classList.contains( 'ulg-report-essays-cell--status' ) ) {\n                                // Check if it has the \"Approve\" button inside\n                                if ( node.querySelector( 'button.essay_approve_single' ) ) {\n                                    // Replace data. If it has the button, then it's \"Ungraded\"\n                                    data = groupEssays.i18n.ungraded;\n                                }\n                            }\n                            // Check if it's the \"Points\" column\n                            else if ( node.classList.contains( 'ulg-report-essays-cell--points' ) ) {\n                                // Check if it has an input\n                                const $input = node.querySelector( 'input' );\n                                if ( $input ) {\n                                    // Format data\n                                    data = `${ $input.value } ${ node.innerText.trim() }`;\n                                }\n                            } \n                            // Format all other columns\n                            else {\n                                // Remove HTML\n                                data = node.innerText.trim();\n                            }\n\n                            // Remove HTML\n                            return data;\n                        }\n                    }\n                },\n\n                filename: () => {\n                    // File name parts\n                    const filenameParts = [\n                        // Base name\n                        groupEssays.i18n.reportBaseName\n                    ];\n\n                    // Get the ID of the dropdowns used to set the filters\n                    const filtersFields = [\n                        'uo-group-report-group',\n                        'uo-group-report-courses',\n                        'uo-group-report-lessons',\n                        'uo-group-report-quizzes',\n                        'uo-group-report-status'\n                    ];\n\n                    // Get the value of the filters\n                    filtersFields.forEach( ( filterID ) => {\n                        // Get the field of the filter\n                        const $filter = document.getElementById( filterID );\n\n                        try {\n                            // Check if it exists\n                            if ( $filter ) {\n                                // Get the value\n                                const filterValue = $filter.value;\n\n                                // Make sure the value is not empty\n                                if (\n                                    filterValue !== ''\n                                    && filterValue != '0'\n                                ) {\n                                    // Get the TEXT of the option\n                                    filenameParts.push(\n                                        $filter.querySelector( `option[value=\"${ filterValue }\"]` )\n                                            .innerText\n                                            .trim()\n                                    );\n                                }\n                            }\n                        } catch ( e ) {}\n                    } );\n\n                    // Return the name\n                    return filenameParts.join( ' - ' );\n                }, \n            }\n\n            const reportButtons = [];\n\n            // Check if we have to add the CSV button\n            if ( $table.dataset.csv == 'show' ) {\n                reportButtons.push( Object.assign( {}, buttonsShared, {\n                    extend: 'csv',\n                    text: groupEssays.i18n.exportCSV,\n                } ) );\n            }\n\n            // Check if we have to add the Excel button\n            if ( $table.dataset.excel == 'show' ) {\n                reportButtons.push( Object.assign( {}, buttonsShared, {\n                    extend: 'excelHtml5',\n                    text: groupEssays.i18n.exportExcel,\n                } ) );\n            }\n\n            var tableVars = {\n                aLengthMenu: [\n                    [15, 30, 60, -1],\n                    [15, 30, 60, groupEssays.localized.all]\n                ],\n                responsive: true,\n                iDisplayLength: 30,\n                columns: columns,\n                columnDefs: [{\n                    \"targets\": 0,\n                    \"orderable\": false,\n                    \"searchable\": false,\n                    'render': function (data, type, full, meta){\n                        return '<input type=\"checkbox\" name=\"post[]\" value=\"' + $('<div/>').text(data).html() + '\">';\n                    },\n                    'checkboxes': {\n                        'selectRow': true\n                    }\n                }],\n                select: {\n                    style: 'multi',\n                    selector: 'td:first-child'\n                },\n                stateSave: true,\n\n                dom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n                buttons: reportButtons,\n\n            };\n\n            if (null !== this.uoTable) {\n\n                this.uoTable.destroy();\n\n                tableVars.data = data;\n\n                tableVars.columnDefs = [{\n                    className: 'uo-groups__cell-checkbox',\n                    targets:   [0]\n                }];\n\n                tableVars.columns = [\n                    {\n                        data:      'id',\n                        title:     groupEssays.localized.idColumn,\n                        className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id',\n                    },\n                    {\n                        data:      'title',\n                        title:     groupEssays.localized.title,\n                        visible:   groupEssays.columns_visibilities.title,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                    },\n                    {\n                        data:      'first_name',\n                        title:     groupEssays.localized.first_name,\n                        visible:   groupEssays.columns_visibilities.first_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                    },\n                    {\n                        data:      'last_name',\n                        title:     groupEssays.localized.last_name,\n                        visible:   groupEssays.columns_visibilities.last_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                    },\n                    {\n                        data:      'author',\n                        title:     groupEssays.localized.author,\n                        visible:   groupEssays.columns_visibilities.author,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                    },\n                    {\n                        data:      'status',\n                        title:     groupEssays.localized.status,\n                        visible:   groupEssays.columns_visibilities.status,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                    },\n                    {\n                        data:      'points',\n                        title:     groupEssays.localized.points,\n                        visible:   groupEssays.columns_visibilities.points,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                    },\n                    {\n                        data:      'question_text',\n                        title:     groupEssays.localized.question_text,\n                        visible:   groupEssays.columns_visibilities.question_text,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                    },\n                    {\n                        data:      'content',\n                        title:     groupEssays.localized.content,\n                        visible:   groupEssays.columns_visibilities.content,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                    },\n                    {\n                        data:      'assignedCourse',\n                        title:     groupEssays.localized.assignedCourse,\n                        visible:   groupEssays.columns_visibilities.assignedCourse,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                    },\n                    {\n                        data:      'assignedlesson',\n                        title:     groupEssays.localized.assignedlesson,\n                        visible:   groupEssays.columns_visibilities.assignedlesson,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                    },\n                    {\n                        data:      'assignedquiz',\n                        title:     groupEssays.localized.assignedquiz,\n                        visible:   groupEssays.columns_visibilities.assignedquiz,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                    },\n                    {\n                        data:      'comments',\n                        title:     groupEssays.localized.comments,\n                        visible:   groupEssays.columns_visibilities.comments,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                    },\n                    {\n                        data:      'date',\n                        title:     groupEssays.localized.date,\n                        visible:   groupEssays.columns_visibilities.date,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                    },\n                ];\n\n            }\n            tableVars.language = {\n                processing:        groupEssays.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupEssays.localized.searchPlaceholder,\n                lengthMenu:        groupEssays.localized.lengthMenu,\n                info:              groupEssays.localized.info,\n                infoEmpty:         groupEssays.localized.infoEmpty,\n                infoFiltered:      groupEssays.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupEssays.localized.loadingRecords,\n                zeroRecords:       groupEssays.localized.zeroRecords,\n                emptyTable:        groupEssays.localized.emptyTable,\n                paginate: {\n                    first:         groupEssays.localized.paginate.first,\n                    previous:      groupEssays.localized.paginate.previous,\n                    next:          groupEssays.localized.paginate.next,\n                    last:          groupEssays.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupEssays.localized.sortAscending,\n                    sortDescending: groupEssays.localized.sortDescending\n                }\n            };\n\n            tableVars.initComplete = function(s,d) {\n                jQuery(window.ulgmGroupManagement.Essays.addColumnsFilter(s)).insertAfter('#uo-group-essays-table_filter');\n            };\n\n            this.uoTable = jQuery('#uo-group-essays-table');\n\n            if ( jQuery('#uo-group-essays-table').length > 0 ){\n                this.uoTable = jQuery('#uo-group-essays-table').DataTable(tableVars);\n                new jQuery.fn.dataTable.ColReorder( this.uoTable );\n\t\t\t\tvar search = window.ulgmGroupManagement.Essays.getParam('search');\n\t\t\t\t// console.log(window.ulgmGroupManagement.Essays.uoTable);\n\t\t\t\tif (search) window.ulgmGroupManagement.Essays.uoTable.search(search).draw();\n            }\n\n\n        },\n\n        createTableHidden: function (data) {\n\n            var columns = [\n                {\n                    title:     groupEssays.localized.title,\n                    data:      'title',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                },\n                {\n                    title:     groupEssays.localized.first_name,\n                    data:      'first_name',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                },\n                {\n                    title:     groupEssays.localized.last_name,\n                    data:      'last_name',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                },\n                {\n                    title:     groupEssays.localized.author,\n                    data:      'author',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                },\n                {\n                    title:     groupEssays.localized.status,\n                    data:      'status',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                },\n                {\n                    title:     groupEssays.localized.points,\n                    data:      'points',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                },\n                {\n                    title:     groupEssays.localized.question_text,\n                    data:      'question_text',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                },\n                {\n                    title:     groupEssays.localized.content,\n                    data:      'content',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                },\n                {\n                    title:     groupEssays.localized.assignedCourse,\n                    data:      'assignedCourse',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                },\n                {\n                    title:     groupEssays.localized.assignedlesson,\n                    data:      'assignedlesson',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                },\n                {\n                    title:     groupEssays.localized.assignedquiz,\n                    data:      'assignedquiz',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                },\n                {\n                    title:     groupEssays.localized.comments,\n                    data:      'comments',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                },\n                {\n                    title:     groupEssays.localized.date,\n                    data:      'date',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                },\n            ];\n\n            var tableVars = {\n                iDisplayLength: -1,\n                columns: columns,\n                dom: 'Bfrtip',\n                buttons: [\n                    {\n                        extend: 'csv',\n                        text: groupEssays.localized.buttons.csvExport,\n                        title: 'lesson-report'\n                    }\n                ],\n                stateSave: true,\n                responsive: true,\n            };\n\n            if ( $.fn.DataTable.isDataTable( '#uo-lesson-report-table-hidden' ) ){\n\n                $( '#uo-lesson-report-table-hidden' ).DataTable().destroy();\n\n                tableVars.data = data;\n\n                tableVars.columns = [\n                    {\n                        data:      'id',\n                        title:     groupEssays.localized.idColumn,\n                        className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id',\n                    },\n                    {\n                        data:      'title',\n                        title:     groupEssays.localized.title,\n                        visible:   groupEssays.columns_visibilities.title,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                    },\n                    {\n                        data:      'first_name',\n                        title:     groupEssays.localized.first_name,\n                        visible:   groupEssays.columns_visibilities.first_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                    },\n                    {\n                        data:      'last_name',\n                        title:     groupEssays.localized.last_name,\n                        visible:   groupEssays.columns_visibilities.last_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                    },\n                    {\n                        data:      'author',\n                        title:     groupEssays.localized.author,\n                        visible:   groupEssays.columns_visibilities.author,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                    },\n                    {\n                        data:      'status',\n                        title:     groupEssays.localized.status,\n                        visible:   groupEssays.columns_visibilities.status,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                    },\n                    {\n                        data:      'points',\n                        title:     groupEssays.localized.points,\n                        visible:   groupEssays.columns_visibilities.points,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                    },\n                    {\n                        data:      'question_text',\n                        title:     groupEssays.localized.question_text,\n                        visible:   groupEssays.columns_visibilities.question_text,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                    },\n                    {\n                        data:      'content',\n                        title:     groupEssays.localized.content,\n                        visible:   groupEssays.columns_visibilities.content,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                    },\n                    {\n                        data:      'assignedCourse',\n                        title:     groupEssays.localized.assignedCourse,\n                        visible:   groupEssays.columns_visibilities.assignedCourse,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                    },\n                    {\n                        data:      'assignedlesson',\n                        title:     groupEssays.localized.assignedlesson,\n                        visible:   groupEssays.columns_visibilities.assignedlesson,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                    },\n                    {\n                        data:      'assignedquiz',\n                        title:     groupEssays.localized.assignedquiz,\n                        visible:   groupEssays.columns_visibilities.assignedquiz,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                    },\n                    {\n                        data:      'comments',\n                        title:     groupEssays.localized.comments,\n                        visible:   groupEssays.columns_visibilities.comments,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                    },\n                    {\n                        data:      'date',\n                        title:     groupEssays.localized.date,\n                        visible:   groupEssays.columns_visibilities.date,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                    },\n                ];\n\n            }\n\n            tableVars.language = {\n                processing:        groupEssays.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupEssays.localized.searchPlaceholder,\n                lengthMenu:        groupEssays.localized.lengthMenu,\n                info:              groupEssays.localized.info,\n                infoEmpty:         groupEssays.localized.infoEmpty,\n                infoFiltered:      groupEssays.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupEssays.localized.loadingRecords,\n                zeroRecords:       groupEssays.localized.zeroRecords,\n                emptyTable:        groupEssays.localized.emptyTable,\n                paginate: {\n                    first:         groupEssays.localized.paginate.first,\n                    previous:      groupEssays.localized.paginate.previous,\n                    next:          groupEssays.localized.paginate.next,\n                    last:          groupEssays.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupEssays.localized.sortAscending,\n                    sortDescending: groupEssays.localized.sortDescending\n                }\n            };\n\n            this.uoTableHidden = jQuery('#uo-lesson-report-table-hidden');\n\n            if ( jQuery('#uo-lesson-report-table-hidden').length > 0 ){\n                this.uoTableHidden = jQuery('#uo-lesson-report-table-hidden').DataTable(tableVars);\n            }\n\n            $('.buttons-csv').show();\n\n        },\n\n        flattenArray: function (array, remove_stats) {\n\n            var flatArray = [];\n\n            jQuery.each(array, function (key, value) {\n\n                var lesson_name = value;\n                jQuery.each(value.question, function (key2, value2) {\n                    flatArray.push({\n                        \"title\": value.title,\n                        \"author\": value.author,\n                        \"status\": value.status,\n                        \"points\": value.points,\n                        \"question_text\": value.question_text,\n                        \"content\": value.content,\n                        \"assignedCourse\": value.assignedCourse,\n                        \"assignedlesson\": value.assignedlesson,\n                        \"assignedquiz\": value.assignedquiz,\n                        \"comments\": value.comments,\n                        \"date\": value.date,\n                    })\n                });\n\n            });\n\n            return flatArray;\n\n        },\n\n        create_options: function( source, ids = [] ){\n            /*\n            * @param source string, values \"group\", \"course\", \"lesson\"\n            * @param ids    array,  ids of options that have to be shown\n            *\n            * @return array of jQuery DOM elements with the option elements\n            */\n\n            let options = [];\n\n            // Convert parameters to int\n            ids = ids.map( Number );\n\n            // Add empty option\n            // if there are more then one option\n            if ( ids.length > 1 ){\n                ids.push( 0 );\n            }\n\n            // Get options by ID\n            this.elements.select[ source ].options.each(function(){\n                let $this   = $(this).clone(),\n                    id      = parseInt( $this.val() );\n\n                $this.show();\n                if ( ids.indexOf( id ) != -1 ){\n                    options.push( $this );\n                }\n            });\n\n            // If there is only one option and it's a \"Select a x\" option\n            // Then don't return any option\n            if ( options.length == 1 && parseInt( options[ 0 ].val() ) == 0 ){\n                options = [];\n            }\n\n            // Check if there aren't options selected\n            if ( options.length == 0 ){\n                // Add the no option\n                options.push( this.elements.select[ source ].options.filter( '.ulgm-essays-no-results' ) );\n            }\n\n            // Return options\n            return options;\n        },\n\n        select_option: function( $select, value ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[value=\"' + value + '\"]' ).prop( 'selected', true );\n        },\n        __select_option: function( $select, index ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[' + index + ']' ).prop( 'selected', true );\n        },\n        addColumnsFilter: function (state) {\n            var colFilter_container = $( `<div id=\"${ state.sInstance }-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${ state.sInstance }-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${ state.sInstance }-filter-columns-field\" data-label-enable=\"${ groupEssays.localized.customizeColumns }\" data-label-disable=\"${ groupEssays.localized.hideCustomizeColumns }\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n            __this = window.ulgmGroupManagement.Essays;\n\n            if( state.oSavedState !== null ) {\n\n                jQuery.each(state.oSavedState.columns, function (key, value) {\n                    if (key > 0) {\n                        var title = state.aoColumns[key].sTitle;\n                        colFilter_container.find( '.dataTables-filter-columns__fields' ).append(__this.addColumnCheckbox(title, key, value.visible));\n                    }\n                });\n            } else {\n                jQuery.each(state.aoColumns, function (key, value) {\n                    if (key > 0) {\n                        var title = state.aoColumns[key].sTitle;\n                        colFilter_container.find( '.dataTables-filter-columns__fields' ).append(__this.addColumnCheckbox(title, key, value.bVisible));\n                    }\n                });\n            }\n\n            return colFilter_container;\n        },\n        addColumnCheckbox: function (label, column_key, is_visible) {\n            var checkbox = jQuery('<input />', {\n                type: 'checkbox',\n                id: 'dt_' + column_key,\n                value: label,\n                checked: is_visible\n            });\n            checkbox.on('change', function (e) {\n                // Get the column API object\n                var headers = window.ulgmGroupManagement.Essays.uoTable.columns().header();\n                var current_check = jQuery(this).attr('value');\n                var is_checked = jQuery(this).is(':checked');\n\n                jQuery.each(headers, function (key, selectot) {\n                    if (jQuery(selectot).html() === current_check) {\n                        var column = window.ulgmGroupManagement.Essays.uoTable.column(key);\n                        if (is_checked) {\n                            // Toggle the visibility\n                            column.visible(true);\n                        } else {\n                            column.visible(false);\n                        }\n                    }\n                });\n\n            });\n            var $label = jQuery('<label/>').append(checkbox).append(label);\n            return $label;\n        },\n        addEvents: function (){\n            var _this = this;\n\n            // Handle click on \"Select all\" control\n            $('#uo-groups-essays-management').on('click',' #uo-essays-select-all', function(){\n                // Check/uncheck checkboxes for all rows in the table\n                $('input[name=\"post[]\"]').prop('checked', this.checked);\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-essays-buttons').show();\n                } else {\n                    $('.group-essays-buttons').hide();\n                    $('#uo-essays-select-all').prop('checked', false);\n                }\n            });\n\n            // Handle click on checkbox to set state of \"Select all\" control\n            $('#uo-group-essays-table tbody').on('change', 'input[name=\"post[]\"]', function(){\n                // If checkbox is not checked\n                if(!this.checked){\n                    var el = $('#uo-essays-select-all').get(0);\n                    // If \"Select all\" control is checked and has 'indeterminate' property\n                    if(el && el.checked && ('indeterminate' in el)){\n                        // Set visual state of \"Select all\" control\n                        // as 'indeterminate'\n                        el.indeterminate = true;\n                    }\n                }\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-essays-buttons').show();\n                } else {\n                    $('.group-essays-buttons').hide();\n                    $('#uo-essays-select-all').prop('checked', false);\n                }\n            });\n\n            $('#uo-groups-essays-management').on('click','#group-approve-essays-button',function(){\n                if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('approve_essay');\n                }\n                jQuery('form#uo-groups-essays-management-form').submit();\n            });\n\n            $('#uo-groups-essays-management').on('click','#group-trash-essays-button',function(){\n                if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('trash_essay');\n                }\n                jQuery('form#uo-groups-essays-management-form').submit();\n            });\n\n            // Listen changes to the \"Group\" dropdown\n            this.elements.select.group.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $( this );\n\n                // DEBUG: console.log( '--------- GROUP ---------' );\n                // DEBUG: console.log( '-- GROUP: Value changed' );\n\n                // COURSE: Show\n                // _this.elements.select.course.element.show();\n\n                // Group ID\n                let group_id = $this.val();\n\n                // Check if the group ID is empty (\"Select an option\")\n                if ( group_id == 0 || group_id == null ){\n                    // COURSE: Remove all the options\n                    _this.elements.select.course.element.empty();\n                    // COURSE: Get the \"Select course\" option\n                    let options_course = _this.create_options( 'course' );\n                    // COURSE: Set the options\n                    _this.elements.select.course.element.html( options_course );\n\n                    // LESSON: Remove all the options\n                    _this.elements.select.lesson.element.empty();\n                    // LESSON: Get the \"Select lesson\" option\n                    let options = _this.create_options( 'lesson' );\n                    // LESSON: Set the options\n                    _this.elements.select.lesson.element.html( options );\n\n                    // QUIZ: Get the \"Select lesson\" option\n                    let options_quiz = _this.create_options( 'quiz' );\n                    // QUIZ: Get the \"Select lesson\" option\n                    _this.elements.select.quiz.element.html( options_quiz );\n\n                    // Render the tables again\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n\n                    // Return\n                    return;\n                }\n\n                // Get the relationships\n                let courses_to_show = groupEssays.courseGrouplessons[ group_id ];\n                courses_to_show     = courses_to_show === undefined ? [] : courses_to_show;\n\n                // Create the options\n                let options = _this.create_options( 'course', courses_to_show );\n\n                // Check if the options are valid options\n                let hasValidOptions = options.reduce(( accumulator, currentValue ) => {\n                    return accumulator && currentValue.val() !== '';\n                }, true );\n\n                if ( hasValidOptions && options.length > 0 ){\n                    // DEBUG: console.log( '-- COURSES: There are courses' );\n                    // DEBUG: console.log( '-- COURSES: Hide the no results option' );\n\n                    // COURSE: Hide the \"no results\" option\n                    $noResultsOption = _this.elements.select[ 'course' ].element.find( '.ulgm-essays-no-results' );\n                    $noResultsOption.hide();\n\n                    // Add the options to the COURSE dropdown\n                    _this.elements.select.course.element.html( options );\n                    _this.elements.select.course.no_element.hide();\n\n                    // Select the empty option\n                    _this.__select_option( _this.elements.select.course.element, 0 );\n\n                    // Check if there is only one available course\n                    if ( options.length == 1 ){\n                        // DEBUG: console.log( '---- COURSES: Only one course found.' );\n\n                        // Add the \"h3-select\" class, so it doesn't look like a select\n                        _this.elements.select[ 'course' ].element.addClass( 'h3-select' );\n\n                        // Disable the select\n                        _this.elements.select.course.element.prop( 'disabled', true );\n                    }\n                    else {\n                        // Remove the \"h3-select\" class, so it looks like a select\n                        _this.elements.select[ 'course' ].element.removeClass( 'h3-select' );\n\n                        // Enable the select\n                        _this.elements.select.course.element.prop( 'disabled', false );\n                    }\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.groupId = group_id;\n                    // Trigger change after value set on load\n                    _this.elements.select.course.element.trigger( 'change' );\n                }\n                else {\n                    // DEBUG: console.log( '-- COURSES: There are NOT courses' );\n\n                    // Remove the \"h3-select\" class, so it looks like a select\n                    _this.elements.select[ 'course' ].element.removeClass( 'h3-select' );\n\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    // _this.elements.select.course.element.empty();\n\n                    let options_course = _this.create_options( 'course' );\n                    _this.elements.select.course.element.html( options_course );\n                    _this.elements.select.course.element.prop( 'disabled', true );\n\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson' );\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', true );\n\n                    let options_quiz = _this.create_options( 'quiz' );\n                    _this.elements.select.quiz.element.html( options_quiz );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n\n                    // Render the table again\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.groupId = group_id;\n\n                    // COURSE: Show the \"no results\" option\n                    $noResultsOption = _this.elements.select[ 'course' ].element.find( '.ulgm-essays-no-results' );\n                    $noResultsOption.show();\n                }\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( 0, 0, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status );\n            });\n\n            this.elements.select.course.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // DEBUG: console.log( '--------- COURSE ---------' );\n                // DEBUG: console.log( '-- COURSE: Value changed' );\n\n                // Course ID\n                let course_id = $this.val();\n\n                // Return if course id is 0\n                if ( course_id == 0 || course_id == '' ){\n                    _this.elements.select.lesson.element.empty();\n\n                    let options = _this.create_options( 'lesson' );\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', true );\n\n                    let options_quiz = _this.create_options( 'quiz' );\n                    _this.elements.select.quiz.element.html( options_quiz );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n                    return;\n                }\n\n                // Get relationships\n                let lessons_to_show = groupEssays.relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ];\n\n                lessons_to_show = lessons_to_show === undefined ? [] : lessons_to_show;\n\n                // Create options\n                let options = _this.create_options( 'lesson', lessons_to_show );\n\n                // Check if the options are valid options\n                let hasValidOptions = options.reduce(( accumulator, currentValue ) => {\n                    return accumulator && currentValue.val() !== '';\n                }, true );\n\n                if ( hasValidOptions && options.length > 0 ){\n                    // DEBUG: console.log( '-- LESSONS: There are lessons' );\n\n                    // Show \"Select lesson\" dropdown\n                    _this.elements.select.lesson.element.show();\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', false );\n\n                    jQuery( '#uo-group-report-lessons option' ).show();\n                    _this.elements.select.lesson.no_element.hide();\n\n                    // Check if there is only one available course\n                    if ( options.length == 1 ){\n                        // DEBUG: console.log( '---- LESSON: Only one lesson found.' );\n\n                        // Add the \"h3-select\" class, so it doesn't look like a select\n                        _this.elements.select[ 'lesson' ].element.addClass( 'h3-select' );\n\n                        // Disable the select\n                        _this.elements.select.lesson.element.prop( 'disabled', true );\n                    }\n                    else {\n                        // Remove the \"h3-select\" class, so it looks like a select\n                        _this.elements.select[ 'lesson' ].element.removeClass( 'h3-select' );\n\n                        // Enable the select\n                        _this.elements.select.lesson.element.prop( 'disabled', false );\n                    }\n\n                    // Select empty option\n                    _this.__select_option( _this.elements.select.lesson.element, 0 );\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.courseId = course_id;\n                    // trigger change after value set on load\n                    _this.elements.select.lesson.element.trigger( 'change' );\n                }\n                else {\n                    // DEBUG: console.log( '-- LESSONS: There are NOT lessons' );\n\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson' );\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', true );\n\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.courseId = course_id;\n                    // Request data\n                    window.ulgmGroupManagement.Essays.getEssaysData( 0, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status  );\n                }\n\n                // Get relationships\n                let quizzes_to_show = groupEssays.quiz_relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ];\n                quizzes_to_show = quizzes_to_show === undefined ? [] : quizzes_to_show;\n\n                // Create options\n                let options_quizzes = _this.create_options( 'quiz', quizzes_to_show );\n\n                // Check if the options are valid options\n                let hasValidOptionsQuizzes = options_quizzes.reduce(( accumulator, currentValue ) => {\n                    return accumulator && currentValue.val() !== '';\n                }, true );\n\n                if ( hasValidOptionsQuizzes && options_quizzes.length > 0 ){\n                    // DEBUG: console.log( '-- QUIZZES: There are quizzes' );\n\n                    // Show \"Select lesson\" dropdown\n                    _this.elements.select.quiz.element.show();\n                    _this.elements.select.quiz.element.html( options_quizzes );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n                    jQuery('#uo-group-report-quizzes option').show();\n                    _this.elements.select.quiz.no_element.hide();\n\n                    // Check if there is only one available course\n                    if ( options_quizzes.length == 1 ){\n                        // DEBUG: console.log( '---- QUIZZES: Only one quiz found.' );\n\n                        // Add the \"h3-select\" class, so it doesn't look like a select\n                        _this.elements.select[ 'quiz' ].element.addClass( 'h3-select' );\n\n                        // Disable the select\n                        _this.elements.select.quiz.element.prop( 'disabled', true );\n                    }\n                    else {\n                        // Remove the \"h3-select\" class, so it looks like a select\n                        _this.elements.select[ 'quiz' ].element.removeClass( 'h3-select' );\n\n                        // Enable the select\n                        _this.elements.select.quiz.element.prop( 'disabled', false );\n                    }\n\n                    // Select empty option\n                    _this.__select_option( _this.elements.select.quiz.element, 0 );\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.courseId = course_id;\n                    // trigger change after value set on load\n                    _this.elements.select.quiz.element.trigger( 'change' );\n                }\n                else {\n                    // DEBUG: console.log( '-- QUIZZES: There are NOT quizzes' );\n\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.quiz.element.empty();\n                    let options = _this.create_options( 'quiz' );\n                    _this.elements.select.quiz.element.html( options );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n                    window.ulgmGroupManagement.Essays.createTable( [] );\n                    window.ulgmGroupManagement.Essays.createTableHidden( [] );\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.courseId = course_id;\n                    // Request data\n                    window.ulgmGroupManagement.Essays.getEssaysData( 0, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status  );\n                }\n            });\n\n            this.elements.select.lesson.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // DEBUG: console.log( '--------- LESSON ---------' );\n                // DEBUG: console.log( '-- LESSON: Value changed' );\n\n                // lesson ID\n                let lesson_id = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Essays.lessonId = lesson_id;\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( lesson_id, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status  );\n            });\n\n            this.elements.select.quiz.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $(this);\n                // lesson ID\n                let quiz_id = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Essays.quizId = quiz_id;\n\n                // DEBUG: console.log( '--------- QUIZ ---------' );\n                // DEBUG: console.log( '-- QUIZ: Value changed' );\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( 0, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, window.ulgmGroupManagement.Essays.quizId, window.ulgmGroupManagement.Essays.status );\n            });\n\n            this.elements.select.status.element.on( 'change', function(){\n                // DEBUG: console.log( '--------- STATUS ---------' );\n                // DEBUG: console.log( '-- STATUS: Value changed' );\n\n                // Save this DOM element\n                let $this = $(this);\n                // lesson ID\n                let status = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Essays.status = status;\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( 0, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, window.ulgmGroupManagement.Essays.quizId, window.ulgmGroupManagement.Essays.status );\n            });\n\n            // Trigger a change event on the groups dropdown on page load\n            this.elements.select.group.element.trigger( 'change' );\n\n            // Add event listener for opening and closing details\n            $('#uo-lesson-report-table').on('click', 'td.details-control', function () {\n\n                var tr = $(this).closest('tr');\n                var row = window.ulgmGroupManagement.Essays.uoTable.row(tr);\n\n                if (row.child.isShown()) {\n                    // This row is already open - close it\n                    row.child.hide();\n                    tr.removeClass('shown');\n                }\n                else {\n                    // Open this row\n                    row.child(window.ulgmGroupManagement.Essays.format(row.data())).show();\n                    tr.addClass('shown');\n                }\n            });\n\n        },\n\n        format: function (d) {\n\n            var rows = '';\n            $.each(d.answer, function (key, value) {\n                rows +=\n                    '<tr>' +\n                    '<td>' + d.question[key] + '</td>' +\n                    '<td>' + value + '</td>' +\n                    '</tr>';\n            });\n            // `d` is the original data object for the row\n            return '<table cellpadding=\"5\" cellspacing=\"0\" border=\"0\" style=\"padding-left:50px;\">' + rows + '</table>';\n        },\n        isNormalInteger: function (str) {\n            var n = ~~Number(str);\n            return String(n) === str && n > 0;\n        },\n\n        getEssaysData: function (lessonId, courseId, groupId, quizId, status) {\n\n            var i = 0;\n\n            var loading = setInterval(function () {\n                i = ++i % 4;\n                $(\"#uo-group-essays-table tbody\").html(\"<div id='group-loader'>\" + groupEssays.localized.loadingRecords + new Array(i + 1).join(\".\") + \"</div>\");\n            }, 500);\n\n\n            var dataVars = {\n                groupId: groupId,\n                lessonId: lessonId,\n                quizId: quizId,\n                courseId: courseId,\n                status:status,\n            };\n\n            $.ajax({\n\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'get_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n\n                    clearInterval(loading);\n                    $('#group-loader').remove();\n\n                    window.ulgmGroupManagement.Essays.createTable(response);\n                    window.ulgmGroupManagement.Essays.createTableHidden(response);\n\n\n                },\n                fail: function (response) {\n                    alert('Rest Call Failed');\n                }\n\n            });\n\n        },\n        editEssaysData: function (postId) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            var dataVars = {\n                essay_id: postId,\n                action: 'edit_essays',\n                post_type:'sfwd-essay',\n                security:groupEssays.ajax_nonce\n            };\n\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'edit_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    $(\".modal\").remove();\n                    $(response.html).appendTo('body').modal();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        saveEssaysData: function () {\n            if (typeof tinymce !== 'undefined') {\n                for (edId in tinyMCE.editors) {\n                    if (\n                        typeof tinyMCE.editors[edId] !== 'undefined' &&\n                        typeof tinyMCE.editors[edId].save !== 'undefined' &&\n                        tinyMCE.editors[edId].save instanceof Function) {\n                        tinyMCE.editors[edId].save();\n                    }\n                }\n\n            }\n            var dataVars = $('#edit_essay_form').serialize();\n            var spinner = $('.uo-modal-spinner');\n            //$('#group-management-message').hide();\n            $('.uo-groups-message-ok').hide();\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'save_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    window.ulgmGroupManagement.Essays.elements.select.lesson.element.trigger('change');\n                    //$('#group-management-message').html(response.message).show();\n                    $('.uo-groups-message-ok').html(response.message).show();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        actionsEssays: function ( dataVars ) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'save_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    window.ulgmGroupManagement.Essays.elements.select.lesson.element.trigger('change');\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        }\n    };\n\n\n})(jQuery);\n","( function ( $ ){ // Self Executing function with $ alias for jQuery\n\n\t/**\n\t *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n\t *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n\t */\n\t$( document ).ready( function (){\n\n\t\tif ($( '#group-report' ).length > 0) {\n\t\t\twindow.ulgmGroupManagement.reportingTemplating.constructor();\n\t\t}\n\n\t\tif ($( '#uo-quiz-report-table' ).length > 0) {\n\t\t\twindow.ulgmGroupManagement.quizReport.constructor();\n\t\t}\n\n\t\tif ($( '#uo-group-report-course' ) > 0) {\n\t\t\t$( '#uo-group-report-course' ).select2();\n\t\t}\n\n\t} );\n\n\twindow.ulgmGroupManagement.reportingTemplating = {\n\n\t\trowTemplate: '',\n\t\titemTemplate: '',\n\t\tliTemplate: '',\n\t\titems: [],\n\t\titemsEl: [],\n\t\tjpL: false,\n\n\t\t// initialize the code\n\t\tconstructor: function (){\n\t\t\tif ($( '#group-report' ).length > 0) {\n\t\t\t\t// Get Template\n\t\t\t\tthis.itemTemplate = $( 'script[data-template=\"item\"]' ).text().split( /\\$\\{(.+?)\\}/g );\n\t\t\t}\n\t\t},\n\n\t\tsetItems: function ( items ){\n\n\t\t\tvar _this = this;\n\n\t\t\t// Reset Items\n\t\t\tthis.itemsEl = [];\n\n\t\t\t// Create items from JSON\n\t\t\titems.map( function ( item ){\n\t\t\t\t_this.itemsEl.push( $( '<div class=\"uo-tbl-item body-row\">' + _this.itemTemplate.map( _this.render( item ) ).join( '' ) + '</div>' ) );\n\t\t\t\treturn '<div class=\"uo-tbl-item body-row\">' + _this.itemTemplate.map( _this.render( item ) ).join( '' ) + '</div>';\n\t\t\t} );\n\n\t\t},\n\n\t\trender: function ( props ){\n\t\t\treturn function ( tok, i ){\n\t\t\t\treturn ( i % 2 ) ? props[tok] : tok;\n\t\t\t};\n\t\t}\n\t};\n\n\twindow.ulgmGroupManagement.populateCoursesDropDown = function ( data ){\n\n\t\tvar courseDropDown = $( '#uo-group-report-course' );\n\t\tcourseDropDown.empty();\n\n\t\t$( '#course-group-id' ).val( data.group_id );\n\n\t\tif (data.group_courses.length > 1) {\n\t\t\tcourseDropDown.append(\n\t\t\t\t$( '<option>', {\n\t\t\t\t\tvalue: '0',\n\t\t\t\t\ttext: ulgmRestApiSetup.localized.selectCourse\n\t\t\t\t} )\n\t\t\t);\n\t\t}\n\t\t/**/\n\n\t\t$.each( data.group_courses, function ( i, course ){\n\n\t\t\tcourseDropDown.append(\n\t\t\t\t$( '<option>', {\n\t\t\t\t\tvalue: course.ID,\n\t\t\t\t\ttext: course.post_title\n\t\t\t\t} )\n\t\t\t);\n\n\t\t} );\n\n\t\tcourseDropDown.show().trigger( 'change' );\n\n\t};\n\n\n\twindow.ulgmGroupManagement.quizReport = {\n\n\t\tuoTable: null,\n\n\t\tuoTableHidden: null,\n\n\t\tquizId: 0,\n\n\t\tgroupId: 0,\n\n\t\tcourseId: 0,\n\n\t\telements: {\n\t\t\tselect: {\n\t\t\t\tgroup: {\n\t\t\t\t\telement: null,\n\t\t\t\t\toptions: null\n\t\t\t\t},\n\t\t\t\tcourse: {\n\t\t\t\t\telement: null,\n\t\t\t\t\toptions: null,\n\t\t\t\t\tno_element: null\n\t\t\t\t},\n\t\t\t\tquiz: {\n\t\t\t\t\telement: null,\n\t\t\t\t\toptions: null,\n\t\t\t\t\tno_element: null\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\n\t\tconstructor: function (){\n\t\t\tthis.elements.select.group.element     = $( '#uo-group-report-group' );\n\t\t\tthis.elements.select.course.element    = $( '#uo-group-report-courses' );\n\t\t\tthis.elements.select.quiz.element      = $( '#uo-group-report-quizzes' );\n\t\t\tthis.elements.select.course.no_element = $( '#uo-group-report-nocourses' );\n\t\t\tthis.elements.select.quiz.no_element   = $( '#uo-group-report-noquizzes' );\n\n\t\t\tthis.elements.select.group.options  = $( '#uo-group-report-group option' );\n\t\t\tthis.elements.select.course.options = $( '#uo-group-report-courses option' );\n\t\t\tthis.elements.select.quiz.options   = $( '#uo-group-report-quizzes option' );\n\n\t\t\tthis.createTable();\n\t\t\tthis.createTableHidden();\n\t\t\tthis.addEvents();\n\t\t},\n\n\t\tcreateTable: function ( data ){\n\n\t\t\tlet columnsVisibility = jQuery( '#uo-quiz-report-table' ).data( 'table_columns' );\n\t\t\tcolumnsVisibility     = columnsVisibility.split( ',' );\n\n\t\t\tvar columns = [\n\t\t\t\t{\n\t\t\t\t\ttitle: groupQuizReportSetup.localized.username,\n\t\t\t\t\ttargets: 0,\n\t\t\t\t\tdata: 'user_name',\n\t\t\t\t\tvisible: columnsVisibility.includes( \"user_name\" )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: groupQuizReportSetup.localized.firstName,\n\t\t\t\t\ttargets: 1,\n\t\t\t\t\tdata: 'first_name',\n\t\t\t\t\tvisible: columnsVisibility.includes( \"first_name\" )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: groupQuizReportSetup.localized.lastName,\n\t\t\t\t\ttargets: 2,\n\t\t\t\t\tdata: 'last_name',\n\t\t\t\t\tvisible: columnsVisibility.includes( \"last_name\" )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: groupQuizReportSetup.localized.userEmail,\n\t\t\t\t\ttargets: 3,\n\t\t\t\t\tdata: 'user_email',\n\t\t\t\t\tvisible: columnsVisibility.includes( \"user_email\" )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: groupQuizReportSetup.localized.quizScore,\n\t\t\t\t\ttargets: 4,\n\t\t\t\t\tdata: 'quiz_score',\n\t\t\t\t\tvisible: columnsVisibility.includes( \"quiz_score\" )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: groupQuizReportSetup.localized.detailedReport,\n\t\t\t\t\torderable: false,\n\t\t\t\t\tsearchable: false,\n\t\t\t\t\ttargets: 5,\n\t\t\t\t\tdata: 'quiz_modal',\n\t\t\t\t\tdefaultContent: '',\n\t\t\t\t\tvisible: columnsVisibility.includes( \"quiz_modal\" )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: groupQuizReportSetup.localized.date,\n\t\t\t\t\ttargets: 6,\n\t\t\t\t\tdata: 'quiz_date',\n\t\t\t\t\tvisible: columnsVisibility.includes( \"quiz_date\" )\n\t\t\t\t}\n\t\t\t];\n\n\t\t\tvar tableVars = {\n\t\t\t\taLengthMenu: [\n\t\t\t\t\t[15, 30, 60, -1],\n\t\t\t\t\t[15, 30, 60, groupQuizReportSetup.localized.all]\n\t\t\t\t],\n\t\t\t\tiDisplayLength: 30,\n\t\t\t\tcolumns: columns,\n\t\t\t\tcolumnDefs: [{\n\t\t\t\t\t\"targets\": 5,\n\t\t\t\t\t\"orderable\": false,\n\t\t\t\t\t\"searchable\": false\n\t\t\t\t}]\n\t\t\t};\n\n\t\t\tlet initComplete = ( settings, d ) => {\n\n\t\t\t\tlet table = settings.oInstance.api();\n\t\t\t\tlet _this = this;\n\n\t\t\t\tvar colFilter_container = $( `<div id=\"${settings.sInstance}-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${settings.sInstance}-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${settings.sInstance}-filter-columns-field\" data-label-enable=\"${groupQuizReportSetup.localized.customizeColumns}\" data-label-disable=\"${groupQuizReportSetup.localized.hideCustomizeColumns}\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n\n\t\t\t\tif (settings.oSavedState !== null) {\n\t\t\t\t\tjQuery.each( settings.oSavedState.columns, function ( key, value ){\n\n\t\t\t\t\t\tvar title = settings.aoColumns[key].sTitle;\n\t\t\t\t\t\tcolFilter_container.find( '.dataTables-filter-columns__fields' ).append( _this.addColumnCourseCheckbox( title, key, value.visible, table ) );\n\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery.each( settings.aoColumns, function ( key, value ){\n\n\t\t\t\t\t\tvar title = settings.aoColumns[key].sTitle;\n\t\t\t\t\t\tcolFilter_container.find( '.dataTables-filter-columns__fields' ).append( _this.addColumnCourseCheckbox( title, key, value.bVisible, table ) );\n\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t$( colFilter_container ).insertAfter( '#uo-quiz-report-table_filter' );\n\n\n\t\t\t};\n\n\t\t\ttableVars.initComplete = initComplete;\n\t\t\ttableVars.stateSave    = true;\n\n\t\t\tif (null !== this.uoTable) {\n\n\t\t\t\tthis.uoTable.destroy();\n\n\t\t\t\ttableVars.data = data;\n\t\t\t}\n\n\t\t\ttableVars.language = {\n\t\t\t\tprocessing: groupQuizReportSetup.localized.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: groupQuizReportSetup.localized.searchPlaceholder,\n\t\t\t\tlengthMenu: groupQuizReportSetup.localized.lengthMenu,\n\t\t\t\tinfo: groupQuizReportSetup.localized.info,\n\t\t\t\tinfoEmpty: groupQuizReportSetup.localized.infoEmpty,\n\t\t\t\tinfoFiltered: groupQuizReportSetup.localized.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: groupQuizReportSetup.localized.loadingRecords,\n\t\t\t\tzeroRecords: groupQuizReportSetup.localized.zeroRecords,\n\t\t\t\temptyTable: groupQuizReportSetup.localized.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: groupQuizReportSetup.localized.paginate.first,\n\t\t\t\t\tprevious: groupQuizReportSetup.localized.paginate.previous,\n\t\t\t\t\tnext: groupQuizReportSetup.localized.paginate.next,\n\t\t\t\t\tlast: groupQuizReportSetup.localized.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: groupQuizReportSetup.localized.sortAscending,\n\t\t\t\t\tsortDescending: groupQuizReportSetup.localized.sortDescending\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.uoTable = jQuery( '#uo-quiz-report-table' );\n\n\t\t\tif (jQuery( '#uo-quiz-report-table' ).length > 0) {\n\t\t\t\tthis.uoTable = jQuery( '#uo-quiz-report-table' ).DataTable( tableVars );\n\t\t\t}\n\n\n\t\t},\n\n\t\tcreateTableHidden: function ( data ){\n\n\t\t\tvar columns = [\n\t\t\t\t{title: groupQuizReportSetup.localized.username, data: 'user_name'},\n\t\t\t\t{title: groupQuizReportSetup.localized.firstName, data: 'first_name'},\n\t\t\t\t{title: groupQuizReportSetup.localized.lastName, data: 'last_name'},\n\t\t\t\t{title: groupQuizReportSetup.localized.userEmail, data: 'user_email'},\n\t\t\t\t{title: groupQuizReportSetup.localized.quizScore, data: 'quiz_score'},\n\t\t\t\t{title: groupQuizReportSetup.localized.date, data: 'quiz_date'}\n\t\t\t];\n\n\t\t\t/*var language = [\n\t\t\t\t\"lengthMenu\": groupQuizReportSetup.localized.lengthMenu,\n\t\t\t\t\"zeroRecords\": groupQuizReportSetup.localized.zeroRecords,\n\t\t\t\t\"info\": groupQuizReportSetup.localized.info,\n\t\t\t\t\"infoEmpty\": groupQuizReportSetup.localized.infoEmpty,\n\t\t\t\t\"infoFiltered\": groupQuizReportSetup.localized.infoFiltered,\n\t\t\t\t\"loadingRecords\": groupQuizReportSetup.localized.loadingRecords,\n\t\t\t\t\"emptyTable\": groupQuizReportSetup.localized.emptyTable\n\t\t\t];*/\n\t\t\tvar buttonCommon = {\n\t\t\t\texportOptions: {\n\t\t\t\t\tformat: {\n\t\t\t\t\t\tbody: function (data, row, column, node) {\n\t\t\t\t\t\t\t// Strips hidden timestamp <span>\n\t\t\t\t\t\t\treturn data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar tableVars = {\n\t\t\t\tiDisplayLength: -1,\n\t\t\t\tcolumns: columns,\n\t\t\t\tdom: 'Bfrtip',\n\t\t\t\tbuttons: [\n\t\t\t\t\t$.extend(true, {}, buttonCommon, {\n\t\t\t\t\t\textend: 'csv',\n\t\t\t\t\t\ttext: groupQuizReportSetup.i18n.exportCSV,\n\t\t\t\t\t\ttitle: 'quiz-report'\n\t\t\t\t\t}),\n\t\t\t\t\t$.extend(true, {}, buttonCommon, {\n\t\t\t\t\t\textend: 'excelHtml5',\n\t\t\t\t\t\ttext: groupQuizReportSetup.i18n.exportExcel,\n\t\t\t\t\t\ttitle: 'quiz-report'\n\t\t\t\t\t}),\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tif ($.fn.DataTable.isDataTable( '#uo-quiz-report-table-hidden' )) {\n\n\t\t\t\t$( '#uo-quiz-report-table-hidden' ).DataTable().destroy();\n\n\t\t\t\ttableVars.data = data;\n\n\t\t\t\ttableVars.columns = [\n\t\t\t\t\t{title: groupQuizReportSetup.localized.username, data: 'user_name'},\n\t\t\t\t\t{title: groupQuizReportSetup.localized.firstName, data: 'first_name'},\n\t\t\t\t\t{title: groupQuizReportSetup.localized.lastName, data: 'last_name'},\n\t\t\t\t\t{title: groupQuizReportSetup.localized.userEmail, data: 'user_email'},\n\t\t\t\t\t{title: groupQuizReportSetup.localized.quizScore, data: 'quiz_score'},\n\t\t\t\t\t{title: groupQuizReportSetup.localized.date, data: 'quiz_date'}\n\t\t\t\t];\n\n\t\t\t}\n\n\t\t\ttableVars.language = {\n\t\t\t\tprocessing: groupQuizReportSetup.localized.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: groupQuizReportSetup.localized.searchPlaceholder,\n\t\t\t\tlengthMenu: groupQuizReportSetup.localized.lengthMenu,\n\t\t\t\tinfo: groupQuizReportSetup.localized.info,\n\t\t\t\tinfoEmpty: groupQuizReportSetup.localized.infoEmpty,\n\t\t\t\tinfoFiltered: groupQuizReportSetup.localized.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: groupQuizReportSetup.localized.loadingRecords,\n\t\t\t\tzeroRecords: groupQuizReportSetup.localized.zeroRecords,\n\t\t\t\temptyTable: groupQuizReportSetup.localized.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: groupQuizReportSetup.localized.paginate.first,\n\t\t\t\t\tprevious: groupQuizReportSetup.localized.paginate.previous,\n\t\t\t\t\tnext: groupQuizReportSetup.localized.paginate.next,\n\t\t\t\t\tlast: groupQuizReportSetup.localized.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: groupQuizReportSetup.localized.sortAscending,\n\t\t\t\t\tsortDescending: groupQuizReportSetup.localized.sortDescending\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.uoTableHidden = jQuery( '#uo-quiz-report-table-hidden' );\n\n\t\t\tif (this.uoTableHidden.length > 0) {\n\t\t\t\tthis.uoTableHidden = jQuery( '#uo-quiz-report-table-hidden' ).DataTable( tableVars );\n\t\t\t}\n\n\t\t\t$( '.buttons-csv' ).show();\n\n\t\t},\n\n\t\taddColumnCourseCheckbox: function ( label, column_key, is_visible, table ){\n\n\t\t\tvar checkbox = jQuery( '<input />', {\n\t\t\t\ttype: 'checkbox',\n\t\t\t\tid: 'dt_' + column_key,\n\t\t\t\tvalue: column_key,\n\t\t\t\tchecked: is_visible\n\t\t\t} );\n\n\t\t\tcheckbox.on( 'change', function ( e ){\n\t\t\t\t// Get the column API object\n\t\t\t\tvar current_check = jQuery( this ).attr( 'value' );\n\t\t\t\tvar is_checked    = jQuery( this ).is( ':checked' );\n\n\t\t\t\ttable.columns().every( function ( index ){\n\n\t\t\t\t\tvar column = table.column( index );\n\n\t\t\t\t\t// ... do something with data(), or this.nodes(), etc\n\n\t\t\t\t\tif (index == current_check) {\n\t\t\t\t\t\tif (is_checked) {\n\t\t\t\t\t\t\t// Toggle the visibility\n\t\t\t\t\t\t\tcolumn.visible( true );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcolumn.visible( false );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t\tvar $label = jQuery( '<label/>' ).append( checkbox ).append( label );\n\t\t\treturn $label;\n\t\t},\n\n\t\tflattenArray: function ( array, remove_stats ){\n\n\t\t\tvar flatArray = [];\n\n\t\t\tjQuery.each( array, function ( key, value ){\n\n\t\t\t\tvar quiz_name = value;\n\t\t\t\tjQuery.each( value.question, function ( key2, value2 ){\n\t\t\t\t\tflatArray.push( {\n\t\t\t\t\t\t\"quiz_name\": value.quiz_name,\n\t\t\t\t\t\t\"first_name\": value.first_name,\n\t\t\t\t\t\t\"last_name\": value.last_name,\n\t\t\t\t\t\t\"quiz_score\": value.quiz_score,\n\t\t\t\t\t\t\"answer\": value.answer[key2],\n\t\t\t\t\t\t\"question\": value.question[key2]\n\t\t\t\t\t} )\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t\treturn flatArray;\n\n\t\t},\n\n\t\tcreate_options: function ( source, ids ){\n\t\t\t/*\n\t\t\t* @param source string, values \"group\", \"course\", \"quiz\"\n\t\t\t* @param ids    array,  ids of options that have to be shown\n\t\t\t*\n\t\t\t* @return array of jQuery DOM elements with the option elements\n\t\t\t*/\n\n\t\t\tlet options = [];\n\n\t\t\t// Convert parameters to int\n\t\t\tids = ids.map( Number );\n\n\t\t\t// Add empty option\n\t\t\t// if there are more then one option\n\t\t\tif (ids.length > 1) {\n\t\t\t\tids.push( 0 );\n\t\t\t}\n\n\n\t\t\t// Get options by ID\n\t\t\tthis.elements.select[source].options.each( function (){\n\t\t\t\tlet $this = $( this ),\n\t\t\t\t\tid    = parseInt( $this.val() );\n\t\t\t\t$this.show();\n\t\t\t\tif (ids.indexOf( id ) != -1) {\n\t\t\t\t\toptions.push( $this );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Return options\n\t\t\treturn options;\n\t\t},\n\n\t\tselect_option: function ( $select, value ){\n\t\t\t/*\n\t\t\t* @param select  dom element\n\t\t\t* @param value   string, value of the option that has to be selected\n\t\t\t*/\n\n\t\t\t// Remove selected property\n\t\t\t$select.find( 'option' ).prop( 'selected', false );\n\n\t\t\t// Select option with value = @param value\n\t\t\t$select.find( 'option[value=\"' + value + '\"]' ).prop( 'selected', true );\n\t\t},\n\t\t__select_option: function ( $select, index ){\n\t\t\t/*\n\t\t\t* @param select  dom element\n\t\t\t* @param value   string, value of the option that has to be selected\n\t\t\t*/\n\n\t\t\t// Remove selected property\n\t\t\t$select.find( 'option' ).prop( 'selected', false );\n\n\t\t\t// Select option with value = @param value\n\t\t\t$select.find( 'option[' + index + ']' ).prop( 'selected', true );\n\t\t},\n\t\taddEvents: function (){\n\t\t\tvar _this = this;\n\n\t\t\tthis.elements.select.group.element.on( 'change', function (){\n\t\t\t\t// Save this DOM element\n\t\t\t\tlet $this = $( this );\n\n\t\t\t\t// Hide Quiz select\n\t\t\t\t//_this.elements.select.quiz.element.hide();\n\t\t\t\t_this.elements.select.course.element.show();\n\n\t\t\t\t// Group ID\n\t\t\t\tlet group_id = $this.val();\n\t\t\t\t// Return if course id is 0\n\t\t\t\tif (group_id == 0) {\n\t\t\t\t\t_this.elements.select.course.element.empty();\n\t\t\t\t\tlet options_course = _this.create_options( 'course', [0] );\n\t\t\t\t\t_this.elements.select.course.element.html( options_course );\n\t\t\t\t\t_this.elements.select.quiz.element.empty();\n\t\t\t\t\tlet options = _this.create_options( 'quiz', [0] );\n\t\t\t\t\t_this.elements.select.quiz.element.html( options );\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTable( [] );\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTableHidden( [] );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Get relationships\n\t\t\t\tlet courses_to_show = groupQuizReportSetup.courseGroupQuizzes[group_id];\n\t\t\t\tcourses_to_show     = courses_to_show === undefined ? [] : courses_to_show;\n\n\t\t\t\t// Create options\n\t\t\t\tlet options = _this.create_options( 'course', courses_to_show );\n\n\t\t\t\tif (options.length > 0) {\n\t\t\t\t\t// Show \"Select course\" dropdown\n\t\t\t\t\t_this.elements.select.course.element.show();\n\t\t\t\t\t_this.elements.select.course.element.html( options );\n\t\t\t\t\t_this.elements.select.course.no_element.hide();\n\t\t\t\t\t// _this.elements.select.course.element.html(_this.elements.select.course.element.find('option').sort(function(x, y) {\n\t\t\t\t\t// to change to descending order switch \"<\" for \">\"\n\t\t\t\t\t// return $(x).val() > $(y).val() ? 1 : -1;\n\t\t\t\t\t// }));\n\t\t\t\t\t// Select empty option\n\n\t\t\t\t\t_this.__select_option( _this.elements.select.course.element, 0 );\n\n\t\t\t\t\t// Save data in main object\n\t\t\t\t\twindow.ulgmGroupManagement.reporting.groupId = group_id;\n\t\t\t\t\t// trigger change after value set on load\n\t\t\t\t\t_this.elements.select.course.element.trigger( 'change' );\n\t\t\t\t} else {\n\t\t\t\t\t// Hide \"Select course\" dropdown, the empty option was selected\n\t\t\t\t\t_this.elements.select.course.element.empty();\n\t\t\t\t\tlet options_course = _this.create_options( 'course', [0] );\n\t\t\t\t\t_this.elements.select.course.element.html( options_course );\n\t\t\t\t\t_this.elements.select.quiz.element.empty();\n\t\t\t\t\tlet options = _this.create_options( 'quiz', [0] );\n\t\t\t\t\t_this.elements.select.quiz.element.html( options );\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTable( [] );\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTableHidden( [] );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tthis.elements.select.course.element.on( 'change', function (){\n\t\t\t\t// Save this DOM element\n\t\t\t\tlet $this = $( this );\n\n\t\t\t\t// Course ID\n\t\t\t\tlet course_id = $this.val();\n\t\t\t\t// Return if course id is 0\n\t\t\t\tif (course_id == 0) {\n\t\t\t\t\t_this.elements.select.quiz.element.empty();\n\t\t\t\t\tlet options = _this.create_options( 'quiz', [0] );\n\t\t\t\t\t_this.elements.select.quiz.element.html( options );\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTable( [] );\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTableHidden( [] );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Get relationships\n\t\t\t\tlet quizzes_to_show = groupQuizReportSetup.relationships[window.ulgmGroupManagement.reporting.groupId][course_id];\n\t\t\t\tquizzes_to_show     = quizzes_to_show === undefined ? [] : quizzes_to_show;\n\n\t\t\t\t// Create options\n\t\t\t\tlet options = _this.create_options( 'quiz', quizzes_to_show );\n\n\t\t\t\tif (options.length > 0) {\n\t\t\t\t\t// Show \"Select quiz\" dropdown\n\t\t\t\t\t_this.elements.select.quiz.element.show();\n\t\t\t\t\t_this.elements.select.quiz.element.html( options );\n\t\t\t\t\tjQuery( '#uo-group-report-quizzes option' ).show();\n\t\t\t\t\t_this.elements.select.quiz.no_element.hide();\n\n\t\t\t\t\t// Select empty option\n\t\t\t\t\t_this.__select_option( _this.elements.select.quiz.element, 0 );\n\n\t\t\t\t\t// Save data in main object\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.courseId = course_id;\n\t\t\t\t\t// trigger change after value set on load\n\t\t\t\t\t_this.elements.select.quiz.element.trigger( 'change' );\n\t\t\t\t} else {\n\t\t\t\t\t// Hide \"Select course\" dropdown, the empty option was selected\n\t\t\t\t\t_this.elements.select.quiz.element.empty();\n\t\t\t\t\tlet options = _this.create_options( 'quiz', [0] );\n\t\t\t\t\t_this.elements.select.quiz.element.html( options );\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTable( [] );\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTableHidden( [] );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tthis.elements.select.quiz.element.on( 'change', function ( event ){\n\t\t\t\t// Save this DOM element\n\t\t\t\tlet $this = $( this );\n\n\t\t\t\t// Quiz ID\n\t\t\t\tlet quiz_id                                  = $this.val();\n\t\t\t\t// Save data in main object\n\t\t\t\twindow.ulgmGroupManagement.quizReport.quizId = quiz_id;\n\n\t\t\t\t// Request data\n\t\t\t\twindow.ulgmGroupManagement.quizReport.getQuizData( quiz_id, window.ulgmGroupManagement.reporting.groupId, window.ulgmGroupManagement.reporting.scoreType );\n\t\t\t} );\n\n\t\t\t// Add event listener for opening and closing details\n\t\t\t$( '#uo-quiz-report-table' ).on( 'click', 'td.details-control', function (){\n\n\t\t\t\tvar tr  = $( this ).closest( 'tr' );\n\t\t\t\tvar row = window.ulgmGroupManagement.quizReport.uoTable.row( tr );\n\n\t\t\t\tif (row.child.isShown()) {\n\t\t\t\t\t// This row is already open - close it\n\t\t\t\t\trow.child.hide();\n\t\t\t\t\ttr.removeClass( 'shown' );\n\t\t\t\t} else {\n\t\t\t\t\t// Open this row\n\t\t\t\t\trow.child( window.ulgmGroupManagement.quizReport.format( row.data() ) ).show();\n\t\t\t\t\ttr.addClass( 'shown' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t},\n\n\t\tformat: function ( d ){\n\n\t\t\tvar rows = '';\n\t\t\t$.each( d.answer, function ( key, value ){\n\t\t\t\trows +=\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t'<td>' + d.question[key] + '</td>' +\n\t\t\t\t\t'<td>' + value + '</td>' +\n\t\t\t\t\t'</tr>';\n\t\t\t} );\n\t\t\t// `d` is the original data object for the row\n\t\t\treturn '<table cellpadding=\"5\" cellspacing=\"0\" border=\"0\" style=\"padding-left:50px;\">' + rows + '</table>';\n\t\t},\n\n\t\tgetQuizData: function ( quizId, groupId, scoreType ){\n\t\t\tif (!window.ulgmGroupManagement.reporting.isNormalInteger( quizId )) {\n\t\t\t\t$( '#uo-group-report-course' ).addClass( 'missing' );\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!window.ulgmGroupManagement.reporting.isNormalInteger( String( groupId ) )) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t$( '#uo-group-report-course' ).removeClass( 'missing' );\n\n\t\t\tvar i = 0;\n\n\t\t\tvar loading = setInterval( function (){\n\t\t\t\ti = ++i % 4;\n\t\t\t\t$( \"#uo-quiz-report-table tbody\" ).html( \"<div id='group-loader'>\" + groupQuizReportSetup.localized.loadingRecords + new Array( i + 1 ).join( \".\" ) + \"</div>\" );\n\t\t\t}, 500 );\n\n\n\t\t\tvar dataVars = {\n\t\t\t\tgroupId: groupId,\n\t\t\t\tquizId: quizId,\n\t\t\t\tscoreType: scoreType\n\t\t\t};\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: dataVars,\n\t\t\t\turl: groupQuizReportSetup.root + 'get_quiz_data/',\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', groupQuizReportSetup.nonce );\n\t\t\t\t},\n\t\t\t\tsuccess: function ( response ){\n\n\t\t\t\t\tclearInterval( loading );\n\t\t\t\t\t$( '#group-loader' ).remove();\n\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTable( response );\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTableHidden( response );\n\n\n\t\t\t\t},\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\talert( 'Rest Call Failed' );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t};\n\n\twindow.ulgmGroupManagement.reporting = {\n\n\t\tgroupLeaderId: 0,\n\n\t\tgroupId: 0,\n\n\t\tgetGroupCourses: function ( groupId ){\n\n\t\t\tvar dataVars = {groupId: groupId};\n\n\t\t\tif (this.getQueryVariable( 'user_id' )) {\n\t\t\t\twindow.ulgmGroupManagement.reporting.groupLeaderId = this.getQueryVariable( 'user_id' );\n\t\t\t\tdataVars.userId                                    = window.ulgmGroupManagement.reporting.groupLeaderId;\n\t\t\t}\n\n\t\t\t$( '#uo-group-report-course' ).hide();\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: dataVars,\n\t\t\t\turl: groupQuizReportSetup.root + 'get_group_courses/',\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', groupQuizReportSetup.nonce );\n\t\t\t\t},\n\t\t\t\tsuccess: function ( response ){\n\t\t\t\t\twindow.ulgmGroupManagement.reporting.createCourseDropDown( response.courses );\n\n\t\t\t\t\tif ($( '#uo-quiz-report-table' ).length) {\n\t\t\t\t\t\twindow.ulgmGroupManagement.reporting.createUserDropDown( response.users );\n\t\t\t\t\t}\n\n\n\t\t\t\t},\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\talert( 'Rest Call Failed' );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t\tcreateCourseDropDown: function ( posts ){\n\t\t\tvar dropDown = $( '#uo-group-report-course' ),\n\t\t\t\toptions  = '<option value=\"0\">' + ulgmRestApiSetup.localized.selectCourse + '</option>';\n\n\t\t\tif (0 === posts.post_count) {\n\t\t\t\tdropDown.html( '<option value=\"0\">' + ulgmRestApiSetup.localized.noCourse + '</option>' );\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t$.each( posts.posts, function ( key, post ){\n\t\t\t\toptions += '<option value=\"' + post.ID + '\">' + post.post_title + '</option>';\n\t\t\t} );\n\n\t\t\tdropDown.html( options );\n\t\t\tdropDown.show();\n\n\t\t},\n\n\t\tcreateUserDropDown: function ( users ){\n\n\t\t\tvar dropDown = $( '#uo-group-report-user' ),\n\t\t\t\toptions  = '<option value=\"0\">' + groupQuizReportSetup.localized.selectUser + '</option>';\n\n\t\t\tif (0 === users.length) {\n\t\t\t\tdropDown.html( '<option value=\"0\">' + groupQuizReportSetup.localized.noUsers + '/option>' );\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t$.each( users, function ( key, user ){\n\t\t\t\toptions += '<option value=\"' + user.ID + '\">' + user.data.display_name + '</option>';\n\t\t\t} );\n\n\t\t\tdropDown.html( options );\n\t\t\tdropDown.show();\n\n\t\t},\n\n\t\tisNormalInteger: function ( str ){\n\t\t\tvar n = Math.trunc( str );\n\t\t\tn = isNaN( n ) ? 0 : n;\n\n\t\t\treturn String( n ) == str && n > 0;\n\t\t},\n\n\t\tgetQueryVariable: function ( variable ){\n\t\t\tvar query = window.location.search.substring( 1 );\n\t\t\tvar vars  = query.split( \"&\" );\n\t\t\tfor (var i = 0; i < vars.length; i++) {\n\t\t\t\tvar pair = vars[i].split( \"=\" );\n\t\t\t\tif (pair[0] == variable) {\n\t\t\t\t\treturn pair[1];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ( false );\n\t\t}\n\n\t}\n\n\n} )( jQuery );\n","( function ( $ ){ // Self Executing function with $ alias for jQuery\n\n\t/**\n\t *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n\t *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n\t */\n\t$( document ).ready( function (){\n\t\twindow.ulgmGroupManagement.restForms.constructor();\n\n\t\tvar file_frame;\n\n\t\tvar uploadedUsers;\n\n\t\tjQuery( '#ulgm_group_upload_image_button' ).on( 'click', function ( event ){\n\t\t\tevent.preventDefault();\n\n\t\t\tif (file_frame) {\n\n\t\t\t\tfile_frame.open();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Create the media frame.\n\t\t\tfile_frame = wp.media.frames.file_frame = wp.media( {\n\t\t\t\ttitle: 'Select a image to upload',\n\t\t\t\tbutton: {\n\t\t\t\t\ttext: 'Use this image',\n\t\t\t\t},\n\t\t\t\tmultiple: false\n\t\t\t} );\n\t\t\t// When an image is selected, run a callback.\n\t\t\tfile_frame.on( 'select', function (){\n\t\t\t\tattachment = file_frame.state().get( 'selection' ).first().toJSON();\n\t\t\t\t$( '#ulgm_group_image_preview' ).attr( 'src', attachment.url ).css( 'width', 'auto' ).show();\n\t\t\t\t$( '#ulgm_group_image_attachment_id' ).val( attachment.id );\n\t\t\t} );\n\n\t\t\tfile_frame.open();\n\t\t} );\n\n\t} );\n\n\twindow.ulgmGroupManagement.restForms = {\n\n\t\t// initialize the code\n\t\tconstructor: function (){\n\n\t\t\tif (typeof window.ulgmRestApiSetup !== 'undefined') {\n\t\t\t\t// Add events for the group management page\n\t\t\t\tthis.addFormSubmitEvents();\n\n\t\t\t\ttry {\n\t\t\t\t\t$( '#ulgm_font_color' ).wpColorPicker();\n\t\t\t\t\t$( '#ulgm_main_color' ).wpColorPicker();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Handle error(s) here\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tmakeAjaxCall: function ( endPoint, restData, associatedForm ){\n\n\t\t\tvar $title_container = associatedForm.find( '#group-management-title' );\n\n\t\t\tvar $error_container = associatedForm.find( '.group-management-rest-message' );\n\n\t\t\tvar spinner = $( '.uo-modal-spinner' );\n\n\t\t\tif ('upload_users' === endPoint) {\n\t\t\t\tuploadedUsers++;\n\t\t\t\trestData.uploaded_users = uploadedUsers;\n\t\t\t}\n\n\n\t\t\tvar _this = this;\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\turl: ulgmRestApiSetup.root + endPoint + '/',\n\t\t\t\tdata: restData,\n\n\t\t\t\t// Attach Nonce the the header of the request\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', ulgmRestApiSetup.nonce );\n\t\t\t\t},\n\n\t\t\t\tstatusCode: {\n\t\t\t\t\t403: function ( response ){\n\t\t\t\t\t\tspinner.hide();\n\t\t\t\t\t\t$error_container.html( ulgmRestApiSetup.i18n.youCantDoThat ).show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tsuccess: function ( response ){\n\n\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\tif (true === response.success) {\n\n\t\t\t\t\t\t$( '#uo-group-report-course' ).show();\n\t\t\t\t\t\t$error_container.hide();\n\n\t\t\t\t\t\tvar url = window.location.href;\n\n\t\t\t\t\t\t//append rest message to url\n\t\t\t\t\t\tif (url.indexOf( '?' ) > -1) {\n\t\t\t\t\t\t\turl += '&message=' + encodeURIComponent( response.data.message );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\turl += '?message=' + encodeURIComponent( response.data.message );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof response.data.reload === 'undefined') {\n\n\t\t\t\t\t\t\tvar name  = 'message';\n\t\t\t\t\t\t\tvar value = response.data.message;\n\n\t\t\t\t\t\t\tvar str = location.search;\n\t\t\t\t\t\t\tif (new RegExp( \"[&?]\" + name + \"([=&].+)?$\" ).test( str )) {\n\t\t\t\t\t\t\t\tstr = str.replace( new RegExp( \"(?:[&?])\" + name + \"[^&]*\", \"g\" ), \"\" )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstr += \"&\";\n\t\t\t\t\t\t\tstr += name + \"=\" + value;\n\t\t\t\t\t\t\tstr = \"?\" + str.slice( 1 );\n\n\t\t\t\t\t\t\t// there is an official order for the query and the hash if you didn't know.\n\t\t\t\t\t\t\tlocation.assign( location.origin + location.pathname + str + location.hash );\n\n\t\t\t\t\t\t} else if (typeof response.data.call_function !== 'undefined') {\n\n\t\t\t\t\t\t\tif (typeof response.data.function_vars !== 'undefined') {\n\t\t\t\t\t\t\t\twindow.ulgmGroupManagement[response.data.call_function]( response.data.function_vars );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twindow.ulgmGroupManagement[response.data.call_function]();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\ttypeof response.data.reload !== 'undefined' &&\n\t\t\t\t\t\t\ttypeof response.data.endpoint !== 'undefined' &&\n\t\t\t\t\t\t\tresponse.data.reload === false &&\n\t\t\t\t\t\t\t( response.data.endpoint === 'upload_users' || response.data.endpoint === 'send-enrollment' )\n\t\t\t\t\t\t) {\n\n\t\t\t\t\t\t\tif( 1 === response.data.uploaded_users ){\n\t\t\t\t\t\t\t\t// first time the upload ran\n\t\t\t\t\t\t\t\t$([document.documentElement, document.body]).animate({\n\t\t\t\t\t\t\t\t\tscrollTop: $(\"#group-management-users\").offset().top\n\t\t\t\t\t\t\t\t}, 2000);\n\n\t\t\t\t\t\t\t\t// Hide modal\n\t\t\t\t\t\t\t\t$( \"#group-management-upload-users .uo-close-modal\" ).click();\n\t\t\t\t\t\t\t\t// Show CSV log\n\t\t\t\t\t\t\t\t$( '#uo-groups-upload-summary' ).show();\n\t\t\t\t\t\t\t\t// Hide Users table to force page reload\n\t\t\t\t\t\t\t\t$( '.uo-groups-group-courses' ).hide();\n\t\t\t\t\t\t\t\t$( '.uo-groups-enrolled-users' ).hide();\n\t\t\t\t\t\t\t\t$( '#group-management-leaders' ).hide();\n\t\t\t\t\t\t\t}\n\n\n\n\n\t\t\t\t\t\t\t// Set summary info in heading\n\t\t\t\t\t\t\t$( '#uo-groups-upload-summary .uo-header-subtitle' ).text( response.data.message );\n\t\t\t\t\t\t\t$( '#csv-result-total' ).text( response.data.total_rows );\n\n\t\t\t\t\t\t\tconsole.log( 'this is the upload' );\n\t\t\t\t\t\t\tconsole.log( response );\n\n\t\t\t\t\t\t\tlet results = response.data.results;\n\t\t\t\t\t\t\tresults.forEach( function ( entry ){\n\n\t\t\t\t\t\t\t\tlet row = document.createElement( 'div' );\n\t\t\t\t\t\t\t\trow.setAttribute( \"class\", \"uo-row uo-table-content uo-tbl-item body-row\" );\n\n\t\t\t\t\t\t\t\tlet emailCol = document.createElement( 'div' );\n\t\t\t\t\t\t\t\temailCol.setAttribute( \"class\", \"content-leaders-email uo-table-cell uo-table-cell-3\" );\n\n\t\t\t\t\t\t\t\tlet statusCol = document.createElement( 'div' );\n\t\t\t\t\t\t\t\tstatusCol.setAttribute( \"class\", \"content-leaders-statu uo-table-cell uo-table-cell-7\" );\n\n\t\t\t\t\t\t\t\temailCol.innerText  = entry.email;\n\t\t\t\t\t\t\t\tstatusCol.innerText = ( 'use_error_code' === entry.status.reason ) ? entry.message : entry.status.reason;\n\n\t\t\t\t\t\t\t\trow.appendChild( emailCol );\n\n\t\t\t\t\t\t\t\trow.appendChild( statusCol );\n\n\t\t\t\t\t\t\t\tlet resultsDiv = document.getElementById( 'uo-groups-upload-result-rows' );\n\n\t\t\t\t\t\t\t\tif (null !== resultsDiv) {\n\t\t\t\t\t\t\t\t\tresultsDiv.appendChild( row );\n\n\t\t\t\t\t\t\t\t\t// new_created_added_to_group, new_failed, existing_added_to_group, existing_already_member, existing_failed\n\n\t\t\t\t\t\t\t\t\tif ('new_created_added_to_group' === entry.status.user ||\n\t\t\t\t\t\t\t\t\t\t'existing_added_to_group' === entry.status.user) {\n\t\t\t\t\t\t\t\t\t\t$( '#csv-result-added' ).text( parseInt( $( '#csv-result-added' ).text() ) + 1 );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ('existing_already_member' === entry.status.user) {\n\t\t\t\t\t\t\t\t\t\t$( '#csv-result-member' ).text( parseInt( $( '#csv-result-member' ).text() ) + 1 );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ('new_failed' === entry.status.user ||\n\t\t\t\t\t\t\t\t\t\t'existing_failed' === entry.status.user) {\n\t\t\t\t\t\t\t\t\t\t$( '#csv-result-unprocessed' ).text( parseInt( $( '#csv-result-unprocessed' ).text() ) + 1 );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\tif (false === response.data.completed) {\n\t\t\t\t\t\t\t\tspinner.show();\n\t\t\t\t\t\t\t\tulgmGroupManagement.restForms.makeAjaxCall( endPoint, restData, associatedForm );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\t\tif (ulgmRestApiSetup.hasOwnProperty( 'localized' )) {\n\t\t\t\t\t\t\tif ('invalid-course-id' !== response.data.error) {\n\t\t\t\t\t\t\t\t$( '#uo-group-report-course' ).empty().append(\n\t\t\t\t\t\t\t\t\t$( '<option>', {\n\t\t\t\t\t\t\t\t\t\tvalue: '0',\n\t\t\t\t\t\t\t\t\t\ttext: ulgmRestApiSetup.localized.selectCourse\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$error_container\n\t\t\t\t\t\t\t.html( response.data.message )\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\tspinner.hide();\n\t\t\t\t\t$error_container.html( response.data.message );\n\t\t\t\t}\n\n\t\t\t} );\n\t\t},\n\n\t\taddFormSubmitEvents: function (){\n\n\t\t\t// Add rest call to all link with a rest call attached\n\t\t\t$( '.submit-group-management-form' ).on( 'click', this.sendRestCall );\n\n\t\t\t// Add rest call to all link with a rest call attached\n\t\t\t$( '.change-group-management-form' ).on( 'change', this.sendRestCall );\n\n\t\t\t// Add rest call to all inputs of modal if enter is pressed\n\t\t\t$( '.group-management-modal input' ).on( 'keypress', this.sendRestCall );\n\n\t\t\t$( 'input[type=radio][name=action]' ).on( 'change', function (){\n\t\t\t\tvar selected_value = this.value;\n\t\t\t\tif (selected_value === 'add-invite') {\n\t\t\t\t\t$( '#uo-import-user-note' ).show();\n\t\t\t\t} else if (selected_value === 'send-enrollment') {\n\t\t\t\t\t$( '#uo-import-user-note' ).hide();\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\n\t\tsendRestCall: function ( e ){\n\n\t\t\tvar _currentTarget = e.currentTarget;\n\n\t\t\t// if the current target is a input then we assume the user pressed enter\n\t\t\tif ($( _currentTarget ).is( 'input' )) {\n\t\t\t\tif (e.key !== \"Enter\") {\n\t\t\t\t\t// Do more work\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// switch current target to the forms submit button to extract needed data\n\t\t\t\tlet _associatedForm = $( _currentTarget ).closest( '.group-management-form' );\n\t\t\t\t// Enter is only pressed inside th modal window\n\t\t\t\t_currentTarget      = _associatedForm.find( '.submit-group-management-form' );\n\t\t\t}\n\n\t\t\tvar spinner = $( '.uo-modal-spinner' );\n\n\t\t\t// The form or container of the input data\n\t\t\tvar associatedForm   = $( _currentTarget ).closest( '.group-management-form' );\n\t\t\tvar $error_container = associatedForm.find( '.group-management-rest-message' );\n\t\t\t$error_container.hide();\n\t\t\t$( '#uo-group-progress-report' ).hide();\n\n\t\t\t// Get the end point for the rest call from the clicked element\n\t\t\tvar endPoint = $( _currentTarget ).data( 'end-point' );\n\n\t\t\tif (typeof endPoint === 'undefined') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (endPoint == 'add_user') {\n\t\t\t\tdocument.getElementById( \"group-management-add-user-frm\" ).onsubmit = function ( e ){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (!document.getElementById( \"group-management-add-user-frm\" ).checkValidity()) {\n\t\t\t\t\tdocument.getElementById( \"group-management-add-user-frm\" ).reportValidity();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (endPoint == 'edit_user') {\n\t\t\t\tdocument.getElementById( \"group-management-edit-user-frm\" ).onsubmit = function ( e ){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (!document.getElementById( \"group-management-edit-user-frm\" ).checkValidity()) {\n\t\t\t\t\tdocument.getElementById( \"group-management-edit-user-frm\" ).reportValidity();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ($( _currentTarget ).attr( 'id' ) === \"group-id\" && $( _currentTarget ).val() == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ($( _currentTarget ).attr( 'id' ) === \"uo-group-report-course\" && $( _currentTarget ).val() == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Sometimes wp editor doesn't update the textarea input rigth way.\n\t\t\t// Let's save iFrame editors to textarea so we can serialize\n\t\t\tif (typeof tinymce !== 'undefined') {\n\t\t\t\tfor (edId in tinyMCE.editors) {\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof tinyMCE.editors[edId] !== 'undefined' &&\n\t\t\t\t\t\ttypeof tinyMCE.editors[edId].save !== 'undefined' &&\n\t\t\t\t\t\ttinyMCE.editors[edId].save instanceof Function) {\n\t\t\t\t\t\ttinyMCE.editors[edId].save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Create object that will save the data that's\n\t\t\t// going to be send to the AJAX call\n\t\t\tvar restData = {};\n\n\t\t\t// Get the fields\n\t\t\tvar fields = associatedForm.find( ':input' );\n\n\t\t\t// Get an array of objects with the name and value of the fields,\n\t\t\t// iterate each element, and add it to the restData object,\n\t\t\t// using the field name as the key, and field value as the value\n\t\t\t$.each( fields.serializeArray(), function ( index, field ){\n\t\t\t\trestData[field.name] = field.value;\n\t\t\t} );\n\n\t\t\tif (endPoint == 'email_users') {\n\t\t\t\trestData = fields.serializeArray();\n\t\t\t}\n\n\t\t\tspinner.show();\n\n\t\t\tif ('upload_users' === endPoint) {\n\t\t\t\tuploadedUsers = 0;\n\t\t\t}\n\n\t\t\tulgmGroupManagement.restForms.makeAjaxCall( endPoint, restData, associatedForm );\n\n\t\t}\n\t};\n\n\t/**\n\t * Extend serialize array to create a serialized object. This is the format that the rest call expects\n\t *\n\t * @returns object Returns key value pairs where the key is the input name and the value is the input value\n\t */\n\t// Extend serialize array to create an serialized object\n\t$.fn.serializeObject = function (){\n\t\tvar o = {};\n\t\tvar a = this.serializeArray();\n\t\t$.each( a, function (){\n\t\t\tif (o[this.name] !== undefined) {\n\t\t\t\tif (!o[this.name].push) {\n\t\t\t\t\to[this.name] = [o[this.name]];\n\t\t\t\t}\n\t\t\t\to[this.name].push( this.value || '' );\n\t\t\t} else {\n\t\t\t\to[this.name] = this.value || '';\n\t\t\t}\n\t\t} );\n\t\treturn o;\n\t};\n\n\n} )( jQuery );\n","'use strict';\n\n/**\n * Copyright Marc J. Schmidt. See the LICENSE file at the top-level\n * directory of this distribution and at\n * https://github.com/marcj/css-element-queries/blob/master/LICENSE.\n */\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['./ResizeSensor.js'], factory);\n    } else if (typeof exports === \"object\") {\n        module.exports = factory(require('./ResizeSensor.js'));\n    } else {\n        root.ElementQueries = factory(root.ResizeSensor);\n        root.ElementQueries.listen();\n    }\n}(typeof window !== 'undefined' ? window : this, function (ResizeSensor) {\n\n    /**\n     *\n     * @type {Function}\n     * @constructor\n     */\n    var ElementQueries = function () {\n        //<style> element with our dynamically created styles\n        var cssStyleElement;\n\n        //all rules found for element queries\n        var allQueries = {};\n\n        //association map to identify which selector belongs to a element from the animationstart event.\n        var idToSelectorMapping = [];\n\n        /**\n         *\n         * @param element\n         * @returns {Number}\n         */\n        function getEmSize(element) {\n            if (!element) {\n                element = document.documentElement;\n            }\n            var fontSize = window.getComputedStyle(element, null).fontSize;\n            return parseFloat(fontSize) || 16;\n        }\n\n        /**\n         * Get element size\n         * @param {HTMLElement} element\n         * @returns {Object} {width, height}\n         */\n        function getElementSize(element) {\n            if (!element.getBoundingClientRect) {\n                return {\n                    width: element.offsetWidth,\n                    height: element.offsetHeight\n                }\n            }\n\n            var rect = element.getBoundingClientRect();\n            return {\n                width: Math.round(rect.width),\n                height: Math.round(rect.height)\n            }\n        }\n\n        /**\n         *\n         * @copyright https://github.com/Mr0grog/element-query/blob/master/LICENSE\n         *\n         * @param {HTMLElement} element\n         * @param {*} value\n         * @returns {*}\n         */\n        function convertToPx(element, value) {\n            var numbers = value.split(/\\d/);\n            var units = numbers[numbers.length - 1];\n            value = parseFloat(value);\n            switch (units) {\n                case \"px\":\n                    return value;\n                case \"em\":\n                    return value * getEmSize(element);\n                case \"rem\":\n                    return value * getEmSize();\n                // Viewport units!\n                // According to http://quirksmode.org/mobile/tableViewport.html\n                // documentElement.clientWidth/Height gets us the most reliable info\n                case \"vw\":\n                    return value * document.documentElement.clientWidth / 100;\n                case \"vh\":\n                    return value * document.documentElement.clientHeight / 100;\n                case \"vmin\":\n                case \"vmax\":\n                    var vw = document.documentElement.clientWidth / 100;\n                    var vh = document.documentElement.clientHeight / 100;\n                    var chooser = Math[units === \"vmin\" ? \"min\" : \"max\"];\n                    return value * chooser(vw, vh);\n                default:\n                    return value;\n                // for now, not supporting physical units (since they are just a set number of px)\n                // or ex/ch (getting accurate measurements is hard)\n            }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         * @param {String} id\n         * @constructor\n         */\n        function SetupInformation(element, id) {\n            this.element = element;\n            var key, option, elementSize, value, actualValue, attrValues, attrValue, attrName;\n\n            var attributes = ['min-width', 'min-height', 'max-width', 'max-height'];\n\n            /**\n             * Extracts the computed width/height and sets to min/max- attribute.\n             */\n            this.call = function () {\n                // extract current dimensions\n                elementSize = getElementSize(this.element);\n\n                attrValues = {};\n\n                for (key in allQueries[id]) {\n                    if (!allQueries[id].hasOwnProperty(key)) {\n                        continue;\n                    }\n                    option = allQueries[id][key];\n\n                    value = convertToPx(this.element, option.value);\n\n                    actualValue = option.property === 'width' ? elementSize.width : elementSize.height;\n                    attrName = option.mode + '-' + option.property;\n                    attrValue = '';\n\n                    if (option.mode === 'min' && actualValue >= value) {\n                        attrValue += option.value;\n                    }\n\n                    if (option.mode === 'max' && actualValue <= value) {\n                        attrValue += option.value;\n                    }\n\n                    if (!attrValues[attrName]) attrValues[attrName] = '';\n                    if (attrValue && -1 === (' ' + attrValues[attrName] + ' ').indexOf(' ' + attrValue + ' ')) {\n                        attrValues[attrName] += ' ' + attrValue;\n                    }\n                }\n\n                for (var k in attributes) {\n                    if (!attributes.hasOwnProperty(k)) continue;\n\n                    if (attrValues[attributes[k]]) {\n                        this.element.setAttribute(attributes[k], attrValues[attributes[k]].substr(1));\n                    } else {\n                        this.element.removeAttribute(attributes[k]);\n                    }\n                }\n            };\n        }\n\n        /**\n         * @param {HTMLElement} element\n         * @param {Object}      id\n         */\n        function setupElement(element, id) {\n            if (!element.elementQueriesSetupInformation) {\n                element.elementQueriesSetupInformation = new SetupInformation(element, id);\n            }\n\n            if (!element.elementQueriesSensor) {\n                element.elementQueriesSensor = new ResizeSensor(element, function () {\n                    element.elementQueriesSetupInformation.call();\n                });\n            }\n        }\n\n        /**\n         * Stores rules to the selector that should be applied once resized.\n         *\n         * @param {String} selector\n         * @param {String} mode min|max\n         * @param {String} property width|height\n         * @param {String} value\n         */\n        function queueQuery(selector, mode, property, value) {\n            if (typeof(allQueries[selector]) === 'undefined') {\n                allQueries[selector] = [];\n                // add animation to trigger animationstart event, so we know exactly when a element appears in the DOM\n\n                var id = idToSelectorMapping.length;\n                cssStyleElement.innerHTML += '\\n' + selector + ' {animation: 0.1s element-queries;}';\n                cssStyleElement.innerHTML += '\\n' + selector + ' > .resize-sensor {min-width: '+id+'px;}';\n                idToSelectorMapping.push(selector);\n            }\n\n            allQueries[selector].push({\n                mode: mode,\n                property: property,\n                value: value\n            });\n        }\n\n        function getQuery(container) {\n            var query;\n            if (document.querySelectorAll) query = (container) ? container.querySelectorAll.bind(container) : document.querySelectorAll.bind(document);\n            if (!query && 'undefined' !== typeof $$) query = $$;\n            if (!query && 'undefined' !== typeof jQuery) query = jQuery;\n\n            if (!query) {\n                throw 'No document.querySelectorAll, jQuery or Mootools\\'s $$ found.';\n            }\n\n            return query;\n        }\n\n        /**\n         * If animationStart didn't catch a new element in the DOM, we can manually search for it\n         */\n        function findElementQueriesElements(container) {\n            var query = getQuery(container);\n\n            for (var selector in allQueries) if (allQueries.hasOwnProperty(selector)) {\n                // find all elements based on the extract query selector from the element query rule\n                var elements = query(selector, container);\n\n                for (var i = 0, j = elements.length; i < j; i++) {\n                    setupElement(elements[i], selector);\n                }\n            }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         */\n        function attachResponsiveImage(element) {\n            var children = [];\n            var rules = [];\n            var sources = [];\n            var defaultImageId = 0;\n            var lastActiveImage = -1;\n            var loadedImages = [];\n\n            for (var i in element.children) {\n                if (!element.children.hasOwnProperty(i)) continue;\n\n                if (element.children[i].tagName && element.children[i].tagName.toLowerCase() === 'img') {\n                    children.push(element.children[i]);\n\n                    var minWidth = element.children[i].getAttribute('min-width') || element.children[i].getAttribute('data-min-width');\n                    //var minHeight = element.children[i].getAttribute('min-height') || element.children[i].getAttribute('data-min-height');\n                    var src = element.children[i].getAttribute('data-src') || element.children[i].getAttribute('url');\n\n                    sources.push(src);\n\n                    var rule = {\n                        minWidth: minWidth\n                    };\n\n                    rules.push(rule);\n\n                    if (!minWidth) {\n                        defaultImageId = children.length - 1;\n                        element.children[i].style.display = 'block';\n                    } else {\n                        element.children[i].style.display = 'none';\n                    }\n                }\n            }\n\n            lastActiveImage = defaultImageId;\n\n            function check() {\n                var imageToDisplay = false, i;\n\n                for (i in children) {\n                    if (!children.hasOwnProperty(i)) continue;\n\n                    if (rules[i].minWidth) {\n                        if (element.offsetWidth > rules[i].minWidth) {\n                            imageToDisplay = i;\n                        }\n                    }\n                }\n\n                if (!imageToDisplay) {\n                    //no rule matched, show default\n                    imageToDisplay = defaultImageId;\n                }\n\n                if (lastActiveImage !== imageToDisplay) {\n                    //image change\n\n                    if (!loadedImages[imageToDisplay]) {\n                        //image has not been loaded yet, we need to load the image first in memory to prevent flash of\n                        //no content\n\n                        var image = new Image();\n                        image.onload = function () {\n                            children[imageToDisplay].src = sources[imageToDisplay];\n\n                            children[lastActiveImage].style.display = 'none';\n                            children[imageToDisplay].style.display = 'block';\n\n                            loadedImages[imageToDisplay] = true;\n\n                            lastActiveImage = imageToDisplay;\n                        };\n\n                        image.src = sources[imageToDisplay];\n                    } else {\n                        children[lastActiveImage].style.display = 'none';\n                        children[imageToDisplay].style.display = 'block';\n                        lastActiveImage = imageToDisplay;\n                    }\n                } else {\n                    //make sure for initial check call the .src is set correctly\n                    children[imageToDisplay].src = sources[imageToDisplay];\n                }\n            }\n\n            element.resizeSensorInstance = new ResizeSensor(element, check);\n            check();\n        }\n\n        function findResponsiveImages() {\n            var query = getQuery();\n\n            var elements = query('[data-responsive-image],[responsive-image]');\n            for (var i = 0, j = elements.length; i < j; i++) {\n                attachResponsiveImage(elements[i]);\n            }\n        }\n\n        var regex = /,?[\\s\\t]*([^,\\n]*?)((?:\\[[\\s\\t]*?(?:min|max)-(?:width|height)[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"[^\"]*?\"[\\s\\t]*?])+)([^,\\n\\s\\{]*)/mgi;\n        var attrRegex = /\\[[\\s\\t]*?(min|max)-(width|height)[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"([^\"]*?)\"[\\s\\t]*?]/mgi;\n\n        /**\n         * @param {String} css\n         */\n        function extractQuery(css) {\n            var match, smatch, attrs, attrMatch;\n\n            css = css.replace(/'/g, '\"');\n            while (null !== (match = regex.exec(css))) {\n                smatch = match[1] + match[3];\n                attrs = match[2];\n\n                while (null !== (attrMatch = attrRegex.exec(attrs))) {\n                    queueQuery(smatch, attrMatch[1], attrMatch[2], attrMatch[3]);\n                }\n            }\n        }\n\n        /**\n         * @param {CssRule[]|String} rules\n         */\n        function readRules(rules) {\n            var selector = '';\n\n            if (!rules) {\n                return;\n            }\n\n            if ('string' === typeof rules) {\n                rules = rules.toLowerCase();\n                if (-1 !== rules.indexOf('min-width') || -1 !== rules.indexOf('max-width')) {\n                    extractQuery(rules);\n                }\n            } else {\n                for (var i = 0, j = rules.length; i < j; i++) {\n                    if (1 === rules[i].type) {\n                        selector = rules[i].selectorText || rules[i].cssText;\n                        if (-1 !== selector.indexOf('min-height') || -1 !== selector.indexOf('max-height')) {\n                            extractQuery(selector);\n                        } else if (-1 !== selector.indexOf('min-width') || -1 !== selector.indexOf('max-width')) {\n                            extractQuery(selector);\n                        }\n                    } else if (4 === rules[i].type) {\n                        readRules(rules[i].cssRules || rules[i].rules);\n                    } else if (3 === rules[i].type) {\n                        if(rules[i].styleSheet.hasOwnProperty(\"cssRules\")) {\n                            readRules(rules[i].styleSheet.cssRules);\n                        }\n                    }\n                }\n            }\n        }\n\n        var defaultCssInjected = false;\n\n        /**\n         * Searches all css rules and setups the event listener to all elements with element query rules..\n         */\n        this.init = function () {\n            var animationStart = 'animationstart';\n            if (typeof document.documentElement.style['webkitAnimationName'] !== 'undefined') {\n                animationStart = 'webkitAnimationStart';\n            } else if (typeof document.documentElement.style['MozAnimationName'] !== 'undefined') {\n                animationStart = 'mozanimationstart';\n            } else if (typeof document.documentElement.style['OAnimationName'] !== 'undefined') {\n                animationStart = 'oanimationstart';\n            }\n\n            document.body.addEventListener(animationStart, function (e) {\n                var element = e.target;\n                var styles = element && window.getComputedStyle(element, null);\n                var animationName = styles && styles.getPropertyValue('animation-name');\n                var requiresSetup = animationName && (-1 !== animationName.indexOf('element-queries'));\n\n                if (requiresSetup) {\n                    element.elementQueriesSensor = new ResizeSensor(element, function () {\n                        if (element.elementQueriesSetupInformation) {\n                            element.elementQueriesSetupInformation.call();\n                        }\n                    });\n\n                    var sensorStyles = window.getComputedStyle(element.resizeSensor, null);\n                    var id = sensorStyles.getPropertyValue('min-width');\n                    id = parseInt(id.replace('px', ''));\n                    setupElement(e.target, idToSelectorMapping[id]);\n                }\n            });\n\n            if (!defaultCssInjected) {\n                cssStyleElement = document.createElement('style');\n                cssStyleElement.type = 'text/css';\n                cssStyleElement.innerHTML = '[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}';\n\n                //safari wants at least one rule in keyframes to start working\n                cssStyleElement.innerHTML += '\\n@keyframes element-queries { 0% { visibility: inherit; } }';\n                document.getElementsByTagName('head')[0].appendChild(cssStyleElement);\n                defaultCssInjected = true;\n            }\n\n            for (var i = 0, j = document.styleSheets.length; i < j; i++) {\n                try {\n                    if (document.styleSheets[i].href && 0 === document.styleSheets[i].href.indexOf('file://')) {\n                        console.warn(\"CssElementQueries: unable to parse local css files, \" + document.styleSheets[i].href);\n                    }\n\n                    readRules(document.styleSheets[i].cssRules || document.styleSheets[i].rules || document.styleSheets[i].cssText);\n                } catch (e) {\n                }\n            }\n\n            findResponsiveImages();\n        };\n\n        /**\n         * Go through all collected rules (readRules()) and attach the resize-listener.\n         * Not necessary to call it manually, since we detect automatically when new elements\n         * are available in the DOM. However, sometimes handy for dirty DOM modifications.\n         *\n         * @param {HTMLElement} container only elements of the container are considered (document.body if not set)\n         */\n        this.findElementQueriesElements = function (container) {\n            findElementQueriesElements(container);\n        };\n\n        this.update = function () {\n            this.init();\n        };\n    };\n\n    ElementQueries.update = function () {\n        ElementQueries.instance.update();\n    };\n\n    /**\n     * Removes all sensor and elementquery information from the element.\n     *\n     * @param {HTMLElement} element\n     */\n    ElementQueries.detach = function (element) {\n        if (element.elementQueriesSetupInformation) {\n            //element queries\n            element.elementQueriesSensor.detach();\n            delete element.elementQueriesSetupInformation;\n            delete element.elementQueriesSensor;\n\n        } else if (element.resizeSensorInstance) {\n            //responsive image\n\n            element.resizeSensorInstance.detach();\n            delete element.resizeSensorInstance;\n        }\n    };\n\n    ElementQueries.init = function () {\n        if (!ElementQueries.instance) {\n            ElementQueries.instance = new ElementQueries();\n        }\n\n        ElementQueries.instance.init();\n    };\n\n    var domLoaded = function (callback) {\n        /* Mozilla, Chrome, Opera */\n        if (document.addEventListener) {\n            document.addEventListener('DOMContentLoaded', callback, false);\n        }\n        /* Safari, iCab, Konqueror */\n        else if (/KHTML|WebKit|iCab/i.test(navigator.userAgent)) {\n            var DOMLoadTimer = setInterval(function () {\n                if (/loaded|complete/i.test(document.readyState)) {\n                    callback();\n                    clearInterval(DOMLoadTimer);\n                }\n            }, 10);\n        }\n        /* Other web browsers */\n        else window.onload = callback;\n    };\n\n    ElementQueries.findElementQueriesElements = function (container) {\n        ElementQueries.instance.findElementQueriesElements(container);\n    };\n\n    ElementQueries.listen = function () {\n        domLoaded(ElementQueries.init);\n    };\n\n    return ElementQueries;\n\n}));\n","'use strict';\n\n/**\n * Copyright Marc J. Schmidt. See the LICENSE file at the top-level\n * directory of this distribution and at\n * https://github.com/marcj/css-element-queries/blob/master/LICENSE.\n */\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(factory);\n    } else if (typeof exports === \"object\") {\n        module.exports = factory();\n    } else {\n        root.ResizeSensor = factory();\n    }\n}(typeof window !== 'undefined' ? window : this, function () {\n\n    // Make sure it does not throw in a SSR (Server Side Rendering) situation\n    if (typeof window === \"undefined\") {\n        return null;\n    }\n    // https://github.com/Semantic-Org/Semantic-UI/issues/3855\n    // https://github.com/marcj/css-element-queries/issues/257\n    var globalWindow = typeof window != 'undefined' && window.Math == Math\n        ? window\n        : typeof self != 'undefined' && self.Math == Math\n            ? self\n            : Function('return this')();\n    // Only used for the dirty checking, so the event callback count is limited to max 1 call per fps per sensor.\n    // In combination with the event based resize sensor this saves cpu time, because the sensor is too fast and\n    // would generate too many unnecessary events.\n    var requestAnimationFrame = globalWindow.requestAnimationFrame ||\n        globalWindow.mozRequestAnimationFrame ||\n        globalWindow.webkitRequestAnimationFrame ||\n        function (fn) {\n            return globalWindow.setTimeout(fn, 20);\n        };\n\n    var cancelAnimationFrame = globalWindow.cancelAnimationFrame ||\n        globalWindow.mozCancelAnimationFrame ||\n        globalWindow.webkitCancelAnimationFrame ||\n        function (timer) {\n            globalWindow.clearTimeout(timer);\n        };\n\n    /**\n     * Iterate over each of the provided element(s).\n     *\n     * @param {HTMLElement|HTMLElement[]} elements\n     * @param {Function}                  callback\n     */\n    function forEachElement(elements, callback){\n        var elementsType = Object.prototype.toString.call(elements);\n        var isCollectionTyped = ('[object Array]' === elementsType\n            || ('[object NodeList]' === elementsType)\n            || ('[object HTMLCollection]' === elementsType)\n            || ('[object Object]' === elementsType)\n            || ('undefined' !== typeof jQuery && elements instanceof jQuery) //jquery\n            || ('undefined' !== typeof Elements && elements instanceof Elements) //mootools\n        );\n        var i = 0, j = elements.length;\n        if (isCollectionTyped) {\n            for (; i < j; i++) {\n                callback(elements[i]);\n            }\n        } else {\n            callback(elements);\n        }\n    }\n\n    /**\n    * Get element size\n    * @param {HTMLElement} element\n    * @returns {Object} {width, height}\n    */\n    function getElementSize(element) {\n        if (!element.getBoundingClientRect) {\n            return {\n                width: element.offsetWidth,\n                height: element.offsetHeight\n            }\n        }\n\n        var rect = element.getBoundingClientRect();\n        return {\n            width: Math.round(rect.width),\n            height: Math.round(rect.height)\n        }\n    }\n\n    /**\n     * Apply CSS styles to element.\n     *\n     * @param {HTMLElement} element\n     * @param {Object} style\n     */\n    function setStyle(element, style) {\n        Object.keys(style).forEach(function(key) {\n            element.style[key] = style[key];\n        });\n    }\n\n    /**\n     * Class for dimension change detection.\n     *\n     * @param {Element|Element[]|Elements|jQuery} element\n     * @param {Function} callback\n     *\n     * @constructor\n     */\n    var ResizeSensor = function(element, callback) {\n        //Is used when checking in reset() only for invisible elements\n        var lastAnimationFrameForInvisibleCheck = 0;\n\n        /**\n         *\n         * @constructor\n         */\n        function EventQueue() {\n            var q = [];\n            this.add = function(ev) {\n                q.push(ev);\n            };\n\n            var i, j;\n            this.call = function(sizeInfo) {\n                for (i = 0, j = q.length; i < j; i++) {\n                    q[i].call(this, sizeInfo);\n                }\n            };\n\n            this.remove = function(ev) {\n                var newQueue = [];\n                for(i = 0, j = q.length; i < j; i++) {\n                    if(q[i] !== ev) newQueue.push(q[i]);\n                }\n                q = newQueue;\n            };\n\n            this.length = function() {\n                return q.length;\n            }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         * @param {Function}    resized\n         */\n        function attachResizeEvent(element, resized) {\n            if (!element) return;\n            if (element.resizedAttached) {\n                element.resizedAttached.add(resized);\n                return;\n            }\n\n            element.resizedAttached = new EventQueue();\n            element.resizedAttached.add(resized);\n\n            element.resizeSensor = document.createElement('div');\n            element.resizeSensor.dir = 'ltr';\n            element.resizeSensor.className = 'resize-sensor';\n\n            var style = {\n                pointerEvents: 'none',\n                position: 'absolute',\n                left: '0px',\n                top: '0px',\n                right: '0px',\n                bottom: '0px',\n                overflow: 'hidden',\n                zIndex: '-1',\n                visibility: 'hidden',\n                maxWidth: '100%'\n            };\n            var styleChild = {\n                position: 'absolute',\n                left: '0px',\n                top: '0px',\n                transition: '0s',\n            };\n\n            setStyle(element.resizeSensor, style);\n\n            var expand = document.createElement('div');\n            expand.className = 'resize-sensor-expand';\n            setStyle(expand, style);\n\n            var expandChild = document.createElement('div');\n            setStyle(expandChild, styleChild);\n            expand.appendChild(expandChild);\n\n            var shrink = document.createElement('div');\n            shrink.className = 'resize-sensor-shrink';\n            setStyle(shrink, style);\n\n            var shrinkChild = document.createElement('div');\n            setStyle(shrinkChild, styleChild);\n            setStyle(shrinkChild, { width: '200%', height: '200%' });\n            shrink.appendChild(shrinkChild);\n\n            element.resizeSensor.appendChild(expand);\n            element.resizeSensor.appendChild(shrink);\n            element.appendChild(element.resizeSensor);\n\n            var computedStyle = window.getComputedStyle(element);\n            var position = computedStyle ? computedStyle.getPropertyValue('position') : null;\n            if ('absolute' !== position && 'relative' !== position && 'fixed' !== position && 'sticky' !== position) {\n                element.style.position = 'relative';\n            }\n\n            var dirty = false;\n\n            //last request animation frame id used in onscroll event\n            var rafId = 0;\n            var size = getElementSize(element);\n            var lastWidth = 0;\n            var lastHeight = 0;\n            var initialHiddenCheck = true;\n            lastAnimationFrameForInvisibleCheck = 0;\n\n            var resetExpandShrink = function () {\n                var width = element.offsetWidth;\n                var height = element.offsetHeight;\n\n                expandChild.style.width = (width + 10) + 'px';\n                expandChild.style.height = (height + 10) + 'px';\n\n                expand.scrollLeft = width + 10;\n                expand.scrollTop = height + 10;\n\n                shrink.scrollLeft = width + 10;\n                shrink.scrollTop = height + 10;\n            };\n\n            var reset = function() {\n                // Check if element is hidden\n                if (initialHiddenCheck) {\n                    var invisible = element.offsetWidth === 0 && element.offsetHeight === 0;\n                    if (invisible) {\n                        // Check in next frame\n                        if (!lastAnimationFrameForInvisibleCheck){\n                            lastAnimationFrameForInvisibleCheck = requestAnimationFrame(function(){\n                                lastAnimationFrameForInvisibleCheck = 0;\n                                reset();\n                            });\n                        }\n\n                        return;\n                    } else {\n                        // Stop checking\n                        initialHiddenCheck = false;\n                    }\n                }\n\n                resetExpandShrink();\n            };\n            element.resizeSensor.resetSensor = reset;\n\n            var onResized = function() {\n                rafId = 0;\n\n                if (!dirty) return;\n\n                lastWidth = size.width;\n                lastHeight = size.height;\n\n                if (element.resizedAttached) {\n                    element.resizedAttached.call(size);\n                }\n            };\n\n            var onScroll = function() {\n                size = getElementSize(element);\n                dirty = size.width !== lastWidth || size.height !== lastHeight;\n\n                if (dirty && !rafId) {\n                    rafId = requestAnimationFrame(onResized);\n                }\n\n                reset();\n            };\n\n            var addEvent = function(el, name, cb) {\n                if (el.attachEvent) {\n                    el.attachEvent('on' + name, cb);\n                } else {\n                    el.addEventListener(name, cb);\n                }\n            };\n\n            addEvent(expand, 'scroll', onScroll);\n            addEvent(shrink, 'scroll', onScroll);\n\n            // Fix for custom Elements and invisible elements\n            lastAnimationFrameForInvisibleCheck = requestAnimationFrame(function(){\n                lastAnimationFrameForInvisibleCheck = 0;\n                reset();\n            });\n        }\n\n        forEachElement(element, function(elem){\n            attachResizeEvent(elem, callback);\n        });\n\n        this.detach = function(ev) {\n            // clean up the unfinished animation frame to prevent a potential endless requestAnimationFrame of reset\n            if (!lastAnimationFrameForInvisibleCheck) {\n                cancelAnimationFrame(lastAnimationFrameForInvisibleCheck);\n                lastAnimationFrameForInvisibleCheck = 0;\n            }\n            ResizeSensor.detach(element, ev);\n        };\n\n        this.reset = function() {\n            element.resizeSensor.resetSensor();\n        };\n    };\n\n    ResizeSensor.reset = function(element) {\n        forEachElement(element, function(elem){\n            elem.resizeSensor.resetSensor();\n        });\n    };\n\n    ResizeSensor.detach = function(element, ev) {\n        forEachElement(element, function(elem){\n            if (!elem) return;\n            if(elem.resizedAttached && typeof ev === \"function\"){\n                elem.resizedAttached.remove(ev);\n                if(elem.resizedAttached.length()) return;\n            }\n            if (elem.resizeSensor) {\n                if (elem.contains(elem.resizeSensor)) {\n                    elem.removeChild(elem.resizeSensor);\n                }\n                delete elem.resizeSensor;\n                delete elem.resizedAttached;\n            }\n        });\n    };\n\n    if (typeof MutationObserver !== \"undefined\") {\n        var observer = new MutationObserver(function (mutations) {\n            for (var i in mutations) {\n                if (mutations.hasOwnProperty(i)) {\n                    var items = mutations[i].addedNodes;\n                    for (var j = 0; j < items.length; j++) {\n                        if (items[j].resizeSensor) {\n                            ResizeSensor.reset(items[j]);\n                        }\n                    }\n                }\n            }\n        });\n\n        document.addEventListener(\"DOMContentLoaded\", function (event) {\n            observer.observe(document.body, {\n                childList: true,\n                subtree: true,\n            });\n        });\n    }\n\n    return ResizeSensor;\n\n}));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","import $ from 'jquery';\n\n/**\n * Performs a REST Call\n * \n * @return null\n */\n\nexport function restCall( parameters ){\n    // Define the valid endpoints\n    let validEndpoints = [ 'change_user_progress' ];\n\n    // Check if the endPoint parameter is a valid endpoint\n    if ( validEndpoints.includes( parameters.endpoint ) ){\n        // Do AJAX\n        $.ajax({\n            method: 'POST',\n            url:    parameters.url + parameters.endpoint + '/',\n            data:   $.param( parameters.data ) + '&' + $.param({ doing_rest: 1 }),\n\n            // Attach Nonce the the header of the request\n            beforeSend: function( xhr ){\n                xhr.setRequestHeader( 'X-WP-Nonce', parameters.nonce );\n            },\n\n            success: function( response ){\n\n                // Check if onDone is defined\n                if ( isDefined( parameters.onDone ) ){\n                    // Invoke callback\n                    parameters.onDone( response );\n                }\n\n                // Check if onSuccess is defined\n                if ( isDefined( parameters.onSuccess ) ){\n                    // Invoke callback\n                    parameters.onSuccess( response );\n                }\n            },\n\n            statusCode: {\n                403: function(){\n                    location.reload();\n                }\n            },\n\n            fail: function ( response ){\n                // Check if onDone is defined\n                if ( isDefined( parameters.onDone ) ){\n                    // Invoke callback\n                    parameters.onDone( response );\n                }\n                \n                if ( isDefined( parameters.onFail ) ){\n                    parameters.onFail( response );\n                }\n            },\n        });\n    }\n    else {\n        console.error( `The ${ parameters.endpoint } endPoint does not exists` );\n    }\n}\n\n/**\n * Determine if a variable is set and is not NULL\n *\n * @param  {mixed}      variable - The variable being evaluated\n * @return {boolean}    TRUE if the variable is defined\n */\n\nexport const isDefined = ( variable ) => {\n\t// Returns true if the variable is undefined\n    return typeof variable !== 'undefined' && variable !== null;\n}\n\n/**\n * Determine whether a variable is empty\n *\n * @param   {mixed}     variable - The variable being evaluated\n * @return  {boolean}   TRUE if the variable is empty\n */\n\nexport const isEmpty = ( variable ) => {\n    let response = true;\n\n    // Check if the variable is defined, otherwise is empty\n    if ( isDefined( variable ) ){\n        // Check if it's array\n        if ( variable.isArray ){\n            response = variable.length == 0;\n        }\n        else if ( isObject( variable ) ){\n            response = Object.keys( variable ).length;\n        }\n        else {\n            response = variable == '';\n        }\n    }\n\n    return response;\n}\n\n/**\n * Determine whether a variable is an object\n *\n * @param   {mixed}     variable - The variable being evaluated\n * @return  {boolean}   TRUE if the variable is an object\n */\n\nexport const isObject = ( variable ) => {\n    return typeof variable === 'object' && variable !== null;\n}\n\n/**\n * Format number\n * @param  {float}  amount        The number\n * @param  {int}    decimalCount  Number of decimals\n * @param  {string} decimal       The decimal separator\n * @param  {string} thousands     The thousands separator\n * @return {string}               Formatted number\n */\n\nexport const formatNumber = ( amount, decimalCount = 2, decimal = '.', thousands = ',' ) => {\n    decimalCount = Math.abs( decimalCount );\n    decimalCount = isNaN( decimalCount ) ? 2 : decimalCount;\n\n    let i = parseInt( amount = Math.abs( Number( amount ) || 0 ).toFixed( decimalCount ) ).toString();\n    let j = ( i.length > 3 ) ? i.length % 3 : 0;\n\n    return ( j ? i.substr( 0, j ) + thousands : '' ) + i.substr( j ).replace( /(\\d{3})(?=\\d)/g, '$1' + thousands ) + ( decimalCount ? decimal + Math.abs( amount - i ).toFixed( decimalCount ).slice( 2 ) : '' );\n};\n\n/**\n * Destroy iCheck\n */\n\nexport const destroyiCheck = () => {\n    // Check iCheck\n    if ( typeof jQuery.fn.iCheck !== 'undefined' ){\n        // Destroy iCheck checkboxes\n        jQuery( '.uo-checkbox input' ).iCheck( 'destroy' );\n        jQuery( '.uo-checkbox input' ).on( 'ifCreated', function( event ){\n            // Destroy iCheck\n            setTimeout(function(){\n                jQuery( event.currentTarget ).iCheck( 'destroy' );\n            }, 100 );\n        });\n    }  \n}","import {\n\tdestroyiCheck\n} from './utilities';\n\n(function($){\n\t$(document).ready(function(){\n\t\thide_sort_buttons();\n\t\tcopy_to_clipboard();\n\t\tux_buttons();\n\t\thide_tables_while_loading();\n\n\t\tdestroyiCheck();\n\t});\n\n\tfunction hide_sort_buttons(){\n\t\tvar sort_buttons_container = $('.uo-table-sort-buttons');\n\t\tsort_buttons_container.on('click', '.uo-table-sort-btn', function(){\n\t\t\tvar closest_group = $(this).closest('.uo-table-sort-buttons'),\n\t\t\t\tdirection = $(this).data('direction');\n\t\t\t$(this).hide();\n\t\t\tclosest_group.find('.uo-table-sort-btn:not([data-direction=\"'+direction+'\"])').show();\n\t\t});\n\t}\n\n\tfunction copy_to_clipboard(){\n\t\tvar button = $('.uo-copy-to-clipboard-button');\n\t\tbutton.click(function(){\n\t\t\tvar container = $(this).closest('.uo-copy-to-clipboard'),\n\t\t\t\tinput = $(container.find('input'));\n\t\t\tinput.select();\n\t\t\tdocument.execCommand('Copy');\n\t\t});\n\t}\n\n\tfunction ux_buttons(){\n\t\t// group-management > enrolled users Hide \"Add user\" when an user is selected in the table\n\t\tvar btn_add_users = $('#uo_add_users_button');\n\n\t\t/* enrolled_user_checkboxes.change(function(){\n\t\t\tvar at_least_one_selected = enrolled_user_checkboxes.is(':checked');\n\n\t\t\tif (at_least_one_selected) {\n                //btn_add_users.hide();\n            }else {\n                //btn_add_users.show();\n            }\n\t\t}); */\n\n\t\t$( '#uo-open-bulk-add' ).on( 'click', function(){\n\t\t\tlet container = $( '.uo-groups-bulk' );\n\t\t\tcontainer.slideToggle( 500 );\n\n\t\t\t$( 'html, body' ).animate({\n\t\t\t\tscrollTop: container.offset().top - 100\n\t\t\t}, 500);\n\t\t});\n\n\t\t$( '.uo-groups-bulk-close' ).on( 'click', function(){\n\t\t\tlet container = $( '.uo-groups-bulk' );\n\t\t\tcontainer.slideToggle( 500 );\n\t\t});\n\n\t\t// group-management > group leaders Hide \"Add group leader\" when a leader is selected in the table\n\t\tvar group_leaders_checkboxes = $('.uo-groups-group-leaders input[name=\"group-leader-id[]\"], .uo-groups-enrolled-users input#select-all-group-leaders'),\n\t\t\tbtn_add_leader = $('.uo-groups-group-leaders .uo-btn[data-modal-id=\"#group-management-add-group-leader\"]');\n\n\t\tgroup_leaders_checkboxes.on('change', function(){\n\t\t\tvar at_least_one_selected = group_leaders_checkboxes.is(':checked');\n\n\t\t\tif (at_least_one_selected)\n\t\t\t\tbtn_add_leader.hide();\n\t\t\telse\n\t\t\t\tbtn_add_leader.show();\n\t\t});\n\n\t\t// Group buttons in small devices\n\t\t$( '.uo-groups-list-of-btns-main' ).click( function( event ){\n\t\t\t// Get the clicked button\n\t\t\tvar $currentButton    = $( event.currentTarget ),\n\t\t\t// then get the group id\n\t\t\t\tgroupId           = $currentButton.data( 'id' ),\n\t\t\t// and get the direction\n\t\t\t\tdropdownDirection = typeof $currentButton.data( 'direction' ) == 'undefined' ? 'right' : $currentButton.data( 'direction' );\n\n\t\t\t// Once we have the group id, get the main container, which contains the items to show\n\t\t\tvar $targetGroup   = $( '.uo-groups-list-of-btns[data-id=\"' + groupId + '\"]' );\n\n\t\t\t// Check if the group exists\n\t\t\tif ( $targetGroup.length == 1 ){\n\t\t\t\t// Check if it's open\n\t\t\t\tvar isGroupOpen = $targetGroup.hasClass( 'uo-groups-list-of-btns-open' );\n\n\t\t\t\t// Check if it's closed\n\t\t\t\tif ( ! isGroupOpen ){\n\t\t\t\t\t// Add class to show it\n\t\t\t\t\t$targetGroup.addClass( 'uo-groups-list-of-btns-open' );\n\n\t\t\t\t\t// Add the class to set the direction\n\t\t\t\t\tif ( dropdownDirection == 'left' || dropdownDirection == 'right' ){\n\t\t\t\t\t\t$targetGroup.addClass( 'uo-groups-list-of-btns--' + dropdownDirection );\n\t\t\t\t\t}\n\n\t\t\t\t\tbind_click_outside();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Remove class to show the group\n\t\t\t\t\t$targetGroup.removeClass( 'uo-groups-list-of-btns-open' );\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.error( 'We couldn\\'t find the dropdown' );\n\t\t\t}\n\t\t});\n\n\t\t// Close if clicks on a button inside a list of buttons\n\t\tvar btns_inside_list = $('.uo-groups-list-of-btns .uo-groups-list .uo-btn');\n\t\tbtns_inside_list.click(function(){\n\t\t\tvar group = $(this).closest('.uo-groups-list-of-btns');\n\t\t\tgroup.removeClass('uo-groups-list-of-btns-open')\n\t\t});\n\n\t\tfunction bind_click_outside(){\n\t\t\t// Close if user taps outside\n\t\t\t$(document).mouseup(function(e){\n\t\t\t\tvar container = $('.uo-groups-list-of-btns');\n\t\t\t\tif (!container.is(e.target) && container.has(e.target).length === 0){\n\t\t\t\t\tcontainer.removeClass('uo-groups-list-of-btns-open');\n\t\t\t\t\tunbind_click_outside();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction unbind_click_outside(){\n\t\t\t$('.uo-groups-list-of-btns').unbind('click', $(document)); \n\t\t}\n\t}\n\n\tfunction hide_tables_while_loading(){\n\t\t// /group-management-report/\n\t\tvar progress_report = $('#uo-group-progress-report'),\n\t\t\ttriggers = $('.uo-groups.uo-reports #group-report select.change-group-management-form');\n\n\t\ttriggers.change(function(){\n\t\t\tprogress_report.hide();\n\t\t});\n\t}\n})(jQuery);\n","import $ from 'jquery';\n\nclass GroupManagement {\n\tconstructor(){\n\t\t// Check if it's the group management page\n\t\tif (this.isGroupManagement()) {\n\t\t\t// Create enrolled users table\n\t\t\tnew EnrolledUsersTable();\n\n\t\t\t// Setup modal popups\n\t\t\twindow.ulgmGroupManagement.groupManagementModal = new modals();\n\t\t}\n\t}\n\n\tisGroupManagement(){\n\t\treturn $( '#group-management' ).length == 1;\n\t}\n}\n\nclass modals {\n\tconstructor(){\n\t\t$( document ).on( 'modal:open', function ( e ){\n\t\t\tif (e.target.id === 'group-management-email-users') {\n\t\t\t\twp.editor.remove( 'group_email_text' );\n\t\t\t\twp.editor.initialize( 'group_email_text',\n\t\t\t\t\t{\n\t\t\t\t\t\ttinymce: {\n\t\t\t\t\t\t\tmin_height: 300,\n\t\t\t\t\t\t\tformats: {\n\t\t\t\t\t\t\t\talignleft: [{\n\t\t\t\t\t\t\t\t\tselector: \"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",\n\t\t\t\t\t\t\t\t\tstyles: {textAlign: \"left\"}\n\t\t\t\t\t\t\t\t}, {selector: \"img,table,dl.wp-caption\", classes: \"alignleft\"}],\n\t\t\t\t\t\t\t\taligncenter: [{\n\t\t\t\t\t\t\t\t\tselector: \"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",\n\t\t\t\t\t\t\t\t\tstyles: {textAlign: \"center\"}\n\t\t\t\t\t\t\t\t}, {selector: \"img,table,dl.wp-caption\", classes: \"aligncenter\"}],\n\t\t\t\t\t\t\t\talignright: [{\n\t\t\t\t\t\t\t\t\tselector: \"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",\n\t\t\t\t\t\t\t\t\tstyles: {textAlign: \"right\"}\n\t\t\t\t\t\t\t\t}, {selector: \"img,table,dl.wp-caption\", classes: \"alignright\"}],\n\t\t\t\t\t\t\t\tstrikethrough: {inline: \"del\"}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttoolbar1: 'formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor emoticons',\n\t\t\t\t\t\t\tplugins: \"charmap colorpicker hr lists media paste tabfocus textcolor fullscreen wordpress wpautoresize wpeditimage wpemoji wpgallery wplink wpdialogs wptextpattern wpview\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tquicktags: {\n\t\t\t\t\t\t\tbuttons: 'strong,em,link,ul,ol,li,code'\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\t// Add events for the group management page\n\t\tthis.addGroupManagementEvents();\n\t}\n\n\taddGroupManagementEvents(){\n\n\t\t// Clear file so we get a fresh copy every time\n\t\t$( \"#csv-file\" ).on( 'click', function (){\n\t\t\t$( this ).val( '' );\n\t\t} );\n\n\t\t// There may be other plugin/themes that are using this modal or using the same trigger. let customize the trigger\n\t\t$( 'body' ).on( 'click', '.ulgm-modal-link', this.openModal );\n\n\t\t// User csv file input change\n\t\t$( '#csv-file' ).on( 'change', this.parseCsv );\n\n\t\t//Hide inupts dependent on radio\n\t\t$( \"input:radio[name=action]\" ).click( function (){\n\t\t\tvar value          = $( this ).val();\n\t\t\tvar modalContainer = $( this ).parent();\n\n\t\t\tmodalContainer.children( '#first-name, #last-name, #email, label[for=first-name], label[for=last-name], label[for=email-name]' ).show();\n            $('#uo_add_user_password').show();\n\n\t\t\tif ('send-enrollment' === value || 'add-existing-user' === value) {\n\t\t\t\tmodalContainer.children( '#first-name, #last-name, label[for=first-name], label[for=last-name]' ).hide();\n\t\t\t\t$('#uo_add_user_password').hide();\n\t\t\t}\n\n\t\t} );\n\n\t\twindow.ulgmGroupManagement.downloadCsv = function ( csv ){\n\t\t\tvar blob = new Blob( [csv.csvDataString], {type: \"text/csv;charset=utf-8\"} );\n\t\t\tsaveAs( blob, csv.fileName + \".csv\" );\n\t\t};\n\t}\n\n\topenModal( e ){\n\t\te.preventDefault();\n\n\t\t// clear any error messages\n\t\t$( '.group-management-form' ).find( '.group-management-rest-message' ).html( '' ).hide();\n\n\t\tvar modalId   = $( this ).data( 'modal-id' );\n\t\tvar modalAjax = $( this ).data( 'modal-ajax' );\n\n\t\tif (modalAjax == true) {\n\t\t\tvar endpoint = $( this ).data( 'endpoint' );\n\t\t\tvar user     = $( this ).data( 'user-id' );\n\t\t\tvar group    = $( this ).data( 'group-id' );\n\t\t\tvar restData = {'action': 'get-user-details', 'user': user, 'group-id': group};\n\t\t\tvar spinner  = $( '.uo-modal-spinner' );\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\turl: ulgmRestApiSetup.root + endpoint + '/',\n\t\t\t\tdata: restData,\n\n\t\t\t\t// Attach Nonce the the header of the request\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', ulgmRestApiSetup.nonce );\n\t\t\t\t},\n\n\t\t\t\tstatusCode: {\n\t\t\t\t\t403: function ( xhr ){\n\t\t\t\t\t\tspinner.hide();\n\t\t\t\t\t\t$error_container.html( ulgmRestApiSetup.i18n.youCantDoThat ).show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tsuccess: function ( response ){\n\n\t\t\t\t\tfor (var x in response.data) {\n\t\t\t\t\t\tif ($( '#' + x ).length > 0) {\n\t\t\t\t\t\t\t$( '#' + x ).val( response.data[x].value );\n\t\t\t\t\t\t\tif (response.data[x].is_editable == false) {\n\t\t\t\t\t\t\t\t$( '#' + x ).attr( 'disabled', 'disabled' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\tif (true === response.success) {\n\t\t\t\t\t\tvar modal = $( modalId );\n\t\t\t\t\t\tmodal.modal();\n\n\t\t\t\t\t\t$( '#group-management' ).trigger( 'modal-open', [modalId, modal] );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\t\t$error_container\n\t\t\t\t\t\t\t.html( response.data.message )\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\tspinner.hide();\n\t\t\t\t\t$error_container.html( response.data.message );\n\t\t\t\t},\n\n\t\t\t} );\n\n\t\t} else {\n\t\t\tvar modal = $( modalId );\n\t\t\tmodal.modal();\n\n\t\t\t$( '#group-management' ).trigger( 'modal-open', [modalId, modal] );\n\t\t}\n\t}\n\n\tparseCsv( e ){\n\n\t\tvar input            = $( this );\n\t\tvar messageContainer = $( input.closest( '.group-management-form' ) ).find( '.group-management-rest-message' )\n\n\t\t// Reset Message\n\t\tmessageContainer.hide();\n\t\tmessageContainer.text( '' );\n\n\t\ttry {\n\t\t\tvar reader = new FileReader();\n\t\t\t//do something\n\t\t} catch (e) {\n\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.file_api_is_not_supported ).css( 'display', 'inline-flex' );\n\t\t\treturn false;\n\t\t}\n\n\t\tvar file    = $( '#csv-file' )[0].files[0];\n\t\tvar csvText = false;\n\n\n\t\tif (file) {\n\t\t\t// check is csv extension\n\t\t\tif ('csv' !== file.name.split( '.' ).pop()) {\n\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.select_a_csv ).css( 'display', 'inline-flex' );\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treader.readAsText( file );\n\n\t\t\treader.onload = function ( e ){\n\n\t\t\t\tcsvText = e.target.result;\n\n\t\t\t\tif (!csvText) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.csv_file_error ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// split file text on line breaks\n\t\t\t\tvar csvArray = csvText.split( /\\r?\\n/g );\n\n\t\t\t\t// Preliminary checks\n\n\t\t\t\t// Pull out the header and store it\n\n\t\t\t\tvar csvHead = csvArray.shift();\n\n\t\t\t\tlet delimiter = \",\";\n\t\t\t\tif (csvHead.indexOf( \";\" ) !== -1) {\n\t\t\t\t\tdelimiter = \";\";\n\t\t\t\t}\n\n\n\t\t\t\tcsvHead = csvHead.split( delimiter );\n\n\t\t\t\t// Something is off ... create to detect CR only line breaks where CRLF is only supported but may detect other malformations\n\t\t\t\tif (csvHead.length !== 3 && csvArray.length === 0) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.incompatible_format ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Remove last line of csv that is always blank\n\t\t\t\tcsvArray.pop();\n\n\t\t\t\t// Require emails\n\t\t\t\tvar emailIndex = window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader( csvHead, 'user_email' );\n\t\t\t\tif ('error' === emailIndex) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.not_contains_email ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Require user first name\n\t\t\t\tvar firstNameIndex = window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader( csvHead, 'first_name' );\n\t\t\t\tif ('error' === firstNameIndex) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.not_contains_first ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Require user first name\n\t\t\t\tvar lastNameIndex = window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader( csvHead, 'last_name' );\n\t\t\t\tif ('error' === lastNameIndex) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.not_contains_last ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar newArray = csvArray.map( function mapper( v ){\n\t\t\t\t\tif (typeof v == \"string\") {\n\t\t\t\t\t\treturn v.split( delimiter );\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn v.map( mapper );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\n\t\t\t\t// Check for blank lines\n\t\t\t\tvar emptyRows = window.ulgmGroupManagement.groupManagementModal.verifyEmptyRows( newArray, emailIndex );\n\n\t\t\t\tif (emptyRows) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.must_contain_email ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t$( '#csv-text' ).val( csvText );\n\n\n\t\t\t};\n\t\t} else {\n\t\t\t$( input.closest( '.group-management-form' ) ).find( '.group-management-rest-message' ).text( ulgmGroupManagementLocalized.text.choose_file );\n\t\t\treturn false;\n\t\t}\n\n\t}\n\n\tverifyEmptyRows( array, emailIndex ){\n\n\t\tfor (var i = 0; i < array.length; ++i) {\n\t\t\tif (array[i][emailIndex] === '') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tverifyRequiredHeader( headerArray, type ){\n\n\t\tvar columnsAmount = 0;\n\t\tvar columnIndex   = false;\n\t\tfor (var i = 0; i < headerArray.length; i++) {\n\t\t\tif (headerArray[i] === type) {\n\t\t\t\tcolumnsAmount++;\n\t\t\t\tcolumnIndex = i;\n\t\t\t}\n\t\t}\n\n\t\tif (0 === columnsAmount) {\n\t\t\treturn 'error';\n\n\t\t}\n\n\t\tif (1 !== columnsAmount) {\n\t\t\treturn 'error';\n\t\t}\n\n\t\treturn columnIndex;\n\n\t}\n}\n\nclass EnrolledUsersTable {\n\tconstructor(){\n\t\t// Check if it has the enrolled users table\n\t\tif (this.hasEnrolledUsersTable()) {\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Get data\n\t\t\tthis.getData();\n\n\t\t\t// Add select2\n\t\t\tthis.addSelect2();\n\n\t\t\t// Create DataTable\n\t\t\tthis.createDataTables();\n\n\t\t\t// Listen the checkbox to select all the users\n\t\t\tthis.listenCheckboxToSelectAll();\n\n\t\t\t// Listen checkboxes changes\n\t\t\tthis.listenCheckboxesChanges();\n\n\t\t\t// Listen modal open and update data\n\t\t\tthis.updateDataOnModal();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\t// Get elements\n\t\tthis.$elements = {\n\t\t\tcontainer: $( '#group-management' ),\n\t\t\tselectEl: $( '.uo-groups select' ),\n\t\t\tenrolledUsersTableDT: $( '#group-management-enrolled-users-datatable' ),\n\t\t\tenrolledLeaderTableDT: $( '#group-management-enrolled-leader-datatable' ),\n\t\t\tremoveUsersButton: $( '#group-management-enrolled-users-table-remove-users' ),\n\t\t\tremoveLeadersButton: $( '.group-leader-management-buttons' ),\n\t\t\tsendEmailsButton: $( '#group-management-enrolled-users-table-send-password' ),\n\t\t\tnumberOfUsers: $( '#group-management .uo-groups-enrolled-users .amount-users' ),\n\t\t\tsendEmailsModal: $( '#group-management-enrolled-users-table-send-password-modal' ),\n\t\t\tsendEmailsField: $( '#group-management-enrolled-users-table-send-password-field' ),\n\t\t\tremoveUsersField: $( '#group-management-remove-user #removing-users' )\n\t\t}\n\t}\n\n\taddSelect2(){\n\t\t// Select group to manage\n\t\tif (jQuery.fn.select2) {\n\t\t\tthis.$elements.selectEl.select2();\n\t\t}\n\n\t\tif ($( '#group-id' ).length > 0) {\n\t\t\t$( '#group-id' ).change( function (){\n\t\t\t\t$( this ).closest( 'form' ).submit();\n\t\t\t} );\n\t\t}\n\t}\n\n\tgetData(){\n\t\t// Get data from DOM elements\n\t\tthis.data = {\n\t\t\tcanRemoveUsers: !!parseInt( this.$elements.enrolledUsersTableDT.data( 'can-remove-users' ) ),\n\t\t\tcanRemoveUsersAnytime: !!parseInt( this.$elements.enrolledUsersTableDT.data( 'can-remove-users-anytime' ) ),\n\t\t\tulgmGroupLeaderData: null !== ulgmGroupLeaderData ? ulgmGroupLeaderData : [],\n\t\t};\n\n\t\t// Set the default array for the selected users on page load\n\t\tthis.selectedUsers   = [];\n\t\tthis.selectedLeaders = [];\n\t}\n\n\tcreateDataTables(){\n\n\t\t/* Create an array with the values of all the input boxes in a column */\n\t\tjQuery.fn.dataTable.ext.type.order['uo-groups-anchor-asc'] = function ( a, b ){\n\t\t\t// Create the HTML element\n\t\t\tlet textA       = document.createElement( 'div' );\n\t\t\t// Insert the row content inside\n\t\t\ttextA.innerHTML = a;\n\t\t\t// Get only the text, not the HTML\n\t\t\ttextA           = textA.textContent;\n\t\t\t// Make it lowercase, and remove extra spaces\n\t\t\ttextA           = textA.toLowerCase().trim();\n\n\t\t\t// Now do the same with B\n\t\t\tlet textB       = document.createElement( 'div' );\n\t\t\ttextB.innerHTML = b;\n\t\t\ttextB           = textB.textContent;\n\t\t\ttextB           = textB.toLowerCase().trim();\n\n\t\t\t// Compare text A with text B\n\t\t\treturn textA.localeCompare( textB );\n\t\t};\n\n\t\tjQuery.fn.dataTable.ext.type.order['uo-groups-anchor-desc'] = function ( a, b ){\n\t\t\t// Create the HTML element\n\t\t\tlet textA       = document.createElement( 'div' );\n\t\t\t// Insert the row content inside\n\t\t\ttextA.innerHTML = a;\n\t\t\t// Get only the text, not the HTML\n\t\t\ttextA           = textA.textContent;\n\t\t\t// Make it lowercase, and remove extra spaces\n\t\t\ttextA           = textA.toLowerCase().trim();\n\n\t\t\t// Now do the same with B\n\t\t\tlet textB       = document.createElement( 'div' );\n\t\t\ttextB.innerHTML = b;\n\t\t\ttextB           = textB.textContent;\n\t\t\ttextB           = textB.toLowerCase().trim();\n\n\t\t\t// Compare text A with text B\n\t\t\treturn textB.localeCompare( textA );\n\t\t};\n\n\t\t// version 4.0- columns are defined in group-management-interface.php\n\t\tlet userColumns = this.data.ulgmGroupLeaderData.enrolled_user_columns;\n\n\t\tif ('true' === this.data.ulgmGroupLeaderData.populate_management_features) {\n\t\t\tuserColumns.unshift( {\n\t\t\t\tdata: 'check',\n\t\t\t\ttargets: 0,\n\t\t\t\ttitle: this.data.ulgmGroupLeaderData.check_all,\n\t\t\t\tsearchable: false,\n\t\t\t\torderable: false,\n\t\t\t} );\n\n\t\t}\n\n\t\t//Dropping Key column if its hidden\n\t\tif (true !== this.$elements.enrolledUsersTableDT.data( 'key_column' )) {\n\t\t\tlet index = userColumns.indexOf( 'key' );\n\t\t\tuserColumns.splice( index, 1 );\n\t\t}\n\t\tvar buttonCommon = {\n\t\t\texportOptions: {\n\t\t\t\t// format: {\n\t\t\t\t// \tbody: function (data, row, column, node) {\n\t\t\t\t// \t\tif(data.length && data.match(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g)) {\n\t\t\t\t// \t\t\t// Strips hidden timestamp <span>\n\t\t\t\t// \t\t\treturn data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n\t\t\t\t// \t\t}\n\t\t\t\t// \t\treturn data.replace(/(<([^>]+)>)/gi, \"\").trim();\n\t\t\t\t// \t}\n\t\t\t\t// },\n\t\t\t\tcolumns: ':visible'\n\t\t\t}\n\t\t};\n\t\tlet userTableVars = {\n\n\t\t\tdata: this.data.ulgmGroupLeaderData.enrolled_user_data,\n\t\t\tsearchDelay: 400,\n\t\t\tcolumns: userColumns,\n\t\t\tdom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n\t\t\torder: [[1, 'asc']],\n\t\t\tpageLength: parseInt( this.$elements.enrolledUsersTableDT.data( 'page_length' ) ),\n\t\t\tlengthMenu: [\n\t\t\t\t[10, 25, 50, 100],\n\t\t\t\t[10, 25, 50, 100]\n\t\t\t],\n\t\t\tbuttons: [\n\t\t\t\t$.extend(true, {}, buttonCommon, {\n\t\t\t\t\textend: 'csv',\n\t\t\t\t\ttext: ulgmRestApiSetup.language.buttons.csvExport,\n\t\t\t\t\tfilename: function (){\n\t\t\t\t\t\tlet groupNamePrefix = 'group-management';\n\t\t\t\t\t\tlet groupId        = $( \"#ulgm_current_managed_group_id\" ).val();\n\t\t\t\t\t\tlet groupName       = $( \"#group-id option:selected\" ).text();\n\t\t\t\t\t\tif (typeof groupName === 'undefined' || '' === groupName) {\n\t\t\t\t\t\t\tgroupName = $( \"#group-name\" ).text();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn groupNamePrefix + '-' + groupId + '-' +  groupName;\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\t$.extend(true, {}, buttonCommon, {\n\t\t\t\t\textend: 'excelHtml5',\n\t\t\t\t\ttext: ulgmRestApiSetup.i18n.exportExcel,\n\t\t\t\t\tfilename: function (){\n\t\t\t\t\t\tlet groupNamePrefix = 'group-management';\n\t\t\t\t\t\tlet groupId        = $( \"#ulgm_current_managed_group_id\" ).val();\n\t\t\t\t\t\tlet groupName       = $( \"#group-id option:selected\" ).text();\n\t\t\t\t\t\tif (typeof groupName === 'undefined' || '' === groupName) {\n\t\t\t\t\t\t\tgroupName = $( \"#group-name\" ).text();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn groupNamePrefix + '-' + groupId + '-' +  groupName;\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t],\n\t\t\tlanguage: {\n\t\t\t\tprocessing: ulgmRestApiSetup.language.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: ulgmRestApiSetup.language.searchPlaceholder,\n\t\t\t\tlengthMenu: ulgmRestApiSetup.language.lengthMenu,\n\t\t\t\tinfo: ulgmRestApiSetup.language.info,\n\t\t\t\tinfoEmpty: ulgmRestApiSetup.language.infoEmpty,\n\t\t\t\tinfoFiltered: ulgmRestApiSetup.language.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: ulgmRestApiSetup.language.loadingRecords,\n\t\t\t\tzeroRecords: ulgmRestApiSetup.language.zeroRecords,\n\t\t\t\temptyTable: ulgmRestApiSetup.language.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: ulgmRestApiSetup.language.paginate.first,\n\t\t\t\t\tprevious: ulgmRestApiSetup.language.paginate.previous,\n\t\t\t\t\tnext: ulgmRestApiSetup.language.paginate.next,\n\t\t\t\t\tlast: ulgmRestApiSetup.language.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: ulgmRestApiSetup.language.sortAscending,\n\t\t\t\t\tsortDescending: ulgmRestApiSetup.language.sortDescending\n\t\t\t\t}\n\t\t\t},\n\t\t\tprocessing: false,\n\t\t\tserverSide: false,\n\n\t\t\tcreatedRow: function( row, data, dataIndex ){\n\t\t\t\t$( row )\n\t\t\t\t\t.addClass( `status_id-${ data.status_id }` )\n\t\t\t},\n\n\t\t\tinitComplete: () => {\n\t\t\t\t// Get the export CSV button\n\t\t\t\tconst $fakeExportCSV = document.getElementById( 'group-management-users-export-csv' );\n\n\t\t\t\t// Get the export Excel button\n\t\t\t\tconst $fakeExportExcel = document.getElementById( 'group-management-users-export-excel' );\n\n\t\t\t\t// Check if the element exists\n\t\t\t\tif ( document.body.contains( $fakeExportCSV ) ){\n\t\t\t\t\t// Add an event listener to listen clicks\n\t\t\t\t\t$fakeExportCSV.addEventListener( 'click', () => {\n\t\t\t\t\t\t// Click the real \"Export CSV\" button\n\t\t\t\t\t\tconst $realExportCSV = document.querySelector( '#group-management-enrolled-users-datatable_wrapper .buttons-csv' );\n\n\t\t\t\t\t\t// Check if the element exists\n\t\t\t\t\t\tif ( document.body.contains( $realExportCSV ) ){\n\t\t\t\t\t\t\t// Click it\n\t\t\t\t\t\t\tconst event = document.createEvent( 'HTMLEvents' );\n\t\t\t\t\t\t\tevent.initEvent( 'click', true, false );\n\t\t\t\t\t\t\t$realExportCSV.dispatchEvent( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Check if the element exists\n\t\t\t\tif ( document.body.contains( $fakeExportExcel ) ){\n\t\t\t\t\t// Add an event listener to listen clicks\n\t\t\t\t\t$fakeExportExcel.addEventListener( 'click', () => {\n\t\t\t\t\t\t// Click the real \"Export CSV\" button\n\t\t\t\t\t\tconst $realExportExcel = document.querySelector( '#group-management-enrolled-users-datatable_wrapper .buttons-excel' );\n\n\t\t\t\t\t\t// Check if the element exists\n\t\t\t\t\t\tif ( document.body.contains( $realExportExcel ) ){\n\t\t\t\t\t\t\t// Click it\n\t\t\t\t\t\t\tconst event = document.createEvent( 'HTMLEvents' );\n\t\t\t\t\t\t\tevent.initEvent( 'click', true, false );\n\t\t\t\t\t\t\t$realExportExcel.dispatchEvent( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet userTable = null;\n\n\t\t// User table\n\t\tuserTable = this.$elements.enrolledUsersTableDT.DataTable( userTableVars );\n\n\t\t$( document ).trigger( 'enrolledUsersTableDataTableCreated', {\n\t\t\tuserTableVars: userTableVars,\n\t\t\tuserTable: userTable,\n\t\t\tulgmGroupLeaderData: ulgmGroupLeaderData\n\t\t} );\n\n\t\tlet leaderColumns = this.data.ulgmGroupLeaderData.enrolled_leader_columns;\n\t\tif ('true' === this.data.ulgmGroupLeaderData.populate_management_features) {\n\t\t\tleaderColumns.unshift( {data: 'check', targets: 0, title: this.data.ulgmGroupLeaderData.check_all} );\n\t\t}\n\n\t\tlet leaderTableVars = {\n\t\t\tdata: this.data.ulgmGroupLeaderData.enrolled_leader_data,\n\t\t\tcolumns: leaderColumns,\n\t\t\tcolumnDefs: [{\n\t\t\t\ttargets: 0,\n\t\t\t\tsearchable: false,\n\t\t\t\torderable: false,\n\t\t\t}],\n\t\t\tdom: 'frt<\"uo-groups-datatable-footer\"lpi>',\n\t\t\torder: [[1, 'asc']],\n\t\t\tlanguage: {\n\t\t\t\tprocessing: ulgmRestApiSetup.language.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: ulgmRestApiSetup.language.searchPlaceholder,\n\t\t\t\tlengthMenu: ulgmRestApiSetup.language.lengthMenu,\n\t\t\t\tinfo: ulgmRestApiSetup.language.info,\n\t\t\t\tinfoEmpty: ulgmRestApiSetup.language.infoEmpty,\n\t\t\t\tinfoFiltered: ulgmRestApiSetup.language.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: ulgmRestApiSetup.language.loadingRecords,\n\t\t\t\tzeroRecords: ulgmRestApiSetup.language.zeroRecords,\n\t\t\t\temptyTable: ulgmRestApiSetup.language.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: ulgmRestApiSetup.language.paginate.first,\n\t\t\t\t\tprevious: ulgmRestApiSetup.language.paginate.previous,\n\t\t\t\t\tnext: ulgmRestApiSetup.language.paginate.next,\n\t\t\t\t\tlast: ulgmRestApiSetup.language.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: ulgmRestApiSetup.language.sortAscending,\n\t\t\t\t\tsortDescending: ulgmRestApiSetup.language.sortDescending\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet leaderTable;\n\n\t\t// Try to set the custom page length and length menu attributes\n\t\t// This will work only if the user didn't override the uo-groups template\n\t\t// before Groups 3.7.3\n\t\ttry {\n\t\t\t// Set custom page length\n\t\t\tleaderTableVars.pageLength = parseInt( this.$elements.enrolledLeaderTableDT.data( 'page_length' ) );\n\n\t\t\t// Set custom page length\n\t\t\tleaderTableVars.lengthMenu = this.$elements.enrolledLeaderTableDT.data( 'length_menu' );\n\n\t\t\t// Leader table\n\t\t\tleaderTable = this.$elements.enrolledLeaderTableDT.DataTable( leaderTableVars );\n\t\t} catch (e) {\n\t\t\tconsole.log( 'Beta: Could not set custom page length and custom menu length' );\n\t\t\tconsole.log( e );\n\n\t\t\t// Leader table\n\t\t\tleaderTable = this.$elements.enrolledLeaderTableDT.DataTable( leaderTableVars );\n\t\t}\n\n\t\t$( document ).trigger( 'enrolledLeaderTableDataTableCreated', {\n\t\t\tleaderTableVars: leaderTableVars,\n\t\t\tleaderTable: leaderTable,\n\t\t\tulgmGroupLeaderData: ulgmGroupLeaderData\n\t\t} );\n\t}\n\n\tlistenCheckboxToSelectAll(){\n\t\t// Listen changes to this checkbox\n\t\tthis.$elements.container.on( 'change', '.group-management-enrolled-select-all', ( event ) => {\n\n\t\t\t// Get checkbox status\n\t\t\tconst checkAllEl = $( event.currentTarget );\n\t\t\tconst isChecked  = checkAllEl.is( ':checked' );\n\n\t\t\t// Get all checkboxes\n\t\t\tconst $allCheckboxes = checkAllEl.closest( 'table' ).find( '.select-user' );\n\n\t\t\t// Check if it's checked\n\t\t\tif (isChecked) {\n\t\t\t\t// Select all users\n\t\t\t\t$allCheckboxes.prop( 'checked', true );\n\t\t\t} else {\n\t\t\t\t// Unselect all users\n\t\t\t\t$allCheckboxes.prop( 'checked', false );\n\t\t\t}\n\n\t\t\t// Get the current selected users\n\t\t\tthis.updateSelectedUsers();\n\n\t\t\t// Evalute the visibility of the \"Remove users\" button\n\t\t\tthis.evaluateRemoveUsersButtonVisiblity();\n\n\t\t\t// Evalute the visibility of the \"Remove leaders\" button\n\t\t\tthis.evaluateRemoveLeadersButtonVisiblity();\n\n\t\t\t// Evaluate the visibility of the \"Send emails\" button\n\t\t\tthis.evaluateSendEmailsButtonVisiblity();\n\t\t} );\n\t}\n\n\tlistenCheckboxesChanges(){\n\t\t// Add event listener to the checkboxes\n\t\tthis.$elements.container.on( 'change', 'input[type=\"checkbox\"].select-user', ( event ) => {\n\t\t\t// Get the current selected users\n\t\t\tthis.updateSelectedUsers();\n\n\t\t\t// Evalute the visibility of the \"Remove users\" button\n\t\t\tthis.evaluateRemoveUsersButtonVisiblity();\n\n\t\t\t// Evalute the visibility of the \"Remove leaders\" button\n\t\t\tthis.evaluateRemoveLeadersButtonVisiblity();\n\n\t\t\t// Evaluate the visibility of the \"Send emails\" button\n\t\t\tthis.evaluateSendEmailsButtonVisiblity();\n\t\t} );\n\t}\n\n\tupdateSelectedUsers(){\n\t\t// Create array to save selected users\n\t\tlet selectedUsers   = [];\n\t\tlet selectedLeaders = [];\n\n\t\t// Get all the checkboxes\n\t\tconst $allUserCheckboxes   = this.$elements.enrolledUsersTableDT.find( 'input[type=\"checkbox\"].select-user' );\n\t\tconst $allLeaderCheckboxes = this.$elements.enrolledLeaderTableDT.find( 'input[type=\"checkbox\"].select-user' );\n\n\t\t// Filter all checked and unchecked checkboxes\n\t\tconst allCheckedCheckboxes = {\n\t\t\tusers: $allUserCheckboxes.filter( ':checked' ),\n\t\t\tleaders: $allLeaderCheckboxes.filter( ':checked' ),\n\t\t};\n\n\t\t// Get the selected checkboxes\n\t\t$.each( allCheckedCheckboxes, ( type, $checkedCheckboxes ) => {\n\t\t\t$.each( $checkedCheckboxes, ( index, checkbox ) => {\n\t\t\t\t// Get the checkbox\n\t\t\t\tlet $checkbox = $( checkbox );\n\n\t\t\t\tlet $row = $checkbox.closest( 'tr' );\n\n\t\t\t\tif ('users' === type) {\n\t\t\t\t\tlet status = $row.find( '.status' ).data( 'status' );\n\n\t\t\t\t\tlet progressIsNotStarted;\n\t\t\t\t\tif ('not-started' === status) {\n\t\t\t\t\t\tprogressIsNotStarted = 1;\n\t\t\t\t\t} else if ('not-enrolled' === status) {\n\t\t\t\t\t\tprogressIsNotStarted = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprogressIsNotStarted = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add data to the selectedUsers array\n\t\t\t\t\tselectedUsers.push( {\n\t\t\t\t\t\tuserId: $checkbox.val(),\n\t\t\t\t\t\tprogressIsNotStarted: progressIsNotStarted,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\tif ('leaders' === type) {\n\t\t\t\t\t// Add data to the selectedUsers array\n\t\t\t\t\tselectedLeaders.push( {\n\t\t\t\t\t\tuserId: $checkbox.val()\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t\t// Update selected property\n\t\tthis.selectedUsers   = selectedUsers;\n\t\tthis.selectedLeaders = selectedLeaders;\n\t}\n\n\tevaluateRemoveUsersButtonVisiblity(){\n\t\t// Create the variable we're going to use to finally\n\t\t// decide if we have to show or not the button\n\t\tlet showRemoveUsersButton = false;\n\n\t\t// Check if there are selected rows\n\t\tif (this.selectedUsers.length > 0) {\n\t\t\t// Check if the option to remove users is enabled\n\t\t\tif (this.data.canRemoveUsers) {\n\t\t\t\t// Check if they can remove users anytime\n\t\t\t\tif (this.data.canRemoveUsersAnytime) {\n\t\t\t\t\t// Set variable to true to show the button later\n\t\t\t\t\tshowRemoveUsersButton = true;\n\t\t\t\t} else {\n\t\t\t\t\t// Check the progress status of the selected users\n\t\t\t\t\t// To do that, first set the main variable to true\n\t\t\t\t\t// We're going to iterate each selected row and if\n\t\t\t\t\t// at least of the checks fail we're going to set\n\t\t\t\t\t// it back to false\n\t\t\t\t\tshowRemoveUsersButton = true;\n\n\t\t\t\t\t// iterate each one\n\t\t\t\t\tthis.selectedUsers.forEach( ( user ) => {\n\t\t\t\t\t\t// Check if the progress is \"Not started\"\n\t\t\t\t\t\tshowRemoveUsersButton = showRemoveUsersButton && user.progressIsNotStarted;\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Now show or hide the button\n\t\tif (showRemoveUsersButton) {\n\t\t\t// Show the button\n\t\t\tthis.$elements.removeUsersButton.show();\n\t\t} else {\n\t\t\t// Hide the button\n\t\t\tthis.$elements.removeUsersButton.hide();\n\t\t}\n\t}\n\n\tevaluateRemoveLeadersButtonVisiblity(){\n\t\t// Create the variable we're going to use to finally\n\t\t// decide if we have to show or not the button\n\t\tlet showRemoveLeadersButton = false;\n\n\t\t// Check if there are selected rows\n\t\tif (this.selectedLeaders.length > 0) {\n\t\t\tshowRemoveLeadersButton = true;\n\t\t}\n\n\t\t// Now show or hide the button\n\t\tif (showRemoveLeadersButton) {\n\t\t\t// Show the button\n\t\t\tthis.$elements.removeLeadersButton.show();\n\t\t} else {\n\t\t\t// Hide the button\n\t\t\tthis.$elements.removeLeadersButton.hide();\n\t\t}\n\n\t\t// Add amount of users being removed to modal\n\t\t$( '.amount-group-leaders' ).text( this.selectedLeaders.length );\n\n\t\tlet groupLeaderIds = [];\n\t\t$.each( this.selectedLeaders, ( index, user ) => {\n\t\t\tgroupLeaderIds.push( user.userId );\n\t\t} );\n\n\t\t// Add all ids to button\n\t\t$( '#removing-group-leaders' ).val( groupLeaderIds.join( \",\" ) );\n\t}\n\n\tevaluateSendEmailsButtonVisiblity(){\n\t\t// For this one, just check if there are selected users\n\t\tif (this.selectedUsers.length > 0) {\n\t\t\t// Show the button\n\t\t\tthis.$elements.sendEmailsButton.show();\n\t\t} else {\n\t\t\t// Hide the button\n\t\t\tthis.$elements.sendEmailsButton.hide();\n\t\t}\n\t}\n\n\tupdateDataOnModal(){\n\t\t// Listen when the modal is being opened\n\t\tthis.$elements.container.on( 'modal-open', ( event, modalId, modal ) => {\n\n\t\t\t// Create an array with the list of users\n\t\t\tconst selectedUsers = this.selectedUsers.map( ( user ) => {\n\t\t\t\treturn user.userId;\n\t\t\t} );\n\n\t\t\t// Update number of users selected users\n\t\t\tthis.$elements.numberOfUsers.text( selectedUsers.length );\n\n\n\t\t\t// Check if the modal id the the ID of the \"Send emails\" modal\n\t\t\tif (modalId == '#group-management-enrolled-users-table-send-password-modal') {\n\t\t\t\t// Add the array as a string to a hidden field inside the Send password reset modal\n\t\t\t\tthis.$elements.sendEmailsField.val( JSON.stringify( selectedUsers ) );\n\t\t\t} else if (modalId == '#group-management-remove-user') {\n\n\t\t\t\t// Create a comma separated list with the IDs\n\t\t\t\tconst userIds = selectedUsers.join( ',' );\n\n\t\t\t\t// Add the list of IDs on a hidden field\n\t\t\t\tthis.$elements.removeUsersField.val( userIds );\n\t\t\t}\n\t\t} );\n\t}\n\n\thasEnrolledUsersTable(){\n\t\treturn $( '#group-management-enrolled-users-datatable' ).length == 1;\n\t}\n}\n\nexport default GroupManagement;\n","import $ from 'jquery';\n\nclass GroupCourseReport {\n\tconstructor(){\n\n\t\t// Check if it's the group course report page\n\t\tif (this.isCourseReport()) {\n\t\t\t// Create course report table\n\t\t\tnew CourseReportTable();\n\t\t}\n\t}\n\n\tisCourseReport(){\n\t\treturn $( '#group-course-report-datatable' ).length === 1;\n\t}\n}\n\nclass CourseReportTable {\n\tconstructor(){\n\n\t\tthis.table = null;\n\n\t\t// Get elements\n\t\tthis.getElements();\n\n\t\t// Create DataTable\n\t\tthis.createDataTables();\n\n\t\t// Populate table after the group course is selected\n\t\tthis.restPopulateTable();\n\n\n\t}\n\n\tgetElements(){\n\t\t// Get elements\n\t\tthis.$elements = {\n\t\t\tcourseReport: $( '#group-course-report-datatable' ),\n\t\t}\n\t}\n\n\tcreateDataTables(){\n\n\t\tlet that       = this;\n\t\tlet columnDefs = [];\n\n\t\tlet columnsVisibility = that.$elements.courseReport.data( 'table_columns' )\n\t\tcolumnsVisibility     = columnsVisibility.split( ',' );\n\n\t\tlet columns = [\n\t\t\t{\n\t\t\t\tdata: 'user_name',\n\t\t\t\ttargets: 0,\n\t\t\t\ttitle: ulgmRestApiSetup.localized.header.user_name,\n\t\t\t\tvisible: columnsVisibility.includes( \"user_name\" )\n\t\t\t},\n\t\t\t{\n\t\t\t\tdata: 'first_name',\n\t\t\t\ttargets: 1,\n\t\t\t\ttitle: ulgmRestApiSetup.localized.header.first_name,\n\t\t\t\tvisible: columnsVisibility.includes( \"first_name\" )\n\t\t\t},\n\t\t\t{\n\t\t\t\tdata: 'last_name',\n\t\t\t\ttargets: 2,\n\t\t\t\ttitle: ulgmRestApiSetup.localized.header.last_name,\n\t\t\t\tvisible: columnsVisibility.includes( \"last_name\" )\n\t\t\t},\n\t\t\t{\n\t\t\t\tdata: 'user_email',\n\t\t\t\ttargets: 3,\n\t\t\t\ttitle: ulgmRestApiSetup.localized.header.user_email,\n\t\t\t\tvisible: columnsVisibility.includes( \"user_email\" )\n\t\t\t},\n\t\t\t{\n\t\t\t\tdata: 'percent_completed',\n\t\t\t\ttargets: 4,\n\t\t\t\ttitle: ulgmRestApiSetup.localized.header.percent_completed,\n\t\t\t\tvisible: columnsVisibility.includes( \"percent_completed\" )\n\t\t\t},\n\t\t\t{\n\t\t\t\tdata: 'date_completed',\n\t\t\t\ttargets: 5,\n\t\t\t\ttitle: ulgmRestApiSetup.localized.header.date_completed,\n\t\t\t\tvisible: columnsVisibility.includes( \"date_completed\" )\n\t\t\t},\n\t\t\t{\n\t\t\t\tdata: 'date_enrolled',\n\t\t\t\ttargets: 6,\n\t\t\t\ttitle: ulgmRestApiSetup.localized.header.date_enrolled,\n\t\t\t\tvisible: columnsVisibility.includes( \"date_enrolled\" )\n\t\t\t},\n\t\t\t{\n\t\t\t\tdata: 'course_name',\n\t\t\t\ttargets: 7,\n\t\t\t\ttitle: ulgmRestApiSetup.localized.header.course_name,\n\t\t\t\tvisible: columnsVisibility.includes( \"course_name\" )\n\t\t\t},\n\t\t\t{\n\t\t\t\tdata: 'group_name',\n\t\t\t\ttargets: 8,\n\t\t\t\ttitle: ulgmRestApiSetup.localized.header.group_name,\n\t\t\t\tvisible: columnsVisibility.includes( \"group_name\" )\n\t\t\t},\n\t\t];\n\t\t// Changed 'user_id' to 'user-id'.\n//\t\tif (typeof this.getUrlParameter( 'user-id' ) !== 'undefined') {\n\n\t\tif (this.$elements.courseReport.data( 'transcript_page_url' )) {\n\t\t\tcolumns.push(\n\t\t\t\t{\n\t\t\t\t\tdata: 'transcript_page_url',\n\t\t\t\t\ttargets: 9,\n\t\t\t\t\ttitle: ulgmRestApiSetup.localized.header.transcript_page_url,\n\t\t\t\t\tvisible: columnsVisibility.includes( \"transcript_page_url\" )\n\t\t\t\t},\n\t\t\t);\n\t\t\tcolumnDefs = [\n\t\t\t\t{\n\t\t\t\t\t// The `data` parameter refers to the data for the cell (defined by the\n\t\t\t\t\t// `data` option, which defaults to the column being worked with, in\n\t\t\t\t\t// this case `data: 0`.\n\t\t\t\t\t\"render\": function ( data, type, row ){\n\n\t\t\t\t\t\tif (that.$elements.courseReport.data( 'transcript_page_url' )) {\n\t\t\t\t\t\t\treturn '<a href=\"' + that.$elements.courseReport.data( 'transcript_page_url' ) + '?user-id=' + row.user_id + '\" target=\"_blank\">' + ulgmRestApiSetup.localized.details + '</a>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn data;\n\n\n\t\t\t\t\t},\n\t\t\t\t\ttargets: 8\n\t\t\t\t}\n\t\t\t]\n\t\t}\n//\t\t}\n\n\t\tlet initComplete = ( settings, d ) => {\n\n\t\t\tlet table = settings.oInstance.api();\n\t\t\tlet _this = this;\n\n\t\t\tvar colFilter_container = $( `<div id=\"${settings.sInstance}-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${settings.sInstance}-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${settings.sInstance}-filter-columns-field\" data-label-enable=\"${ulgmRestApiSetup.localized.customizeColumns}\" data-label-disable=\"${ulgmRestApiSetup.localized.hideCustomizeColumns}\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n\n\t\t\tif (settings.oSavedState !== null) {\n\t\t\t\tjQuery.each( settings.oSavedState.columns, function ( key, value ){\n\t\t\t\t\tvar title = settings.aoColumns[key].sTitle;\n\t\t\t\t\tcolFilter_container.find( '.dataTables-filter-columns__fields' ).append( _this.addColumnCourseCheckbox( title, key, value.visible, table ) );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tjQuery.each( settings.aoColumns, function ( key, value ){\n\n\t\t\t\t\tvar title = settings.aoColumns[key].sTitle;\n\t\t\t\t\tcolFilter_container.find( '.dataTables-filter-columns__fields' ).append( _this.addColumnCourseCheckbox( title, key, value.bVisible, table ) );\n\n\t\t\t\t} );\n\t\t\t}\n\t\t\t$( colFilter_container ).insertAfter( '#group-course-report-datatable_filter' );\n\t\t};\n\n\t\tvar buttonCommon = {\n\t\t\texportOptions: {\n\t\t\t\tformat: {\n\t\t\t\t\tbody: function (data, row, column, node) {\n\t\t\t\t\t\t// Strips hidden timestamp <span>\n\t\t\t\t\t\treturn data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tfilename: function () {\n\t\t\t\tlet courseNamePrefix = 'Groups-Course-Report';\n\t\t\t\tlet $courseId = $('#uo-group-report-course').val();\n\t\t\t\tlet courseName = '-' + $(\"#uo-group-report-course option:selected\").text();\n\t\t\t\tlet name = '';\n\t\t\t\tif (typeof that.getUrlParameter('user_id') !== 'undefined') {\n\n\t\t\t\t\tname = that.$elements.courseReport.data('user_name');\n\n\t\t\t\t\tif (isNaN(name)) {\n\t\t\t\t\t\tname = '-for-user-' + name;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tname = '-for-user-id-' + name;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn courseNamePrefix + name;\n\n\t\t\t\t} else if ('0' === $courseId) {\n\t\t\t\t\treturn courseNamePrefix;\n\t\t\t\t}\n\n\t\t\t\treturn courseNamePrefix + courseName;\n\t\t\t}\n\t\t};\n\t\t// User table\n\t\tthis.table = this.$elements.courseReport.DataTable({\n\t\t\tstateSave: true,\n\t\t\tinitComplete: initComplete,\n\t\t\tdom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n\t\t\tbuttons: [\n\t\t\t\t$.extend(true, {}, buttonCommon, {\n\t\t\t\t\textend: 'csv',\n\t\t\t\t\ttext: ulgmRestApiSetup.i18n.exportCSV,\n\t\t\t\t}),\n\t\t\t\t$.extend(true, {}, buttonCommon, {\n\t\t\t\t\textend: 'excelHtml5',\n\t\t\t\t\ttext: ulgmRestApiSetup.i18n.exportExcel,\n\t\t\t\t}),\n\t\t\t],\n\t\t\tcolumns: columns,\n\t\t\t\"columnDefs\": columnDefs,\n\t\t\tlanguage: {\n\t\t\t\tprocessing: ulgmRestApiSetup.localized.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: ulgmRestApiSetup.localized.searchPlaceholder,\n\t\t\t\tlengthMenu: ulgmRestApiSetup.localized.lengthMenu,\n\t\t\t\tinfo: ulgmRestApiSetup.localized.info,\n\t\t\t\tinfoEmpty: ulgmRestApiSetup.localized.infoEmpty,\n\t\t\t\tinfoFiltered: ulgmRestApiSetup.localized.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: ulgmRestApiSetup.localized.loadingRecords,\n\t\t\t\tzeroRecords: ulgmRestApiSetup.localized.zeroRecords,\n\t\t\t\temptyTable: ulgmRestApiSetup.localized.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: ulgmRestApiSetup.localized.paginate.first,\n\t\t\t\t\tprevious: ulgmRestApiSetup.localized.paginate.previous,\n\t\t\t\t\tnext: ulgmRestApiSetup.localized.paginate.next,\n\t\t\t\t\tlast: ulgmRestApiSetup.localized.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: ulgmRestApiSetup.localized.sortAscending,\n\t\t\t\t\tsortDescending: ulgmRestApiSetup.localized.sortDescending\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\taddColumnCourseCheckbox( label, column_key, is_visible, table ){\n\n\t\tvar checkbox = jQuery( '<input />', {\n\t\t\ttype: 'checkbox',\n\t\t\tid: 'dt_' + column_key,\n\t\t\tvalue: column_key,\n\t\t\tchecked: is_visible\n\t\t} );\n\n\t\tcheckbox.on( 'change', function ( e ){\n\t\t\t// Get the column API object\n\t\t\tvar current_check = jQuery( this ).attr( 'value' );\n\t\t\tvar is_checked    = jQuery( this ).is( ':checked' );\n\n\t\t\ttable.columns().every( function ( index ){\n\n\t\t\t\tvar column = table.column( index );\n\n\t\t\t\t// ... do something with data(), or this.nodes(), etc\n\n\t\t\t\tif (index == current_check) {\n\t\t\t\t\tif (is_checked) {\n\t\t\t\t\t\t// Toggle the visibility\n\t\t\t\t\t\tcolumn.visible( true );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolumn.visible( false );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t} );\n\n\t\t} );\n\n\t\tvar $label = jQuery( '<label/>' ).append( checkbox ).append( label );\n\t\treturn $label;\n\t}\n\n\trestPopulateTable(){\n\n\t\tlet that                                       = this;\n\t\twindow.ulgmGroupManagement.populateReportTable = function ( data ){\n\n\t\t\tlet courseReport = that.$elements.courseReport.DataTable();\n\n\t\t\tcourseReport.clear();\n\t\t\tcourseReport.rows.add( data.user_course_data ); // Add new data\n\t\t\tcourseReport.columns.adjust().draw(); // Redraw the DataTable\n\n\t\t\tvar items = window.ulgmGroupManagement.reportingTemplating.items = data.user_course_data;\n\n\t\t\tif (0 === items.length) {\n\t\t\t\t$( '#test' ).html( '<div class=\"uo-row uo-table-content uo-tbl-item body-row\"><div class=\"uo-table-no-results\">There are no records to display.</div></div>' );\n\t\t\t} else {\n\t\t\t\t$( '#test' ).closest( '.uo-groups-rest-result' ).show();\n\t\t\t\twindow.ulgmGroupManagement.reportingTemplating.setItems( items );\n\t\t\t}\n\t\t};\n\t}\n\n\tgetUrlParameter( sParam ){\n\t\tlet sPageURL      = window.location.search.substring( 1 ),\n\t\t\tsURLVariables = sPageURL.split( '&' ),\n\t\t\tsParameterName,\n\t\t\ti;\n\n\t\tfor (i = 0; i < sURLVariables.length; i++) {\n\t\t\tsParameterName = sURLVariables[i].split( '=' );\n\n\t\t\tif (sParameterName[0] === sParam) {\n\t\t\t\treturn sParameterName[1] === undefined ? true : decodeURIComponent( sParameterName[1] );\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport default GroupCourseReport;\n","const ElementQueries = require( 'css-element-queries/src/ElementQueries' );\n\nimport $ from 'jquery';\n\nimport {\n\tisDefined,\n\tisEmpty\n} from './utilities.js';\n\nclass CourseDashboard {\n\tconstructor(){\n\t\t// Check if the required container is defined\n\t\tif ( this.hasDashboard() ){\n\t\t\t// Init ResizeSensor\n\t\t\tElementQueries.init();\n\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Define global settings\n\t\t\tthis.defineSettings();\n\t\t\t\n\t\t\t// Create courses using the DOM elements\n\t\t\tthis.createCourses();\n\n\t\t\t// Add function to expand and collapse all containers\n\t\t\t// this.slideAll();\n\n\t\t\t// Listen filters\n\t\t\tthis.filters();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\tthis.$elements = {\n\t\t\tfilters: {\n\t\t\t\tform:    $( '#ulg-manage-progress-filters-form' ),\n\t\t\t\tselects: $( '#ulg-manage-progress-filters-form select' )\n\t\t\t}\n\t\t}\n\t}\n\n\tdefineSettings(){\n\t\t// Create settings\n\t\tthis.settings = {\n\t\t\tslideToggleDuration: 300\n\t\t}\n\t}\n\n\tcreateCourses(){\n\t\t// Get all courses\n\t\tconst $courses = $( '.ulg-manage-progress-course' );\n\n\t\t// Create Courses\n\t\t$.each( $courses, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Course( $( $element ), this.settings );\n\t\t});\n\t}\n\n\thasDashboard(){\n\t\treturn $( '.ulg-manage-progress-courses' ).length > 0;\n\t}\n\n\tslideAll(){\n\t\t// Listen to the clicks on the buttons\n\t\t$( '.ulg-manage-progress .ulg-manage-progress-btn--expand-all' ).on( 'click', () => {\n\t\t\texpandAll();\n\t\t});\n\n\t\t$( '.ulg-manage-progress .ulg-manage-progress-btn--collapse-all' ).on( 'click', () => {\n\t\t\tcollapseAll();\n\t\t});\n\n\t\tconst expandAll = () => {\n\t\t\t// Get all the collapsed containers\n\t\t\tconst collapsedContainers = {\n\t\t\t\tcourses: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-course--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-course__toggle-btn'\n\t\t\t\t},\n\t\t\t\tlessons: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-lesson--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-lesson__toggle-btn'\n\t\t\t\t},\n\t\t\t\ttopic: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-topic--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-topic__toggle-btn'\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$.each( collapsedContainers, ( index, elementType ) => {\n\t\t\t\t// Get containers\n\t\t\t\tconst $containers = $( elementType.container );\n\n\t\t\t\t// Iterate each container\n\t\t\t\t$.each( $containers, ( index, container ) => {\n\t\t\t\t\t// Get container element\n\t\t\t\t\tconst $container = $( container );\n\n\t\t\t\t\t// Get toggle button\n\t\t\t\t\tconst $toggleButton = $container.find( elementType.toggle );\n\n\t\t\t\t\t// Trigger click\n\t\t\t\t\t$toggleButton.trigger( 'click' );\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tconst collapseAll = () => {\n\t\t\t// Get all the expanded containers\n\t\t\tconst expandedContainers = {\n\t\t\t\tcourses: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-course--expanded',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-course__toggle-btn'\n\t\t\t\t},\n\t\t\t\tlessons: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-lesson--expanded',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-lesson__toggle-btn'\n\t\t\t\t},\n\t\t\t\ttopic: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-topic--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-topic__toggle-btn'\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$.each( expandedContainers, ( index, elementType ) => {\n\t\t\t\t// Get containers\n\t\t\t\tconst $containers = $( elementType.container );\n\n\t\t\t\t// Iterate each container\n\t\t\t\t$.each( $containers, ( index, container ) => {\n\t\t\t\t\t// Get container element\n\t\t\t\t\tconst $container = $( container );\n\n\t\t\t\t\t// Get toggle button\n\t\t\t\t\tconst $toggleButton = $container.find( elementType.toggle );\n\n\t\t\t\t\t// Trigger click\n\t\t\t\t\t$toggleButton.trigger( 'click' );\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tfilters(){\n\t\t// Listen to changes\n\t\tthis.$elements.filters.selects.on( 'change', () => {\n\t\t\t// Submit form\n\t\t\tthis.$elements.filters.form.trigger( 'submit' );\n\t\t});\n\t}\n}\n\nclass Course {\n\tconstructor( $container, settings ){\n\t\t// Save settings in the object's instance\n\t\tthis.dashboardSettings = settings;\n\n\t\t// Define the important CSS classes\n\t\tthis.defineCssClasses();\n\n\t\t// Get important elements from the container\n\t\tthis.getElements( $container );\n\n\t\t// Get course data\n\t\tthis.getCourseData();\n\n\t\t// Add toggle functionality\n\t\tthis.toggleCourseContent();\n\n\t\t// Create lessons using the DOM elements\n\t\tthis.createLessons();\n\n\t\t// Create quizzes using the DOM elements\n\t\t// this.createQuizzes();\n\t}\n\n\tgetCourseData(){\n\t\tthis.courseData = {\n\t\t\tcourseId:       this.$elements.container.data( 'course-id' ),\n\t\t\tstatus:         this.$elements.container.data( 'status' ),\n\t\t\thasLessons:     !! parseInt( this.$elements.container.data( 'has-lessons' ) ),\n\t\t\thasQuizzes:     !! parseInt( this.$elements.container.data( 'has-quizzes' ) ),\n\t\t\thasCertificate: !! parseInt( this.$elements.container.data( 'has-certificate' ) ),\n\t\t}\n\t}\n\n\tdefineCssClasses(){\n\t\tthis.cssClasses = {\n\t\t\ttoggle: {\n\t\t\t\tcollapsed:  'ulg-manage-progress-course--collapsed',\n\t\t\t\tcollapsing: 'ulg-manage-progress-course--collapsing',\n\t\t\t\texpanding:  'ulg-manage-progress-course--expanding',\n\t\t\t\texpanded:   'ulg-manage-progress-course--expanded',\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElements( $container ){\n\t\tthis.$elements = {\n\t\t\tcontainer: $container,\n\t\t\ttoggleBtn: $container.find( '.ulg-manage-progress-course__toggle-btn' ),\n\t\t\tcontent:   $container.find( '.ulg-manage-progress-course__content' )\n\t\t}\n\t}\n\n\ttoggleCourseContent(){\n\t\t// Check if the course has lessons or quizzes\n\t\tif ( this.courseData.hasLessons || this.courseData.hasQuizzes ){\n\t\t\t// Listen to clicks on the toggle button\n\t\t\tthis.$elements.toggleBtn.on( 'click', () => {\n\t\t\t\t// Check if we have to close it or open it\n\t\t\t\tif ( this.isCollapsed() ){\n\t\t\t\t\t// As it's collapsed, we have to expand it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'expanding' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.hide().slideDown( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'expanded' );\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// As it's expanded, we have to collapse it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'collapsing' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.show().slideUp( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'collapsed' );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateLessons(){\n\t\t// Get all lessons\n\t\tconst $lessons = this.$elements.container.find( '.ulg-manage-progress-lesson' );\n\n\t\t// Create Courses\n\t\t$.each( $lessons, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Lesson( $( $element ), this.dashboardSettings, this.courseData );\n\t\t});\n\t}\n\n\tcreateQuizzes(){\n\t\t// Get all quizzes containers\n\t\tconst $quizzesContainers = this.$elements.container.find( '.ulg-manage-progress-course__quizzes .ulg-manage-progress-quizzes' );\n\n\t\t// Create Quizzes\n\t\t$.each( $quizzesContainers, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Quizzes( $( $element ), this.dashboardSettings, this.courseData );\n\t\t});\n\t}\n\n\tsetToggleClass( status ){\n\t\t// First remove all the classes\n\t\tthis.$elements.container.removeClass( Object.values( this.cssClasses.toggle ).join( ' ' ) );\n\n\t\t// Then add the correct class\n\t\tthis.$elements.container.addClass( this.cssClasses.toggle[ status ] );\n\t}\n\n\tisCollapsed(){\n\t\t// Check if the container has the collapsed class\n\t\treturn this.$elements.container.hasClass( this.cssClasses.toggle.collapsed );\n\t}\n}\n\nclass Lesson {\n\tconstructor( $container, settings, courseData ){\n\t\t// Save settings in the object's instance\n\t\tthis.dashboardSettings = settings;\n\t\t// Save courseData\n\t\tthis.courseData = courseData;\n\n\t\t// Define the important CSS classes\n\t\tthis.defineCssClasses();\n\n\t\t// Get important elements from the container\n\t\tthis.getElements( $container );\n\n\t\t// Get lesson data\n\t\tthis.getLessonData();\n\n\t\t// Add toggle functionality\n\t\tthis.toggleLessonContent();\n\n\t\t// Create topics using the DOM elements\n\t\tthis.createTopics();\n\n\t\t// Create quizzes using the DOM elements\n\t\t// this.createQuizzes();\n\t}\n\n\tgetLessonData(){\n\t\tthis.lessonData = {\n\t\t\tcourse:         this.courseData,\n\t\t\tlessonId:       this.$elements.container.data( 'lesson-id' ),\n\t\t\tavailableOn:    ! isEmpty( this.$elements.container.data( 'available-on' ) ) ? parseInt( this.$elements.container.data( 'available-on' ) ) : null,\n\t\t\tisCompleted:    !! parseInt( this.$elements.container.data( 'is-completed' ) ),\n\t\t\tisAvailable:    !! parseInt( this.$elements.container.data( 'is-available' ) ),\n\t\t\thasTopics:      !! parseInt( this.$elements.container.data( 'has-topics' ) ),\n\t\t\thasQuizzes:     !! parseInt( this.$elements.container.data( 'has-quizzes' ) ),\n\t\t}\n\t}\n\n\tdefineCssClasses(){\n\t\tthis.cssClasses = {\n\t\t\ttoggle: {\n\t\t\t\tcollapsed:  'ulg-manage-progress-lesson--collapsed',\n\t\t\t\tcollapsing: 'ulg-manage-progress-lesson--collapsing',\n\t\t\t\texpanding:  'ulg-manage-progress-lesson--expanding',\n\t\t\t\texpanded:   'ulg-manage-progress-lesson--expanded',\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElements( $container ){\n\t\tthis.$elements = {\n\t\t\tcontainer: $container,\n\t\t\ttoggleBtn: $container.find( '.ulg-manage-progress-lesson__toggle-btn' ),\n\t\t\tcontent:   $container.find( '.ulg-manage-progress-lesson__content' )\n\t\t}\n\t}\n\n\ttoggleLessonContent(){\n\t\t// Check if the lesson has topics or quizzes\n\t\tif ( this.lessonData.hasTopics || this.lessonData.hasQuizzes ){\n\t\t\t// Listen to clicks on the toggle button\n\t\t\tthis.$elements.toggleBtn.on( 'click', () => {\n\t\t\t\t// Check if we have to close it or open it\n\t\t\t\tif ( this.isCollapsed() ){\n\t\t\t\t\t// As it's collapsed, we have to expand it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'expanding' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.hide().slideDown( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'expanded' );\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// As it's expanded, we have to collapse it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'collapsing' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.show().slideUp( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'collapsed' );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateTopics(){\n\t\t// Get all topics\n\t\tconst $topics = this.$elements.container.find( '.ulg-manage-progress-topic' );\n\n\t\t// Create Courses\n\t\t$.each( $topics, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Topic( $( $element ), this.dashboardSettings, this.courseData, this.lessonData );\n\t\t});\n\t}\n\n\tcreateQuizzes(){\n\t\t// Get all quizzes containers\n\t\tconst $quizzesContainers = this.$elements.container.find( '.ulg-manage-progress-lesson__quizzes .ulg-manage-progress-quizzes' );\n\n\t\t// Create Quizzes\n\t\t$.each( $quizzesContainers, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Quizzes( $( $element ), this.dashboardSettings, this.courseData, this.lessonData );\n\t\t});\n\t}\n\n\tsetToggleClass( status ){\n\t\t// First remove all the classes\n\t\tthis.$elements.container.removeClass( Object.values( this.cssClasses.toggle ).join( ' ' ) );\n\n\t\t// Then add the correct class\n\t\tthis.$elements.container.addClass( this.cssClasses.toggle[ status ] );\n\t}\n\n\tisCollapsed(){\n\t\t// Check if the container has the collapsed class\n\t\treturn this.$elements.container.hasClass( this.cssClasses.toggle.collapsed );\n\t}\n}\n\nclass Topic {\n\tconstructor( $container, settings, courseData, lessonData ){\n\t\t// Save settings in the object's instance\n\t\tthis.dashboardSettings = settings;\n\t\t// Save course data\n\t\tthis.courseData = courseData;\n\t\t// Save lesson data\n\t\tthis.lessonData = lessonData;\n\n\t\t// Get elements\n\t\tthis.getElements( $container );\n\n\t\t// Define the important CSS classes\n\t\tthis.defineCssClasses();\n\n\t\t// Get lesson data\n\t\tthis.getTopicData();\n\n\t\t// Add toggle functionality\n\t\tthis.toggleTopicContent();\n\t}\n\n\tgetElements( $container ){\n\t\tthis.$elements = {\n\t\t\tcontainer: $container,\n\t\t\ttoggleBtn: $container.find( '.ulg-manage-progress-topic__toggle-btn' ),\n\t\t\tcontent:   $container.find( '.ulg-manage-progress-topic__content' )\n\t\t}\n\t}\n\n\tgetTopicData(){\n\t\tthis.topicData = {\n\t\t\tcourse:         this.courseData,\n\t\t\tlesson:         this.lessonData,\n\t\t\ttopicId:        this.$elements.container.data( 'topic-id' ),\n\t\t\tisCompleted:    !! parseInt( this.$elements.container.data( 'is-completed' ) ),\n\t\t\thasQuizzes:     !! parseInt( this.$elements.container.data( 'has-quizzes' ) )\n\t\t}\n\n\t\tdelete this.topicData.lesson.course;\n\t}\n\n\tdefineCssClasses(){\n\t\tthis.cssClasses = {\n\t\t\ttoggle: {\n\t\t\t\tcollapsed:  'ulg-manage-progress-topic--collapsed',\n\t\t\t\tcollapsing: 'ulg-manage-progress-topic--collapsing',\n\t\t\t\texpanding:  'ulg-manage-progress-topic--expanding',\n\t\t\t\texpanded:   'ulg-manage-progress-topic--expanded',\n\t\t\t}\n\t\t}\n\t}\n\n\tsetToggleClass( status ){\n\t\t// First remove all the classes\n\t\tthis.$elements.container.removeClass( Object.values( this.cssClasses.toggle ).join( ' ' ) );\n\n\t\t// Then add the correct class\n\t\tthis.$elements.container.addClass( this.cssClasses.toggle[ status ] );\n\t}\n\n\ttoggleTopicContent(){\n\t\t// Check if the lesson has topics or quizzes\n\t\tif ( this.topicData.hasQuizzes ){\n\t\t\t// Listen to clicks on the toggle button\n\t\t\tthis.$elements.toggleBtn.on( 'click', () => {\n\t\t\t\t// Check if we have to close it or open it\n\t\t\t\tif ( this.isCollapsed() ){\n\t\t\t\t\t// As it's collapsed, we have to expand it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'expanding' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.hide().slideDown( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'expanded' );\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// As it's expanded, we have to collapse it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'collapsing' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.show().slideUp( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'collapsed' );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tisCollapsed(){\n\t\t// Check if the container has the collapsed class\n\t\treturn this.$elements.container.hasClass( this.cssClasses.toggle.collapsed );\n\t}\n}\n\nexport default CourseDashboard;","let $ = jQuery;\n\nimport {\n\trestCall,\n\tisEmpty,\n\tisDefined\n} from './utilities.js';\n\nclass ManageProgress {\n\tconstructor(){\n\t\t// Check if there is a \"manage progress\" container\n\t\tif ( this.isManageProgress() ){\n\t\t\t// Check if the user can manage this progress\n\t\t\tif ( this.canManageProgress() ){\n\t\t\t\t// Set settings\n\t\t\t\tthis.setSettings();\n\n\t\t\t\t// Call to the functions that will add event listeners to the checkboxes\n\t\t\t\tthis.listenProgressChangesOnCourses();\n\t\t\t}\n\t\t}\n\t}\n\n\tsetSettings(){\n\t\tthis.settings = {}\n\t}\n\n\tlistenProgressChangesOnCourses(){\n\t\t// Get all courses\n\t\tconst $courses = $( '.ulg-manage-progress-course' );\n\n\t\t// Create Courses\n\t\t$.each( $courses, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Course( $( $element ), this.settings );\n\t\t} );\n\t}\n\n\tisManageProgress(){\n\t\treturn $( '.ulg-manage-progress--manage-progress' ).length > 0 && typeof ULGM_ManageProgress !== 'undefined';\n\t}\n\n\tcanManageProgress(){\n\t\treturn !! parseInt( ULGM_ManageProgress.canManageProgress );\n\t}\n}\n\nclass Course {\n\tconstructor( $course ){\n\n\t\t// Get elements\n\t\tthis.getElements( $course );\n\n\t\t// Get course data\n\t\tthis.getCourseData();\n\n\t\t// Create children\n\t\tthis.createChildren();\n\n\t\t// Listen clicks on the checkboxes\n\t\tthis.listenCheckboxChanges();\n\n\t\t// Set the default value for the confirmationVisible property\n\t\tthis.confirmationVisible = false;\n\t}\n\n\tgetElements( $course ){\n\t\tthis.$elements = {\n\t\t\tcourse: $course,\n\t\t\tactions: $course.find( '.ulg-manage-progress-course__progress-actions' ),\n\t\t\tcheckbox: $course.find( '.ulg-manage-progress-course__progress-action-checkbox' ),\n\t\t\tcancel: $course.find( '.ulg-manage-progress-course__progress-action-cancel' ),\n\t\t\tprogress: {\n\t\t\t\tnumber: $course.find( '.ulg-manage-progress-course__progress-percentage span' ),\n\t\t\t\tbar: $course.find( '.ulg-manage-progress-course__progress-bar' )\n\t\t\t},\n\t\t\tlessons: $course.find( '.ulg-manage-progress-lesson' ),\n\t\t\tquizzes: $course.find( '.ulg-manage-progress-quiz' ),\n\t\t\ttopics: $course.find( '.ulg-manage-progress-topic' ),\n\t\t\trightContainer: $course.find( '.ulg-manage-progress-course__right' )\n\t\t}\n\t}\n\n\tgetCourseData(){\n\t\tthis.courseData = {\n\t\t\tcourseId: this.$elements.course.data( 'course-id' ),\n\t\t\tstatus: this.$elements.course.data( 'status' ),\n\t\t\thasLessons: !!parseInt( this.$elements.course.data( 'has-lessons' ) ),\n\t\t\thasQuizzes: !!parseInt( this.$elements.course.data( 'has-quizzes' ) ),\n\t\t\thasCertificate: !!parseInt( this.$elements.course.data( 'has-certificate' ) ),\n\t\t}\n\n\t\t// Parse status\n\t\tthis.courseData.status = this.courseData.status.replace( '_', '-' );\n\t}\n\n\tcreateChildren(){\n\t\t// Create empty arrays\n\t\tthis.courseData.children = {\n\t\t\tlessons: [],\n\t\t\tquizzes: [],\n\t\t\ttopics: []\n\t\t}\n\n\t\t// Create lessons\n\t\t$.each( this.$elements.lessons, ( index, lesson ) => {\n\t\t\t// Get jQuery element\n\t\t\tconst $lesson = $( lesson );\n\n\t\t\t// Create lesson instances\n\t\t\tthis.courseData.children.lessons.push( new Lesson( this, $lesson ) );\n\t\t} );\n\n\t\t// Create quizzes\n\t\t$.each( this.$elements.quizzes, ( index, quiz ) => {\n\t\t\t// Get jQuery element\n\t\t\tconst $quiz = $( quiz );\n\n\t\t\t// Create lesson instances\n\t\t\tthis.courseData.children.quizzes.push( new Quiz( this, $quiz ) );\n\t\t} );\n\n\t\t// Create topics\n\t\t$.each( this.$elements.topics, ( index, topic ) => {\n\t\t\t// Get jQuery element\n\t\t\tconst $topic = $( topic );\n\n\t\t\t// Create lesson instances\n\t\t\tthis.courseData.children.topics.push( new Topic( this, $topic ) );\n\t\t} );\n\n\t\t// Create object with all the children\n\t\tthis.courseData.children.all = [].concat( this.courseData.children.lessons, this.courseData.children.topics, this.courseData.children.quizzes )\n\t}\n\n\tsetProgress( percentage ){\n\t\t// Set new progress\n\t\tthis.$elements.progress.number.text( percentage );\n\t\tthis.$elements.progress.bar.css( {width: percentage} );\n\n\t\t// Set correct status class. First, remove all of them\n\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--not-started ulg-manage-progress-course--in-progress ulg-manage-progress-course--completed' );\n\n\t\t// Change status of the course\n\t\tif (percentage == 100) {\n\t\t\t// Update status\n\t\t\tthis.courseData.status = 'completed';\n\n\t\t\t// Set status class\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--completed' );\n\t\t} else if (percentage == 0) {\n\t\t\t// Update status\n\t\t\tthis.courseData.status = 'not-started';\n\n\t\t\t// Set status class\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--not-started' );\n\t\t} else {\n\t\t\t// Update status\n\t\t\tthis.courseData.status = 'in-progress';\n\n\t\t\t// Set status class\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--in-progress' );\n\t\t}\n\t}\n\n\tsetCertificate( certificateUrl ){\n\t\t// Find the container we have to remove\n\t\tthis.$elements.rightContainer.find( '.ulg-manage-progress-course__action' ).remove();\n\n\t\t// Check if we have to add the certificate button again\n\t\tif (!isEmpty( certificateUrl )) {\n\t\t\t// Create the \"Certificate\" button\n\t\t\tconst $certificateButton = $( `\n\t\t\t\t<div class=\"ulg-manage-progress-course__action\">\n\t\t\t\t\t<a href=\"${certificateUrl}\" target=\"_blank\" class=\"ulg-manage-progress-btn\">\n\t\t\t\t\t\t${ULGM_ManageProgress.i18n.certificate}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t` );\n\n\t\t\t// Add button to the container\n\t\t\tthis.$elements.rightContainer.prepend( $certificateButton );\n\t\t}\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\t\t\t// Check if we should do the change or if\n\t\t\t// we should show the confirmation buttons\n\t\t\tif (this.confirmationVisible) {\n\t\t\t\t// Do request call\n\t\t\t\tlet wantsToCompleteCourse = 0;\n\n\t\t\t\t// Temporal fix\n\t\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\t\t\t\t// Check the current status\n\t\t\t\tif (['not-started', 'in-progress'].includes( this.courseData.status )) {\n\t\t\t\t\twantsToCompleteCourse = 1;\n\t\t\t\t}\n\n\t\t\t\t// Add loading class to the actions container\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--loading' );\n\t\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-course__progress-actions--need-to-confirm' );\n\n\t\t\t\tlet lessons = {};\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.courseData.children.lessons.forEach( ( lesson ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\tlessons[lesson.lessonData.lessonId] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\tlet topics  = {};\n\t\t\t\tlet quizzes = {};\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\tquizzes[quiz.quizData.quizId] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t\t}\n\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = wantsToCompleteCourse;\n\n\t\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteCourse;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\t// Do REST call\n\t\t\t\trestCall( {\n\t\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\t\trest_course_id: this.courseData.courseId,\n\t\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\t\trest_topics: topics,\n\t\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\t},\n\t\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--loading' );\n\n\t\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t\t// Temporal fix\n\t\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t\t},\n\t\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t\t// Check response\n\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t\t// Add certificate\n\t\t\t\t\t\t\tthis.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\t\tthis.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t\t// Debug\n\t\t\t\t\t\tconsole.error( response );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\t// Show confirmation\n\t\t\t\tthis.confirmChanges();\n\t\t\t}\n\t\t} );\n\t}\n\n\tconfirmChanges(){\n\t\t// Add class so the user knows that it has to confirm the change\n\t\tthis.$elements.actions.addClass( 'ulg-manage-progress-course__progress-actions--need-to-confirm' );\n\n\t\t// Change confirmation value\n\t\tthis.confirmationVisible = true;\n\n\t\t// Bind cancel button\n\t\tthis.$elements.cancel.on( 'click', () => {\n\t\t\t// Remove the class that shows both buttons without doing any other modification\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-course__progress-actions--need-to-confirm' );\n\n\t\t\t// Remove listener\n\t\t\tthis.$elements.cancel.off( 'click' );\n\n\t\t\t// Change confirmation value\n\t\t\tthis.confirmationVisible = false;\n\t\t} );\n\t}\n\n\tcompleteCourseItems( completedChildren ){\n\t\t// Change the array to an object where the keys\n\t\t// are the IDs\n\t\tlet completedChildrenObj = {}\n\n\t\t// Check if the completedChildren is empty\n\t\tcompletedChildren = Object.keys( completedChildren ).length == 0 ? [] : completedChildren;\n\n\t\t// Iterate all children\n\t\tcompletedChildren.forEach( ( element ) => {\n\t\t\t// Add children to the object\n\t\t\tcompletedChildrenObj[element.ID] = element;\n\t\t} );\n\n\t\t// Iterate each children\n\t\t$.each( this.courseData.children.all, function ( index, child ){\n\t\t\t// Check if the current children is included in the list of\n\t\t\t// completed children\n\t\t\tlet shouldBeCompleted = isDefined( completedChildrenObj[child.getTheId()] );\n\n\t\t\t// Mark all the children as not completed\n\t\t\tchild.markAsNotComplete( completedChildrenObj[child.getTheId()] );\n\n\t\t\t// And then check if we have to completed it\n\t\t\tif (shouldBeCompleted) {\n\t\t\t\t// Complete\n\t\t\t\tchild.markAsComplete( completedChildrenObj[child.getTheId()] );\n\t\t\t}\n\t\t} );\n\t}\n}\n\nclass Lesson {\n\tconstructor( Course, $lesson ){\n\t\t// Save parent instance\n\t\tthis.Course = Course;\n\n\t\t// Get elements\n\t\tthis.getElements( $lesson );\n\n\t\t// Get lesson data\n\t\tthis.getLessonData();\n\n\t\t// Listen to checkbox clicks\n\t\tthis.listenCheckboxChanges();\n\n\t\t// Set the default value for the confirmationVisible property\n\t\tthis.confirmationVisible = false;\n\t}\n\n\tgetElements( $lesson ){\n\t\tthis.$elements = {\n\t\t\tcourse: $lesson.closest( '.ulg-manage-progress-course' ),\n\t\t\tlesson: $lesson,\n\t\t\tactions: $lesson.find( '.ulg-manage-progress-lesson__progress-actions' ),\n\t\t\tcheckbox: $lesson.find( '.ulg-manage-progress-lesson__progress-action-checkbox' ),\n\t\t\tcancel: $lesson.find( '.ulg-manage-progress-lesson__progress-action-cancel' ),\n\t\t}\n\t}\n\n\tgetLessonData(){\n\t\tthis.lessonData = {\n\t\t\tlessonId: this.$elements.lesson.data( 'lesson-id' ),\n\t\t\tcourseId: this.$elements.lesson.data( 'course-id' ),\n\t\t\tisCompleted: this.$elements.lesson.data( 'is-completed' ),\n\t\t\thasTopics: !!parseInt( this.$elements.lesson.data( 'has-topics' ) ),\n\t\t\thasQuizzes: !!parseInt( this.$elements.lesson.data( 'has-quizzes' ) ),\n\t\t}\n\n\t\t// Check if it has children\n\t\tthis.lessonData.hasChildren = this.lessonData.hasTopics || this.lessonData.hasQuizzes;\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\t\t\t// Check if we should do the change or if\n\t\t\t// we should show the confirmation buttons\n\t\t\tif (!this.lessonData.hasChildren || this.confirmationVisible) {\n\t\t\t\t// Do request call\n\n\t\t\t\t// Check if it wants to complete or not the lesson\n\t\t\t\t// If the lesson is not completed then the user wants to complete it, if\n\t\t\t\t// it's completed then it wants to mark it as incomplete\n\t\t\t\tlet wantsToCompleteLesson = Number( !this.lessonData.isCompleted );\n\n\t\t\t\t// Add loading class to the actions container\n\t\t\t\tthis.$elements.lesson.addClass( 'ulg-manage-progress-lesson--loading' );\n\t\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-lesson__progress-actions--need-to-confirm' );\n\n\t\t\t\tlet lessons = {};\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.lessons.forEach( ( lesson ) => {\n\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\tif (lesson.lessonData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\tlessons[lesson.lessonData.lessonId] = wantsToCompleteLesson;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlessons[lesson.lessonData.lessonId] = Number( lesson.lessonData.isCompleted );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tlet topics  = {};\n\t\t\t\tlet quizzes = {};\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\t\tif (quiz.quizData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\tquizzes[quiz.quizData.quizId] = wantsToCompleteLesson;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tquizzes[quiz.quizData.quizId] = Number( quiz.quizData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\t//quizzes[ quiz.quizData.quizId ] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (topic.topicData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = wantsToCompleteLesson;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = Number( topic.topicData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\t\tif (topic.topicData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteLesson;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = '?';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\t// Temporal fix\n\t\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\t\t\t\t// console.log(\n\t\t\t\t// \t{\n\t\t\t\t// \t\tlessons: lessons,\n\t\t\t\t// \t\ttopics: topics,\n\t\t\t\t// \t\tquizzes: quizzes,\n\n\t\t\t\t// \t}\n\t\t\t\t// );\n\t\t\t\t// Do REST call\n\t\t\t\trestCall( {\n\t\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\t\trest_course_id: this.lessonData.courseId,\n\t\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\t\trest_topics: topics,\n\t\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\t},\n\t\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\t\tthis.$elements.lesson.removeClass( 'ulg-manage-progress-lesson--loading' );\n\n\t\t\t\t\t\t// Update isCompleted property\n\t\t\t\t\t\tthis.lessonData.isCompleted = wantsToCompleteLesson;\n\n\t\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t\t// Temporal fix\n\t\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t\t},\n\t\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t\t// Check response\n\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\t\tthis.Course.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t\t// Debug\n\t\t\t\t\t\tconsole.error( response );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\t// Show confirmation\n\t\t\t\tthis.confirmChanges();\n\t\t\t}\n\t\t} );\n\t}\n\n\tconfirmChanges(){\n\t\t// Add class so the user knows that it has to confirm the change\n\t\tthis.$elements.actions.addClass( 'ulg-manage-progress-lesson__progress-actions--need-to-confirm' );\n\n\t\t// Change confirmation value\n\t\tthis.confirmationVisible = true;\n\n\t\t// Bind cancel button\n\t\tthis.$elements.cancel.on( 'click', () => {\n\t\t\t// Remove the class that shows both buttons without doing any other modification\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-lesson__progress-actions--need-to-confirm' );\n\n\t\t\t// Remove listener\n\t\t\tthis.$elements.cancel.off( 'click' );\n\n\t\t\t// Change confirmation value\n\t\t\tthis.confirmationVisible = false;\n\t\t} );\n\t}\n\n\tmarkAsComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.lesson.removeClass( 'ulg-manage-progress-lesson--not-completed' );\n\t\tthis.$elements.lesson.addClass( 'ulg-manage-progress-lesson--completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.lesson.data( 'is-completed', true );\n\t\tthis.lessonData.isCompleted = true;\n\t}\n\n\tmarkAsNotComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.lesson.removeClass( 'ulg-manage-progress-lesson--completed' );\n\t\tthis.$elements.lesson.addClass( 'ulg-manage-progress-lesson--not-completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.lesson.data( 'is-completed', false );\n\t\tthis.lessonData.isCompleted = false;\n\t}\n\n\tisComplete(){\n\t\treturn this.lessonData.isCompleted;\n\t}\n\n\tgetTheId(){\n\t\treturn this.lessonData.lessonId;\n\t}\n}\n\nclass Topic {\n\tconstructor( Course, $topic ){\n\t\t// Save parent instance\n\t\tthis.Course = Course;\n\n\t\t// Get elements\n\t\tthis.getElements( $topic );\n\n\t\t// Get topic data\n\t\tthis.getTopicData();\n\n\t\t// Listen to checkbox clicks\n\t\tthis.listenCheckboxChanges();\n\n\t\t// Set the default value for the confirmationVisible property\n\t\tthis.confirmationVisible = false;\n\t}\n\n\tgetElements( $topic ){\n\t\tthis.$elements = {\n\t\t\tcourse: $topic.closest( '.ulg-manage-progress-course' ),\n\t\t\tlesson: $topic.closest( '.ulg-manage-progress-lesson' ),\n\t\t\ttopic: $topic,\n\t\t\tactions: $topic.find( '.ulg-manage-progress-topic__progress-actions' ),\n\t\t\tcheckbox: $topic.find( '.ulg-manage-progress-topic__progress-action-checkbox' ),\n\t\t\tcancel: $topic.find( '.ulg-manage-progress-topic__progress-action-cancel' ),\n\t\t}\n\t}\n\n\tgetTopicData(){\n\t\tthis.topicData = {\n\t\t\ttopicId:     this.$elements.topic.data( 'topic-id' ),\n\t\t\tlessonId:    this.$elements.topic.data( 'lesson-id' ),\n\t\t\tcourseId:    this.$elements.topic.data( 'course-id' ),\n\t\t\tisCompleted: this.$elements.topic.data( 'is-completed' ),\n\t\t\thasQuizzes:  this.$elements.topic.data( 'has-quizzes' ),\n\t\t\thasChildren: this.$elements.topic.data( 'has-quizzes' ),\n\t\t}\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\t\t\t// Check if we should do the change or if\n\t\t\t// we should show the confirmation buttons\n\t\t\tif ( ! this.topicData.hasChildren || this.confirmationVisible ){\n\t\t\t\t// Do request call\n\n\t\t\t\t// Check if it wants to complete or not the topic\n\t\t\t\t// If the topic is not completed then the user wants to complete it, if\n\t\t\t\t// it's completed then it wants to mark it as incomplete\n\t\t\t\tlet wantsToCompleteTopic = Number( ! this.topicData.isCompleted );\n\n\t\t\t\t// Add loading class to the actions container\n\t\t\t\tthis.$elements.topic.addClass( 'ulg-manage-progress-topic--loading' );\n\t\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-topic__progress-actions--need-to-confirm' );\n\n\t\t\t\tlet lessons = {};\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.lessons.forEach( ( lesson ) => {\n\t\t\t\t\tlessons[lesson.lessonData.lessonId] = Number( lesson.lessonData.isCompleted );\n\t\t\t\t} );\n\n\t\t\t\tlet topics  = {};\n\t\t\t\tlet quizzes = {};\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\t\tif ( quiz.quizData.topicId === this.topicData.topicId ){\n\t\t\t\t\t\tquizzes[ quiz.quizData.quizId ] = wantsToCompleteTopic;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tquizzes[quiz.quizData.quizId] = Number( quiz.quizData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\t//quizzes[ quiz.quizData.quizId ] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (topic.topicData.topicId === this.topicData.topicId) {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = wantsToCompleteTopic;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = Number( topic.topicData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\t\tif (topic.topicData.topicId === this.topicData.topicId) {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteTopic;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = '?';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\t// Temporal fix\n\t\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\n\t\t\t\t// Do REST call\n\t\t\t\trestCall( {\n\t\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\t\trest_course_id: this.topicData.courseId,\n\t\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\t\trest_topics: topics,\n\t\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\t},\n\t\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\t\tthis.$elements.topic.removeClass( 'ulg-manage-progress-topic--loading' );\n\n\t\t\t\t\t\t// Update isCompleted property\n\t\t\t\t\t\tthis.topicData.isCompleted = wantsToCompleteTopic;\n\n\t\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t\t// Temporal fix\n\t\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t\t},\n\t\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t\t// Check response\n\t\t\t\t\t\tif ( response.success ){\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\t\tthis.Course.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t\t// Debug\n\t\t\t\t\t\tconsole.error( response );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Show confirmation\n\t\t\t\tthis.confirmChanges();\n\t\t\t}\n\t\t} );\n\t}\n\n\tconfirmChanges(){\n\t\t// Add class so the user knows that it has to confirm the change\n\t\tthis.$elements.actions.addClass( 'ulg-manage-progress-topic__progress-actions--need-to-confirm' );\n\n\t\t// Change confirmation value\n\t\tthis.confirmationVisible = true;\n\n\t\t// Bind cancel button\n\t\tthis.$elements.cancel.on( 'click', () => {\n\t\t\t// Remove the class that shows both buttons without doing any other modification\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-topic__progress-actions--need-to-confirm' );\n\n\t\t\t// Remove listener\n\t\t\tthis.$elements.cancel.off( 'click' );\n\n\t\t\t// Change confirmation value\n\t\t\tthis.confirmationVisible = false;\n\t\t} );\n\t}\n\n\tmarkAsComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.topic.removeClass( 'ulg-manage-progress-topic--not-completed' );\n\t\tthis.$elements.topic.addClass( 'ulg-manage-progress-topic--completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.topic.data( 'is-completed', true );\n\t\tthis.topicData.isCompleted = true;\n\t}\n\n\tmarkAsNotComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.topic.removeClass( 'ulg-manage-progress-topic--completed' );\n\t\tthis.$elements.topic.addClass( 'ulg-manage-progress-topic--not-completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.topic.data( 'is-completed', false );\n\t\tthis.topicData.isCompleted = false;\n\t}\n\n\tisComplete(){\n\t\treturn this.topicData.isCompleted;\n\t}\n\n\tgetTheId(){\n\t\treturn this.topicData.topicId;\n\t}\n}\n\nclass Quiz {\n\tconstructor( Course, $quiz ){\n\t\t// Save parent instance\n\t\tthis.Course = Course;\n\n\t\t// Get elements\n\t\tthis.getElements( $quiz );\n\n\t\t// Get quiz data\n\t\tthis.getQuizData();\n\n\t\t// Listen to checkbox changes\n\t\tthis.listenCheckboxChanges();\n\t}\n\n\tgetElements( $quiz ){\n\t\tthis.$elements = {\n\t\t\tcourse: $quiz.closest( '.ulg-manage-progress-course' ),\n\t\t\tquiz: $quiz,\n\t\t\tactions: $quiz.find( '.ulg-manage-progress-quiz__progress-actions' ),\n\t\t\tcheckbox: $quiz.find( '.ulg-manage-progress-quiz__progress-action-checkbox' ),\n\t\t\tcancel: $quiz.find( '.ulg-manage-progress-quiz__progress-action-cancel' ),\n\t\t\trightContainer: $quiz.find( '.ulg-manage-progress-quiz__right' )\n\t\t}\n\t}\n\n\tgetQuizData(){\n\t\tthis.quizData = {\n\t\t\tquizId: this.$elements.quiz.data( 'quiz-id' ),\n\t\t\tlessonId: this.$elements.quiz.data( 'lesson-id' ),\n\t\t\tcourseId: this.$elements.quiz.data( 'course-id' ),\n\t\t\ttopicId: this.$elements.quiz.data( 'topic-id' ),\n\t\t\tisCompleted: this.$elements.quiz.data( 'is-completed' ),\n\t\t}\n\t}\n\n\tsetCertificate( certificateUrl = null ){\n\t\t// Find the container we have to remove\n\t\tthis.$elements.rightContainer.find( '.ulg-manage-progress-quiz__action' ).remove();\n\n\t\t// Check if we have to add the certificate button again\n\t\tif (!isEmpty( certificateUrl )) {\n\t\t\t// Create the \"Certificate\" button\n\t\t\tconst $certificateButton = $( `\n\t\t\t\t<div class=\"ulg-manage-progress-quiz__action\">\n\t\t\t\t\t<a href=\"${certificateUrl}\" target=\"_blank\" class=\"ulg-manage-progress-btn\">\n\t\t\t\t\t\t${ULGM_ManageProgress.i18n.certificate}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t` );\n\n\t\t\t// Add button to the container\n\t\t\tthis.$elements.rightContainer.append( $certificateButton );\n\t\t}\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\t\t\t// Do request call\n\n\t\t\t// Check if it wants to complete or not the quiz\n\t\t\t// If the quiz is not completed then the user wants to complete it, if\n\t\t\t// it's completed then it wants to mark it as incomplete\n\t\t\tlet wantsToCompleteQuiz = Number( ! this.quizData.isCompleted ); // TODO NOT NEEDED\n\n\t\t\t// Add loading class to the actions container\n\t\t\tthis.$elements.quiz.addClass( 'ulg-manage-progress-quiz--loading' );\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-quiz__progress-actions--need-to-confirm' );\n\n\t\t\tlet lessons = {};\n\n\t\t\t// Iterate all children\n\t\t\tthis.Course.courseData.children.lessons.forEach( ( lesson ) => {\n\t\t\t\tlessons[lesson.lessonData.lessonId] = Number( lesson.lessonData.isCompleted );\n\t\t\t} );\n\n\t\t\tlet topics  = {};\n\t\t\tlet quizzes = {};\n\t\t\t// Iterate all children\n\t\t\tthis.Course.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\tif (quiz.quizData.quizId === this.quizData.quizId) {\n\t\t\t\t\tquizzes[quiz.quizData.quizId] = wantsToCompleteQuiz;\n\t\t\t\t} else {\n\t\t\t\t\tquizzes[quiz.quizData.quizId] = Number( quiz.quizData.isCompleted );\n\t\t\t\t}\n\n\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t//quizzes[ quiz.quizData.quizId ] = wantsToCompleteCourse;\n\t\t\t} );\n\n\t\t\t// Iterate all children\n\t\t\tthis.Course.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t}\n\n\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = Number( topic.topicData.isCompleted );\n\n\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t}\n\n\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\tif (topic.topicData.topicId === this.quizData.topicId) {\n\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteQuiz;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tquizzes[_topic_id] = '?';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t// Temporal fix\n\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\t\t\t// Do REST call\n\t\t\trestCall( {\n\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\tdata: {\n\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\trest_course_id: this.quizData.courseId,\n\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\trest_topics: topics,\n\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t},\n\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\tthis.$elements.quiz.removeClass( 'ulg-manage-progress-quiz--loading' );\n\n\t\t\t\t\t// Update isCompleted property\n\t\t\t\t\tthis.quizData.isCompleted = wantsToCompleteQuiz;\n\n\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t// Temporal fix\n\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t},\n\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t// Check response\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\tthis.Course.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\tthis.Course.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t// Set certificate\n\t\t\t\t\t\tthis.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\tthis.Course.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t// Debug\n\t\t\t\t\tconsole.error( response );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\tmarkAsComplete( childrenData ){\n\t\t// Remove certificate\n\t\tthis.setCertificate( childrenData.certificate_url );\n\n\t\t// Change the status class\n\t\tthis.$elements.quiz.removeClass( 'ulg-manage-progress-quiz--not-completed' );\n\t\tthis.$elements.quiz.addClass( 'ulg-manage-progress-quiz--completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.quiz.data( 'is-completed', true );\n\t\tthis.quizData.isCompleted = true;\n\t}\n\n\tmarkAsNotComplete( childrenData ){\n\t\t// Remove certificate\n\t\tthis.setCertificate();\n\n\t\t// Change the status class\n\t\tthis.$elements.quiz.removeClass( 'ulg-manage-progress-quiz--completed' );\n\t\tthis.$elements.quiz.addClass( 'ulg-manage-progress-quiz--not-completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.quiz.data( 'is-completed', false );\n\t\tthis.quizData.isCompleted = false;\n\t}\n\n\tisComplete(){\n\t\treturn this.quizData.isCompleted;\n\t}\n\n\tgetTheId(){\n\t\treturn this.quizData.quizId;\n\t}\n}\n\nexport default ManageProgress;","import $ from 'jquery';\n\nimport {\n\tdestroyiCheck,\n\tformatNumber\n} from './utilities';\n\nclass BuyCourses {\n\tconstructor(){\n\t\t// Check if we have to invoke the methods\n\t\tif ( this.isBuyCourses() ){\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Get configuration\n\t\t\tthis.getConfiguration();\n\n\t\t\t// Destroy iCheck checkboxes\n\t\t\tdestroyiCheck();\n\n\t\t\t// Listen changes in the checkboxes\n\t\t\tthis.modifyCourses();\n\n\t\t\t// Listen changes to the quantity field\n\t\t\tthis.listenQuantityChanges();\n\n\t\t\t// Listen the form submission\n\t\t\tthis.listenFormSubmission();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\t// Get elements\n\t\tthis.$elements = {\n\t\t\tform:               $( '#uo-groups-buy-courses' ),\n\t\t\terrorNotice:        $( '#uo-groups-buy-course-error-notice' ),\n\t\t\tfield: {\n\t\t\t\tquantity:       $( '#uo-groups-buy-course-field-quantity' ),\n\t\t\t},\n\t\t\ttotals: {\n\t\t\t\tsubtotal:       $( '#uo-groups-buy-course-totals-subtotal' ),\n\t\t\t\tdiscount: {\n\t\t\t\t\tpercentage: $( '#uo-groups-buy-course-totals-discount-percentage' ),\n\t\t\t\t\ttotal:      $( '#uo-groups-buy-course-totals-discount' ),\n\t\t\t\t},\n\t\t\t\ttotal:          $( '#uo-groups-buy-course-totals-total' ),\n\t\t\t}\n\t\t}\n\t}\n\n\tgetConfiguration(){\n\t\t// Get bulk discount configuration\n\t\tlet bulkDiscountData = this.$elements.form.data( 'bulk-discount' );\n\t\t// Check if it's bulk discount is enabled\n\t\tlet bulkDiscountEnabled = bulkDiscountData.enabled == 'yes';\n\t\t// Check if there are discount groups\n\t\tbulkDiscountData.discounts = typeof bulkDiscountData.discounts !== 'undefined' ? bulkDiscountData.discounts : {};\n\t\t// Get discount groups\n\t\tlet bulkDiscountGroups = [];\n\t\t$.each( Object.values( bulkDiscountData.discounts ), ( index, group ) => {\n\t\t\tbulkDiscountGroups.push({\n\t\t\t\tminimumQuantity: parseInt( group.qty ),\n\t\t\t\tpercentage: parseFloat( group.percent )\n\t\t\t});\n\t\t});\n\n\t\t// Get configuration\n\t\tthis.config = {\n\t\t\tbulkDiscount: {\n\t\t\t\tenabled: bulkDiscountEnabled,\n\t\t\t\tgroups:  bulkDiscountGroups\n\t\t\t},\n\t\t\tformatPrice: {\n\t\t\t\ttemplate:          ULG_BuyCourses.formatPrice.template,\n\t\t\t\tnumberOfDecimals:  ULG_BuyCourses.formatPrice.numberOfDecimals,\n\t\t\t\tthousandSeparator: ULG_BuyCourses.formatPrice.thousandSeparator,\n\t\t\t\tdecimalSeparator:  ULG_BuyCourses.formatPrice.decimalSeparator,\n\t\t\t}\n\t\t}\n\n\t\t// Get totals\n\t\tthis.totals = {\n\t\t\tnumberOfSeats: 0,\n\t\t\tnumberOfStudents: 0,\n\t\t\tsubtotal: 0,\n\t\t\tdiscount: {\n\t\t\t\tpercentage: 0,\n\t\t\t\ttotal: 0\n\t\t\t},\n\t\t\ttotal: 0\n\t\t}\n\t}\n\n\tmodifyCourses(){\n\t\t// Listen changes to the checkboxes\n\t\tthis.$elements.form.on( 'change', '.uo-checkbox input', ( event ) => {\n\t\t\t// Get checkbox\n\t\t\tconst $checkbox = $( event.currentTarget );\n\n\t\t\t// Get row\n\t\t\tconst $row = $checkbox.closest( '.uo-groups-table-row' );\n\n\t\t\t// Toggle selected class\n\t\t\t$row.toggleClass( 'uo-groups-table-row--selected' );\n\n\t\t\t// Update totals\n\t\t\tthis.updateTotals();\n\t\t});\n\t}\n\n\tlistenFormSubmission(){\n\t\t// Listen form submission\n\t\tthis.$elements.form.on( 'submit', ( event ) => {\n\t\t\t// Validate\n\t\t\tconst validation = this.validate();\n\n\t\t\t// Show (or not) the error notice\n\t\t\tthis.errorNotice( ! validation.isValid, validation.message );\n\n\t\t\t// Check if it's not valid\n\t\t\tif ( ! validation.isValid ){\n\t\t\t\t// Prevent default\n\t\t\t\tevent.preventDefault();\n\t\t\t}\t\n\t\t});\n\t}\n\n\tlistenQuantityChanges(){\n\t\t// Listen quantity changes\n\t\tthis.$elements.field.quantity.on( 'input', () => {\n\t\t\t// Update totals\n\t\t\tthis.updateTotals();\n\t\t});\n\t}\n\n\tgetTotals(){\n\t\t// Get and update number of selected courses\n\t\tconst $selectedCourses = this.$elements.form.find( '.uo-checkbox input:checked' );\n\t\t// Update totals\n\t\tthis.totals.numberOfSeats = parseInt( this.$elements.field.quantity.val() );\n\t\t// Check if the number if valid\n\t\tthis.totals.numberOfSeats = isNaN( this.totals.numberOfSeats ) ? 1 : this.totals.numberOfSeats;\n\n\t\t// Get number of students\n\t\tlet numberOfStudents = this.$elements.field.quantity.val();\n\t\t// Update totals\n\t\tthis.totals.numberOfStudents = parseInt( numberOfStudents );\n\n\t\t// Get the number of selected courses\n\t\tthis.totals.numberOfCourses = $selectedCourses.length;\n\n\t\t// Get subtotal\n\t\tlet subtotal = numberOfStudents * $selectedCourses.toArray().reduce(( accumulator, course ) => {\n\t\t\t// Get jQuery object of the course\n\t\t\tconst $course = $( course );\n\n\t\t\t// Get price\n\t\t\tconst price = parseFloat( $course.data( 'price' ) );\n\n\t\t\t// Add price to the accumulator\n\t\t\treturn accumulator + price;\n\t\t}, 0 );\n\t\t// Update totals\n\t\tthis.totals.subtotal = subtotal;\n\n\t\t// Get discount\n\t\t// Get discount group\n\t\tconst discountGroup = this.getDiscountPercentage();\n\t\t// Get discount\n\t\tlet discount = -1 * subtotal * discountGroup.percentage / 100;\n\t\t// Update totals\n\t\tthis.totals.discount.percentage = discountGroup.percentage;\n\t\tthis.totals.discount.total = discount;\n\n\t\t// Get total\n\t\tlet total = subtotal + discount;\n\t\ttotal = total > 0 ? total : 0;\n\t\t// Update totals\n\t\tthis.totals.total = total;\n\t}\n\n\tgetDiscountPercentage(){\n\t\t// We will get what discount we have to apply\n\t\t// To do that, we're going to find the discount group\n\t\t// using the current number of selected groups, searching\n\t\t// for the group with the highest minimum\n\t\tlet discountGroup = {\n\t\t\tminimumQuantity: 0,\n\t\t\tpercentage: 0\n\t\t}\n\n\t\t// Check if the user has discount groups\n\t\tif ( this.config.bulkDiscount.enabled ){\n\t\t\t// Iterate groups\n\t\t\t$.each( this.config.bulkDiscount.groups, ( index, group ) => {\n\t\t\t\t// Check if the minimum is lower (or equal) than our number of seats\n\t\t\t\tif ( group.minimumQuantity <= this.totals.numberOfSeats ){\n\t\t\t\t\t// Save group\n\t\t\t\t\tdiscountGroup = group;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Return group\n\t\treturn discountGroup;\n\t}\n\n\tupdateTotals(){\n\t\t// Get totals\n\t\tthis.getTotals();\n\n\t\t// Update subtotal\n\t\tthis.$elements.totals.subtotal.html( this.formatPrice( this.totals.subtotal ) );\n\t\t\n\t\t// Update discount\n\t\t// If it's 0, remove percentage from the DOM\n\t\tif ( this.totals.discount.percentage == 0 ){\n\t\t\tthis.$elements.totals.discount.percentage.text( '' );\n\t\t}\n\t\t// Otherwise, add it\n\t\telse {\n\t\t\tthis.$elements.totals.discount.percentage.text( `${ this.totals.discount.percentage }% - ` );\n\t\t}\n\t\tthis.$elements.totals.discount.total.html( this.formatPrice( this.totals.discount.total ) );\n\n\t\t// Update total\n\t\tthis.$elements.totals.total.html( this.formatPrice( this.totals.total ) );\n\n\t\t// Add updated class\n\t\tthis.$elements.form.addClass( 'uo-groups-buy-courses--totals-updated' );\n\t\t// Remove class after 150ms\n\t\tsetTimeout(() => {\n\t\t\tthis.$elements.form.removeClass( 'uo-groups-buy-courses--totals-updated' );\n\t\t}, 150 );\n\t}\n\n\tvalidate(){\n\t\t// Default value\n\t\tlet response = {\n\t\t\tisValid: false,\n\t\t\tmessage: ''\n\t\t};\n\n\t\t// Check if there is at least one course selected\n\t\tif ( this.totals.numberOfSeats > 0 && this.totals.numberOfCourses > 0 ){\n\t\t\t// Update validation\n\t\t\tresponse.isValid = true;\n\t\t}\n\t\telse {\n\t\t\t// Otherwise, add message\n\t\t\tresponse.message = ULG_BuyCourses.i18n.selectAtLeastOne;\n\t\t}\n\n\t\t// Return response\n\t\treturn response;\n\t}\n\n\terrorNotice( hasError = false, message = '' ){\n\t\t// Check if we have to show or hide the notice\n\t\tif ( hasError ){\n\t\t\t// Show notice\n\t\t\tthis.$elements.errorNotice.show().html( message );\n\t\t}\n\t\telse {\n\t\t\t// Hide notice\n\t\t\tthis.$elements.errorNotice.hide();\n\t\t}\n\t}\n\n\tformatPrice( price ){\n\t\t// Get price format\n\t\tconst $price = $( this.config.formatPrice.template );\n\n\t\t// Replace dummy price with real price\n\t\t$price.html(( index, oldHtml ) => {\n\t\t\t// Get the number of wc_price( 0 )\n\t\t\tconst dummyPrice = formatNumber( 0, this.config.formatPrice.numberOfDecimals, this.config.formatPrice.decimalSeparator, this.config.formatPrice.thousandSeparator );\n\n\t\t\t// Format real price\n\t\t\tconst priceFormatted = formatNumber( price, this.config.formatPrice.numberOfDecimals, this.config.formatPrice.decimalSeparator, this.config.formatPrice.thousandSeparator );\n\n\t\t\t// Replace text\n\t\t\treturn oldHtml.replace( dummyPrice, priceFormatted );  \n\t\t});\n\n\t\t// Check if the price is negative\n\t\tif ( price < 0 ){\n\t\t\t// Add minus character\n\t\t\t$price.prepend( '-' );\n\t\t}\n\n\t\t// Return price jQuery element\n\t\treturn $price;\n\t}\n\n\tisBuyCourses(){\n\t\treturn $( '#uo-groups-buy-courses' ).length == 1 && typeof ULG_BuyCourses !== 'undefined';\n\t}\n}\n\nexport default BuyCourses;","import $ from 'jquery';\n\nclass CreateGroup {\n\tconstructor(){\n\t\t// Check if the page has the [uo_groups_create_group] \n\t\t// shortcode, or the respective Gutenberg block\n\t\tif ( this.isCreateGroup() ){\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Add multi-select pillbox to the\n\t\t\t// \"Group Courses\" field\n\t\t\tthis.addPillboxToGroupCourses();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\tthis.$elements = {\n\t\t\tcoursesList: $( '#ulg-create-group__courses-list' )\n\t\t}\n\t}\n\n\t/**\n\t * Add multi-select pillbox to the\n\t * \"Group Courses\" field\n\t */\n\taddPillboxToGroupCourses(){\n\t\tthis.$elements.coursesList.select2({\n\t\t\ttheme: 'default ulg-select2'\n\t\t});\n\t}\n\n\t/**\n\t * Check if the page has the [uo_groups_create_group] \n\t * shortcode, or the respective Gutenberg block\n\t */\n\tisCreateGroup(){\n\t\treturn $( '#ulg-create-group' ).length == 1;\n\t}\n}\n\nexport default CreateGroup;","import './js/define-main-object.js';\n\nimport './js/ulgm-rest-forms.js';\nimport './js/ulgm-assignments.js';\nimport './js/ulgm-essays.js';\nimport './js/ulgm-reporting.js';\nimport './js/front.js';\nimport './js/learndash_template_script.js';\nimport './js/uncanny-owl-groups-ui.js';\n\nimport GroupManagement from './js/group-management.js';\nimport GroupCourseReport from './js/group-course-report.js';\nimport CourseDashboard from './js/course-dashboard.js';\nimport ManageProgress from './js/manage-progress.js';\nimport BuyCourses from './js/buy-courses.js';\nimport CreateGroup from './js/create-group.js';\n\nimport './scss/main.scss';\n\n// Do on DOM ready\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\tnew GroupManagement();\n\tnew GroupCourseReport();\n\tnew CourseDashboard();\n\tnew ManageProgress();\n\tnew BuyCourses();\n\tnew CreateGroup();\n});\n"],"sourceRoot":""}