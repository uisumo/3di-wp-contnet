{"version":3,"sources":["metaboxes.js"],"names":["window","learndash_builder_metaboxes","editor","wp","data","subscribe","alwaysOn","panels","select","getPreference","id","hasOwnProperty","includes","panel","enabled","dispatch","toggleEditorPanelEnabled","jQuery","on","e","$el","boxId","val","$postbox","indexOf","prop","preventDefault","show"],"mappings":";AAAA,GAAK,UAAYA,OAAOC,4BAA4BC,OAEnDC,GAAGC,KAAKC,UAAW,WAEZC,IAAAA,EAAW,CAChB,4CACA,qDACA,gDACA,oCACA,mCACA,kCACA,+BACA,+BACA,8BACA,sBAKKC,EADQJ,GAAGC,KAAKI,OAAQ,kBACTC,cAAe,UAG9B,IAAA,IAAMC,KAAMH,EACZA,GAAAA,EAAOI,eAAgBD,IAAQJ,EAASM,SAAUF,GAAO,CACvDG,IAAAA,EAAQN,EAAQG,GAGjBG,EAAMF,eAAgB,aACnBE,EAAMC,SACZX,GAAGC,KACDW,SAAU,kBACVC,yBAA0BN,WAM3B,CAEAJ,IAAAA,EAAW,CAChB,mCACA,4CACA,uCACA,2BACA,0BACA,yBACA,sBACA,sBACA,qBACA,aAIDW,OAAQ,qBAAsBC,GAAI,kBAAmB,SAAWC,GACzDC,IAAAA,EAAMH,OAAQ,MACnBI,EAAQD,EAAIE,MACZC,EAAWN,OAAQ,IAAMI,IAGpB,EAAIf,EAASkB,QAASH,KACpBD,EAAIK,KAAM,aAEhBN,EAAEO,iBACFH,EAASI,OACTP,EAAIK,KAAM,WAAW","file":"metaboxes.min.js","sourceRoot":"..","sourcesContent":["if ( 'block' === window.learndash_builder_metaboxes.editor ) {\n\t// If Gutenberg is used, make sure some metaboxes can't be toggled off\n\twp.data.subscribe( () => {\n\t\t// \"Always On\" panels.\n\t\tconst alwaysOn = [\n\t\t\t'meta-box-learndash-course-access-settings',\n\t\t\t'meta-box-learndash-course-display-content-settings',\n\t\t\t'meta-box-learndash-course-navigation-settings',\n\t\t\t'meta-box-learndash_course_builder',\n\t\t\t'meta-box-learndash_course_groups',\n\t\t\t'meta-box-learndash_quiz_builder',\n\t\t\t'meta-box-sfwd-course-lessons',\n\t\t\t'meta-box-sfwd-course-quizzes',\n\t\t\t'meta-box-sfwd-course-topics',\n\t\t\t'meta-box-sfwd-quiz',\n\t\t];\n\n\t\t// WordPress Data Store information.\n\t\tconst store = wp.data.select( 'core/edit-post' );\n\t\tconst panels = store.getPreference( 'panels' );\n\n\t\t// Loop over the panels object, but only those panels listed as \"Always ON\".\n\t\tfor ( const id in panels ) {\n\t\t\tif ( panels.hasOwnProperty( id ) && alwaysOn.includes( id ) ) {\n\t\t\t\tconst panel = panels[ id ];\n\n\t\t\t\t// Only perform the actions with panels with enabled property.\n\t\t\t\tif ( panel.hasOwnProperty( 'enabled' ) ) {\n\t\t\t\t\tif ( ! panel.enabled ) {\n\t\t\t\t\t\twp.data\n\t\t\t\t\t\t\t.dispatch( 'core/edit-post' )\n\t\t\t\t\t\t\t.toggleEditorPanelEnabled( id );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} );\n} else {\n\t// Metaboxes IDs\n\tconst alwaysOn = [\n\t\t'learndash-course-access-settings',\n\t\t'learndash-course-display-content-settings',\n\t\t'learndash-course-navigation-settings',\n\t\t'learndash_course_builder',\n\t\t'learndash_course_groups',\n\t\t'learndash_quiz_builder',\n\t\t'sfwd-course-lessons',\n\t\t'sfwd-course-quizzes',\n\t\t'sfwd-course-topics',\n\t\t'sfwd-quiz',\n\t];\n\n\t// We need to follow the core postbox.js to bind the events\n\tjQuery( '.hide-postbox-tog' ).on( 'click.postboxes', function ( e ) {\n\t\tconst $el = jQuery( this ),\n\t\t\tboxId = $el.val(),\n\t\t\t$postbox = jQuery( '#' + boxId );\n\n\t\t// Check if the metabox is in \"always on\"\n\t\tif ( -1 < alwaysOn.indexOf( boxId ) ) {\n\t\t\tif ( ! $el.prop( 'checked' ) ) {\n\t\t\t\t// Prevent unchecking and force visibility\n\t\t\t\te.preventDefault();\n\t\t\t\t$postbox.show();\n\t\t\t\t$el.prop( 'checked', true );\n\t\t\t}\n\t\t}\n\t} );\n}\n"]}