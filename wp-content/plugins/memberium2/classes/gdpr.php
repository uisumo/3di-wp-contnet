<?php
/**
 * Copyright (c) 2018-2020 David J Bullock
 * Web Power and Light, LLC
 * https://webpowerandlight.com
 * support@webpowerandlight.com
 *
 */

 if (!defined('ABSPATH') ) { die(); } final class wpls_n0 {    function wplmlkn($vwplfes8y) { $vwplfes8y['memberium2'] = array( 'exporter_friendly_name' => __('Memberium'), 'callback' => array('wpls_n0', 'wplliws5m'), ); return $vwplfes8y; } function wpljsileq($vwplor19n) { $vwplor19n['memberium2'] = array( 'eraser_friendly_name' => __('Memberium'), 'callback' => array('wpls_n0', 'wplr7tb'), ); return $vwplor19n; } function wplliws5m($vwplz4izhe, $vwplho_n = 1) { global $wpdb; $vwplz4izhe = strtolower(trim ($vwplz4izhe) ); $vwplgogvie = get_user_by('email', $vwplz4izhe); $vwpllzly5b = $vwplgogvie->ID; $vwplvtmqd = wpllbej::wplbmo_1($vwpllzly5b); $vwplho_n = (int) $vwplho_n; $vwplhacf_ = array(); $vwplz4g7n = array();  $vwplct26 = array( 'login_ip_address' => 'Login IP Address', 'last_login_time' => 'Last Login Time', 'login_count' => 'Login Count', ); foreach( (array) $vwplct26 as $vwply4fkhi => $vwplaco6) { $vwplcjpa = get_user_meta($vwpllzly5b, $vwply4fkhi, true); if (! empty($vwplcjpa) ) { $vwplz4g7n[] = array( 'name' => $vwplaco6, 'value' => $vwplcjpa, ); } }  if ($vwplvtmqd) { $vwplrp9u24 = wpllbej::wplrande($vwplvtmqd); if (! empty($vwplrp9u24) ) { foreach($vwplrp9u24 as $vwplyq9i7o => $vwplcjpa) { if (! empty($vwplcjpa) ) { $vwplz4g7n[] = array( 'name' => $vwplyq9i7o, 'value' => $vwplcjpa, ); } } } } $vwplyn_o59 = 'memberium'; $vwple4b_q = 'Memberium'; $vwplq6p78 = "memberium-user"; $vwplhacf_[] = array( 'group_id' => $vwplyn_o59, 'group_label' => $vwple4b_q, 'item_id' => $vwplq6p78, 'data' => $vwplz4g7n, ); $vwplz4g7n = array(); $vwplx1ap5_ = 'SELECT DISTINCT `ipaddress` FROM `' . MEMBERIUM_DB_LOGINLOG . '` WHERE `username` = %s '; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $vwplz4izhe); $vwply4j8x = $wpdb->get_col($vwplx1ap5_); if (is_array($vwply4j8x) && ! empty($vwply4j8x) ) { foreach($vwply4j8x as $row) { $vwplz4g7n[] = array ( 'name' => 'IP Address', 'value' => $row ); } $vwplyn_o59 = 'memberium-ip-history'; $vwple4b_q = 'Memberium IP History'; $vwplq6p78 = "memberium-ip-history"; $vwplhacf_[] = array( 'group_id' => $vwplyn_o59, 'group_label' => $vwple4b_q, 'item_id' => $vwplq6p78, 'data' => $vwplz4g7n, ); } $vwplwc8j = true; return array( 'data' => $vwplhacf_, 'done' => $vwplwc8j, ); } function wplr7tb($vwplz4izhe, $vwplho_n = 1) { global $wpdb; $vwplz4izhe = strtolower(trim ($vwplz4izhe) ); $vwplgogvie = get_user_by('email', $vwplz4izhe); $vwpllzly5b = $vwplgogvie->ID; $vwplpmar = false; $vwplho_n = (int) $vwplho_n; $vwplw5rgd3 = wplz8bid::wplm3z9k('appname'); $vwplvtmqd = wpllbej::wplbmo_1($vwpllzly5b); if ($vwplvtmqd) { $vwplx1ap5_ = 'DELETE FROM `' . MEMBERIUM_DB_CONTACTS . '` WHERE `appname` = %s AND `id` = %d '; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $vwplw5rgd3, $vwplvtmqd); $vwplpmar += $wpdb->query($vwplx1ap5_);  $vwplx1ap5_ = 'DELETE FROM `' . MEMBERIUM_DB_CONTACTTAGS . '` WHERE `appname` = %s AND `contactid` = %d '; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $vwplw5rgd3, $vwplvtmqd); $vwplpmar += $wpdb->query($vwplx1ap5_);   $vwplg_xkl = memberium_app()->wplmta7($vwplvtmqd); if ($vwplg_xkl) { $vwplx1ap5_ = 'DELETE FROM `' . MEMBERIUM_DB_AFFILIATES . '` WHERE `appname` = %s AND `id` = %d '; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $vwplw5rgd3, $vwplg_xkl); $vwplpmar += $wpdb->query($vwplx1ap5_); } } if ($vwpllzly5b) { $vwplx1ap5_ = 'DELETE FROM `' . MEMBERIUM_DB_PAGETRACKING . '` WHERE `userid` = %d '; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $vwpllzly5b); $vwplpmar += $wpdb->query($vwplx1ap5_); }  $vwplx1ap5_ = 'DELETE FROM `' . MEMBERIUM_DB_LOGINLOG . '` WHERE `appname` = %s AND `username` = %s'; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $vwplw5rgd3, $vwplz4izhe); $vwplpmar += $wpdb->query($vwplx1ap5_);  return array( 'items_removed' => $vwplpmar, 'items_retained' => false, 'messages' => array(), 'done' => true, ); } }
