<?php
/**
 * Copyright (c) 2018-2020 David J Bullock
 * Web Power and Light, LLC
 * https://webpowerandlight.com
 * support@webpowerandlight.com
 *
 */

 if (!defined('ABSPATH') ) { die(); } final class wpll72jhi { static function wplol_bad() { static $vwplhwkniz = NULL; if (! empty($vwplhwkniz) ) { return $vwplhwkniz; } $vwplhwkniz = $_SERVER['REMOTE_ADDR']; $vwplvivzq = array( 'HTTP_CLIENT_IP', 'HTTP_X_FORWARDED_FOR', 'HTTP_X_FORWARDED', 'HTTP_X_CLUSTER_CLIENT_IP', 'HTTP_FORWARDED_FOR', 'HTTP_FORWARDED', ); foreach ($vwplvivzq as $vwply17edn) { if (array_key_exists($vwply17edn, $_SERVER) === true) { foreach (explode(',', $_SERVER[$vwply17edn]) as $vwpla7rcb8) { $vwpla7rcb8 = trim($vwpla7rcb8); if (self::wplsyo2r($vwpla7rcb8) ) { $vwplhwkniz = $vwpla7rcb8; } } } } return $vwplhwkniz; } private static function wplsyo2r($vwpla7rcb8) { if (filter_var($vwpla7rcb8, FILTER_VALIDATE_IP, FILTER_FLAG_IPV4 | FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE) === false) { return false; } return true; } static function wplqusm($vwplfkojlf = '', $vwplu0pn2w = false, $vwplgitq = null) { $vwplsb_pf = array( 'timeout' => 3, ); $vwplgitq = wp_parse_args($vwplgitq, $vwplsb_pf); $vwplu_gxri = wp_remote_get($vwplfkojlf, $vwplgitq); if (is_array($vwplu_gxri) ) { if (empty($vwplu_gxri['body']) ) { $vwplu_gxri['body'] = ''; } if (! $vwplu0pn2w) { return $vwplu_gxri['body']; } else { return $vwplu_gxri; } } else { return false; } return; } static function wpls_0a6($vwpla7rcb8, $vwplp_2yqa) { list($subnet, $vwpllnqcf2) = explode('/', $vwplp_2yqa); if ( (ip2long($vwpla7rcb8) & ~( (1 << (32 - $vwpllnqcf2) ) - 1) ) == ip2long($subnet) ) { return true; } return false; } static function wplo3c6() { $vwplsekv = 'memberium/aws_subnets'; $vwplxiv_zm = get_transient($vwplsekv); if ($vwplxiv_zm === false) {  $vwplu_gxri = wp_remote_get('https://ip-ranges.amazonaws.com/ip-ranges.json');  $vwplu_gxri = json_decode($vwplu_gxri['body']); $vwplxiv_zm = $vwplu_gxri->prefixes; set_transient($vwplsekv, $vwplxiv_zm, 24 * HOUR_IN_SECONDS); unset($vwplu_gxri); } return $vwplxiv_zm; } static function wplhymf3s() { $vwplxiv_zm = wpll72jhi::wplo3c6(); $vwplz29dq1 = array(); foreach($vwplxiv_zm as $vwpltcgza) { if ('S3' == $vwpltcgza->service) { $vwplz29dq1[$vwpltcgza->region] = $vwpltcgza->region; } } ksort($vwplz29dq1); return $vwplz29dq1; } }
