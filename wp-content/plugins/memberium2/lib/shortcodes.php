<?php
/**
 * Copyright (c) 2017-2020 David J Bullock
 * Web Power and Light, LLC
 * https://webpowerandlight.com
 * support@webpowerandlight.com
 *
 */

 if (! defined('ABSPATH') ) { die(); } final class wplnmq3bv { function wplf5yc6() { global $i2sdk; $this->i2sdk = $i2sdk; $this->isdk = $this->i2sdk->isdk; }    function wplb3r25() { $vwpls0hwb5 = array(); $vwplt53h7d = memberium_app()->wplznigw(); $vwpls0hwb5['nested'] = array( 'memb_is_after_tag_date' => array($vwplt53h7d, 'wplnpt1q'), 'memb_can_view_post' => array($vwplt53h7d, 'wplffo5i'), ); $vwpls0hwb5['standard'] = array( 'memb_achieve_goal' => 'wplmj7m6', 'memb_action_link' => 'wplfgo9jc', 'memb_add_fus' => 'wplff389', 'memb_affiliate_login' => 'wplv0eojg', 'memb_appname' => 'wplcqp1u', 'memb_client_login' => 'wplhsmxw', 'memb_feedurl' => 'wplpan_', 'memb_contact' => 'wplyuzbf', 'memb_do_shortcode' => 'wplrk4mut', 'memb_geoip' => 'wplxal5y8', 'memb_get_permalink' => 'wpluqri', 'memb_gravatar' => 'wplgmz9h', 'memb_hide' => 'wplb9vb3t', 'memb_infusion_id' => 'wplyirj', 'memb_is_autologin' => 'wplsn_m', 'memb_is_admin' => 'wplszsq', 'memb_is_app_connected' => 'wplk1_u', 'memb_is_appconnected' => 'wplk1_u', 'memb_is_logged_in' => 'wpli0jrxu', 'memb_is_not_admin' => 'wplszsq', 'memb_js_encode' => 'wplm07kmd', 'memb_language_dropdown' => 'wple4dn', 'memb_link_contacts' => 'wplb41kp', 'memb_list_logins' => 'wplst60', 'memb_loginform' => 'wplir4ak3', 'memb_member_listing' => 'wplty0zs', 'memb_order_info' => 'wplux3ad', 'memb_php' => 'wplgydh', 'memb_post_meta' => 'wplqc9x', 'memb_qrcode' => 'wpltqpr1k', 'memb_quotd' => 'wpl_yoc', 'memb_referral_contact' => 'wple34moe', 'memb_reset_feedurl' => 'wplia7fn8', 'memb_reset_password' => 'wplmzlnd', 'memb_show_receipt' => 'wplt5yn8o',  'memb_spiffy_checkout' => 'wplt70p', 'memb_timezone_dropdown' => 'wploy8cb', 'memb_user_levels' => 'wpl_4ln', 'memb_version' => 'wplrp3mib', 'memb_video_progress' => 'wpln3d1v', 'memb_wp_user' => 'wplwavw', ); return $vwpls0hwb5; } function wploj43() { $vwpls0hwb5 = $this->wplb3r25();  foreach ($vwpls0hwb5['standard'] as $vwpltmveju => $vwplmh6qr) { add_shortcode($vwpltmveju, array($this, $vwplmh6qr) ); }  foreach ($vwpls0hwb5['nested'] as $vwpltmveju => $vwplmh6qr) { add_shortcode($vwpltmveju, array($this, $vwplmh6qr[1]) ); for ($vwplt_5ro = 1; $vwplt_5ro < (int) $vwplmh6qr[0]; $vwplt_5ro++) { add_shortcode($vwpltmveju . $vwplt_5ro, array($this, $vwplmh6qr[1]) ); } } } function wplovnmyj() { $vwpls0hwb5 = $this->wplb3r25(); if (isset($vwpls0hwb5['standard']) && is_array($vwpls0hwb5['standard']) ) { foreach ($vwpls0hwb5['standard'] as $vwpltmveju => $vwplmh6qr) { remove_shortcode($vwpltmveju); } } if (isset($vwpls0hwb5['nested']) && is_array($vwpls0hwb5['nested']) ) { foreach ($vwpls0hwb5['nested'] as $vwpltmveju => $vwplmh6qr) { remove_shortcode($vwpltmveju); for ($vwplt_5ro = 1; $vwplt_5ro < (int) $vwplmh6qr[0]; $vwplt_5ro++) { remove_shortcode($vwpltmveju . $vwplt_5ro); } } } }     function wplt70p($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; } $vwplbypxr = wplz8bid::wplvf1d('settings', 'spiffy_subdomain'); if (empty($vwplbypxr) ) { if (is_super_admin() ) { return '<p style="color:red;font-weight:bold;">Spiffy Subdomain not defined.</p>'; } return; } if (is_super_admin() ) { return '<p style="color:red;font-weight:bold;">Spiffy Checkout not supported when logged in as Admin.</p>'; } $vwplgogvie = wp_get_current_user(); $vwplz4izhe = $vwplgogvie ? $vwplgogvie->user_email : ''; $vwplsb_pf = array( 'url' => '',  'omit_js' => false, ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); if ($vwplz4izhe) { $vwplvpexdn['url'] = $vwplvpexdn['url'] . '?email=' . urlencode($vwplz4izhe); } if (! $vwplvpexdn['omit_js']) { add_action('wp_footer', array($this, 'wplgd4e')); } return '<spiffy-checkout url="' . $vwplvpexdn['url'] . '"></spiffy-checkout>';   } function wplgd4e() { $vwplbypxr = wplz8bid::wplvf1d('settings', 'spiffy_subdomain'); if (empty($vwplbypxr)) { return; } echo '<script>
		"use strict";!function(t,e){var i=e.spiffy=e.spiffy||[];if(!i.init){
			if(i.invoked)return void(e.console&&console.error&&console.warn("Spiffy Elements included twice."))
			;i.invoked=!0,i.methods=["identify","config","reset","debug","off","on"],i.factory=function(t){
			return function(){var e=Array.prototype.slice.call(arguments);return e.unshift(t),i.push(e),i}},
			i.methods.forEach(function(t){spiffy[t]=i.factory(t)}),i.load=function(e){if(!spiffy.ACCOUNT){
			spiffy.ACCOUNT=e;var i=t.createElement("script");i.type="text/javascript",i.async=!0,
			i.crossorigin="anonymous",i.src="https://js.static.spiffy.co/spiffy.js?a="+e
			;var n=t.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n)}}}}(document,window),
			spiffy.SNIPPET_VERSION="1.0.2";

			spiffy.load("', $vwplbypxr, '");
		</script>'; } function wplrk4mut($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { return do_shortcode($vwplckl3); } function wplmj7m6($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; } $vwplvtmqd = wplsbzgvp::wplfhxj9(); if (! $vwplvtmqd) { return; } $vwplsb_pf = array( 'call_name' => '', 'debug' => false, 'integration' => wplz8bid::wplm3z9k('appname'), ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplvpexdn['call_name'] = trim($vwplvpexdn['call_name']); $vwplvpexdn['integration'] = trim($vwplvpexdn['integration']); if (empty($vwplvpexdn['call_name']) || empty($vwplvpexdn['integration']) ) { return; } $vwplvpexdn['debug'] = wplczvi98::wplbyhn($vwplvpexdn['debug'], false); if ($vwplvpexdn['debug']) { echo "Achieving Goal {$vwplvpexdn['integration']}:{$vwplvpexdn['call_name']}<br>"; } memberium_app()->wplge1yc6($vwplvpexdn['call_name'], $vwplvtmqd, $vwplvpexdn['integration']); } function wplfgo9jc($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; } $vwplvtmqd = wplsbzgvp::wplfhxj9(); $vwplsb_pf = array( 'action_ids' => '', 'debug' => 'no', 'fus_ids' => '', 'goals' => '', 'redirect' => '', 'tag_ids' => '', 'tagids' => '', 'tokens' => '', 'url' => get_site_url(), ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplvpexdn['debug'] = wplczvi98::wplbyhn($vwplvpexdn['debug'], false); if (is_super_admin() ) { return $vwplvpexdn['url']; } if (! $vwplvtmqd) { return $vwplvpexdn['url']; } $vwploia7_d = array( 'actionset' => $vwplvpexdn['action_ids'], 'contact_id' => $vwplvtmqd, 'debug' => $vwplvpexdn['debug'], 'fus' => $vwplvpexdn['fus_ids'], 'goals' => $vwplvpexdn['goals'], 'redirect' => $vwplvpexdn['redirect'], 'tags' => trim("{$vwplvpexdn['tagids']},{$vwplvpexdn['tag_ids']}", ','), 'tokens' => trim($vwplvpexdn['tokens']), ); $vwplun47e = base64_encode(serialize($vwploia7_d) ); $vwplfkojlf .= '?memb_actionlink=' . $vwplun47e; $vwplso1pw = 'verification'; $vwploia7_d = $vwplun47e; $vwplcv1j = wp_nonce_url($vwplfkojlf, $vwploia7_d, $vwplso1pw); return $vwplcv1j; } function wplff389($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; } $vwplvtmqd = wplsbzgvp::wplfhxj9(); if ($vwplvtmqd < 1) { return; } $vwplsb_pf = array( 'fus_id' => 0, 'fus_ids' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplmuc1x = trim($vwplvpexdn['fus_id'] . ',' . $vwplvpexdn['fus_ids'], ','); memberium_app()->wplz3_a($vwplmuc1x, $vwplvtmqd); } function wplv0eojg($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; } $vwplvtmqd = wplsbzgvp::wplfhxj9(); if (empty($vwplvtmqd) ) { return; } $vwplglvdw = wplz8bid::wplvf1d('settings', 'sync_affiliate'); if (empty($vwplglvdw) ) { return; } $vwplkafd = wplsbzgvp::wplc4na('affiliate.status'); $vwplsk5_cy = wplsbzgvp::wplc4na('affiliate.affcode'); $vwple0k7zs = wplsbzgvp::wplc4na('affiliate.password'); if (empty($vwplkafd) || empty($vwplsk5_cy) || empty($vwple0k7zs) ) { return; } static $vwplmo1dw = 1; $vwplw5rgd3 = wplz8bid::wplm3z9k('appname'); $vwplsb_pf = array( 'class' => '', 'label' => 'Open Affiliate Dashboard', 'style' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwpltlkdcw = ''; $vwpltlkdcw .= "<form name='memb_affiliate_login_{$vwplmo1dw}' id='memb_affiliate_login_{$vwplmo1dw}' action='https://{$vwplw5rgd3}.infusionsoft.com/j_spring_security_check' target='_blank' method='POST'>"; $vwpltlkdcw .= "<input type='hidden' name='Login' value='Login' />"; $vwpltlkdcw .= "<input type='hidden' name='j_username' value='" . $vwplsk5_cy . "' />"; $vwpltlkdcw .= "<input type='hidden' name='j_password' value='" . $vwple0k7zs . "' />"; $vwpltlkdcw .= "<input type='hidden' name='_spring_security_remember_me' value='1' />"; $vwpltlkdcw .= "<input type='submit' name='submit' value='{$vwplvpexdn['label']}' style='{$vwplvpexdn['style']}' class='{$vwplvpexdn['class']}' />"; $vwpltlkdcw .= "</form>"; $vwpltlkdcw .= "<script>document.forms['memb_affiliate_login_{$vwplmo1dw}'].submit();</script>"; $vwplmo1dw++; return $vwpltlkdcw; } function wplcqp1u($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'after' => '', 'before' => '', 'capture' => '', 'htmlattr' => '', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwpltlkdcw = htmlspecialchars(wplz8bid::wplm3z9k('appname') ); return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], $vwplvpexdn['htmlattr'], $vwplvpexdn['before'], $vwplvpexdn['after']); } function wplffo5i($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'after' => '', 'before' => '', 'capture' => '', 'htmlattr' => '', 'not' => '', 'post_id' => 0, 'postid' => 0, 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); if ($vwplvpexdn['post_id'] > 0) { $vwplvpexdn['postid'] = $vwplvpexdn['post_id']; } $vwplvpexdn['postid'] = empty($vwplvpexdn['postid']) ? (int) get_the_ID() : (int) $vwplvpexdn['postid']; $vwplvpexdn['not'] = ! empty($vwplvpexdn['not']); if (stripos($vwpluvdiz, '_not_') ) { $vwplvpexdn['not'] = true; } $vwpl_7hrws = false; if (is_super_admin() ) { $vwpl_7hrws = TRUE; } else { if ($vwplvpexdn['postid']) { $vwpl_7hrws = apply_filters('memberium_has_post_access', null, $vwplvpexdn['postid']); } } if ($vwplvpexdn['not']) { $vwpl_7hrws = ! $vwpl_7hrws; } $vwpltlkdcw = wplczvi98::wplivoi98($vwplckl3, $vwpluvdiz, true, $vwpl_7hrws); return wplczvi98::wplyhei6(true, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], $vwplvpexdn['htmlattr'], $vwplvpexdn['before'], $vwplvpexdn['after']); } function wplhsmxw($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if ( ! is_user_logged_in() ) { return; } if (is_feed() ) { return; } $vwplz4izhe = wplsbzgvp::wplc4na('email'); $vwplsjoas = wplsbzgvp::wplc4na('password'); if (empty($vwplz4izhe) || empty($vwplsjoas) ) { return; } $vwplsb_pf = array( 'css_id' => '', 'height' => 720, 'mode' => 'url',  'width' => 540, ); $vwplvpexdn = shortcode_atts( $vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplvpexdn['mode'] = strtolower(trim($vwplvpexdn['mode']));  $vwplw5rgd3 = wplz8bid::wplm3z9k('appname'); $vwplso40y9 = (int) $vwplvpexdn['height']; $vwplaqnhm = (int) $vwplvpexdn['width']; $vwplz4izhe = urlencode($vwplz4izhe); $vwplsjoas = urlencode($vwplsjoas); $vwpltlkdcw = ''; if ($vwplvpexdn['mode'] == 'iframe') { $vwpltlkdcw = '<iframe src="https://' . $vwplw5rgd3 . '.infusionsoft.com/ClientLogin/loginProcess.jsp?email=' . $vwplz4izhe . '&amp;password=' . $vwplsjoas . '&amp;Login=Login" width="720" height="540" frameborder="0" scrolling="auto"></iframe>'; } elseif ($vwplvpexdn['mode'] == 'url') { $vwpltlkdcw = 'https://' . $vwplw5rgd3 . '.infusionsoft.com/ClientLogin/loginProcess.jsp?email=' . $vwplz4izhe . '&password=' . $vwplsjoas . '&Login=Login'; } elseif ($vwplvpexdn['mode'] == 'link') { $vwpltlkdcw = '<a target="clientlogin" href="https://' . $vwplw5rgd3 . '.infusionsoft.com/ClientLogin/loginProcess.jsp?email=' . $vwplz4izhe . '&password=' . $vwplsjoas . '&Login=Login">Click Me</a>'; } elseif ($vwplvpexdn['mode'] == 'redirect') { } return $vwpltlkdcw; } function wplyuzbf($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; }  $vwplsb_pf = array( 'after' => '', 'before' => '', 'capture' => '', 'contact_id' => wplsbzgvp::wplfhxj9(), 'date_format' => '', 'default' => '', 'fields' => '', 'htmlattr' => '', 'separator' => ' ', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts( $vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplvtmqd = (int) $vwplvpexdn['contact_id'];  if (empty($vwplvpexdn['fields']) ) { return; } if ($vwplvtmqd <> wplsbzgvp::wplfhxj9() ) { $vwplj4rq_ = wpllbej::wplrande($vwplvtmqd, true); } else { $vwplj4rq_ = isset($_SESSION['memb_db_fields']) ? $_SESSION['memb_db_fields'] : array(); } $vwplfu1sbe = explode(',', $vwplvpexdn['fields']); $vwplx6yba = count($vwplfu1sbe); $vwple2rb_ = 0;  $vwpltlkdcw = ''; foreach ($vwplfu1sbe as $vwple2yn) { $vwple2yn = strtolower(trim($vwple2yn) ); if (isset($vwplj4rq_[$vwple2yn]) ) { $vwplpg5x = strtotime($vwplj4rq_[$vwple2yn]); if ($vwplvpexdn['date_format'] == '' || $vwplpg5x == 0) { $vwplb5yh = isset($vwplj4rq_[$vwple2yn]) ? htmlspecialchars($vwplj4rq_[$vwple2yn]) : ''; } else { $vwplb5yh = date($vwplvpexdn['date_format'], strtotime($vwplj4rq_[$vwple2yn]) ); } } else { $vwplb5yh = $vwplvpexdn['default']; } $vwpltlkdcw .= $vwplb5yh; if ($vwplx6yba > 1) { $vwpltlkdcw .= $vwplvpexdn['separator']; } } if ($vwplx6yba > 1 && strlen($vwplvpexdn['separator']) > 0) { $vwpltlkdcw = substr($vwpltlkdcw, 0, -strlen($vwplvpexdn['separator']) ); } return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], $vwplvpexdn['htmlattr'], $vwplvpexdn['before'], $vwplvpexdn['after']); } function wplpan_($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'mode' => 'plain', 'style' => 'color:#000;', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplmy0sa = wplutf3y::wplr4pur(); if ($vwplmy0sa) { $vwplx0qv = add_query_arg('rss_user', $vwplmy0sa, get_feed_link() ); } else { $vwplx0qv = get_feed_link(); } if ($vwplvpexdn['mode'] == 'input') { $vwplt_5ro = strlen($vwplx0qv); $vwplx0qv = '<input class="memberium_feed_url" style="' . $vwplvpexdn['style'] . '" value="' . $vwplx0qv . '" disabled="disabled" size="' . $vwplt_5ro * 0.9 . '">'; } elseif ($vwplvpexdn['mode'] == 'key') { $vwplx0qv = $vwplmy0sa; } return $vwplx0qv; } function wpluqri($vwplvpexdn, $content = NULL, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'after' => '', 'before' => '', 'capture' => '', 'htmlattr' => '', 'leavename' => 0, 'post_id' => 0, 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); if (substr(strtolower($vwplvpexdn['leavename']), 0, 1) == 'y') { $vwplvpexdn['leavename'] = 1; } if ($vwplvpexdn['post_id'] == 0) { $vwpltlkdcw = get_permalink(NULL, $vwplvpexdn['leavename']); } else { $vwpltlkdcw = get_permalink($vwplvpexdn['post_id'], $vwplvpexdn['leavename']); } return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], $vwplvpexdn['htmlattr'], $vwplvpexdn['before'], $vwplvpexdn['after']); } function wplxal5y8($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; }   $vwplsb_pf = array( 'after' => '', 'before' => '', 'capture' => '', 'default' => '', 'field' => 'country_name', 'htmlattr' => '', 'ip_address' => wpll72jhi::wplol_bad(), 'provider' => '', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplvpexdn['provider'] = strtolower(trim($vwplvpexdn['provider']) ); $vwplvpexdn['field'] = strtolower(trim($vwplvpexdn['field']) ); $vwplvpexdn['ip_address'] = empty($vwplvpexdn['ip_address']) ? wpll72jhi::wplol_bad() : $vwplvpexdn['ip_address']; $vwpli0fuq = wplr6om::wpld7onq($vwplvpexdn['ip_address'], $vwplvpexdn['provider']); if ($vwplvpexdn['field'] == 'country') $vwplvpexdn['field'] = 'country_name'; if ($vwplvpexdn['field'] == 'province') $vwplvpexdn['field'] = 'region_name'; if ($vwplvpexdn['field'] == 'region') $vwplvpexdn['field'] = 'region_name'; if ($vwplvpexdn['field'] == 'state') $vwplvpexdn['field'] = 'region_name'; $vwplph268z = isset($vwpli0fuq[$vwplvpexdn['field']]) ? $vwpli0fuq[$vwplvpexdn['field']] : $vwplvpexdn['default']; $vwpltlkdcw = htmlspecialchars($vwplph268z); return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], $vwplvpexdn['htmlattr'], $vwplvpexdn['before'], $vwplvpexdn['after']); } function wplgmz9h($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'alt' => '', 'capture' => '', 'class' => 'memberium-gravatar', 'default' => '', 'email' => wplsbzgvp::wplc4na('email'), 'rating' => 'g', 'size' => 32, 'title' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplvpexdn['size'] = ( (int) $vwplvpexdn['size'] < 1) ? 32 : (int) $vwplvpexdn['size']; if ($vwplvpexdn['size'] > 2048) { $vwplvpexdn['size'] = 2048; } if (empty($vwplvpexdn['email']) && is_user_logged_in() ) { $vwplgogvie = wp_get_current_user(); $vwplvpexdn['email'] = $vwplgogvie->user_email; } $vwplvpexdn['email'] = strtolower(trim($vwplvpexdn['email']) ); $vwplyh3w = '//www.gravatar.com/avatar/' . md5($vwplvpexdn['email']) . '.jpg?s=' . (int) $vwplvpexdn['size']; $vwplyh3w .= ($vwplvpexdn['default'] > '') ? '&d=' . urlencode($vwplvpexdn['default']) : ''; $vwplyh3w .= ($vwplvpexdn['rating'] > '') ? '&r=' . urlencode($vwplvpexdn['rating']) : ''; $vwplckl3 = '<img src="' . $vwplyh3w . '" border="0" alt="' . esc_attr($vwplvpexdn['alt']) . '" title="' . esc_attr($vwplvpexdn['title']). '" height="' . esc_attr($vwplvpexdn['size']) . '" width="' . esc_attr($vwplvpexdn['size']) . '" class="' . $vwplvpexdn['class'] . '"/>'; return wplczvi98::wplyhei6(false, $vwplckl3, '', $vwplvpexdn['capture'], '', '', ''); } function wplb9vb3t($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') {    return ''; } function wplyirj($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'after' => '', 'before' => '', 'capture' => '', 'htmlattr' => '', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwpltlkdcw = wplsbzgvp::wplfhxj9(); return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], '', $vwplvpexdn['before'], $vwplvpexdn['after']); } function wplnpt1q($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; }  $vwplglvdw = wplz8bid::wplvf1d('settings', 'sync_tag_details'); if (empty($vwplglvdw) ) { return; } global $wpdb; $vwpltalx = false; $vwplsb_pf = array( 'after' => '', 'before' => '', 'capture' => '', 'contact_id' => wplsbzgvp::wplfhxj9(), 'days' => '', 'debug' => false, 'hours' => '', 'htmlattr' => '', 'interval' => '', 'months' => '', 'tag_id' => '', 'txtfmt' => '', 'weeks' => '', 'years' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplvpexdn['interval'] = (empty($vwplvpexdn['hours']) ) ? $vwplvpexdn['interval'] : $vwplvpexdn['interval'] . " {$vwplvpexdn['hours']} hours "; $vwplvpexdn['interval'] = (empty($vwplvpexdn['days']) ) ? $vwplvpexdn['interval'] : $vwplvpexdn['interval'] . " {$vwplvpexdn['days']} days "; $vwplvpexdn['interval'] = (empty($vwplvpexdn['weeks']) ) ? $vwplvpexdn['interval'] : $vwplvpexdn['interval'] . " {$vwplvpexdn['weeks']} weeks "; $vwplvpexdn['interval'] = (empty($vwplvpexdn['months']) ) ? $vwplvpexdn['interval'] : $vwplvpexdn['interval'] . " {$vwplvpexdn['months']} months "; $vwplvpexdn['interval'] = (empty($vwplvpexdn['years']) ) ? $vwplvpexdn['interval'] : $vwplvpexdn['interval'] . " {$vwplvpexdn['years']} years "; if (empty($vwplvpexdn['contact_id']) || empty($vwplvpexdn['tag_id']) ||empty($vwplvpexdn['interval']) ) { return; }  $vwplpg5x = time(); $vwplw5rgd3 = wplz8bid::wplm3z9k('appname'); $vwplx1ap5_ = 'SELECT `created` FROM `' . MEMBERIUM_DB_CONTACTTAGS . '` WHERE `appname` = %s AND `contactid` = %d AND `tagid` = %d ;'; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $vwplw5rgd3, $vwplvpexdn['contact_id'], $vwplvpexdn['tag_id']); $vwplvlrn4 = strtotime($wpdb->get_var($vwplx1ap5_) . ' + ' . $vwplvpexdn['interval']); $vwpltalx = $vwplpg5x >= $vwplvlrn4; if (empty($vwplvlrn4) ) { return; } $vwpltlkdcw = wplczvi98::wplivoi98($vwplckl3, $vwpluvdiz, true, $vwpltalx); return wplczvi98::wplyhei6(true, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], $vwplvpexdn['htmlattr'], $vwplvpexdn['before'], $vwplvpexdn['after']); } function wplk1_u($vwplvpexdn, $vwplckl3 = NULL, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'capture' => '', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplyio4f = wpllbej::wplgyias(); $vwpltlkdcw = wplczvi98::wplivoi98($vwplckl3, $vwpluvdiz, true, $vwplyio4f); return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], '', '', ''); } function wplsn_m($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwpld6djfw = false; if (is_user_logged_in() ) { $vwpld6djfw = isset($_SESSION['memb_user']['autologin']) ? (bool) (int) $_SESSION['memb_user']['autologin'] : false; } $vwpltlkdcw = wplczvi98::wplivoi98($vwplckl3, $vwpluvdiz, true, $vwpld6djfw); return wplczvi98::wplyhei6(false, $vwpltlkdcw); } function wpluurn2k($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'capture' => '', 'htmlattr' => '', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwpln709eo = wplixy6zk::wpluuiq(); $vwpltlkdcw = wplczvi98::wplcwqgvf($vwplckl3, $vwpln709eo, $vwpluvdiz); return wplczvi98::wplyhei6(true, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], $vwplvpexdn['htmlattr'], $before, $after); } function wplszsq($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'capture' => '', 'not' => '', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplvpexdn['not'] = ! empty($vwplvpexdn['not']); if ($vwpluvdiz == 'memb_is_not_admin') { $vwplvpexdn['not'] = true; } $vwplbje3ox = is_super_admin(); if ($vwplvpexdn['not']) { $vwplbje3ox = ! $vwplbje3ox; } $vwpltlkdcw = wplczvi98::wplivoi98($vwplckl3, $vwpluvdiz, true, $vwplbje3ox); return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], '', '', ''); } function wpli0jrxu($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'capture' => '', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplyio4f = is_user_logged_in(); $vwpltlkdcw = wplczvi98::wplivoi98($vwplckl3, $vwpluvdiz, true, $vwplyio4f); return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], '', '', ''); } function wplm07kmd($vwplvpexdn, $vwplckl3 = NULL, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwpltlkdcw = ''; if (! empty($vwplckl3) ) { $vwpltlkdcw = '<script type="text/javascript"> document.write(atob("' . substr(base64_encode($vwplckl3), 0, -2) . '" + "==") ); </script>'; } return $vwpltlkdcw; } function wple4dn($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; } $vwplsb_pf = array( 'field' => 'language', 'default' => '', 'only' => '', 'except' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplvpexdn['field'] = strtolower($vwplvpexdn['field']); $vwplvpexdn['only'] = array_map('strtolower', array_filter(array_map('trim', explode(',', $vwplvpexdn['only']) ) ) ); $vwplvpexdn['except'] = array_map('strtolower', array_filter(array_map('trim', explode(',', $vwplvpexdn['except']) ) ) ); $vwplj2163g = wplsbzgvp::wplc4na($vwplvpexdn['field'], $vwplvpexdn['default']); $vwpln709eo = wplixy6zk::wpljq03ck(); $vwplmfi48k = (boolean) count($vwplvpexdn['only']); $vwplcna94f = (boolean) count($vwplvpexdn['except']); $vwpln709eo = apply_filters('memberium_language_class_list', $vwpln709eo);  if (empty($vwplj2163g) ) { $vwplvpexdn['default'] = wplsbzgvp::wplc4na('languages', $vwplvpexdn['default']); } if ($vwplmfi48k || $vwplcna94f) { foreach($vwpln709eo as $vwply17edn => $vwplx42j) { $vwplx42j = strtolower($vwplx42j); if ($vwplj2163g <> $vwplx42j) { if ($vwplmfi48k && ! in_array($vwplx42j, $vwplvpexdn['only']) ) { unset($vwpln709eo[$vwply17edn]); } if ($vwplx42j <> $vwplcna94f && in_array($vwplx42j, $vwplvpexdn['except']) ) { unset($vwpln709eo[$vwply17edn]); } } } } unset($vwplx42j, $vwplvpexdn['except'], $vwplvpexdn['only'], $vwplcna94f, $vwplmfi48k); $vwpltlkdcw = ''; foreach ($vwpln709eo as $vwplbm4v2y => $vwplfw5s) { $vwpltlkdcw .= '<option value="' . $vwplbm4v2y . '" ' . ( ($vwplj2163g == strtolower($vwplbm4v2y) ) ? ' selected ' : ' ') . '>' . $vwplfw5s . '</option>'; } unset($vwplbm4v2y, $vwplfw5s); return $vwpltlkdcw; } function wplb41kp($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; } extract(shortcode_atts(array( 'contact_id1' => wplsbzgvp::wplfhxj9(), 'contact_id2' => 0, 'link_type' => 0, ), $vwplvpexdn, 'memberium') ); $result = $this->isdk->linkContacts($vwplvpexdn['contact_id1'], $vwplvpexdn['contact_id2'], $vwplvpexdn['link_type']); return; } function wplst60($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (! is_user_logged_in() ) { return; } global $wpdb; $vwplsb_pf = array( 'count' => 10, 'date_format' => 'F d, Y', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplvpexdn['count'] = empty($vwplvpexdn['count']) ? 10 : (int) $vwplvpexdn['count']; $vwplgogvie = wp_get_current_user(); $vwplc_uoh4 = $vwplgogvie->user_login; $vwplw5rgd3 = wplz8bid::wplm3z9k('appname'); $vwpltlkdcw = ''; if (empty($vwplckl3) ) { $vwplckl3 = '%%logintime%% - %%ipaddress%%<br />'; } $vwplx1ap5_ = "SELECT `logintime`, `ipaddress` FROM `" . MEMBERIUM_DB_LOGINLOG . "` WHERE `username` = '{$vwplc_uoh4}' AND `appname` = '{$vwplw5rgd3}' ORDER BY `logintime` DESC "; if ($vwplvpexdn['count']) { $vwplx1ap5_ .= ' LIMIT '. $vwplvpexdn['count']; } $vwply4j8x = $wpdb->get_results($vwplx1ap5_, ARRAY_A); if (is_array($vwply4j8x) ) { foreach($vwply4j8x as $vwplheakg) { $vwplm1zxha = $vwplckl3; $vwplm1zxha = str_ireplace('%%logintime%%', date($vwplvpexdn['date_format'], $vwplheakg['logintime']), $vwplm1zxha); $vwplm1zxha = str_ireplace('%%ipaddress%%', $vwplheakg['ipaddress'], $vwplm1zxha); $vwpltlkdcw .= $vwplm1zxha; } } return $vwpltlkdcw; } function wplir4ak3($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (is_feed() ) { return; } $vwplsb_pf = array( 'button_label' => 'Log In', 'form_id' => 'loginform', 'password_label' => 'Password:', 'redirect' => '', 'remember_label' => 'Remember Me', 'show' => '',  'username_label' => 'Username:', 'remember' => false, ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplphvy = ! empty($vwplvpexdn['show']); if (is_user_logged_in() && ! $vwplphvy) { if (is_super_admin() ) { return '<p>' . _x('Logged in as Admin', 'memb_loginform', 'memberium') . '</p>'; } return; } if (! empty($_GET['redirect_to']) ) { $vwplvpexdn['redirect'] = $_GET['redirect_to']; } else { $vwplvpexdn['redirect'] = get_admin_url(); } if (is_user_logged_in() && ! $vwplphvy) { return; } $vwplgitq = array( 'echo' => false, 'form_id' => $vwplvpexdn['form_id'], 'label_log_in' => $vwplvpexdn['button_label'], 'label_password' => $vwplvpexdn['password_label'], 'label_remember' => $vwplvpexdn['remember_label'], 'label_username' => $vwplvpexdn['username_label'], 'redirect' => $vwplvpexdn['redirect'], 'remember' => $vwplvpexdn['remember'], ); $vwplyio4f = "<!-- Memberium-WordPress Login Form -->\n"; if (isset($_GET['login']) && $_GET['login'] == 'failed') { $vwplji8av = memberium_app()->login_error; if (! empty($vwplji8av) ) { $vwplyio4f .= '<p class="memberium-login-error">' . _x($vwplji8av, 'memb_loginform', 'memberium') . '</p>'; } else { $vwplyio4f .= '<p class="memberium-login-error">' . _x('Login Failed', 'memb_loginform', 'memberium') . '</p>'; } } $vwplyio4f .= wp_login_form($vwplgitq); return $vwplyio4f; } function wplty0zs($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; } $vwplsb_pf = array( 'id' => '', 'roles' => '', 'tag_id' => '', 'count' => 10, 'order' => 'ASC', 'order_by' => 'display_name', 'order_by' => 'memb_email', 'offset' => 0, ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplvpexdn['order'] = strtoupper(trim($vwplvpexdn['order']) ); $vwplvpexdn['order_by'] = strtolower(trim($vwplvpexdn['order_by']) ); $vwpltlkdcw = ''; if (empty($vwplckl3) ) { } $vwplvpexdn['roles'] = trim($vwplvpexdn['roles']); if (! empty($vwplvpexdn['roles']) ) { $vwplvpexdn['roles'] = explode(',', $vwplvpexdn['roles']); $vwplvpexdn['roles'] = array_map('trim', $vwplvpexdn['roles']); $vwplvpexdn['roles'] = array_map('strtolower', $vwplvpexdn['roles']); $vwplvpexdn['roles'] = array_filter($vwplvpexdn['roles']); } else { $vwplvpexdn['roles'] = array(); } $vwpls0hwb5 = trim($vwplvpexdn['tag_id']); if (! empty($vwpls0hwb5) ) { $vwpls0hwb5 = explode(',', $vwpls0hwb5); $vwpls0hwb5 = array_map('trim', $vwpls0hwb5); $vwpls0hwb5 = array_map('strtolower', $vwpls0hwb5); $vwpls0hwb5 = array_filter($vwpls0hwb5); $vwplxdc9 = implode('|', $vwpls0hwb5); } else { $vwplxdc9 = ''; }  $vwplfh4eu = array( array( array( 'key' => 'memb_FirstName', 'compare' => '>', 'value' => '', ), array( 'key' => 'infusionsoft_user_id', 'compare' => '>', 'value' => 0, ), array( 'key' => 'memb_Groups', 'compare' => 'REGEXP', 'value' => '[^0-9]*(' . $vwplxdc9 . ')[^0-9]*', ), ), ); $vwplgitq = array( 'fields' => 'all', 'meta_key' => $vwplvpexdn['order_by'], 'meta_query' => $vwplfh4eu, 'order' => $vwplvpexdn['order'], 'orderby' => 'meta_value', 'orderby' => $vwplvpexdn['order_by'], 'roles__in' => $vwplvpexdn['roles'], 'number' => (int) $vwplvpexdn['count'], 'offset' => (int) $vwplvpexdn['offset'],  ); if (! empty($vwplvpexdn['roles']) ) { $vwplgitq['role__in'] = explode(',', $vwplvpexdn['roles']); } $vwplwcre = get_users($vwplgitq); $vwpluyfu = count($vwplwcre); foreach($vwplwcre as $vwplopnf => $vwplgogvie) { $vwpllzly5b = $vwplgogvie->data->ID; $vwplvtmqd = $vwplgogvie->infusionsoft_user_id; $vwplwcre[$vwplopnf]->contact_fields = wpllbej::wplrande($vwplvtmqd, true); } $vwplr2fgeu = false !== stripos($vwplckl3, '%%contact.'); $vwplrvqz2 = false !== stripos($vwplckl3, '%%role.'); $vwplv0akzi = false !== stripos($vwplckl3, '%%user.'); $vwplfw40h = false !== stripos($vwplckl3, '%%meta.'); $vwplqqwj = false !== stripos($vwplckl3, '%%capability.'); $vwplm3ex97 = array( 'ID', 'user_nicename', 'user_url', 'user_registered', 'user_status', 'display_name' ); if (isset($vwplwcre[0]->data->contact_fields[$vwplvpexdn['order_by']]) ) { usort($vwplwcre, function($u1, $u2) use ($vwplvpexdn) { $v1 = $u1->data->contact_fields[$vwplvpexdn['order_by']]; $v2 = $u2->data->contact_fields[$vwplvpexdn['order_by']]; return ($vwplvpexdn['order'] == 'ASC') ? strnatcasecmp($v1, $v2) : strnatcasecmp($v2, $v1); }); } if (is_array($vwplwcre) ) { $vwplw95_k2 = 0; foreach($vwplwcre as $vwplgogvie) { $vwplzxhjbg = $vwplckl3; $vwplvtmqd = $vwplgogvie->infusionsoft_user_id; $vwplrp9u24 = wpllbej::wplrande($vwplvtmqd); if (is_array($vwplrp9u24) && ! empty($vwplrp9u24['Email']) ) { $vwplw95_k2++; if ($vwplr2fgeu) { foreach($vwplrp9u24 as $vwply17edn => $vwplph268z) { $vwplzxhjbg = str_ireplace('%%contact.' . $vwply17edn . '%%', $vwplph268z, $vwplzxhjbg); } } if ($vwplrvqz2) { foreach($vwplgogvie->roles as $vwply17edn => $vwplph268z) { $vwplzxhjbg = str_ireplace('%%role.' . $vwply17edn . '%%', $vwplph268z, $vwplzxhjbg); } } if ($vwplfw40h) { $vwplzxhjbg = str_ireplace('%%meta.ipaddress%%', $vwplgogvie->login_ip_address, $vwplzxhjbg); $vwplzxhjbg = str_ireplace('%%meta.login_count%%', (int) $vwplgogvie->login_count, $vwplzxhjbg); } if ($vwplv0akzi) { foreach($vwplm3ex97 as $vwply17edn) { $vwplzxhjbg = str_ireplace('%%user.' . $vwply17edn . '%%', $vwplgogvie->data->$vwply17edn, $vwplzxhjbg); } } $vwpltlkdcw = preg_replace('/(%%\S+%%)/', '', $vwpltlkdcw); $vwpltlkdcw .= $vwplzxhjbg; } } } $vwpltlkdcw = do_shortcode($vwpltlkdcw); return $vwpltlkdcw; } function wplf8ahd2($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') {   return; } function wplux3ad($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; }  $vwplsb_pf = array( 'field' => 'invoicetotal', 'order_id' => isset($_GET['orderId']) ? $_GET['orderId'] : 0, 'refresh' => false, ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplvpexdn['refresh'] = wplczvi98::wplbyhn($vwplvpexdn['refresh'], false); $vwplvpexdn['field'] = strtolower(trim($vwplvpexdn['field']) );  if (! $vwplvpexdn['refresh']) { if (empty($vwplvpexdn['order_id']) ) { return; } }  $vwplyh4870 = array( 'Contact0Email', 'inf_field_Email', ); foreach($vwplyh4870 as $vwple2yn) { if (empty($vwplz4izhe) ) { $vwplz4izhe = empty($_GET[$vwple2yn]) ? '' : $_GET[$vwple2yn]; } } if (empty($vwplz4izhe) ) { $vwplz4izhe = isset($_SESSION['memb_db_fields']['email']) ? $_SESSION['memb_db_fields']['email'] : ''; } if (empty($vwplz4izhe) ) { return 0; } $vwplvtmqd = memberium_app()->wplckwp7($vwplz4izhe); if (empty($vwplvtmqd) ) { return 0; } if ($vwplvpexdn['refresh']) { if (! $vwplvtmqd) { return; } } if ($vwplvpexdn['refresh'] || (memberium_app()->wplfq39() < $vwplvpexdn['order_id']) ) { memberium_app()->wplblz7(); } if ($vwplvpexdn['refresh']) { $vwplvpexdn['order_id'] = memberium_app()->wplapzv($vwplvtmqd); } $vwplu2wa = memberium_app()->wplde7m6($vwplvtmqd); $vwplospm43 = array( 'invoicetotal' => 0, 'totaldue' => 0, 'totalpaid' => 0, ); if (is_array($vwplu2wa) ) { foreach($vwplu2wa as $vwpl_z_dl) { if ($vwpl_z_dl['JobId'] == $vwplvpexdn['order_id']) { $vwplospm43['invoicetotal'] = $vwplospm43['invoicetotal'] + $vwpl_z_dl['InvoiceTotal']; $vwplospm43['totaldue'] = $vwplospm43['totaldue'] + $vwpl_z_dl['TotalDue']; $vwplospm43['totalpaid'] = $vwplospm43['totalpaid'] + $vwpl_z_dl['TotalPaid']; } } } return isset($vwplospm43[$vwplvpexdn['field']]) ? $vwplospm43[$vwplvpexdn['field']] : 0; } function wplgydh($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; } $vwplsb_pf = array( 'capture' => '', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplckl3 = trim($vwplckl3); ob_start(); try { eval($vwplckl3); } catch (Throwable $vwplzm5eg) { if (is_super_admin() ) { $vwplcq9y = $vwplzm5eg->getMessage(); $vwplyl7x = $vwplzm5eg->getLine(); $vwplcltpy = $GLOBALS['post']->ID; $vwplygr2 = "Memberium Error in [{$vwpluvdiz}] shortcode:  {$vwplcq9y} at line {$vwplyl7x} in post ID {$vwplcltpy}"; error_log($vwplygr2); echo "<p><span style='color:red;font-weight:bold;'>Script Error:  </span>{$vwplygr2}</p>"; } } unset($vwplckl3); $vwpltlkdcw = ob_get_contents(); ob_end_clean(); return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], '', '', ''); } function wplqc9x($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'after' => '', 'before' => '', 'capture' => '', 'date_format' => '', 'default' => '', 'fields' => '', 'htmlattr' => '', 'post_id' => get_the_ID(), 'separator' => ' ', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium');  if ($vwplvpexdn['post_id'] < 1) { return; } if ($vwplvpexdn['fields'] = '') { return; } $vwplfu1sbe = explode(',', $vwplvpexdn['fields']); $vwplx6yba = count($vwplfu1sbe); $vwple2rb_ = 0; $vwplzzlf5b = get_post($vwplvpexdn['post_id']);  $vwpltlkdcw = ''; foreach ($vwplfu1sbe as $vwple2yn) { $vwplhlyd1 = get_post_meta($vwplvpexdn['post_id'], $vwple2yn, TRUE); if (! empty($vwplhlyd1) ) { $vwplpg5x = strtotime($vwplhlyd1); if ($vwplvpexdn['date_format'] == '' || $vwplpg5x == 0) { $vwplnghzs1 = $vwplhlyd1; } else { $vwplnghzs1 = date($vwplvpexdn['date_format'], strtotime($vwplhlyd1) ); } } elseif (! empty($vwplzzlf5b->$vwple2yn) ) { $vwplnghzs1 = $vwplzzlf5b->$vwple2yn; } else { $vwplnghzs1 = $vwplvpexdn['default']; } $vwpltlkdcw .= $vwplnghzs1; if ($vwplx6yba > 1) { $vwpltlkdcw .= $vwplvpexdn['separator']; } } if ($vwplx6yba > 1 && strlen($vwplvpexdn['separator']) > 0) { $vwpltlkdcw = substr($vwpltlkdcw, 0, -strlen($vwplvpexdn['separator']) ); } return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], $vwplvpexdn['htmlattr'], $vwplvpexdn['before'], $vwplvpexdn['after']); } function wpltqpr1k($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; }    static $vwplujgd = 0; $vwplsb_pf = array( 'id' => '', 'size' => 256, 'data' => trim($vwplckl3), 'style' => '', 'class' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); if (empty($vwplvpexdn['data']) ) { return; } $vwplujgd++; $vwplas73j = empty($vwplvpexdn['id']) ? 'qrcode_' . $vwplujgd : $vwplvpexdn['id']; $vwplvpexdn['style'] = "width:{$vwplvpexdn['size']}px;height:{$vwplvpexdn['size']}px; display:block; {$vwplvpexdn['style']}"; wp_enqueue_script('jquery-qrcode', 'https://cdnjs.cloudflare.com/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js', null, memberium_app()->wplnm1h(), true); $vwpltlkdcw = "<p><div id=\"{$vwplas73j}\" style=\"{$vwplvpexdn['style']}\" class=\"{$vwplvpexdn['class']}\"></div></p>"; $vwpltlkdcw .= '
			<script>
			jQuery(document).ready(function() {
				jQuery("#' . $vwplas73j . '").qrcode({
					text : "' . $vwplvpexdn['data'] . '",
					height : "' . $vwplvpexdn['size'] . '",
					width : "' . $vwplvpexdn['size'] . '"
				});
			});
			</script>'; return $vwpltlkdcw; }  function wpl_yoc($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; }    $vwplsb_pf = array( 'after' => '', 'before' => '', 'capture' => '', 'feedurl' => 'http://feeds.feedburner.com/brainyquote/QUOTEBR', 'htmlattr' => '', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwpltlkdcw = ''; if ($vwplvpexdn['feedurl'] > '') {  $vwplkgi0k4 = fetch_feed($vwplvpexdn['feedurl']);  $vwplgebncp = $vwplkgi0k4->get_item_quantity(1); $vwplgc5nmy = $vwplkgi0k4->get_items(0, $vwplgebncp); $vwpltlkdcw = '<span class="memberium_quotd_quote">' . $vwplgc5nmy[0]->get_description() . '<span> ' . '<span class="memberium_quotd_attribution">' . $vwplgc5nmy[0]->get_title() . '<span>'; } return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], $vwplvpexdn['htmlattr'], $vwplvpexdn['before'], $vwplvpexdn['after']); } function wple34moe($vwplvpexdn, $vwplckl3 = NULL, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'after' => '', 'before' => '', 'capture' => '', 'date_format' => '', 'default' => '', 'fields' => '', 'htmlattr' => '', 'separator' => ' ', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium');  $vwplvtmqd = memberium_app()->wpldti9(); $vwplg_xkl = memberium_app()->wplajl70($vwplvtmqd); if ($vwplg_xkl) { $vwplqnsa = memberium_app()->wplre8ug3($vwplg_xkl); $vwplvtmqd = isset($vwplqnsa['ContactId']) ? (int) $vwplqnsa['ContactId'] : 0; } else { $vwplvtmqd = 0; } if ($vwplvtmqd < 1) { return; }  if (empty($vwplvpexdn['fields']) ) { return; } if ($vwplvtmqd <> wplsbzgvp::wplfhxj9() ) { $vwplj4rq_ = wpllbej::wplrande($vwplvtmqd, true); } else { $vwplj4rq_ = $_SESSION['memb_db_fields']; } $vwplfu1sbe = explode(',', $vwplvpexdn['fields']); $vwplx6yba = count($vwplfu1sbe); $vwple2rb_ = 0;  $vwpltlkdcw = ''; foreach ($vwplfu1sbe as $vwple2yn) { $vwple2yn = strtolower(trim($vwple2yn) ); if (isset($vwplj4rq_[$vwple2yn]) ) { $vwplpg5x = strtotime($vwplj4rq_[$vwple2yn]); if ($vwplvpexdn['date_format'] == '' || $vwplpg5x == 0) { $vwplnghzs1 = isset($vwplj4rq_[$vwple2yn]) ? $vwplj4rq_[$vwple2yn] : ''; } else { $vwplnghzs1 = date($vwplvpexdn['date_format'], strtotime($vwplj4rq_[$vwple2yn]) ); } } else { $vwplnghzs1 = $vwplvpexdn['default']; } $vwpltlkdcw .= $vwplnghzs1; if ($vwplx6yba > 1) { $vwpltlkdcw .= $vwplvpexdn['separator']; } } if ($vwplx6yba > 1 && strlen($vwplvpexdn['separator']) > 0) { $vwpltlkdcw = substr($vwpltlkdcw, 0, -strlen($vwplvpexdn['separator']) ); } return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], $vwplvpexdn['htmlattr'], $vwplvpexdn['before'], $vwplvpexdn['after']); } function wplia7fn8($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; } static $vwplyqfz = 0; $vwplsb_pf = array( 'css_class' => '', 'style' => '', 'button_text' => 'Get New RSS URL', 'button_url' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplyqfz++; $vwpluj8al3 = 'memb_resetfeedurl_button-' . $vwplyqfz; $vwplcf6y18 = 'memb_resetfeedurl_button_' . $vwplyqfz; $vwpld576f2 = '<form method="post" action="">'; $vwpld576f2 .= "<input type='hidden' name='memb_form_type' value='memb_resetfeedurl_button'>"; $vwpld576f2 .= "<input type='hidden' name='form_id' value='{$vwplyqfz}'>"; $vwpld576f2 .= wp_nonce_field("memb_resetfeedurl_{$vwplyqfz}", '_wpnonce', true, false); if (empty($vwplvpexdn['button_url']) ) { $vwpld576f2 .= "<input type=\"submit\" class=\"{$vwplvpexdn['css_class']}\" id=\"{$vwplcf6y18}\" value=\"{$vwplvpexdn['button_text']}\">"; } else { $vwpld576f2 .= "<input type=\"image\" src=\"{$vwplvpexdn['button_url']}\" class=\"{$vwplvpexdn['css_class']}\" id=\"{$vwplcf6y18}\" >"; } $vwpld576f2 .= '</form>'; return $vwpld576f2; } function wplmzlnd($vwplvpexdn, $vwplckl3 = NULL, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; }   if (is_user_logged_in() ) { return; } if (is_feed() ) { return; } static $vwplyqfz = 0; $vwplsb_pf = array( 'send_button_text' => 'Reset Password', 'template_id' => 0, 'update_button_text' => 'Update Password', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplvpexdn['template_id'] = (int) $vwplvpexdn['template_id']; $vwplyqfz = $vwplyqfz + 1; $vwpld576f2 = ''; if (isset($_GET['action']) && isset($_GET['key']) && isset($_GET['login']) ) { $vwplgogvie = check_password_reset_key($_GET['key'], $_GET['login']); if ('WP_User' == get_class($vwplgogvie) ) { $vwpld576f2 .= '<form method="post" action="./">'; $vwpld576f2 .= wp_nonce_field('memb_reset_password_' . $vwplyqfz, '_wpnonce', true, false); $vwpld576f2 .= '<input type="hidden" name="form_id" value="' . $vwplyqfz . '">'; $vwpld576f2 .= '<input type="hidden" name="memb_form_type" value="memb_reset_password">'; $vwpld576f2 .= '<input type="hidden" name="key" value="' . $_GET['key'] . '">'; $vwpld576f2 .= '<input type="hidden" name="login" value="' . $_GET['login'] . '">'; $vwpld576f2 .= '<label>Enter Your New Password:</label><input type="password" name="password1" placeholder="New Password" size="30"><br />'; $vwpld576f2 .= '<label>Confirm Your New Password:</label><input type="password" name="password2" placeholder="New Password" size="30"><br />'; $vwpld576f2 .= '<input type="submit" value="' . $vwplvpexdn['update_button_text'] . '">'; $vwpld576f2 .= '</form>'; } else { $vwpld576f2 .= '<p>Invalid / Expired Link</p>'; } } else { $vwplg6lz4 = base64_encode(serialize(array( 'template_id' => $vwplvpexdn['template_id'], ) ) ); $vwpltmfi = memberium_app()->wpln4nyq2($vwplg6lz4); $vwpld576f2 .= '<form method="post">'; $vwpld576f2 .= wp_nonce_field('memb_reset_password_' . $vwplyqfz, '_wpnonce', true, false); $vwpld576f2 .= '<input type="hidden" name="form_id" value="' . $vwplyqfz . '">'; $vwpld576f2 .= '<input type="hidden" name="memb_form_type" value="memb_reset_password">'; $vwpld576f2 .= '<input type="hidden" name="params" value="' . $vwplg6lz4 . '">'; $vwpld576f2 .= '<input type="hidden" name="signature" value="' . $vwpltmfi . '">'; $vwpld576f2 .= '<label>Your Login Email:</label><input type="email" name="email" placeholder="Your Email Address" size="30"><br />'; $vwpld576f2 .= '<input type="submit" value="' . $vwplvpexdn['send_button_text'] . '">'; $vwpld576f2 .= '</form>'; } return $vwpld576f2; } function wplt5yn8o($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; }    $vwpltlkdcw = ''; $vwplsb_pf = array( 'invoice_id' => isset($_GET['invoice_id']) ? (int) $_GET['invoice_id'] : 0, 'contact_id' => wplsbzgvp::wplfhxj9(), 'date_format' => 'F j, Y', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplgitq = array( 'invoice_id' => $vwplvpexdn['invoice_id'], 'contact_id' => $vwplvpexdn['contact_id'], ); $vwplu9qk02 = memberium_app()->wplxjyl9($vwplgitq); if (is_array($vwplu9qk02) ) { $vwplg2bf = get_option('memberium_invoice_template', false); $vwpltlkdcw .= '<div class="memberium-order-receipt">'; if (! empty($vwplg2bf['header']) ) { $vwpltlkdcw .= $vwplg2bf['header']; } if (isset($vwplu9qk02['orderitems']) && is_array($vwplu9qk02['orderitems']) ) { foreach($vwplu9qk02['orderitems'] as $vwplm1dqej) { $vwplzxhjbg = $vwplg2bf['items']; $vwplzxhjbg = str_ireplace('%%item.cpu%%', number_format($vwplm1dqej['cpu'], 2), $vwplzxhjbg); $vwplzxhjbg = str_ireplace('%%item.ppu%%', number_format($vwplm1dqej['ppu'], 2), $vwplzxhjbg); foreach($vwplm1dqej as $vwply17edn => $vwplph268z) { $vwplzxhjbg = str_ireplace('%%item.' . $vwply17edn . '%%', $vwplph268z, $vwplzxhjbg); } $vwplzxhjbg = str_ireplace('%%receipt.subtotal%%', number_format($vwplm1dqej['ppu'] * $vwplm1dqej['qty'], 2), $vwplzxhjbg); $vwpltlkdcw .= $vwplzxhjbg; } } $vwpltlkdcw .= $vwplg2bf['pre_payments']; foreach($vwplu9qk02['payments'] as $vwpliry9fz) { $vwplzxhjbg = $vwplg2bf['payments']; $vwplzxhjbg = str_ireplace('%%payment.paydate%%', date($vwplvpexdn['date_format'], strtotime($vwpliry9fz['paydate']) ), $vwplzxhjbg); $vwplzxhjbg = str_ireplace('%%payment.payamt%%', number_format($vwpliry9fz['payamt'], 2), $vwplzxhjbg); foreach($vwpliry9fz as $vwply17edn => $vwplph268z) { $vwplzxhjbg = str_ireplace('%%payment.' . $vwply17edn . '%%', $vwplph268z, $vwplzxhjbg); } $vwpltlkdcw .= $vwplzxhjbg; } $vwpltlkdcw .= $vwplg2bf['pre_scheduled'];  foreach($vwplu9qk02['paymentplanitems'] as $vwpliry9fz) { $vwplzxhjbg = $vwplg2bf['scheduled']; $vwplzxhjbg = str_ireplace('%%scheduled.datedue%%', date($vwplvpexdn['date_format'], strtotime($vwpliry9fz['datedue']) ), $vwplzxhjbg); $vwplzxhjbg = str_ireplace('%%scheduled.amtdue%%', number_format($vwpliry9fz['amtdue'], 2), $vwplzxhjbg); $vwplzxhjbg = str_ireplace('%%scheduled.amtpaid%%', number_format($vwpliry9fz['amtpaid'], 2), $vwplzxhjbg); foreach($vwpliry9fz as $vwply17edn => $vwplph268z) { $vwplzxhjbg = str_ireplace('%%scheduled.' . $vwply17edn . '%%', $vwplph268z, $vwplzxhjbg); } $vwpltlkdcw .= $vwplzxhjbg; } $vwpltlkdcw .= $vwplg2bf['footer']; $vwpltlkdcw .= '</div>'; if (! empty($vwplu9qk02['job']) ) { $vwpltlkdcw = str_ireplace('%%order.datecreated%%', date($vwplvpexdn['date_format'], strtotime($vwplu9qk02['job']['datecreated']) ), $vwpltlkdcw); $vwpltlkdcw = str_ireplace('%%order.duedate%%', date($vwplvpexdn['date_format'], strtotime($vwplu9qk02['job']['duedate']) ), $vwpltlkdcw); } if (! empty($vwplu9qk02['invoice']) ) { $vwpltlkdcw = str_ireplace('%%invoice.datecreated%%', date($vwplvpexdn['date_format'], strtotime($vwplu9qk02['invoice']['datecreated']) ), $vwpltlkdcw); $vwpltlkdcw = str_ireplace('%%invoice.overdue%%', number_format($vwplu9qk02['invoice']['totaldue'] - $vwplu9qk02['invoice']['totalpaid'], 2), $vwpltlkdcw); $vwpltlkdcw = str_ireplace('%%invoice.invoicetotal%%', number_format($vwplu9qk02['invoice']['invoicetotal'], 2), $vwpltlkdcw); $vwpltlkdcw = str_ireplace('%%invoice.totalpaid%%', number_format($vwplu9qk02['invoice']['totalpaid'], 2), $vwpltlkdcw); } if (is_array($vwplu9qk02['invoice']) ) { foreach($vwplu9qk02['invoice'] as $vwply17edn => $vwplph268z) { $vwpltlkdcw = str_ireplace('%%invoice.' . $vwply17edn . '%%', $vwplph268z, $vwpltlkdcw); } } if (is_array($vwplu9qk02['contact']) ) { foreach($vwplu9qk02['contact'] as $vwply17edn => $vwplph268z) { $vwpltlkdcw = str_ireplace('%%contact.' . $vwply17edn . '%%', $vwplph268z, $vwpltlkdcw); } } if (isset($vwplu9qk02['job']) && is_array($vwplu9qk02['job']) ) { foreach($vwplu9qk02['job'] as $vwply17edn => $vwplph268z) { $vwpltlkdcw = str_ireplace('%%order.' . $vwply17edn . '%%', $vwplph268z, $vwpltlkdcw); } } $vwpltlkdcw = apply_filters('memberium_show_receipt', $vwpltlkdcw, $vwplu9qk02);  $vwpltlkdcw = preg_replace('/(%%\S+%%)/', '', $vwpltlkdcw); } else { } return do_shortcode($vwpltlkdcw); } function wploy8cb($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; } $vwplsb_pf = array( 'default' => 'America/Los_Angeles', 'except' => '', 'field' => 'timezone', 'only' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplvpexdn['field'] = strtolower($vwplvpexdn['field']); $vwplvpexdn['only'] = array_map('strtolower', array_filter(array_map('trim', explode(',', $vwplvpexdn['only']) ) ) ); $vwplvpexdn['except'] = array_map('strtolower', array_filter(array_map('trim', explode(',', $vwplvpexdn['except']) ) ) ); $vwplvvoq = strtolower(trim (wplsbzgvp::wplc4na($vwplvpexdn['field'], $vwplvpexdn['default']) ) ); if (empty($vwplvvoq) ) {   } $vwpler8lsy = wplh389cr::wpljbrjk(); $vwplmfi48k = (boolean) count($vwplvpexdn['only']); $vwplcna94f = (boolean) count($vwplvpexdn['except']); $vwpler8lsy = apply_filters('memberium_time_classzone_list', $vwpler8lsy); if ($vwplmfi48k || $vwplcna94f) { foreach($vwpler8lsy as $vwply17edn => $vwplkw6x) { $vwplkw6x = strtolower($vwplkw6x); if ($vwplvvoq <> $vwplkw6x) { if ($vwplmfi48k && ! in_array($vwplkw6x, $vwplvpexdn['only']) ) { unset($vwpler8lsy[$vwply17edn]); } if ($vwplkw6x <> $vwplcna94f && in_array($vwplkw6x, $vwplvpexdn['except']) ) { unset($vwpler8lsy[$vwply17edn]); } } } } unset($vwplkw6x, $vwplvpexdn['except'], $vwplvpexdn['only'], $vwplcna94f, $vwplmfi48k); $vwpltlkdcw = ''; foreach ($vwpler8lsy as $vwplenx5 => $vwplqljc9w) { $vwpltlkdcw .= '<option value="' . $vwplenx5 . '" ' . ( ($vwplvvoq == strtolower($vwplenx5) ) ? ' selected ' : ' ') . '>' . $vwplqljc9w . '</option>'; } unset($vwplenx5, $vwplqljc9w); return $vwpltlkdcw; } function wpl_4ln($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'after' => '', 'alt' => 'No membership levels found.', 'before' => '', 'capture' => '', 'format' => '<li>%%membershipname%% (%%tagid%%)</li>', 'htmlattr' => '', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwplc0nobe = isset($_SESSION) ? $_SESSION : array(); if (! empty($vwplc0nobe['memb_user']['membership_tags']) ) { $vwplcr3c9 = explode(',', $vwplc0nobe['memb_user']['membership_tags']); $vwpltlkdcw = ''; $vwpls0hwb5 = wplj_l2t::wplaajf(); $vwplgxrbm = wplz8bid::wplvf1d('memberships'); foreach ($vwplcr3c9 as $vwpleanth) { $vwpltlkdcw .= str_ireplace('%%tagid%%', $vwpleanth, $vwplvpexdn['format']); $vwpltlkdcw = str_ireplace('%%tagname%%', $vwpls0hwb5['mc'][$vwpleanth], $vwpltlkdcw); $vwpltlkdcw = str_ireplace('%%membershiplevel%%', $vwplgxrbm[$vwpleanth]['level'], $vwpltlkdcw); $vwpltlkdcw = str_ireplace('%%membershipname%%', $vwplgxrbm[$vwpleanth]['name'], $vwpltlkdcw); } } else { $vwpltlkdcw = $vwplvpexdn['alt']; } return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], $vwplvpexdn['htmlattr'], $vwplvpexdn['before'], $vwplvpexdn['after']); } function wplrp3mib($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'after' => '', 'before' => '', 'capture' => '', 'htmlattr' => '', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); $vwpltlkdcw = memberium_app()->wplnm1h() . ( (MEMBERIUM_BETA === 1) ? 'beta' : ''); return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], $vwplvpexdn['htmlattr'], $vwplvpexdn['before'], $vwplvpexdn['after']); } function wpln3d1v($vwplvpexdn, $vwplckl3 = null, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } if (is_feed() ) { return; }  if (current_user_can('manage_options') || !is_user_logged_in() ) { return; } if (!function_exists('wplj7pw') ){ include_once MEMBERIUM_LIB_DIR . '/shortcodes/video-progress/video-progress.php'; } wplj7pw()->wpl_ryx($vwplvpexdn); return; } function wplwavw($vwplvpexdn, $vwplckl3 = NULL, $vwpluvdiz = '') { if (! wpln9_s::wplq6kurm() ) { return; } $vwplsb_pf = array( 'after' => '', 'before' => '', 'capture' => '', 'default' => '', 'fieldname' => '', 'htmlattr' => '', 'txtfmt' => '', ); $vwplvpexdn = shortcode_atts($vwplsb_pf, $vwplvpexdn, 'memberium'); if (empty($vwplvpexdn['fieldname']) ) { return; } $vwplgogvie = wp_get_current_user(); $vwple2yn = $vwplvpexdn['fieldname']; $vwpltlkdcw = $vwplgogvie->$vwple2yn; if (empty($vwpltlkdcw) ) { $vwpltlkdcw = $vwplvpexdn['default']; } return wplczvi98::wplyhei6(false, $vwpltlkdcw, $vwplvpexdn['txtfmt'], $vwplvpexdn['capture'], $vwplvpexdn['htmlattr'], $vwplvpexdn['before'], $vwplvpexdn['after']); }    function wplt314() { $vwplhx8pj = strtolower($_POST['memb_form_type']); $vwplfdf6 = array( 'memb_reset_password' => 'wpllwqx1', ); if (array_key_exists($vwplhx8pj, $vwplfdf6)) { $vwplqwfy = $vwplfdf6[$vwplhx8pj]; $this->$vwplqwfy(); } } function wplaqop4() { if (! wp_verify_nonce($_GET['verification'], $_GET['memb_actionlink']) ) { return; } $vwploia7_d = unserialize(base64_decode($_GET['memb_actionlink']) ); $vwplwwytci = $vwploia7_d['debug']; $vwplvtmqd = (int) wplsbzgvp::wplfhxj9(); if ($vwplwwytci) { echo '<pre>'; echo __LINE__, " - Set ActionSet = {$vwploia7_d['actionset']}<br />"; echo __LINE__, " - Set ContactId = {$vwploia7_d['contact_id']}<br />"; echo __LINE__, " - Set FUS       = {$vwploia7_d['fus']}<br />"; echo __LINE__, " - Set Goals     = {$vwploia7_d['goals']}<br />"; echo __LINE__, " - Set Tags      = {$vwploia7_d['tags']}<br />"; echo __LINE__, " - Set Tokens    = {$vwploia7_d['tokens']}<br />"; echo __LINE__, " - Set Redirect  = {$vwploia7_d['redirect']}<br />"; } if ($vwplvtmqd) { if (! empty($vwploia7_d['actionset']) ) { memberium_app()->wplmupt($vwploia7_d['actionset'], $vwplvtmqd); } if (! empty($vwploia7_d['fus']) ) { memberium_app()->wplz3_a($vwploia7_d['fus'], $vwplvtmqd); } if (! empty($vwploia7_d['goals']) ) { memberium_app()->wplge1yc6($vwploia7_d['goals'], $vwplvtmqd); } if (! empty($vwploia7_d['tags']) ) { memberium_app()->wplt263_($vwploia7_d['tags'], $vwplvtmqd); } } if (! empty($vwploia7_d['tokens']) ) { memberium_app()->wplwuo3z8($vwploia7_d['tokens']); } memberium_app()->wplj9ye($vwplvtmqd); memberium_app()->wpln6xe($vwplvtmqd); do_action('memberium_populate_session', false); if ($vwplwwytci) { echo print_r($_SESSION['memb_db_fields'], true); echo '<a href="', $vwploia7_d['redirect'], '">', _x('Continue...', 'memb_action_link', 'memberium'), '</a>'; if ($vwplwwytci) echo '</pre>'; exit; } if ($vwploia7_d['redirect'] > '') { wplpwn3::wplbryv(); wp_redirect($vwploia7_d['redirect']); exit; } } function wpllwqx1() { if (! wp_verify_nonce($_POST['_wpnonce'], 'memb_reset_password_' . $_POST['form_id'] . $_POST['parameters']) ) { wp_die(_x('Security Check Failed - Nonce Validation Error', 'memb_change_password', 'memberium') ); exit; } if (is_user_logged_in() ) { return; } if (! wp_verify_nonce($_POST['_wpnonce'], 'memb_reset_password_' . $_POST['form_id']) ) { wp_die(_x('Invalid Password Reset Request', 'memb_reset_password', 'memberium') ); exit; } global $wpdb; $vwplg6lz4 = unserialize(base64_decode($_POST['params']) ); if (! empty($_POST['email']) ) { $vwplgogvie = get_user_by('email', $_POST['email']); if ($vwplgogvie) { global $wp; $vwply17edn = get_password_reset_key($vwplgogvie); $vwplxsih = $vwplgogvie->data->user_login; $vwplgitq = array( 'action' => 'rp', 'key' => $vwply17edn, 'login' => $vwplxsih, ); $vwplfkojlf = home_url(add_query_arg($vwplgitq, $wp->request) ); if ($vwplg6lz4['template_id']) { $vwplyimp = memberium_app()->wpla41nh2($vwplg6lz4['template_id']); $vwplyimp['textBody'] = str_ireplace('~Memberium.ResetURL~', $vwplfkojlf, $vwplyimp['textBody']); $vwplyimp['htmlBody'] = str_ireplace('~Memberium.ResetURL~', $vwplfkojlf, $vwplyimp['htmlBody']); $vwplj9dl = array(wpllbej::wplbmo_1($vwplgogvie->ID) ); $this->isdk->sendEmail($vwplj9dl, $vwplyimp['fromAddress'], $vwplyimp['toAddress'], '', '', $vwplyimp['contentType'], $vwplyimp['subject'], $vwplyimp['htmlBody'], $vwplyimp['txtBody']); } else { $vwplv1x4 = apply_filters('memberium_password_reset_to_email', $vwplgogvie->data->user_email); $vwplja03u = apply_filters('memberium_password_reset_subject', 'Password Reset Email'); $vwplygr2 = "Dear ~Contact.FirstName~,\n\nHere is your requested Password Reset Link:\n\n~Memberium.ResetURL~\n\n"; $vwplygr2 = apply_filters('memberium_password_reset_wpmail_body', $vwplygr2); $vwplygr2 = str_ireplace('~Memberium.ResetURL~', $vwplfkojlf, $vwplygr2); $vwplygr2 = str_ireplace('~Contact.FirstName~', $vwplgogvie->first_name, $vwplygr2); wp_mail($vwplv1x4, $vwplja03u, $vwplygr2); } } else {  } } elseif ($_POST['password2'] == $_POST['password1']) { $vwplt9si2 = true; if (empty($_POST['password1']) || empty($_POST['password2']) ) { $vwplt9si2 = false; } if (strlen($_POST['password1']) < wplz8bid::wplvf1d('settings', 'min_password_length') ) { $vwplt9si2 = false; } $vwplgogvie = check_password_reset_key($_POST['key'], $_POST['login']); if ('WP_User' == get_class($vwplgogvie) ) { $vwplvtmqd = wpllbej::wplbmo_1($vwplgogvie->ID); $vwpljgiyo = wp_hash_password($_POST['password1']); $wpdb->query("UPDATE `" . $wpdb->users . "` SET `user_pass` = '{$vwpljgiyo}' WHERE `ID` = '{$vwplgogvie->ID}';"); if ($vwplvtmqd) {  $vwplh1d50 = wplz8bid::wplvf1d('settings', 'local_auth_only'); if (empty($vwplh1d50) ) { $vwplup7mi = wplz8bid::wplvf1d('settings', 'password_field'); $vwplv09c = array( $vwplup7mi => $_POST['password1'], ); $this->isdk->updateCon($vwplvtmqd, $vwplv09c);   $vwplw5rgd3 = wplz8bid::wplm3z9k('appname'); $vwpla54ov0 = MEMBERIUM_DB_CONTACTS; $vwplup7mi = $vwplup7mi; $vwplx1ap5_ = "UPDATE {$vwpla54ov0} SET `value` = '%s' WHERE id = %d AND `appname` = '%s' AND `fieldname` = '%s'; "; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $password, $vwplvtmqd, $vwplw5rgd3, $vwplup7mi); $vwplyio4f = $wpdb->query($vwplx1ap5_); } }  get_password_reset_key($vwplgogvie); } else {  } } }    function wploys8j0($atts, $content = null, $code = '') { }    private $shortcodes_registered = false; private $core; private $i2sdk; private $isdk; function __construct() { static $vwplkp4j = false; if ($vwplkp4j) { return; } $vwplkp4j = true; $this->wploj43(); $this->wplicnz(); } function wplicnz() { add_action('init', array($this, 'wplf5yc6') ); add_action('wplss4f', array($this, 'wploj43') ); add_action('memberium_remove_shortcodes', array($this, 'wplovnmyj') );  if (! empty($_POST['memb_form_type']) ) { add_action('template_redirect', array($this, 'wplt314'), 1); } if (isset($_GET['memb_actionlink']) && isset($_GET['verification']) ) { add_action('init', array($this, 'wplaqop4') ); } } }
