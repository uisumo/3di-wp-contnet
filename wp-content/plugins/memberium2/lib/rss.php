<?php
/**
 * Copyright (c) 2012-2020 David J Bullock
 * Web Power and Light, LLC
 * https://webpowerandlight.com
 * support@webpowerandlight.com
 *
 */

 if (! defined('ABSPATH') ) { die(); } final class wplutf3y { private static $key_prefix = 'memberium/rss_user_id'; private function __construct() { } function wplci0l($vwplgogvie = null) { $vwpllzly5b = (is_object($vwplgogvie) && get_class($vwplgogvie) == 'WP_User') ? $vwplgogvie->ID : (int) $vwplgogvie; $vwpllzly5b = ($vwpllzly5b) ? $vwpllzly5b : get_current_user_id(); if ($vwpllzly5b) { global $wpdb; $vwpltalx = false; $vwplx8ia = 0; do { $vwplag9vm = wp_generate_password(18, false, false); if (! self::wplxg_ea($vwplag9vm) ) {  $vwplyct0 = self::$key_prefix; $vwply17edn = self::$key_prefix . '/' . $vwplag9vm; update_user_meta($vwpllzly5b, $vwply17edn, $vwplag9vm); update_user_meta($vwpllzly5b, self::$key_prefix, $vwplag9vm); $vwpltalx = true; } } while ($vwpltalx == false);  $vwplx1ap5_ = "DELETE FROM `{$wpdb->usermeta}` WHERE `user_id` = %d AND `meta_key` <> %s AND "; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $vwpllzly5b, $vwply17edn); $vwplx1ap5_ .= " `meta_key` LIKE '{$vwplyct0}%' "; $wpdb->query($vwplx1ap5_); do_action('memberium/rssid/set', $vwpllzly5b); } if ($vwplyio4f) { return $rss_user_id; } else { return false; } } static function wpluvs5z() { add_action('do_feed_atom_comments', array(__CLASS__, 'wplpcju0'), 1); add_action('do_feed_atom', array(__CLASS__, 'wplpcju0'), 1); add_action('do_feed_rdf', array(__CLASS__, 'wplpcju0'), 1); add_action('do_feed_rss', array(__CLASS__, 'wplpcju0'), 1); add_action('do_feed_rss2_comments', array(__CLASS__, 'wplpcju0'), 1); add_action('do_feed_rss2', array(__CLASS__, 'wplpcju0'), 1); add_action('do_feed', array(__CLASS__, 'wplpcju0'), 1); remove_action('wp_head', 'feed_links_extra', 3); remove_action('wp_head', 'feed_links', 2); remove_action('wp', 'bp_activity_action_favorites_feed', 3); remove_action('wp', 'bp_activity_action_friends_feed', 3); remove_action('wp', 'bp_activity_action_mentions_feed', 3); remove_action('wp', 'bp_activity_action_my_groups_feed', 3); remove_action('wp', 'bp_activity_action_personal_feed', 3); remove_action('wp', 'bp_activity_action_sitewide_feed', 3); remove_action('wp', 'groups_action_group_feed', 3); } static function wplddjn3($vwplob9i24, $vwplv80sz) { $vwpldryf2 = isset($_GET['rss_user']) ? $_GET['rss_user'] : ''; if ($vwpldryf2) { if (is_feed() ) { $vwpllzly5b = (int) self::wplxg_ea($vwpldryf2); if ($vwpllzly5b) { if (wp_set_current_user($vwpllzly5b) ) {  do_action('memberium/rssid/rsslogin/', $vwpllzly5b); } } } } return $vwplob9i24; } static function wplr4pur($vwplgogvie = null) { $vwpllzly5b = (is_object($vwplgogvie) && get_class($vwplgogvie) == 'WP_User') ? $vwplgogvie->ID : (int) $vwplgogvie; $vwpllzly5b = ($vwpllzly5b) ? $vwpllzly5b : get_current_user_id(); if ($vwpllzly5b) { $vwplag9vm = get_user_meta($vwpllzly5b, self::$key_prefix, true); global $wpdb; $vwplyct0 = self::$key_prefix; $vwplx1ap5_ = "SELECT `meta_value` FROM `{$wpdb->usermeta}` WHERE `user_id` = %d AND "; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $vwpllzly5b); $vwplx1ap5_ .= " `meta_key` LIKE '{$vwplyct0}/%' ORDER BY `umeta_id` ASC LIMIT 1"; $vwplmy0sa = $wpdb->get_var($vwplx1ap5_); if (empty($vwplmy0sa) ) { $vwplmy0sa = self::wplci0l($vwpllzly5b); } } if ($vwplmy0sa) { return $vwplmy0sa; } return false; } static function wplvo3ur($vwplgogvie = null) { $vwpllzly5b = (is_object($vwplgogvie) && get_class($vwplgogvie) == 'WP_User') ? $vwplgogvie->ID : (int) $vwplgogvie; $vwpllzly5b = ($vwpllzly5b) ? $vwpllzly5b : get_current_user_id(); if ($vwpllzly5b) { global $wpdb; $key_prefix = self::$key_prefix; $vwplx1ap5_ = "DELETE FROM `{$wpdb->usermeta}` WHERE `user_id` = %d AND "; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $vwpllzly5b, $vwply17edn); $vwplx1ap5_ .= " `meta_key` LIKE '{$key_prefix}/%' "; $wpdb->query($vwplx1ap5_); do_action('memberium/rssid/reset/', $vwpllzly5b); return true; } return false; } private static function wplxg_ea($vwpldryf2 = '') { global $wpdb; $vwpldryf2 = sanitize_text_field($vwpldryf2); $vwply17edn = self::$key_prefix . '/' . $vwpldryf2; $vwplx1ap5_ = "SELECT `user_id` FROM `{$wpdb->usermeta}` WHERE `meta_key` = %s AND `meta_value` = %s ORDER BY `user_id` ASC LIMIT 1"; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $vwply17edn, $vwpldryf2); $vwpllzly5b = (int) $wpdb->get_var($vwplx1ap5_); return $vwpllzly5b; } static function wplpcju0() { wp_die(__('No feed available, please visit our homepage.') ); } }
