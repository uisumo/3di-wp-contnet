<?php
if ( ! defined( 'ABSPATH' ) ) { die(); } final class wplwwre6t { private $core = null; function __construct() { add_action('admin_init', array( $this, 'wplc0xf8' ) ); add_filter('/wpal/blocks/gutenberg/settings/omitted_blocks', array($this, 'wple9u3n') );  } function wplc0xf8() { $vwplcltpy = isset( $_GET['post'] ) ? $_GET['post'] : 0; if ( $vwplcltpy == 0 ) { $vwplcltpy = isset( $_POST['post_ID'] ) ? $_POST['post_ID'] : 0; } if ( $vwplcltpy > 0 ) { $vwplo43m = get_post_type( $vwplcltpy ); } if ( empty( $vwplo43m ) ) { $vwplo43m = isset( $_GET['post_type'] ) ? $_GET['post_type'] : 'post'; } $vwpln6heim = array( 'groups', 'sfwd-courses', 'sfwd-lessons', 'sfwd-topic', 'sfwd-quiz', 'sfwd-certificates', ); if ( in_array( $vwplo43m, $vwpln6heim ) || substr( $vwplo43m, 0, 5 ) == 'sfwd-' ) { add_meta_box( 'is4wp-learndash-actions', 'LearnDash Memberium Integration', array( $this, 'wplxnvbl' ), $vwplo43m, 'side' ); } add_action('save_post', array( $this, 'wplbrsg' ) ); } function wplxnvbl() { global $post; $vwply4fkhi = array(); $vwplq_4y = get_post_meta( $post->ID ); $vwplv7a_9m = array( '_is4wp_learndash_achievement', '_is4wp_learndash_actions', '_is4wp_learndash_assignment_approved_actions', '_is4wp_learndash_assignment_approved_tags', '_is4wp_learndash_assignment_upload_actions', '_is4wp_learndash_assignment_upload_tags', '_is4wp_learndash_autoenroll', '_is4wp_learndash_autojoin', '_is4wp_learndash_badges', '_is4wp_learndash_fail_actions', '_is4wp_learndash_fail_goals', '_is4wp_learndash_fail_tags', '_is4wp_learndash_goals', '_is4wp_learndash_orientation', '_is4wp_learndash_pdfformat', '_is4wp_learndash_redirect', '_is4wp_learndash_shortcodes', '_is4wp_learndash_tags', ); foreach( $vwplv7a_9m as $vwply17edn ) { if ( isset( $vwplq_4y[$vwply17edn][0] ) ) { $vwply4fkhi[$vwply17edn] = $vwplq_4y[$vwply17edn][0]; } else { $vwply4fkhi[$vwply17edn] = ''; } } unset( $metas, $vwplv7a_9m, $vwply17edn ); wp_nonce_field( MEMBERIUM_LIB, 'memberium_membershipaccess_nonce' ); if ( $post->post_type == 'sfwd-certificates' ) { echo '<p>Certificate PDF Format</p>'; echo '<label for="_is4wp_learndash_pdfformat">' . _e( "Page Size", 'memberium' ) . ':</label> '; echo '<select name="_is4wp_learndash_pdfformat" id="_is4wp_learndash_pdfformat">'; $vwplydvw0 = array( '' => 'Default', 'A4_EXTRA' => 'A4 Extra', 'A4_LONG' => 'A4 Long', 'A4_SUPER' => 'A4 Super', 'A4' => 'A4', 'GOVERNMENTLETTER' => 'Government Letter', 'LETTER' => 'US Letter', 'PA4' => 'PA4', 'RA4' => 'RA4', 'SRA4' => 'SRA4', 'SUPER_A4' => 'Super A4', ); foreach( $vwplydvw0 as $vwplk0h3p9 => $vwplso1pw ) { echo '<option value="', $vwplk0h3p9, '" ', ( $vwply4fkhi['learndash_pdfformat'] == $vwplk0h3p9 ? ' selected="selected" ' : '' ) , '>', $vwplso1pw, '</option>'; } unset( $vwplk0h3p9, $vwplso1pw ); echo '</select><br /><br />'; echo '<label for="_is4wp_learndash_orientation">' . _e( "Page Orientation", 'memberium' ) . ':</label> '; echo '<select name="_is4wp_learndash_orientation" id="_is4wp_learndash_orientation">'; $vwplydvw0 = array( '' => 'Automatic', 'L' => 'Landscape', 'P' => 'Portrait', ); foreach( $vwplydvw0 as $vwplk0h3p9 => $vwplso1pw ) { echo '<option value="', $vwplk0h3p9, '" ', ( $vwply4fkhi['learndash_orientation'] == $vwplk0h3p9 ? ' selected="selected" ' : '' ) , '>', $vwplso1pw, '</option>'; } echo '</select><br /><br />'; } $vwplwih5 = array( 'sfwd-courses', 'sfwd-lessons', 'sfwd-quiz', 'sfwd-topic', ); if ( in_array( $post->post_type, $vwplwih5 ) ) {  if ( in_array( $post->post_type, array( 'sfwd-courses', 'sfwd-courses' ) ) ) { echo '<label for="_is4wp_learndash_autoenroll">', _e( "AutoEnroll Tags", 'memberium' ), ':</label> '; echo '<input name="_is4wp_learndash_autoenroll" class="tag-selector" style="width:100%; max-width:100%" value="', ( $vwply4fkhi['_is4wp_learndash_autoenroll'] > '' ? $vwply4fkhi['_is4wp_learndash_autoenroll'] : '' ), '"><br /><br />'; }  echo '<p>On completion of this section, execute the following actions:</p>'; echo '<label for="_is4wp_learndash_goals">' . _e( "Achieve these Goals", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_goals" style="width:100%; max-width:100%" value="', ( $vwply4fkhi['_is4wp_learndash_goals'] > '' ? $vwply4fkhi['_is4wp_learndash_goals'] : '' ), '"><br /><br />'; echo '<label for="_is4wp_learndash_tags">' . _e( "Apply these Tags", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_tags" class="tag-selector" style="width:100%; max-width:100%" value="', ( $vwply4fkhi['_is4wp_learndash_tags'] > '' ? $vwply4fkhi['_is4wp_learndash_tags'] : '' ), '"><br /><br />'; echo '<label for="_is4wp_learndash_actions">' . _e( "Run this Actionset", 'memberium' ) . ':</label> '; echo '<select class="actionset-selector" name="_is4wp_learndash_actions" style="width:100%; max-width:100%">'; echo '<option value="0">(No Actions)</option>'; $vwplewhxt_ = memberium_app()->wpletmsz(); foreach ( $vwplewhxt_ as $vwpleklnhm=>$vwplp1g6b ) { echo '<option value="', $vwpleklnhm, '" ', ( $vwply4fkhi['_is4wp_learndash_actions'] == $vwpleklnhm ? ' selected="selected" ' : '' ) , '>', $vwplp1g6b, '</option>'; } unset( $vwpleklnhm, $vwplp1g6b ); echo '</select>'; echo '<br /><br />'; if ( $post->post_type == 'sfwd-quiz' ) { echo '<p>If the student <strong style="color:red;">fails</strong> this test, execute the following actions:</p>'; echo '<label for="_is4wp_learndash_fail_goals">' . _e( "Achieve these Goals", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_fail_goals" style="width:100%; max-width:100%" value="', ( $vwply4fkhi['_is4wp_learndash_fail_goals'] > '' ? $vwply4fkhi['_is4wp_learndash_fail_goals'] : '' ), '"><br /><br />'; echo '<label for="_is4wp_learndash_fail_tags">' . _e( "Apply these Tags", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_fail_tags" class="tag-selector" style="width:100%; max-width:100%" value="', ( $vwply4fkhi['_is4wp_learndash_fail_tags'] > '' ? $vwply4fkhi['_is4wp_learndash_fail_tags'] : '' ), '"><br /><br />'; echo '<label for="_is4wp_learndash_fail_actions">' . _e( "Run this Actionset", 'memberium' ) . ':</label> '; echo '<select class="actionset-selector" name="_is4wp_learndash_fail_actions" style="width:100%; max-width:100%">'; echo '<option value="0">(No Actions)</option>'; foreach ( $vwplewhxt_ as $vwpleklnhm=>$vwplp1g6b ) { echo '<option value="', $vwpleklnhm, '" ', ( $vwply4fkhi['_is4wp_learndash_fail_actions'] == $vwpleklnhm ? ' selected="selected" ' : '' ) , '>', $vwplp1g6b, '</option>'; } echo '</select>'; } unset( $vwplewhxt_, $vwpleklnhm, $vwplp1g6b );  $vwple4jt = memberium_app()->wpla2myl(); if ( ! empty( $vwple4jt ) ) { echo '<label for="_is4wp_learndash_achievement">' . _e( "Award this Achievement", 'memberium' ) . ':</label> '; echo '<select class="actionset-selector" name="_is4wp_learndash_achievement" style="width:100%; max-width:100%">'; echo '<option value="0">(No Achievement)</option>'; foreach ( $vwple4jt as $vwplhvka=>$vwpltoyi ) { echo '<option value="', $vwplhvka, '" ', ( $vwply4fkhi['_is4wp_learndash_achievement'] == $vwplhvka ? ' selected="selected" ' : '' ) , '>', $vwpltoyi, '</option>'; } unset( $vwplhvka, $vwpltoyi ); echo '</select>'; echo '<br /><br />'; }  if ( in_array( $post->post_type, array( 'sfwd-courses' ) ) ) { echo '<label for="_is4wp_learndash_redirect">' . _e( "Redirect to", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_redirect" style="width:100%; max-width:100%" value="', ( $vwply4fkhi['_is4wp_learndash_redirect'] > '' ? $vwply4fkhi['_is4wp_learndash_redirect'] : '' ), '"><br /><br />'; } } if ( in_array( $post->post_type, array( 'groups' ) ) ) { echo '<label for="_is4wp_learndash_autojoin">' . _e( "Group Auto-Join Tags", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_autojoin" class="tag-selector" style="width:100%; max-width:100%" value="', ( $vwply4fkhi['_is4wp_learndash_autojoin'] > '' ? $vwply4fkhi['_is4wp_learndash_autojoin'] : '' ), '"><br /><br />'; } } function wplbrsg( $vwplcltpy ) {  if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) { return; }  if ( empty( $_POST['memberium_membershipaccess_nonce'] ) || ! wp_verify_nonce( $_POST['memberium_membershipaccess_nonce'], MEMBERIUM_LIB ) ) { return; } if ( ! current_user_can( 'edit_posts', $vwplcltpy ) ) { return; } $vwplv7a_9m = array( '_is4wp_learndash_achievement', '_is4wp_learndash_actions', '_is4wp_learndash_assignment_approved_actions', '_is4wp_learndash_assignment_approved_tags', '_is4wp_learndash_assignment_upload_actions', '_is4wp_learndash_assignment_upload_tags', '_is4wp_learndash_autoenroll', '_is4wp_learndash_autojoin', '_is4wp_learndash_badges', '_is4wp_learndash_fail_actions', '_is4wp_learndash_fail_goals', '_is4wp_learndash_fail_tags', '_is4wp_learndash_goals', '_is4wp_learndash_orientation', '_is4wp_learndash_pdfformat', '_is4wp_learndash_redirect', '_is4wp_learndash_shortcodes', '_is4wp_learndash_tags', '_is4wp_lms_complete_percent', '_is4wp_lms_completed', '_is4wp_lms_grade', '_is4wp_lms_start_date', ); foreach( $vwplv7a_9m as $vwply17edn ) { $_POST[$vwply17edn] = isset( $_POST[$vwply17edn] ) ? $_POST[$vwply17edn] : ''; add_post_meta( $vwplcltpy, $vwply17edn, $_POST[$vwply17edn], true ) or update_post_meta( $vwplcltpy, $vwply17edn, $_POST[$vwply17edn] ); } }  function wple9u3n($vwplw3l9q){ $vwplye4zk = array( 'learndash/ld-profile', 'learndash/ld-student', 'learndash/ld-course-inprogress', 'learndash/ld-course-notstarted', 'learndash/ld-group', 'learndash/ld-course-expire-status', 'learndash/ld-usermeta', 'learndash/ld-login', 'learndash/ld-course-list', 'learndash/ld-lesson-list', 'learndash/ld-topic-list', 'learndash/ld-quiz-list', 'learndash/ld-course-progress', 'learndash/ld-visitor', 'learndash/ld-course-complete', 'learndash/ld-user-course-points', 'learndash/ld-course-content', 'learndash/ld-payment-buttons', 'learndash/ld-course-info', 'learndash/ld-courseinfo', 'learndash/ld-user-groups' ); return wp_parse_args($vwplye4zk, $vwplw3l9q); } }
