<?php
/**
 * Copyright (c) 2020 David J Bullock
 * Web Power and Light
*/

 if (! defined( 'ABSPATH' ) ) { die(); }  class wplxgvyhf{  public $builder_slug;  function __construct( $builder_slug ) { $this->builder_slug = $builder_slug; $this->init(); }  function init() { $divi_modules = array(); foreach ( $GLOBALS['shortcode_tags'] as $tag => $func ) { if ( is_array( $func ) ) { if ( $func[0] instanceof ET_Builder_Element || $func[0] instanceof ET_Builder_Module ) { $divi_modules[$tag] = $func; remove_shortcode( $tag, $func ); } } } if ( !empty($divi_modules) ){  add_filter('wpal/blocks/'.$this->builder_slug.'/element_visibility', array( $this, 'wplye9b6a' ), 10, 1 ); foreach ( $divi_modules as $tag => $func ) { $et_pb_element = $func[0]; $et_pb_render = $func[1]; add_shortcode( $tag, function( $atts, $content, $function_name ) use ( $et_pb_element, $et_pb_render ) { $result = ''; $show = wploxfckj()->wplo3d_4( $atts, $this->builder_slug ); if ( $show ){ $result = $et_pb_element->$et_pb_render( $atts, $content, $function_name ); } return $result; } ); } } }  function wplye9b6a( $settings ){ $return = array();  $memberships = array(); foreach ($settings as $name => $value) { if (strpos($name, WPAL_BLOCKS_PREFIX . '_membership_levels') !== false && $value === 'on' ) { $memberships[] = (int) str_replace(WPAL_BLOCKS_PREFIX."_membership_levels-","",$name); } } $return['memberships'] = implode( ',', $memberships ); $return['any_membership'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_anymembership'] ) && $settings[WPAL_BLOCKS_PREFIX . '_anymembership'] === 'on' ) ? 1 : 0; $return['logged_in_only'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_loggedin'] ) && $settings[WPAL_BLOCKS_PREFIX . '_loggedin'] === 'on' ) ? 1 : 0; $return['logged_out_only'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_anonymous_only'] ) && $settings[WPAL_BLOCKS_PREFIX . '_anonymous_only'] === 'on' ) ? 1 : 0; $return['invert_results'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_invert_results'] ) && $settings[WPAL_BLOCKS_PREFIX . '_invert_results'] === 'on' ) ? 1 : 0; $return['contact_ids'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_contact_ids'] ) && $settings[WPAL_BLOCKS_PREFIX . '_contact_ids'] > '' ) ? sanitize_text_field($settings[WPAL_BLOCKS_PREFIX . '_contact_ids']) : ''; $return['tags1'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_access_tags'] ) && $settings[WPAL_BLOCKS_PREFIX . '_access_tags'] > '' ) ? $settings[WPAL_BLOCKS_PREFIX . '_access_tags'] : ''; $return['tags2'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_access_tags2'] ) && $settings[WPAL_BLOCKS_PREFIX . '_access_tags2'] > '' ) ? $settings[WPAL_BLOCKS_PREFIX . '_access_tags2'] : ''; $return['eval'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_eval'] ) && $settings[WPAL_BLOCKS_PREFIX . '_eval'] > '' ) ? trim($settings[WPAL_BLOCKS_PREFIX . '_eval']) : ''; $return['asset_id'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_asset_id'] ) && $settings[WPAL_BLOCKS_PREFIX . '_asset_id'] > '' ) ? sanitize_text_field($settings[WPAL_BLOCKS_PREFIX . '_asset_id']) : ''; return $return; } }
