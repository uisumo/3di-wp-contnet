<?php
/**
 * Copyright (c) 2020 David J Bullock
 * Web Power and Light
*/

 if (! defined( 'ABSPATH' ) ) { die(); }  class wplo6ps3 {  public $builder_slug;  public $to_json = array();  protected $version = '1.2.0';  function __construct( $builder_slug ) { $this->builder_slug = $builder_slug; add_filter('wpal/blocks/'.$this->builder_slug.'/control/config/', array( $this, 'wplhwnq' ), 1 ); $this->to_json['attributes'] = array(); $this->to_json['WPAL_BLOCKS_PREFIX'] = WPAL_BLOCKS_PREFIX; $this->to_json['WPAL_BLOCKS_SETTINGS_TITLE'] = WPAL_BLOCKS_SETTINGS_TITLE; $this->to_json['WPAL_BLOCKS_KEYS_REMOVED_TEXT'] = WPAL_BLOCKS_KEYS_REMOVED_TEXT; $this->to_json['debug'] = WPAL_BLOCKS_DEBUG; $this->to_json['notices'] = array(); $this->to_json['tags'] = $this->wplwmqo(); $this->to_json['controls'] = wplbd78()->wplo35wqk( $this->builder_slug ); $this->to_json['omitted_blocks'] = apply_filters( '/wpal/blocks/'.$this->builder_slug.'/settings/omitted_blocks', array( 'core/freeform', 'divi/placeholder', 'fl-builder/layout' ) ); $this->init(); }  function init() { $this->wplql1fig(); }  function wplql1fig(){ $handle = 'wpal-blocks-gutenberg-editor'; $dep_js = array( 'wp-i18n', 'wp-element', 'wp-editor' ); $dep_css = array('wp-editor'); wp_enqueue_script( $handle, plugin_dir_url( __FILE__ ) . 'editor.js', $dep_js, $this->version, false ); wp_enqueue_style( $handle . '-css', plugin_dir_url( __FILE__ ) . 'editor.css', $dep_css, $this->version, 'all' ); wp_localize_script( $handle, 'wpal_blocks_params', $this->to_json ); }  function wplhwnq( $config ){ if ( is_array($config) && !empty($config) ){  $attr = array( 'type' => 'string', 'default' => '' ); $this->to_json['attributes'][WPAL_BLOCKS_PREFIX . '_memberships'] = $attr; foreach( $config as $f => $field ) { $type = ( isset($field['type']) && $field['type'] > '' ) ? $field['type'] : false;  if ( isset( $field['level'] ) ) { $config[$f]['label'] = str_replace("&nbsp;"," ",$field['label']); } else {  $this->to_json['attributes'][$field['name']] = $attr; } } } return $config; }  function wplwmqo(){ $data = wplbd78()->wplwmqo( $this->builder_slug, 'value', 'label' ); if ( empty($data) ){  $data[] = array( 'value' => '', 'label' => __('No Results Found', 'wpal_blocks') ); } return $data; } }
