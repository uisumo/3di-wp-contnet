<?php
/**
 * Copyright (c) 2020 David J Bullock
 * Web Power and Light
*/

 if (! defined( 'ABSPATH' ) ) { die(); }  class wpluktip {  public $builder_slug;  public $visibility_listener;  function __construct( $builder_slug ) { $this->builder_slug = $builder_slug; $this->init(); }  function init() {  add_filter('render_block', array( $this, 'wplwj1m_' ), 9999, 2 );  add_filter('wpal/blocks/'.$this->builder_slug.'/element_visibility', array( $this, 'wplsnvi' ), 10, 1 ); }  function wplwj1m_( $block_content, $block ){ $attrs = $block['attrs']; $render_block = wploxfckj()->wplo3d_4( $attrs, $this->builder_slug ); if ( !$render_block ){ $block_content = ''; } return $block_content; }  function wplsnvi( $settings ){ $return = array(); $return['memberships'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_memberships'] ) && $settings[WPAL_BLOCKS_PREFIX . '_memberships'] > '' ) ? $settings[WPAL_BLOCKS_PREFIX . '_memberships'] : ''; $return['any_membership'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_anymembership'] ) && $settings[WPAL_BLOCKS_PREFIX . '_anymembership'] === 'on' ) ? 1 : 0; $return['logged_in_only'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_loggedin'] ) && $settings[WPAL_BLOCKS_PREFIX . '_loggedin'] === 'on' ) ? 1 : 0; $return['logged_out_only'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_anonymous_only'] ) && $settings[WPAL_BLOCKS_PREFIX . '_anonymous_only'] === 'on' ) ? 1 : 0; $return['invert_results'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_invert_results'] ) && $settings[WPAL_BLOCKS_PREFIX . '_invert_results'] === 'on' ) ? 1 : 0; $return['contact_ids'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_contact_ids'] ) && $settings[WPAL_BLOCKS_PREFIX . '_contact_ids'] > '' ) ? sanitize_text_field($settings[WPAL_BLOCKS_PREFIX . '_contact_ids']) : ''; $return['tags1'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_access_tags'] ) && $settings[WPAL_BLOCKS_PREFIX . '_access_tags'] > '' ) ? $settings[WPAL_BLOCKS_PREFIX . '_access_tags'] : ''; $return['tags2'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_access_tags2'] ) && $settings[WPAL_BLOCKS_PREFIX . '_access_tags2'] > '' ) ? $settings[WPAL_BLOCKS_PREFIX . '_access_tags2'] : ''; $return['eval'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_eval'] ) && $settings[WPAL_BLOCKS_PREFIX . '_eval'] > '' ) ? trim($settings[WPAL_BLOCKS_PREFIX . '_eval']) : ''; $return['asset_id'] = ( isset( $settings[WPAL_BLOCKS_PREFIX . '_asset_id'] ) && $settings[WPAL_BLOCKS_PREFIX . '_asset_id'] > '' ) ? sanitize_text_field($settings[WPAL_BLOCKS_PREFIX . '_asset_id']) : ''; return $return; } }
