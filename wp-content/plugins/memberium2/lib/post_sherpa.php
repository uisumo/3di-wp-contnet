<?php
/**
 * Copyright (c) 2018-2020 David J Bullock
 * Web Power and Light, LLC
 * https://webpowerandlight.com
 * support@webpowerandlight.com
 *
 */

 if (! defined('ABSPATH') ) { die(); } final class wpli_8q { static function wpljub86($vwpls7qzjc = '', $vwplbdhr = '') { $vwplbdhr = empty($vwplbdhr) ? get_temp_dir() : $vwplbdhr; $vwpls7qzjc = empty($vwpls7qzjc) ? uniqid() : $vwpls7qzjc; $vwplg38x51 = $vwplbdhr . $vwpls7qzjc; mkdir($vwplg38x51); $vwplg38x51 = realpath($vwplg38x51); return $vwplg38x51 . '/'; } static function wpli0u9($vwplcltpy = 0) { if (is_object($vwplcltpy) ) { $vwplzzlf5b = $vwplcltpy; $vwplcltpy = $vwplzzlf5b->ID; } $vwplzzlf5b = get_post($vwplcltpy); $vwplct26 = get_post_meta($vwplcltpy); $vwplqzdlu3 = array( '_elementor_css', '_elementor_data', '_elementor_edit_mode', '_elementor_page_settings', '_elementor_template_type', '_elementor_version', '_et_builder_version', '_et_pb_custom_css', '_et_pb_enable_shortcode_tracking', '_et_pb_old_content', '_et_pb_page_layout', '_et_pb_post_hide_nav', '_et_pb_side_nav', '_et_pb_use_builder', '_fl_builder_data_settings', '_fl_builder_data', '_fl_builder_draft_settings', '_fl_builder_draft', '_fl_builder_enabled', '_is4wp_anonymous_only', '_is4wp_any_loggedin_user', '_is4wp_any_membership', '_is4wp_can_comment', '_is4wp_discourage_cache', '_is4wp_force_public', '_is4wp_hide_from_menu', '_is4wp_private_comments', '_is4wp_prohibited_action', '_is4wp_redirect_url', '_iswp_custom_code', '_optimizepress_color_scheme_advanced', '_optimizepress_color_scheme_template', '_optimizepress_exit_redirect', '_optimizepress_fb_share', '_optimizepress_feature_area', '_optimizepress_feature_title', '_optimizepress_footer_area', '_optimizepress_header_layout', '_optimizepress_launch_funnel', '_optimizepress_launch_gateway', '_optimizepress_lightbox', '_optimizepress_membership', '_optimizepress_mobile_redirect', '_optimizepress_page_thumbnail_preset', '_optimizepress_page_thumbnail', '_optimizepress_pagebuilder', '_optimizepress_scripts', '_optimizepress_seo', '_optimizepress_theme', '_optimizepress_typography', '_wp_page_template', ); $vwplmrn7 = array( 'signature' => 'Web Power and Light Post Sherpa', 'version' => 1, 'title' => isset($vwplct26['_template_title'][0]) ? $vwplct26['_template_title'][0] : $vwplzzlf5b->post_title, 'post' => array( 'post_content' => $vwplzzlf5b->post_content, 'post_title' => $vwplzzlf5b->post_title, 'post_excerpt' => $vwplzzlf5b->post_excerpt, 'comment_status' => $vwplzzlf5b->comment_status, 'ping_status' => $vwplzzlf5b->ping_status, 'post_type' => $vwplzzlf5b->post_type, ), 'meta' => array(), ); foreach($vwplqzdlu3 as $vwplyq9i7o) { if (isset($vwplct26[$vwplyq9i7o][0]) ) { $vwplmrn7['meta'][$vwplyq9i7o] = base64_encode($vwplct26[$vwplyq9i7o][0]); } } $vwplmrn7 = json_encode($vwplmrn7); return $vwplmrn7; } static function wpluw6dj($vwplp4pw = array() ) { if (! count($vwplp4pw) ) { return; } require_once ABSPATH .'/wp-admin/includes/file.php'; $vwplb9y8bf = wp_upload_dir(); $vwplb83fd = $vwplb9y8bf['path'] . '/'; $vwplrufb = $vwplb83fd . 'page-export-' . time() . '-' . count($vwplp4pw) . '.zip'; $vwpln6_ko = "\n\nPost Sherpa Export\n" . 'Copyright (c) ' . date('Y') . " Web, Power and Light LLC\n\n"; $vwplej3c = new ziparchive; $vwplej3c->wplier5($vwplrufb, ziparchive::wpljqhiz || ziparchive::OVERWRITE); $vwplej3c->setArchiveComment($vwpln6_ko);  $vwplfhz89 = array(); foreach($vwplp4pw as $vwplopnf) { $vwplzzlf5b = get_post($vwplopnf); $vwplz4g7n = self::wpli0u9($vwplzzlf5b); $vwpls7qzjc = 'memberium-page-export-' . $vwplzzlf5b->post_name . '.json'; $vwplej3c->addfromstring($vwpls7qzjc, $vwplz4g7n); } $vwplej3c->wplmq90m7();  if (! function_exists('media_handle_upload') ) { require_once(ABSPATH . 'wp-admin/includes/image.php'); require_once(ABSPATH . 'wp-admin/includes/file.php'); require_once(ABSPATH . 'wp-admin/includes/media.php'); } $vwpldled = array(); $vwpldled['name'] = basename($vwplrufb); $vwpldled['tmp_name'] = $vwplrufb; $vwplb32x = media_handle_sideload($vwpldled, 0, 'Memberium Page Export Created on ' . date('Y-m-d') ); return $vwplb32x; } static function wplhqjw($vwpls7qzjc) { if (! class_exists('ZipArchive') ) { return false; } $vwplqebig7 = new ZipArchive; } static function wplb1jgtk($vwplr57eu6 = '', $vwplcltpy = 0) { $vwplcltpy = (int) $vwplcltpy; $vwplr57eu6 = json_decode($vwplr57eu6, true); if ($vwplr57eu6['signature'] == 'Web Power and Light Post Sherpa') { $vwplzzlf5b = array( 'ID' => $vwplcltpy, 'post_title' => $vwplr57eu6['post']['post_title'], 'post_content' => $vwplr57eu6['post']['post_content'], 'post_excerpt' => $vwplr57eu6['post']['post_excerpt'], 'post_author' => get_current_user_id(), 'comment_status' => $vwplr57eu6['post']['comment_status'], 'ping_status' => $vwplr57eu6['post']['ping_status'], 'post_type' => $vwplr57eu6['post']['post_type'], ); $vwplcltpy = wp_insert_post($vwplzzlf5b, false); foreach($vwplr57eu6['meta'] as $vwplyq9i7o => $vwplcjpa) { $vwplcjpa = base64_decode($vwplcjpa); $vwplcjpa = maybe_unserialize($vwplcjpa); if (is_string($vwplcjpa) ) { $vwplcjpa = addslashes($vwplcjpa); } $vwplopnf = add_post_meta($vwplcltpy, $vwplyq9i7o, $vwplcjpa, false); } echo 'post id = ', $vwplcltpy, "<br>"; $vwplwsgiza = get_post_meta($vwplcltpy, '_elementor_data', true); echo "\n\n\n", $vwplwsgiza, "\n\n\n"; die(); } die(); } }
