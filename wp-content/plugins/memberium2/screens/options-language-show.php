<?php
 if (!defined('ABSPATH' ) ) { die(); } global $wpdb; echo '<form method="POST" action="">'; wp_nonce_field(MEMBERIUM_LIB, 'memberium_options_nonce' ); echo '<ul>'; echo '<hr>'; echo '<h3>Multi-Language Support</h3>'; echo '</form>'; if ($_SERVER['REQUEST_METHOD'] == 'POST' ) { if ($_POST['submit'] == 'Add/Update' ) { $_POST['context'] = strtolower(trim($_POST['context'] ) ); $_POST['language'] = strtolower(trim($_POST['language'] ) ); $_POST['name'] = strtolower(trim($_POST['name'] ) ); $_POST['origtext'] = trim(stripslashes($_POST['origtext'] ) ); $_POST['value'] = trim(stripslashes($_POST['value'] ) ); $vwplx1ap5_ = 'DELETE FROM `' . MEMBERIUM_DB_LANG . '` WHERE `context` = %s AND `name` = %s AND origtext = %s ;'; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $_POST['context'], $_POST['name'], $_POST['origtext'] ); $wpdb->query($vwplx1ap5_ ); if (! empty($_POST['value'] ) ) { $vwplx1ap5_ = 'INSERT INTO `' . MEMBERIUM_DB_LANG . '` (`context`, `language`, `name`, `origtext`, `value` ) VALUES (%s, %s, %s, %s, %s );'; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $_POST['context'], $_POST['language'], $_POST['name'], $_POST['origtext'], $_POST['value'] ); $wpdb->query($vwplx1ap5_ ); } } } $vwplk7fy = empty($_GET['search'] ) ? '' : trim($_GET['search'] ); echo '<form method=post style="margin-bottom:24px;">'; wp_nonce_field(MEMBERIUM_LIB, 'memberium_options_nonce' ); echo '<ul><label>Context:</label><input required=required type=text name=context value="" size=30></ul>'; echo '<ul><label>Name:</label><select name=name>'; echo '<option value="memberium">Memberium</option>'; echo '<option value="">Generic</option>'; echo '</select>'; echo '</ul>'; $vwpln709eo = array( '' => 'Default', 'en' => 'English', 'ar' => 'Arabic', 'zh' => 'Chinese', 'de' => 'German', 'es' => 'Spanish', 'fr' => 'French', 'he' => 'Hebrew', 'hi' => 'Hindu', 'it' => 'Italian', 'ja' => 'Japanese', 'ko' => 'Korean', 'po' => 'Polish', 'pt' => 'Portuguese', 'sv' => 'Swedish', 'ru' => 'Russian', 'cy' => 'Welsh', 'ji' => 'Yiddish', 'vi' => 'Vietnamese', ); echo '<ul>'; echo '<label>Language:</label>'; echo '<select name="language">'; foreach($vwpln709eo as $vwpluvdiz => $vwplso1pw) { echo "<option value='{$vwpluvdiz}'>{$vwplso1pw}</option>"; } echo '</select>'; echo '</ul>'; echo '<ul><label>Original Text:</label><input required=required type=text name=origtext value="" size=80></ul>'; echo '<ul><label>New Text:</label><input required=required type=text name=value value="" size=80></ul>'; echo '<input type=submit name=submit value="Add/Update" class="button-primary">'; echo '</form>'; echo '<hr />'; echo '<form method=get>'; wp_nonce_field(MEMBERIUM_LIB, 'memberium_options_nonce' ); echo '<input type=hidden name=page value=memberium-options>'; echo '<input type=hidden name=tab value=language>'; echo '<input type=text name=search value="', $vwplk7fy, '"> &nbsp; '; echo '<input type=submit name=submit value=Search class="button-primary">'; echo '</form>'; if (true || ! empty($vwplk7fy ) ) { $vwplx1ap5_ = "SELECT * FROM `" . MEMBERIUM_DB_LANG . "` WHERE `context` LIKE %s OR `origtext` LIKE %s OR `value` LIKE %s" ; if (empty($vwplk7fy ) ) { $vwplx1ap5_ .= " ORDER BY id DESC;"; } $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, '%' . $vwplk7fy . '%', '%' . $vwplk7fy . '%', '%' . $vwplk7fy . '%' ); $vwplyg7o = $wpdb->get_results($vwplx1ap5_, ARRAY_A ); if (is_array($vwplyg7o ) && ! empty($vwplyg7o ) ) { echo '<table class=widefat>'; echo '<tr>'; echo '<td style="width:75px;">ID</td>'; echo '<td>Language</td>'; echo '<td>Context</td>'; echo '<td>Original Text</td>'; echo '<td>New Text</td>'; echo '</tr>'; foreach($vwplyg7o as $vwplheakg ) { echo '<tr>'; echo '<td>', $vwplheakg['id'], '</td>'; echo '<td>', empty($vwplheakg['language'] ) ? '(Unknown)' : $vwplheakg['language'] , '</td>'; echo '<td>', $vwplheakg['context'], '</td>'; echo '<td>', $vwplheakg['origtext'], '</td>'; echo '<td>', $vwplheakg['value'], '</td>'; echo '</tr>'; } echo '</table>'; } } echo '</form>';
