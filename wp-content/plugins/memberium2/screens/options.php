<?php
if (!defined('ABSPATH' ) ) { die(); } if (! current_user_can('manage_options' ) ) { wp_die(__('You do not have sufficient permissions to access this page.' ) ); } global $i2sdk, $wpdb; memberium_app()->wpllfqh_('view_options' ); $_GET['tab'] = isset($_GET['tab'] ) ? $_GET['tab'] : 'login'; $vwplfqgl3j = stripslashes_deep(get_option('i2sdk' ) ); $vwplekfq = get_option('memberium_pages', array() ); $vwplelob86 = wplz8bid::wplvf1d('settings'); $vwplba02 = wplz8bid::wplvf1d('infusionsoft'); if ($_SERVER['REQUEST_METHOD'] == 'POST' ) { if (! wp_verify_nonce($_POST['memberium_options_nonce'], MEMBERIUM_LIB ) ) { wp_die('nonce error' ); return; } if (isset($_POST['pages'] ) && is_array($_POST['pages'] ) ) { foreach($_POST['pages'] as $vwply17edn => $vwplph268z ) { $vwplekfq[$vwply17edn] = $vwplph268z; } update_option('memberium_pages', $vwplekfq, true ); } $vwplz97jd = get_option('memberium_extensions', array() ); if (isset($_POST['extensions'] ) ) { foreach($_POST['extensions'] as $vwply17edn => $vwplph268z ) { $vwplz97jd[$vwply17edn] = $vwplph268z; } } update_option('memberium_extensions', $vwplz97jd, true );  $vwplqzdlu3 = array( 'allow_autologin', 'allow_local_logins', 'allow_wpadmin', 'attachment_pages', 'autogenerate_excerpts', 'autoupdate', 'beta_update_check', 'cache_bust', 'cache_flush', 'disable_displayname_update', 'disable_lost_password', 'disable_password_reset', 'dynamic_menus', 'extended_reg_fields', 'force_learndash_inheritance', 'httppost_log', 'known_logins_only', 'local_auth_only', 'login_log', 'microcache_compat_session', 'multi_language', 'page_inheritance', 'plaintext_db', 'preview_mode', 'protect_feeds', 'require_membership', 'show_advanced_options', 'show_post_columns', 'simultaneous_logins', 'site_lock_enabled', 'sync_affiliate', 'sync_ecommerce', 'sync_meta_updates', 'sync_new_wp_users', 'sync_tag_details', 'telemetry', 'two_pass_shortcode_filter', ); foreach($vwplqzdlu3 as $vwply17edn ) { $vwplelob86[$vwply17edn] = isset($_POST[$vwply17edn] ) ? (int) (bool) trim($_POST[$vwply17edn] ) : $vwplelob86[$vwply17edn]; }  $vwplqzdlu3 = array( 'allow_wpadmin_dashboard', 'allow_wpadmin_role', 'allow_wpadmin_titlebar', 'default_page_redirect', 'default_prohibited_action', 'default_reglink_tag', 'displayname_format', 'facebook_app_id', 'global_excerpt', 'last_login_field', 'password_field', 'registration_url', 'spiffy_subdomain', 'username_field', ); foreach($vwplqzdlu3 as $vwply17edn ) { $vwplelob86[$vwply17edn] = isset($_POST[$vwply17edn] ) ? stripslashes(trim($_POST[$vwply17edn] ) ) : $vwplelob86[$vwply17edn]; }  $vwplqzdlu3 = array( 'autologout_time', 'excerpt_length', 'first_login_page', 'login_actionset', 'login_tag', 'login_url', 'logout_actionset', 'logout_tag', 'max_affiliate_age', 'max_contact_age', 'maximum_login_ips', 'maximum_login_timeframe', 'min_password_length', 'new_user_registration_tag', 'password_reset_tag', 'password_strength', 'session_timeout', 'site_ban_tag', 'wp_autop',  ); foreach($vwplqzdlu3 as $vwply17edn ) { $vwplelob86[$vwply17edn] = isset($_POST[$vwply17edn] ) ? (int) trim($_POST[$vwply17edn] ) : $vwplelob86[$vwply17edn]; } if (isset($_POST['autologin_authkeys'] ) ) { $vwplrtr20m = explode(',', $_POST['autologin_authkeys'] ); $vwplqk4_x = explode(',', $i2sdk->getConfigurationOption('http_post_key' ) ); $vwplk17t5 = false; foreach ($vwplrtr20m as $vwplopnf => $vwply17edn ) { $vwply17edn = trim($vwply17edn ); foreach ($vwplqk4_x as $vwpljvqf ) { if (strtolower(trim($vwpljvqf ) == strtolower(trim($vwply17edn ) ) ) ) { $vwplk17t5 = true; unset($vwplrtr20m[$vwplopnf] ); } } } $vwplelob86['autologin_authkeys'] = trim(implode(',', $vwplrtr20m ), ',' ); } wplz8bid::wpln095z($vwplba02, 'infusionsoft' ); wplz8bid::wpln095z($vwplelob86, 'settings' ); if (isset($_POST['page_load'] ) ) { if ($_POST['page_load'] == 'Load All Templates' ) { $vwpl_9x2wn = $this->wplh0wfvl(); foreach($vwpl_9x2wn as $template_id => $template ) { $this->wplkr2a9x(0, $template_id ); } } elseif ($_POST['page_load'] == 'Load Single Template' ) { $this->wplkr2a9x($_POST['target_post_id'], ($_POST['template_id'] - 1 ) ); } elseif ($_POST['page_load'] == 'Install Email Templates' ) { $vwpluoght = $this->wplo05x(); } } if (isset($_POST['new_password_field'] ) ) { $_POST['new_password_field'] = trim($_POST['new_password_field'] ); $this->wplbd7a($_POST['new_password_field'] ); } if (isset($_GET['tab'] ) ) { if ($_GET['tab'] == 'general' ) { $vwplfu1sbe = explode(',', $vwplba02['ignore_contact_fields'] ); $vwplfu1sbe = array_flip($vwplfu1sbe ); unset($vwplfu1sbe[$vwplelob86['password_field']] ); unset($vwplfu1sbe[$vwplelob86['username_field']] ); $vwplfu1sbe = array_flip($vwplfu1sbe ); $vwplba02['ignore_contact_fields'] = implode(',', $vwplfu1sbe ); wpljwbf2::wplc1on7('General Options Updated' ); } elseif ($_GET['tab'] == 'extensions' ) { wpljwbf2::wplc1on7('Updates Options Updated' ); } elseif ($_GET['tab'] == 'http-post' ) { $_POST['autologin_authkeys'] = trim(implode(',', $vwplrtr20m ), ',' ); wpljwbf2::wplc1on7('Options Updated' ); if ($vwplk17t5 ) { wpljwbf2::wplc1on7('You cannot re-use I2SDK Keys as Autologin Keys for security reasons' . wpljwbf2::wplypewkt(363 ) ); } else { $vwplelob86['autologin_authkeys'] = $_POST['autologin_authkeys']; } unset($vwply17edn, $vwpljvqf, $vwplk17t5, $vwplqk4_x, $vwplrtr20m ); wpljwbf2::wplc1on7('HTTP POST Options Updated' ); } } global $wp_rewrite; $wp_rewrite->flush_rules(); } $vwplrx1f = wpliebn::wplfb48t();   $vwpls0hwb5 = wplj_l2t::wplaajf(TRUE ); $vwpls0hwb5 = $vwpls0hwb5['mc']; $vwplechli = array(); $vwplechli[] = array('id' => 0, 'text' => '(None)' ); foreach ( (array) $vwpls0hwb5 as $vwplopnf => $vwpltmveju ) { $vwplechli[] = array('id' => $vwplopnf, 'text' => $vwpltmveju . ' (' . $vwplopnf . ')' ); } $vwplechli = json_encode($vwplechli ); unset($vwpls0hwb5, $vwplopnf, $vwpltmveju ); $vwplx1ap5_ = 'SELECT `id`, `name` FROM ' . MEMBERIUM_DB_ACTIONSETS . ' WHERE `appname` = %s AND `name` > "" ORDER BY `name` ASC'; $vwplx1ap5_ = $wpdb->prepare($vwplx1ap5_, $this->appname ); $vwplewhxt_ = $wpdb->get_results($vwplx1ap5_, ARRAY_A ); $json_actionsets = array(); $json_actionsets[] = array('id' => 0, 'text' => '(No Action)' ); foreach ($vwplewhxt_ as $vwplopnf => $row ) { $json_actionsets[] = array('id' => $row['id'], 'text' => $row['name'] . ' (' . $row['id'] . ')' ); } $json_actionsets = json_encode($json_actionsets ); unset($vwplewhxt_, $vwplopnf, $row, $vwplx1ap5_ ); echo '<script>'; echo 'var pagelist      = ', $vwplrx1f, ';'; echo 'var actionsetlist = ', $json_actionsets, ';'; echo 'var taglist       = ', $vwplechli, ';'; echo '</script>'; unset($vwplechli, $vwplrx1f, $json_actionsets );
