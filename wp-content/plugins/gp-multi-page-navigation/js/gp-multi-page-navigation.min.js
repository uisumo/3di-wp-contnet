!function(i){window.GPMultiPageNavigation=function(t){var a=this;a.formId=t.formId,a.$formElem=i("form#gform_"+a.formId),a.lastPage=t.lastPage,a.activationType=t.activationType,a.labels=t.labels,a.enableSubmissionFromLastPageWithErrors=t.enableSubmissionFromLastPageWithErrors,a.init=function(){if(a.$formElem.length<=0&&(a.$formElem=i("#gform_wrapper_"+a.formId)),a.$footer=i("#gform_page_"+a.formId+"_"+a.getCurrentPage()+" .gform_page_footer"),a.$saveAndContinueButton=a.$footer.find("a.gform_save_link"),"last_page"!=a.activationType||a.isLastPageReached()){a.$formElem.find(".gf_step").each(function(t){var e=t+1;"progression"==a.activationType&&e>a.getPageProgression()||(e!=a.getCurrentPage()?i(this).html(a.getPageLinkMarkup(e,i(this).html())).addClass("gpmpn-step-linked"):i(this).addClass("gpmpn-step-current"))}),"last_page"==a.activationType&&!a.isLastPage()&&a.isLastPageReached()?a.addBackToLastPageButton():"progression"==a.activationType&&a.getCurrentPage()<a.getPageProgression()?a.addBackToLastPageButton(a.getPageProgression()):"first_page"==a.activationType&&!a.isLastPage()&&a.wasFinalSubmissionAttempted()&&a.addNextPageWithErrorsButton();i(document).on("click","a.gpmpn-page-link, a.gwmpn-page-link, .gpmpn-page-link a",function(t){t.preventDefault();var e=i(this).attr("href").split("#");if(2<=e.length){var n,a=i(this).parents("form"),r=(n=0<(n=0<a.length?a:i(".gform_wrapper form")).length?n:i(".gform_wrapper").parent("form")).attr("id").split("_")[1],o=e.pop();GPMultiPageNavigation.postToPage(o,r,!0)}}),a.$formElem.data("GPMultiPageNavigation",a),window["gpmpn_"+a.formId]=a}},a.getPageLinkMarkup=function(t,e){return'<a href="#'+t+'" class="gwmpn-page-link gwmpn-default gpmpn-page-link gpmpn-default">'+e+"</a>"},a.addBackToLastPageButton=function(t){var e='<input type="button" onclick="GPMultiPageNavigation.postToPage( '+(t=void 0===t?a.lastPage:t)+", "+a.formId+' );" value="'+a.labels.backToLastPage+'" class="button gform_button gform_last_page_button">';a.insertButton(e)},a.addNextPageWithErrorsButton=function(){var t=1<a.getErrorPagesCount()?a.labels.nextPageWithErrors:a.labels.submit,e=1<a.getErrorPagesCount()?"gform_next_page_errors_button":"gform_resubmit_button",n='<input type="button" onclick="GPMultiPageNavigation.postToPage( 0, '+a.formId+' );" value="'+t+'" class="button gform_button '+e+'">';a.getErrorPagesCount()<=1&&!a.enableSubmissionFromLastPageWithErrors?a.addBackToLastPageButton():a.insertButton(n)},a.insertButton=function(t){0<a.$saveAndContinueButton.length?a.$saveAndContinueButton.before(t):a.$footer.append(t)},a.getCurrentPage=function(){return a.currentPage||(a.currentPage=a.$formElem.find("input#gform_source_page_number_"+a.formId).val()),a.currentPage},a.getPageProgression=function(){return parseInt(i("input#gw_page_progression").val())},a.getErrorPagesCount=function(){return a.errorPagesCount||(a.errorPagesCount=a.$formElem.find("input#gw_error_pages_count").val()),a.errorPagesCount},a.isLastPage=function(){return a.getCurrentPage()>=a.lastPage},a.isLastPageReached=function(){return a.isLastPage()||1==a.$formElem.find("input#gw_last_page_reached").val()},a.wasFinalSubmissionAttempted=function(){return 1==a.$formElem.find("input#gw_final_submission_attempted").val()},GPMultiPageNavigation.postToPage=function(t,e,n){var a=i("form#gform_"+e);if(a.find("input#gform_target_page_number_"+e).val(t),n){var r=i('<input type="hidden" name="gw_bypass_validation" id="gw_bypass_validation" value="1" />');a.append(r)}a.find(".gform_page_footer:visible").find('input[type="submit"], input[type="button"]').not(":visible").css({display:"block",visibility:"hidden",position:"absolute"}),0===parseInt(t)&&(i("#gform_submit_button_"+e).appendTo(".gform_page_footer:visible").css({display:"block",visibility:"hidden",position:"absolute"}),gform.addFilter("gform_spinner_target_elem",function(t){gform.removeFilter("gform_spinner_target_elem",10,"gpmpn_set_spinner_target");var e=i(".gform_next_page_errors_button:visible, .gform_resubmit_button:visible");return e.length?e:t},10,"gpmpn_set_spinner_target")),a.submit()},a.init()}}(jQuery),window.gformOrigInitSpinner=window.gformInitSpinner,window.gformInitSpinner=function(t,e){void 0!==e&&e||(e=gform.applyFilters("gform_spinner_url",gf_global.spinnerUrl,t));var n=jQuery("#gform_"+t);n.submit(function(){0==jQuery("#gform_ajax_spinner_"+t).length&&n.find(".gform_page_footer").append('<img id="gform_ajax_spinner_'+t+'"  class="gform_ajax_spinner" src="'+e+'" alt="" />')})};
//# sourceMappingURL=gp-multi-page-navigation.js.map