<?php
 class_exists('m4is_emz57o') || die(); final 
class m4is_pdof { private static $m4is__c412 = []; static 
function m4is_a6x52r() : self { static $m4is_jprj8 = false; return $m4is_jprj8 ? $m4is_jprj8 : $m4is_jprj8 = new self; } 
function __construct() { $this->m4is_ap508(); } private 
function m4is_ap508() { add_filter( 'learndash_shortcode_atts', [$this, 'm4is_pt5j'], 10, 2 ); add_filter( 'learndash_get_lesson_list_args', [$this, 'm4is__509'], 10, 3 );  add_filter( 'memberium/lms/course/item/data', [$this, 'm4is_mirntk'], 10, 2 ); add_filter( 'memberium/registration_fields/custom', [$this, 'm4is_grf91n'], 10, 1 ); }   static 
function m4is_j87wq($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') { if ( ! is_user_logged_in() ) { return; } $m4is_p78sgz = [ 'id' => 0, 'not' => '', ]; $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); if (empty($m4is_qvehs['id']) ) { return; } $m4is_qvehs['not'] = m4is_qipkj::m4is_vhjg( $m4is_qvehs['not'], false); $m4is_q4c_xa = get_current_user_id(); $m4is_zd_f = get_user_meta($m4is_q4c_xa, '_sfwd-course_progress', true); $m4is_u1fg = false; if (is_array($m4is_zd_f) ) { foreach($m4is_zd_f as $m4is_jkjgiu => $m4is_l6omu9) { if ($m4is_qvehs['id'] == $m4is_jkjgiu && $m4is_l6omu9['total'] == $m4is_l6omu9['completed']) { $m4is_u1fg = true; break; } if ( ! empty($m4is_l6omu9['lessons'][$m4is_qvehs['id']] ) ) { $m4is_u1fg = true; break; } if ( ! empty($m4is_l6omu9['topics'][$m4is_qvehs['id']] ) ) { $m4is_u1fg = true; break; } } } if ($m4is_qvehs['not']) { $m4is_u1fg = ! $m4is_u1fg; } $m4is_m97_i = ''; $m4is_rmz2f = ''; $m4is_k2qb08 = m4is_qipkj::m4is_mngd87($m4is_amunwi, $m4is_rz70ok, true, $m4is_u1fg); return m4is_qipkj::m4is__85o(true, $m4is_k2qb08, $m4is_m97_i, $m4is_rmz2f); }   static 
function m4is_fr9id($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') { if ( ! is_user_logged_in() ) { return; } $m4is_p78sgz = [ 'id' => 0, 'not' => false, 'txtfmt' => '', 'capture' => '', ]; $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_d_3e = ld_get_mycourses(get_current_user_id() ); $m4is_o2td = ($m4is_d_3e) && in_array($m4is_qvehs['id'], $m4is_d_3e); if ($m4is_qvehs['not']) { $m4is_o2td = ! $m4is_o2td; } $m4is_k2qb08 = m4is_qipkj::m4is_mngd87($m4is_amunwi, $m4is_rz70ok, true, $m4is_o2td); return m4is_qipkj::m4is__85o(true, $m4is_k2qb08, $m4is_qvehs['txtfmt'], $m4is_qvehs['capture']); }    static 
function m4is_cn5g($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') { if (! is_singular() ) { return; } if (! is_user_logged_in() ) { return; } if (! function_exists('ld_update_course_access') ) { return 'LearnDash not installed<br />'; } $m4is_p78sgz = [ 'course_id' => 0, 'user_id' => get_current_user_id(), ]; $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_qvehs['course_id'] = (int) $m4is_qvehs['course_id']; if (empty($m4is_qvehs['course_id']) || empty($m4is_qvehs['user_id']) ) { return; } if (! get_post_status($m4is_qvehs['course_id']) ) { return 'Invalid Course ID<br />'; } $m4is_wv9t = (bool) ( strtolower( trim( $m4is_rz70ok ) ) == 'memb_learndash_course_unenroll' ); ld_update_course_access( $m4is_qvehs['user_id'], $m4is_qvehs['course_id'], $m4is_wv9t ); } 
function m4is_pt5j( $m4is__nytb, $m4is_t_qmg ) { if ( ! empty( $m4is__nytb['post__in'] ) && is_array( $m4is__nytb['post__in'] ) ) { foreach( $m4is__nytb['post__in'] as $m4is_ap3_ => $m4is__xysg ) { if ( ! m4is_pcys::m4is_a6x52r()->m4is_whka( $m4is__xysg ) ) { unset( $m4is__nytb['post__in'][$m4is_ap3_] ); } } } return $m4is__nytb; } 
function m4is__509( $m4is_w5ky4q, $m4is_b40e_m, $m4is_u6ixo ) { if ( ! empty( $m4is_w5ky4q['post__in'] ) && is_array( $m4is_w5ky4q['post__in'] ) ) { foreach( $m4is_w5ky4q['post__in'] as $m4is_ap3_ => $m4is__xysg ) { if ( ! m4is_pcys::m4is_a6x52r()->m4is_whka( $m4is__xysg ) ) { unset( $m4is_w5ky4q['post__in'][$m4is_ap3_] ); } } } return $m4is_w5ky4q; }  
function m4is_grf91n($m4is_ep1bq) { $m4is_hx5w2y = debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS, 15); foreach($m4is_hx5w2y as $m4is_cf1ghj) { if ($m4is_cf1ghj['function'] == 'learndash_login_shortcode') { return true; } } return $m4is_ep1bq; }   
function m4is_mirntk(array $m4is_j0n7, int $m4is__xysg) { if (get_post_type($m4is__xysg) !== 'sfwd-courses') { return $m4is_j0n7; } $m4is_q4c_xa = get_current_user_id(); $m4is_ti8od = get_post_meta($m4is__xysg, '_sfwd-courses', true); $m4is_j0n7['access'] = sfwd_lms_has_access($m4is__xysg, $m4is_q4c_xa);   if( ! $m4is_j0n7['access'] ){ $m4is_j0n7['status'] = 'locked'; return $m4is_j0n7; }  $m4is_zd_f = learndash_course_progress([ 'course_id' => $m4is__xysg, 'user_id' => $m4is_q4c_xa, 'array' => true, ]); $m4is_j0n7['progress'] = ( $m4is_zd_f && !empty($m4is_zd_f['percentage']) ) ? $m4is_zd_f['percentage'] : 0; $m4is_j0n7['status'] = 'locked';  $m4is_o6hf1 = isset($m4is_ti8od['sfwd-courses_course_price_type']) ? $m4is_ti8od['sfwd-courses_course_price_type'] : 'open'; if( in_array($m4is_o6hf1, ['open', 'free']) ){ $m4is_j0n7['status'] = 'unlocked'; } else if ( in_array($m4is_o6hf1, ['paynow', 'closed', 'subscribe']) ){ if( $m4is_j0n7['access'] ) { $m4is_j0n7['status'] = 'unlocked'; } } if( $m4is_j0n7['status'] !== 'locked' ){ if( !is_course_prerequities_completed($m4is_u6ixo) ){ $m4is_j0n7['status'] = 'locked';  } } return $m4is_j0n7; }   }
