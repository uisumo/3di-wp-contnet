<?php
 class_exists('m4is_emz57o') || die(); final 
class m4is_vkhw { private $m4is_bxv7u;  static 
function m4is_a6x52r() : self { static $m4is_jprj8 = false; return $m4is_jprj8 ? $m4is_jprj8 : $m4is_jprj8 = new self; }  private 
function __construct() { $this->m4is_bxv7u = memberium_app(); $this->m4is_ap508(); if ( is_admin() ) { require __DIR__ . '/admin.php'; m4is_mktb::m4is_a6x52r(); } else { require __DIR__ . '/frontend.php'; m4is_pdof::m4is_a6x52r(); $this->m4is_yyfg4r(); } }   private 
function m4is_ap508() { add_action( 'learndash_assignment_approved', [$this, 'm4is_us61g4'], 10, 1 ); add_action( 'learndash_assignment_uploaded', [$this, 'm4is_lmet'], 10, 2 ); add_action( 'learndash_course_completed', [$this, 'm4is_oy1rbo'], 5, 1 ); add_action( 'learndash_lesson_completed',[$this, 'm4is_xu74'], 5, 1 ); add_action( 'learndash_quiz_submitted', [$this, 'm4is_ea9h'], 5, 2 ); add_action( 'learndash_topic_completed', [$this, 'm4is_eeik'], 5, 1 ); add_action( 'memberium/shortcodes/add', [$this, 'm4is_yyfg4r'] ); add_action( 'memberium/shortcodes/remove', [$this, 'm4is_djl_30'] ); add_action( 'template_redirect', [$this, 'm4is_nn4b'], 901 );  add_filter( 'ld_lesson_access_from', [$this, 'm4is_ejzhe4'], PHP_INT_MAX, 3); add_filter( 'learndash_certificate_pdf_page_formats', [$this, 'm4is_c6dj8t'], 10 ); add_filter( 'learndash_content_access', [$this, 'm4is_w73uj9'], 5, 2 ); add_filter( 'learndash_course_completion_url', [$this, 'm4is_zkbqet'], 5, 2 ); add_filter( 'memberium/lms/course_category', [$this, 'm4is_hhyk']); add_filter( 'memberium/lms/course_tag', [$this, 'm4is_n0s4i']); add_filter( 'memberium/lms/course_type', [$this, 'm4is_x2lz']); add_filter( 'memberium/lms/module_post_types', [$this, 'm4is_rb068']); add_filter( 'memberium/lms/name', [$this, 'm4is_whpnx']); add_filter( 'memberium/posts/unenhanced', [$this, 'm4is_mmtr07'], 10, 1); add_filter( 'sfwd_lms_has_access', [$this, 'm4is_vk_l'], PHP_INT_MAX, 3 ); add_filter( 'learndash_can_user_read_step', [$this, 'm4is_oumg'], 10, 3 );  remove_action( 'wp_login_failed', 'learndash_login_failed' ); add_action( 'wp_login_failed', 'learndash_login_failed', 100, 1 ); if ( ! defined( 'DISABLE_LEARNDASH_ENROLL' ) ) { add_action( 'memberium/session/updated', [$this,'m4is_y9o6h3'], 10, 2 ); add_action( 'memberium/session/updated', [$this,'m4is_vp73'], 11, 2 ); } $this->m4is_yyfg4r(); }  
function m4is_oumg( $m4is_b9ew1, $m4is_jo0t, $m4is_u6ixo ) { if ( $m4is_b9ew1 ) { $m4is_b9ew1 = m4is_pcys::m4is_a6x52r()->m4is_whka( $m4is_jo0t ); } return $m4is_b9ew1; }  private 
function m4is_mfzm() { global $wpdb; $m4is_rz2s = implode(',', learndash_get_open_courses() ); $m4is_f9av2 = $wpdb->posts; $m4is_zs2va = $wpdb->postmeta; $m4is_ioxk = "SELECT `ID`, `meta_value` FROM `{$m4is_f9av2}`, `{$m4is_zs2va}` WHERE `post_status` = 'publish' AND `post_type` = 'sfwd-courses' AND `post_id` = `ID` AND `meta_key` = '_is4wp_learndash_autoenroll' AND `meta_value` > '' "; if (! empty($m4is_rz2s)) { $m4is_ioxk .= " AND `ID` NOT IN ( {$m4is_rz2s} ) "; } return $wpdb->get_results($m4is_ioxk, ARRAY_A);; }  private 
function m4is_w9eb5z() { global $wpdb; $m4is_f9av2 = $wpdb->posts; $m4is_zs2va = $wpdb->postmeta; $m4is_ioxk = "SELECT ID, meta_value FROM {$m4is_f9av2}, {$m4is_zs2va} WHERE post_status = 'publish' AND post_type = 'groups' AND  post_id = ID AND meta_key = '_is4wp_learndash_autojoin' AND meta_value > '' "; return $wpdb->get_results($m4is_ioxk, ARRAY_A); }  
function m4is_mmtr07($m4is_i8_ymd =[] ) { $m4is_i8_ymd[] = 'sfwd-essays'; return $m4is_i8_ymd; }  
function m4is_x2lz($m4is_dmesa) { return 'sfwd-courses'; }  
function m4is_hhyk($m4is_qmxu) { return 'ld_course_category'; }  
function m4is_n0s4i($m4is_w9feq2) { return 'ld_course_tag'; }  
function m4is_whpnx($m4is_ho0w2) { return 'LearnDash'; } 
function m4is_rb068($m4is_dm7i1c = []) { return array_merge($m4is_dm7i1c, [ 'sfwd-courses', 'sfwd-lessons', 'sfwd-topic', 'sfwd-quiz', ]); }    
function m4is_vk_l( $m4is_rhfd, $m4is__xysg, $m4is_q4c_xa ) { $m4is__xysg = (int) $m4is__xysg; $m4is_rhfd = (bool) $m4is_rhfd;  if ( ! $m4is_rhfd ) { return $m4is_rhfd; }  if ( get_post_type( $m4is__xysg ) !== 'sfwd-courses' ) { return $m4is_rhfd; }  $m4is_q4c_xa = $m4is_q4c_xa ? $m4is_q4c_xa : get_current_user_id();  if ( $m4is_q4c_xa ) { if ( user_can( $m4is_q4c_xa, 'edit_others_posts' ) || user_can( $m4is_q4c_xa, 'edit_post', $m4is__xysg ) ) { return true; } } return m4is_pcys::m4is_a6x52r()->m4is_whka( (int) $m4is__xysg, (int) $m4is_q4c_xa ); } 
function m4is_ejzhe4($m4is_i8b431, $m4is_qoed9n, $m4is_q4c_xa){ $m4is_x7rh4b = time(); if ( $m4is_i8b431 < $m4is_x7rh4b ) { return $m4is_i8b431; } static $m4is_j0n7 = []; $m4is_u6ixo = learndash_get_course_id( $m4is_qoed9n );  if( !isset($m4is_j0n7[$m4is_u6ixo]) ){ $m4is_j0n7[$m4is_u6ixo] = [ 'tags' => get_post_meta($m4is_u6ixo, '_is4wp_learndash_drip_feed_override', true), 'users' => [] ]; }  if( empty($m4is_j0n7[$m4is_u6ixo]['users'][$m4is_q4c_xa]) ){ if( !empty($m4is_j0n7[$m4is_u6ixo]['tags']) ){ $m4is_j0n7[$m4is_u6ixo]['users'][$m4is_q4c_xa] = m4is_pcys::m4is_a6x52r()->m4is_z_1tf8(false, [ 'tags1' => $m4is_j0n7[$m4is_u6ixo]['tags'] ]); } else{ $m4is_j0n7[$m4is_u6ixo]['users'][$m4is_q4c_xa] = false; } } return $m4is_j0n7[$m4is_u6ixo]['users'][$m4is_q4c_xa] ? null : $m4is_i8b431; } 
function m4is_uek3( $m4is__pm_l3, $m4is_pgsbl, $m4is_nzrv1 ) { if ( ! is_a( $m4is_pgsbl, 'WP_Post' ) ) { return; } if ( $m4is__pm_l3 ) { $m4is_q4c_xa = (int) $m4is_nzrv1->ID; $m4is_aicfp = (int) m4is_zbyh::m4is_fhxr6( $m4is_q4c_xa ); if ($m4is_aicfp) { $m4is__xysg = (int) $m4is_pgsbl->ID; $m4is_w59dlu = get_post( $m4is__xysg, 'ARRAY_A' ); $m4is_khn1 = get_user_meta( $m4is_q4c_xa, '_sfwd-quizzes', true ); foreach( $m4is_khn1 as $m4is_ciftdc ) { if ( $m4is_ciftdc['quiz'] == $m4is__xysg ) { $m4is_ia2to5 = false; } } } do_action('memberium/lms/completion', $m4is_q4c_xa, $m4is__xysg); }  }  
function m4is_lmet($m4is_ul_r = 0, $m4is_t7frmt = []) { if ( ! $m4is_ul_r ) { return; } $m4is_q4c_xa = isset( $m4is_t7frmt['user_id'] ) ? $m4is_t7frmt['user_id'] : 0; $m4is_aicfp = m4is_zbyh::m4is_fhxr6( $m4is_q4c_xa ); if ( ! $m4is_aicfp ) { return; } $m4is__xysg = isset( $m4is_t7frmt['lesson_id'] ) ? $m4is_t7frmt['lesson_id'] : 0; if ( ! $m4is__xysg ) { return; } $m4is_ti8od = get_post_meta( $m4is__xysg ); if ( ! empty( $m4is_ti8od['_memberium_lms_assignment_upload_tag'][0] ) ) { memberium_app()->m4is__mkz( $m4is_ti8od['_memberium_lms_assignment_upload_tag'][0], $m4is_aicfp ); } } 
function m4is_us61g4($m4is_hnmjt = 0) { $m4is_hnmjt = (int) $m4is_hnmjt; if ( ! $m4is_hnmjt ) { return; } $m4is_t7frmt = get_post_meta( $m4is_hnmjt ); $m4is__xysg = isset( $m4is_t7frmt['lesson_id'][0] ) ? $m4is_t7frmt['lesson_id'][0] : 0; $m4is_q4c_xa = isset( $m4is_t7frmt['user_id'][0] ) ? $m4is_t7frmt['user_id'][0] : 0; $m4is_aicfp = m4is_zbyh::m4is_fhxr6( $m4is_q4c_xa ); if ( ! $m4is_aicfp ) { return; } $m4is_ti8od = get_post_meta( $m4is__xysg ); if ( ! empty( $m4is_ti8od['_memberium_lms_assignment_approval_tag'][0] ) ) { memberium_app()->m4is__mkz( $m4is_ti8od['_memberium_lms_assignment_approval_tag'][0], $m4is_aicfp ); } } 
function m4is_y9o6h3($m4is_q4c_xa = 0, $m4is_sxfbjo = [] ) { global $wpdb; if (! function_exists('learndash_set_groups_users') ) { return; } if (user_can($m4is_q4c_xa, 'manage_options') ) { return; } $m4is_ixyb = $this->m4is_w9eb5z(); if (is_array($m4is_ixyb) && ! empty($m4is_ixyb) ) { $m4is_fybs = learndash_get_users_group_ids($m4is_q4c_xa); foreach ($m4is_ixyb as $m4is_gbok) { $m4is_axl4p = in_array($m4is_gbok['ID'], $m4is_fybs); $m4is__np8m = $this->m4is_bxv7u->m4is_c8ie6($m4is_gbok['meta_value'], $m4is_sxfbjo['memb_user']['tags']); if ($m4is__np8m && ! $m4is_axl4p) { ld_update_group_access($m4is_q4c_xa, $m4is_gbok['ID'], false); } elseif (! $m4is__np8m && $m4is_axl4p) { ld_update_group_access($m4is_q4c_xa, $m4is_gbok['ID'], true); } } } } 
function m4is_vp73( $m4is_q4c_xa = 0, $m4is_sxfbjo = [] ) { if (! function_exists( 'ld_update_course_access' ) ) { return; } $m4is_oo43y = $this->m4is_mfzm(); if ( ! empty( $m4is_oo43y ) ) { $m4is_d_3e = learndash_user_get_enrolled_courses( $m4is_q4c_xa ); foreach( $m4is_oo43y as $m4is_l6omu9 ) { $m4is_ypu1m = $this->m4is_bxv7u->m4is_c8ie6( $m4is_l6omu9['meta_value'], $m4is_sxfbjo['memb_user']['tags'] ); $m4is_vcvhsi = in_array( $m4is_l6omu9['ID'], $m4is_d_3e ); if ( $m4is_ypu1m && ! $m4is_vcvhsi ) { ld_update_course_access($m4is_q4c_xa, $m4is_l6omu9['ID'], false); } elseif ( ! $m4is_ypu1m && $m4is_vcvhsi ) { ld_update_course_access($m4is_q4c_xa, $m4is_l6omu9['ID'], true); } } } } 
function m4is_oy1rbo($m4is_j0n7) { $m4is_q4c_xa = isset($m4is_j0n7['user']->ID) ? $m4is_j0n7['user']->ID : get_current_user_id(); $m4is_aicfp = (int) m4is_zbyh::m4is_fhxr6( $m4is_q4c_xa ); $m4is__xysg = $m4is_j0n7['course']->ID; if ($m4is__xysg && $m4is_aicfp) { $m4is_galwv0 = get_post_meta($m4is__xysg); $m4is_eum9fq = empty($m4is_galwv0['_is4wp_learndash_goals'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_goals'][0]; $m4is_znf9 = empty($m4is_galwv0['_is4wp_learndash_tags'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_tags'][0]; $m4is_l926 = empty($m4is_galwv0['_is4wp_learndash_actions'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_actions'][0]; memberium_app()->m4is_rctzo($m4is_eum9fq, $m4is_aicfp ); memberium_app()->m4is__mkz($m4is_znf9, $m4is_aicfp ); memberium_app()->m4is_evrbh($m4is_l926, $m4is_aicfp ); } do_action('memberium/lms/completion', $m4is_q4c_xa, $m4is__xysg); } 
function m4is_xu74($m4is_j0n7) { $m4is_q4c_xa = isset( $m4is_j0n7['user']->ID ) ? $m4is_j0n7['user']->ID : get_current_user_id(); $m4is_aicfp = (int) m4is_zbyh::m4is_fhxr6( $m4is_q4c_xa ); $m4is__xysg = $m4is_j0n7['lesson']->ID; if ($m4is__xysg && $m4is_aicfp) { $m4is_galwv0 = get_post_meta($m4is__xysg); $m4is_eum9fq = empty($m4is_galwv0['_is4wp_learndash_goals'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_goals'][0]; $m4is_znf9 = empty($m4is_galwv0['_is4wp_learndash_tags'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_tags'][0]; $m4is_l926 = empty($m4is_galwv0['_is4wp_learndash_actions'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_actions'][0]; memberium_app()->m4is_rctzo($m4is_eum9fq, $m4is_aicfp ); memberium_app()->m4is__mkz($m4is_znf9, $m4is_aicfp ); memberium_app()->m4is_evrbh($m4is_l926, $m4is_aicfp ); } } 
function m4is_eeik($m4is_j0n7) { $m4is__xysg = isset($m4is_j0n7['topic']->ID) ? $m4is_j0n7['topic']->ID : 0; $m4is_q4c_xa = isset($m4is_j0n7['user']->ID) ? $m4is_j0n7['user']->ID : get_current_user_id(); $m4is_aicfp = (int) m4is_zbyh::m4is_fhxr6($m4is_q4c_xa); if ($m4is__xysg && $m4is_aicfp) { $m4is_galwv0 = get_post_meta($m4is__xysg); $m4is_eum9fq = empty($m4is_galwv0['_is4wp_learndash_goals'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_goals'][0]; $m4is_znf9 = empty($m4is_galwv0['_is4wp_learndash_tags'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_tags'][0]; $m4is_l926 = empty($m4is_galwv0['_is4wp_learndash_actions'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_actions'][0]; memberium_app()->m4is_rctzo($m4is_eum9fq, $m4is_aicfp ); memberium_app()->m4is__mkz($m4is_znf9, $m4is_aicfp ); memberium_app()->m4is_evrbh($m4is_l926, $m4is_aicfp ); } do_action('memberium/lms/completion', $m4is_q4c_xa, $m4is__xysg); } 
function m4is_ea9h($m4is_j0n7, $m4is_nzrv1) { $m4is_q4c_xa = isset( $m4is_nzrv1->ID ) ? $m4is_nzrv1->ID : get_current_user_id(); $m4is_aicfp = (int) m4is_zbyh::m4is_fhxr6( $m4is_q4c_xa ); $m4is__xysg = isset($m4is_j0n7['quiz']->ID) ? $m4is_j0n7['quiz']->ID : 0; $m4is__xysg = isset($m4is_j0n7['quiz']) ? $m4is_j0n7['quiz'] : $m4is__xysg; if ($m4is__xysg && $m4is_aicfp ) { $m4is_galwv0 = get_post_meta($m4is__xysg); $m4is_eum9fq = ''; $m4is_znf9 = ''; $m4is_l926 = ''; if ($m4is_j0n7['pass']) { $m4is_eum9fq = empty($m4is_galwv0['_is4wp_learndash_goals'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_goals'][0]; $m4is_znf9 = empty($m4is_galwv0['_is4wp_learndash_tags'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_tags'][0]; $m4is_l926 = empty($m4is_galwv0['_is4wp_learndash_actions'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_actions'][0]; } else { $m4is_eum9fq = empty($m4is_galwv0['_is4wp_learndash_fail_goals'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_fail_goals'][0]; $m4is_znf9 = empty($m4is_galwv0['_is4wp_learndash_fail_tags'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_fail_tags'][0]; $m4is_l926 = empty($m4is_galwv0['_is4wp_learndash_fail_actions'][0]) ? '' : $m4is_galwv0['_is4wp_learndash_fail_actions'][0]; } memberium_app()->m4is_rctzo($m4is_eum9fq, $m4is_aicfp ); memberium_app()->m4is__mkz($m4is_znf9, $m4is_aicfp ); memberium_app()->m4is_evrbh($m4is_l926, $m4is_aicfp ); do_action('memberium/lms/completion', $m4is_q4c_xa, $m4is__xysg); } } 
function m4is_yyfg4r() { $m4is_cpwjsn = 'm4is_pdof'; add_shortcode('memb_learndash_is_completed', [$m4is_cpwjsn, 'm4is_j87wq']); add_shortcode('memb_learndash_is_enrolled', [$m4is_cpwjsn, 'm4is_fr9id']); add_shortcode('memb_learndash_course_enroll', [$m4is_cpwjsn, 'm4is_cn5g']); add_shortcode('memb_learndash_course_unenroll', [$m4is_cpwjsn, 'm4is_cn5g']); } 
function m4is_djl_30() { remove_shortcode('memb_learndash_course_enroll'); remove_shortcode('memb_learndash_course_unenroll'); remove_shortcode('memb_learndash_is_completed'); remove_shortcode('memb_learndash_is_enrolled'); } 
function m4is_nn4b() { if ( m4is_pcys::m4is_a6x52r()->post_type == 'sfwd-quiz' ) {   } }  
function m4is_w73uj9( $m4is_w9u6, $m4is_pgsbl ) { if ( method_exists( m4is_pcys::m4is_a6x52r(), 'm4is_whka') ) { $m4is_o2td = m4is_pcys::m4is_a6x52r()->m4is_whka( $m4is_pgsbl->ID ); if ( ! $m4is_o2td ) { return $m4is_pgsbl->excerpt; } } return null; }  
function m4is_zkbqet( $m4is_vkc5, $m4is__xysg ) { $m4is_pizyx = get_post_meta( $m4is__xysg, '_is4wp_learndash_redirect', TRUE ); if ( $m4is_pizyx ) { return do_shortcode( $m4is_pizyx ); } else { return $m4is_vkc5; } }  
function m4is_c6dj8t( $m4is_wmzqp ) { $m4is_wmzqp['A4_EXTRA'] = 'A4 Extra'; $m4is_wmzqp['A4_LONG'] = 'A4 Long'; $m4is_wmzqp['A4_SUPER'] = 'A4 Super'; $m4is_wmzqp['COMPACT'] = 'Compact'; $m4is_wmzqp['FOOLSCAP'] = 'Foolscap'; $m4is_wmzqp['GLETTER'] = 'Government Letter'; $m4is_wmzqp['GOVERNMENTLEGAL'] = 'Government Legal'; $m4is_wmzqp['JLEGAL'] = 'Junior Legal'; $m4is_wmzqp['LEDGER'] = 'Ledger'; $m4is_wmzqp['LEGAL'] = 'Legal'; $m4is_wmzqp['TABLOID'] = 'Tabloid'; return $m4is_wmzqp; }  
function m4is_pi85_t($m4is_kvts, $m4is_ho0w2 = '', $m4is_w5ky4q = []) { $m4is_kvts = empty($m4is_kvts) ? get_current_user_id() : $m4is_kvts; $m4is_p78sgz = [ 'description' => '', ]; $m4is_w5ky4q = wp_parse_args($m4is_w5ky4q, $m4is_p78sgz); $m4is_mhi_0 = [ 'post_author' => $m4is_kvts, 'post_title' => $m4is_ho0w2, 'post_content' => $m4is_w5ky4q['description'], ]; $m4is__xysg = wp_insert_post($m4is_mhi_0); if (! is_a($m4is__xysg, 'WP_Error')) { learndash_set_groups_administrators($m4is__xysg, [$m4is_kvts]); } } }
