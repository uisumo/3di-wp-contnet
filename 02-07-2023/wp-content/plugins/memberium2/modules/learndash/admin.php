<?php
 class_exists('m4is_emz57o') || die(); final 
class m4is_mktb { private $core = null; static 
function m4is_a6x52r() : self { static $m4is_jprj8; return isset( $m4is_jprj8 ) ? $m4is_jprj8 : $m4is_jprj8 = new self; } private 
function __construct() { $this->m4is_ap508(); }  private 
function m4is_ap508() { add_action( 'admin_init', [$this, 'm4is_db0td'] ); add_action( 'edit_form_after_title', [$this, 'm4is_s01u'], 10, 1 ); add_action( 'manage_posts_custom_column', [$this, 'm4is_c4zj3'], 10, 2 ); add_filter( 'manage_posts_columns', [$this, 'm4is_gib5sz'] ); add_filter( 'memberium/modules/active/names', [$this, 'm4is_a5tu'], 10, 1 ); add_filter( 'memberium/wpadmin/allow', [$this, 'm4is_z2oc69'] ); } 
function m4is_gib5sz( $m4is_zv_f ) { $m4is_dmesa = isset( $_GET['post_type'] ) ? $_GET['post_type'] : 'post'; $m4is_jdpxc = []; $m4is_yrlf0 = []; if ( $m4is_dmesa == 'groups' ) { $m4is_jdpxc['autojoin'] = 'AutoJoin Tag'; } elseif ( $m4is_dmesa == 'sfwd-courses' ) { $m4is_jdpxc['autoenroll'] = 'AutoEnroll Tag'; } elseif ( $m4is_dmesa == 'sfwd-lessons' ) { } elseif ( $m4is_dmesa == 'sfwd-quiz' ) { } elseif ( $m4is_dmesa == 'sfwd-topic' ) { } $m4is_zv_f = array_merge( $m4is_zv_f, $m4is_jdpxc ); foreach ( $m4is_yrlf0 as $m4is_ap3_ ) { unset( $m4is_zv_f[$m4is_ap3_] ); } return $m4is_zv_f; } 
function m4is_c4zj3( $m4is_t1s26, $m4is__xysg ) { if ( $m4is_t1s26 == 'autojoin' ) { $m4is_j0n7 = array_filter( explode( ',', trim( get_post_meta( $m4is__xysg, '_is4wp_learndash_autojoin', true ), ', ' ) ) ); echo implode( ', ', $m4is_j0n7 ); } elseif ( $m4is_t1s26 == 'autoenroll' ) { $m4is_j0n7 = array_filter( explode( ',', trim( get_post_meta( $m4is__xysg, '_is4wp_learndash_autoenroll', true ), ', ' ) ) ); echo implode( ', ', $m4is_j0n7 ); } }  
function m4is_a5tu($m4is_its6y = []) { return array_merge($m4is_its6y, ['LearnDash for Memberium']); }  
function m4is_db0td() { $m4is_dmesa = m4is_zvyj::m4is_a6x52r()->m4is_w5zj(); $m4is_r79z6u = $this->m4is_qgfr(); if ( in_array( $m4is_dmesa, $m4is_r79z6u ) || substr( $m4is_dmesa, 0, 5 ) == 'sfwd-' ) { add_meta_box( 'is4wp-learndash-actions', 'LearnDash Memberium Integration', [$this, 'm4is__ts6l7'], $m4is_dmesa, 'side' ); } add_action( 'save_post', [$this, 'm4is_hosig'] ); }  
function m4is_qgfr() { return [ 'groups', 'sfwd-courses', 'sfwd-lessons', 'sfwd-topic', 'sfwd-quiz', 'sfwd-certificates', ]; }  
function m4is__ts6l7() { global $post; $m4is_ti8od = []; $m4is_es7u = get_post_meta( $post->ID ); $m4is_ekvmr = [  '_is4wp_learndash_actions', '_is4wp_learndash_assignment_approved_actions', '_is4wp_learndash_assignment_approved_tags', '_is4wp_learndash_assignment_upload_actions', '_is4wp_learndash_assignment_upload_tags', '_is4wp_learndash_autoenroll', '_is4wp_learndash_autojoin', '_is4wp_learndash_badges', '_is4wp_learndash_fail_actions', '_is4wp_learndash_fail_goals', '_is4wp_learndash_fail_tags', '_is4wp_learndash_goals', '_is4wp_learndash_orientation', '_is4wp_learndash_pdfformat', '_is4wp_learndash_redirect', '_is4wp_learndash_shortcodes', '_is4wp_learndash_tags', '_is4wp_learndash_drip_feed_override', ]; foreach( $m4is_ekvmr as $m4is_ap3_ ) { if ( isset( $m4is_es7u[$m4is_ap3_][0] ) ) { $m4is_ti8od[$m4is_ap3_] = $m4is_es7u[$m4is_ap3_][0]; } else { $m4is_ti8od[$m4is_ap3_] = ''; } } unset( $metas, $m4is_ekvmr, $m4is_ap3_ ); wp_nonce_field( memberium_app()->m4is_yl5j8(), "memberium_membershipaccess_nonce_{$post->ID}"); if ( $post->post_type == 'sfwd-certificates' ) { echo '<p>Certificate PDF Format</p>'; echo '<label for="_is4wp_learndash_pdfformat">' . _e( "Page Size", 'memberium' ) . ':</label> '; echo '<select name="_is4wp_learndash_pdfformat" id="_is4wp_learndash_pdfformat">'; $m4is_bpft = [ '' => 'Default', 'A4_EXTRA' => 'A4 Extra', 'A4_LONG' => 'A4 Long', 'A4_SUPER' => 'A4 Super', 'A4' => 'A4', 'GOVERNMENTLETTER' => 'Government Letter', 'LETTER' => 'US Letter', 'PA4' => 'PA4', 'RA4' => 'RA4', 'SRA4' => 'SRA4', 'SUPER_A4' => 'Super A4', ]; foreach( $m4is_bpft as $m4is_w5kjue => $m4is_ho0w2 ) { echo '<option value="', $m4is_w5kjue, '" ', ( $m4is_ti8od['learndash_pdfformat'] == $m4is_w5kjue ? ' selected="selected" ' : '' ) , '>', $m4is_ho0w2, '</option>'; } unset( $m4is_w5kjue, $m4is_ho0w2 ); echo '</select><br /><br />'; echo '<label for="_is4wp_learndash_orientation">' . _e( "Page Orientation", 'memberium' ) . ':</label> '; echo '<select name="_is4wp_learndash_orientation" id="_is4wp_learndash_orientation">'; $m4is_bpft = [ '' => 'Automatic', 'L' => 'Landscape', 'P' => 'Portrait', ]; foreach( $m4is_bpft as $m4is_w5kjue => $m4is_ho0w2 ) { echo '<option value="', $m4is_w5kjue, '" ', ( $m4is_ti8od['learndash_orientation'] == $m4is_w5kjue ? ' selected="selected" ' : '' ) , '>', $m4is_ho0w2, '</option>'; } echo '</select><br /><br />'; } $m4is_dhubln = [ 'sfwd-courses', 'sfwd-lessons', 'sfwd-quiz', 'sfwd-topic', ]; if ( in_array( $post->post_type, $m4is_dhubln ) ) {  if ( in_array( $post->post_type, ['sfwd-courses']) ) { echo '<label for="_is4wp_learndash_autoenroll">', _e( "AutoEnroll Tags", 'memberium' ), ':</label> '; echo '<input name="_is4wp_learndash_autoenroll" class="multitaglist " style="width:100%; max-width:100%" value="', ( $m4is_ti8od['_is4wp_learndash_autoenroll'] > '' ? $m4is_ti8od['_is4wp_learndash_autoenroll'] : '' ), '"><br /><br />'; }  echo '<p>On completion of this section, execute the following actions:</p>'; echo '<label for="_is4wp_learndash_goals">' . _e( "Achieve these Goals", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_goals" style="width:100%; max-width:100%" value="', ( $m4is_ti8od['_is4wp_learndash_goals'] > '' ? $m4is_ti8od['_is4wp_learndash_goals'] : '' ), '"><br /><br />'; echo '<label for="_is4wp_learndash_tags">' . _e( "Apply these Tags", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_tags" class="multitaglist " style="width:100%; max-width:100%" value="', ( $m4is_ti8od['_is4wp_learndash_tags'] > '' ? $m4is_ti8od['_is4wp_learndash_tags'] : '' ), '"><br /><br />'; echo '<label for="_is4wp_learndash_actions">' . _e( "Run this Actionset", 'memberium' ) . ':</label> '; echo '<select class="actionset-selector" name="_is4wp_learndash_actions" style="width:100%; max-width:100%">'; echo '<option value="0">(No Actions)</option>'; $m4is_b8ve = m4is_f84s3h::m4is_wl42q6(); foreach ( $m4is_b8ve as $m4is_cga2c=>$m4is_bnlctw ) { echo '<option value="', $m4is_cga2c, '" ', ( $m4is_ti8od['_is4wp_learndash_actions'] == $m4is_cga2c ? ' selected="selected" ' : '' ) , '>', $m4is_bnlctw, '</option>'; } unset( $m4is_cga2c, $m4is_bnlctw ); echo '</select>'; echo '<br /><br />'; if ( $post->post_type == 'sfwd-quiz' ) { echo '<p>If the student <strong style="color:red;">fails</strong> this test, execute the following actions:</p>'; echo '<label for="_is4wp_learndash_fail_goals">' . _e( "Achieve these Goals", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_fail_goals" style="width:100%; max-width:100%" value="', ( $m4is_ti8od['_is4wp_learndash_fail_goals'] > '' ? $m4is_ti8od['_is4wp_learndash_fail_goals'] : '' ), '"><br /><br />'; echo '<label for="_is4wp_learndash_fail_tags">' . _e( "Apply these Tags", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_fail_tags" class="multitaglist" style="width:100%; max-width:100%" value="', ( $m4is_ti8od['_is4wp_learndash_fail_tags'] > '' ? $m4is_ti8od['_is4wp_learndash_fail_tags'] : '' ), '"><br /><br />'; echo '<label for="_is4wp_learndash_fail_actions">' . _e( "Run this Actionset", 'memberium' ) . ':</label> '; echo '<select class="actionset-selector" name="_is4wp_learndash_fail_actions" style="width:100%; max-width:100%">'; echo '<option value="0">(No Actions)</option>'; foreach ( $m4is_b8ve as $m4is_cga2c=>$m4is_bnlctw ) { echo '<option value="', $m4is_cga2c, '" ', ( $m4is_ti8od['_is4wp_learndash_fail_actions'] == $m4is_cga2c ? ' selected="selected" ' : '' ) , '>', $m4is_bnlctw, '</option>'; } echo '</select>'; } unset( $m4is_b8ve, $m4is_cga2c, $m4is_bnlctw );  if ( in_array( $post->post_type, ['sfwd-courses']) ) { echo '<label for="_is4wp_learndash_drip_feed_override">', _e( "Drip Feed override", 'memberium' ), ':</label> '; echo '<input name="_is4wp_learndash_drip_feed_override" class="have-not-have-tag-selector" style="width:100%; max-width:100%" value="', ( $m4is_ti8od['_is4wp_learndash_drip_feed_override'] > '' ? $m4is_ti8od['_is4wp_learndash_drip_feed_override'] : '' ), '"><br /><br />'; echo '<p>Tag access check will override the Lesson Release Schedule settings for Enrollment Days or Specific Date on all Lessons in this course.</p>'; }  if ( in_array( $post->post_type, ['sfwd-courses']) ) { echo '<label for="_is4wp_learndash_redirect">' . _e( "Redirect to", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_redirect" style="width:100%; max-width:100%" value="', ( $m4is_ti8od['_is4wp_learndash_redirect'] > '' ? $m4is_ti8od['_is4wp_learndash_redirect'] : '' ), '"><br /><br />'; } } if ( $post->post_type == 'groups' ) { $m4is_vcl9 = empty( $m4is_ti8od['_is4wp_learndash_autojoin'] )? '' : trim( $m4is_ti8od['_is4wp_learndash_autojoin'], ', '); echo '<label for="_is4wp_learndash_autojoin">' . _e( "Group Auto-Join Tags", 'memberium' ) . ':</label> '; echo '<input name="_is4wp_learndash_autojoin" class="multitaglist" style="width:100%; max-width:100%" value="', $m4is_vcl9, '"><br /><br />'; } add_action( 'admin_footer', [ m4is_zvyj::m4is_a6x52r(), 'm4is_o8eji3'] ); }  
function m4is_nijztb() { }  
function m4is_hosig($m4is__xysg) {  if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) { return; }  if ( empty( $_POST["memberium_membershipaccess_nonce_{$m4is__xysg}"] ) || ! wp_verify_nonce( $_POST["memberium_membershipaccess_nonce_{$m4is__xysg}"], memberium_app()->m4is_yl5j8() ) ) { return; } if ( ! current_user_can('edit_posts', $m4is__xysg) ) { return; } $m4is_ekvmr = [ '_is4wp_learndash_achievement', '_is4wp_learndash_actions', '_is4wp_learndash_assignment_approved_actions', '_is4wp_learndash_assignment_approved_tags', '_is4wp_learndash_assignment_upload_actions', '_is4wp_learndash_assignment_upload_tags', '_is4wp_learndash_autoenroll', '_is4wp_learndash_autojoin', '_is4wp_learndash_badges', '_is4wp_learndash_fail_actions', '_is4wp_learndash_fail_goals', '_is4wp_learndash_fail_tags', '_is4wp_learndash_goals', '_is4wp_learndash_orientation', '_is4wp_learndash_pdfformat', '_is4wp_learndash_redirect', '_is4wp_learndash_shortcodes', '_is4wp_learndash_tags', '_is4wp_learndash_drip_feed_override', '_is4wp_lms_complete_percent', '_is4wp_lms_completed', '_is4wp_lms_grade', '_is4wp_lms_start_date', ]; foreach( $m4is_ekvmr as $m4is_ap3_ ) { $_POST[$m4is_ap3_] = isset( $_POST[$m4is_ap3_] ) ? $_POST[$m4is_ap3_] : ''; if (empty($_POST[$m4is_ap3_])) { delete_post_meta($m4is__xysg, $m4is_ap3_); } else { add_post_meta( $m4is__xysg, $m4is_ap3_, $_POST[$m4is_ap3_], true ) or update_post_meta( $m4is__xysg, $m4is_ap3_, $_POST[$m4is_ap3_] ); } } }  
function m4is_z2oc69($m4is_tg04) { if (! $m4is_tg04) { $m4is_zcq27o = [ 'learndash_propanel_template', 'ld-report-download', ]; foreach($m4is_zcq27o as $m4is_mk9hg) { $m4is_tg04 = array_key_exists($m4is_mk9hg, $_GET); if ($m4is_tg04) { break; } } } return $m4is_tg04; }  
function m4is_s01u( $m4is_pgsbl ) { if (! empty($m4is_pgsbl->post_type) && $m4is_pgsbl->post_type == 'sfwd-courses') { $m4is_duibwv = ('open' == learndash_get_course_meta_setting($m4is_pgsbl->ID, 'course_price_type') ); if ($m4is_duibwv) { $m4is_vkc5 = '<a target="_blank" href="https://memberium.com/?p=7948">Click here</a> for more information.'; echo '<div style="background-color:white;border-radius:10px;border-style:solid;border-color:darkred;padding:10px;">'; echo '<p><strong>Warning:</strong></p>'; echo '<p>Because your course is marked as "open", all site members will be enrolled in it regardless of tags or memberships.</p>'; echo '<p>We recommend setting your course as "closed".</p>'; echo "<p>{$m4is_vkc5}</p>"; echo '</div>'; } } } }
