<?php
/**
 * Copyright (c) 2022 David J Bullock
 * Web Power and Light
 */

 class_exists('m4is_emz57o') || die();  
class m4is_rav1 { private $version; private $to_json = [];  
function __construct($m4is_hsyp0) { $this->version = $m4is_hsyp0; }  
function frontend_scripts() { $m4is_waxrhu = $this->version; $m4is_bq_zw = WPAL_ZOOM_URL . 'assets/'; wp_register_script("wpal-zoom-js", "{$m4is_bq_zw}wpal-zoom.js", [], $m4is_waxrhu); wp_register_style("wpal-zoom-css", "{$m4is_bq_zw}wpal-zoom.css", [], $m4is_waxrhu, 'all'); add_action("wp_footer", [$this, "frontend_footer"]); }  
function zoom_event_func( $m4is_qvehs, $m4is_amunwi, $m4is_w9feq2 ){ m4is_d8yr0_::m4is_vsv0mr(); $m4is_qvehs = shortcode_atts([ 'className' => '', 'id' => 0, 'password' => '', 'host' => 0 ], $m4is_qvehs );  $m4is_zpwc5 = $m4is_qvehs['className'] > "" ? esc_attr($m4is_qvehs['className']) : ""; $m4is_zpwc5 = $m4is_zpwc5 > '' ? " {$m4is_zpwc5}" : ""; $m4is_hw9v8b = 'wpal-zoom-meetings'; $m4is_zpwc5 .= $m4is_zpwc5 > '' ? " {$m4is_hw9v8b}" : $m4is_hw9v8b;  $m4is_b40e_m = esc_attr($m4is_qvehs['id']); $m4is_b40e_m = $m4is_b40e_m > '' ? (int)str_replace(' ', '', $m4is_b40e_m) : 0; $m4is_p1ug = esc_attr($m4is_qvehs['password']); $m4is_pjyva_ = (int)esc_attr($m4is_qvehs['host']); $m4is_hqmdn = 0;  $m4is_b8qb = m4is_dn1_a()->m4is_mmdrl('api_key'); $m4is_q4c_xa = get_current_user_id(); if( $m4is_b40e_m < 1 ) { return $this->display_error(__('Zoom event ID is required.', 'wpal-zoom')); } else if( empty($m4is_p1ug) ){ return $this->display_error(__('Zoom event password is required.', 'wpal-zoom')); } else if( empty($m4is_b8qb) ){ return $this->display_error(__('Zoom api key is missing.', 'wpal-zoom')); }  if( (int)$m4is_q4c_xa < 1 ){ return $this->display_error(__('You must be logged in to join this event.', 'wpal-zoom')); } else { $m4is_li4oh7 = get_userdata( $m4is_q4c_xa ); $m4is_x3_8z = trim("{$m4is_li4oh7->first_name} {$m4is_li4oh7->last_name}"); $m4is_ijvi = strtolower($m4is_li4oh7->user_email); $m4is_hqmdn = ( $m4is_pjyva_ > 0 && $m4is_pjyva_ === $m4is_q4c_xa ) ? 1 : 0; }  $m4is_te8p = 'wpal-zoom-iframe'; $m4is_sn6je = WPAL_ZOOM_URL . 'templates/zoom-frame.html';  $m4is_rpscuy = "<div id=\"{$m4is_hw9v8b}\" class=\"{$m4is_zpwc5}\">"; $m4is_rpscuy .= "<iframe id=\"{$m4is_te8p}\" data-src=\"{$m4is_sn6je}\" allowfullscreen></iframe>"; $m4is_rpscuy .= "</div>";  $this->set_to_json('zoom_meeting', [ 'frameId' => $m4is_te8p, 'buttonId' => 'wpal-start-event', 'eventID' => $m4is_b40e_m, 'leaveUrl' => $m4is_sn6je, 'passWord' => $m4is_p1ug, 'apiKey' => $m4is_b8qb, 'userName' => $m4is_x3_8z, 'userEmail' => $m4is_ijvi, 'role' => $m4is_hqmdn, 'signature' => m4is_dn1_a()->api()->m4is_myic5($m4is_b40e_m, $m4is_hqmdn) ]); return $m4is_rpscuy; }  
function display_error($m4is_a6g9qj){ $m4is_rpscuy = "<div class=\"wpal-zoom-error\">"; $m4is_rpscuy .= "<p>{$m4is_a6g9qj}</p>"; $m4is_rpscuy .= "</div>"; return $m4is_rpscuy; }  
function frontend_footer() { $m4is_z4own = $this->get_to_json(); if( !empty($m4is_z4own) ){ $m4is_q4c_xa = get_current_user_id(); $m4is_z4own['user_id'] = $m4is_q4c_xa; if( isset($m4is_z4own['zoom_meeting']) ){ wp_enqueue_style('wpal-zoom-css'); wp_enqueue_script('wpal-zoom-js'); wp_localize_script('wpal-zoom-js', 'wpal_zoom_data', $m4is_z4own); } } }  
function set_to_json($m4is_ap3_, $m4is_rhfd = false) { if ($m4is_rhfd) { $this->to_json[$m4is_ap3_] = $m4is_rhfd; } else { unset($this->to_json[$m4is_ap3_]); } }  
function get_to_json($m4is_ap3_ = false) { if ($m4is_ap3_) { return (isset($this->to_json[$m4is_ap3_])) ? $this->to_json[$m4is_ap3_] : null; } else { return $this->to_json; } } }
