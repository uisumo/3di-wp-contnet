<?php
/**
 * Copyright (c) 2018-2022 David J Bullock
 * Web Power and Light
*/

 class_exists('m4is_emz57o') || die();  final 
class m4is_q8af3 { public $slug = 'beaver_builder';  public $container_els = ['section', 'column'];  public $module_visibility = [];  public $container_visibility = [];  public $widget_visibility = [];  static 
function m4is_a6x52r() : self { static $m4is_jprj8; return isset( $m4is_jprj8 ) ? $m4is_jprj8 : $m4is_jprj8 = new self; } private 
function __construct() { $this->m4is_gopgz(); } 
function m4is_gopgz() {  add_action( 'fl_builder_before_render_row', [$this, 'm4is_l35c0i'], 10, 2 ); add_action( 'fl_builder_after_render_row', [$this, 'm4is_k8myu'], 10, 2 );  add_action( 'fl_builder_before_render_column_group', [$this, 'm4is_pdbgy'], 10, 2 ); add_action( 'fl_builder_after_render_column_group', [$this, 'm4is_vsb4_'], 10, 2 );  add_action( 'fl_builder_before_render_module', [$this, 'm4is_da49c'], 10, 1 ); add_action( 'fl_builder_after_render_module', [$this, 'm4is_xybhfd'], 10, 1 ); }  
function m4is_l35c0i( object $m4is_wo7c93 ) { if ( ! $this->m4is_ku9h( $m4is_wo7c93->settings ) ){ $this->container_visibility[ $m4is_wo7c93->node ] = $m4is_wo7c93->node; add_filter('fl_builder_template_path', [$this, 'm4is_ddl1im'], 1); } }  
function m4is_k8myu( object $m4is_wo7c93 ){ if ( isset( $this->container_visibility[ $m4is_wo7c93->node ] ) ){ remove_filter( 'fl_builder_template_path', [$this, 'm4is_ddl1im'], 1 ); unset( $this->container_visibility[ $m4is_wo7c93->node ] ); } }  
function m4is_ddl1im() { return false; }  
function m4is_pdbgy( object $m4is_gbok, array $m4is_h9_eh ) { $m4is_tfs4ie = true; $m4is_pafo = []; if ( $m4is_tfs4ie ){ if ( is_array( $m4is_h9_eh ) ){ $m4is_uhfcb = count($m4is_h9_eh); foreach ($m4is_h9_eh as $m4is__wsdob => $m4is_o49lqo) { if ( $m4is_o49lqo->type === 'column' && $m4is_o49lqo->settings > '' ){ if ( ! $this->m4is_ku9h( $m4is_o49lqo->settings ) ) { $m4is_uhfcb --; if ( ! isset( $m4is_pafo[ $m4is_gbok->node ] ) ){ $m4is_pafo[ $m4is_gbok->node ] = []; } $m4is_pafo[$m4is_gbok->node][$m4is_o49lqo->node] = $m4is_o49lqo->node; } } }  if ( $m4is_uhfcb > 0 ){ if ( ! empty($m4is_pafo) ){ $this->container_visibility[$m4is_gbok->parent] = $m4is_pafo; } }  else { if ( ! isset($this->container_visibility[$m4is_gbok->parent]) ) { $this->container_visibility[ $m4is_gbok->parent ] = []; } $this->container_visibility[ $m4is_gbok->parent ][ $m4is_gbok->node ] = true; add_filter('fl_builder_template_path', [$this, 'm4is_t2i3n'], 2); } } } }  
function m4is_vsb4_( object $m4is_gbok, array $m4is_h9_eh ) { $m4is_cvx8l = $m4is_gbok->parent; $m4is_hkx4o_ = $m4is_gbok->node;  if ( isset($this->container_visibility[$m4is_cvx8l]) ) {  if ( isset( $this->container_visibility[ $m4is_cvx8l ][ $m4is_hkx4o_ ] ) ){  if ( is_array( $this->container_visibility[ $m4is_cvx8l ][ $m4is_hkx4o_ ] ) ){  } else {  remove_filter('fl_builder_template_path', [$this, 'm4is_t2i3n'], 2 ); unset( $this->container_visibility[ $m4is_cvx8l ][ $m4is_hkx4o_ ] ); } }  if ( empty( $this->container_visibility[ $m4is_cvx8l ] ) ){ unset( $this->container_visibility[ $m4is_cvx8l ] ); } } }  
function m4is_t2i3n() { return false; }  
function m4is_da49c( object $m4is_r19fjb ){ $m4is_iy_4f5 = $this->m4is_ku9h( $m4is_r19fjb->settings ); if ( $m4is_iy_4f5 ){  if ( is_array($this->container_visibility) && !empty($this->container_visibility) ){ foreach ($this->container_visibility as $m4is_mh5n09 => $m4is_wo7c93) {  if ( is_array($m4is_wo7c93) && !empty($m4is_wo7c93) ) { foreach ( $m4is_wo7c93 as $m4is_btrb => $m4is_dlsvh ) {  if ( is_array( $m4is_dlsvh ) && !empty( $m4is_dlsvh ) ){ foreach ($m4is_dlsvh as $m4is_t7cf39 => $m4is_zv_f) { if ( $m4is_t7cf39 === $m4is_r19fjb->parent ){ $m4is_iy_4f5 = false; } } } } } } } }  if ( ! $m4is_iy_4f5 ){ $this->module_visibility[] = $m4is_r19fjb->node; add_filter('fl_builder_template_path', [$this, 'm4is_z5gf1'], 3 ); } }  
function m4is_xybhfd( object $m4is_r19fjb ) { $m4is_k67b = array_search( $m4is_r19fjb->node, $this->module_visibility ); if ( $m4is_k67b !== false ) { unset($this->module_visibility[$m4is_k67b]);  remove_filter('fl_builder_template_path', [$this, 'm4is_z5gf1'], 3); } }  
function m4is_z5gf1() { return false; }  
function m4is_ku9h( object $m4is_s8f2 ) : bool { $m4is_oqzu1 = m4is_l0uwos::PREFIX; $m4is_fdf0v = [];  foreach ($m4is_s8f2 as $m4is_ho0w2 => $m4is_rhfd) { if (strpos($m4is_ho0w2, "{$m4is_oqzu1}_membership_levels") !== false && $m4is_rhfd === '1' ) { $m4is_fdf0v[] = (int) str_replace("{$m4is_oqzu1}_membership_levels-", "", $m4is_ho0w2); } } $m4is_t3sb = isset($m4is_s8f2->{"{$m4is_oqzu1}_access_tags"}) ? $m4is_s8f2->{"{$m4is_oqzu1}_access_tags"} : ''; $m4is_t3sb = !empty($m4is_t3sb) && is_array($m4is_t3sb) ? implode(',', $m4is_t3sb) : $m4is_t3sb; $m4is_uq7fm = isset($m4is_s8f2->{"{$m4is_oqzu1}_access_tags2"}) ? $m4is_s8f2->{"{$m4is_oqzu1}_access_tags2"} : ''; $m4is_uq7fm = !empty($m4is_uq7fm) && is_array($m4is_uq7fm) ? implode(',', $m4is_uq7fm) : $m4is_uq7fm; $m4is_rxc9n1 = [ 'memberships' => implode( ',', $m4is_fdf0v ), 'any_membership' => isset($m4is_s8f2->{"{$m4is_oqzu1}_anymembership"}) && $m4is_s8f2->{"{$m4is_oqzu1}_anymembership"} === '1' ? 1 : 0, 'logged_in_only' => isset($m4is_s8f2->{"{$m4is_oqzu1}_loggedin"}) && $m4is_s8f2->{"{$m4is_oqzu1}_loggedin"} === '1' ? 1 : 0, 'logged_out_only' => isset($m4is_s8f2->{"{$m4is_oqzu1}_anonymous_only"}) && $m4is_s8f2->{"{$m4is_oqzu1}_anonymous_only"} === '1' ? 1 : 0, 'invert_results' => isset($m4is_s8f2->{"{$m4is_oqzu1}_invert_results"}) && $m4is_s8f2->{"{$m4is_oqzu1}_invert_results"} === '1' ? 1 : 0, 'contact_ids' => !empty($m4is_s8f2->{"{$m4is_oqzu1}_contact_ids"}) ? sanitize_text_field($m4is_s8f2->{"{$m4is_oqzu1}_contact_ids"}) : '', 'tags1' => !empty($m4is_t3sb) ? trim($m4is_t3sb, ',') : '', 'tags2' => !empty($m4is_uq7fm) ? trim($m4is_uq7fm, ',') : '', 'eval' => !empty($m4is_s8f2->{"{$m4is_oqzu1}_eval"}) ? trim($m4is_s8f2->{"{$m4is_oqzu1}_eval"}) : '', 'asset_id' => !empty($m4is_s8f2->{"{$m4is_oqzu1}_asset_id"}) ? sanitize_text_field($m4is_s8f2->{"{$m4is_oqzu1}_asset_id"}) : '' ]; return m4is_l0uwos::m4is_a6x52r()->m4is_dm0y8e()->m4is_tzv4o( $m4is_rxc9n1, $this->slug ); } }
