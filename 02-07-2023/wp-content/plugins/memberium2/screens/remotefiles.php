<?php
/**
 * Copyright (c) 2012-2022 David J Bullock
 * Web Power and Light, LLC
 * https://webpowerandlight.com
 * support@webpowerandlight.com
 */

 class_exists('m4is_emz57o') || die(); current_user_can( 'manage_options' ) || wp_die( __( 'You do not have sufficient permissions to access this page.' ) ); m4is_k9jo::m4is_burleh(); 
class m4is_k9jo { private static $m4is_tct_hk = []; static 
function m4is_burleh() { self::m4is_gopgz(); m4is__95_::m4is_r6_jy(); self::m4is_m0nl3(); self::self_show_header(); self::m4is_sm0nc(); self::m4is_wdp57(); self::m4is_h5yot(); } private static 
function m4is_wdp57() { $m4is_gmrohd = m4is_lr56w2::m4is_k26z(); echo '<h3>Add New S3 Profile</h3>'; echo '<div style="width:800px;">'; echo '<form method="POST" action="">'; echo '<table class="widefat">'; echo '<input type="hidden" name="type" value="s3">'; echo '<tr>'; echo '<th nowrap="nowrap">Profile Name</th>'; echo '<th nowrap="nowrap">Profile Type</th>'; echo '<th nowrap="nowrap">Default Host</th>'; echo '<th nowrap="nowrap">Default Bucket</th>'; echo '<th nowrap="nowrap">Region</th>'; echo '<th nowrap="nowrap">Access Key</th>'; echo '<th nowrap="nowrap">S3 Secret Key</th>'; echo '<th nowrap="nowrap">Expiration</th>'; echo '</tr>'; echo '<tr>'; echo '<td><input name="profile_name" type="text" size="10" autocomplete="off"/></td>'; echo '<td><select name="profile_type"><option value="s3">Amazon S3</option></select></td>'; echo '<td><input name="default_host" type="text" size="20" placeholder="s3.amazonaws.com" autocomplete="off"/></td>'; echo '<td><input name="default_bucket" type="text" size="20" autocomplete="off"/></td>'; echo '<td><select name="region"/>'; foreach($m4is_gmrohd as $m4is_e3k_mi => $m4is_waxrhu) { echo "<option value='{$m4is_waxrhu}' ".($m4is_waxrhu == 'us-east-1' ? ' selected ' : '') . ">{$m4is_e3k_mi}</option>"; } echo '</select></td>'; echo '<td><input name="s3_access_key" type="text" size="20" autocomplete="off"/></td>'; echo '<td><input name="s3_secret_key" type="text" size="20" autocomplete="off"/></td>'; echo '<td><input name="expiration" type="text" size="4" autocomplete="off"/></td>'; echo '</tr>'; echo '</table>'; echo '&nbsp;<br />'; echo '<input type="submit" name="add-profile" value="Add Remote Profile" class="button-primary" />'; echo '<hr />'; echo '</form>'; } private static 
function m4is_sm0nc() { $m4is_erxip5 = ! empty(self::$m4is_tct_hk['remote_files'] ) ? self::$m4is_tct_hk['remote_files'] : []; $m4is_hjep7 = count($m4is_erxip5 ); echo '<form method="POST" action="" autocomplete="off">'; echo '<table class="widefat" style="white-space:nowrap;">'; echo '<tr>'; echo '<th nowrap="nowrap">Profile Name</th>'; echo '<th nowrap="nowrap">Default Host</th>'; echo '<th nowrap="nowrap">Default Bucket</th>'; echo '<th nowrap="nowrap">Region</th>'; echo '<th nowrap="nowrap">S3 Access Key</th>'; echo '<th nowrap="nowrap">S3 Secret Key</th>'; echo '<th nowrap="nowrap">Expiration</th>'; echo '<th>Delete?</th>'; echo '</tr>'; if (empty($m4is_erxip5) ) { echo '<tr><td colspan="99">You have no remote storage defined.</td></tr>'; } else { foreach ($m4is_erxip5 as $m4is_zvtn2w => $m4is_g4ulmz ) { if ($m4is_g4ulmz['type'] == 's3' ) { echo '<tr>'; echo '<td><i class="fab fa-aws"></i> ', $m4is_g4ulmz['name'], '</td>'; echo '<td>', $m4is_g4ulmz['host'], '</td>'; echo '<td>', $m4is_g4ulmz['bucket'], '</td>'; echo '<td>', isset($m4is_g4ulmz['region']) ? $m4is_g4ulmz['region'] : 'Default', '</td>'; echo '<td>', $m4is_g4ulmz['access_key'], '</td>'; echo '<td>', substr($m4is_g4ulmz['secret_key'], 0, 8 ), '********</td>'; echo '<td>', (int)$m4is_g4ulmz['expiration'], '</td>'; echo '<td>'; echo '<input type="checkbox" name="delete[' . $m4is_zvtn2w . ']">'; echo '</td>'; echo '</tr>'; } } } echo '</table>'; echo '&nbsp;<br />'; if ($m4is_hjep7 > 0 ) { echo '<input type="submit" name="delete-profiles" value="Delete Profiles" class="button-secondary" />'; } echo '</form>'; echo '</div>'; } private static 
function self_show_header() { echo '<h1>Memberium Remote Files</h1>'; echo '<h3>Current Remote Storage Profiles', m4is__95_::m4is_d6u3(2578), '</h3>'; echo '<div class="wrap">'; echo '<hr />'; } private static 
function m4is_h5yot() { echo '</div>'; } private static 
function m4is_m0nl3() { if ($_SERVER['REQUEST_METHOD'] == 'POST' ) { if (isset($_POST['delete'] ) ) { foreach ($_POST['delete'] as $m4is_dxujw => $m4is_rr90 ) { if ($m4is_rr90 == 'on' ) { unset(self::$m4is_tct_hk['remote_files'][$m4is_dxujw] ); m4is__95_::m4is_hbfrj('Remote Storage Profile Deleted', 'error' ); } } } if (isset($_POST['add-profile'] ) && trim($_POST['profile_name'] ) > '' ) { $m4is_dxujw = strtolower(trim($_POST['profile_name'] ) ); $m4is_u2a3d5 = []; $m4is_u2a3d5['name'] = trim($_POST['profile_name'] ); $m4is_u2a3d5['type'] = 's3'; $m4is_u2a3d5['access_key'] = trim($_POST['s3_access_key'] ); $m4is_u2a3d5['expiration'] = (int) $_POST['expiration'] > 0 ? (int)$_POST['expiration'] : 300; $m4is_u2a3d5['secret_key'] = trim($_POST['s3_secret_key'] ); $m4is_u2a3d5['host'] = trim($_POST['default_host'] ) > '' ? trim($_POST['default_host'] ) : 's3.amazonaws.com'; $m4is_u2a3d5['bucket'] = trim($_POST['default_bucket'] ); $m4is_u2a3d5['region'] = isset($_POST['region']) ? trim($_POST['region'] ) : 'us-east-1'; self::$m4is_tct_hk['remote_files'][$m4is_dxujw] = $m4is_u2a3d5; } memberium_app()->m4is_iieoky( self::$m4is_tct_hk ); } } private static 
function m4is_gopgz() { self::$m4is_tct_hk = memberium_app()->m4is_mmdrl(); } }
