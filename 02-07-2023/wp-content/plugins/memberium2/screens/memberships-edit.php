<?php
/**
 * Copyright (c) 2012-2022 David J Bullock
 * Web Power and Light, LLC
 * https://webpowerandlight.com
 * support@webpowerandlight.com
 */

 class_exists( 'm4is_emz57o' ) || die(); current_user_can( 'manage_options' ) || wp_die( __( 'You do not have sufficient permissions to access this page.' ) ); $m4is_zvtn2w = empty($_GET['id']) ? 0 : (int) $_GET['id']; $m4is_tyoak = memberium_app()->m4is_mmdrl('memberships')[$m4is_zvtn2w]; if (is_array($m4is_tyoak ) ) { if (! isset($m4is_tyoak['main_id'] ) ) { $m4is_tyoak['main_id'] = $m4is_zvtn2w; } if (empty($m4is_tyoak['addltag_ids'] ) ) { $m4is_tyoak['addltag_ids'] = ''; }  echo '<div class="wrap memberium">'; echo '<p>Return to <a href="?page=memberium-memberships">Membership Screen</a></p>'; echo '<form method="post">'; echo '<h1 style="margin-bottom:10px;">Membership Level Editor</h1><br />'; echo '<label style="margin-left:0px;">Membership Name:</label>'; echo '<input type="text" name="name" value="', $m4is_tyoak['name'], '" required="required" style="font-size:180%; margin-top:-10px;">'; echo '<ul>'; echo '<h3>Tags</h3>'; echo '<li>'; echo '<label style="color:green;"><strong>Access Tag</strong></label>'; echo '<input disabled="disabled" value="', $m4is_zvtn2w, '" type="text" class="requiredtaglistdropdown" required="required" style="width:300px;">', m4is__95_::m4is_d6u3(0000 ); echo '</li>'; echo '<li>'; echo '<label style="color:green;"><strong>Add\'l Access Tags</strong></label>'; echo '<input value="', $m4is_tyoak['addltag_ids'], '" type="text" class="multitaglist" name="addltag_ids" style="width:500px;">', m4is__95_::m4is_d6u3(0000 ); echo '</li>'; echo '<li>'; echo '<label style="color:red;"><strong>Payment Failure</strong></label>'; echo '<input value="', (int) $m4is_tyoak['payf_id'], '" name="payf_id" type="text" class="taglistdropdown" style="width:350px;">', m4is__95_::m4is_d6u3(0000 ); echo '</li>'; echo '<li>'; echo '<label style="color:red;"><strong>Cancellation</strong></label>'; echo '<input value="', (int) $m4is_tyoak['cancel_id'], '" name="cancel_id" type="text" class="taglistdropdown" style="width:350px;">', m4is__95_::m4is_d6u3(0000 ); echo '</li>'; echo '<li>'; echo '<label style="color:red;"><strong>Suspension Tag</strong></label>'; echo '<input value="', (int) $m4is_tyoak['suspend_id'], '" name="suspend_id" type="text" class="taglistdropdown" style="width:350px;">', m4is__95_::m4is_d6u3(0000 ); echo '</li>'; echo '<hr>'; echo '<h3>Level</h3>'; echo '<li>'; echo '<label>Level</label>'; echo '<input type="number" value="', $m4is_tyoak['level'], '" name="level" min="0" max="999999" required="required" style="text-align:right; width: 80px;">', m4is__95_::m4is_d6u3(0000 ); echo '</li>'; echo '<hr>'; echo '<h3>Special Pages</h3>'; echo '<li>'; echo '<label>Home Page Priority</label>'; echo '<input type="number" value="', (int) $m4is_tyoak['login_redirect_priority'], '" name="login_redirect_priority" min="0" max="999999" required="required" style="text-align:right; width: 80px;">', m4is__95_::m4is_d6u3(0000 ); echo '</li>'; echo '<li>'; echo '<label>First Login Page</label>'; echo '<input value="', (int) $m4is_tyoak['first_login_page'], '" name="first_login_page" type="text" class="pagelistdropdown" style="width:500px;">'; echo '</li>'; echo '<li>'; echo '<label>Membership Home Page</label>'; echo '<input value="', $m4is_tyoak['login_page'], '" name="login_page" type="text" class="pagelistdropdown" style="width:500px;">'; echo '</li>'; echo '<li>'; echo '<label>Membership Logout Page</label>'; echo '<input value="', $m4is_tyoak['logout_page'], '" name="logout_page" type="text" class="pagelistdropdown" style="width:500px;">'; echo '</li>'; echo '<li>'; echo '<label>PAYF Home Page</label>'; echo '<input value="', (int) $m4is_tyoak['payf_homepage'] ,'" name="payf_homepage" type="text" class="pagelistdropdown" style="width:500px;">'; echo '</li>'; echo '<li>'; echo '<li>'; echo '<label>SUSP Home Page</label>'; echo '<input value="', (int) $m4is_tyoak['susp_homepage'] ,'" name="susp_homepage" type="text" class="pagelistdropdown" style="width:500px;">'; echo '</li>'; echo '<li>'; echo '<li>'; echo '<label>CANC Home Page</label>'; echo '<input value="', (int) $m4is_tyoak['canc_homepage'] ,'" name="canc_homepage" type="text" class="pagelistdropdown" style="width:500px;">'; echo '</li>'; echo '<li>'; echo '<hr>'; echo '<h3>Theme</h3>'; echo '<li>'; echo '<label>Theme</label>'; echo '<input value="', $m4is_tyoak['theme'], '" name="theme" type="text" class="themelistdropdown" style="width:250px;">'; echo '</li>'; if (! empty(memberium_app()->m4is_mmdrl('settings', 'dynamic_menus') ) ) { m4is__95_::m4is_i6c5('Exclude from Personal Menus','dynamic_menus', 0, $m4is_tyoak['dynamic_menus'] ); } else { echo '<input type="hidden" value="' . $m4is_tyoak['dynamic_menus'] . '" name="dynamic_menus">'; } echo '<hr>'; echo '<h3>Roles</h3>'; echo '<li>'; echo '<label>WordPress Roles</label>'; echo '<input value="" name="roles[]" type="hidden">'; echo '<select style="width:400px; height:1.6em;" class="roles-selector" name="roles[]" multiple="multiple" placeholder="Select WordPress roles to apply on login">'; echo '<option value="">(None)</option>'; if (empty($m4is_tyoak['roles'] ) ) { $m4is_tyoak['roles'] = []; } if (is_array($m4is_dtdi6 ) ) { foreach ($m4is_dtdi6 as $m4is_hqmdn ) { echo '<option value="', $m4is_hqmdn['id'], '" ', in_array($m4is_hqmdn['id'], $m4is_tyoak['roles'] ) ? ' selected="selected" ' : '', '>', $m4is_hqmdn['name'], '</option>'; } } echo '</select>', m4is__95_::m4is_d6u3(0000 ); echo '</li><br />'; do_action('memberium/memberships/edit', $m4is_tyoak); echo '<hr>'; echo '</ul>'; echo '<input type="submit" class="button-primary" value="Update Membership Level">'; echo '</form>'; echo '</div>';  $m4is_e7qs = wp_get_themes(); $m4is_j7xjy = []; $m4is_j7xjy[] = [ 'id' => '', 'text' => '(Default)' ]; foreach ($m4is_e7qs as $m4is_ho0w2 => $m4is_p1tdv ) { $m4is_j7xjy[] = [ 'id' => $m4is_ho0w2, 'text' => $m4is_p1tdv->Name ]; } $m4is_j7xjy = json_encode($m4is_j7xjy ); unset($m4is_ho0w2, $m4is_p1tdv, $m4is_e7qs );  $m4is_znf9 = memberium_app()->m4is_ee0h(TRUE ); $m4is_znf9 = $m4is_znf9['mc']; $m4is_w190f4 = []; $m4is_w190f4[] = [ 'id' => 0, 'text' => '(None)' ];  $m4is_yta_se = []; $m4is_fdf0v = (array) memberium_app()->m4is_mmdrl('memberships'); foreach ($m4is_fdf0v as $m4is_ap3_ => $m4is_rhfd ) { if ($m4is_ap3_ <> $m4is_zvtn2w) { $m4is_yta_se[] = $m4is_ap3_; $m4is_yta_se[] = $m4is_rhfd['payf_id']; $m4is_yta_se[] = $m4is_rhfd['cancel_id']; $m4is_yta_se[] = $m4is_rhfd['suspend_id']; } } $m4is_yta_se = array_unique(array_filter($m4is_yta_se ) ); foreach ( (array) $m4is_znf9 as $m4is_b40e_m => $m4is_w9feq2 ) { if (! in_array($m4is_b40e_m, $m4is_yta_se ) ) { $m4is_w190f4[] = [ 'id' => $m4is_b40e_m, 'text' => "{$m4is_w9feq2} ({$m4is_b40e_m})" ]; $m4is_gn1erg[] = [ 'id' => $m4is_b40e_m, 'text' => "{$m4is_w9feq2} ({$m4is_b40e_m})", ]; } } $m4is_w190f4 = json_encode($m4is_w190f4 ); $m4is_gn1erg = json_encode($m4is_gn1erg ); unset($m4is_znf9, $m4is_b40e_m, $m4is_w9feq2 ); $m4is_xq5r_m = m4is_p4xkl();  echo '<script>'; echo 'var themelist       = ', $m4is_j7xjy, ';'; echo 'var taglist         = ', $m4is_w190f4, ';'; echo 'var requiredtaglist = ', $m4is_gn1erg, ';'; echo 'var pagelist        = ', $m4is_xq5r_m, ';'; echo '</script>'; } else { echo '<p>Invalid Membership Id</p>'; }
