<?php
/**
 * Copyright (c) 2012-2022 David J Bullock
 * Web Power and Light, LLC
 * https://webpowerandlight.com
 * support@webpowerandlight.com
 *
 */

 class_exists('m4is_emz57o') || die();  final 
class m4is_o5aoir { const LICENSE_SERVER_HOST = 'https://licenseserver.webpowerandlight.com/'; const LICENSE_SERVER_URL = 'https://licenseserver.webpowerandlight.com/getlicense.php'; private static $license_key_name; private static $license_status; private static $trial_mode = false; private 
function __construct() {}  static 
function m4is_s105() { global $wpdb; $m4is_xvd3wf = $wpdb->get_var("SELECT COUNT(*) FROM `{$wpdb->users}`"); update_option('wpal/census', base_convert($m4is_xvd3wf, 10, 36), true); return $m4is_xvd3wf; }  static 
function m4is_i0_t() { $m4is_xvd3wf = base_convert(get_option('wpal/census', 0), 36, 10); if (! $m4is_xvd3wf ) { $m4is_xvd3wf = self::m4is_s105(); } return $m4is_xvd3wf; }  static 
function m4is_du5icq() { return self::$license_status; }   static 
function m4is_zw06() { $m4is_znf9 = ''; $m4is__u0k = self::m4is_ehns(); if (isset($m4is__u0k['tags']) ) { $m4is_znf9 = $m4is__u0k['tags']; } $m4is_znf9 = explode(',', strtolower($m4is_znf9) ); return $m4is_znf9; }  static 
function m4is_cgoarf() { return (boolean) self::$trial_mode; }  static 
function m4is_ehns( $m4is_b9yk = '' ) { $m4is_bknr = self::m4is_tqua(); $m4is__51iz = memberium_app()->m4is_mmdrl( 'settings', 'random_seed' ); if ( empty( $m4is_b9yk ) ) { $m4is_b9yk = self::m4is_y40c_u(); } $m4is_oknpuo = 3; $m4is_yfcw4 = 32; $m4is_n_bp6['valid'] = 0; $m4is_n_bp6['trial_mode'] = 0; $m4is_vqju9 = self::m4is_a4f5(); $m4is_barze = strtolower( trim( $m4is__51iz . $m4is_vqju9 ) ); $m4is_s0cb9 = $m4is__51iz; if ( $m4is_oknpuo == 3 ) { $m4is_bu2j1p = unserialize( base64_decode( substr( $m4is_b9yk, 32 ) ) ); $m4is_v87er0 = substr( $m4is_b9yk, 0, 32 ); $m4is_neq2 = md5( serialize( $m4is_bu2j1p ) . strtolower( $m4is_s0cb9 ) . strtolower( $m4is_vqju9 ) ); $m4is_n_bp6 = $m4is_bu2j1p; if ($m4is_neq2 == $m4is_v87er0) { $m4is_n_bp6['valid'] = 1; } else { $m4is_n_bp6['valid'] = 0; } $m4is_n_bp6['active'] = isset( $m4is_bu2j1p['active'] ) ? $m4is_bu2j1p['active'] : 0; $m4is_n_bp6['kill'] = isset( $m4is_bu2j1p['kill'] ) ? $m4is_bu2j1p['kill'] : 0; $m4is_n_bp6['max_users'] = isset( $m4is_bu2j1p['max_users'] ) ? $m4is_bu2j1p['max_users'] : 999999999; $m4is_n_bp6['max_version'] = isset( $m4is_bu2j1p['max_version'] ) ? $m4is_bu2j1p['max_version'] : 0; $m4is_n_bp6['min_version'] = isset( $m4is_bu2j1p['min_version'] ) ? $m4is_bu2j1p['min_version'] : 0; $m4is_n_bp6['next_check'] = isset( $m4is_bu2j1p['next_check'] ) ? $m4is_bu2j1p['next_check'] : 0; $m4is_n_bp6['renewal_date'] = isset( $m4is_bu2j1p['renewal_date'] ) ? $m4is_bu2j1p['renewal_date'] : 0; $m4is_n_bp6['tags'] = isset( $m4is_bu2j1p['tags'] ) ? $m4is_bu2j1p['tags'] : ''; $m4is_n_bp6['trial_mode'] = isset( $m4is_bu2j1p['trial_mode'] ) ? $m4is_bu2j1p['trial_mode'] : 0; $m4is_n_bp6['version'] = isset( $m4is_bu2j1p['version'] ) ? $m4is_bu2j1p['version'] : 0; $m4is_n_bp6['now'] = time(); $m4is_n_bp6['check_ttl'] = $m4is_n_bp6['next_check'] - time(); $m4is_n_bp6['expiration_ttl'] = $m4is_n_bp6['renewal_date'] - time(); if ( ! empty( $m4is_n_bp6['kill'] ) ) { if (! function_exists('deactivate_plugins') ) { require_once ABSPATH . '/wp-admin/includes/plugin.php'; } $m4is_n_bp6['active'] = 0; $m4is_thud = plugin_basename( MEMBERIUM_HOME ); deactivate_plugins( $m4is_thud, true, false ); deactivate_plugins( $m4is_thud, true, true ); wp_cache_flush(); if ( ! headers_sent() ) { $m4is__mto = is_admin() ? admin_url() : get_home_url(); header( "Location: {$m4is__mto}" ); } exit; } }  if ( $m4is_n_bp6['expiration_ttl'] < 1 ) { $m4is_n_bp6['active'] = 0; } if ( $m4is_n_bp6['max_users'] < self::m4is_i0_t() ) { $m4is_n_bp6['active'] = 0; } self::$trial_mode = (int) $m4is_n_bp6['trial_mode']; return $m4is_n_bp6; }   static 
function m4is_tqua() { static $m4is_ap3_ = ''; if ( ! empty( $m4is_ap3_ ) ) { return $m4is_ap3_; } $m4is__mto = get_bloginfo( 'url' ); $m4is_ap3_ = strtolower( soundex( $m4is__mto ) . metaphone( $m4is__mto, 16 ) ) . '_' . abs( crc32( $m4is__mto ) ) . '_memberium_license'; return $m4is_ap3_; }  static 
function m4is_y40c_u() { return get_option(m4is_o5aoir::m4is_tqua() ); } static 
function m4is_a4f5() { return preg_replace('/^www\./', '', strtolower(parse_url(get_bloginfo('url'), PHP_URL_HOST) ) ); }  static 
function m4is_qlzwa4(bool $m4is_fj79v = false) { $m4is_q7m2 = memberium_app()->m4is_re5x('appname'); if (empty($m4is_q7m2) ) { return false; } $m4is_j6tw = (time() - get_option('memberium/licenseserver/updated', 0) ); if ($m4is_fj79v === false) { if (function_exists('is_admin') && (! is_admin() ) ) { if ($m4is_j6tw < 28800) { return self::m4is_y40c_u(); } } } $m4is__51iz = memberium_app()->m4is_mmdrl('settings', 'random_seed'); $m4is_bknr = self::m4is_tqua(); $m4is_xqr1mu = function_exists('wp_get_environment_type') ? wp_get_environment_type() : 'production'; $m4is_nh0g_ = 'None'; $m4is__u0k = ''; $m4is_iikfu = [ 'method' => 'POST', 'timeout' => 10, 'redirection' => 5, 'httpversion' => '1.0', 'blocking' => true, 'headers' => [], 'cookies' => [], 'body' => [ 'admin_email' => get_bloginfo('admin_email'), 'appname' => $m4is_q7m2, 'environment' => $m4is_xqr1mu, 'checksum' => $m4is__51iz, 'hostname' => self::m4is_a4f5(), 'interval' => 32, 'ioncube_version' => $m4is_nh0g_, 'ip_address' => $_SERVER['SERVER_ADDR'], 'license_key' => '', 'php_version' => phpversion(), 'protocol_version' => 3, 'sku' => 'M4IS', 'url' => get_bloginfo('url'), 'user_count' => self::m4is_i0_t(), 'version' => memberium_app()->m4is_gu3m(), ], ]; $m4is_zv59 = wp_remote_post(self::LICENSE_SERVER_URL, $m4is_iikfu); if ( is_array( $m4is_zv59 ) ) { $m4is__u0k = $m4is_zv59['body']; $m4is_nvawk6 = self::m4is_ehns( $m4is__u0k ); update_option( 'memberium/licenseserver/status', 'pass', true ); if ($m4is_nvawk6['valid'] == 1) { update_option($m4is_bknr, $m4is__u0k); } else { $m4is__u0k = self::m4is_y40c_u(); } } elseif (is_a($m4is_zv59, 'WP_ERROR')) { update_option('memberium/licenseserver/status', 'fail', true); } update_option('memberium/licenseserver/updated', time(), 'yes'); return $m4is__u0k; }   static 
function m4is__qlbej() : bool { static $m4is_wql7a2 = -1;  if ($m4is_wql7a2 > -1) { return (boolean) $m4is_wql7a2; } $m4is__u0k = self::m4is_y40c_u(); $m4is_nvawk6 = self::m4is_ehns($m4is__u0k); $m4is_f0o49 = false; if (! $m4is_nvawk6['active']) { $m4is_f0o49 = true; } if (! $m4is_nvawk6['valid']) { $m4is_f0o49 = true; } if ($m4is_nvawk6['check_ttl'] < 10800) { $m4is_f0o49 = true; } if (false && $m4is_f0o49) { $m4is__u0k = self::m4is_qlzwa4(); $m4is_nvawk6 = self::m4is_ehns($m4is__u0k); }  $m4is_wql7a2 = isset($m4is_nvawk6['active']) ? (int) $m4is_nvawk6['active'] : 0;  if ($m4is_wql7a2 && isset($m4is_nvawk6['max_users']) ) { if ($m4is_nvawk6['max_users'] < self::m4is_i0_t() ) { $m4is_wql7a2 = 0; } } if ($m4is_wql7a2 && isset($m4is_nvawk6['max_version']) ) { if (version_compare($m4is_nvawk6['max_version'], memberium_app()->m4is_gu3m() ) <= 0) { $m4is_wql7a2 = 0; } } self::$license_status = $m4is_wql7a2; return (boolean) self::$license_status; }   static 
function m4is_m4q_z(array $m4is_sjcx06 = []) : bool { $m4is_gqd1 = self::m4is_zw06(); foreach($m4is_sjcx06 as $m4is_w9feq2) { if (in_array($m4is_w9feq2, $m4is_gqd1) ) { return true; } } return false; } }
