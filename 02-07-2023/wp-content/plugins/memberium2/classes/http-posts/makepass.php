<?php
 class_exists('m4is_emz57o') || die();  final 
class m4is_y2xzf { private $m4is_bxv7u, $m4is_h9r6 = true, $m4is_adiq = false, $m4is_tjzfa1 = 0, $m4is_m2h6b = '', $m4is_wjxa = false, $m4is_e7v8 = false, $m4is_ssdxa6 = [], $m4is_qw8dk = '', $m4is_xiu_ = [], $m4is_aaz9 = 0, $m4is_p2bxz1 = false, $m4is_p1ug = '', $m4is_jyx_t = '', $m4is_yw9rnp = 0, $m4is_pgsbl = [], $m4is_nzrv1 = null, $m4is_id576 = '', $m4is_rz4ur = '', $m4is_j38n_a = false; static 
function m4is_burleh( array $m4is_ssdxa6 = [], array $m4is_pgsbl = [] ) : self { static $m4is_jprj8; return $m4is_jprj8 ? $m4is_jprj8 : $m4is_jprj8 = new self( $m4is_ssdxa6, $m4is_pgsbl ); } private 
function __construct( array $m4is_ssdxa6 = [], array $m4is_pgsbl = [] ) { ini_set( 'display_errors', 1 ); $m4is_ssdxa6 = empty( $m4is_ssdxa6 ) ? $_GET : $m4is_ssdxa6; $m4is_pgsbl = empty( $m4is_pgsbl ) ? $_POST : $m4is_pgsbl; m4is_d8yr0_::m4is_vsv0mr(); $this->m4is_efgr75( $m4is_ssdxa6, $m4is_pgsbl ); $this->m4is_n4csyz(); $this->m4is_oyg24c(); $this->m4is_l8ydl(); $this->m4is_o_2o15(); $this->m4is_umus3(); $this->m4is_o91l(); $this->m4is_v8mw2u(); $this->m4is_wd34q(); $this->m4is_zmo96(); } 
function __destruct() { if ( $this->m4is_aaz9 && ! empty( $this->m4is_xiu_ ) ) { m4is_q1amx::m4is_rf68r( $this->m4is_aaz9, implode( "\n", $this->m4is_xiu_ ) ); } if ( $this->m4is_adiq ) { printf( "Exiting MakePass HTTP POST Process at %s\n", microtime( true ) ); } } private 
function m4is_efgr75( array $m4is_ssdxa6, array $m4is_pgsbl ) { $this->m4is_bxv7u = memberium_app(); $this->m4is_ssdxa6 = $m4is_ssdxa6; $this->m4is_pgsbl = $m4is_pgsbl; $this->m4is_jyx_t = $this->m4is_bxv7u->m4is_mmdrl( 'settings', 'password_field' ); $this->m4is_yw9rnp = $this->m4is_bxv7u->m4is_mmdrl( 'settings', 'min_password_length' ); $this->m4is_rz4ur = $this->m4is_bxv7u->m4is_mmdrl( 'settings', 'username_field' ); } private 
function m4is_n4csyz() { $this->m4is_nq7s = $this->m4is_pgsbl; $this->m4is_aicfp = isset( $this->m4is_nq7s['Id'] ) ? (int) $this->m4is_nq7s['Id'] : $this->m4is_aicfp; $this->m4is_id576 = isset( $this->m4is_pgsbl[ $this->m4is_rz4ur ] ) ? $this->m4is_pgsbl[ $this->m4is_rz4ur ] : 'Email'; $this->m4is_m2h6b = isset( $this->m4is_nq7s['Email'] ) ? $this->m4is_nq7s['Email'] : ''; $this->m4is_h9r6 = isset( $this->m4is_ssdxa6['adduser'] ) ? $this->m4is_y06fw( $this->m4is_ssdxa6['adduser'], true ) : true; $this->m4is_adiq = isset( $this->m4is_ssdxa6['debug'] ) ? $this->m4is_y06fw( $this->m4is_ssdxa6['debug'], false ) : false; $this->m4is_p2bxz1 = isset( $this->m4is_ssdxa6['overwrite'] ) ? $this->m4is_y06fw( $this->m4is_ssdxa6['overwrite'], false ) : false; $this->m4is_tjzfa1 = empty( $this->m4is_ssdxa6['delay'] ) ? 0 : (int) $this->m4is_ssdxa6['delay']; $this->m4is_qw8dk = empty( $this->m4is_ssdxa6['goal'] ) ? '' : $this->m4is_ssdxa6['goal']; $this->m4is_n6y9w = empty( $this->m4is_ssdxa6['sync'] ) ? [] : array_filter( explode( ',', strtolower( trim( $this->m4is_ssdxa6['sync'] ) ) ) ); $this->m4is_wtg_l8 = empty( $this->m4is_ssdxa6['tagids'] ) ? [] : array_filter( explode( ',', $this->m4is_ssdxa6['tagids'] ) ); $this->m4is_j38n_a = isset( $this->m4is_ssdxa6['verbose'] ) ? $this->m4is_y06fw( $this->m4is_ssdxa6['verbose'], false ) : false; $this->m4is_p1ug = isset( $this->m4is_nq7s[ $this->m4is_jyx_t ] ) ? trim( $this->m4is_nq7s[ $this->m4is_jyx_t ] ) : ''; $this->m4is_id576 = isset( $this->m4is_nq7s[ $this->m4is_rz4ur ] ) ? trim( $this->m4is_nq7s[ $this->m4is_rz4ur ] ) : ''; $this->m4is_aaz9 = m4is_q1amx::m4is_u4dk( $this->m4is_aicfp, 'httppost', 'MakePass' ); $this->m4is_xiu_[] = sprintf( "Contact ID = %d, Username = %s", $this->m4is_aicfp, $this->m4is_id576 ); $this->m4is_xiu_[] = sprintf( "AddUser = %s, OverWrite = %s, Sync = %s, Tags = %s", $this->m4is_s2u9da( $this->m4is_h9r6 ), $this->m4is_s2u9da( $this->m4is_p2bxz1 ), implode( ',', $this->m4is_n6y9w ), implode( ',', $this->m4is_wtg_l8 ) ); if ( $this->m4is_adiq ) { echo __LINE__, " - Begin MakePass at ", microtime(true) ,"\n"; echo __LINE__, " - Debug Mode Enabled\n"; echo __LINE__, " - Contact ID = ", $this->m4is_aicfp, "\n"; echo __LINE__, " - Username = ", $this->m4is_id576, "\n"; echo __LINE__, " - Password Field = ", $this->m4is_jyx_t, "\n"; echo __LINE__, " - Password Value = ", empty( $this->m4is_nq7s[ $this->m4is_jyx_t ] ) ? 'Empty' : 'Populated', "\n"; echo __LINE__, " - AddUser = ", $this->m4is_s2u9da( $this->m4is_h9r6 ), "\n"; echo __LINE__, " - OverWrite = ", $this->m4is_s2u9da( $this->m4is_p2bxz1 ), "\n"; echo __LINE__, " - Delay = ", $this->m4is_tjzfa1, "\n"; echo __LINE__, " - Goal = ", $this->m4is_qw8dk, "\n"; echo __LINE__, " - Sync Flags = ", implode( ', ', $this->m4is_n6y9w ), "\n"; echo __LINE__, " - Tag IDs = ", implode( ', ', $this->m4is_wtg_l8 ), "\n"; if ( $this->m4is_j38n_a ) { print_r( $this->m4is_ssdxa6 ); } } } private 
function m4is_oyg24c() { $this->m4is_nzrv1 = get_user_by( 'email', $this->m4is_m2h6b ); if ( ( $this->m4is_nzrv1 == false ) || $this->m4is_p2bxz1 == true ) {   if ( $this->m4is_jyx_t == 'Password' && ! isset( $this->m4is_nq7s['Password'] ) ) { $m4is_kbu63_ = [ 'Password' ]; $m4is_nq7s = m4is_zbyh::m4is_n0_ck( $this->m4is_aicfp, $m4is_kbu63_ ); if ( ! empty( $m4is_nq7s['Password'] ) ) { $this->m4is_nq7s['Password'] = $m4is_nq7s['Password']; } if ($this->m4is_adiq) echo __LINE__, " - Retrieved Built-in Password Field from API\n"; } } ksort( $this->m4is_nq7s ); } private 
function m4is_l8ydl() { $m4is_fzalfr = []; if ( ! $this->m4is_aicfp ) { $m4is_fzalfr[] = 'Error:  Invalid Keap contact ID'; } if ( empty( $this->m4is_m2h6b ) ) { $m4is_fzalfr[] = 'Error:  Email address missing or invalid'; } if ( empty( $this->m4is_id576 ) ) { $m4is_fzalfr[] = 'Error:  No valid Username/Email provided'; } if ( ! empty( $this->m4is_nq7s[ $this->m4is_jyx_t ] ) && strlen( $this->m4is_nq7s[ $this->m4is_jyx_t ] ) < $this->m4is_yw9rnp ) { $m4is_fzalfr[] = 'Error:  Supplied Password is too short'; } if ( empty( $this->m4is_nq7s['FirstName'] ) ) { $m4is_fzalfr[] = 'Error:  First Name Missing.  The First Name field is required.'; } if ( $this->m4is_nzrv1 && user_can( $this->m4is_nzrv1, 'manage_options' ) ) { $m4is_fzalfr[] = 'Error:  Contact email matches Administrator account.'; } if ( ! empty( $m4is_fzalfr ) ) { if ( $this->m4is_adiq ) { echo implode( "\n", $m4is_fzalfr ), "\n"; printf( "%d - Finished MakePass at %s\n", __LINE__, microtime( true ) ); } $this->m4is_xiu_ = array_merge( $this->m4is_xiu_, $m4is_fzalfr ); exit; } } private 
function m4is_o_2o15() { $this->m4is_bxv7u->m4is_ba7dk( $this->m4is_nq7s ); if ( $this->m4is_adiq ) { echo __LINE__, " - Updating Local Contact Cache\n"; if ( $this->m4is_j38n_a ) { print_r( $this->m4is_nq7s ); } } } private 
function m4is_umus3() { $m4is_wjxa = false; if ( $this->m4is_nzrv1 ) { $m4is_id576 = $this->m4is_nzrv1->user_login; if ( ! $this->m4is_p2bxz1 ) { $m4is_vb91 = sprintf( 'Warning: User %s found in WordPress database. Password creation skipped.', $m4is_id576 ); $m4is_wjxa = true; } else { $m4is_vb91 = sprintf( "Warning: User %s found in WordPress database. Overwriting Password.", $m4is_id576 ); } if ( $this->m4is_adiq ) { echo __LINE__, ' - ', $m4is_vb91, "\n"; } $this->m4is_xiu_[] = $m4is_vb91; } if ( $m4is_wjxa ) { $this->m4is_wd34q(); exit; } } private 
function m4is_o91l() { $m4is_npx14 = false; $m4is_p1ug = empty( $this->m4is_nq7s[ $this->m4is_jyx_t ] ) ? '' : $this->m4is_nq7s[ $this->m4is_jyx_t ];  if ( ! empty( $m4is_p1ug ) ) { $m4is_npx14 = true; $this->m4is_p1ug = $m4is_p1ug; $this->m4is_xiu_[] = 'Using Password from Keap Contact Record'; if ( $this->m4is_adiq ) echo __LINE__, " - Using Password from Keap contact record\n"; } if ( isset( $m4is_p1ug ) && $m4is_p1ug == 'PASSWORD_PLACEHOLDER' ) { $m4is_npx14 = false; $this->m4is_p2bxz1 = true; $this->m4is_p1ug = ''; } if ( $m4is_npx14 && ! $this->m4is_p2bxz1 ) { $this->m4is_xiu_[] = 'Password Generation Disabled'; $this->m4is_e7v8 = false; } else { $this->m4is_e7v8 = true; } if ($this->m4is_adiq ) { printf( "%d - Password Exists    = %s\n", __LINE__, $this->m4is_s2u9da( $m4is_npx14 ) ); printf( "%d - Password Overwrite = %s\n", __LINE__, $this->m4is_s2u9da( $this->m4is_p2bxz1 ) ); printf( "%d - Generate Password  = %s\n", __LINE__, $this->m4is_s2u9da( $this->m4is_e7v8 ) ); printf( "%d - Password Length    = %d\n", __LINE__, $this->m4is_yw9rnp ); } } private 
function m4is_v8mw2u() { if ( ! $this->m4is_e7v8 ) { return; }  $this->m4is_p1ug = $this->m4is_bxv7u->m4is_v8mw2u(); if ( $this->m4is_adiq ) { echo __LINE__, " - Password Generated: {$this->m4is_p1ug}\n"; } $this->m4is_xiu_[] = "New password generated."; $this->m4is_nq7s[ $this->m4is_jyx_t ] = $this->m4is_p1ug; $updated_fields = [ $this->m4is_jyx_t => $this->m4is_p1ug, ]; $m4is_n_bp6 = m4is_zbyh::m4is_pp0i( $this->m4is_aicfp, $updated_fields );  $this->m4is_bxv7u->m4is_dizjd( $this->m4is_aicfp, $this->m4is_nq7s ); if ( $this->m4is_adiq ) { echo __LINE__, " - password_field = ", $this->m4is_jyx_t, "\n"; echo __LINE__, " - updated_fields = ", print_r($updated_fields, true), "\n"; echo __LINE__, " - result = ", print_r($m4is_n_bp6, true), "\n"; echo __LINE__, " - Updated Password to {$this->m4is_p1ug} \n"; } } private 
function m4is_wd34q() { $m4is_q4c_xa = $this->m4is_bxv7u->m4is_jrjget( $this->m4is_aicfp, $this->m4is_p1ug ); if ( $this->m4is_adiq ) { echo __LINE__, " - User ID = ", $m4is_q4c_xa, " Added / Updated\n"; } if ( is_multisite() && ! is_user_member_of_blog( $m4is_q4c_xa ) ) { $m4is_q_to1c = get_current_blog_id(); $m4is_v67fv = get_blog_option( $m4is_q_to1c, 'default_role', 'subscriber' ); add_user_to_blog( $m4is_q_to1c, $m4is_q4c_xa, $m4is_v67fv ); } $this->m4is_bxv7u->m4is_q4nu( $m4is_q4c_xa ); } private 
function m4is_zmo96() { if ( ! empty( $this->m4is_wtg_l8 ) ) { $this->m4is_bxv7u->m4is__mkz( $this->m4is_wtg_l8, $this->m4is_aicfp ); if ($m4is_ia_osy) { echo __LINE__, " - Added Tags: ", implode(', ', $this->m4is_wtg_l8 ), "\n"; } $this->m4is_xiu_[] = sprintf('Added Tags ', implode( ', ', $this->m4is_wtg_l8 ) ); } if ( ! empty( $this->m4is_qw8dk ) ) {  $m4is_jr7f6 = m4is_f84s3h::m4is_zox_z5( $this->m4is_aicfp, $this->m4is_qw8dk ); if ( $this->m4is_adiq ) { printf( "%d - Goal Achieved with %s\n", __LINE__, $this->m4is_qw8dk ); print_r( $m4is_jr7f6 ); } } if ( $this->m4is_adiq ) { echo __LINE__, " - Updated Contact\n"; echo __LINE__, " - Sleeping: {$this->m4is_tjzfa1} seconds\n"; } $this->m4is_bxv7u->m4is_l41p7r( $this->m4is_aicfp ); $this->m4is_bxv7u->m4is_v64c('send_http_post'); sleep( $this->m4is_tjzfa1 ); } private 
function m4is_s2u9da( $m4is_rhfd ) { return $m4is_rhfd ? 'Yes' : 'No'; } private 
function m4is_y06fw( $m4is_rhfd, bool $m4is_lphf = false ) : bool { $m4is_rhfd = strtolower( substr( trim( $m4is_rhfd ), 0, 1 ) ); return in_array( $m4is_rhfd, [ 'y', 't', '1' ] ) ? true : ( in_array( $m4is_rhfd, [ 'n', 'f', '0' ] ) ? false : $m4is_lphf ); } }
