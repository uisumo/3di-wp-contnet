<?php
/**
 * Copyright (c) 2017-2022 David J Bullock
 * Web Power and Light, LLC
 * https://webpowerandlight.com
 * support@webpowerandlight.com
 *
 */

 class_exists('m4is_emz57o') || die(); m4is_eusv::m4is_gopgz(); final 
class m4is_eusv {      static private $m4is_bxv7u, $m4is_q7m2, $m4is_aicfp, $m4is_gwtb03, $m4is_kuzmd1, $m4is_ahusy0; static 
function m4is_gopgz() { self::$m4is_bxv7u = memberium_app(); self::$m4is_q7m2 = self::$m4is_bxv7u->m4is_re5x('appname'); self::$m4is_aicfp = self::$m4is_bxv7u->m4is_w47qdy(); self::$m4is_gwtb03 = self::$m4is_bxv7u->m4is_wnlbj_(); self::$m4is_kuzmd1 = ! m4is_o5aoir::m4is_du5icq(); self::$m4is_ahusy0 = 'memberium'; } static 
function m4is_jkvy( $m4is_qvehs = [], string $m4is_amunwi = '', string $m4is_rz70ok = '' ) : string { if ( self::$m4is_kuzmd1 ) { return ''; } $m4is_p78sgz = [ 'capture' => '', 'txtfmt' => '', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } if (! self::$m4is_aicfp ) { return ''; } $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_xk0cg = m4is_s3nu::m4is_or9mj( self::$m4is_aicfp ); $m4is_o6h2 = m4is_s3nu::m4is_knd_c( $m4is_xk0cg ); $m4is_v0c_1q = 0; if (count($m4is_o6h2) > 0) { $m4is_y_zsb = strtotime(date('Y-m-d') ); $m4is_bpvai = strtotime(date($m4is_o6h2['ExpirationYear'] . '-' . ($m4is_o6h2['ExpirationMonth'] + 1) . '-01') ); $m4is_v0c_1q = (int) ( ($m4is_bpvai - $m4is_y_zsb) / 86400); $m4is_v0c_1q = $m4is_v0c_1q < 0 ? 0 : $m4is_v0c_1q; } $m4is_k2qb08 = $m4is_v0c_1q; return m4is_qipkj::m4is__85o(false, $m4is_k2qb08, $m4is_qvehs['txtfmt'], $m4is_qvehs['capture']); }  static 
function m4is_qxhz7( $m4is_qvehs = [], string $m4is_amunwi = '', string $m4is_rz70ok = '') : string { if ( self::$m4is_kuzmd1 ) { return ''; } $m4is_p78sgz = [ 'capture' => '', 'txtfmt' => '', 'not' => '', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_in0ti = false; $m4is_qvehs['not'] = ! empty($m4is_qvehs['not']); if (stripos($m4is_rz70ok, '_no_') ) { $m4is_qvehs['not'] = true; } if (! isset($_SESSION['memb_user']['has_credit_card']) || (isset($_SESSION['memb_user']['has_credit_card']) && $_SESSION['memb_user']['has_credit_card'] == 0) ) { m4is_s3nu::m4is_or9mj( self::$m4is_aicfp ); } if (isset($_SESSION['memb_user']['has_credit_card']) && $_SESSION['memb_user']['has_credit_card'] > 0) { $m4is_in0ti = true; } if ($m4is_qvehs['not']) { $m4is_in0ti = ! $m4is_in0ti; } $m4is_k2qb08 = m4is_qipkj::m4is_mngd87($m4is_amunwi, $m4is_rz70ok, true, $m4is_in0ti); return m4is_qipkj::m4is__85o(false, $m4is_k2qb08, $m4is_qvehs['txtfmt'], $m4is_qvehs['capture']); } static 
function m4is_hxqec( $m4is_qvehs = [], string $m4is_amunwi = '', string $m4is_rz70ok = '' ) : string { if ( self::$m4is_kuzmd1 ) { return ''; } $m4is_p78sgz = [ 'capture' => '', 'date_format' => '', 'default' => '', 'fields' => '', 'txtfmt' => '', 'separator' => '', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } if (! self::$m4is_aicfp ) { return ''; } $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium');  $m4is_xk0cg = m4is_s3nu::m4is_or9mj( self::$m4is_aicfp ); $m4is_o6h2 = array_change_key_case(m4is_s3nu::m4is_knd_c($m4is_xk0cg), CASE_LOWER); $m4is_fi64q = array_filter(array_map('strtolower', explode(',', $m4is_qvehs['fields']) ) ); $m4is_utphc = count($m4is_fi64q); $m4is_wnqi = 0; $m4is_k2qb08 = ''; unset($m4is_xk0cg);  foreach ($m4is_fi64q as $m4is_sv3h) { $m4is_sv3h = strtolower(trim($m4is_sv3h) ); if (isset($m4is_o6h2[$m4is_sv3h]) ) { $m4is_pverx = strtotime($m4is_o6h2[$m4is_sv3h]); if ($m4is_qvehs['date_format'] == '' || $m4is_pverx == 0) { $m4is_ywklcb = $m4is_o6h2[$m4is_sv3h]; } else { $m4is_ywklcb = date($m4is_qvehs['date_format'], strtotime($m4is_o6h2[$m4is_sv3h]) ); } } else { $m4is_ywklcb = $m4is_qvehs['default']; } $m4is_k2qb08 .= $m4is_ywklcb; if ($m4is_utphc > 1) { $m4is_k2qb08 .= $m4is_qvehs['separator']; } } if ($m4is_utphc > 1 && strlen($m4is_qvehs['separator']) > 0) { $m4is_k2qb08 = substr($m4is_k2qb08, 0, -strlen($m4is_qvehs['separator']) ); } return m4is_qipkj::m4is__85o(false, $m4is_k2qb08, $txtfmt, $m4is_qvehs['capture']); } static 
function m4is_ang24( $m4is_qvehs = [], string $m4is_amunwi = '', string $m4is_rz70ok = '' ) : string { if ( self::$m4is_kuzmd1 ) { return ''; } $m4is_p78sgz = [ 'capture' => '', 'days' => 0, 'debug' => false, 'subscription_ids' => '', 'txtfmt' => '', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } if (! self::$m4is_aicfp ) { return ''; } $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_qvehs['debug'] = m4is_qipkj::m4is_vhjg( $m4is_qvehs['debug'], false ); $m4is_qvehs['days'] = (int) $m4is_qvehs['days']; $m4is_xk0cg = m4is_s3nu::m4is_or9mj( self::$m4is_aicfp ); $m4is_o6h2 = m4is_s3nu::m4is_knd_c( $m4is_xk0cg ); if (! empty($m4is_qvehs['subscription_ids']) ) { } else { unset($m4is_xk0cg); $m4is_v0c_1q = 0; if (count($m4is_o6h2) > 0) { $m4is_y_zsb = strtotime(date('Y-m-d') ); $m4is_bpvai = strtotime(date($m4is_o6h2['ExpirationYear'] . '-' . $m4is_o6h2['ExpirationMonth'] . '-28') ); $m4is_v0c_1q = (int) ( ($m4is_bpvai - $m4is_y_zsb) / 86400); if ($m4is_v0c_1q < 0) { $m4is_v0c_1q = 0; } } $m4is_o2td = (boolean) ($m4is_v0c_1q < $m4is_qvehs['days']); } $m4is_k2qb08 = m4is_qipkj::m4is_mngd87($m4is_amunwi, $m4is_rz70ok, true, $m4is_o2td); if ($m4is_qvehs['txtfmt'] > '') { $m4is_k2qb08 = m4is_qipkj::m4is_yof82($m4is_k2qb08, $m4is_qvehs['txtfmt']); } if ($m4is_qvehs['capture'] > '') { $m4is_k2qb08 = m4is_qipkj::m4is_umhnz($m4is_k2qb08, $m4is_qvehs['capture']); }  foreach($m4is_o6h2 as $m4is_ap3_ => $m4is_rhfd) { $m4is_k2qb08 = str_ireplace('%%' . $m4is_ap3_ . '%%', $m4is_rhfd, $m4is_k2qb08); } $m4is_k2qb08 = str_ireplace('%%days_left%%', $m4is_v0c_1q, $m4is_k2qb08); return do_shortcode($m4is_k2qb08); } static 
function m4is_h2qiz( $m4is_qvehs = [], string $m4is_amunwi = '', string $m4is_rz70ok = '' ) : string { if ( self::$m4is_kuzmd1 ) { return ''; } $m4is_p78sgz = [ 'button_text' => 'Pay Now', 'date_format' => 'M d, Y', 'active' => TRUE, ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } if (! self::$m4is_aicfp ) { return ''; } $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_xk0cg = m4is_s3nu::m4is_or9mj( self::$m4is_aicfp); $m4is_w582e = 0; $m4is_k2qb08 = ''; $m4is_rpscuy = ''; if (trim($m4is_amunwi) == '') { $m4is_amunwi .= '<tr>'; $m4is_amunwi .= '<td>%%card.type%%</td>'; $m4is_amunwi .= '<td>xxxxxxxxxxxx%%card.last4%%</td>'; $m4is_amunwi .= '<td>%%card.month.dropdown%% / '; $m4is_amunwi .= '%%card.year.dropdown%%</td>';  $m4is_amunwi .= '</tr>'; } if (is_array($m4is_xk0cg) ) { foreach ($m4is_xk0cg as $m4is_o6h2) { $m4is_dn09xt = base64_encode(serialize(['creditcard_id' => (int) $m4is_o6h2['Id'],] ) ); $m4is_k_fdu = self::$m4is_bxv7u->m4is_rxyecs($m4is_dn09xt); $m4is_w582e++; $m4is_k2qb08 .= '<form method="post" action="">'; $m4is_rpscuy .= "<input type=\"hidden\" name=\"memb_form_type\" value=\"memb_list_creditcards_form\">"; $m4is_k2qb08 .= '<input type="hidden" name="parameters" value="' . $m4is_dn09xt . '">'; $m4is_k2qb08 .= '<input type="hidden" name="signature" value="' . $m4is_k_fdu . '">'; $m4is_k2qb08 .= '<input type="hidden" name="Id" value="' . $m4is_o6h2['Id'] . '">'; if ($m4is_w582e % 2) { $m4is_po54x = 'odd'; } else { $m4is_po54x = 'even'; } $m4is_zcm4g = '<select name="ExpirationMonth">'; for ($m4is_ll9yd5 = 1; $m4is_ll9yd5 < 13; $m4is_ll9yd5++ ) { $m4is_h4fv = str_pad($m4is_ll9yd5, 2, '0', STR_PAD_LEFT); $m4is_zcm4g .= '<option value ="' . $m4is_h4fv . '" ' . ($m4is_h4fv == $m4is_o6h2['ExpirationMonth'] ? ' selected="selected" ' : '') . '>' . $m4is_h4fv . '</option>'; } $m4is_zcm4g .= '</select>'; $m4is_gl4d = '<select name="ExpirationYear">'; for ($m4is_ll9yd5 = date('Y'); $m4is_ll9yd5 < (date('Y') + 10); $m4is_ll9yd5++ ) { $m4is_gl4d .= '<option value ="' . $m4is_ll9yd5 . '" ' . ($m4is_ll9yd5 == $m4is_o6h2['ExpirationYear'] ? ' selected="selected" ' : '') . '>' . $m4is_ll9yd5 . '</option>'; } $m4is_gl4d .= '</select>'; $m4is_uax1 = '<input type="submit" value="Delete" class="deletebutton">'; $m4is_i0ltb = str_ireplace('%%card.id%%', $m4is_o6h2['Id'], $m4is_amunwi); $m4is_i0ltb = str_ireplace('%%card.type%%', $m4is_o6h2['CardType'], $m4is_amunwi); $m4is_i0ltb = str_ireplace('%%card.last4%%', $m4is_o6h2['Last4'], $m4is_i0ltb); $m4is_i0ltb = str_ireplace('%%card.year%%', $m4is_o6h2['ExpirationYear'], $m4is_i0ltb); $m4is_i0ltb = str_ireplace('%%card.month%%', $m4is_o6h2['ExpirationMonth'], $m4is_i0ltb); $m4is_i0ltb = str_ireplace('%%card.month.dropdown%%', $m4is_zcm4g, $m4is_i0ltb); $m4is_i0ltb = str_ireplace('%%card.year.dropdown%%', $m4is_gl4d, $m4is_i0ltb); $m4is_i0ltb = str_ireplace('%%card.id%%', $m4is_o6h2['Id'], $m4is_i0ltb);  $m4is_k2qb08 .= $m4is_i0ltb; $m4is_k2qb08 .= '</form>'; } } return $m4is_k2qb08; }  static 
function m4is_y1up( $m4is_qvehs = [], string $m4is_amunwi = '', string $m4is_rz70ok = '' ) : string { if ( self::$m4is_kuzmd1 ) { return ''; } static $m4is__iftk = 0; $m4is__iftk++; $m4is_p78sgz = [ 'action_ids' => '', 'addonly' => 'no', 'backcharge' => 'no', 'cardtypes' => 'American Express,Discover,MasterCard,Visa', 'debug' => false, 'debug_ip' => '', 'failureurl' => $_SERVER['REQUEST_URI'], 'goals' => '', 'ignoressl' => 'no', 'plan_ids' => '', 'set_default' => 'yes', 'success_msg' => 'Your credit card was successfully updated.', 'successurl' => $_SERVER['REQUEST_URI'], 'tag_ids' => '', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } if (! MEMBERIUM_DEBUG) { if (! is_ssl() ) { if ( self::$m4is_bxv7u->m4is_fop0d() ) { return '<p>Credit Card Update Form Disabled Due to Missing SSL.</p>'; } return ''; } } $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_qvehs['addonly'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['addonly'], false); $m4is_qvehs['backcharge'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['backcharge'], true); $m4is_qvehs['debug'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['debug'], false); $m4is_qvehs['ignoressl'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['ignoressl'], false); $m4is_qvehs['set_default'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['set_default'], true); if (! self::$m4is_bxv7u->m4is_fop0d() ) { if ( self::$m4is_aicfp == 0) { return ''; } if ( (! is_ssl() ) && (! $m4is_qvehs['ignoressl']) ) { return ''; } } $m4is_o_8l1 = 'memb_addupdate_creditcard-' . $m4is__iftk; $m4is_z8li5 = 'Add Card'; $m4is_qvehs['cardtypes'] = array_filter(explode(',', $m4is_qvehs['cardtypes']) ); $m4is_o6h2['Id'] = 0; if ($m4is_qvehs['addonly'] == false) {  $m4is_xk0cg = m4is_s3nu::m4is_or9mj( self::$m4is_aicfp ); $m4is_o6h2 = end($m4is_xk0cg); $m4is_b9nqt = [ 'BillAddress1', 'BillAddress2', 'BillCity', 'BillCountry', 'BillState', 'BillZip', 'CardType', 'ExpirationMonth', 'ExpirationYear', 'FirstName', 'Id', 'Last4', 'LastName', 'NameOnCard', 'PhoneNumber', ]; foreach ($m4is_b9nqt as $m4is_ap3_) { if (empty($m4is_o6h2[$m4is_ap3_]) ) { $m4is_o6h2[$m4is_ap3_] = ''; } } } if ($m4is_o6h2['Id'] > 0) {  $m4is__dxr0 = $m4is_o6h2['Id']; $m4is_h4qe1_ = $m4is_o6h2['FirstName']; $m4is_u1mgqo = $m4is_o6h2['LastName']; $m4is_hdlf3h = '************' . $m4is_o6h2['Last4']; $m4is_cfrt98 = $m4is_o6h2['CardType']; $m4is_hl38 = $m4is_o6h2['ExpirationMonth']; $m4is_yzk_f7 = $m4is_o6h2['ExpirationYear']; $m4is_v93r = trim($m4is_o6h2['NameOnCard']); $m4is_v_62ej = $m4is_o6h2['PhoneNumber']; $m4is_fn5p = $m4is_o6h2['BillAddress1']; $m4is_np4z = $m4is_o6h2['BillAddress2']; $m4is_c2rt = $m4is_o6h2['BillCity']; $m4is_a0vjlg = $m4is_o6h2['BillState']; $m4is_hop6e = $m4is_o6h2['BillCountry']; $m4is_zxub = $m4is_o6h2['BillZip']; $m4is_zhgp = isset($m4is_o6h2['CVV2']) ? (string) $m4is_o6h2['CVV2'] : ''; $m4is_oknpuo = 'update'; $m4is_yp8jv = ' disabled '; } else {  $m4is__dxr0 = 0; $m4is_h4qe1_ = m4is_lpl4d::m4is_bfi49('firstname'); $m4is_u1mgqo = m4is_lpl4d::m4is_bfi49('lastname'); $m4is_hdlf3h = ''; $m4is_cfrt98 = ''; $m4is_hl38 = ''; $m4is_yzk_f7 = ''; $m4is_v93r = trim($m4is_h4qe1_ . ' ' . $m4is_u1mgqo); $m4is_v_62ej = m4is_lpl4d::m4is_bfi49('phone1'); $m4is_fn5p = m4is_lpl4d::m4is_bfi49('streetaddress1'); $m4is_np4z = m4is_lpl4d::m4is_bfi49('streetaddress2'); $m4is_c2rt = m4is_lpl4d::m4is_bfi49('city'); $m4is_a0vjlg = m4is_lpl4d::m4is_bfi49('state'); $m4is_hop6e = m4is_lpl4d::m4is_bfi49('country'); $m4is_zxub = m4is_lpl4d::m4is_bfi49('postalcode'); $m4is_zhgp = ''; $m4is_oknpuo = 'add'; $m4is_yp8jv = ' '; } if (empty($m4is_o6h2['NameOnCard']) ) { $m4is_o6h2['NameOnCard'] = $m4is_h4qe1_ . ' ' . $m4is_u1mgqo; $m4is_v93r = trim($m4is_o6h2['NameOnCard' ]); } $m4is_dn09xt = base64_encode(serialize([ 'action_ids' => $m4is_qvehs['action_ids'], 'backcharge' => $m4is_qvehs['backcharge'], 'contact_id' => self::$m4is_aicfp, 'creditcard_id' => $m4is__dxr0, 'debug' => $m4is_qvehs['debug'], 'debug_ip' => $m4is_qvehs['debug_ip'], 'failureurl' => $m4is_qvehs['failureurl'], 'goals' => $m4is_qvehs['goals'], 'plan_ids' => $m4is_qvehs['plan_ids'], 'set_default' => $m4is_qvehs['set_default'], 'success_msg' => $m4is_qvehs['success_msg'], 'successurl' => $m4is_qvehs['successurl'], 'tag_ids' => $m4is_qvehs['tag_ids'], ]) ); $m4is_k_fdu = self::$m4is_bxv7u->m4is_rxyecs($m4is_dn09xt); $m4is_j0n7 = new stdClass; $m4is_j0n7->form_name = $m4is_o_8l1; $m4is_j0n7->form_id = $m4is__iftk; $m4is_j0n7->parameters = $m4is_dn09xt; $m4is_j0n7->signature = self::$m4is_bxv7u->m4is_rxyecs($m4is_dn09xt); $m4is_j0n7->nonce = wp_nonce_field('creditcard_add_' . $m4is__iftk, '_wpnonce', true, false); $m4is_j0n7->card_types = $m4is_qvehs['cardtypes']; $m4is_j0n7->creditcard_type = $m4is_cfrt98; $m4is_j0n7->card_number = $m4is_hdlf3h; $m4is_j0n7->disabled = $m4is_yp8jv; $m4is_j0n7->expiration_month = $m4is_hl38; $m4is_j0n7->expiration_year = $m4is_yzk_f7; $m4is_j0n7->name_on_card = $m4is_v93r; $m4is_j0n7->phone1 = $m4is_v_62ej; $m4is_j0n7->address1 = $m4is_fn5p; $m4is_j0n7->address2 = $m4is_np4z; $m4is_j0n7->city = $m4is_c2rt; $m4is_j0n7->postalcode = $m4is_zxub; $m4is_j0n7->state = $m4is_a0vjlg; $m4is_j0n7->country = $m4is_hop6e; $m4is_j0n7->country_options_html = self::$m4is_bxv7u->m4is_nn6s_()->getCountryOptions( $m4is_j0n7->country ); $m4is_j0n7->country_options = []; return m4is_qipkj::m4is_jers4($m4is_rz70ok, $m4is_qvehs, $m4is_amunwi, $m4is_rz70ok, $m4is_j0n7); }    static 
function m4is_ke9po( $m4is_qvehs = [], string $m4is_amunwi = '', string $m4is_rz70ok = '' ) { if ( self::$m4is_kuzmd1 ) { return ''; } $m4is_p78sgz = [ 'after' => '', 'before' => '', 'capture' => '', 'default' => '', 'fields' => '', 'htmlattr' => '', 'id' => 0, 'separator' => ' ', 'txtfmt' => '', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_qvehs['id'] = (int) $m4is_qvehs['id']; if (empty($m4is_qvehs['fields']) || $m4is_qvehs['id'] < 1) { return; } $m4is_fi64q = array_filter(explode(',', strtolower($m4is_qvehs['fields']) ) ); $m4is_utphc = count($m4is_fi64q); $m4is_jfohk = m4is_vvgc8::m4is_gnm5q9($m4is_qvehs['id'], true); $m4is_k2qb08 = ''; foreach ($m4is_fi64q as $m4is_sv3h) { $m4is_sv3h = trim($m4is_sv3h); $fieldvalue = isset($m4is_jfohk[$m4is_sv3h]) ? $m4is_jfohk[$m4is_sv3h] : $m4is_qvehs['default']; if ($m4is_sv3h == 'productprice') { $fieldvalue = number_format( (double) $fieldvalue, 2); } elseif ($m4is_sv3h == 'image.url') { $fieldvalue = 'https://' . self::$m4is_q7m2 . '.infusionsoft.com/cart/pimg.jsp?i=5&t=p&s=x&date=' . time(); } $m4is_k2qb08 .= $fieldvalue; if ($m4is_utphc > 1) { $m4is_k2qb08 .= $m4is_qvehs['separator']; } } if ($m4is_utphc > 1 && $m4is_qvehs['separator']) { $m4is_k2qb08 = substr($m4is_k2qb08, 0, -strlen($m4is_qvehs['separator']) ); } return m4is_qipkj::m4is__85o(false, $m4is_k2qb08, $m4is_qvehs['txtfmt'], $m4is_qvehs['capture'], $m4is_qvehs['htmlattr'], $m4is_qvehs['before'], $m4is_qvehs['after']); } static 
function m4is__lur($m4is_qvehs, $m4is_amunwi = NULL, $m4is_rz70ok = '') { if ( self::$m4is_kuzmd1 ) { return ''; } $m4is_p78sgz = [ 'capture' => '', 'default' => '', 'fields' => '', 'id' => 0, 'separator' => ' ', 'txtfmt' => '', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_qvehs['id'] = (int) $m4is_qvehs['id']; if ($m4is_qvehs['fields'] = '' || $m4is_qvehs['id'] < 1) { return; } $m4is_fi64q = array_filter(explode(',', $m4is_qvehs['fields']) ); $m4is_utphc = count($m4is_fi64q); $subscriptionplan = self::$m4is_bxv7u->m4is_nisz($m4is_qvehs['id'], TRUE); $m4is_k2qb08 = ''; foreach ($m4is_fi64q as $m4is_sv3h) { $m4is_sv3h = strtolower(trim($m4is_sv3h) ); $fieldvalue = isset($subscriptionplan[$m4is_sv3h]) ? $subscriptionplan[$m4is_sv3h] : $m4is_qvehs['default']; if (in_array($m4is_sv3h, ['planprice', 'preauthorizeamount']) ) { $fieldvalue = number_format( (double) $fieldvalue, 2); } $m4is_k2qb08 .= $fieldvalue; if ($m4is_utphc > 1) { $m4is_k2qb08 .= $m4is_qvehs['separator']; } } $m4is_k2qb08 = substr($m4is_k2qb08, 0, -strlen($m4is_qvehs['separator']) ); return m4is_qipkj::m4is__85o(false, $m4is_k2qb08, $m4is_qvehs['txtfmt'], $m4is_qvehs['capture']); }    static 
function m4is_fmowf($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') { if ( self::$m4is_kuzmd1 ) { return ''; }    $m4is_p78sgz = [ 'invoice_id' => isset($_GET['invoice_id']) ? (int) $_GET['invoice_id'] : 0, 'contact_id' => m4is_lpl4d::m4is_a_2z(), 'date_format' => 'F j, Y', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } $m4is_k2qb08 = ''; $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_w5ky4q = [ 'invoice_id' => $m4is_qvehs['invoice_id'], 'contact_id' => $m4is_qvehs['contact_id'], ]; $m4is_gv_h = self::$m4is_bxv7u->m4is_m92l( $m4is_w5ky4q ); if (is_array($m4is_gv_h) ) { $m4is_b7n4c2 = get_option('memberium_invoice_template', false); $m4is_k2qb08 .= '<div class="memberium-order-receipt">'; if (! empty($m4is_b7n4c2['header']) ) { $m4is_k2qb08 .= $m4is_b7n4c2['header']; } if (isset($m4is_gv_h['orderitems']) && is_array($m4is_gv_h['orderitems']) ) { foreach($m4is_gv_h['orderitems'] as $m4is_u7wr1f) { $m4is_i0ltb = $m4is_b7n4c2['items']; $m4is_i0ltb = str_ireplace('%%item.cpu%%', number_format($m4is_u7wr1f['cpu'], 2), $m4is_i0ltb); $m4is_i0ltb = str_ireplace('%%item.ppu%%', number_format($m4is_u7wr1f['ppu'], 2), $m4is_i0ltb); foreach($m4is_u7wr1f as $m4is_ap3_ => $m4is_rhfd) { $m4is_i0ltb = str_ireplace('%%item.' . $m4is_ap3_ . '%%', $m4is_rhfd, $m4is_i0ltb); } $m4is_i0ltb = str_ireplace('%%receipt.subtotal%%', number_format($m4is_u7wr1f['ppu'] * $m4is_u7wr1f['qty'], 2), $m4is_i0ltb); $m4is_k2qb08 .= $m4is_i0ltb; } } $m4is_k2qb08 .= $m4is_b7n4c2['pre_payments']; foreach($m4is_gv_h['payments'] as $m4is__u6f) { $m4is_i0ltb = $m4is_b7n4c2['payments']; $m4is_i0ltb = str_ireplace('%%payment.paydate%%', date($m4is_qvehs['date_format'], strtotime($m4is__u6f['paydate']) ), $m4is_i0ltb); $m4is_i0ltb = str_ireplace('%%payment.payamt%%', number_format($m4is__u6f['payamt'], 2), $m4is_i0ltb); foreach($m4is__u6f as $m4is_ap3_ => $m4is_rhfd) { $m4is_i0ltb = str_ireplace('%%payment.' . $m4is_ap3_ . '%%', $m4is_rhfd, $m4is_i0ltb); } $m4is_k2qb08 .= $m4is_i0ltb; } $m4is_k2qb08 .= $m4is_b7n4c2['pre_scheduled'];  foreach($m4is_gv_h['paymentplanitems'] as $m4is__u6f) { $m4is_i0ltb = $m4is_b7n4c2['scheduled']; $m4is_i0ltb = str_ireplace('%%scheduled.datedue%%', date($m4is_qvehs['date_format'], strtotime($m4is__u6f['datedue']) ), $m4is_i0ltb); $m4is_i0ltb = str_ireplace('%%scheduled.amtdue%%', number_format($m4is__u6f['amtdue'], 2), $m4is_i0ltb); $m4is_i0ltb = str_ireplace('%%scheduled.amtpaid%%', number_format($m4is__u6f['amtpaid'], 2), $m4is_i0ltb); foreach($m4is__u6f as $m4is_ap3_ => $m4is_rhfd) { $m4is_i0ltb = str_ireplace('%%scheduled.' . $m4is_ap3_ . '%%', $m4is_rhfd, $m4is_i0ltb); } $m4is_k2qb08 .= $m4is_i0ltb; } $m4is_k2qb08 .= $m4is_b7n4c2['footer']; $m4is_k2qb08 .= '</div>'; if (! empty($m4is_gv_h['job']) ) { $m4is_k2qb08 = str_ireplace('%%order.datecreated%%', date($m4is_qvehs['date_format'], strtotime($m4is_gv_h['job']['datecreated']) ), $m4is_k2qb08); $m4is_k2qb08 = str_ireplace('%%order.duedate%%', date($m4is_qvehs['date_format'], strtotime($m4is_gv_h['job']['duedate']) ), $m4is_k2qb08); } if (! empty($m4is_gv_h['invoice']) ) { $m4is_k2qb08 = str_ireplace('%%invoice.datecreated%%', date($m4is_qvehs['date_format'], strtotime($m4is_gv_h['invoice']['datecreated']) ), $m4is_k2qb08); $m4is_k2qb08 = str_ireplace('%%invoice.overdue%%', number_format($m4is_gv_h['invoice']['totaldue'] - $m4is_gv_h['invoice']['totalpaid'], 2), $m4is_k2qb08); $m4is_k2qb08 = str_ireplace('%%invoice.invoicetotal%%', number_format($m4is_gv_h['invoice']['invoicetotal'], 2), $m4is_k2qb08); $m4is_k2qb08 = str_ireplace('%%invoice.totalpaid%%', number_format($m4is_gv_h['invoice']['totalpaid'], 2), $m4is_k2qb08); } if (is_array($m4is_gv_h['invoice']) ) { foreach($m4is_gv_h['invoice'] as $m4is_ap3_ => $m4is_rhfd) { $m4is_k2qb08 = str_ireplace('%%invoice.' . $m4is_ap3_ . '%%', $m4is_rhfd, $m4is_k2qb08); } } if (is_array($m4is_gv_h['contact']) ) { foreach($m4is_gv_h['contact'] as $m4is_ap3_ => $m4is_rhfd) { $m4is_k2qb08 = str_ireplace('%%contact.' . $m4is_ap3_ . '%%', $m4is_rhfd, $m4is_k2qb08); } } if (isset($m4is_gv_h['job']) && is_array($m4is_gv_h['job']) ) { foreach($m4is_gv_h['job'] as $m4is_ap3_ => $m4is_rhfd) { $m4is_k2qb08 = str_ireplace('%%order.' . $m4is_ap3_ . '%%', $m4is_rhfd, $m4is_k2qb08); } } $m4is_k2qb08 = apply_filters('memberium_show_receipt', $m4is_k2qb08, $m4is_gv_h);  $m4is_k2qb08 = preg_replace('/(%%\S+%%)/', '', $m4is_k2qb08); } return do_shortcode($m4is_k2qb08); }    static 
function m4is_t7tsz1($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') { if ( self::$m4is_kuzmd1 ) { return ''; } global $wpdb; $m4is_p78sgz = [ 'after' => '', 'before' => '', 'capture' => false, 'contact_id' => self::$m4is_aicfp, 'days' => 0, 'htmlattr' => '', 'txtfmt' => '', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_hfg54 = '0.00'; if (! empty($m4is_qvehs['contact_id'])) { $m4is_ioxk = 'SELECT sum(`totalpaid`) FROM `' . MEMBERIUM_DB_INVOICES . '` WHERE `appname` = %s `contactid` = %d AND `payplanstatus` = 1 AND `paystatus` = 1; '; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, self::$m4is_bxv7u->m4is_re5x('appname'), $m4is_qvehs['contact_id']); $m4is_hfg54 = $wpdb->get_var($m4is_ioxk); } return m4is_qipkj::m4is__85o(false, $tlv, $m4is_qvehs['txtfmt'], $m4is_qvehs['capture'], $m4is_qvehs['htmlattr'], $m4is_qvehs['before'], $m4is_qvehs['after']); } static 
function m4is__4ds2($m4is_qvehs, $m4is_amunwi = NULL, $m4is_rz70ok = '') { if ( self::$m4is_kuzmd1 ) { return ''; } $m4is_p78sgz = [ 'button_text' => 'Pay Now', 'contact_id' => self::$m4is_aicfp, 'date_format' => 'M d, Y', 'form_class' => 'invoiceline', 'goal' => '', 'limit' => 0, 'merchant_id' => self::$m4is_bxv7u->m4is_mmdrl( 'settings', 'merchant_account_id' ), 'nocost' => true, 'only_prodids' => '', 'paid' => true, 'post' => '', 'pre' => '', 'redirect_url' => $_SERVER['REQUEST_URI'], 'reverse' => false, 'success_msg' => 'Your payment was successfully processed.', 'tag_id' => '', 'unpaid' => true,  ]; if ( isset( $m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts' ) { return implode( ', ', array_keys( $m4is_p78sgz ) ); } if ( is_feed() || ! is_singular() ) { return; } $m4is_qvehs = shortcode_atts( $m4is_p78sgz, $m4is_qvehs, self::$m4is_ahusy0 ); if ( ! $m4is_qvehs['contact_id'] ) { return; } $m4is_qvehs['nocost'] = m4is_qipkj::m4is_vhjg( $m4is_qvehs['nocost'], false ); $m4is_qvehs['paid'] = m4is_qipkj::m4is_vhjg( $m4is_qvehs['paid'], false ); $m4is_qvehs['reverse'] = m4is_qipkj::m4is_vhjg( $m4is_qvehs['reverse'], false ); $m4is_qvehs['unpaid'] = m4is_qipkj::m4is_vhjg( $m4is_qvehs['unpaid'], false ); if (trim($m4is_amunwi) == '') { $m4is_amunwi .= '<div><span>%%invoice.id%%</span>'; $m4is_amunwi .= '<span>%%description%%</span>'; $m4is_amunwi .= '<span>$%%invoice.total%%</span>'; $m4is_amunwi .= '<span>$%%total.paid%%</span>'; $m4is_amunwi .= '<span>$%%refund.status%%</span>'; $m4is_amunwi .= '<span>$%%amount.due%%</span>'; $m4is_amunwi .= '<span>%%date.due%%</span>'; $m4is_amunwi .= '<span>%%creditcard.dropdown%%</span>'; $m4is_amunwi .= '<span>%%submit%%</span></div>'; } $m4is_q7m2 = self::$m4is_q7m2; $m4is_yar3 = m4is_vvgc8::m4is_yelt(); $m4is_w1agy = self::$m4is_bxv7u->m4is_w1e0wk( $m4is_qvehs['contact_id'], $m4is_qvehs['paid'], $m4is_qvehs['unpaid'] ); if (is_array($m4is_w1agy) && ! $m4is_qvehs['nocost']) { foreach($m4is_w1agy as $m4is_ap3_ => $m4is_ra9j4) { if ($m4is_ra9j4['InvoiceTotal'] == 0) { unset($m4is_w1agy[$m4is_ap3_]); } } } if ($m4is_qvehs['reverse']) { $m4is_w1agy = array_reverse($m4is_w1agy, true); } $m4is_xk0cg = []; $jobs = []; if (! empty($m4is_w1agy) ) { $m4is_xk0cg = m4is_s3nu::m4is_or9mj($m4is_qvehs['contact_id']); }  if (empty($m4is_xk0cg) ) { $m4is_mp64il = ''; } else { $m4is_mp64il = '<select name="creditcard_id">'; if (is_array($m4is_xk0cg) ) { foreach ($m4is_xk0cg as $m4is_o6h2) { $m4is_rr90 = isset($m4is_o6h2['Status']) ? $m4is_o6h2['Status'] : 0; if (in_array($m4is_o6h2['Status'], [1,3,4]) ) { $m4is_af1cse = isset($m4is_o6h2['CardType']) ? $m4is_o6h2['CardType'] : 'Unknown'; $m4is_weixn5 = isset($m4is_o6h2['Last4']) ? $m4is_o6h2['Last4'] : ''; $m4is_mp64il .= '<option value="'. $m4is_o6h2['Id'] . '">' . $m4is_af1cse . ' ' . $m4is_weixn5 . '</option>'; } } } $m4is_mp64il .= '</select>'; } $m4is_a8zf2h = [ 0 => _x('No Credit', 'memb_list_invoices', self::$m4is_ahusy0 ), 1 => _x('Partial Credit Applied', 'memb_list_invoices', self::$m4is_ahusy0 ), 2 => _x('Full Credit Applied', 'memb_list_invoices', self::$m4is_ahusy0 ), ]; $m4is_h5wy = [ 0 => _x('Not Paid', 'memb_list_invoices', self::$m4is_ahusy0 ), 1 => _x('Paid', 'memb_list_invoices', self::$m4is_ahusy0 ), ]; $m4is_h1r7 = [ 0 => _x('No Refund', 'memb_list_invoices', self::$m4is_ahusy0 ), 1 => _x('Partial Refund', 'memb_list_invoices', self::$m4is_ahusy0 ), 2 => _x('Full Refund', 'memb_list_invoices', self::$m4is_ahusy0 ), 3 => _x('Full Write-Off', 'memb_list_invoices', self::$m4is_ahusy0 ), 4 => _x('Partial Write-Off', 'memb_list_invoices', self::$m4is_ahusy0 ), ]; $m4is_w582e = 0; $m4is_k2qb08 = $m4is_qvehs['pre']; if ( is_array( $m4is_w1agy ) ) { if ( count( $m4is_w1agy ) > $m4is_qvehs['limit'] ) { } foreach ( $m4is_w1agy as $m4is_ra9j4 ) {  if ( $m4is_qvehs['only_prodids'] > '' ) { } $m4is_cesjr = array_filter( explode( ',', $m4is_ra9j4['ProductSold'] ) ); $m4is_r836y4 = count( $m4is_cesjr ); $m4is_bsx1 = array_shift( $m4is_cesjr ); $m4is_m3cfp = $m4is_a8zf2h[$m4is_ra9j4['CreditStatus']]; $m4is_iyxg = $m4is_h5wy[$m4is_ra9j4['PayStatus']]; $m4is_gvqx_ = $m4is_h1r7[$m4is_ra9j4['RefundStatus']]; $m4is_p78sgz = [ 'goal' => $m4is_qvehs['goal'], 'invoice_id' => (int) $m4is_ra9j4['Id'], 'merchant_id' => (int) $m4is_qvehs['merchant_id'], 'redirect_url' => $m4is_qvehs['redirect_url'], 'success_msg' => $m4is_qvehs['success_msg'], 'tag_id' => $m4is_qvehs['tag_id'], ]; $m4is_dn09xt = base64_encode( serialize( $m4is_p78sgz ) ); $m4is_k_fdu = self::$m4is_bxv7u->m4is_rxyecs( $m4is_dn09xt );  $m4is_w582e++; if ( $m4is_w582e % 2 ) { $m4is_po54x = 'odd'; } else { $m4is_po54x = 'even'; }  if ( in_array( trim( $m4is_ra9j4['Description']), ['One-time:', 'Order Form', 'API Order'] ) ) { if ( isset( $m4is_yar3[$m4is_bsx1]['ProductName'] ) ) { $m4is_ra9j4['Description'] = $m4is_yar3[$m4is_bsx1]['ProductName']; if ( $m4is_r836y4 > 1 ) { $m4is_ra9j4['Description'] .= sprintf( _x(', and %d other items.', 'memb_list_invoices', self::$m4is_ahusy0 ), ( $m4is_r836y4 - 1 ) ); } } } $m4is_i0ltb = '<form method="post" action="">'; $m4is_i0ltb .= wp_nonce_field( 'memb_payinvoice_' . $m4is_ra9j4['Id'], '_wpnonce', true, false ); $m4is_i0ltb .= '<input type="hidden" name="memb_form_type" value="memb_pay_invoice">'; $m4is_i0ltb .= '<input type="hidden" name="parameters" value="' . $m4is_dn09xt . '">'; $m4is_i0ltb .= '<input type="hidden" name="signature" value="' . $m4is_k_fdu . '">'; $m4is_i0ltb .= $m4is_amunwi; $m4is_i0ltb .= '</form>'; $m4is_i0ltb = str_ireplace( '%%credit.status%%', $m4is_m3cfp, $m4is_i0ltb ); $m4is_i0ltb = str_ireplace( '%%cycler%%', $m4is_po54x, $m4is_i0ltb ); $m4is_i0ltb = str_ireplace( '%%description%%', $m4is_ra9j4['Description'], $m4is_i0ltb ); $m4is_i0ltb = str_ireplace( '%%invoice.id%%', $m4is_ra9j4['Id'], $m4is_i0ltb ); $m4is_i0ltb = str_ireplace( '%%invoice.total%%', sprintf('%0.2f', $m4is_ra9j4['InvoiceTotal']), $m4is_i0ltb ); $m4is_i0ltb = str_ireplace( '%%line%%', $m4is_w582e, $m4is_i0ltb ); $m4is_i0ltb = str_ireplace( '%%pay.status%%', $m4is_iyxg, $m4is_i0ltb ); $m4is_i0ltb = str_ireplace( '%%refund.status%%', $m4is_gvqx_, $m4is_i0ltb ); $m4is_i0ltb = str_ireplace( '%%total.paid%%', sprintf('%0.2f', $m4is_ra9j4['TotalPaid']), $m4is_i0ltb ); $m4is_i0ltb = str_ireplace( '%%date.created%%', date($m4is_qvehs['date_format'], strtotime($m4is_ra9j4['DateCreated']) ), $m4is_i0ltb ); if ( ! empty( $m4is_ra9j4['!payment_due'] ) ) { $m4is_i0ltb = str_ireplace('%%amount.due%%', sprintf( '%0.2f', $m4is_ra9j4['!payment_due'] ), $m4is_i0ltb); $m4is_i0ltb = str_ireplace('%%date.due%%', 'Past Due', $m4is_i0ltb); $m4is_i0ltb = str_ireplace('%%creditcard.dropdown%%', $m4is_mp64il, $m4is_i0ltb); if ( $m4is_qvehs['merchant_id'] > 0 && ( ! empty( $m4is_xk0cg ) ) ) { $m4is_i0ltb = str_ireplace( '%%submit%%', '<input type="submit" class="memb_invoice_payment_button" value="' . $m4is_qvehs['button_text'] . '">', $m4is_i0ltb); } else { $m4is_i0ltb = str_ireplace('%%submit%%', '', $m4is_i0ltb); } } else { $m4is_i0ltb = str_ireplace('%%amount.due%%', '0.00', $m4is_i0ltb); $m4is_i0ltb = str_ireplace('%%date.due%%', date($m4is_qvehs['date_format'], strtotime($m4is_ra9j4['DateCreated']) ), $m4is_i0ltb); $m4is_i0ltb = str_ireplace('%%creditcard.dropdown%%', '', $m4is_i0ltb); $m4is_i0ltb = str_ireplace('%%submit%%', '', $m4is_i0ltb); } $m4is_k2qb08 .= $m4is_i0ltb; } } $m4is_k2qb08 .= $m4is_qvehs['post']; return do_shortcode($m4is_k2qb08); } static 
function m4is_j8yn($m4is_qvehs = [], string $m4is_amunwi = '', string $m4is_rz70ok = '') { if ( self::$m4is_kuzmd1 ) { return ''; } static $m4is_xk0cg = false; static $m4is_uke5g = false; $m4is_p78sgz = [ 'cancel_text' => 'Cancel', 'confirm_button' => 'Yes, Stop Subscription', 'confirm_cancel' => 'Keep Subscription', 'confirm_title' => 'Cancel Subscription?', 'confirm' => 0, 'date_format' => 'M d, Y', 'immediate' => false,  'jqueryui' => 1, 'onlyids' => '', 'orderby' => 'StartDate', 'sort' => 'a',  'status' => 'all',  ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } if (! self::$m4is_aicfp ) { return; } $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_qvehs['confirm'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['confirm'], true); $m4is_qvehs['immediate'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['immediate'], false); $m4is_qvehs['jqueryui'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['jqueryui'], true); $m4is_qvehs['status'] = ucwords(trim($m4is_qvehs['status']) ); $m4is_qvehs['sort'] = substr(strtolower(trim($m4is_qvehs['sort']) ), 0, 1); $m4is_qvehs['orderby'] = trim($m4is_qvehs['orderby']); $m4is_hjx4 = ($m4is_qvehs['sort'] == 'a'); $m4is_xk0cg = m4is_s3nu::m4is_or9mj( self::$m4is_aicfp ); $m4is_yar3 = m4is_vvgc8::m4is_rrn0(); $m4is_muiqev = m4is_vvgc8::m4is_d9auv(); $m4is_uke5g = self::$m4is_bxv7u->m4is_u6sg( self::$m4is_aicfp ); if (is_array($m4is_uke5g) ) { $m4is_qvehs['onlyids'] = array_filter(explode(',', $m4is_qvehs['onlyids']) ); foreach ($m4is_uke5g as $m4is_ap3_=>$m4is_ie4p50) { if ($m4is_qvehs['status'] <> 'All') { if (strtolower($m4is_qvehs['status']) <> strtolower($m4is_ie4p50['Status']) ) { unset($m4is_uke5g[$m4is_ap3_]); } } } if (! empty($m4is_qvehs['onlyids']) ) { foreach($m4is_uke5g as $m4is_ap3_ => $m4is_i2t3ps) { if (! in_array($m4is_i2t3ps['ProgramId'], $m4is_qvehs['onlyids']) ) { if (! in_array($m4is_i2t3ps['SubscriptionPlanId'], $m4is_qvehs['onlyids']) ) { unset($m4is_uke5g[$m4is_ap3_]); } } } } usort($m4is_uke5g, function($a, $b) use ($m4is_qvehs, $m4is_hjx4) { $orderby = $m4is_qvehs['orderby']; if ($a[$orderby] == $b[$orderby]) { $order = 0; } if ($m4is_hjx4) { $order = $a[$orderby] < $b[$orderby] ? -1 : 1; } else { $order = $a[$orderby] > $b[$orderby] ? -1 : 1; } return $order; }); } $m4is_x9x2 = ( is_array( $m4is_uke5g ) && ! empty( $m4is_uke5g ) ); $m4is_w582e = 0; $m4is_k2qb08 = ''; if ( $m4is_x9x2 && trim( $m4is_amunwi ) == '' ) { $m4is_amunwi = '<p>
			%%line%% - %%cycler%% -
			Subscription Name: %%subscription.name%%<br />
			Subscription Status:  %%subscription.status%%<br />
			Subscription Price: %%subscription.price%%<br />
			Subscription Billing Cycle:  %%subscription.billingcycle%%<br />
			Credit Card:  %%creditcard.last4%%<br />
			Card Type: %%creditcard.type%%<br />
			Card Expiration: %%creditcard.expmonth%% / %%creditcard.expyear%%<br />
			Subscription Start Date: %%subscription.startdate%%<br />
			Subscription Paid Through Date: %%subscription.paidthrough%%<br />
			Subscription Next Billing Date: %%subscription.nextbilling%%<br />
			Subscription Status: %%subscription.status%%<br />
			Keywords: %%subscription._keywords%%<br />
			%%cancel.button%%
			</p>'; } $m4is_amunwi = m4is_qipkj::m4is_mngd87( $m4is_amunwi, $m4is_rz70ok, true, $m4is_x9x2 ); if ($m4is_x9x2) { $m4is_kbu63_ = m4is_f84s3h::m4is_cm6nr('RecurringOrder'); foreach ( $m4is_uke5g as $m4is_ap3_=>$m4is_ie4p50) { $m4is_w582e++; $m4is_an8bz = false; $m4is_rr90 = _x( $m4is_ie4p50['Status'], 'memb_list_subscriptions', 'memberium' ); switch ($m4is_ie4p50['BillingCycle']) { case 6: $m4is_ie4p50['BillingCycleWord1'] = _x('Daily', 'memb_list_subscriptions', 'memberium'); $m4is_ie4p50['BillingCycleWord2'] = _x('Days', 'memb_list_subscriptions', 'memberium'); break; case 3: $m4is_ie4p50['BillingCycleWord1'] = _x('Weekly', 'memb_list_subscriptions', 'memberium'); $m4is_ie4p50['BillingCycleWord2'] = _x('Weeks', 'memb_list_subscriptions', 'memberium'); break; case 2: $m4is_ie4p50['BillingCycleWord1'] = _x('Monthly', 'memb_list_subscriptions', 'memberium'); $m4is_ie4p50['BillingCycleWord2'] = _x('Months', 'memb_list_subscriptions', 'memberium'); break; case 1: $m4is_ie4p50['BillingCycleWord1'] = _x('Annually', 'memb_list_subscriptions', 'memberium'); $m4is_ie4p50['BillingCycleWord2'] = _x('Years', 'memb_list_subscriptions', 'memberium'); break; } if (empty($m4is_ie4p50['PaidThruDate']) ) { $m4is_ie4p50['PaidThruDate'] = $m4is_ie4p50['StartDate']; } $m4is_dn09xt = base64_encode(serialize([ 'cancel_text' => $m4is_qvehs['cancel_text'], 'immediate' => $m4is_qvehs['immediate'], 'next_bill_date' => $m4is_ie4p50['NextBillDate'], 'paid_through_date' => $m4is_ie4p50['PaidThruDate'], 'recurringorder_id' => (int) $m4is_ie4p50['Id'], 'subscriptionplan_id' => (int) $m4is_ie4p50['SubscriptionPlanId'], ]) ); $m4is_k_fdu = self::$m4is_bxv7u->m4is_rxyecs($m4is_dn09xt); $m4is_ixe6 = '<form method="post" class="memberium-subscription-list" action="">'; $m4is_ixe6 .= wp_nonce_field('memb_cancelsubscription_' . $m4is_ie4p50['Id'], '_wpnonce', true, false); $m4is_ixe6 .= '<input type="hidden" name="memb_form_type" value="memb_cancel_subscription">'; $m4is_ixe6 .= '<input type="hidden" name="parameters" value="' . $m4is_dn09xt . '">'; $m4is_ixe6 .= '<input type="hidden" name="signature" value="' . $m4is_k_fdu . '">'; $m4is_ixe6 .= $m4is_amunwi; if ($m4is_ie4p50['Frequency'] > 1) { $m4is_twkpt = 'Every ' . $m4is_ie4p50['Frequency'] . ' ' . $m4is_ie4p50['BillingCycleWord2']; } else { $m4is_twkpt = $m4is_ie4p50['BillingCycleWord1']; } if ($m4is_w582e % 2) { $m4is_po54x = 'odd'; } else { $m4is_po54x = 'even'; } $m4is_ayi5 = empty( $m4is_ie4p50['StartDate'] ) ? __('None') : date( $m4is_qvehs['date_format'], strtotime($m4is_ie4p50['StartDate'] ) ); $m4is_ouks = empty( $m4is_ie4p50['NextBillDate'] ) ? __('None') : date( $m4is_qvehs['date_format'], strtotime($m4is_ie4p50['NextBillDate'] ) ); $m4is_ixe6 = str_ireplace( '%%creditcard.expmonth%%', isset( $m4is_xk0cg[$m4is_ie4p50['CC1']]['ExpirationMonth']) ? $m4is_xk0cg[$m4is_ie4p50['CC1']]['ExpirationMonth'] : '', $m4is_ixe6); $m4is_ixe6 = str_ireplace( '%%creditcard.expyear%%', isset( $m4is_xk0cg[$m4is_ie4p50['CC1']]['ExpirationYear']) ? $m4is_xk0cg[$m4is_ie4p50['CC1']]['ExpirationYear'] : '', $m4is_ixe6); $m4is_ixe6 = str_ireplace( '%%creditcard.id%%', (isset( $m4is_xk0cg['Id']) ? $m4is_xk0cg['Id'] : ''), $m4is_ixe6); $m4is_ixe6 = str_ireplace( '%%creditcard.last4%%', isset( $m4is_xk0cg[$m4is_ie4p50['CC1'] ]['Last4']) ? 'XXXX-' . $m4is_xk0cg[$m4is_ie4p50['CC1'] ]['Last4'] : '', $m4is_ixe6); $m4is_ixe6 = str_ireplace( '%%creditcard.type%%', isset( $m4is_xk0cg[ $m4is_ie4p50['CC1'] ]['CardType']) ? $m4is_xk0cg[ $m4is_ie4p50['CC1'] ]['CardType'] : '', $m4is_ixe6); $m4is_ixe6 = str_ireplace( '%%cycler%%', $m4is_po54x, $m4is_ixe6); $m4is_ixe6 = str_ireplace( '%%line%%', $m4is_w582e, $m4is_ixe6); $m4is_ixe6 = str_ireplace( '%%subscription.billingcycle%%', $m4is_twkpt, $m4is_ixe6); $m4is_ixe6 = str_ireplace( '%%subscription.id%%', $m4is_ie4p50['Id'], $m4is_ixe6); $m4is_ixe6 = str_ireplace( '%%subscription.name%%', $m4is_yar3[ $m4is_muiqev[ $m4is_ie4p50['SubscriptionPlanId'] ]['ProductId'] ]['ProductName'], $m4is_ixe6); $m4is_ixe6 = str_ireplace( '%%subscription.nextbilling%%', $m4is_ouks, $m4is_ixe6); $m4is_ixe6 = str_ireplace( '%%subscription.paidthrough%%', date( $m4is_qvehs['date_format'], strtotime( $m4is_ie4p50['PaidThruDate'] ) ), $m4is_ixe6 ); $m4is_ixe6 = str_ireplace( '%%subscription.price%%', number_format( $m4is_ie4p50['BillingAmt'], 2 ), $m4is_ixe6 ); $m4is_ixe6 = str_ireplace( '%%subscription.startdate%%', $m4is_ayi5, $m4is_ixe6 ); $m4is_ixe6 = str_ireplace( '%%subscription.status%%', $m4is_rr90, $m4is_ixe6 ); foreach($m4is_kbu63_ as $m4is_tenvhx) { if ($m4is_tenvhx[0] == '_' && isset($m4is_ie4p50[$m4is_tenvhx]) ) {; $m4is_ixe6 = str_ireplace('%%subscription.' . $m4is_tenvhx . '%%', $m4is_ie4p50[$m4is_tenvhx], $m4is_ixe6); } } if (! empty($m4is_ie4p50['EndDate']) ) { $m4is_ixe6 = str_ireplace('%%subscription.enddate%%', date($m4is_qvehs['date_format'], strtotime($m4is_ie4p50['EndDate']) ), $m4is_ixe6); } else { $m4is_ixe6 = str_ireplace('%%subscription.enddate%%', '', $m4is_ixe6); } if (strtolower($m4is_ie4p50['Status']) == 'active' && empty($m4is_ie4p50['EndDate']) ) { $m4is_ixe6 = str_ireplace('%%cancel.button%%', '<input type="submit" class="memb_subscription_cancel_button" value="' . $m4is_qvehs['cancel_text'] . '">', $m4is_ixe6); } elseif (! empty($m4is_ie4p50['EndDate']) ){ $m4is_ixe6 = str_ireplace('%%cancel.button%%', __('Cancelled', 'memberium'), $m4is_ixe6); } else { $m4is_ixe6 = str_ireplace('%%cancel.button%%', '', $m4is_ixe6); } $m4is_ixe6 .= '</form>'; $m4is_k2qb08 .= do_shortcode($m4is_ixe6); } unset($m4is_twkpt); } else { $m4is_k2qb08 .= $m4is_amunwi; } if ( $m4is_qvehs['confirm'] ) { $params = [ 'confirmTitle' => $m4is_qvehs['confirm_title'], 'confirmButton' => $m4is_qvehs['confirm_button'], 'confirmCancel' => $m4is_qvehs['confirm_cancel'], ]; if ( $m4is_qvehs['jqueryui'] ) { $m4is_jz0t1s = get_bloginfo( 'version' ); if ( version_compare( $m4is_jz0t1s, '5.6', 'ge' ) ) { wp_enqueue_script( 'jqueryui', '//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js' ); wp_enqueue_style( 'jqueryuitheme', '//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css' ); } else { wp_enqueue_script( 'jqueryui', '//ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js' ); wp_enqueue_style( 'jqueryuitheme', '//ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/themes/smoothness/jquery-ui.css' ); } } wp_enqueue_script( 'memberium-cancellation-confirmation', plugins_url( 'js/cancellation-confirm.js', MEMBERIUM_HOME ) ); wp_localize_script( 'memberium-cancellation-confirmation', 'subscriptionCancelText', $params ); }  $m4is_k2qb08 = preg_replace('/(%%\S+%%)/', '', $m4is_k2qb08); return do_shortcode($m4is_k2qb08); } static 
function m4is_hjwh($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') { if ( self::$m4is_kuzmd1 ) { return ''; } $m4is_p78sgz = [ 'capture' => '', 'contact_id' => 0, 'invoice_id' => isset($_GET['invoice_id']) ? (int) $_GET['invoice_id'] : 0, 'product_ids' => '', 'txtfmt' => '', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } if (is_feed() || ! is_singular() ) { return; } $m4is_k2qb08 = ''; $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_qvehs['contact_id'] = $m4is_qvehs['contact_id'] ? $m4is_qvehs['contact_id'] : m4is_lpl4d::m4is_a_2z(); $m4is_qvehs['product_ids'] = array_filter(explode(',', $m4is_qvehs['product_ids']) ); if (empty($m4is_qvehs['contact_id']) || empty($m4is_qvehs['product_ids']) ) { return; } $m4is_w1agy = self::$m4is_bxv7u->m4is_w1e0wk($m4is_qvehs['contact_id']); if ($m4is_qvehs['invoice_id']) { $m4is_zcyj = $m4is_qvehs['invoice_id']; $m4is_w1agy = isset($m4is_w1agy[$m4is_zcyj]) ? [$m4is_zcyj => $m4is_w1agy[$m4is_zcyj] ] : []; } foreach($m4is_w1agy as $m4is_ra9j4) { $m4is_yar3 = isset($m4is_ra9j4['ProductSold']) ? explode(',', $m4is_ra9j4['ProductSold']) : []; if (! empty( array_intersect($m4is_yar3, $m4is_qvehs['product_ids']) ) ) { $m4is_zdto1 = true; break; } } $m4is_k2qb08 = m4is_qipkj::m4is_mngd87($m4is_amunwi, $m4is_rz70ok, TRUE, $m4is_zdto1); return m4is_qipkj::m4is__85o(false, $m4is_k2qb08, $m4is_qvehs['txtfmt'], $m4is_qvehs['capture']); } static 
function m4is_ushczk($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') { if ( self::$m4is_kuzmd1 ) { return ''; } $m4is_p78sgz = [ 'capture' => '', 'contact_id' => 0, 'invoice_id' => isset($_GET['invoice_id']) ? (int) $_GET['invoice_id'] : 0, 'status' => 'Active', 'subscription_ids' => '', 'txtfmt' => '', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } if (is_feed() || ! is_singular() ) { return; } $m4is_k2qb08 = ''; $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_qvehs['contact_id'] = $m4is_qvehs['contact_id'] ? $m4is_qvehs['contact_id'] : m4is_lpl4d::m4is_a_2z(); $m4is_qvehs['subscription_ids'] = array_filter(explode(',', $m4is_qvehs['subscription_ids']) ); $m4is_qvehs['status'] = strtolower($m4is_qvehs['status']); if (empty($m4is_qvehs['contact_id']) || empty($m4is_qvehs['subscription_ids']) ) { return; } $m4is_uke5g = self::$m4is_bxv7u->m4is_u6sg($m4is_qvehs['contact_id']); if ($m4is_qvehs['invoice_id']) { $m4is_zcyj = $m4is_qvehs['invoice_id']; $m4is_uke5g = isset($m4is_uke5g[$m4is_zcyj]) ? [$m4is_zcyj => $m4is_uke5g[$m4is_zcyj] ] : []; } if (! empty($m4is_qvehs['status'])) { foreach($m4is_uke5g as $m4is_b40e_m => $m4is_ie4p50) { if (strtolower($m4is_ie4p50['Status']) <> $m4is_qvehs['status']) { unset($m4is_uke5g[$m4is_b40e_m]); } } } foreach($m4is_uke5g as $m4is_ie4p50) { if (in_array($m4is_ie4p50['SubscriptionPlanId'], $m4is_qvehs['subscription_ids']) ) { $m4is_ryn4 = true; break; } } $m4is_k2qb08 = m4is_qipkj::m4is_mngd87($m4is_amunwi, $m4is_rz70ok, TRUE, $m4is_ryn4); return m4is_qipkj::m4is__85o(false, $m4is_k2qb08, $m4is_qvehs['txtfmt'], $m4is_qvehs['capture']); }     static 
function m4is_kayqns($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') { if ( self::$m4is_kuzmd1 ) { return ''; } if (is_feed() ) { return; } if (empty($_SERVER['HTTPS']) ) { if ( self::$m4is_bxv7u->m4is_fop0d() ) { return '<p>Order Form Disabled Due to Missing SSL</p>'; } return; } $m4is_p78sgz = [ 'autofill' => 'n', 'branding' => 'n', 'button_url' => '', 'cache' => HOUR_IN_SECONDS * 24, 'capture' => '', 'form_id' => '', 'form_url' => '', 'remove_styles' => 'y', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); if (false !== strpos($m4is_qvehs['form_url'], '.infusionsoft.com/saleform/') ) { $m4is_qvehs['form_url'] = str_ireplace('.infusionsoft.com/', '.infusionsoft.app/', $m4is_qvehs['form_url']); } if (false === strpos($m4is_qvehs['form_url'], '.infusionsoft.app/saleform/') ) { return _x('Invalid Form Embed', 'memb_orderform', 'memberium'); } if (false === stripos($m4is_qvehs['form_url'], '?cookieSearchStarted=true&cookieStopSearch=true') ) { $m4is_qvehs['form_url'] .= '?cookieSearchStarted=true&cookieStopSearch=true'; } $m4is_iia_r = $m4is_qvehs['cache']; $m4is_is5zeb = $m4is_qvehs['form_url']; $m4is_qvehs['branding'] = strtolower(substr($m4is_qvehs['branding'], 0, 1) ); $m4is_qvehs['autofill'] = strtolower(substr($m4is_qvehs['autofill'], 0, 1) ); $m4is_qvehs['remove_styles'] = strtolower(substr($m4is_qvehs['remove_styles'], 0, 1) ); $m4is_lztk8 = false; $m4is_xlui = 'memberium_orderform_' . md5($m4is_is5zeb); if ($m4is_iia_r > 0) { $m4is_lztk8 = get_transient($m4is_xlui); }  if ($m4is_lztk8 == false) { $m4is_o3sx_6 = wp_remote_get($m4is_is5zeb);  if (is_array($m4is_o3sx_6) ) { preg_match('/<body>(.*)<\/body>/sm', $m4is_o3sx_6['body'], $m4is_n_bp6); if (isset($m4is_n_bp6[1]) ) { $m4is_lztk8 = $m4is_n_bp6[1]; set_transient($m4is_xlui, $m4is_lztk8, $m4is_iia_r); } } else { return $m4is_o3sx_6->errors['http_request_failed'][0]; } } if ($m4is_qvehs['remove_styles'] == 'y') { $m4is_lztk8 = preg_replace('/<style>(.*)<\/style>/imU', '', $m4is_lztk8); } if ($m4is_qvehs['form_id'] > '') { $m4is_lztk8 = str_replace('id="orderForm"', 'id="' . $m4is_hgime6 . '"  ', $m4is_lztk8); } if ($m4is_qvehs['autofill'] == 'y') { foreach ($_GET as $m4is_ap3_ => $m4is_rhfd) { $m4is_lztk8 = str_replace('name=\'' . $m4is_ap3_ . '\' value=\'\'', 'name="' . $m4is_ap3_ . '" value="' . $m4is_rhfd . '"', $m4is_lztk8); } } if ($m4is_qvehs['button_url'] > '') { $m4is_l7kvxl = '<input type="image" value="Order" id="Order" class="default-input sale-orderbutton np inf-button" name="Order" src="' . $m4is_qvehs['button_url'] . '" style="width:auto;overflow:visible;"/>'; $m4is_lztk8 = preg_replace('/<input(.*)id="Order"(.*)>/iU', $m4is_l7kvxl, $m4is_lztk8); } if ($m4is_qvehs['branding'] == 'n') { $m4is_lztk8 = str_replace('Powered By Keap', '', $m4is_lztk8); } if ($m4is_qvehs['capture'] > '') { $m4is_lztk8 = m4is_qipkj::m4is_umhnz($m4is_lztk8, $m4is_qvehs['capture']); } return $m4is_lztk8; } static 
function m4is_q4o7er($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') { if ( self::$m4is_kuzmd1 ) { return ''; } $m4is_p78sgz = [ 'autorun' => 'no', 'button_name' => 'order_button', 'button_text' => '', 'bypass_commissions' => 'no', 'delete_failed' => 'yes', 'fail_action' => '', 'fail_goals' => '', 'fail_tags' => '', 'fail_url' => '', 'lead_affiliate_id' => 0, 'merchant_id' => (int) self::$m4is_bxv7u->m4is_mmdrl('settings', 'merchant_account_id'), 'prod_description' => '', 'prod_id' => 0, 'prod_name' => '', 'prod_price' => '', 'prod_type' => 4, 'qty' => 1, 'sales_affiliate_id' => 0, 'success_action' => '', 'success_goals' => '', 'success_tags' => '', 'success_url' => '', 'taxable' => 'no', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } if (! self::$m4is_aicfp ) { return; } static $m4is__iftk = 0; $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_qvehs['autorun'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['autorun'], false); $m4is_qvehs['bypass_commissions'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['bypass_commissions'], false); $m4is_qvehs['delete_failed'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['delete_failed'], true); $m4is_qvehs['taxable'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['taxable'], false); $m4is_qvehs['button_text'] = $m4is_qvehs['button_text'] > '' ? $m4is_qvehs['button_text'] : 'Buy Now' . $price;  $m4is_xk0cg = m4is_s3nu::m4is_or9mj( self::$m4is_aicfp ); if (is_array($m4is_xk0cg) && count($m4is_xk0cg) > 0) { $m4is_o6h2 = end($m4is_xk0cg); $m4is__dxr0 = (int) $m4is_o6h2['Id']; unset($m4is_o6h2, $m4is_xk0cg); } else { return; } foreach($m4is_p78sgz as $m4is_ap3_ => $m4is_rhfd) { $m4is_qvehs[$m4is_ap3_] = trim($m4is_qvehs[$m4is_ap3_]); } $m4is_y0gcr4 = [ 'has_payment_plan' => false, 'autorun' => (bool) $m4is_qvehs['autorun'], 'bypass_commissions' => (bool) $m4is_qvehs['bypass_commissions'], 'delete_failed' => (bool) $m4is_qvehs['delete_failed'], 'taxable' => (bool) $m4is_qvehs['taxable'], 'product_price' => (float) $m4is_qvehs['prod_price'], 'creditcard_id' => (int) $m4is__dxr0, 'lead_affiliate_id' => (int) $m4is_qvehs['lead_affiliate_id'], 'merchant_id' => (int) $m4is_qvehs['merchant_id'], 'product_id' => (int) $m4is_qvehs['prod_id'], 'product_type' => (int) $m4is_qvehs['prod_type'], 'quantity' => (int) $m4is_qvehs['qty'], 'sales_affiliate_id' => (int) $m4is_qvehs['sales_affiliate_id'], 'fail_action' => $m4is_qvehs['fail_action'], 'fail_goals' => $m4is_qvehs['fail_goals'], 'fail_tags' => $m4is_qvehs['fail_tags'], 'fail_url' => $m4is_qvehs['fail_url'], 'product_description' => $m4is_qvehs['prod_description'], 'product_name' => $m4is_qvehs['prod_name'], 'success_action' => $m4is_qvehs['success_action'], 'success_goals' => $m4is_qvehs['success_goals'], 'success_tags' => $m4is_qvehs['success_tags'], 'success_url' => $m4is_qvehs['success_url'], ]; if ($m4is_qvehs['autorun']) { $m4is_zcyj = (int) self::$m4is_bxv7u->m4is_e39uf($m4is_y0gcr4); if ($m4is_zcyj) { if ($m4is_qvehs['success_url'] > '') { $m4is_pizyx = $m4is_qvehs['success_url']; } } else { if ($m4is_qvehs['fail_url'] > '') { $m4is_pizyx = $m4is_qvehs['fail_url']; } } self::$m4is_bxv7u->m4is_l41p7r( self::$m4is_aicfp ); m4is_d8yr0_::m4is_okts(); wp_redirect($m4is_pizyx, 302); exit; } else { $m4is__iftk++; $m4is_y0gcr4 = base64_encode(serialize($m4is_y0gcr4) ); $m4is_k_fdu = self::$m4is_bxv7u->m4is_rxyecs($m4is_y0gcr4); $form_name = 'place_order_button-' . $m4is__iftk; $m4is_qvehs['button_name'] = 'place_order_button_' . $m4is__iftk; $m4is_rpscuy = ''; $m4is_rpscuy .= "<form name=\"{$form_name}\" id=\"{$form_name}\" method=\"post\">"; $m4is_rpscuy .= "<input type=\"hidden\" name=\"memb_form_type\" value=\"memb_place_order\">"; $m4is_rpscuy .= "<input type=\"hidden\" name=\"form_id\" value=\"{$m4is__iftk}\">"; $m4is_rpscuy .= "<input type=\"hidden\" name=\"order_settings\" value=\"{$m4is_y0gcr4}\">"; $m4is_rpscuy .= "<input type=\"hidden\" name=\"digital_signature\" value=\"{$m4is_k_fdu}\">"; $m4is_rpscuy .= wp_nonce_field('place_order_button-' . $m4is__iftk, '_wpnonce', true, false); if ($button_url == '') { $m4is_rpscuy .= "<input type=\"submit\" class=\"{$css_class}\" id=\"{$m4is_qvehs['button_name']}\" value=\"{$m4is_qvehs['button_text']}\">"; } else { $m4is_rpscuy .= "<input type=\"image\" src=\"{$button_url}\" class=\"{$css_class}\" id=\"{$m4is_qvehs['button_name']}\" >"; } $m4is_rpscuy .= "</form>"; return $m4is_rpscuy; } }   static 
function m4is_yr_bd($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') {   if ( self::$m4is_kuzmd1 ) { return ''; } global $wpdb; $m4is_p78sgz = [ 'action_id' => 0, 'button_url' => 0, 'css_class' => '', 'error_url' => '', 'success_url' => '', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } if (! self::$m4is_aicfp ) { return; } static $m4is__iftk = 1001; $m4is_z8li5 = _x('Submit', 'memb_one_click_sale', 'memberium'); if (isset($m4is_qvehs['unavailable_text']) ) { $m4is_h27z = $m4is_qvehs['unavailable_text']; } else { $m4is_h27z = _x('This offer is only available with a qualifying purchase.', 'memb_one_click_sale', 'memberium'); } if (isset($_SESSION['is4wp_purchase_session']['contactId']) ) { $m4is_aicfp = $_SESSION['is4wp_purchase_session']['contactId']; } else { return $m4is_h27z; } if (isset($_SESSION['is4wp_purchase_session']['orderId']) ) { $m4is_cmat = $_SESSION['is4wp_purchase_session']['orderId']; } else { return $m4is_h27z; }  if ($m4is__iftk == 0) { $m4is__iftk = 1001; } $m4is_hd84f9 = $m4is_qvehs['action_id']; $m4is_e2a97d = $m4is_qvehs['button_url']; $m4is_pizyx = $m4is_qvehs['success_url']; $m4is_ftry1 = $m4is_qvehs['error_url']; $m4is_nwmitn = $m4is_qvehs['css_class']; $m4is_h27z = '<span class="is4wp_client_error">' . $m4is_h27z . '</span>'; if (isset($m4is_qvehs['button_text']) && $m4is_qvehs['button_text' > '']) $m4is_z8li5 = $m4is_qvehs['button_text']; if ( self::$m4is_aicfp == 0 || $m4is_hd84f9 == 0 || $m4is_cmat == 0 || ! isset($_GET['infusion_xid']) || ! isset($_GET['infusion_type']) || ! ($_GET['infusion_type'] == 'CustomFormSale') ) { return $m4is_h27z; }  $m4is_kbu63_ = [ 'Id' ]; $m4is_kc1q = [ 'Id' => $m4is_cmat, 'ContactId' => self::$m4is_aicfp, ]; $m4is_da5x = self::$m4is_gwtb03->dsLoad('Job', intval($m4is_cmat), $m4is_kbu63_); if ($m4is_da5x['Id'] <> $m4is_cmat) { return $m4is_h27z; } $m4is_kbu63_ = [ 'Id', 'Last4', 'CardType', 'Status', 'ContactId' ]; $m4is_kc1q = [ 'ContactId' => $m4is_aicfp, ]; $m4is_kc1q = [ 'ContactId' => $m4is_aicfp, 'CardType' => $_GET['CreditCard0CardType'], 'ExpirationYear' => $_GET['CreditCard0ExpirationYear'], 'ExpirationMonth' => $_GET['CreditCard0ExpirationMonth'], ]; $m4is_ic4wn = m4is_f84s3h::m4is_yt5p0l('CreditCard', 1, 0, $m4is_kc1q, $m4is_kbu63_); if (count($m4is_ic4wn) == 0) { return $m4is_h27z; }  $m4is__iftk++; $m4is_o_8l1 = 'is4wp_oneclick_sale_form_' . $m4is__iftk; $m4is_bgcfdt = 'is4wp_oneclick_sale_button_' . $m4is__iftk; $m4is_dn09xt = base64_encode(serialize([ 'action_id' => $m4is_hd84f9, 'Contact0Email' => $_GET['Contact0Email'], 'contact_id' => $m4is_aicfp, 'order_id' => $m4is_cmat, '$elv_redirect_url' => $m4is_pizyx, ]) ); $m4is_k_fdu = self::$m4is_bxv7u->m4is_rxyecs($m4is_dn09xt); $m4is_rpscuy = ''; $m4is_rpscuy .= "<form name=\"{$m4is_o_8l1}\" id=\"{$m4is_o_8l1}\" method=\"post\">"; $m4is_rpscuy .= "<input type=\"hidden\" name=\"is4wp_form_type\" value=\"is4wp_oneclick_sale\">"; $m4is_rpscuy .= "<input type=\"hidden\" name=\"form_id\" value=\"{$m4is__iftk}\">"; $m4is_rpscuy .= "<input type=\"hidden\" name=\"parameters\" value=\"{$m4is_dn09xt}\">"; $m4is_rpscuy .= "<input type=\"hidden\" name=\"digital_signature\" value=\"{$m4is_k_fdu}\">"; $m4is_rpscuy .= wp_nonce_field('oneclick_sale_' . $m4is__iftk, '_wpnonce', true, false); if ($m4is_e2a97d == '') { $m4is_rpscuy .= "<input type=\"submit\" class=\"{$m4is_nwmitn}\" id=\"{$m4is_bgcfdt}\" value=\"{$m4is_z8li5}\">"; } else { $m4is_rpscuy .= "<input type=\"image\" src=\"{$m4is_e2a97d}\" class=\"{$m4is_nwmitn}\" id=\"{$m4is_bgcfdt}\" >"; } $m4is_rpscuy .= "</form>"; return $m4is_rpscuy; } static 
function m4is_xqyw($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') { if ( self::$m4is_kuzmd1 ) { return ''; } $m4is_p78sgz = [ 'autorun' => 'y',  'bypass_commissions' => 'n', 'debug' => 'n',  'description' => '',  'has_all_tags' => '',  'has_any_tag' => '',  'failure_action' => '', 'failure_goal' => '', 'failure_tag' => '', 'failure_url' => '', 'id' => 0,  'keep_failed' => 'n',  'lead_affiliate_id' => isset($_SESSION['infusionsoft_affiliate']) ? (int) $_SESSION['infusionsoft_affiliate'] : 0, 'merchant_id' => self::$m4is_bxv7u->m4is_mmdrl('settings', 'merchant_account_id'),  'name' => '',  'order_title' => '', 'payment_description' => 'Memberium Online Purchase', 'plan_autocharge' => 'n',  'plan_initial_payment' => -1,  'plan_max_retries' => 3,  'plan_payment_count' => 1,  'plan_payment_interval' => 30,  'plan_retry_days' => 2,  'plan_start_date' => 'now',  'price' => -1,  'quantity' => 1, 'sale_affiliate_id' => isset($_SESSION['infusionsoft_affiliate']) ? (int) $_SESSION['infusionsoft_affiliate'] : 0, 'success_action' => '', 'success_goal' => '', 'success_tag' => '', 'success_url' => '', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } $m4is_qvehs = shortcode_atts($defaults, $m4is_qvehs, 'memberium'); $m4is_qvehs['autorun'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['autorun'], true); $m4is_qvehs['bypass_commissions'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['bypass_commissions'], false); $m4is_qvehs['id'] = (int) $m4is_qvehs['id']; $m4is_qvehs['keep_failed'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['keep_failed'], false); $m4is_qvehs['lead_affiliate_id'] = (int) $m4is_qvehs['lead_affiliate_id']; $m4is_qvehs['merchant_id'] = (int) $m4is_qvehs['merchant_id']; $m4is_qvehs['name'] = trim($m4is_qvehs['name']); $m4is_qvehs['price'] = (double) $m4is_qvehs['price']; $m4is_qvehs['quantity'] = (int) $m4is_qvehs['quantity']; $m4is_qvehs['sale_affiliate_id'] = (int) $m4is_qvehs['sale_affiliate_id']; if (! empty($m4is_qvehs['m4is_c8ie6']) ) { if (! self::$m4is_bxv7u->m4is_ww6ul($m4is_qvehs['has_any_tag']) ) { return; } } if (! empty($m4is_qvehs['m4is_p04z']) ) { if (! self::$m4is_bxv7u->m4is_p04z($m4is_qvehs['has_all_tags']) ) { return; } } $m4is_aicfp = (int) self::$m4is_dexf; $m4is__dxr0 = 0; $m4is_cmat = 0; $m4is_yar3 = m4is_vvgc8::m4is_yelt(); $m4is_qwab = true;  $m4is_edow = $m4is_qvehs['failure_action']; $m4is_qw8dk = $m4is_qvehs['failure_goal']; $m4is_w9feq2 = $m4is_qvehs['failure_tag']; $m4is__mto = $m4is_qvehs['failure_url']; if (isset($m4is_yar3[$m4is_qvehs['id']]) ) { $m4is_jfohk = $m4is_yar3[$m4is_qvehs['id']]; } elseif ($m4is_qvehs['name'] > '') { $m4is_qvehs['id'] = 0; foreach($m4is_yar3 as $m4is_jfohk) { if (0 === strcasecmp ($m4is_jfohk['ProductName'] , $m4is_qvehs['name']) && $m4is_jfohk['Status'] == 1) { $m4is_qvehs['id'] = (int) $m4is_jfohk['Id']; break; } } } unset($m4is_yar3);  if ($m4is_qvehs['id'] < 1) { $m4is_qwab = false; } if ($m4is_qvehs['quantity'] < 1) { $m4is_qwab = false; } if ($m4is_qwab && $m4is_qvehs['merchant_id'] < 0) { $m4is_qwab = false; } if ($m4is_qwab && $m4is_qvehs['price'] < 0) { $m4is_qvehs['price'] = (double) $m4is_jfohk['ProductPrice']; }   if ($m4is_qwab) { if (! ( (int) $m4is__dxr0) ) { $m4is_xk0cg = m4is_s3nu::m4is_or9mj($m4is_aicfp); $m4is_xk0cg = m4is_s3nu::m4is_knd_c($m4is_xk0cg); $m4is__dxr0 = (int) $m4is_xk0cg['Id']; } }  if ($m4is_qwab) { $m4is_qvehs['order_title'] = empty($m4is_qvehs['order_title']) ? $m4is_jfohk['ProductName'] : $m4is_qvehs['order_title']; $m4is_oz1g3 = date_default_timezone_get(); date_default_timezone_set ('America/New_York'); $m4is_y_zsb = date('Ymd\TH:i:s'); $m4is_zcyj = self::$m4is_gwtb03->blankOrder($m4is_aicfp, $m4is_qvehs['order_title'], $m4is_y_zsb, $m4is_qvehs['lead_affiliate_id'], $m4is_qvehs['sale_affiliate_id']); if ($m4is_zcyj > 0) { $m4is_zcyj = (int) $m4is_zcyj; $m4is_n_bp6 = self::$m4is_gwtb03->addOrderItem($m4is_zcyj, $m4is_qvehs['id'], 4, $m4is_qvehs['price'], $m4is_qvehs['quantity'], $m4is_jfohk['ProductName'], $m4is_qvehs['description']); if ($m4is_jfohk['Taxable'] || $m4is_jfohk['CountryTaxable'] || $m4is_jfohk['StateTaxable'] || $m4is_jfohk['CityTaxable']) { self::$m4is_gwtb03->recalculateTax($m4is_zcyj); } $m4is_kxwo = self::$m4is_gwtb03->chargeInvoice($m4is_zcyj, $m4is_qvehs['payment_description'], $m4is__dxr0, $m4is_qvehs['merchant_id'], (bool) $m4is_qvehs['bypass_commissions']); if (! in_array(strtolower($m4is_kxwo['Code']), ['declined', 'error'] ) ) {  $m4is_edow = $success_action; $m4is_qw8dk = $success_goal; $m4is_w9feq2 = $success_tag; $m4is__mto = $success_url; } else {  if (! $m4is_qvehs['keep_failed']) { self::$m4is_gwtb03->deleteInvoice($m4is_zcyj); } } } date_default_timezone_set ($m4is_oz1g3); } if (! empty($m4is_edow) ) { self::$m4is_bxv7u->m4is_evrbh($m4is_edow, $m4is_aicfp); } if (! empty($m4is_qw8dk) ) { self::$m4is_bxv7u->m4is_rctzo($m4is_qw8dk, $m4is_aicfp); } if (! empty($m4is_w9feq2) ) { self::$m4is_bxv7u->m4is__mkz($m4is_w9feq2, $m4is_aicfp); } self::$m4is_bxv7u->m4is_qjrxkl($m4is_aicfp); if (! empty($m4is__mto) ) {  echo '<script type="text/javascript"> window.location.replace("', $m4is__mto, '"); </script>'; exit; } } static 
function m4is_r_ahl9($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') { if ( self::$m4is_kuzmd1 ) { return ''; } static $m4is_ort1 = false; $m4is_p78sgz = [ 'affiliate_id' => 0, 'allow_dupe' => 'n', 'autorun' => 'y',  'debug' => 'n', 'delay_days' => 0, 'dupe_action' => '', 'dupe_goal' => '', 'dupe_tag' => '', 'dupe_url' => '', 'failure_action' => '', 'failure_goal' => '', 'failure_tag' => '', 'failure_url' => '', 'first_only' => 'y', 'm4is_p04z' => '', 'm4is_c8ie6' => '', 'id' => 0, 'keep_failed' => 'n', 'merchant_id' => self::$m4is_bxv7u->m4is_mmdrl( 'settings', 'merchant_account_id' ), 'price' => -1, 'quantity' => 1, 'success_action' => '', 'success_goal' => '', 'success_tag' => '', 'success_url' => '', 'taxable' => 'n', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } $m4is_qvehs = shortcode_atts( $m4is_p78sgz, $m4is_qvehs, 'memberium' ); $m4is_qvehs['m4is_c8ie6'] = trim( $m4is_qvehs['m4is_c8ie6'] ); $m4is_qvehs['m4is_p04z'] = trim( $m4is_qvehs['m4is_p04z'] ); if ( ! empty( $m4is_qvehs['m4is_c8ie6'] ) ) { if ( ! self::$m4is_bxv7u->m4is_ww6ul( $m4is_qvehs['m4is_c8ie6'] ) ) { return; } } if ( ! empty( $m4is_qvehs['m4is_p04z'] ) ) { if ( ! self::$m4is_bxv7u->m4is_p04z($m4is_qvehs['m4is_p04z'] ) ) { return; } } $m4is__dxr0 = 0; $m4is_jc9gya = 0; $m4is_qwab = true; $m4is_aicfp = self::$m4is_aicfp; $m4is_uke5g = self::$m4is_bxv7u->m4is_nisz(); $m4is_qvehs['allow_dupe'] = m4is_qipkj::m4is_vhjg( $m4is_qvehs['allow_dupe'], false ); $m4is_qvehs['autorun'] = m4is_qipkj::m4is_vhjg( $m4is_qvehs['autorun'], true ); $m4is_qvehs['debug'] = m4is_qipkj::m4is_vhjg( $m4is_qvehs['debug'], true ); $m4is_qvehs['first_only'] = m4is_qipkj::m4is_vhjg( $m4is_qvehs['first_only'], true ); $m4is_qvehs['keep_failed'] = m4is_qipkj::m4is_vhjg( $m4is_qvehs['keep_failed'], false ); $m4is_qvehs['taxable'] = m4is_qipkj::m4is_vhjg( $m4is_qvehs['taxable'], false ); $m4is_qvehs['delay_days'] = (int) $m4is_qvehs['delay_days']; $m4is_qvehs['id'] = (int) $m4is_qvehs['id']; $m4is_qvehs['merchant_id'] = (int) $m4is_qvehs['merchant_id']; $m4is_qvehs['quantity'] = (int) $m4is_qvehs['quantity']; if ( empty( $m4is_qvehs['affiliate_id'] ) ) { $m4is_qvehs['affiliate_id'] = self::$m4is_bxv7u->m4is_yy139k( $m4is_aicfp ); } if ( $m4is_qvehs['first_only'] && $m4is_ort1 ) { if ( $m4is_qvehs['debug'] ) echo 'Already Executed.  Stopping.<br>'; return ''; } $m4is_ort1 = true;  if (! isset($m4is_uke5g[$m4is_qvehs['id']]) || $m4is_uke5g[$m4is_qvehs['id']]['Active'] == 0) { $m4is_qwab = false; } if ($m4is_qvehs['delay_days'] < 0) { $m4is_qwab = false; } if ($m4is_qvehs['id'] < 0) { $m4is_qwab = false; } if ($m4is_qvehs['merchant_id'] < 0) { $m4is_qwab = false; } if ($m4is_qvehs['price'] < 0) { if (isset($m4is_uke5g[$m4is_qvehs['id']]['PlanPrice']) ) { $m4is_qvehs['price'] = (double) $m4is_uke5g[$m4is_qvehs['id']]['PlanPrice']; } else { $m4is_qwab = false; } } $m4is_qvehs['price'] = (double) $m4is_qvehs['price']; if ($m4is_qvehs['quantity'] < 1) { $m4is_qwab = false; } if ($m4is_qwab) {  if (! ( (int) $m4is__dxr0) ) { $m4is_xk0cg = m4is_s3nu::m4is_or9mj($m4is_aicfp); $m4is_xk0cg = m4is_s3nu::m4is_knd_c($m4is_xk0cg); $m4is__dxr0 = (int) $m4is_xk0cg['Id']; if ($m4is_qvehs['debug']) echo 'Credit Card ID = ', $m4is__dxr0, '<br>'; } } if ( ! $m4is__dxr0 ) { $m4is_qwab = false; } $m4is_edow = $m4is_qvehs['failure_action']; $m4is_qw8dk = $m4is_qvehs['failure_goal']; $m4is_w9feq2 = $m4is_qvehs['failure_tag']; $m4is__mto = $m4is_qvehs['failure_url']; if ($m4is_qwab) { $m4is_ort1 = true; $m4is_jc9gya = self::$m4is_gwtb03->addRecurringAdv($m4is_aicfp, $m4is_qvehs['allow_dupe'], $m4is_qvehs['id'], $m4is_qvehs['quantity'], $m4is_qvehs['price'], $m4is_qvehs['taxable'], $m4is_qvehs['merchant_id'], $m4is__dxr0, $m4is_qvehs['affiliate_id'], $m4is_qvehs['delay_days']); if ($m4is_qvehs['debug']) echo 'Subscription ID  = ', $m4is_jc9gya, '<br>'; if ( (int) $m4is_jc9gya > 0) { $m4is_zcyj = self::$m4is_gwtb03->recurringInvoice($m4is_jc9gya); $m4is_n_bp6 = self::$m4is_gwtb03->chargeInvoice($m4is_zcyj, _x('Memberium Subscription Purchase', 'memb_order_subscription', 'memberium'), $m4is__dxr0, $m4is_qvehs['merchant_id'], false); if (! in_array($m4is_n_bp6['Code'], ['Declined', 'Error']) ) { $m4is_edow = $m4is_qvehs['success_action']; $m4is_qw8dk = $m4is_qvehs['success_goal']; $m4is_w9feq2 = $m4is_qvehs['success_tag']; $m4is__mto = $m4is_qvehs['success_url']; } else { if (! $m4is_qvehs['keep_failed']) { self::$m4is_gwtb03->deleteSubscription($m4is_jc9gya); } } } else { if (stripos($m4is_jc9gya, 'Duplicate order') ) { if ($m4is_qvehs['debug']) echo 'Duplicate Order Detected<br>'; $m4is_edow = $m4is_qvehs['dupe_action']; $m4is_qw8dk = $m4is_qvehs['dupe_goal']; $m4is_w9feq2 = $m4is_qvehs['dupe_tag']; $m4is__mto = $m4is_qvehs['dupe_url']; } } } if (! empty($m4is_edow) ) { if ($m4is_qvehs['debug']) echo 'Running Actionsets = ', $m4is_edow, '<br>'; self::$m4is_bxv7u->m4is_evrbh($m4is_edow, $m4is_aicfp); } if (! empty($m4is_qw8dk) ) { if ($m4is_qvehs['debug']) echo 'Running Goals = ', $m4is_qw8dk, '<br>'; self::$m4is_bxv7u->m4is_rctzo($m4is_qw8dk, $m4is_aicfp); } if (! empty($m4is_w9feq2) ) { if ($m4is_qvehs['debug']) echo 'Adding/Removing Tags = ', $m4is_w9feq2, '<br>'; self::$m4is_bxv7u->m4is__mkz($m4is_w9feq2, $m4is_aicfp); } if ($m4is_qvehs['debug']) echo 'Syncing Contact = ', $m4is_w9feq2, '<br>'; self::$m4is_bxv7u->m4is_qjrxkl($m4is_aicfp); if ($m4is_qvehs['debug']) echo 'Redirect URL = ', $m4is__mto, '<br>'; if ($m4is_qvehs['debug']) return; if ($m4is_qvehs['first_only'] && ! empty($m4is__mto) ) { echo '<script type="text/javascript"> window.location.replace("', $m4is__mto, '"); </script>'; exit; } } static 
function m4is_chrpu($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') { if ( self::$m4is_kuzmd1 ) { return ''; } static $m4is__iftk = 1; m4is_d8yr0_::m4is_vsv0mr(); $m4is_p78sgz = [ 'autorun' => 0, 'button_text' => 'Buy Now', 'button_url' => '', 'clicked_button_text' => 'Processing Order', 'contact_id' => self::$m4is_aicfp, 'creditcard_id' => 0, 'css_class' => '', 'debug' => 0, 'delete_failed' => 1, 'failure_actionset' => 0, 'failure_goal' => '', 'failure_tag' => 0, 'failure_url' => '', 'lead_affiliate_id' => 0, 'nojs' => 0, 'order_title' => 'Memberium 1 Click Order', 'plan_id' => 0, 'process_specials' => true, 'product_ids' => '', 'promo_codes' => '', 'sale_affiliate_id' => 0, 'subscription_ids' => '', 'success_actionset' => 0, 'success_goal' => '', 'success_tag' => 0, 'success_url' => '', ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_qvehs['nojs'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['nojs'], false); $m4is_qvehs['debug'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['debug'], false); if ($m4is_qvehs['contact_id'] < 1) { if ($m4is_qvehs['debug']) { echo '<p style="font-weight:bold;color:red">No contact specified.</p>'; } return ''; } if (empty($m4is_qvehs['product_ids']) ) { $m4is_yhq4i0 = 0; } if ($m4is_qvehs['creditcard_id'] == 0) { $m4is_xk0cg = m4is_s3nu::m4is_or9mj($m4is_qvehs['contact_id']); if (is_array($m4is_xk0cg) && ! empty($m4is_xk0cg)) { $m4is_o6h2 = m4is_s3nu::m4is_knd_c($m4is_xk0cg); $m4is_qvehs['creditcard_id'] = $m4is_o6h2['Id']; } else { return ''; } } if ( ! empty( $_COOKIE['infusionsoft_affiliate'] ) ) { $m4is_qvehs['sale_affiliate_id'] = empty( $m4is_qvehs['sale_affiliate_id'] ) ? (int) $_COOKIE['infusionsoft_affiliate'] : $m4is_qvehs['sale_affiliate_id']; $m4is_qvehs['lead_affiliate_id'] = empty( $m4is_qvehs['lead_affiliate_id'] ) ? (int) $_COOKIE['infusionsoft_affiliate'] : $m4is_qvehs['lead_affiliate_id']; } $m4is_yhq4i0 = (int) $m4is_qvehs['plan_id']; $m4is_qvehs['process_specials'] = (boolean) $m4is_qvehs['process_specials']; $m4is_qvehs['product_ids'] = array_filter(array_map('trim', explode(',', $m4is_qvehs['product_ids']) ) ); $m4is_qvehs['product_ids'] = array_filter(array_map('intval', $m4is_qvehs['product_ids']) ); $m4is_qvehs['promo_codes'] = array_filter(array_map('trim', explode(',', $m4is_qvehs['promo_codes']) ) ); $m4is_qvehs['subscription_ids'] = array_filter(array_map('trim', explode(',', $m4is_qvehs['subscription_ids']) ) ); $m4is_qvehs['subscription_ids'] = array_filter(array_map('intval', $m4is_qvehs['subscription_ids']) ); $m4is_rxc9n1 = [ 'contact_id' => $m4is_qvehs['contact_id'], 'creditcard_id' => $m4is_qvehs['creditcard_id'], 'debug' => $m4is_qvehs['debug'], 'delete_failed' => $m4is_qvehs['delete_failed'], 'failure_actionset' => $m4is_qvehs['failure_actionset'], 'failure_goal' => $m4is_qvehs['failure_goal'], 'failure_tag' => $m4is_qvehs['failure_tag'], 'failure_url' => $m4is_qvehs['failure_url'], 'lead_affiliate_id' => $m4is_qvehs['lead_affiliate_id'], 'order_title' => $m4is_qvehs['order_title'], 'payplan_id' => $m4is_yhq4i0, 'process_specials' => $m4is_qvehs['process_specials'], 'product_ids' => $m4is_qvehs['product_ids'], 'promo_codes' => $m4is_qvehs['promo_codes'], 'sale_affiliate_id' => $m4is_qvehs['sale_affiliate_id'], 'subscription_ids' => $m4is_qvehs['subscription_ids'], 'success_actionset' => $m4is_qvehs['success_actionset'], 'success_goal' => $m4is_qvehs['success_goal'], 'success_tag' => $m4is_qvehs['success_tag'], 'success_url' => $m4is_qvehs['success_url'], ]; $m4is_rxc9n1 = base64_encode(serialize($m4is_rxc9n1) ); $m4is_k_fdu = self::$m4is_bxv7u->m4is_rxyecs($m4is_rxc9n1); $m4is_o_8l1 = 'memb_placeorder_form-' . $m4is__iftk; $m4is_bgcfdt = 'memb_placeorder_button_' . $m4is__iftk;  $m4is_rpscuy = ''; $m4is_rpscuy .= "<form name='{$m4is_o_8l1}' id='{$m4is_o_8l1}' method='post'>"; $m4is_rpscuy .= "<input type='hidden' name='memb_form_type' value='memb_placeorder_button'>"; $m4is_rpscuy .= "<input type='hidden' name='params' value='{$m4is_rxc9n1}'>"; $m4is_rpscuy .= "<input type='hidden' name='form_id' value='{$m4is__iftk}'>"; $m4is_rpscuy .= "<input type='hidden' name='digital_signature' value='{$m4is_k_fdu}'>"; $m4is_rpscuy .= wp_nonce_field('memb_placeorder_' . $m4is__iftk, '_wpnonce', true, false); if (empty($m4is_qvehs['button_url']) ) { $m4is_rpscuy .= "<input type='submit' class='{$m4is_qvehs['css_class']}' id='{$m4is_bgcfdt}' value='{$m4is_qvehs['button_text']}'>"; } else { $m4is_rpscuy .= "<input type='image' src='{$m4is_qvehs['button_url']}' class='{$m4is_qvehs['css_class']}' id='{$m4is_bgcfdt}'>"; } $m4is_rpscuy .= "</form>"; if (! $m4is_qvehs['nojs']) { $m4is_rpscuy .= "
			<script>
			jQuery(document).ready(function() {
				jQuery('#{$m4is_bgcfdt}').on('click', function() {
					jQuery('#{$m4is_bgcfdt}').prop('value', '{$m4is_qvehs['clicked_button_text']}');
					jQuery('#{$m4is_bgcfdt}').attr('disabled', 'disabled');
					jQuery('#{$m4is_o_8l1}').submit();
					return true;
				});
			});
			</script>
			"; } $m4is__iftk++; return $m4is_rpscuy; } static 
function m4is_upsn7w($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') { if ( self::$m4is_kuzmd1 ) { return ''; } if (is_feed() ) { return; }  $m4is_p78sgz = [ 'field' => 'invoicetotal', 'order_id' => isset($_GET['orderId']) ? $_GET['orderId'] : 0, 'refresh' => false, ]; if (isset($m4is_qvehs[0]) && $m4is_qvehs[0] == 'showatts') { return implode(',', array_keys($m4is_p78sgz) ); } $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_qvehs['refresh'] = m4is_qipkj::m4is_vhjg($m4is_qvehs['refresh'], false); $m4is_qvehs['field'] = strtolower(trim($m4is_qvehs['field']) );  if (! $m4is_qvehs['refresh']) { if (empty($m4is_qvehs['order_id']) ) { return; } }  $m4is_s2e0 = [ 'Contact0Email', 'inf_field_Email', ]; foreach($m4is_s2e0 as $m4is_sv3h) { if (empty($m4is_m2h6b) ) { $m4is_m2h6b = empty($_GET[$m4is_sv3h]) ? '' : $_GET[$m4is_sv3h]; } } if (empty($m4is_m2h6b) ) { $m4is_m2h6b = isset($_SESSION['keap']['contact']['email']) ? $_SESSION['keap']['contact']['email'] : ''; } if (empty($m4is_m2h6b) ) { return 0; } $m4is_aicfp = self::$m4is_bxv7u->m4is__yge($m4is_m2h6b); if (empty($m4is_aicfp) ) { return 0; } if ($m4is_qvehs['refresh']) { if (! $m4is_aicfp) { return; } } if ($m4is_qvehs['refresh'] || ( self::$m4is_bxv7u->m4is_wy4j3() < $m4is_qvehs['order_id']) ) { m4is_vvgc8::m4is_z3anvh(); } if ($m4is_qvehs['refresh']) { $m4is_qvehs['order_id'] = self::$m4is_bxv7u->m4is_g28l($m4is_aicfp); } $m4is_w1agy = self::$m4is_bxv7u->m4is_w1e0wk($m4is_aicfp); $m4is_lxlm0 = [ 'invoicetotal' => 0, 'totaldue' => 0, 'totalpaid' => 0, ]; if (is_array($m4is_w1agy) ) { foreach($m4is_w1agy as $m4is_ra9j4) { if ($m4is_ra9j4['JobId'] == $m4is_qvehs['order_id']) { $m4is_lxlm0['invoicetotal'] = $m4is_lxlm0['invoicetotal'] + $m4is_ra9j4['InvoiceTotal']; $m4is_lxlm0['totaldue'] = $m4is_lxlm0['totaldue'] + $m4is_ra9j4['TotalDue']; $m4is_lxlm0['totalpaid'] = $m4is_lxlm0['totalpaid'] + $m4is_ra9j4['TotalPaid']; } } } return isset($m4is_lxlm0[$m4is_qvehs['field']]) ? $m4is_lxlm0[$m4is_qvehs['field']] : 0; } static 
function m4is_eco1d2($m4is_qvehs, $m4is_amunwi = null, $m4is_rz70ok = '') { if ( self::$m4is_kuzmd1 ) { return ''; } if (! is_user_logged_in() ) { return; } if (is_feed() ) { return; } $m4is_m2h6b = m4is_lpl4d::m4is_bfi49('email'); $m4is_p1ug = m4is_lpl4d::m4is_bfi49('password'); $m4is_p78sgz = [ 'css_id' => '', 'height' => 720, 'mode' => 'url',  'width' => 540, ]; if ( isset( $m4is_qvehs[0] ) && $m4is_qvehs[0] == 'showatts' ) { return implode( ',', array_keys( $m4is_p78sgz ) ); } if (empty($m4is_m2h6b) || empty($m4is_p1ug) ) { return; } $m4is_qvehs = shortcode_atts($m4is_p78sgz, $m4is_qvehs, 'memberium'); $m4is_qvehs['mode'] = strtolower(trim($m4is_qvehs['mode']));  $m4is_q7m2 = self::$m4is_q7m2; $m4is_sedj = (int) $m4is_qvehs['height']; $m4is_fp2h13 = (int) $m4is_qvehs['width']; $m4is_m2h6b = urlencode($m4is_m2h6b); $m4is_p1ug = urlencode($m4is_p1ug); $m4is_k2qb08 = ''; if ($m4is_qvehs['mode'] == 'iframe') { $m4is_k2qb08 = '<iframe src="https://' . $m4is_q7m2 . '.infusionsoft.com/ClientLogin/loginProcess.jsp?email=' . $m4is_m2h6b . '&amp;password=' . $m4is_p1ug . '&amp;Login=Login" width="720" height="540" frameborder="0" scrolling="auto"></iframe>'; } elseif ($m4is_qvehs['mode'] == 'url') { $m4is_k2qb08 = 'https://' . $m4is_q7m2 . '.infusionsoft.com/ClientLogin/loginProcess.jsp?email=' . $m4is_m2h6b . '&password=' . $m4is_p1ug . '&Login=Login'; } elseif ($m4is_qvehs['mode'] == 'link') { $m4is_k2qb08 = '<a target="clientlogin" href="https://' . $m4is_q7m2 . '.infusionsoft.com/ClientLogin/loginProcess.jsp?email=' . $m4is_m2h6b . '&password=' . $m4is_p1ug . '&Login=Login">Click Me</a>'; } elseif ($m4is_qvehs['mode'] == 'redirect') { } return $m4is_k2qb08; }    }
