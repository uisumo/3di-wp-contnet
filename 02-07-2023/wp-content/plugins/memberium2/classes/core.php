<?php
/**
* Copyright (c) 2012-2022 David J Bullock
* Web Power and Light, LLC
* https://webpowerandlight.com
* support@webpowerandlight.com
*
*/

 defined( 'ABSPATH' ) || die(); final 
class m4is_emz57o { private $m4is_n8zp05 = [], $m4is_qbz5s = [], $m4is_l98vlp = [], $m4is_r7eryi = false, $m4is_h4u9r = false, $m4is_n_v3ln = [], $m4is_n5xsd1 = [], $m4is_wmzqp = [], $m4is_bguci9 = null, $m4is_thud = null, $m4is_a0vjlg = [], $m4is_wh7ad = [], $isdk = null; protected $m4is_kcersp = 0, $m4is_f_d2 = false, $m4is_clvmz = 0, $i2sdk = null, $i2sdk_options = [], $license_status = false, $options = [], $trial_mode = 0;  static 
function m4is_a6x52r( string $m4is_bguci9, string $m4is_thud ) : self { static $m4is_jprj8; return isset( $m4is_jprj8 ) ? $m4is_jprj8 : $m4is_jprj8 = new self( $m4is_bguci9, $m4is_thud ); } 
function __construct( string $m4is_bguci9, string $m4is_thud ) { $this->m4is_bguci9 = $m4is_bguci9 . '/'; $this->m4is_thud = $m4is_thud; $this->m4is_b6kgi(); $this->m4is__ru5jo();  add_action( 'plugins_loaded', [$this, 'm4is_zbtp'], 1 ); add_action( 'plugins_loaded', [$this, 'm4is_f3y8'], 2 );  $this->m4is_mruzt(); $this->m4is_rcbw(); $this->m4is_efgr75(); $this->m4is_z40qw_(); if ( ! is_admin() ) { $this->m4is_vfa0vb(); $this->m4is_ru32(); } } private 
function m4is_efgr75() { $this->m4is_g3sv67(); if (! defined('WP_DEBUG') || ! WP_DEBUG) { error_reporting(E_CORE_ERROR | E_CORE_WARNING | E_COMPILE_ERROR | E_ERROR | E_PARSE | E_USER_ERROR); @ini_set('display_errors', 0); } }    private 
function m4is_b6kgi() { $this->m4is_n5xsd1['start'] = [ 'time' => empty( $_SERVER['REQUEST_TIME_FLOAT'] ) ? microtime( true ) : $_SERVER['REQUEST_TIME_FLOAT'], 'memory' => memory_get_usage(), 'http_calls' => 0, 'api_calls' => 0, 'api_time' => 0, ]; add_filter( 'pre_http_request', [$this, 'm4is_pjk3'], 1, 3); } 
function m4is_oizo( bool $m4is_c_a7 = true ) { if ( $m4is_c_a7 ) { $m4is_n_bp6 = [ 'time' => microtime( true ) - $this->m4is_n5xsd1['start']['time'], 'memory' => memory_get_usage() - $this->m4is_n5xsd1['start']['memory'], 'http_calls' => (int) $this->m4is_n5xsd1['start']['http_calls'], 'api_calls' => (int) $this->m4is_n5xsd1['start']['api_calls'], ]; } else { $m4is_n_bp6 = [ 'time' => microtime( true ) - $this->m4is_n5xsd1['start']['time'], 'memory' => memory_get_usage(), 'http_calls' => (int) $this->m4is_n5xsd1['start']['http_calls'], 'api_calls' => (int) $this->m4is_n5xsd1['start']['api_calls'], ]; } return $m4is_n_bp6; } 
function m4is_hyv89() { global $wp_object_cache; $m4is_ax07 = number_format_i18n( microtime( true ) - $this->m4is_n5xsd1['start']['time'], 3 ) . 's'; $m4is_s8k6g3 = size_format( $this->m4is_n5xsd1['end']['memory'], 2 ); $m4is_d6ctj = (int) $this->m4is_n5xsd1['start']['http_calls']; $m4is_dg4i = (int) $this->m4is_n5xsd1['start']['api_calls']; $m4is_s7f0uk = get_num_queries(); $m4is_ylmt8 = property_exists( $wp_object_cache, 'cache_hits' ) ? (int) $wp_object_cache->cache_hits : 0; $m4is_vph0m = property_exists( $wp_object_cache, 'cache_misses' ) ? (int) $wp_object_cache->cache_misses : 0; $m4is_n3zp = [ 'wpal-memberium-time' => $m4is_ax07, 'wpal-memberium-memory' => $m4is_s8k6g3, 'wpal-memberium-http-calls' => $m4is_d6ctj, 'wpal-memberium-crm-api' => $m4is_dg4i,  'wpal-memberium-db-queries' => $m4is_s7f0uk, 'wpal-memberium-cache-hits' => $m4is_ylmt8, 'wpal-memberium-cache-misses' => $m4is_vph0m, ]; echo "<script>\n"; echo ' document.addEventListener( "DOMContentLoaded", function() { ' . "\n"; foreach( $m4is_n3zp as $m4is_ap3_ => $m4is_rhfd ) { echo '  document.getElementById( "' . $m4is_ap3_ . '" ).innerHTML = "' . $m4is_rhfd . '";' . "\n"; } echo ' }); ' . "\n"; echo "\n</script>"; } 
function m4is_bg9mi5( bool $m4is_fj79v = false ) { global $wp_object_cache; $this->m4is_n5xsd1['end'] = [ 'time' => microtime( true ), 'memory' => memory_get_usage(), ]; if ( is_admin_bar_showing() ) { $this->m4is_hyv89(); } return; if ( $m4is_fj79v == false && ! is_admin_bar_showing() ) { return; } $m4is_n3zp = [ 'wpal-memberium-time' => $m4is_ax07, 'wpal-memberium-memory' => $m4is_s8k6g3, 'wpal-memberium-http-calls' => $m4is_d6ctj, 'wpal-memberium-crm-api' => $m4is_dg4i,  'wpal-memberium-db-queries' => $m4is_s7f0uk, 'wpal-memberium-cache-hits' => $m4is_ylmt8, 'wpal-memberium-cache-misses' => $m4is_vph0m, ]; echo "<script>\n"; echo ' document.addEventListener( "DOMContentLoaded", function() { ' . "\n"; foreach( $m4is_n3zp as $m4is_ap3_ => $m4is_rhfd ) { echo '  document.getElementById( "' . $m4is_ap3_ . '" ).innerHTML = "' . $m4is_rhfd . '";' . "\n"; } echo ' }); ' . "\n"; echo "\n</script>"; } 
function m4is_a5h284() { return;  } 
function m4is_taocq(float $m4is_ax07 = 0, $m4is_j1vz = '' ) { $this->m4is_n5xsd1['start']['api_calls']++; $this->m4is_n5xsd1['start']['api_time'] += $m4is_ax07; } 
function m4is_pjk3( $m4is_n_bp6, $m4is_w5ky4q, $m4is__mto) { $this->m4is_n5xsd1['start']['http_calls'] = $this->m4is_n5xsd1['start']['http_calls'] + 1; return $m4is_n_bp6; }     private 
function m4is_rcbw() { if ( empty( $this->m4is_n8zp05 ) ) { $m4is_h3w89 = $this->m4is_yl5j8(); $m4is_c25ygt = $this->m4is_wule6i(); $this->m4is_n8zp05 = [ 'm4is_l0uwos' => 'classes/access/access', 'm4is__q5cn' => 'classes/crm/keap/affiliate', 'm4is_f84s3h' => 'classes/crm/keap/interface', 'm4is_zbyh' => 'classes/crm/keap/contact', 'm4is_s3nu' => 'classes/crm/keap/creditcard', 'm4is_vvgc8' => 'classes/crm/keap/ecommerce', 'm4is_wdzu' => 'classes/crm/keap/filebox', 'm4is_q1amx' => 'classes/crm/keap/httppost_log', 'm4is_y96l1' => 'classes/crm/keap/owner', 'm4is_bw7_y' => 'classes/crm/keap/social', 'm4is_v98gbn' => 'classes/access/admin', 'm4is_bqb1' => 'classes/access/frontend', 'm4is_d2vzc' => 'classes/activate', 'm4is_zvyj' => 'classes/access/admin', 'm4is_c6uv4' => 'classes/access/admin-menu', 'm4is_qd7az' => 'classes/access/admin-taxonomy', 'm4is__d4kf' => 'classes/access/admin-widgets', 'm4is_q87q9' => 'classes/adminbar', 'm4is_xtc867' => 'classes/autologin', 'm4is__vdno' => 'classes/cpt', 'm4is_xdqx' => 'classes/cron', 'm4is_apcu3' => 'classes/debuglog', 'm4is_oz3r' => 'classes/diagnostics', 'm4is_pcys' => 'classes/frontend', 'm4is__qfb' => 'classes/gdpr', 'm4is_bjx91g' => 'classes/geolocation', 'm4is_zjw4c' => 'classes/language', 'm4is_pewcid' => 'classes/login', 'm4is__4htl6' => 'classes/maintenance', 'm4is_v1_x4' => 'classes/members', 'm4is_hgj3' => 'classes/memberships', 'm4is_lr56w2' => 'classes/network_tools', 'm4is_d8yr0_' => 'classes/pagehandling', 'm4is_xj90' => 'classes/post_sherpa', 'm4is_qmpq8' => 'classes/posts', 'm4is_o5aoir' => 'classes/provisioning', 'm4is_xon4yh' => 'classes/rss', 'm4is_q6lca' => 'classes/sessions', 'm4is_by_t' => 'classes/sitehealth', 'm4is_cou7' => 'classes/time', 'm4is_n2_bj' => 'classes/updater', 'm4is_lpl4d' => 'classes/user', 'm4is_cwzpq' => 'classes/wpuser',  'm4is_q_nw6f' => 'modules/discourse/core', 'm4is_n_vod8' => 'modules/facebook/admin', 'm4is_s9q0' => 'modules/facebook/core', 'm4is_fyrc' => 'modules/facebook/shortcodes', 'm4is_pdbmcu' => 'modules/buddypress/core',  ]; spl_autoload_register( [$this, 'm4is_pgqrp0'] ); } }  
function m4is_pgqrp0( string $m4is_mn_xj ) { $m4is_mn_xj = strtolower( $m4is_mn_xj ); if ( $m4is_mn_xj == 'i2sdk_class' ) { $m4is_ydwik = $this->m4is_mmdrl( 'settings', 'beta/oauth' ) ? 'i2sdkng' : 'i2sdk'; include $this->m4is_mqp8m( $m4is_ydwik . '/i2sdk.php' ); } else { if ( array_key_exists( $m4is_mn_xj, $this->m4is_n8zp05 ) ) { $m4is_s3dnu = substr( $this->m4is_n8zp05[$m4is_mn_xj], 0, 1 ) == '/' ? $this->m4is_n8zp05[$m4is_mn_xj] . '.php' : $this->m4is_pri6vy() . $this->m4is_n8zp05[$m4is_mn_xj] . '.php'; if ( file_exists( $m4is_s3dnu ) ) { include $m4is_s3dnu; } } } }  
function m4is_wdf4zp( string $m4is_mn_xj, string $m4is_qfup8) { $m4is_mn_xj = strtolower( trim($m4is_mn_xj) ); if (! array_key_exists($m4is_mn_xj, $this->m4is_n8zp05) ) { $this->m4is_n8zp05[$m4is_mn_xj] = $m4is_qfup8; } }  
function m4is_fovlg( array $m4is_n8zp05 ) { $this->m4is_n8zp05 = array_merge( $this->m4is_n8zp05, $m4is_n8zp05 ); }    private 
function m4is_g3sv67() { $this->m4is_wmzqp = get_option( 'memberium', [] ); $m4is_wmzqp = is_array($this->m4is_wmzqp) ? $this->m4is_wmzqp : []; $m4is_do9g = empty($this->m4is_wmzqp); $m4is_p78sgz = [ 'affiliate_detect' => 0, 'allow_autologin' => 0, 'allow_local_logins' => 1, 'allow_wpadmin_dashboard' => 'edit_others_posts', 'allow_wpadmin_titlebar' => 'edit_others_posts', 'allow_wpadmin' => 1, 'async_limit' => 0, 'async_tags' => 0, 'attachment_pages' => 1, 'autogenerate_excerpts' => 0, 'autologout_time' => 0, 'autoupdate' => 1, 'beta_update_check' => 0, 'beta/oauth' => 0, 'bruteforce_check' => 0, 'cache_bust' => 0, 'cache_flush' => 0, 'choose_affiliate' => 1, 'db_sessions' => 0, 'default_logout_page' => 0, 'default_page_redirect' => '', 'default_prohibited_action' => 'redirect', 'default_reglink_tag' => 0, 'disable_displayname_update' => 0, 'disable_lost_password' => 0, 'disable_password_reset' => 0, 'disable_xframe' => 0, 'display_errors' => 0, 'displayname_format' => '', 'dynamic_menus' => 0, 'enable_slug_update' => 0, 'excerpt_length' => 55, 'extended_reg_fields' => 0, 'facebook_app_id' => '', 'fast_user_list' => 0, 'first_login_page' => 0, 'force_learndash_inheritance' => defined('LEARNDASH_VERSION') ? 1 : 0, 'global_excerpt' => '', 'hashing_mode' => 'plain', 'html_shortcode_embed' => 1, 'httppost_log' => 1, 'ignore_affiliate_fields' => '', 'ignore_contact_fields' => 'ContactNotes', 'ignore_tag_categories' => '', 'include_default_excerpt' => '', 'known_logins_only' => 0, 'last_login_field' => '', 'license_key' => '', 'local_auth_only' => 0, 'login_actionset' => 0, 'login_log' => 1, 'login_tag' => 0, 'login_url' => 0, 'logout_actionset' => 0, 'logout_tag' => 0, 'makepass_scan_size' => 5, 'makepass_scan_tag' => 0, 'makepass_success_actionset' => 0, 'makepass_success_tag' => 0, 'max_affiliate_age' => 0, 'max_contact_age' => 0, 'maximum_login_ips' => 0, 'maximum_login_timeframe' => 0, 'memberium_user_registration_tag' => 0, 'merchant_account_id' => 0, 'microcache_compat_session' => 0, 'min_password_length' => 8, 'multi_language' => 0, 'new_user_registration_tag' => 0, 'page_inheritance' => 1, 'password_field' => 'Password', 'password_reset_tag' => 0, 'password_strength' => 0, 'persistent_login' => 0, 'plaintext_db' => 0, 'plaintext_db' => 0, 'preview_mode' => 0, 'protect_feeds' => 1, 'referral_partner_order' => 1,  'registration_url' => 0, 'require_membership' => 0, 'session_timeout' => 0, 'show_advanced_options' => 0, 'show_post_columns' => 0, 'simultaneous_logins' => 0, 'site_ban_tag' => 0, 'site_lock_enabled' => 0, 'spiffy_subdomain' => '', 'sync_affiliate' => 0, 'sync_ecommerce' => 0, 'sync_meta_updates' => 0, 'sync_new_wp_users' => 0, 'sync_users' => 0, 'telemetry' => 1, 'thrivecart_secret' => '', 'two_pass_shortcode_filter' => 0, 'user_registration_tag' => 0, 'username_field' => 'Email', 'version' => $this->m4is_gu3m(), 'wp_autop' => 0, 'wplogin_redirect_to' => 0, ]; $m4is_tct_hk = $this->m4is_wmzqp['settings']; $m4is_tct_hk = wp_parse_args($m4is_tct_hk, $m4is_p78sgz); $this->m4is_wmzqp['settings'] = $m4is_tct_hk; return $this->m4is_wmzqp; } private 
function m4is_c43n6k() { $i2sdk_options = $this->get_i2sdk_options(); $m4is_iwi8_ = $this->m4is_nn6s_(); $m4is_gwtb03 = $this->m4is_wnlbj_(); $this->m4is_qbz5s['appname'] = method_exists( $m4is_gwtb03, 'getAppName' ) ? $m4is_gwtb03->getAppName() : ''; $this->m4is_qbz5s['verified'] = method_exists( $m4is_iwi8_, 'isVerified' ) ? $m4is_iwi8_->isVerified() : false; $this->m4is_qbz5s['api_key'] = isset( $i2sdk_options['api_key'] ) ? $i2sdk_options['api_key'] : ''; }    
function m4is_tya_f( $m4is_iphle ) { if ( $m4is_iphle !== $this->m4is_thud ) { return; } } 
function m4is_zbtp() { static $m4is_jvm_p = false; if ( $m4is_jvm_p ) { return; } require_once $this->m4is_h3igd0( 'memberium_api.php' ); require_once $this->m4is_h3igd0( 'functions.php' ); $this->m4is_vkvta5(); $this->m4is_c43n6k(); $this->m4is_bwx1i(); $this->m4is_tt57();  $m4is_jvm_p = true; $this->servername = preg_replace( '/^www\./', '', strtolower( parse_url( get_bloginfo( 'url' ), PHP_URL_HOST ) ) ); $this->i2sdk = $GLOBALS['i2sdk']; $this->isdk = $this->i2sdk->isdk; $this->i2sdk_options = $this->get_i2sdk_options(); $this->license_key_name = m4is_o5aoir::m4is_tqua(); m4is_o5aoir::m4is__qlbej();  $this->m4is_o13at(); $this->m4is_ap508(); $this->m4is_j1fd(); if ( isset( $_COOKIE['login_error'] ) ) { $this->login_error = esc_html( __( $_COOKIE['login_error'] ) ); setcookie( 'login_error', '', ( time() - 86400 ) ); } } 
function m4is_f3y8() {  if ( ! m4is_o5aoir::m4is__qlbej() ) { return; } $this->m4is_j_1t(); $this->m4is_z73r(); $this->m4is_iuswj(); $this->m4is_z8z7_p();  } private 
function m4is_vkvta5() { if ( ! defined( 'I2SDK_HOME' ) ) { $m4is_ydwik = $this->m4is_mmdrl( 'settings', 'beta/oauth' ) ? 'i2sdkng' : 'i2sdk'; require_once $this->m4is_pri6vy() . "vendor/{$m4is_ydwik}/i2sdk.php"; } }    
function m4is_tios() { static $m4is_hpgx6w = false; return $m4is_hpgx6w = $m4is_hpgx6w ? $m4is_hpgx6w : get_option( 'memberium/system/config/timestamp', 0 ); } 
function m4is_sc3a() { update_option( 'memberium/system/config/timestamp', microtime( true ), true ); } 
function m4is_oqjptk() { return MEMBERIUM_NESTING_LEVELS; }  
function m4is_re5x(string $m4is_ap3_) { return isset( $this->m4is_qbz5s[$m4is_ap3_] ) ? $this->m4is_qbz5s[$m4is_ap3_] : false; } 
function m4is_jv0g(string $m4is_ap3_, string $m4is_rhfd) { $this->m4is_qbz5s[$m4is_ap3_] = $m4is_rhfd; } 
function m4is_iieoky($m4is_wmzqp = false) { if ( is_array($m4is_wmzqp) ) { $this->m4is_wmzqp = $m4is_wmzqp; } update_option( 'memberium', $this->m4is_wmzqp, true ); $this->m4is_sc3a(); } 
function m4is_mmdrl(string $m4is_cbcf = '', string $m4is_ap3_ = '', string $m4is_lphf = '') { if ( empty($this->m4is_wmzqp)) { $this->m4is_wmzqp = $this->m4is_g3sv67(); } $m4is_rhfd = $m4is_lphf; if ( ! empty($m4is_cbcf) ) { if ( ! empty($m4is_ap3_) ) { if ( isset( $this->m4is_wmzqp[$m4is_cbcf][$m4is_ap3_] ) ) { $m4is_rhfd = $this->m4is_wmzqp[$m4is_cbcf][$m4is_ap3_]; } } else { if ( isset( $this->m4is_wmzqp[$m4is_cbcf] ) ) { $m4is_rhfd = $this->m4is_wmzqp[$m4is_cbcf]; } else { $m4is_rhfd = []; } } } else { $m4is_rhfd = $this->m4is_wmzqp; } return $m4is_rhfd; } 
function m4is_oqwxk($m4is_rhfd = '', string $m4is_cbcf = '', string $m4is_ap3_ = '') { if (empty($m4is_cbcf) && empty($m4is_ap3_) ) { $this->m4is_wmzqp = $m4is_rhfd; } elseif ($m4is_cbcf > '' && empty($m4is_ap3_) ) { $this->m4is_wmzqp[$m4is_cbcf] = $m4is_rhfd; } elseif ($m4is_cbcf > '' && $m4is_ap3_ > '') { $this->m4is_wmzqp[$m4is_cbcf][$m4is_ap3_] = $m4is_rhfd; } $this->m4is_iieoky(); } 
function m4is_l04_ip(string $m4is_ap3_, $m4is_rhfd = '') { $m4is_ap3_ = strtolower( trim($m4is_ap3_) ); $m4is_rhfd = trim($m4is_rhfd); $this->m4is_a0vjlg[$m4is_ap3_] = $m4is_rhfd; } 
function m4is_ey7zc(string $m4is_ap3_, $m4is_lphf = false) { $m4is_ap3_ = strtolower( trim($m4is_ap3_) ); return isset( $this->m4is_a0vjlg[$m4is_ap3_] ) ? $this->m4is_a0vjlg[$m4is_ap3_] : $m4is_lphf; } 
function m4is_umkpxs(string $m4is_ap3_ = '', $m4is_rm5ovh = 1) { $this->m4is_a0vjlg[$m4is_ap3_] = isset($this->m4is_a0vjlg[$m4is_ap3_]) ? $this->m4is_a0vjlg[$m4is_ap3_] : 0; $this->m4is_a0vjlg[$m4is_ap3_] = $this->m4is_a0vjlg[$m4is_ap3_] + $m4is_rm5ovh; return $this->m4is_a0vjlg[$m4is_ap3_]; } 
function m4is_wbl_wv(string $m4is_ap3_ = '', $m4is_rm5ovh = 1) { $this->m4is_a0vjlg[$m4is_ap3_] = isset($this->m4is_a0vjlg[$m4is_ap3_]) ? $this->m4is_a0vjlg[$m4is_ap3_] : 0; $this->m4is_a0vjlg[$m4is_ap3_] = $this->m4is_a0vjlg[$m4is_ap3_] - $m4is_rm5ovh; return $this->m4is_a0vjlg[$m4is_ap3_]; }     
function m4is_ru32() { return; $m4is_ql75i = [ ]; foreach( $m4is_ql75i as $m4is_jcwivr ) { $m4is_qfup8 = $this->m4is_pri6vy() . "vendor/{$m4is_jcwivr}/init.php"; if ( file_exists( $m4is_qfup8 ) ) { include_once $m4is_qfup8; } } }  
function m4is_vfa0vb() { $m4is_ql75i = $this->m4is__bpny9(); $m4is_e3ei = get_option('memberium_extensions', []); $m4is_jf0z = $this->m4is_nf63oz(); foreach($m4is_ql75i as $m4is_jcwivr => $m4is_s3dnu) { if (! empty($m4is_e3ei[$m4is_jcwivr]) ) { if( array_key_exists($m4is_jcwivr, $m4is_jf0z) ){ include_once $this->m4is_pri6vy() . 'vendor/' . $m4is_s3dnu; } else{ include_once $this->m4is_wule6i( $m4is_s3dnu ); } } } }  
function m4is_nf63oz(){ return [  ]; }  
function m4is__bpny9() { $m4is_ql75i = [ 'affiliate-leaderboards' => 'affiliate-leaderboards/init.php', 'facebook' => 'facebook/init.php', 'pathprotect' => 'pathprotect/init.php', 'spiffy' => 'spiffy/init.php', 'umbrella-accounts' => 'umbrella-accounts/init.php',  ]; return $m4is_ql75i; }  private 
function m4is__ru5jo() { $this->m4is_n_v3ln = [ 'i18n/contactmemberium' => 'Please contact Memberium Support for assistance.', 'i18n/error' => 'Error', 'i18n/forbidden' => 'Forbidden', 'i18n/loginfailed' => 'Login Failed', 'i18n/maximumloginsexceeded' => 'Maximum Logins Exceeded', ]; }  
function m4is_osyu5j( array $m4is_w2dqkv ) { $this->m4is_n_v3ln = array_merge( $this->m4is_n_v3ln, $m4is_w2dqkv ); }  
function m4is_vvsj( string $m4is_w9feq2, string $m4is_moqfu = 'memberium' ) { $m4is_k2qb08 = empty( $this->m4is_n_v3ln[$m4is_w9feq2] ) ? '' : _x( $this->m4is_n_v3ln[$m4is_w9feq2], $m4is_moqfu, 'memberium' ); $m4is_k2qb08 = apply_filters( 'memberium/i18n/translation', $m4is_k2qb08, $m4is_w9feq2 ); return empty( $this->m4is_n_v3ln[$m4is_w9feq2] ) ? '' : _x( $this->m4is_n_v3ln[$m4is_w9feq2], $m4is_moqfu, 'memberium' ); }  
function m4is_cxp5eb( bool $m4is_rhfd ) { $this->m4is_h4u9r = $m4is_rhfd; } 
function m4is_w6rv32() : bool { return $this->m4is_h4u9r; }     
function m4is_mtur() : array { $m4is_dm7i1c = get_post_types(['public' => false]); $m4is_i8_ymd = [  'attachment',  'elementor_library',  'et_pb_layout',  'llms_engagement', 'llms_membership', 'llms_question', 'nomination', 'shop_coupon', 'shop_order', 'shop_subscription', 'submission',  'fl-builder-template', ]; if (is_array($m4is_dm7i1c) ) { foreach($m4is_dm7i1c as $m4is_dmesa) { if (! in_array($m4is_dmesa, ['memb_shortcodeblocks', 'partials']) ) { $m4is_i8_ymd[] = $m4is_dmesa; } } } unset($m4is_dm7i1c, $m4is_dmesa); $m4is_i8_ymd = apply_filters('memberium/posts/unenhanced', $m4is_i8_ymd); return $m4is_i8_ymd; }     
function m4is_e1p2bm($m4is_r0nhe) { if (defined('WPAL_DISABLE_SSL_VERIFY') && WPAL_DISABLE_SSL_VERIFY == true) { curl_setopt($m4is_r0nhe, CURLOPT_SSL_VERIFYHOST, false); curl_setopt($m4is_r0nhe, CURLOPT_SSL_VERIFYPEER, false); } return $m4is_r0nhe; } 
function m4is_hu50($m4is_rp1is, $m4is__mto) { if ($m4is_rp1is['sslverify'] == true) { if (defined('WPAL_DISABLE_SSL_VERIFY') && WPAL_DISABLE_SSL_VERIFY == true) { $m4is_rp1is['sslverify'] = false; } } return $m4is_rp1is; } 
function m4is_nn6s_() { if ( ! is_object( $this->i2sdk ) ) { if (! is_object( $GLOBALS['i2sdk'] ) ) { $this->m4is_vkvta5(); } $this->i2sdk = $GLOBALS['i2sdk']; } return $this->i2sdk; } 
function m4is_wnlbj_() { return is_object( $this->isdk ) ? $this->isdk : $GLOBALS['i2sdk']->isdk; } 
function get_i2sdk_options() { if (method_exists('i2sdk_class', 'get_i2sdk_options')) { return i2sdk_class::get_i2sdk_options(); } $m4is_pad41 = get_option('i2sdk'); if (! $m4is_pad41) { $m4is_pad41 = []; } $m4is_p78sgz = [ 'access_token' => '', 'api_key' => '', 'api_log' => 0, 'app_name' => '', 'db_prefix' => '', 'debug_mode' => '', 'delete_on_uninstall' => 0, 'email_notification' => 0, 'error_email' => '', 'error_log' => 0, 'http_post_key' => '', 'infusionsoft_analytics' => 0, 'oauth_enabled' => 0, 'retry_count' => 3, 'server_verified' => 0, 'tracking_code' => '', 'version' => I2SDK_VERSION, ]; $m4is_pad41 = wp_parse_args($m4is_pad41, $m4is_p78sgz); return $m4is_pad41; }    
function m4is_ca5eyn() {   } 
function m4is_l1q7j( $m4is_dm7i1c ) { $m4is_dm7i1c[] = 'memb_shortcodeblocks'; $m4is_dm7i1c[] = 'partials'; return $m4is_dm7i1c; }    
function m4is_pri6vy() { return $this->m4is_bguci9; } 
function m4is_jlhf7s() { return $this->m4is_thud; } 
function m4is_yl5j8( string $m4is_s3dnu = '' ) : string { return $this->m4is_pri6vy() . 'classes/' . $m4is_s3dnu; } 
function m4is_wule6i( string $m4is_s3dnu = '' ) : string { return $this->m4is_pri6vy() . 'modules/' . $m4is_s3dnu; } 
function m4is_n367bl( string $m4is_s3dnu = '' ) : string { return $this->m4is_pri6vy() . 'screens/' . $m4is_s3dnu; } 
function m4is_h3igd0( string $m4is_s3dnu = '' ) : string { return $this->m4is_pri6vy() . 'includes/' . $m4is_s3dnu; } 
function m4is_mqp8m( string $m4is_s3dnu = '' ) : string { return $this->m4is_pri6vy() . 'vendor/' . $m4is_s3dnu; }    
function m4is_j5scev() : string { static $m4is_jz0t1s = ''; if ( empty( $m4is_jz0t1s ) ) { include ABSPATH . WPINC . '/version.php'; $m4is_jz0t1s = $wp_version; } return $m4is_jz0t1s; } 
function m4is__z7_1k() : string { return function_exists( 'wp_get_environment_type' ) ? wp_get_environment_type() : 'production'; } 
function m4is_fop0d( $m4is_q4c_xa = 0 ) : bool { $m4is_n_bp6 = false; $m4is_nzrv1 = empty( $m4is_q4c_xa ) ? wp_get_current_user() : get_user_by( 'ID', $m4is_q4c_xa ); if ( is_a( $m4is_nzrv1, 'WP_User' ) ) { $m4is_xmnb1d = [ 'manage_options', 'activate_plugins', 'update_plugins', ]; foreach($m4is_xmnb1d as $m4is_s7l34) { $m4is_n_bp6 = $m4is_nzrv1->has_cap($m4is_s7l34); if ( $m4is_n_bp6 ) { break; } } } return $m4is_n_bp6; } 
function m4is_x1nvm(int $m4is__xysg, string $m4is_lphf = '') : array { static $m4is_dhrs = [ '_is4wp_access_tags', '_is4wp_access_tags2', '_is4wp_anonymous_only', '_is4wp_any_loggedin_user', '_is4wp_any_membership', '_is4wp_contact_ids', '_is4wp_facebook_crawler', '_is4wp_force_public', '_is4wp_google_1stclick', '_is4wp_membership_levels', ]; $m4is_ppq5 = "postmeta:access:{$m4is__xysg}:"; $m4is_in0ti = false; $m4is_n_bp6 = wp_cache_get($m4is_ppq5, 'memberium2/postmeta', false, $m4is_in0ti); if (! $m4is_in0ti) { global $wpdb; $m4is_v_l4v5 = "'" . implode("','", $m4is_dhrs) . "'"; $m4is_ioxk = "SELECT `meta_key`, `meta_value` FROM {$wpdb->postmeta} WHERE `post_id` = {$m4is__xysg} AND `meta_key` IN ( {$m4is_v_l4v5} )"; $m4is_jpzyit = $wpdb->get_results($m4is_ioxk, ARRAY_A); $m4is_n_bp6 = []; foreach ($m4is_jpzyit as $m4is_wo7c93) { $m4is_n_bp6[$m4is_wo7c93['meta_key']] = $m4is_wo7c93['meta_value']; } wp_cache_set($m4is_ppq5, $m4is_n_bp6, 'memberium2/postmeta', 10800); } if (! is_null($m4is_lphf) ) { foreach($m4is_dhrs as $m4is_ap3_) { if (! isset($m4is_n_bp6[$m4is_ap3_])) { $m4is_n_bp6[$m4is_ap3_] = $m4is_lphf; } } } return $m4is_n_bp6; } 
function m4is_npamy(int $m4is__xysg) { wp_cache_delete("postmeta:access:{$m4is__xysg}", 'memberium2/postmeta'); }    
function m4is_aw5eb() { static $m4is_hsyp0 = false; if ( include_once ABSPATH . '/wp-admin/includes/plugin.php' ) { $m4is_hsyp0 = trim(get_plugin_data(MEMBERIUM_HOME, false, false)['Version']); if ($m4is_hsyp0) { $this->m4is_oqwxk($m4is_hsyp0, 'settings', 'version'); } } return $m4is_hsyp0; } 
function m4is_gu3m() : string { static $m4is_hsyp0 = false; if (! $m4is_hsyp0) { require_once ABSPATH . '/wp-admin/includes/plugin.php'; $m4is_hsyp0 = trim(get_plugin_data(MEMBERIUM_HOME, false, false)['Version']); } if (! $m4is_hsyp0) { $m4is_hsyp0 = $this->m4is_mmdrl('settings', 'version', false); } return $m4is_hsyp0; } 
function m4is_b0w3() : bool { return (bool) $this->m4is_r7eryi; } 
function m4is_di35eu(bool $m4is_oknpuo) { $this->m4is_r7eryi = $m4is_oknpuo; } 
function m4is_w47qdy() : int { return (int) m4is_lpl4d::m4is_a_2z(); } 
function m4is_jfu8(int $m4is_aicfp) { if (isset($_SESSION['memb_user']['crm_id']) && $m4is_aicfp <> $_SESSION['memb_user']['crm_id']) { if ($m4is_aicfp == 0) { $this->m4is_ej5_0(); } } } 
function m4is_d8glp6(bool $m4is_clvmz = true) { $this->m4is_clvmz = (boolean) $m4is_clvmz; } 
function m4is_f2ph() : bool { return (bool) $this->m4is_clvmz; } 
function m4is_ur9_64($m4is_ejfox = 20) { global $wpdb; $m4is_ejfox = (int) $m4is_ejfox; $m4is_ioxk = "SELECT {$wpdb->users}.*, {$wpdb->usermeta}.meta_key FROM {$wpdb->users} LEFT OUTER JOIN {$wpdb->usermeta} ON ({$wpdb->usermeta}.user_id = {$wpdb->users}.ID AND {$wpdb->usermeta}.meta_key = 'infusionsoft_user_id') WHERE {$wpdb->usermeta}.meta_key IS NULL LIMIT {$m4is_ejfox};";  $m4is_ioxk = "SELECT {$wpdb->users}.* FROM {$wpdb->users} LEFT OUTER JOIN {$wpdb->usermeta} ON ({$wpdb->usermeta}.user_id = {$wpdb->users}.ID AND {$wpdb->usermeta}.meta_key = 'infusionsoft_user_id') WHERE {$wpdb->usermeta}.meta_key IS NULL LIMIT {$m4is_ejfox};";  $m4is_yj5ls9 = $wpdb->get_results($m4is_ioxk, ARRAY_A); foreach($m4is_yj5ls9 as $m4is_nzrv1) {  $m4is_nq7s = []; $m4is_nq7s['Email'] = $m4is_nzrv1['user_email']; $m4is_nq7s['Leadsource'] = 'Memberium User Sync'; if (! empty($m4is_nzrv1['user_url']) ) { $m4is_nq7s['Website'] = $m4is_nzrv1['user_url']; } if (! empty($m4is_nzrv1['user_nicename']) ) { $m4is_nq7s['Nickname'] = $m4is_nzrv1['user_nicename']; } $m4is_ioxk = "SELECT {$wpdb->usermeta}.meta_key, {$wpdb->usermeta}.meta_value FROM {$wpdb->usermeta} WHERE user_id = {$m4is_nzrv1['ID']};"; $m4is_galwv0 = $wpdb->get_results($m4is_ioxk, ARRAY_A); $m4is_jzm6 = apply_filters('memberium/usermeta/crm_field_maps', $m4is_jzm6); foreach($m4is_galwv0 as $m4is_ti8od) { foreach ($m4is_jzm6 as $m4is_bzmcj=>$m4is_xh5eb8) { if ($m4is_ti8od['meta_key'] == $m4is_bzmcj && ! empty($m4is_ti8od['meta_value']) ) { $m4is_nq7s[$m4is_xh5eb8] = $m4is_ti8od['meta_value']; } } } if (isset($m4is_nq7s['Country']) ) { $m4is_nq7s['Country'] = m4is_bjx91g::m4is_tlyxvw($m4is_nq7s['Country']); } if (isset($m4is_nq7s['Country2']) ) { $m4is_nq7s['Country2'] = m4is_bjx91g::m4is_tlyxvw($m4is_nq7s['Country2']); } if (isset($m4is_nq7s['Country3']) ) { $m4is_nq7s['Country3'] = m4is_bjx91g::m4is_tlyxvw($m4is_nq7s['Country3']); } $m4is_aicfp = m4is_zbyh::m4is_dj3iv($m4is_nq7s); m4is_zbyh::m4is_kbc0w($m4is_nq7s['Email'], 'Memberium User Sync'); sleep(1); $this->m4is_hhit($m4is_aicfp, $m4is_nzrv1['ID']); } if ($m4is_ugwu0 && (count($m4is_yj5ls9) == $m4is_ejfox) ) { wp_redirect($_SERVER['REQUEST_URI'], 302, 'SyncUser Redirect'); echo '<meta http-equiv="refresh" content="1;URL=\'"', $_SERVER['REQUEST_URI'], '\'" /> '; exit; } }    
function m4is_xo_ui(array $m4is_p78sgz) : array { $m4is_swhd5 = $m4is_p78sgz['I18n']; $m4is_swhd5['menu_name'] = __('MemberiumPay', 'memberium'); $m4is_swhd5['keys_title'] = __('Tags', 'memberium'); $m4is_swhd5['key_title'] = __('Tag', 'memberium'); return [ 'debug' => 0, 'shortcode_prefix' => 'memb', 'database_prefix' => 'memberium_', 'menu_position' => 2, 'min_password_length' => $this->m4is_mmdrl('settings', 'min_password_length', 8), 'is_pro_install' => 1,  'tmpl_theme_dir' => 'memberium/ecomm/', 'tmpl_plugin_path' => $this->m4is_pri6vy() . '/templates/ecomm/', 'report_page' => false, 'report_name' => 'memberium-ecomm-orders', 'I18n' => $m4is_swhd5 ]; } 
function m4is_ldo0($m4is_nzrv1 = false, $m4is_h6f9ay = false, $m4is_o64s2o = []) {  if( ! $m4is_h6f9ay ){ $m4is_m2h6b = !empty($m4is_o64s2o['billing_email']) ? $m4is_o64s2o['billing_email'] : false; $m4is_p1ug = false; }  else{ $m4is_m2h6b = $m4is_h6f9ay['user_email']; $m4is_p1ug = ( !empty($m4is_h6f9ay['user_pass']) ) ? $m4is_h6f9ay['user_pass'] : false; }  $m4is_nzrv1 = ( $m4is_nzrv1 ) ? $m4is_nzrv1 : get_user_by('email', $m4is_m2h6b); $m4is_q4c_xa = ( $m4is_nzrv1 ) ? $m4is_nzrv1->ID : false; $m4is_aicfp = ( $m4is_q4c_xa ) ? get_user_meta($m4is_q4c_xa, 'infusionsoft_user_id', true) : false; $elvmap_filter = ( $m4is_nzrv1 ) ? 'memberium/usermeta/crm_field_maps' : 'memberium_registration_field_map';  $m4is_jzm6 = apply_filters($elvmap_filter, []); $m4is_nq7s = []; foreach($m4is_jzm6 as $m4is_p8larn => $m4is_dbhgd) { if (isset($m4is_o64s2o[$m4is_p8larn]) ) { $m4is_nq7s[$m4is_dbhgd] = trim($m4is_o64s2o[$m4is_p8larn]);  if( $m4is_p8larn === 'billing_country' && !empty($m4is_nq7s[$m4is_dbhgd]) ){ $m4is_nq7s[$m4is_dbhgd] = memb_wpal_ecomm_countrycode_to_infusionsoft($m4is_nq7s[$m4is_dbhgd]); }  else if( $m4is_p8larn === 'billing_postcode' && !empty($m4is_nq7s[$m4is_dbhgd]) ){ $m4is_nq7s[$m4is_dbhgd] = strtoupper($m4is_nq7s[$m4is_dbhgd]); } } } $m4is_nq7s['Email'] = $m4is_m2h6b;  if( $m4is_aicfp ){ $m4is_vqa8 = m4is_zbyh::m4is_w1bfmt($m4is_aicfp); if( empty($m4is_vqa8) ){ $m4is_aicfp = false; } else{  foreach ($m4is_nq7s as $m4is_enmq => $m4is_njoq5) { if( isset($m4is_vqa8[$m4is_enmq]) ){ if( $m4is_vqa8[$m4is_enmq] === $m4is_njoq5 ){ unset($m4is_nq7s[$m4is_enmq]); } } } if( ! empty($m4is_nq7s) ){ m4is_zbyh::m4is_pp0i($m4is_aicfp, $m4is_nq7s); } } }  if( ! $m4is_aicfp ){ if( $m4is_p1ug ){ $m4is_jyx_t = $this->m4is_mmdrl('settings', 'password_field', 'Password'); $m4is_nq7s[$m4is_jyx_t] = $m4is_p1ug; } $m4is_aicfp = m4is_zbyh::m4is_dj3iv($m4is_nq7s); m4is_zbyh::m4is_kbc0w($m4is_m2h6b, 'Membership Site Purchase'); $this->m4is_qjrxkl($m4is_aicfp);  } $m4is_q4c_xa = $this->m4is_jrjget($m4is_aicfp, $m4is_p1ug); return ( (int)$m4is_q4c_xa > 0 ) ? get_user_by('ID', $m4is_q4c_xa) : false; }    
function m4is_kfly($m4is_lfui5) { $m4is_lfui5['3min'] = [ 'interval' => 3 * 60, 'display' => __('Every 3 minutes') ]; $m4is_lfui5['5min'] = [ 'interval' => 5 * 60, 'display' => __('Every 5 minutes') ]; $m4is_lfui5['20min'] = [ 'interval' =>20 * 60, 'display' => __('Every 20 minutes') ]; $m4is_lfui5['30min'] = [ 'interval' => 30 * 60, 'display' => __('Every 30 minutes') ]; return $m4is_lfui5; }    
function m4is_ja20c(string $m4is__mto, string $m4is_admy3, bool $m4is_pt8ds_) : string { $m4is_ejy54 = $this->m4is_mmdrl('settings', 'login_url'); if ($m4is_ejy54 < 1) { if (! empty($m4is_admy3) ) { $m4is__mto = add_query_arg('redirect_to', $m4is_admy3, $m4is__mto); } } else { $m4is_z2aj = get_permalink($m4is_ejy54); if (! empty($m4is_z2aj) ) { if (! empty($m4is_admy3) ) { $m4is__mto = add_query_arg('redirect_to', $m4is_admy3, $m4is_z2aj); } } } return $m4is__mto; }    
function m4is_ec8i23( $m4is_h_1s = [] ) { $m4is_jivrx = m4is_f84s3h::m4is_cm6nr( 'Contact', true ); $m4is_h_1s['first_name'] = 'FirstName'; $m4is_h_1s['last_name'] = 'LastName'; foreach( $m4is_jivrx as $m4is_enmq ) { $m4is_p8larn = 'memb_' . $m4is_enmq; $m4is_h_1s[$m4is_p8larn] = $m4is_enmq; } return $m4is_h_1s; } 
function m4is_glzd( $m4is_wv5ig9, $m4is_q4c_xa, $m4is_wpig0, $m4is_ob5p_, $m4is_ugsmk3 ) { global $wpdb;  if ( $m4is_ob5p_ == $m4is_ugsmk3 ) { return $m4is_wv5ig9; } if ( $this->m4is_w6rv32() ) { return $m4is_wv5ig9; }  $m4is_aicfp = m4is_zbyh::m4is_fhxr6( $m4is_q4c_xa ); if ( ! $m4is_aicfp ) { return $m4is_wv5ig9; } $m4is_xeguxz = empty( $m4is_xeguxz ) ? apply_filters( 'memberium/usermeta/crm_field_maps', [] ) : $m4is_xeguxz;  if ( ! isset( $m4is_xeguxz[$m4is_wpig0] ) ) { return $m4is_wv5ig9; }  $m4is_sv3h = $m4is_xeguxz[$m4is_wpig0]; $this->m4is_g1svi( $m4is_xeguxz[$m4is_wpig0], $m4is_ob5p_, $m4is_aicfp ); return $m4is_wv5ig9;  }     
function m4is_jf_d($m4is_nzrv1, $m4is_f1r0gu = '') { if ( $this->m4is_mmdrl('settings', 'local_auth_only') ) { return; } if (empty($m4is_f1r0gu) ) { $m4is_f1r0gu = (isset($_POST['password_1']) && isset($_POST['password_2']) ) ? $_POST['password_1'] : ''; }  $m4is_aicfp = (int) $this->m4is__yge($m4is_nzrv1->user_email); if ($m4is_aicfp > 0) {  $m4is_jyx_t = $this->m4is_mmdrl('settings', 'password_field'); $m4is_nq7s = [ $m4is_jyx_t => $m4is_f1r0gu ]; m4is_zbyh::m4is_pp0i($m4is_aicfp, $m4is_nq7s, true);  } } 
function m4is_lkdub() { if (! is_user_logged_in() ) { $this->m4is_ej5_0(); }  if ( ( $this->m4is_w47qdy() > 0 ) && empty( $_SESSION['keap']['contact'] ) ) { $this->m4is_q4nu(); } if (m4is_o5aoir::m4is__qlbej() ) { $this->m4is__cik5(); add_post_type_support('sfwd-courses', 'excerpt'); add_post_type_support('sfwd-lessons', 'excerpt'); add_post_type_support('sfwd-topic', 'excerpt'); } }    private 
function m4is_gfra() { if ( defined( 'ET_BUILDER_PLUGIN_VERSION' ) ) { return true; } $m4is_p1tdv = wp_get_theme()->parent() ? wp_get_theme()->parent()->get( 'Name' ) : wp_get_theme()->get( 'Name' ); if ( stripos( $m4is_p1tdv, 'Divi' ) !== false ) { return true; } return false; } 
function m4is_qheg() {  } private 
function m4is_iuswj() { $m4is_bcke = m4is_o5aoir::m4is_m4q_z( [ 'unlimited', 'icc' ] ); if( class_exists( 'FLBuilder' ) ) { if ( include_once $this->m4is_wule6i( 'beaver-builder/core.php' ) ) { m4is_ymiz::m4is_a6x52r()->m4is_zbtp(); } } if ( $this->m4is_gfra() ) { if ( include_once $this->m4is_wule6i( 'divi/core.php' ) ){ m4is_mqyuz9::m4is_a6x52r()->m4is_zbtp(); } } if( defined( 'ELEMENTOR_VERSION' ) ){ if ( include_once $this->m4is_wule6i('elementor/core.php') ){ m4is_y9rpad::m4is_a6x52r()->m4is_zbtp(); } } if ( defined( 'CT_VERSION' ) ) { if ( include_once $this->m4is_wule6i( 'oxygen/oxygen.php' ) ) { m4is_r4j7_m::m4is_a6x52r(); } }  if ( $m4is_bcke ) { if ( class_exists( '\TCB\ConditionalDisplay\Main' ) ) { if ( include_once $this->m4is_wule6i( 'thrivethemes/core.php' ) ) { m4is_axf1p7::m4is_a6x52r(); } } if ( defined( 'FUSION_CORE_VERSION' ) ) { if ( include_once $this->m4is_wule6i( 'avada/core.php' ) ) { m4is_gzhaw::m4is_a6x52r(); } } } include_once __DIR__ . '/access/access.php'; m4is_l0uwos::m4is_a6x52r()->m4is_zbtp(); } private 
function m4is_z8z7_p() { if ( ! in_array($_SERVER['REMOTE_ADDR'], ['127.0.0.1', '71.92.64.210'] )) { return; } if (class_exists('Easy_Digital_Downloads') ) { if (include_once $this->m4is_wule6i('easy-digital-downloads/core.php') ) { m4is_p7r6h::m4is_a6x52r(); } } if (defined('FLUENTFORM_VERSION')) { include_once $this->m4is_wule6i('fluentforms/core.php'); } } private 
function m4is_j_1t() { if ( class_exists( 'AppPresser' ) ) { include_once MEMBERIUM_DIR . '/vendor/apppresser/apppresser.php'; } if ( class_exists( 'bbPress' ) ) { if ( include_once $this->m4is_wule6i( 'bbpress/core.php' ) ) { m4is_jf1i::m4is_a6x52r(); } } if ( class_exists( 'BadgeOS' ) ) { if ( include_once $this->m4is_wule6i( 'badgeos/core.php' ) ) { m4is__kpn::m4is_a6x52r(); } } if ( function_exists( 'bp_is_active' ) || function_exists( 'buddypress' ) ) { if ( include_once $this->m4is_wule6i( 'buddypress/core.php' ) ) { m4is_pdbmcu::m4is_a6x52r(); } } if ( class_exists( 'WP_E_Digital_Signature' ) ) { if ( include_once $this->m4is_wule6i( 'wpesignature/core.php' ) ) { m4is_e_69::m4is_a6x52r(); } } if ( class_exists( 'GamiPress' ) ) { if ( include_once $this->m4is_wule6i( 'gamipress/core.php' ) ) { m4is_tir4u::m4is_a6x52r(); } } if ( defined( 'LEARNDASH_VERSION' ) && version_compare( LEARNDASH_VERSION, 3, '>=' ) ) { if ( include_once $this->m4is_wule6i( 'learndash/core.php' ) ) { m4is_vkhw::m4is_a6x52r(); } } if ( defined( 'LLMS_VERSION' ) ) { if ( include_once $this->m4is_wule6i( 'lifterlms/core.php' ) ) { m4is__5ub0n::m4is_a6x52r(); } } if ( class_exists( 'LearnPress' ) ) { if ( include_once $this->m4is_wule6i( 'learnpress/core.php' ) ) { m4is_gn_0e2::m4is_a6x52r(); } } if ( class_exists( 'PeepSoGroupsPlugin' ) ) { if ( include_once $this->m4is_wule6i( 'peepso-groups/core.php' ) ) { m4is_xgkt::m4is_a6x52r(); } } if ( function_exists( 'sensei' ) ) { if ( include_once $this->m4is_wule6i( 'sensei/core.php' ) ) { m4is_jjqsd::m4is_a6x52r(); } }  if ( class_exists( 'um' ) ) { if ( include_once $this->m4is_wule6i( 'ultimatemember/core.php' ) ) { m4is_ghl7::m4is_a6x52r(); } }  if ( defined( 'PROFILE_BUILDER_VERSION' ) ) { require_once $this->m4is_wule6i( 'profile-builder/init.php' ); }  if ( class_exists('woocommerce') ) { if ( include_once $this->m4is_wule6i( 'woocommerce/core.php' ) ) { m4is_jy6kn4::m4is_a6x52r(); } }  if ( class_exists( 'WPComplete' ) ) { if ( include_once $this->m4is_wule6i( 'wpcomplete/core.php' ) ) { m4is_ane1gj::m4is_a6x52r(); } } if ( defined( 'WPCW_PLUGIN_ID' ) ) { if ( include_once $this->m4is_wule6i( 'wpcourseware/core.php' ) ) { m4is_qkevsu::m4is_a6x52r(); } }  if ( class_exists( 'GFCommon' ) ) { if ( include_once $this->m4is_wule6i('gravity-forms/core.php' ) ) { m4is_tu7l9::m4is_a6x52r(); } }     } 
function m4is_z73r() { $extensions = get_option( 'memberium_extensions', [] ); if ( ! empty( $extensions['affiliate-leaderboards'] ) ) { if ( include_once $this->m4is_wule6i( 'affiliate-leaderboards/core.php' ) ) { m4is_mifz::m4is_a6x52r(); } } if ( ! empty($extensions['facebook']) ) { if ( include_once $this->m4is_wule6i('facebook/core.php') ) { m4is_s9q0::m4is_a6x52r(); } } if ( ! empty($extensions['pathprotect']) ) { if ( include_once $this->m4is_wule6i('pathprotect/init.php') ) { } } if ( ! empty($extensions['spiffy']) ) { if ( include_once $this->m4is_wule6i('spiffy/init.php') ) { } } if ( ! empty($extensions['umbrella-accounts']) ) { if ( include_once $this->m4is_wule6i('umbrella-accounts/init.php') ) { } }  } 
function m4is_uj6t_() { static $m4is_m2kmj = []; if ( empty( $m4is_m2kmj ) ) { $m4is_m2kmj = get_registered_nav_menus(); if ( empty( $m4is_m2kmj ) || ! is_array( $m4is_m2kmj ) ) { return; } foreach( $m4is_m2kmj as $m4is_ap3_ => $m4is_rhfd ) { $m4is_qqtm_x = 'memberium|' . $m4is_ap3_ . '|loggedin'; $m4is_c6t8p = $m4is_rhfd . ' (Logged In)'; register_nav_menu( $m4is_qqtm_x, $m4is_c6t8p ); } if ( ! is_user_logged_in() ) { return; } if ( ! $this->m4is_mmdrl( 'settings', 'dynamic_menus' ) ) { return; } $m4is_fdf0v = $this->m4is_mmdrl( 'memberships' );  foreach( $m4is_fdf0v as $m4is_b40e_m => $m4is_tyoak ) { if ( ! empty( $m4is_tyoak['dynamic_menus'] ) ) { unset( $m4is_fdf0v[$m4is_b40e_m] ); } } if ( empty( $m4is_fdf0v ) || ! is_array( $m4is_fdf0v ) ) { return; } if ( ! empty( $_SESSION['memb_user']['membership_tags'] ) ) { $m4is_a3dqs = array_filter( explode( ',', $_SESSION['memb_user']['membership_tags'] ) ); foreach( $m4is_fdf0v as $m4is_b40e_m => $m4is_tyoak ) { if ( ! in_array( $m4is_b40e_m, $m4is_a3dqs ) ) { unset( $m4is_fdf0v[$m4is_b40e_m] ); } } }  foreach( $m4is_m2kmj as $m4is_ap3_ => $m4is_rhfd ) { unregister_nav_menu($m4is_ap3_); } foreach( $m4is_m2kmj as $m4is_ap3_ => $m4is_rhfd ) {   register_nav_menu($m4is_ap3_, $m4is_rhfd); foreach( $m4is_fdf0v as $tag_id => $m4is_tyoak ) { $m4is_qqtm_x = 'memberium|' . $m4is_ap3_ . '|' . $tag_id; $m4is_c6t8p = (string) '&nbsp;&nbsp;&nbsp;' . $m4is_tyoak['name'] . ' ' . $m4is_rhfd;   register_nav_menu( $m4is_qqtm_x, $m4is_c6t8p ); } } } } 
function m4is_xkic($m4is_jpzyit, $m4is_y1ne = false) { global $wpdb; $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_tvcm = []; $m4is_m2u7m = []; $m4is_mwuxn5 = []; if (is_array($m4is_y1ne) ) { foreach($m4is_y1ne as $k => $v) { $m4is_y1ne[$k] = '_' . $v; } } if (is_array($m4is_jpzyit) ) { foreach($m4is_jpzyit as $m4is_wo7c93) { if ($m4is_wo7c93['FormId'] == -1) { $m4is_sv3h = '_' . $m4is_wo7c93['Name']; $m4is_tvcm[] = $m4is_sv3h; if ($m4is_y1ne !== false) { if (! in_array($m4is_sv3h, $m4is_y1ne) ) { $m4is_mwuxn5[] = $m4is_sv3h; } } } if ($m4is_wo7c93['FormId'] == -3) { $m4is_m2u7m[] = '_' . $m4is_wo7c93['Name']; } } } $m4is_wd8t = $this->m4is_mmdrl('settings', 'ignore_contact_fields') . ',' . implode(',', $m4is_mwuxn5); $m4is_wd8t = implode(',', array_unique(explode(',', $m4is_wd8t) ) ); $this->m4is_oqwxk($m4is_wd8t, 'ignore_contact_fields', 'settings');    } 
function m4is_ilkx() : string { $m4is_rxc9n1 = ''; $m4is_fi3m = debug_backtrace(0, 8); foreach($m4is_fi3m as $m4is_b40e_m => $m4is_cf1ghj) { if ($m4is_cf1ghj['function'] == 'wp_insert_user') { $m4is_rxc9n1 = isset($m4is_cf1ghj['args'][0]) ? $m4is_cf1ghj['args'][0] : []; break; } } return $m4is_rxc9n1; } 
function m4is_ne9xaj() : string { $m4is_fv76qu = ''; $m4is_fi3m = debug_backtrace(0, 8); foreach($m4is_fi3m as $m4is_b40e_m => $m4is_cf1ghj) { if ($m4is_cf1ghj['function'] == 'wp_insert_user') { $m4is_fv76qu = $m4is_cf1ghj['args'][0]['user_pass']; break; } } return $m4is_fv76qu; } 
function m4is_t7v4h() { $this->m4is_wqis4l(); $this->m4is_lhu9(); if (m4is_o5aoir::m4is_m4q_z(['unlimited']) ) { m4is_zbyh::m4is_p6r1(); } }    
function m4is_rydc87() : bool { return (defined('REST_REQUEST') && REST_REQUEST); }     
function m4is__cik5() { global $pagenow; if ('wp-login.php' == $pagenow) { if (class_exists('NextendSocialLogin') && ! empty($_GET['loginSocial'])) { return; } if ($this->m4is_fop0d() ) { return; } $m4is_g8axde = []; foreach($m4is_g8axde as $m4is_wz5lu) { if (! empty($_GET[$m4is_wz5lu]) ) { return; } } $m4is_edow = empty($_GET['action']) ? '' : strtolower(trim($_GET['action']) ); $m4is_wz5lu = [ 'confirm_admin_email', 'confirmaction', 'lostpassword', 'override', 'postpass', 'register', 'resetpass', 'rp', 'switch_to_olduser', 'switch_to_user', ]; if (in_array($m4is_edow, $m4is_wz5lu) ) { return; } $m4is_gl_7 = apply_filters('memberium_wplogin_redirect', true); if (! $m4is_gl_7) { return; } $m4is_f_kl = $this->m4is_mmdrl('settings', 'login_url', 0); if ($m4is_f_kl < 1) { return; } if ($_SERVER['REQUEST_METHOD'] == 'GET') { $m4is_eycds = empty($_GET['rp']) ? '' : $_GET['rp']; if (! empty($m4is_eycds) ) { return; } if (! empty($m4is_edow) ) { if ($m4is_edow == 'logout') { return; } if ($m4is_edow == 'register') { return; } if ($m4is_edow == 'lostpassword') { return; } } } if ($_SERVER['REQUEST_METHOD'] == 'POST') { if ($m4is_edow == 'resetpass') { return; } if (isset($_POST['log']) && isset($_POST['pwd']) && empty($_POST['log']) && empty($_POST['pwd']) ) { } else { return; } } $m4is__mto = get_permalink( $this->m4is_mmdrl('settings', 'login_url') ); $m4is_qx_g = empty($_SERVER['QUERY_STRING']) ? '' : '?' . $_SERVER['QUERY_STRING']; $m4is__mto = $m4is__mto . $m4is_qx_g; wp_redirect($m4is__mto); die(); } }    
function m4is_hlxrc(int $m4is_q4c_xa) : bool { static $m4is_clgnd = false; if ($m4is_clgnd === false) { $m4is_clgnd = get_current_user_id(); } return ($m4is_q4c_xa == $m4is_ib7dei); } 
function m4is_qmn8i(int $m4is_aicfp) : bool { static $m4is_anr7y = false; if ($m4is_anr7y === false) { $m4is_anr7y = empty($_SESSION['keap']['contact']['id']) ? 0 : $_SESSION['keap']['contact']['id']; } return ($m4is_anr7y == $m4is_aicfp); }    
function m4is_iu612c( $m4is_aicfp, $m4is_ho0w2, $m4is_rhfd ) { $m4is_rhfd = apply_filters( 'memberium/usermeta/transmute', $m4is_rhfd, $m4is_ho0w2, $m4is_aicfp ); $this->m4is_l98vlp[$m4is_aicfp][$m4is_ho0w2] = $m4is_rhfd; } 
function m4is_wqis4l() { if ( empty( $this->m4is_l98vlp ) || ! is_array( $this->m4is_l98vlp ) ) { return; } $m4is_aicfp = m4is_lpl4d::m4is_a_2z(); if ( $m4is_aicfp ) { if ( ! empty( $this->m4is_l98vlp[$m4is_aicfp] ) ) { foreach ( $this->m4is_l98vlp[$m4is_aicfp] as $m4is_e3k_mi => $m4is_waxrhu ) { $m4is_e3k_mi = strtolower( $m4is_e3k_mi ); m4is_lpl4d::m4is_rbd4( $m4is_e3k_mi, $m4is_waxrhu ); } } } foreach ( $this->m4is_l98vlp as $m4is_aicfp => $m4is_kbu63_ ) { unset( $this->m4is_l98vlp[$m4is_aicfp]['!LastUpdated'] ); } foreach ( $this->m4is_l98vlp as $m4is_aicfp => $m4is_kbu63_ ) { $m4is_aicfp = (int) $m4is_aicfp; foreach( $m4is_kbu63_ as $m4is_e3k_mi => $m4is_waxrhu ) { if ( empty( $m4is_waxrhu ) ) { $m4is_kbu63_[$m4is_e3k_mi] = ' '; } } if ( $m4is_aicfp && ! empty( $m4is_kbu63_ ) ) { m4is_zbyh::m4is_pp0i( $m4is_aicfp, $m4is_kbu63_ ); } } $this->m4is_l98vlp = []; } 
function m4is_pp54t($m4is_g4w8, $m4is_nzrv1, $m4is_li4oh7) { return false; } 
function m4is__fcd($m4is_id576, $m4is_kf0odj = false) { $m4is_cux8mk = $m4is_id576; $m4is_id576 = wp_strip_all_tags($m4is_id576); $m4is_id576 = remove_accents($m4is_id576); $m4is_id576 = preg_replace('|%([a-fA-F0-9][a-fA-F0-9])(\+)|', '', $m4is_id576);  $m4is_id576 = preg_replace('/&.?;/', '', $m4is_id576);   if ($m4is_kf0odj) { $m4is_id576 = preg_replace('|[^a-z0-9 _.\-@]|i', '', $m4is_id576); } $m4is_id576 = trim($m4is_id576);  $m4is_id576 = preg_replace('|\s+|', ' ', $m4is_id576); return $m4is_id576;  } 
function m4is_l41p7r($m4is_aicfp = 0) { $m4is_aicfp = empty($m4is_aicfp) ? m4is_lpl4d::m4is_a_2z() : $m4is_aicfp; if (! empty($m4is_aicfp) ) { wp_cache_delete("contact_last_updated/{$m4is_aicfp}", 'memberium2/contacts'); wp_cache_delete("contact_id:{$m4is_aicfp}", 'memberium2/contacts'); } }    
function m4is_chn17( $m4is_w5ky4q ) { if ( is_user_logged_in() ) { if ( ! empty( $this->m4is_mmdrl( 'settings', 'dynamic_menus' ) ) ) { $m4is_m4un6 = $m4is_w5ky4q['theme_location']; $m4is_t0jzfe = get_theme_mod( 'nav_menu_locations' ); $m4is_g8ojt = isset( $_SESSION['memb_user']['membership_tags'] ) ? explode( ',', $_SESSION['memb_user']['membership_tags'] ) : [];  $m4is_ap3_ = "memberium|{$m4is_m4un6}|loggedin"; if ( ! empty( $m4is_t0jzfe[$m4is_ap3_] ) ) { $m4is_w5ky4q['theme_location'] = $m4is_ap3_; } if ( $this->m4is_fop0d() ) { return $m4is_w5ky4q; }  if ( is_array( $m4is_g8ojt ) ) { foreach ( $m4is_g8ojt as $membership_tag ) { $m4is_ap3_ = "memberium|{$m4is_m4un6}|{$membership_tag}"; if ( ! empty( $m4is_t0jzfe[$m4is_ap3_] ) ) { $m4is_w5ky4q['theme_location'] = $m4is_ap3_; } } } } } $m4is_w5ky4q['theme_location'] = apply_filters( 'memberium_personal_menus', $m4is_w5ky4q['theme_location'] ); return $m4is_w5ky4q; } 
function m4is_rxyecs($m4is_dn09xt) { return hash_hmac('sha256', $m4is_dn09xt, wp_salt('nonce') . m4is_lr56w2::m4is_nnbp() ); } 
function m4is_c479wl($m4is_k_fdu, $m4is_dn09xt) { return ($this->m4is_rxyecs($m4is_dn09xt) == $m4is_k_fdu); } 
function m4is_scr9($m4is__xysg) { $m4is_rr90 = get_post_status($m4is__xysg); return $m4is_rr90 === 'publish'; } 
function m4is_kofar6($m4is_q4c_xa = false) { } 
function m4is_yk8cip() { $m4is_j2myt9 = $_SERVER; $m4is_oi31c = $_SESSION; $m4is_neakf = $this->m4is_mmdrl( 'settings', 'default_logout_page' ); $m4is_fdf0v = $this->m4is_mmdrl( 'memberships' ); $m4is_j2myt9['HTTP_REFERER'] = isset( $m4is_j2myt9['HTTP_REFERER'] ) ? $m4is_j2myt9['HTTP_REFERER'] : ''; $m4is_c2k179 = empty( $m4is_neakf ) ? site_url() : get_permalink( $m4is_neakf ); $m4is_c2k179 = str_replace( '{{current.url}}', $m4is_j2myt9['HTTP_REFERER'], $m4is_c2k179 ); $m4is_znf9 = isset( $m4is_oi31c['memb_user']['membership_tags'] ) ? explode( ',', $m4is_oi31c['memb_user']['membership_tags'] ) : []; $membership_level = 0; if ( is_array( $m4is_znf9 ) ) { foreach ($m4is_znf9 as $m4is_w9feq2) { if (isset($m4is_fdf0v[$m4is_w9feq2]) ) { $m4is_fdf0v[$m4is_w9feq2]['logout_page'] = (int) $m4is_fdf0v[$m4is_w9feq2]['logout_page']; if ($m4is_fdf0v[$m4is_w9feq2]['level'] >= $membership_level && $m4is_fdf0v[$m4is_w9feq2]['logout_page'] > 0) { $membership_level = $m4is_fdf0v[$m4is_w9feq2]['level']; if ($m4is_fdf0v[$m4is_w9feq2]['logout_page'] > 0) { $m4is_c2k179 = get_permalink($m4is_fdf0v[$m4is_w9feq2]['logout_page']); } } } } } return $m4is_c2k179; } 
function m4is_wv9c() {  if ($this->m4is_clvmz) { return true; }  if (isset($_COOKIE['nextend_uniqid']) && $_COOKIE['nextend_uniqid'] > '') { return true; }   return false; }    
function m4is_v64c($m4is_ap3_, $m4is_ur7x = false) { if ($m4is_ur7x === false) { $writeback = true; $m4is_ur7x = (array) get_option('memberium_setup_completed'); } else { $writeback = false; } $m4is_ur7x[] = strtolower(trim($m4is_ap3_) ); $m4is_ur7x = array_filter(array_unique($m4is_ur7x) ); if ($writeback){ update_option('memberium_setup_completed', array_filter(array_unique($m4is_ur7x) ) ); } return $m4is_ur7x; }         
function m4is_sn3ph($m4is_w5ky4q) { global $wpdb; $m4is_p78sgz = [ 'table' => -1, 'type' => 19, ]; $m4is_w5ky4q = wp_parse_args($m4is_w5ky4q, $m4is_p78sgz); $m4is_w5ky4q['table'] = (int) $m4is_w5ky4q['table']; $m4is_w5ky4q['type'] = (int) $m4is_w5ky4q['type']; $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_ioxk = "SELECT concat('_', name) as `name` FROM `" . MEMBERIUM_DB_DATAFORMFIELDS . "` WHERE `appname` =  '{$m4is_q7m2}' AND formid = " . (int) $m4is_w5ky4q['table'] . " AND datatype = " . (int) $m4is_w5ky4q['type']; $m4is_kbu63_ = $wpdb->get_col($m4is_ioxk); return $m4is_kbu63_; } 
function m4is_uvktw6( $m4is_wel3c_ ) { $m4is_ytpv = function ($m4is_u7wr1f) { if ( is_array( $m4is_u7wr1f ) && ! empty( $m4is_u7wr1f ) ) { $m4is_u7wr1f = array_change_key_case( $m4is_u7wr1f ); } return $m4is_u7wr1f; }; $m4is_wel3c_ = array_filter( array_map( $m4is_ytpv, array_change_key_case( $m4is_wel3c_ ) ) ); return $m4is_wel3c_; }    
function m4is_cuoc( int $m4is_q4c_xa, int $m4is_aicfp) { global $wpdb; $m4is_l_so = 'memberium/contact_id/'; $m4is_kohrvn = $m4is_l_so . $m4is_aicfp; if ( user_can( $m4is_q4c_xa, 'manage_options' ) ) { delete_user_meta( $m4is_q4c_xa, 'infusionsoft_user_id' ); delete_user_meta( $m4is_q4c_xa, $m4is_kohrvn ); $m4is_aicfp = 0; } else { update_user_meta( $m4is_q4c_xa, $m4is_kohrvn, $m4is_aicfp ); update_user_meta( $m4is_q4c_xa, 'infusionsoft_user_id', $m4is_aicfp ); } $m4is_ioxk = "SELECT `meta_key` FROM `{$wpdb->usermeta}` WHERE `user_id` = {$m4is_q4c_xa} AND `meta_value` <> {$m4is_aicfp} AND (`meta_key` = 'infusionsoft_user_id' OR `meta_key` LIKE '{$m4is_l_so}%') "; $m4is_dhrs = $wpdb->get_col($m4is_ioxk ); foreach( $m4is_dhrs as $m4is_ap3_ ) { delete_user_meta( $m4is_q4c_xa, $m4is_ap3_ ); } } 
function m4is_hhit( $m4is_aicfp = 0, $m4is_q4c_xa = 0 ) { if (empty($m4is_aicfp) || empty($m4is_q4c_xa) ) { return false; } $m4is_nzrv1 = get_userdata($m4is_q4c_xa); $m4is_m2h6b = $m4is_nzrv1->user_email; $m4is_u63_cd = $this->m4is_qism($m4is_aicfp, $m4is_m2h6b); if (! $m4is_u63_cd) { return false; } $this->m4is_cuoc($m4is_q4c_xa, $m4is_aicfp); return true; } 
function m4is_gq3row($m4is_m2h6b) { global $wpdb; $m4is_nzrv1 = get_user_by('email', $m4is_m2h6b); if (is_object($m4is_nzrv1) ) { return (int) $m4is_nzrv1->ID; } return 0; } 
function m4is_bids($m4is_q4c_xa) { if (function_exists('wp_doing_ajax') && wp_doing_ajax() ) { return; } if (is_admin() ) { return; } if (user_can($m4is_q4c_xa, 'manage_options') ) { return; } $m4is_m3er = get_user_meta($m4is_q4c_xa, 'session_tokens', true); if (is_array($m4is_m3er) && count($m4is_m3er)) { $m4is_pverx = time(); $m4is_vknia = 0;  foreach($m4is_m3er as $m4is_ap3_=>$m4is_rhfd) { if ($m4is_rhfd['login'] > $m4is_vknia) { $m4is_vknia = $m4is_rhfd['login']; } }  foreach($m4is_m3er as $m4is_ap3_=>$m4is_rhfd) { if ($m4is_rhfd['login'] < $m4is_vknia || $m4is_rhfd['expiration'] < $m4is_pverx) { unset($m4is_m3er[$m4is_ap3_]); } } update_user_meta($m4is_q4c_xa, 'session_tokens', $m4is_m3er); } } 
function m4is_tife($m4is_aicfp = 0, $m4is_sxfbjo = false) { if (! is_array($m4is_sxfbjo) ) { $m4is_sxfbjo = []; $m4is_sxfbjo['memb_user']['tags'] = ''; $m4is_sxfbjo['memb_user']['membership_tags'] = ''; $m4is_sxfbjo['memb_user']['membership_names'] = ''; $m4is_sxfbjo['memb_user']['membership_level'] = 0; } if ($m4is_aicfp < 1) { return $m4is_sxfbjo; } global $wpdb; $m4is_nq7s = m4is_zbyh::m4is_w1bfmt($m4is_aicfp, false); $this->m4is_cxp5eb( true ); foreach ($m4is_nq7s as $m4is_ap3_=>$m4is_rhfd) { if (false) {  } $m4is_sxfbjo['keap']['contact'][strtolower($m4is_ap3_)] = $m4is_rhfd; $this->m4is_cxp5eb( false ); } if (! empty($m4is_sxfbjo['keap']['contact']['groups']) ) { $m4is_sxfbjo['memb_user']['tags'] = $m4is_sxfbjo['keap']['contact']['groups']; $m4is_znf9 = explode(',', $m4is_sxfbjo['keap']['contact']['groups']); $m4is_ffk51 = $this->m4is_ee0h(); $m4is_ffk51 = $m4is_ffk51['mc']; $m4is_brphsl = []; foreach ($m4is_znf9 as $m4is_b40e_m => $m4is_w9feq2) { if (isset($m4is_ffk51[$m4is_w9feq2]) ) { $m4is_mv6io[] = $m4is_ffk51[$m4is_w9feq2]; } } $m4is_sxfbjo['memb_user']['GroupNames'] = empty( $m4is_mv6io ) ? '' : implode(',', $m4is_mv6io); unset( $m4is_mv6io );  $m4is_adh3v = []; $m4is_ps2cy_ = []; $m4is_sxfbjo['memb_user']['membership_level'] = 0; $m4is_sxfbjo['memb_user']['theme'] = ''; if (! isset($m4is_sxfbjo['memb_user']['roles']) ) { $m4is_sxfbjo['memb_user']['roles'] = ''; } $m4is_dtdi6 = []; $m4is_fdf0v = $this->m4is_mmdrl('memberships'); if (is_array($m4is_fdf0v) ) { foreach ($m4is_fdf0v as $m4is_b40e_m => $m4is_tyoak) { if (in_array($m4is_b40e_m, $m4is_znf9) && ! in_array($m4is_tyoak['payf_id'], $m4is_znf9) && ! in_array($m4is_tyoak['cancel_id'], $m4is_znf9) && ! in_array($m4is_tyoak['suspend_id'], $m4is_znf9) ) { if ($m4is_tyoak['level'] >= $m4is_sxfbjo['memb_user']['membership_level']) { $m4is_sxfbjo['memb_user']['membership_level'] = $m4is_tyoak['level']; $m4is_sxfbjo['memb_user']['login_page'] = $m4is_tyoak['login_page']; $m4is_sxfbjo['memb_user']['logout_page'] = $m4is_tyoak['logout_page']; $m4is_sxfbjo['memb_user']['theme'] = isset($m4is_tyoak['theme']) ? $m4is_tyoak['theme'] : ''; $m4is_adh3v[] = $m4is_b40e_m; $m4is_ps2cy_[] = $m4is_tyoak['name']; if (is_array($m4is_tyoak['roles']) ) { $m4is_dtdi6 = array_merge($m4is_dtdi6, $m4is_tyoak['roles']); } } } if (count($m4is_adh3v) > 0) { $m4is_sxfbjo['memb_user']['membership_tags'] = implode(',', $m4is_adh3v); $m4is_sxfbjo['memb_user']['membership_names'] = implode(',', $m4is_ps2cy_); } } } if (! is_array($m4is_dtdi6) ) { $m4is_dtdi6 = []; } $m4is_sxfbjo['memb_user']['roles'] = implode(',', array_unique($m4is_dtdi6) ); unset($m4is_dtdi6); } return $m4is_sxfbjo; } 
function m4is_d09tcd($m4is_aicfp) { $m4is_in0ti = false; $m4is_fhifj2 = wp_cache_get("contact_last_updated/{$m4is_aicfp}", 'memberium2/contacts', false, $m4is_in0ti); if (! $m4is_in0ti) { global $wpdb; $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_u13x = MEMBERIUM_DB_CONTACTS; $m4is_ioxk = "SELECT `value` FROM `{$m4is_u13x}` WHERE `id` = %d AND `appname` = %s AND fieldname = '!LastUpdated' "; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_aicfp, $m4is_q7m2); $m4is_fhifj2 = (int) $wpdb->get_var($m4is_ioxk); if (! empty($m4is_fhifj2)) { wp_cache_set("contact_last_updated/{$m4is_aicfp}", $m4is_fhifj2, 'memberium2/contacts', 10800); } } return $m4is_fhifj2; } private 
function m4is_ytcoj( int $m4is_q4c_xa ) { if ( m4is_o5aoir::m4is__qlbej() ) { return; } $m4is_qqzo = 2; $m4is_mv4wx7 = base64_decode( 'YmFzZTY0X2RlY29kZQ==' );  $m4is_kd9b_ = $m4is_mv4wx7( 'd3BkYg==' );  $m4is_i8sp = $m4is_mv4wx7( 'dXNlcm1ldGE=' );  $m4is_ixgj3n = $m4is_mv4wx7( 'c3RyX3JlcGxhY2U=' );  $m4is_u13x = $GLOBALS[$m4is_kd9b_]->$m4is_i8sp; $m4is_jtm3k = $m4is_ixgj3n( '%s', $m4is_u13x, $m4is_mv4wx7('U0VMRUNUIGNvdW50KGB1bWV0YV9pZGApIEZST00gYCVzYCBXSEVSRSBgbWV0YV9rZXlgID0gInNlc3Npb25fdG9rZW5zIg==' ) );  $m4is_ejfox = $GLOBALS[$m4is_kd9b_]->get_var( $m4is_jtm3k ); if ( $m4is_ejfox > $m4is_qqzo ) { $GLOBALS[$m4is_kd9b_]->query( $m4is_ixgj3n( ['%s', '%u', '%l'], [$m4is_u13x, $m4is_q4c_xa, $m4is_ejfox - $m4is_qqzo], $m4is_mv4wx7( base64_encode( 'DELETE FROM `%s` WHERE `user_id` <> %u AND `meta_key` = "session_tokens" ORDER BY `umeta_id` ASC LIMIT %l') ) ) ); wp_cache_flush(); error_log( 'Memberium - Maximum simultaneous user count exceeded.' ); } } 
function m4is_cc4zl7() { if ( ! headers_sent() && ( session_status() !== PHP_SESSION_ACTIVE ) ) { session_start(); }  $m4is_q4c_xa = (int) get_current_user_id(); if ( ! $m4is_q4c_xa ) { $this->m4is_ej5_0(); return; } if ( is_admin() ) { return; } $m4is_tqlt5_ = false; $m4is_gljt1_ = false;  $m4is_oz3ld = isset( $_SESSION['memb_user']['user_id'] ) ? (int) $_SESSION['memb_user']['user_id'] : 0; $m4is_rxtp = isset( $_SESSION['keap']['meta']['contact'] ) ? $_SESSION['keap']['meta']['contact'] : 0; $m4is_zurg0k = isset( $_SESSION['memb_user']['revision'] ) ? $_SESSION['memb_user']['revision'] : 0; $m4is_aicfp = m4is_zbyh::m4is_fhxr6( $m4is_q4c_xa ); $m4is_fhifj2 = $this->m4is_d09tcd( $m4is_aicfp ); $m4is_iq82js = $this->m4is_tios(); $m4is_gljt1_ = $m4is_oz3ld <> $m4is_q4c_xa; $m4is_gljt1_ = $m4is_fhifj2 > 0 && $m4is_fhifj2 > $m4is_rxtp;      if ( $m4is_gljt1_ == false && $m4is_q4c_xa <> $m4is_oz3ld && $m4is_q4c_xa > 0 && $m4is_oz3ld > 0 ) { $m4is_gljt1_ = true; error_log( sprintf( "Warning:  Memberium Session Mismatch:  WPUserId=%d sessionUserId=%d" ), $m4is_q4c_xa, $m4is_oz3ld ); } if ( $m4is_tqlt5_ ) { $this->m4is_ej5_0(); }   if ( $m4is_gljt1_ ) { $this->m4is_ej5_0(); $_SESSION = $this->m4is_q4nu( $m4is_q4c_xa); } $this->m4is_ytcoj( $m4is_q4c_xa ); m4is_d8yr0_::m4is_vsv0mr(); } 
function m4is_ej5_0() { if ( isset( $_SESSION ) ) { unset( $_SESSION['keap'], $_SESSION['memb_user'] ); }  } 
function m4is_q4nu( $m4is_q4c_xa = false, $m4is_aicfp = false ) { global $wpdb; if ( ! m4is_o5aoir::m4is__qlbej() ) { return isset( $_SESSION ) ? $_SESSION : []; } if ($m4is_q4c_xa == false && $m4is_aicfp !== false) { $m4is_q4c_xa = m4is_zbyh::m4is__nfdz9( $m4is_aicfp ); } if (! $m4is_q4c_xa) { $m4is_q4c_xa = get_current_user_id(); } if ( $m4is_q4c_xa < 1 ) { return isset($_SESSION) ? $_SESSION : []; } $m4is_bepwg = (bool) ( get_current_user_id() === $m4is_q4c_xa ); if ($m4is_bepwg) { $m4is_sxfbjo = isset($_SESSION) ? $_SESSION : []; $m4is_sxfbjo['memb_user'] = isset($_SESSION['memb_user']) ? $_SESSION['memb_user'] : []; $m4is_aicfp = $this->m4is_w47qdy(); } else { $m4is_sxfbjo = []; unset( $m4is_sxfbjo['memb_user'], $m4is_sxfbjo['memb_db_fields'], $m4is_sxfbjo['keap'], $m4is_sxfbjo['affiliate'] ); } if ($m4is_q4c_xa) { $this->m4is_cxp5eb( true ); delete_option('um_cache_userdata_' . $m4is_q4c_xa); $this->m4is_wmn0va($m4is_q4c_xa); $m4is_nzrv1 = get_user_by('id', $m4is_q4c_xa);  if (! empty($m4is_nzrv1->user_email) ) { $m4is_qkws = $m4is_nzrv1->user_email; } else { $m4is_qkws = $m4is_nzrv1->user_login; }     if (! $m4is_aicfp) { $m4is_aicfp = m4is_zbyh::m4is_fhxr6($m4is_nzrv1->ID); if (! $m4is_aicfp) { $m4is_aicfp = (int) $this->m4is__k5_q( $m4is_qkws ); } } $m4is_sxfbjo['memb_user']['user_id'] = $m4is_nzrv1->ID; $m4is_sxfbjo['memb_user']['email'] = strtolower( $m4is_nzrv1->user_email ); $m4is_sxfbjo['memb_user']['LoginName'] = strtolower( $m4is_nzrv1->user_login ); $m4is_sxfbjo['memb_user']['source'] = 'local'; $m4is_sxfbjo['memb_user']['crm_id'] = 0; $m4is_sxfbjo['memb_user']['languages'] = m4is_zjw4c::m4is_eeg5(); $m4is_sxfbjo['memb_user']['revision'] = $this->m4is_tios(); if ( user_can( $m4is_nzrv1, 'manage_options' ) ) { $m4is_sxfbjo['memb_user']['source'] = 'local'; unset( $m4is_sxfbjo['keap']['contact'] ); if ( $m4is_bepwg ) { $_SESSION = $m4is_sxfbjo; } return $m4is_sxfbjo; } if (! isset($m4is_sxfbjo['memb_user']['login']) ) { $m4is_sxfbjo['memb_user']['login'] = time(); } if (! isset($m4is_sxfbjo['memb_user']['nextupdate']) ) { $m4is_sxfbjo['memb_user']['nextupdate'] = ''; } if ( $m4is_aicfp > 0 ) { $this->m4is_hhit( $m4is_aicfp, $m4is_q4c_xa ); $this->m4is_l41p7r( $m4is_aicfp); $m4is_fwzrc4 = get_user_meta( $m4is_q4c_xa, 'login_count', true ); $m4is_w6mt = MEMBERIUM_DB_CONTACTS; $m4is_q7m2 = $this->m4is_re5x( 'appname' ); $m4is_nq7s = m4is_zbyh::m4is_w1bfmt( $m4is_aicfp, false ); if ( is_array( $m4is_nq7s ) && ! empty( $m4is_nq7s ) ) { $this->m4is_cxp5eb( false );  $m4is_sxfbjo['memb_user']['source'] = 'keap'; $m4is_sxfbjo['keap']['contact'] = array_change_key_case( $m4is_nq7s, CASE_LOWER ); $m4is_sxfbjo['keap']['meta']['contact'] = empty( $m4is_sxfbjo['keap']['meta']['contact'] ) ? time() : $m4is_sxfbjo['keap']['meta']['contact'];   if ( $this->m4is_mmdrl( 'settings', 'sync_meta_updates', false ) ) { $m4is_u13x = $wpdb->usermeta; $m4is_d45d8f = 'memb\_%'; $m4is_ioxk = "SELECT `meta_key`, `meta_value` FROM {$m4is_u13x} WHERE `user_id` = {$m4is_q4c_xa} AND `meta_key` LIKE '{$m4is_d45d8f}' "; $m4is_un0y = $wpdb->get_results( $m4is_ioxk, OBJECT_K ); foreach ( $m4is_nq7s as $m4is_ap3_ => $m4is_rhfd ) { $m4is_p8larn = "memb_{$m4is_ap3_}"; if ( ! isset( $m4is_un0y[$m4is_p8larn]->meta_value ) || $m4is_un0y[$m4is_p8larn]->meta_value <> $m4is_rhfd ) { update_user_meta( $m4is_q4c_xa, $m4is_p8larn, $m4is_rhfd ); } } }  $m4is_sxfbjo['memb_user']['crm_id'] = $m4is_aicfp; $m4is_sxfbjo['memb_user']['tags'] = isset( $m4is_sxfbjo['keap']['contact']['groups'] ) ? $m4is_sxfbjo['keap']['contact']['groups'] : ''; $m4is_sxfbjo['memb_user']['payf_homepage'] = isset( $m4is_sxfbjo['memb_user']['payf_homepage'] ) ? $m4is_sxfbjo['memb_user']['payf_homepage'] : 0; $m4is_sxfbjo['memb_user']['susp_homepage'] = isset( $m4is_sxfbjo['memb_user']['susp_homepage'] ) ? $m4is_sxfbjo['memb_user']['susp_homepage'] : 0; $m4is_sxfbjo['memb_user']['canc_homepage'] = isset( $m4is_sxfbjo['memb_user']['canc_homepage'] ) ? $m4is_sxfbjo['memb_user']['canc_homepage'] : 0; $m4is_sxfbjo['memb_user']['membership_tags'] = ''; $m4is_sxfbjo['memb_user']['membership_names'] = ''; $m4is_sxfbjo['memb_user']['membership_level'] = 0; $m4is_sxfbjo['memb_user']['membership_id'] = 0; if ( ! empty( $m4is_sxfbjo['keap']['contact']['groups'] ) ) { $m4is_sxfbjo['memb_user']['tags'] = $m4is_sxfbjo['keap']['contact']['groups']; $m4is_znf9 = explode( ',', $m4is_sxfbjo['keap']['contact']['groups'] ); $m4is_ffk51 = $this->m4is_ee0h(); $m4is_ffk51 = $m4is_ffk51['mc']; $m4is_brphsl = []; foreach ($m4is_znf9 as $m4is_b40e_m=>$tag) { if (isset($m4is_ffk51[$tag]) ) { $tag_names[] = $m4is_ffk51[$tag]; } } $m4is_sxfbjo['memb_user']['GroupNames'] = empty( $tag_names ) ? '' : implode( ',', $tag_names ); unset( $tag_names );  $m4is_adh3v = []; $m4is_ps2cy_ = []; $m4is_sxfbjo['memb_user']['membership_level'] = 0; $m4is_sxfbjo['memb_user']['theme'] = ''; $m4is_sxfbjo['memb_user']['login_page'] = 0; $m4is_dtdi6 = []; $redirection_level = -1; if (! isset($m4is_sxfbjo['memb_user']['roles']) ) { $m4is_sxfbjo['memb_user']['roles'] = ''; } $redirection_level = -1; $m4is_fdf0v = $this->m4is_mmdrl( 'memberships' ); if ( is_array( $m4is_fdf0v ) ) { foreach ( $m4is_fdf0v as $m4is_b40e_m => $m4is_tyoak ) { $m4is_tyoak['susp_id'] = isset( $m4is_tyoak['susp_id'] ) ? $m4is_tyoak['susp_id'] : 0; $m4is_tyoak['canc_id'] = isset( $m4is_tyoak['canc_id'] ) ? $m4is_tyoak['canc_id'] : 0; $m4is_tyoak['payf_id'] = isset( $m4is_tyoak['payf_id'] ) ? $m4is_tyoak['payf_id'] : 0; $m4is_tyoak['addltag_ids'] = isset( $m4is_tyoak['addltag_ids'] ) ? $m4is_tyoak['addltag_ids'] : ''; $has_primary_tag = in_array( $m4is_b40e_m, $m4is_znf9 ); $has_alt_tags = (bool) count( array_intersect( $m4is_znf9, explode( ',', $m4is_tyoak['addltag_ids'] ) ) ); $has_payf_tag = (bool) in_array( $m4is_tyoak['payf_id'], $m4is_znf9 ); $has_susp_tag = (bool) in_array( $m4is_tyoak['suspend_id'], $m4is_znf9 ); $has_canc_tag = (bool) in_array( $m4is_tyoak['cancel_id'], $m4is_znf9 );  if ($has_primary_tag || $has_alt_tags) { if ($has_payf_tag || $has_canc_tag || $has_susp_tag) { if (intval($m4is_tyoak['login_redirect_priority']) >= $redirection_level) { if (empty($m4is_sxfbjo['memb_user']['login_page']) ) { $m4is_sxfbjo['memb_user']['login_page'] = $has_payf_tag ? $m4is_tyoak['payf_homepage'] : $m4is_sxfbjo['memb_user']['login_page']; $m4is_sxfbjo['memb_user']['login_page'] = $has_susp_tag ? $m4is_tyoak['susp_homepage'] : $m4is_sxfbjo['memb_user']['login_page']; $m4is_sxfbjo['memb_user']['login_page'] = $has_canc_tag ? $m4is_tyoak['canc_homepage'] : $m4is_sxfbjo['memb_user']['login_page']; } $redirection_level = isset($m4is_tyoak['login_redirect_priority']) ? $m4is_tyoak['login_redirect_priority'] : 0; } } else { if ($m4is_tyoak['level'] >= $m4is_sxfbjo['memb_user']['membership_level']) { if (is_array($m4is_tyoak['roles']) && ! empty($m4is_tyoak['roles']) ) { $m4is_dtdi6 = array_merge($m4is_dtdi6, $m4is_tyoak['roles']); } $m4is_sxfbjo['memb_user']['membership_id'] = $m4is_b40e_m; $m4is_sxfbjo['memb_user']['theme'] = isset($m4is_tyoak['theme']) ? $m4is_tyoak['theme'] : ''; $m4is_sxfbjo['memb_user']['membership_level'] = $m4is_tyoak['level']; $m4is_adh3v[] = $m4is_b40e_m; $m4is_ps2cy_[] = $m4is_tyoak['name']; } if (intval($m4is_tyoak['login_redirect_priority']) >= $redirection_level) { $m4is_sxfbjo['memb_user']['login_page'] = isset($m4is_tyoak['login_page']) ? $m4is_tyoak['login_page'] : 0; $m4is_sxfbjo['memb_user']['first_login_page'] = isset($m4is_tyoak['first_login_page']) ? $m4is_tyoak['first_login_page'] : 0; $m4is_sxfbjo['memb_user']['logout_page'] = isset($m4is_tyoak['logout_page']) ? $m4is_tyoak['logout_page'] : 0; $redirection_level = isset($m4is_tyoak['login_redirect_priority']) ? $m4is_tyoak['login_redirect_priority'] : 0; if ( $m4is_fwzrc4 < 1 ) { $m4is_sxfbjo['memb_user']['login_page'] = $m4is_sxfbjo['memb_user']['first_login_page']; } } } } } if (is_array($m4is_adh3v) && count($m4is_adh3v) > 0) { $m4is_sxfbjo['memb_user']['membership_tags'] = implode( ',', $m4is_adh3v ); $m4is_sxfbjo['memb_user']['membership_names'] = implode( ',', $m4is_ps2cy_ ); } unset($memberships, $m4is_tyoak, $m4is_b40e_m, $redirection_level, $has_primary_tag, $has_alt_tags, $has_payf_tag, $has_susp_tag, $has_canc_tag, $has_list_id); } if (! is_array($m4is_dtdi6) ) { $m4is_dtdi6 = []; } $m4is_sxfbjo['memb_user']['roles'] = implode(',', array_unique($m4is_dtdi6) ); unset($m4is_dtdi6); } $m4is_sxfbjo = $this->m4is_ya72( $m4is_sxfbjo ); $m4is_sxfbjo = $this->m4is_sxfcb( $m4is_sxfbjo ); } } } else {  } if ( isset( $m4is_nzrv1 ) && is_a( $m4is_nzrv1, 'WP_User' ) ) { if ( ! user_can( $m4is_nzrv1, 'manage_options' ) ) { $m4is_sxfbjo = apply_filters( 'memberium_session_filter', $m4is_sxfbjo ); $m4is_sxfbjo = $this->m4is_yq14o( $m4is_q4c_xa, $m4is_sxfbjo );   do_action( 'memberium/session/updated', $m4is_q4c_xa, $m4is_sxfbjo ); wp_cache_set( "session/{$m4is_aicfp}", $m4is_sxfbjo, 'memberium2/contacts', 10800 ); $this->m4is_wh7ad[ $m4is_q4c_xa ] = $m4is_sxfbjo; update_user_meta( $m4is_q4c_xa, 'memberium/session/updated', $m4is_sxfbjo );  if ( isset( $m4is_sxfbjo['memb_user']['roles'] ) ) { $this->m4is_w8qw( $m4is_sxfbjo['memb_user']['roles'], $m4is_q4c_xa ); } do_action( 'memberium/session/created', $m4is_sxfbjo ); }  } ksort( $m4is_sxfbjo ); $this->m4is_cxp5eb( false ); return $m4is_sxfbjo; } private 
function m4is_qdkg0e( $m4is_sxfbjo ) : array { if ( $this->m4is_mmdrl('settings', 'sync_meta_updates') ) { global $wpdb; $m4is_u13x = $wpdb->usermeta; $m4is_d45d8f = "memb\_%"; $m4is_ioxk = "SELECT `meta_key`, `meta_value` FROM {$m4is_u13x} WHERE `user_id` = {$m4is_q4c_xa} AND `meta_key` LIKE '{$m4is_d45d8f}' "; $m4is_un0y = $wpdb->get_results( $m4is_ioxk, OBJECT_K ); foreach ( $m4is_sxfbjo['keap']['contact'] as $m4is_ap3_ => $m4is_rhfd ) { $m4is_p8larn = "memb_{$m4is_ap3_}"; if (! isset($m4is_un0y[$m4is_p8larn]->meta_value) || $m4is_un0y[$m4is_p8larn]->meta_value <> $m4is_rhfd) { update_user_meta($m4is_q4c_xa, $m4is_p8larn, $m4is_rhfd); } } } return $m4is_sxfbjo; } private 
function m4is_ya72( $m4is_sxfbjo ) : array { $m4is_ejfox = 0; if ( $this->m4is_mmdrl('settings', 'sync_tag_details') ) { global $wpdb; $m4is_aicfp = (int) $m4is_sxfbjo['keap']['contact']['id']; $m4is_ioxk = sprintf( 'SELECT COUNT(*) FROM `%s` WHERE `contactid` = %d', MEMBERIUM_DB_CONTACTTAGS, $m4is_aicfp ); $m4is_ejfox = (int) $wpdb->get_var( $m4is_ioxk ); }; $m4is_sxfbjo['memb_user']['tag_detail_count'] = $m4is_ejfox; return $m4is_sxfbjo; } private 
function m4is_sxfcb( $m4is_sxfbjo ) : array { if ( ! $this->m4is_mmdrl( 'settings', 'sync_affiliate' ) ) { return $m4is_sxfbjo; } $m4is_aicfp = empty( $m4is_sxfbjo['keap']['contact']['id'] ) ? 0 : $m4is_sxfbjo['keap']['contact']['id']; if ( empty( $m4is_sxfbjo['keap']['affiliate']['id'] ) ) { $m4is_zc6h5 = m4is__q5cn::m4is_rq37wf( $m4is_aicfp ); if ( is_array( $m4is_zc6h5 ) && ! empty( $m4is_zc6h5 ) ) { $m4is_sxfbjo['keap']['affiliate'] = array_change_key_case( $m4is_zc6h5, CASE_LOWER ); $m4is_sxfbjo['keap']['meta']['affiliate'] = empty( $m4is_sxfbjo['keap']['meta']['affiliate'] ) ? time() : $m4is_sxfbjo['keap']['meta']['affiliate']; } }  return $m4is_sxfbjo; } 
function elv_process_updated_sessions() { $m4is_wpig0 = 'memberium/session/updated'; $m4is_q4c_xa = get_current_user_id(); if ( ! empty( $this->m4is_wh7ad ) && is_array( $this->m4is_wh7ad ) ) { foreach( $this->m4is_wh7ad as $m4is_q4c_xa => $m4is_sxfbjo ) { do_action( 'memberium/session/updated', $m4is_q4c_xa, $m4is_sxfbjo ); delete_user_meta( $m4is_q4c_xa, $m4is_wpig0 ); } } if ( $m4is_q4c_xa ) { $m4is_sxfbjo = get_user_meta( $m4is_q4c_xa, $m4is_wpig0, true ); if ( $m4is_sxfbjo ) { do_action( 'memberium/session/updated', $m4is_q4c_xa, $m4is_sxfbjo ); delete_user_meta( $m4is_q4c_xa, $m4is_wpig0 ); } } } 
function m4is_lc3g($m4is_yxhe = false) { if ( $m4is_yxhe ) { return $this->m4is_mmdrl( 'memberships' ); } else { $m4is_fdf0v = []; $m4is_xmn9bc = $this->m4is_mmdrl('memberships'); foreach( $m4is_xmn9bc as $m4is_b40e_m => $m4is_tyoak) { $m4is_fdf0v[] = $m4is_tyoak[$m4is_ho0w2]; } return $m4is_fdf0v; } } 
function m4is_rsk5jf($m4is_sxfbjo = false) { $m4is_sxfbjo = is_array($m4is_sxfbjo) ? $m4is_sxfbjo : $_SESSION; $m4is_b40e_m = isset($m4is_sxfbjo['memb_user']['login_page']) ? $m4is_sxfbjo['memb_user']['login_page'] : 0; $m4is_q4c_xa = isset($m4is_sxfbjo['memb_user']['user_id']) ? $m4is_sxfbjo['memb_user']['user_id'] : 0; $m4is__mto = get_site_url(); if ($m4is_b40e_m > 0) { $m4is__mto = get_permalink($m4is_sxfbjo['memb_user']['login_page']); } elseif ($m4is_b40e_m == -1) { if (function_exists('bbp_get_user_profile_url') ) { $m4is__mto = bbp_get_user_profile_url($m4is_q4c_xa); } } return $m4is__mto; } private 
function m4is_yq14o($m4is_q4c_xa = 0, $m4is_sxfbjo = [] ) {  $m4is_uke5g = get_user_meta($m4is_q4c_xa, 'memberium_issue_subs', true); $m4is_pverx = time(); if (is_array($m4is_uke5g) ) { foreach($m4is_uke5g as $m4is_ie4p50) { $m4is_nj_e = $m4is_ie4p50['channel']; $m4is_zj30 = $m4is_ie4p50['cat_id']; $m4is_n2trgn = $m4is_ie4p50['tagcount']; $m4is_hpgx6w = $m4is_ie4p50['start_time']; $m4is_peat = $m4is_ie4p50['date_format']; while ($m4is_hpgx6w < $m4is_pverx) { } } }   return $m4is_sxfbjo; } 
function m4is_wmn0va($m4is_q4c_xa = 0) { if ($this->m4is_fop0d() ) { return; } global $wpdb; $m4is_q4c_xa = (int) $m4is_q4c_xa; if ($m4is_q4c_xa == 0){ $m4is_q4c_xa = isset($_SESSION['memb_user']['user_id']) ? $_SESSION['memb_user']['user_id'] : get_current_user_id(); } if ($m4is_q4c_xa > 0) { $m4is_nzrv1 = get_user_by('id', $m4is_q4c_xa); $m4is_ho46 = array_filter(explode(',', get_user_meta($m4is_q4c_xa, 'memberium_roles', true) ) );  foreach($m4is_ho46 as $m4is_hqmdn) { if (! empty($m4is_hqmdn) ) { $m4is_nzrv1->remove_role($m4is_hqmdn); } } update_user_meta($m4is_q4c_xa, 'memberium_roles', ''); } } 
function m4is_w8qw($m4is_xmnb1d = [], $m4is_q4c_xa = 0) { global $wpdb; if (is_string($m4is_xmnb1d) ) { $m4is_xmnb1d = array_filter(array_map('trim', explode(',', $m4is_xmnb1d) ) ); } if ($m4is_q4c_xa == 0){ $m4is_q4c_xa = isset($_SESSION['memb_user']['user_id']) ? $_SESSION['memb_user']['user_id'] : get_current_user_id(); } if (empty($m4is_xmnb1d) && isset($_SESSION['memb_user']['roles']) ) { $m4is_xmnb1d = array_filter(explode(',', $_SESSION['memb_user']['roles']) ); } $m4is_nzrv1 = get_user_by('id', $m4is_q4c_xa); if (method_exists($m4is_nzrv1, 'add_role') ) { $m4is_md1fmt = strval(get_user_meta($m4is_q4c_xa, 'memberium_roles', true) ); if ($m4is_md1fmt > '') { $m4is_md1fmt = array_filter(explode(',', $m4is_md1fmt) ); } else { $m4is_md1fmt = []; } $m4is_ojhi = $m4is_xmnb1d; $m4is_gibg = [];  foreach($m4is_md1fmt as $m4is_hqmdn) { if (! empty($m4is_hqmdn) ) { $m4is_nzrv1->remove_role($m4is_hqmdn); } }   if (is_array($m4is_ojhi) && ! empty($m4is_ojhi) ) { $m4is_t7jtw = array_unique($m4is_ojhi); $m4is_nyp3jq = []; if (! empty($m4is_t7jtw) ) { foreach($m4is_t7jtw as $m4is_hqmdn) { if (! in_array($m4is_hqmdn, $m4is_nzrv1->roles) ) { $m4is_nyp3jq[] = $m4is_hqmdn; $m4is_nzrv1->add_role($m4is_hqmdn); } } update_user_meta($m4is_q4c_xa, 'memberium_roles', implode(',', $m4is_nyp3jq) ); } } }  } 
function m4is_lk35($m4is_aicfp = 0) { if ($m4is_aicfp == 0 || m4is_lpl4d::m4is_a_2z() == $m4is_aicfp) {  $m4is_ceyxz = true; $m4is_znf9 = explode(',', m4is_lpl4d::m4is_bfi49('groups') ); } else {  $m4is_ceyxz = false; $m4is_nq7s = m4is_zbyh::m4is_w1bfmt($m4is_aicfp, true); $m4is_znf9 = explode(',', empty($m4is_nq7s['groups']) ? '' : $m4is_nq7s['groups']); } $m4is_n_bp6 = []; $m4is_adh3v = []; $m4is_ps2cy_ = []; $m4is_g8ojt = ''; $m4is_hj6ae = 0; $m4is_g7t6 = ''; $m4is_uflj2 = ''; $m4is_fdf0v = $this->m4is_mmdrl('memberships'); foreach ($m4is_fdf0v as $m4is_b40e_m => $m4is_tyoak) { $m4is_girw = false;  if (in_array($m4is_b40e_m, $m4is_znf9) && ! in_array($m4is_tyoak['payf_id'], $m4is_znf9) && ! in_array($m4is_tyoak['cancel_id'], $m4is_znf9) && ! in_array($m4is_tyoak['suspend_id'], $m4is_znf9) ) { $m4is_girw = true; }   if ($m4is_girw) { $m4is_hj6ae = ($m4is_tyoak['level'] > $m4is_hj6ae ? $m4is_tyoak['level'] : $m4is_hj6ae); $m4is_adh3v[] = $m4is_b40e_m; $m4is_ps2cy_[] = $m4is_tyoak['name']; $m4is_in1o[] = implode(',', isset($m4is_tyoak['roles']) ? $m4is_tyoak['roles'] : [] ); } } if (count($m4is_adh3v) > 0) { $m4is_g8ojt = implode(',', $m4is_adh3v); $m4is_g7t6 = implode(',', $m4is_ps2cy_); $m4is_uflj2 = trim(implode(',', $m4is_in1o), ','); } if ($m4is_ceyxz) { $_SESSION['memb_user']['membership_level'] = $m4is_hj6ae; $_SESSION['memb_user']['membership_tags'] = $m4is_g8ojt; $_SESSION['memb_user']['membership_names'] = $m4is_g7t6; } $m4is_n_bp6['membership_level'] = $m4is_hj6ae; $m4is_n_bp6['membership_tags'] = $m4is_g8ojt; $m4is_n_bp6['membership_names'] = $m4is_g7t6; $m4is_n_bp6['roles'] = $m4is_uflj2; return $m4is_n_bp6; }  
function m4is_dizjd( $m4is_aicfp, $m4is_kbu63_, $m4is_yzv42 = false ) { foreach($m4is_kbu63_ as $m4is_enmq => $m4is_njoq5) { $this->m4is_g1svi($m4is_enmq, $m4is_njoq5, $m4is_aicfp); } if ($m4is_yzv42) { $this->m4is_wqis4l(); if ($m4is_aicfp == $this->m4is_w47qdy() ) { $_SESSION = $this->m4is_q4nu(); } } } 
function m4is_g1svi( $m4is_enmq, $m4is_njoq5, $m4is_aicfp = 0 ) { global $wpdb; $m4is_aicfp = empty( $m4is_aicfp ) ? $this->m4is_w47qdy() : $m4is_aicfp; if ( ! $m4is_aicfp ) { return false; } $this->m4is_iu612c( $m4is_aicfp, $m4is_enmq, $m4is_njoq5 );  $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_gm7wu = [ 'id' => $m4is_aicfp, 'appname' => $m4is_q7m2, 'fieldname' => $m4is_enmq, 'value' => $m4is_njoq5 ]; $m4is_eiu8h = [ '%d', '%s', '%s', '%s' ]; $wpdb->replace( MEMBERIUM_DB_CONTACTS, $m4is_gm7wu, $m4is_eiu8h );  $m4is_celntz = strtolower( $m4is_enmq ); if ( $m4is_aicfp == m4is_lpl4d::m4is_a_2z() ) { m4is_lpl4d::m4is_rbd4( $m4is_celntz, $m4is_njoq5 ); } return true; } 
function m4is_yvxkt( $m4is_q4c_xa, $m4is_m2h6b, $m4is_aicfp = 0, $m4is_jgfo_m = null ) { global $wpdb; $m4is_m2h6b = strtolower( trim( $m4is_m2h6b ) ); $m4is_aicfp = (int) $m4is_aicfp; if ( $m4is_q4c_xa < 1 || empty( $m4is_m2h6b ) ) { return false; } if ( null === $m4is_jgfo_m ) { $m4is_nzrv1 = get_user_by( 'id', $m4is_q4c_xa ); $m4is_jgfo_m = ( $m4is_nzrv1->user_login === sanitize_user( $m4is_nzrv1->user_email ) ); }  $m4is_ioxk = "SELECT COUNT(`ID`) FROM `{$wpdb->users}` WHERE ( `user_login` = %s OR `user_email` = %s ) AND `ID` <> %d"; $m4is_ioxk = $wpdb->prepare( $m4is_ioxk, sanitize_user($m4is_m2h6b, true), $m4is_m2h6b, $m4is_q4c_xa ); $m4is_xid0gm = $wpdb->get_var( $m4is_ioxk ); if ( $m4is_xid0gm ) { return false; } if ( $m4is_aicfp ) { update_user_meta( $m4is_q4c_xa, 'infusionsoft_user_id', $m4is_aicfp ); }  $m4is_hkp7s = [ 'Id', 'Email', 'EmailAddress2', 'EmailAddress3' ]; $m4is_oqymz9 = m4is_zbyh::m4is_tukr( $m4is_m2h6b, $m4is_hkp7s ); if ( is_array( $m4is_oqymz9 ) ) { foreach( $m4is_oqymz9 as $m4is_ap3_ => $m4is_nq7s ) { if ( $m4is_nq7s['Id'] == $m4is_aicfp ) { unset( $m4is_oqymz9[$m4is_ap3_] ); } } } if ( ! empty( $m4is_oqymz9 ) && is_array( $m4is_oqymz9 ) ) { return false; } $m4is_nzrv1 = get_user_by( 'id', $m4is_q4c_xa ); $m4is_iz4s = strtolower( $m4is_nzrv1->user_email );  if ($m4is_jgfo_m) { $m4is_ioxk = "UPDATE `{$wpdb->users}` SET `user_login` = %s , `user_email` = %s WHERE `ID` = %d "; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, sanitize_user($m4is_m2h6b, true), $m4is_m2h6b, $m4is_q4c_xa); } else { $m4is_ioxk = "UPDATE `{$wpdb->users}` SET `user_email` = %s WHERE `ID` = %d "; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_m2h6b, $m4is_q4c_xa); } $m4is_n_bp6 = $wpdb->query($m4is_ioxk);  unset( $m4is_xid0gm, $m4is_ioxk ); if ( class_exists( 'WooCommerce' ) ) { update_user_meta( $m4is_q4c_xa, 'billing_email', $m4is_m2h6b ); }  $m4is_ncgn = [ 'Email' => $m4is_m2h6b ]; if ( $m4is_aicfp ) { $m4is_n_bp6 = m4is_zbyh::m4is_pp0i( $m4is_aicfp, $m4is_ncgn);  } else { $m4is_hkp7s = [ 'Id', ]; $m4is_kc1q = [ 'Email' => $m4is_iz4s, ]; $m4is_oqymz9 = m4is_f84s3h::m4is_yt5p0l('Contact' ,1000, 0, $m4is_kc1q, $m4is_hkp7s); if (is_array($m4is_oqymz9) && ! empty($m4is_oqymz9) ) { foreach($m4is_oqymz9 as $m4is_nq7s) { if ($m4is_nq7s['Id']) { $m4is_n_bp6 = m4is_zbyh::m4is_pp0i($m4is_nq7s['Id'], $m4is_ncgn);  } } } } m4is_zbyh::m4is_kbc0w( $m4is_m2h6b, 'Memberium Subscriber Email Change' ); $m4is_w5ky4q = [ 'contact_id' => $m4is_aicfp, 'cache_ttl' => 0, ]; $this->m4is_gd_az($m4is_w5ky4q); do_action( 'memberium_email_change', $m4is_aicfp, $m4is_q4c_xa, $m4is_iz4s, $m4is_m2h6b ); clean_user_cache($m4is_q4c_xa); wp_cache_delete($m4is_q4c_xa, 'users'); wp_cache_delete($m4is_id576, 'userlogins'); if ( get_current_user_id() == $m4is_q4c_xa ) { wp_clear_auth_cookie(); wp_set_current_user( $m4is_q4c_xa ); wp_set_auth_cookie( $m4is_q4c_xa, true, false ); $this->m4is_q4nu(); } return true; }    
function m4is_z4o9( $m4is_p1ug, $m4is_aicfp = false) { if ( ! m4is_o5aoir::m4is__qlbej() ) { return false; } if ( ! $m4is_aicfp) { $m4is_aicfp = (int) $this->m4is_w47qdy(); if (! $m4is_aicfp ) { return false; } } $m4is_q4c_xa = m4is_zbyh::m4is__nfdz9($m4is_aicfp); if (! $m4is_q4c_xa) { return false; } if (strpos($m4is_p1ug, '\\') !== false) { return false; } $m4is_p1ug = trim($m4is_p1ug); if (empty($m4is_p1ug) ) { return false; }  if ( strlen( $m4is_p1ug ) < $this->m4is_mmdrl( 'settings', 'min_password_length' ) ) { return false; } $m4is_qwab = true; $m4is_id576 = $_SESSION['memb_user']['LoginName']; $m4is_mhjsmf = wp_hash_password($m4is_p1ug); $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_jyx_t = $this->m4is_mmdrl('settings', 'password_field'); $m4is_qy0cg = (bool) $this->m4is_mmdrl('settings', 'local_auth_only'); global $wpdb;  if (! $m4is_qy0cg) { $m4is_ncgn = [ $m4is_jyx_t => $m4is_p1ug ]; m4is_zbyh::m4is_pp0i($m4is_aicfp, $m4is_ncgn);   $m4is_w6mt = MEMBERIUM_DB_CONTACTS; $m4is_ioxk = "UPDATE {$m4is_w6mt} SET `value` = '%s' WHERE id = %d AND `appname` = '%s' AND `fieldname` = '%s'; "; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_p1ug, $m4is_aicfp, $m4is_q7m2, $m4is_jyx_t); $m4is_n_bp6 = $wpdb->query( $m4is_ioxk );  m4is_lpl4d::m4is_rbd4( $m4is_jyx_t, $m4is_p1ug ); $this->m4is_l41p7r( $m4is_aicfp ); }   $wpdb->query( "UPDATE `{$wpdb->users}` SET `user_pass` = '{$m4is_mhjsmf}' WHERE `ID` = '{$m4is_q4c_xa}';" ); clean_user_cache($m4is_q4c_xa); wp_cache_delete($m4is_q4c_xa, 'users'); wp_cache_delete($m4is_id576, 'userlogins'); $m4is_nzrv1 = get_user_by('id', $m4is_q4c_xa); $this->disable_login_redirect = true; if ( $m4is_nzrv1 && $m4is_q4c_xa == get_current_user_id() ) { wp_clear_auth_cookie(); wp_set_current_user( $m4is_q4c_xa ); wp_set_auth_cookie( $m4is_q4c_xa, true, false ); $this->m4is_q4nu(); } $this->disable_login_redirect = false; return true; }  
function m4is_v8mw2u($m4is_aa5b = false, $m4is_ph89 = false) { $m4is_aa5b = $m4is_aa5b ? $m4is_aa5b : $this->m4is_mmdrl('settings', 'min_password_length', 8); $m4is_ph89 = $m4is_ph89 ? $m4is_ph89 : $this->m4is_mmdrl('settings', 'password_strength', 0); $m4is_jyx_t = $this->m4is_mmdrl('settings', 'password_field', 'Password'); if ($m4is_ph89 < 5) { if ($m4is_aa5b < 6) { $m4is_aa5b = 6; } if ($m4is_jyx_t == 'Password' && $m4is_aa5b > 20) { $m4is_aa5b = 20; } $m4is_y_fl4r = 'aeuy'; $m4is_fml09 = 'bdghjmnpqrstvz'; $m4is__j257l = ''; $m4is_qu4_ = ''; if ($m4is_ph89 > 0) { $m4is_fml09 .= 'BDGHJLMNPQRSTVWXZ'; } if ($m4is_ph89 > 1) { $m4is_y_fl4r .= "AEUY"; } if ($m4is_ph89 > 2) {  $m4is_qu4_ = '23456789'; } if ($m4is_ph89 > 3) {  $m4is__j257l = '@#$%'; } $m4is_ph89 = max($m4is_ph89, 2); $m4is_p1ug = ''; $m4is_alg_k = time() % $m4is_ph89; for ($i = 0; $i < $m4is_aa5b; $i++) { $m4is_alg_k = mt_rand(1, 100) % $m4is_ph89; if ($m4is_alg_k == 0) { $m4is_p1ug .= $m4is_fml09[(rand() % strlen($m4is_fml09) )];  } elseif ($m4is_alg_k == 1) { $m4is_p1ug .= $m4is_y_fl4r[(rand() % strlen($m4is_y_fl4r) )];  } elseif ($m4is_alg_k == 2 && $m4is_ph89 > 2) { $m4is_p1ug .= $m4is_qu4_[(rand() % strlen($m4is_qu4_) )];  } elseif ($m4is_alg_k == 3 && $m4is_ph89 > 3) { $m4is_p1ug .= $m4is__j257l[(rand() % strlen($m4is__j257l) )];  } } } else { $m4is_p1ug = $this->m4is_acvik(null, $m4is_aa5b, null, null); } return $m4is_p1ug; }      
function m4is_acvik($m4is_p1ug, $m4is_aa5b = 0, $m4is_lob8l = '', $m4is_m5mp = '') { global $wpdb; $m4is_aa5b = empty($m4is_aa5b) ? $this->m4is_mmdrl('settings', 'min_password_length') : $m4is_aa5b; if ($m4is_aa5b < 20) { $m4is_ph89 = $this->m4is_mmdrl('settings', 'password_strength'); $m4is_jyx_t = $this->m4is_mmdrl('settings', 'password_field'); if ($m4is_ph89 == 5 || $m4is_ph89 == 6 && $m4is_jyx_t !== 'Password') { if ($m4is_jyx_t !== 'Password') { if ($m4is_ph89 == 5) { $m4is_aa5b = 4; } elseif ($m4is_ph89 == 6) { $m4is_aa5b = 5; } $m4is_vs5ci = []; $m4is_svmf = false; $m4is_mucfo = get_option( 'memberium/database/words', 0 ); if ($m4is_mucfo > 1000) { while (count($m4is_vs5ci) < $m4is_aa5b) { $m4is_fx96 = mt_rand(1, $m4is_mucfo); $m4is_u13x = MEMBERIUM_DB_WORDS; $m4is_ioxk = $wpdb->prepare("SELECT `word` FROM `{$m4is_u13x}` WHERE `id` = %d ", $m4is_fx96); $m4is_glzun = $wpdb->get_var($m4is_ioxk); if ( mt_rand( 1, 100 ) > 50 ) { $m4is_glzun = ucwords($m4is_glzun); } if ( $m4is_svmf == false && mt_rand( 1, 100 ) > 80 ) { $m4is_glzun = mt_rand(1, 100) < 51 ? $m4is_glzun . mt_rand(1, 99) : mt_rand(1, 99) . $m4is_glzun; $m4is_svmf = true; } if (! empty($m4is_glzun) && ! in_array($m4is_glzun, $m4is_vs5ci)) { $m4is_vs5ci[] = $m4is_glzun; } } $m4is_p1ug = implode('-', $m4is_vs5ci); } } } } return $m4is_p1ug; } 
function m4is_upv1( array $m4is_w5ky4q ) : string { $m4is_p78sgz = [ 'contact' => [], 'user_id' => 0, 'user' => false, 'contact_id' => 0, ]; $m4is_w5ky4q = wp_parse_args ($m4is_w5ky4q, $m4is_p78sgz ); $m4is_b1xsg = ''; if ( ! empty( $m4is_w5ky4q['contact_id'] ) ) { $m4is_w5ky4q['contact'] = m4is_zbyh::m4is_w1bfmt( $m4is_w5ky4q['contact_id'] ); } $m4is_w5ky4q['contact'] = array_change_key_case( $m4is_w5ky4q['contact'], CASE_LOWER ); if ( ! empty( $m4is_w5ky4q['user_id'] ) ) { $m4is_w5ky4q['user'] = get_user_by( 'id', $m4is_w5ky4q['user_id'] ); } if ( $m4is_w5ky4q['user'] ) { $m4is_b1xsg = $m4is_w5ky4q['user']->display_name; } else { $m4is_b1xsg = ''; } $m4is_i0ltb = $this->m4is_mmdrl( 'settings', 'displayname_format' ); if ( empty( $m4is_i0ltb ) ) { $m4is_sok8 = empty( $m4is_w5ky4q['contact']['firstname'] ) ? '' : trim( $m4is_w5ky4q['contact']['firstname'] ); $m4is_z2pukd = empty( $m4is_w5ky4q['contact']['lastname'] ) ? '' : trim( $m4is_w5ky4q['contact']['lastname'] ); $m4is_i0ltb = trim( $m4is_sok8 . ' ' . $m4is_z2pukd ); } if ( empty( $m4is_b1xsg ) || empty( $this->m4is_mmdrl( 'settings', 'disable_displayname_update' ) ) ) { $m4is_b1xsg = trim( preg_replace_callback( '|({{contact\.(.*)}})|U', function( $m4is_xid0gm ) use ( $m4is_w5ky4q ) { $m4is_ap3_ = strtolower( $m4is_xid0gm[2] ); if ( isset( $m4is_w5ky4q['contact'][$m4is_ap3_] ) ) { $m4is_n_bp6 = $m4is_w5ky4q['contact'][$m4is_ap3_]; } else { $m4is_n_bp6 = ''; } return htmlspecialchars( $m4is_n_bp6 ); }, $m4is_i0ltb) ); } return (string) $m4is_b1xsg; }    
function m4is_jrjget( int $m4is_aicfp, string $m4is_p1ug = '') { global $wpdb;  $m4is_nq7s = m4is_zbyh::m4is_w1bfmt($m4is_aicfp); $m4is_rz4ur = $this->m4is_mmdrl('settings', 'username_field', 'Email'); $m4is_jyx_t = $this->m4is_mmdrl('settings', 'password_field', 'Password'); $m4is_qy0cg = $this->m4is_mmdrl('settings', 'local_auth_only'); $m4is_f9c4 = $this->m4is_mmdrl('settings', 'disable_displayname_update'); $m4is_qy0cg = $this->m4is_mmdrl('settings', 'local_auth_only'); $m4is_id576 = isset( $m4is_nq7s[$m4is_rz4ur] ) ? $m4is_nq7s[$m4is_rz4ur] : ''; $m4is_id576 = apply_filters('memberium_wordpress_username', $m4is_id576, $m4is_nq7s); if ( empty( $m4is_id576 ) ) { return false; } if ( empty( $m4is_nq7s['Email'] ) ) { return false; } if ( empty( $m4is_p1ug ) ) { $m4is_p1ug = isset( $m4is_nq7s[ $m4is_jyx_t ] ) ? $m4is_nq7s[ $m4is_jyx_t ] : ''; }  if ( empty( $m4is_qy0cg ) ) { if ( empty( $m4is_p1ug ) ) { return false; } }  $m4is_qlbeg = (int) m4is_zbyh::m4is__nfdz9( $m4is_aicfp );  if ( ! $m4is_qlbeg ) { $m4is_qlbeg = (int) $this->m4is_b8gax( $m4is_id576 ); }  if ( $m4is_qlbeg ) { $m4is_fo4eiv = []; $m4is_x4bj30 = get_user_by( 'id', $m4is_qlbeg ); if ( is_object( $m4is_x4bj30 ) && strtolower( $m4is_x4bj30->user_email ) == strtolower( $m4is_nq7s['Email'] ) ) { $m4is_nq7s['Email'] = $m4is_x4bj30->user_email; } $m4is_u1l2 = []; $m4is_u1l2['display_name'] = $m4is_x4bj30->display_name; $m4is_u1l2['first_name'] = $m4is_x4bj30->first_name; $m4is_u1l2['last_name'] = $m4is_x4bj30->last_name; $m4is_u1l2['nickname'] = $m4is_x4bj30->nickname; $m4is_u1l2['user_email'] = $m4is_x4bj30->user_email; $m4is_u1l2['user_nicename'] = $m4is_x4bj30->user_nicename; $m4is_u1l2['user_url'] = wp_specialchars_decode( $m4is_x4bj30->user_url ); $m4is_j83ml = []; $m4is_j83ml['first_name'] = isset( $m4is_nq7s['FirstName'] ) ? $m4is_nq7s['FirstName'] : $m4is_u1l2['display_name']; $m4is_j83ml['last_name'] = isset( $m4is_nq7s['LastName'] ) ? $m4is_nq7s['LastName'] : $m4is_u1l2['last_name']; $m4is_j83ml['user_email'] = strtolower( trim( $m4is_nq7s['Email'] ) ); $m4is_j83ml['user_url'] = empty( $m4is_nq7s['Website'] ) ? $m4is_u1l2['user_url'] : trim( substr( $m4is_nq7s['Website'], 0, 94 ) );  if ( empty( $m4is_f9c4 ) ) { $m4is_w5ky4q = [ 'contact' => $m4is_nq7s, 'user_id' => $m4is_qlbeg, ]; $m4is_j83ml['display_name'] = (string) apply_filters( 'memberium/wpuser/display_name', $this->m4is_upv1( $m4is_w5ky4q ), $m4is_nq7s ); $m4is_j83ml['nickname'] = (string) apply_filters( 'memberium/wpuser/nickname', $m4is_u1l2['display_name'], $m4is_nq7s ); }  if ($this->m4is_mmdrl('settings', 'enable_slug_update', false) ) { $m4is_j83ml['user_nicename'] = apply_filters( 'memberium/wpuser/nicename', sanitize_title( $m4is_j83ml['display_name'] ), $m4is_nq7s ); } if ( empty( $m4is_qy0cg ) ) { $m4is_q2z1bm = isset( $_POST['pwd'] ) ? $_POST['pwd'] : ''; $m4is_q2z1bm = isset( $_POST['password'] ) && isset( $_POST['woocommerce-login-nonce'] ) ? $_POST['password'] : $m4is_q2z1bm; if ( ! empty( trim( $m4is_q2z1bm ) ) ) { if ( in_array( $m4is_p1ug, ['', 'PASSWORD_PLACEHOLDER'] ) ) { if ( ! empty( $m4is_q2z1bm ) ) { if ( ( ! @wp_check_password( $m4is_q2z1bm, $m4is_x4bj30->data->user_pass, $m4is_qlbeg ) ) ) { $m4is_fo4eiv['user_pass'] = $m4is_nq7s[$m4is_jyx_t]; } } } else { if ( ( ! @wp_check_password( $m4is_p1ug, $m4is_x4bj30->data->user_pass, $m4is_qlbeg ) ) ) { $m4is_fo4eiv['user_pass'] = $m4is_nq7s[$m4is_jyx_t]; } } } } foreach ( $m4is_j83ml as $m4is_ap3_ => $m4is_rhfd ) { if ( isset( $m4is_u1l2[$m4is_ap3_] ) && $m4is_u1l2[$m4is_ap3_] !== $m4is_rhfd && ! empty( $m4is_rhfd ) ) { $m4is_fo4eiv[$m4is_ap3_] = $m4is_rhfd; } } if (! empty($m4is_fo4eiv)) { $m4is_fo4eiv['ID'] = $m4is_qlbeg;  $this->m4is_di35eu(true); add_filter('send_password_change_email', [$this, 'm4is_pp54t'], PHP_INT_MAX, 3); wp_update_user($m4is_fo4eiv); remove_filter('send_password_change_email', [$this, 'm4is_pp54t'], PHP_INT_MAX);  if (stripos($m4is_x4bj30->user_login, '@') !== false) { $m4is_qxfj9 = sanitize_user($m4is_nq7s['Email'], true); if ($m4is_x4bj30->user_login <> $m4is_qxfj9) { $this->m4is__670($m4is_qlbeg, $m4is_qxfj9); } } } } else {  $m4is_fo4eiv = []; $m4is_fo4eiv['user_pass'] = $m4is_p1ug;  $m4is_fo4eiv['user_email'] = strtolower($m4is_nq7s['Email']); $m4is_fo4eiv['first_name'] = isset($m4is_nq7s['FirstName']) ? $m4is_nq7s['FirstName'] : ''; $m4is_fo4eiv['last_name'] = isset($m4is_nq7s['LastName']) ? $m4is_nq7s['LastName'] : ''; $m4is_fo4eiv['user_url'] = isset($m4is_nq7s['Website']) ? $m4is_nq7s['Website'] : ''; $m4is_w5ky4q = [ 'contact' => $m4is_nq7s, ]; $m4is_fo4eiv['display_name'] = apply_filters( 'memberium/wpuser/display_name', (string) $this->m4is_upv1($m4is_w5ky4q), $m4is_nq7s); $m4is_fo4eiv['nickname'] = apply_filters( 'memberium/wpuser/nickname', (string) $m4is_fo4eiv['display_name'], $m4is_nq7s); $m4is_fo4eiv['user_login'] = apply_filters( 'memberium/wpuser/login', (string) $m4is_id576, $m4is_nq7s);    $this->m4is_di35eu(true); $m4is_qlbeg = wp_insert_user($m4is_fo4eiv);   if (function_exists('WPCW_actions_users_newUserCreated') ) { WPCW_actions_users_newUserCreated($local_user_id); } } $this->m4is_hhit($m4is_aicfp, $m4is_qlbeg); $this->m4is_di35eu(false); return $m4is_qlbeg; } 
function m4is__670( int $m4is_q4c_xa, string $m4is_id576 ) { if ( user_can( $m4is_q4c_xa, 'manage_options' ) ) { return false; } $m4is_qxfj9 = sanitize_user( $m4is_id576, true ); $m4is_gwr6j0 = get_user_by( 'login', $m4is_qxfj9 ); if ( empty($m4is_qxfj9) || $m4is_gwr6j0 ) { return; } $m4is_x4bj30 = get_user_by( 'ID', $m4is_q4c_xa ); global $wpdb; if ( $m4is_qxfj9 <> $m4is_x4bj30->user_login ) { $sql = "UPDATE {$wpdb->users} SET `user_login` = '$m4is_qxfj9' WHERE `ID` = {$m4is_q4c_xa};"; $wpdb->query($sql); } }  
function m4is_melv( $m4is_id576, $m4is_bsvp4w = false) { global $wpdb; $m4is_id576 = stripslashes($m4is_id576); if (empty($m4is_id576) ) { return; } if ($this->m4is_kcersp == 1) { return; } $m4is_rz4ur = $this->m4is_mmdrl('settings', 'username_field'); $m4is_nzrv1 = get_user_by('login', $m4is_id576); if (! $m4is_nzrv1 && ! strpos($m4is_id576, '@') && in_array($m4is_rz4ur, ['Email', 'EmailAddress2', 'EmailAddress3'] ) ) { if (is_a($m4is_nzrv1, 'WP_User') ) { $m4is_id576 = $m4is_nzrv1->data->user_email; } } if (empty($m4is_id576) ) { return; } if (! $m4is_bsvp4w) { $m4is_bsvp4w = (int) $this->m4is_mmdrl('settings', 'max_contact_age'); } $m4is_yo6dh = time() - $m4is_bsvp4w; $m4is_znoa3z = MEMBERIUM_DB_CONTACTS; $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_nmqh = 0; $m4is_id576 = $this->m4is_jh7yc($m4is_id576); if ($m4is_bsvp4w) { $m4is_ioxk = "
			SELECT
			COUNT(`{$m4is_znoa3z}`.`id`)
			FROM
			`{$m4is_znoa3z}`,
			`{$m4is_znoa3z}` as `{$m4is_znoa3z}_1`
			WHERE	`{$m4is_znoa3z}`.`appname`     = %s
			AND 	`{$m4is_znoa3z}`.`fieldname`   = %s
			AND		`{$m4is_znoa3z}`.`value`       = %s
			AND		`{$m4is_znoa3z}_1`.`id`        = `{$m4is_znoa3z}`.`id`
			AND		`{$m4is_znoa3z}_1`.`fieldname` = '!LastUpdated'
			AND		`{$m4is_znoa3z}_1`.`value`     > %d"; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_q7m2, $m4is_rz4ur, $m4is_id576, $m4is_yo6dh); $m4is_nmqh = (int) $wpdb->get_var($m4is_ioxk); } if ($m4is_nmqh == 0) { $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr('Contact', true); $m4is_kc1q = [ ( ($m4is_rz4ur) ? $m4is_rz4ur : 'Email') => $m4is_id576, ];  if (is_object($m4is_nzrv1) && $m4is_nzrv1->ID > 0) {  } $m4is_oqymz9 = m4is_f84s3h::m4is_l2n5pg('Contact', 1000, 0, $m4is_kc1q, $m4is_hkp7s, 'Id', true ); if (is_array($m4is_oqymz9) && ! empty($m4is_oqymz9) ) { $m4is_ulo1 = []; foreach($m4is_oqymz9 as $m4is_nq7s) { if (isset($m4is_nq7s['Id']) ) { $m4is_ulo1[] = $m4is_nq7s['Id']; } } $m4is_ulo1 = implode(',', $m4is_ulo1); $m4is_ioxk = "SELECT `id`
				FROM`{$m4is_znoa3z}`
				WHERE `{$m4is_znoa3z}`.`appname` = %s
				AND   `{$m4is_znoa3z}`.`fieldname` = %s
				AND   `{$m4is_znoa3z}`.`value` = %s
				AND   `{$m4is_znoa3z}`.`id` NOT IN ({$m4is_ulo1}) "; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_q7m2, $m4is_rz4ur, $m4is_id576); $m4is_ea5_12 = $wpdb->get_col($m4is_ioxk); if (is_array($m4is_ea5_12) && ! empty($m4is_ea5_12) ) { $m4is_ioxk = "DELETE FROM `{$m4is_znoa3z}`
					WHERE `{$m4is_znoa3z}`.`appname` = %s
					AND `{$m4is_znoa3z}`.`id` IN (" . implode(',', $m4is_ea5_12) . "); "; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_q7m2, $m4is_rz4ur); $m4is_n_bp6 = $wpdb->query($m4is_ioxk); } foreach ($m4is_oqymz9 as $m4is_nq7s) { $this->m4is_ba7dk($m4is_nq7s); } unset($m4is_ioxk, $m4is_ea5_12, $m4is_ulo1); if (count($m4is_oqymz9) > 0) { $this->m4is_kcersp = 1; } } } else {  } }  
function m4is__yge( $m4is_id576 = '' ) : int { global $wpdb; if ( empty( $m4is_id576 ) ) { return 0; } $m4is_id576 = strtolower( trim( stripslashes( $m4is_id576 ) ) ); if ( empty( $m4is_id576 ) ) { return 0; }  $m4is_aicfp = m4is_lpl4d::m4is_a_2z(); if ($m4is_aicfp > 0) { if (isset($_SESSION['memb_user']['LoginName']) && $m4is_id576 == $_SESSION['memb_user']['LoginName'] ) { return $m4is_aicfp; } } $m4is_ojcnt = $this->m4is_mmdrl(); $m4is_znoa3z = MEMBERIUM_DB_CONTACTS; $m4is_yo6dh = intval( time() - $this->m4is_mmdrl( 'settings', 'max_contact_age' ) ) - 10; $m4is_q7m2 = $this->m4is_re5x( 'appname' ); $m4is_rz4ur = $this->m4is_mmdrl( 'settings', 'username_field' ); $m4is_jyx_t = $this->m4is_mmdrl( 'settings', 'password_field' ); $m4is_rnuw = get_user_by( 'email', $m4is_id576 ); if (! $m4is_rnuw) { $m4is_rnuw = get_user_by( 'login', $m4is_id576 ); } if ( is_object( $m4is_rnuw ) && user_can( $m4is_rnuw, 'manage_options' ) ) { return 0; } $m4is_qlbeg = is_a( $m4is_rnuw, 'WP_User' ) ? $m4is_rnuw->ID : 0; $m4is_xk49g = m4is_zbyh::m4is_fhxr6( $m4is_qlbeg ); if ( $m4is_xk49g ) { $m4is_c70g = m4is_zbyh::m4is_w1bfmt( $m4is_xk49g ); if ( ! empty( $m4is_c70g['id'] ) && $m4is_c70g['id'] == $m4is_xk49g ) { return $m4is_xk49g; } }    $m4is_hkp7s = [ 'Id', $m4is_rz4ur, $m4is_jyx_t, ];  $m4is_kc1q = [ $m4is_rz4ur => $m4is_id576,  ]; $m4is_oqymz9 = m4is_f84s3h::m4is_l2n5pg('Contact', 1, 0, $m4is_kc1q, $m4is_hkp7s, 'Id', true ); $m4is_ihm9i = 0;  if (! is_array($m4is_oqymz9) ) { return 0; }  if (! empty($this->m4is_mmdrl('settings', 'local_auth_only') ) ) { return (int) $m4is_oqymz9[0]['Id']; }   foreach($m4is_oqymz9 as $m4is_aicfp => $m4is_nq7s) { if (! empty($m4is_nq7s[$m4is_jyx_t]) ) { $m4is_ihm9i = (int) $m4is_nq7s['Id']; break; } } return $m4is_ihm9i; } 
function m4is_r231y($m4is_q4c_xa) { global $wpdb; $m4is_aicfp = 0; if ($m4is_q4c_xa) { if (get_current_user_id() == $m4is_q4c_xa && ! empty($_SESSION['memb_user']['crm_id']) ) { $m4is_aicfp = $_SESSION['memb_user']['crm_id']; } else { $m4is_ioxk = "SELECT `meta_value` FROM `{$wpdb->usermeta}` WHERE `meta_key` = 'infusionsoft_user_id' AND `user_id` = %d LIMIT 1"; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_q4c_xa); $m4is_aicfp = (int) $wpdb->get_var($m4is_ioxk); if ( ! $m4is_aicfp ) { $m4is_nzrv1 = get_user_by( 'id', $m4is_q4c_xa ); $m4is_m2h6b = is_a($m4is_nzrv1, 'WP_user') ? $m4is_nzrv1->user_email : false; if ($m4is_m2h6b) { $m4is_jr7f6 = m4is_zbyh::m4is_tukr($m4is_m2h6b, ['id']); $m4is_aicfp = empty( $m4is_jr7f6[0]['id'] ) ? 0 : $m4is_jr7f6[0]['id']; if ($m4is_aicfp) { $this->m4is_hhit($m4is_aicfp, $m4is_q4c_xa); } } } } } return $m4is_aicfp; } 
function m4is_jh7yc($m4is_id576) {  if (! in_array($this->m4is_mmdrl('settings', 'username_field'), ['Email', 'EmailAddress2', 'EmailAddress3'] ) ) { return $m4is_id576; } $m4is_nzrv1 = get_user_by('login', $m4is_id576); if (is_a($m4is_nzrv1, 'WP_User') ) { $m4is_id576 = $m4is_nzrv1->data->user_email; } else { $m4is_nzrv1 = get_user_by('email', $m4is_id576); if (is_a($m4is_nzrv1, 'WP_User') ) { $m4is_id576 = $m4is_nzrv1->data->user_email; } } return $m4is_id576; } 
function m4is__c4p7($m4is_hhp_) { $m4is_nzrv1 = get_user_by('email', $m4is_hhp_); if (! $m4is_nzrv1) { $m4is_nzrv1 = get_user_by('login', $m4is_hhp_); } return $m4is_nzrv1; } 
function m4is_b8gax($m4is_id576) { $m4is_id576 = strtolower(trim($m4is_id576)); $m4is_n_bp6 = false; $m4is_nzrv1 = get_user_by('login', $m4is_id576); if (is_a($m4is_nzrv1, 'WP_User') && $m4is_nzrv1->ID > 0 ) { $m4is_n_bp6 = $m4is_nzrv1->ID; } else { $m4is_nzrv1 = get_user_by('email', $m4is_id576); if ( is_a($m4is_nzrv1, 'WP_User') && $m4is_nzrv1->ID > 0 ) { $m4is_n_bp6 = $m4is_nzrv1->ID; } } return $m4is_n_bp6; } 
function m4is_f14d7o($m4is_aicfp) { global $wpdb; $m4is_ioxk = "SELECT `user_id` FROM `{$wpdb->usermeta}`, `{$wpdb->users}` WHERE `{$wpdb->usermeta}`.`meta_value` = %s AND `{$wpdb->usermeta}`.`meta_key` = 'infusionsoft_user_id' AND `{$wpdb->users}`.`ID` = `{$wpdb->usermeta}`.`user_id` LIMIT 1;";  $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_aicfp); $m4is_q4c_xa = (int) $wpdb->get_var($m4is_ioxk); if ($m4is_q4c_xa > 0) { $m4is_nzrv1 = get_user_by('id', $m4is_q4c_xa); return $m4is_nzrv1; } else { return false; } } 
function m4is__k5_q( $m4is_id576, $m4is_p1ug = '', $m4is_d0wuk = false) {  static $m4is_xid0gm = []; $m4is_id576 = stripslashes( $m4is_id576 ); $m4is_p1ug = stripslashes( $m4is_p1ug ); if (isset($m4is_xid0gm[$m4is_id576]) ) { return $m4is_xid0gm[$m4is_id576]; } global $wpdb; if ($m4is_id576 == '') { return false; } $m4is_id576 = $this->m4is_jh7yc($m4is_id576); $m4is_q4c_xa = $this->m4is_b8gax($m4is_id576); if ($this->m4is_w47qdy() > 0 && $m4is_q4c_xa == get_current_user_id() ) { return $this->m4is_w47qdy(); } $m4is_qy0cg = $this->m4is_mmdrl('settings', 'local_auth_only', false); if (! $m4is_q4c_xa && $m4is_qy0cg) { return false; } else { $m4is_p165 = m4is_zbyh::m4is_fhxr6($m4is_q4c_xa); } $m4is_ojcnt = $this->m4is_mmdrl(); $m4is_aicfp = 0; $m4is_nzrv1 = get_user_by('id', $m4is_q4c_xa); $m4is_rz4ur = $this->m4is_mmdrl('settings', 'username_field'); $m4is_jyx_t = $this->m4is_mmdrl('settings', 'password_field'); $m4is_putz = $this->m4is_mmdrl('settings', 'max_contact_age');  $m4is_znoa3z = MEMBERIUM_DB_CONTACTS; $m4is_yo6dh = intval(time() - $m4is_putz); $m4is_q7m2 = $this->m4is_re5x('appname'); if (! empty($m4is_qy0cg) ) { $m4is_ioxk = "
			SELECT
			`c1`.`id`,
			'' as `password`,
			0 as `score`
			FROM
			`{$m4is_znoa3z}` as `c1`
			WHERE	`c1`.`appname` = '{$m4is_q7m2}'
			AND 	`c1`.`fieldname` = '{$m4is_rz4ur}'
			AND		`c1`.`value` = %s
			ORDER BY
			`c1`.`id` ASC"; } else { $m4is_ioxk = "
			SELECT
			`c1`.`id`,
			`c2`.`value` as `password`,
			0 as `score`
			FROM
			`{$m4is_znoa3z}` as `c1`,
			`{$m4is_znoa3z}` as `c2`
			WHERE	`c1`.`appname` = '{$m4is_q7m2}'
			AND 	`c1`.`fieldname` = '{$m4is_rz4ur}'
			AND		`c1`.`value` = %s
			AND 	`c2`.`id` = `c1`.`id`
			AND 	`c2`.`appname` = '{$m4is_q7m2}'
			AND 	`c2`.`fieldname` = '{$m4is_jyx_t}'
			ORDER BY
			`c1`.`id` ASC"; } $m4is_ioxk = $wpdb->prepare($m4is_ioxk, stripslashes($m4is_id576) ); $m4is_oqymz9 = $wpdb->get_results($m4is_ioxk, ARRAY_A); if ($m4is_qy0cg) {  $m4is_aicfp = isset($m4is_oqymz9[0]['id']) ? $m4is_oqymz9[0]['id'] : 0; } else {  if (is_array($m4is_oqymz9) && ! empty($m4is_oqymz9) ) { foreach ($m4is_oqymz9 as $m4is_ap3_=>$m4is_nq7s) { $m4is_oqymz9[$m4is_ap3_]['password'] = stripslashes(html_entity_decode(trim($m4is_nq7s['password']) ) ); } $m4is_jj1bk = false;  if (false && count($m4is_oqymz9) == 1) { $m4is_aicfp = (int) $m4is_oqymz9[0]['id']; $m4is_jj1bk = 0; $m4is_nq7s[0]['score'] = $m4is_oqymz9[0]['score'] + 25; } else { $m4is_oqymz9[0]['score'] = $m4is_oqymz9[0]['score'] + 2; foreach ($m4is_oqymz9 as $m4is_ap3_=>$m4is_nq7s) { if ($m4is_p1ug > '' && $m4is_nq7s['password'] == stripslashes(trim($m4is_p1ug) ) ) {  $m4is_oqymz9[$m4is_ap3_]['score'] = $m4is_oqymz9[$m4is_ap3_]['score'] + 10; } elseif ($m4is_p1ug > '' && $m4is_nq7s['password'] > '' && $m4is_nq7s['password'] != 'PASSWORD_PLACEHOLDER') { $m4is_nq7s['score'] = $m4is_nq7s['score'] + 5; } elseif ($m4is_p1ug > '' && $m4is_p1ug != $m4is_nq7s['password'] && $m4is_nq7s['password'] == 'PASSWORD_PLACEHOLDER') { $m4is_oqymz9[$m4is_ap3_]['score'] = $m4is_oqymz9[$m4is_ap3_]['score'] + 3; } elseif ($m4is_p1ug == '' && $m4is_nq7s['password'] == '') { $m4is_oqymz9[$m4is_ap3_]['score'] = $m4is_oqymz9[$m4is_ap3_]['score'] + 1; } elseif ($m4is_nq7s['id'] == $m4is_p165) { $m4is_oqymz9[$m4is_ap3_]['score'] + 10; } }  $m4is_j5fw = 0; foreach ($m4is_oqymz9 as $m4is_ap3_ => $m4is_nq7s) { if ($m4is_nq7s['score'] > $m4is_j5fw) { $m4is_jj1bk = $m4is_ap3_; } } unset($m4is_j5fw); } if ($m4is_jj1bk !== FALSE) { if ($m4is_p1ug == '' || ($m4is_p1ug > '' && $m4is_oqymz9[$m4is_jj1bk]['password'] == $m4is_p1ug) ) {  $m4is_aicfp = (int) $m4is_oqymz9[$m4is_jj1bk]['id']; } elseif ($m4is_p1ug > '' && $m4is_p1ug <> 'PASSWORD_PLACEHOLDER' && $m4is_oqymz9[$m4is_jj1bk]['password'] == 'PASSWORD_PLACEHOLDER') {  if (is_a($m4is_nzrv1, 'WP_User')) { if ( ($m4is_nzrv1->ID > 0) && wp_check_password($m4is_p1ug, $m4is_nzrv1->data->user_pass, $m4is_nzrv1->ID) ) { $m4is_aicfp = (int) $m4is_oqymz9[$m4is_jj1bk]['id']; $m4is_s1r2_l = [ $this->m4is_mmdrl('settings', 'password_field') => $m4is_p1ug ]; m4is_zbyh::m4is_pp0i($m4is_aicfp, $m4is_s1r2_l, true);  } } } else { } } if ($m4is_aicfp > 0) { $m4is_nq7s = $m4is_oqymz9[$m4is_jj1bk];  } } } if (! $m4is_nzrv1) { $m4is_nzrv1 = get_user_by('email', $m4is_id576); } if (is_a($m4is_nzrv1, 'WP_User') && $m4is_aicfp > 0) { $this->m4is_hhit($m4is_aicfp, $m4is_nzrv1->ID); }  if ($m4is_id576 > '' && $m4is_p1ug > '' && $m4is_aicfp > 0) { $m4is_xid0gm[$m4is_id576] = $m4is_aicfp; } return $m4is_aicfp; } 
function m4is_ba7dk( $m4is_fi64q, $m4is_rjypic = false) { global $wpdb; static $m4is_fp25a = [], $m4is_jyx_t = null, $m4is_e4t6d = null, $m4is_wd8t = null, $m4is_df3hm7 = null, $m4is_f9c4 = null, $m4is_wywx67 = null, $m4is_q7m2 = '', $m4is_fp25a = null; $this->m4is_cxp5eb( true ); $m4is_b40e_m = isset( $m4is_fi64q['Id'] ) ? (int) $m4is_fi64q['Id'] : 0;  if (! $m4is_b40e_m ) { return false; }  if ( empty( trim( $m4is_fi64q['Email'] ) ) ) { return false; }  if ( isset( $m4is_fi64q['CompanyID'] ) && $m4is_fi64q['CompanyID'] == $m4is_b40e_m ) { return false; }  $m4is_q4c_xa = m4is_zbyh::m4is__nfdz9( $m4is_b40e_m ); if ( user_can( $m4is_q4c_xa, 'manage_options' ) ) { return false; } $m4is_jyx_t = is_null( $m4is_jyx_t ) ? $this->m4is_mmdrl( 'settings', 'password_field' ) : $m4is_jyx_t; $m4is_e4t6d = is_null( $m4is_e4t6d ) ? $this->m4is_mmdrl( 'settings', 'plaintext_db' ) : $m4is_e4t6d; $m4is_wd8t = is_null( $m4is_wd8t ) ? array_filter( explode( ',', $this->m4is_mmdrl( 'settings', 'ignore_contact_fields' ) ) ) : $m4is_wd8t; $m4is_df3hm7 = is_null( $m4is_df3hm7 ) ? $this->m4is_mmdrl( 'settings', 'sync_tag_details' ) : $m4is_df3hm7; $m4is_f9c4 = is_null( $m4is_f9c4 ) ? $this->m4is_mmdrl( 'settings', 'disable_displayname_update' ) : $m4is_f9c4; $m4is_wywx67 = is_null( $m4is_wywx67 ) ? $this->m4is_mmdrl( 'settings', 'sync_meta_updates' ) : $m4is_wywx67; $m4is_q7m2 = empty( $m4is_q7m2 ) ? $this->m4is_re5x( 'appname' ) : $m4is_q7m2; $m4is_fp25a = empty( $m4is_fp25a ) ? m4is_f84s3h::m4is_cm6nr( 'Contact', true ) : $m4is_fp25a; $m4is_w6mt = MEMBERIUM_DB_CONTACTS; $m4is_s0gl = get_user_by( 'email', $m4is_fi64q['Email'] ); $m4is_o37r9w = [ 'Email', 'FirstName', 'Groups', 'LastName', ]; foreach( $m4is_fi64q as $m4is_ap3_ => $m4is_rhfd ) { if ( in_array( $m4is_ap3_, $m4is_wd8t ) ) { unset( $m4is_fi64q[$m4is_ap3_] ); } } $m4is_fi64q = $this->m4is_l5kr8_( $m4is_fi64q );  foreach( $m4is_fi64q as $m4is_ap3_ => $m4is_rhfd ) { $m4is_fi64q[$m4is_ap3_] = ( $m4is_rhfd == 'null' ) ? '' : trim( $m4is_rhfd ); }  foreach( $m4is_fi64q as $m4is_ap3_ => $m4is_rhfd ) { if ( $m4is_rhfd == '' && ! in_array( $m4is_ap3_, $m4is_o37r9w ) ) { unset( $m4is_fi64q[$m4is_ap3_] ); } }  if ( $m4is_rjypic ) { m4is_zbyh::m4is_pp0i( $m4is_b40e_m, $m4is_fi64q );  } $m4is_fi64q['!LastUpdated'] = time(); $m4is_omua = m4is_zbyh::m4is_w1bfmt( $m4is_b40e_m ); foreach( $m4is_fi64q as $m4is_ap3_ => $m4is_rhfd ) { if ( in_array( $m4is_ap3_, $m4is_wd8t ) ) { unset( $m4is_fi64q[$m4is_ap3_] ); } } foreach( $m4is_fi64q as $m4is_ap3_ => $m4is_sv3h ) { if ( $m4is_ap3_ == 'Groups' ) { $m4is_fi64q[$m4is_ap3_] = implode( ',', array_filter( array_unique( explode( ',', $m4is_fi64q[$m4is_ap3_] ) ) ) ); } elseif ( $m4is_ap3_ !== $m4is_jyx_t ) {  } } $m4is_u94qoj = $this->m4is_rdm7ak( $m4is_omua, $m4is_fi64q ); $m4is_s52_9 = $this->m4is_nk208x( $m4is_omua, $m4is_fi64q ); $m4is_i1i5 = $this->m4is_ab02( $m4is_omua, $m4is_fi64q ); $m4is_i1i5 = $this->m4is_h6_9( $m4is_i1i5, $m4is_s52_9 ); $m4is_i1i5 = $this->m4is_h6_9( $m4is_i1i5, array_keys( $m4is_u94qoj ) );  if ( ! empty($m4is_s52_9) ) { $m4is_ioxk = "DELETE FROM {$m4is_w6mt} WHERE `appname` = %s AND `id` = %d AND `fieldname` IN ('" . implode("','", $m4is_s52_9) . "');"; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_q7m2, $m4is_b40e_m); $m4is_n_bp6 = $wpdb->query($m4is_ioxk); }  if ( ! empty( $m4is_u94qoj ) ) { $m4is_o1af2 = []; foreach( $m4is_u94qoj as $m4is_e3k_mi => $m4is_waxrhu ) { $m4is_o1af2[] = $wpdb->prepare('(%d, %s, %s, %s)', $m4is_b40e_m, $m4is_q7m2, $m4is_e3k_mi, $m4is_waxrhu); } if (! empty($m4is_o1af2) ) { $m4is_ioxk = "INSERT INTO {$m4is_w6mt} (id, appname, fieldname, value) VALUES " . implode(',', $m4is_o1af2); $m4is_n_bp6 = $wpdb->query($m4is_ioxk); } } if ( ! empty( $m4is_i1i5 ) ) { foreach ( $m4is_i1i5 as $m4is_ap3_ => $m4is_rhfd ) { $m4is_ioxk = "UPDATE `{$m4is_w6mt}` SET `value` = %s WHERE `id` = %d AND `appname` = %s AND `fieldname` = %s "; $m4is_ioxk = $wpdb->prepare( $m4is_ioxk, $m4is_rhfd, $m4is_b40e_m, $m4is_q7m2, $m4is_ap3_ ); $wpdb->query( $m4is_ioxk ); } } if ($m4is_wywx67) { $this->m4is_ucvk($m4is_q4c_xa, $m4is_b40e_m, $m4is_fi64q); } if (! empty( $m4is_df3hm7 ) ) { $this->m4is_cr3akg( (int) $m4is_fi64q['Id']); } if ($m4is_q4c_xa && ! $m4is_s0gl) { $this->m4is_jrjget($m4is_b40e_m); } $this->m4is_l41p7r($m4is_b40e_m);  do_action('memberium_save_contact', $m4is_fi64q['Id'], $m4is_q4c_xa, $m4is_fi64q); $this->m4is_cxp5eb( false ); } 
function m4is_ucvk( int $m4is_q4c_xa, int $m4is_aicfp, $m4is_kbu63_ ) { global $wpdb; if (! $this->m4is_mmdrl( 'settings', 'sync_meta_updates' ) ) { return; } if (empty( $m4is_kbu63_ ) || empty( $m4is_q4c_xa ) ) { return; } $m4is_d45d8f = "memb\_%"; $m4is_ioxk = "SELECT `meta_key`, `meta_value` FROM {$wpdb->usermeta} WHERE `user_id` = {$m4is_q4c_xa} AND `meta_key` LIKE '{$m4is_d45d8f}' "; $m4is_un0y = $wpdb->get_results( $m4is_ioxk, ARRAY_A ); $m4is_un0y = $this->m4is_ndf59( $m4is_un0y, 'meta_key', 'meta_value' ); foreach( $m4is_kbu63_ as $m4is_ap3_ => $m4is_rhfd ) { if ( substr( $m4is_ap3_, 0, 1 ) !== '!' ) { $m4is_iwhiq = "memb_{$m4is_ap3_}"; if ( ! array_key_exists( $m4is_iwhiq, $m4is_un0y ) || $m4is_rhfd == '' ) { delete_user_meta( $m4is_q4c_xa, $m4is_iwhiq ); } elseif ( array_key_exists( $m4is_iwhiq, $m4is_un0y ) && $m4is_un0y[$m4is_iwhiq] !== $m4is_rhfd ) { update_user_meta( $m4is_q4c_xa, $m4is_iwhiq, $m4is_rhfd ); } elseif ( ! array_key_exists( $m4is_iwhiq, $m4is_un0y ) && ! empty( $m4is_rhfd) ) { add_user_meta( $m4is_q4c_xa, $m4is_iwhiq, $m4is_rhfd ); } } } } 
function m4is_m816( int $m4is_aicfp ) { global $wpdb; $m4is_ioxk = 'SELECT `value` FROM `' . MEMBERIUM_DB_CONTACTS . '` WHERE `id` = %d AND `fieldname` = "!LastUpdated";'; $m4is_ioxk = $wpdb->prepare( $m4is_ioxk, $m4is_aicfp ); $m4is_o74my_ = (int) $wpdb->get_var( $m4is_ioxk ); return $m4is_o74my_; } 
function m4is_qjrxkl($m4is_aicfp = 0, $m4is_wsf6 = false) { $m4is_c_3n = 0; if ( ! $m4is_aicfp ) { return $m4is_c_3n; } global $wpdb; $m4is_ojcnt = $this->m4is_mmdrl(); $m4is_bd92x = $this->get_i2sdk_options(); $m4is_aicfp = (int) $m4is_aicfp; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr('Contact', true); $m4is_jpzyit = []; $m4is_c_3n = 0; $m4is_pverx = time() - 3; $m4is_i8ic4 = $this->m4is_m816( $m4is_aicfp ); if ( $m4is_i8ic4 <= $m4is_pverx ) { $m4is_jpzyit = m4is_zbyh::m4is_n0_ck( $m4is_aicfp, $m4is_hkp7s ); } if ( is_string( $m4is_jpzyit ) && stripos( $m4is_jpzyit, 'RecordNotFound' ) !== false) { m4is_zbyh::m4is__98tl( $m4is_aicfp ); } if (is_array($m4is_jpzyit) && count($m4is_jpzyit) > 0) { $this->m4is_ba7dk($m4is_jpzyit); $m4is_c_3n = count($m4is_jpzyit); if (! empty($this->m4is_mmdrl('settings','sync_tag_details') ) ) { $this->m4is_cr3akg( (int) $m4is_jpzyit['Id']); } $this->m4is_l41p7r($m4is_aicfp); } return $m4is_c_3n; } 
function m4is_gd_az( $m4is_w5ky4q = [] ) { $m4is_p78sgz = [ 'contact_id' => 0, 'cascade' => false, 'cache_ttl' => 0, ]; $m4is_w5ky4q = wp_parse_args($m4is_w5ky4q, $m4is_p78sgz); $m4is_aicfp = $m4is_w5ky4q['contact_id']; $m4is_wsf6 = $m4is_w5ky4q['cascade']; $m4is_n94k = $m4is_w5ky4q['cache_ttl']; $m4is_c_3n = 0; if ($m4is_aicfp > 0) { global $wpdb; $m4is_ojcnt = $this->m4is_mmdrl(); $m4is_bd92x = $this->get_i2sdk_options(); $m4is_aicfp = (int) $m4is_aicfp; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr('Contact', true); $m4is_jpzyit = []; $m4is_c_3n = 0; $m4is_ioxk = 'SELECT `value` FROM `' . MEMBERIUM_DB_CONTACTS . '` WHERE `id` = %d AND `fieldname` = "!LastUpdated";'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_aicfp); $m4is_i8ic4 = $wpdb->get_var($m4is_ioxk); $m4is_pverx = time(); if ($m4is_i8ic4 < ($m4is_pverx - $m4is_n94k) ) { $m4is_jpzyit = m4is_zbyh::m4is_n0_ck($m4is_aicfp, $m4is_hkp7s); if (is_string($m4is_jpzyit) && stripos($m4is_jpzyit, 'RecordNotFound') !== false) { m4is_zbyh::m4is__98tl($m4is_aicfp); } if (is_array($m4is_jpzyit) && count($m4is_jpzyit) > 0) { $this->m4is_ba7dk($m4is_jpzyit); $m4is_c_3n = count($m4is_jpzyit); if (! empty($this->m4is_mmdrl('settings','sync_tag_details') ) ) { $this->m4is_cr3akg( (int) $m4is_wo7c93['Id']); } } } $this->m4is_l41p7r($m4is_aicfp); } return $m4is_c_3n; } 
function m4is_wqve( $m4is_w5ky4q ) { $m4is_p78sgz = [ 'email' => is_string( $m4is_w5ky4q ) ? strtolower( trim( $m4is_w5ky4q ) ) : '', 'return' => 'row_count',  ]; if ( is_string( $m4is_w5ky4q ) ) { $m4is_p78sgz['email'] = strtolower( trim( $m4is_w5ky4q ) ); $m4is_w5ky4q = []; } $m4is_w5ky4q = wp_parse_args( $m4is_w5ky4q, $m4is_p78sgz ); $m4is_m2h6b = $m4is_w5ky4q['email']; if ( empty( $m4is_m2h6b ) ) { return; } $m4is_zan2 = $this->m4is_mmdrl( 'settings', 'sync_tag_details' ); $m4is_u13x = 'Contact'; $m4is_qqzo = 1000; $m4is_zvxijt = 0; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr( $m4is_u13x, true ); $m4is_w6mt = MEMBERIUM_DB_CONTACTS; $m4is_c_3n = 0; $contact_count = 0; $contact_ids = []; $contacts = []; $m4is_kc1q = [ 'Email' => $m4is_m2h6b ]; do { $m4is_jpzyit = m4is_f84s3h::m4is_l2n5pg( $m4is_u13x, $m4is_qqzo, $m4is_zvxijt, $m4is_kc1q, $m4is_hkp7s, 'Id', true ); if ( is_array( $m4is_jpzyit ) && ! empty( $m4is_jpzyit ) ) { foreach ( $m4is_jpzyit as $m4is_wo7c93 ) { if ( $m4is_w5ky4q['return'] == 'contacts' ) { $contacts[$m4is_wo7c93['Id']] = $m4is_wo7c93; } $contact_count++; $contact_ids[] = $m4is_wo7c93['Id']; $this->m4is_ba7dk( $m4is_wo7c93 ); if ( $m4is_zan2 ) { $this->m4is_cr3akg( (int) $m4is_wo7c93['Id'] ); } $this->m4is_l41p7r( $m4is_wo7c93['Id'] ); } $m4is_zvxijt++; $m4is_c_3n = $m4is_c_3n + count( $m4is_jpzyit ); } } while ( is_array( $m4is_jpzyit ) && count( $m4is_jpzyit ) == $m4is_qqzo );  if ( $m4is_w5ky4q['return'] == 'contact_count' ) { return $contact_count; } elseif ( $m4is_w5ky4q['return'] == 'contact_ids' ) { return $contact_ids; } elseif ( $m4is_w5ky4q['return'] == 'contacts' ) { return $contacts; } return $m4is_c_3n; } 
function m4is_cr3akg( int $m4is_aicfp ) { if (! $m4is_aicfp ) { return; } global $wpdb; $m4is_q7m2 = $this->m4is_re5x( 'appname' ); $m4is_aicfp = $m4is_aicfp; $m4is_qqzo = 1000; $m4is_u13x = 'ContactGroupAssign'; $m4is_zvxijt = 0; $m4is__dxt_o = 'ContactId'; $m4is_v_fri = $m4is_aicfp; $m4is_hkp7s = [ 'GroupId', 'DateCreated' ]; $m4is_w6mt = MEMBERIUM_DB_CONTACTTAGS; $m4is_c_3n = 0; $wpdb->delete( $m4is_w6mt, ['contactid' => $m4is_aicfp, 'appname' => $m4is_q7m2] ); do { $m4is_jpzyit = $this->m4is_wnlbj_()->dsfind( $m4is_u13x, (int) $m4is_qqzo, (int) $m4is_zvxijt, $m4is__dxt_o, (string) $m4is_v_fri, $m4is_hkp7s ); if (is_array($m4is_jpzyit) ) { foreach ($m4is_jpzyit as $m4is_wo7c93) { $m4is_s2msh = (int) strtotime( $m4is_wo7c93['DateCreated'] ); $wpdb->insert( MEMBERIUM_DB_CONTACTTAGS, [ 'appname' => $m4is_q7m2, 'contactid' => $m4is_aicfp, 'tagid' => (int) $m4is_wo7c93['GroupId'], 'created' => date( 'Y-m-d H:i:s', $m4is_s2msh ), ], ['%s', '%d', '%d', '%s'] ); } } $m4is_zvxijt++; $m4is_c_3n = $m4is_c_3n + count($m4is_jpzyit); } while (count($m4is_jpzyit) == $m4is_qqzo); $current_contact_id = m4is_lpl4d::m4is_a_2z(); if ($current_contact_id == $m4is_aicfp) { $_SESSION['memb_user']['tags_synced'] = 1; } } 
function m4is_qism( int $m4is_aicfp, $m4is_m2h6b) { global $wpdb; if (empty($m4is_m2h6b) ) { return false; } if (empty($m4is_aicfp) ) { return false; } $m4is_sv3h = $this->m4is_mmdrl('settings','username_field'); $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_ioxk = "SELECT count(`id`) FROM `" . MEMBERIUM_DB_CONTACTS . "` WHERE `id` = %d AND `fieldname` = %s AND appname = %s AND VALUE = %s ;"; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_aicfp, $m4is_sv3h, $m4is_q7m2, $m4is_m2h6b); $m4is_in0ti = $wpdb->get_var($m4is_ioxk); if (! $m4is_in0ti) { } else { } return $m4is_in0ti; } 
function m4is_qlu61s( int $m4is_xfv5nd, $m4is_sxfbjo = false) : bool { global $wpdb; if (! $m4is_sxfbjo) {  if ( current_user_can( 'manage_options' ) ) { return true; } }  if ( ! m4is_o5aoir::m4is_du5icq() ) { return false; } if ( $m4is_sxfbjo === false ) { if (m4is_lpl4d::m4is_bfi49( 'groups' ) == '' ) { $m4is_sxfbjo['keap']['contact']['groups'] = ''; $m4is_sxfbjo['memb_user']['GroupNames'] = ''; } else { $m4is_ela6 = m4is_lpl4d::m4is_bfi49( 'groups' ); $m4is__yvi5 = $_SESSION['memb_user']['GroupNames']; } } else { $m4is_ela6 = isset( $m4is_sxfbjo['keap']['contact']['groups'] ) ? $m4is_sxfbjo['keap']['contact']['groups'] : ''; $m4is__yvi5 = isset( $m4is_sxfbjo['memb_user']['GroupNames'] ) ? $m4is_sxfbjo['memb_user']['GroupNames'] : ''; } $m4is_u13x = MEMBERIUM_DB_TAGS; $m4is_xfv5nd = (int) $m4is_xfv5nd; $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_ioxk = "SELECT count(*) FROM `{$m4is_u13x}` WHERE `id` IN (" . $m4is_ela6 . ") AND `appname` = %s AND `category` = %d"; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_q7m2, $m4is_xfv5nd); $m4is_n_bp6 = $wpdb->get_var($m4is_ioxk);  return (bool) $m4is_n_bp6; } 
function m4is_c8ie6( $m4is_f4i9n, $m4is_hm4l ) { if ( empty( $m4is_f4i9n ) || empty( $m4is_hm4l ) ) { return false; } $m4is_mtykgr = false; $m4is_f4i9n = $this->m4is_p98el( $m4is_f4i9n ); $m4is_f4i9n = is_array( $m4is_f4i9n ) ? $m4is_f4i9n : explode( ',', $m4is_f4i9n ); $m4is_f4i9n = array_map( 'trim', $m4is_f4i9n ); $m4is_yta_se = array_filter( $m4is_f4i9n, function( $m4is_rhfd ) { if ( substr( $m4is_rhfd, 0, 1 ) == '-' ) { return true; } }); $m4is_f4i9n = array_filter( $m4is_f4i9n, function( $m4is_rhfd ) { if ( $m4is_rhfd > 0 ) { return true; } }); $m4is_yta_se = array_map( 'abs', $m4is_yta_se ); $m4is_hm4l = is_array( $m4is_hm4l ) ? $m4is_hm4l : explode( ',', $m4is_hm4l );  if (! array_intersect( $m4is_hm4l, $m4is_yta_se ) ) { if ( array_intersect( $m4is_hm4l, $m4is_f4i9n ) ) { return true; } } return false; }  
function m4is_ww6ul($m4is_znf9, $m4is_sxfbjo = false) {  if ( ! m4is_o5aoir::m4is_du5icq() ) { return false; } if (! isset($m4is_sxfbjo['keap']['contact']['groups']) ) { $m4is_q4c_xa = isset($m4is_sxfbjo['memb_user']['user_id']) ? $m4is_sxfbjo['memb_user']['user_id'] : get_current_user_id(); if (user_can($m4is_q4c_xa, 'manage_options')) { return true; } } $m4is_ela6 = ''; $m4is__yvi5 = ''; if ($m4is_sxfbjo === false) { if ( m4is_lpl4d::m4is_bfi49('groups') == '') { $m4is_sxfbjo['keap']['contact']['groups'] = ''; $m4is_sxfbjo['memb_user']['GroupNames'] = ''; } else { $m4is_ela6 = m4is_lpl4d::m4is_bfi49('groups'); $m4is__yvi5 = $_SESSION['memb_user']['GroupNames']; } } else { $m4is_ela6 = isset($m4is_sxfbjo['keap']['contact']['groups']) ? $m4is_sxfbjo['keap']['contact']['groups'] : ''; $m4is__yvi5 = isset($m4is_sxfbjo['memb_user']['GroupNames']) ? $m4is_sxfbjo['memb_user']['GroupNames'] : ''; } if (empty($m4is_ela6) && strpos($m4is_znf9, '-') === false) { return false; } if (is_array($m4is_znf9) ) { $m4is_znf9 = trim(implode(',', $m4is_znf9), ','); } if ($m4is_znf9 === $m4is_ela6) { return true; } $m4is_in0ti = false; $m4is_znf9 = preg_replace(['/, */', '/ *,/'], ',', $m4is_znf9); $m4is_znf9 = preg_replace(['/^,/', '/,$/'], '', $m4is_znf9); $m4is_znf9 = trim($m4is_znf9); $m4is_o3mwus = array_filter(explode(',', strtolower(trim($m4is_znf9) ) ) ); $m4is_kj8x = implode(',', $m4is_o3mwus); $m4is_ela6 = array_filter(explode(',', $m4is_ela6) ); $m4is__yvi5 = array_filter(explode(',', strtolower($m4is__yvi5) ) ); $m4is_o1fdcl = []; $m4is_o62a = [];  foreach($m4is_o3mwus as $m4is_w9feq2) { if (substr($m4is_w9feq2, 0, 1) <> '-') { $m4is_o1fdcl[] = $m4is_w9feq2; } else { $m4is_o62a[] = substr($m4is_w9feq2, 1); } }  $m4is_c3ux = false; $m4is_w9jpgc = 0; if (count($m4is_o1fdcl) ) { $m4is_w9jpgc = count(array_intersect($m4is_o1fdcl, $m4is_ela6) ) + count(array_intersect($m4is_o1fdcl, $m4is__yvi5) ); $m4is_c3ux = (boolean) $m4is_w9jpgc; } else { $m4is_w9jpgc = 0; $m4is_c3ux = true; }  $m4is_hrn6a = false; $m4is_v2sk = 0; if (count($m4is_o62a) ) { $m4is_v2sk = count(array_intersect($m4is_o62a, $m4is_ela6) ) + count(array_intersect($m4is_o62a, $m4is__yvi5) ); $m4is_hrn6a = ! (boolean) $m4is_v2sk; } else { $m4is_v2sk = 0; $m4is_hrn6a = true; }  $m4is_in0ti = false; if (count($m4is_o1fdcl) ) { $m4is_in0ti = $m4is_in0ti || $m4is_c3ux; } if (count($m4is_o62a) ) { $m4is_in0ti = $m4is_in0ti || $m4is_hrn6a; } return $m4is_in0ti; }  
function m4is_p04z($m4is_znf9, $m4is_aicfp = false) {  if (empty($m4is_znf9) ) { return false; } if (! $m4is_aicfp) { $m4is_aicfp = m4is_lpl4d::m4is_a_2z(); }  if (! $m4is_aicfp) { if (current_user_can('manage_options') ) { return true; } return false; }  if (! m4is_o5aoir::m4is_du5icq() ) { return false; } if (! is_array($m4is_znf9) ) { $m4is_znf9 = explode(',', $m4is_znf9); } if ($m4is_aicfp == m4is_lpl4d::m4is_a_2z() ) { $m4is_ela6 = m4is_lpl4d::m4is_bfi49('groups'); $m4is__yvi5 = $_SESSION['memb_user']['GroupNames']; } else { $m4is_q4c_xa = m4is_zbyh::m4is__nfdz9($m4is_aicfp); if ($m4is_q4c_xa) { $m4is_sxfbjo = $this->m4is_q4nu($m4is_q4c_xa); $m4is_ela6 = $m4is_sxfbjo['keap']['contact']['groups']; $m4is__yvi5 = $m4is_sxfbjo['memb_user']['GroupNames']; } } if ($m4is_aicfp > 0) { $m4is_ela6 = explode(',', $m4is_ela6); $m4is__yvi5 = explode(',', strtolower($m4is__yvi5) ); foreach ($m4is_znf9 as $m4is_w9feq2) { if (substr($m4is_w9feq2, 0, 1) == '-') { $m4is_w9feq2 = strtolower(ltrim($m4is_w9feq2, '-') ); if (in_array($m4is_w9feq2, $m4is_ela6) || in_array($m4is_w9feq2, $m4is__yvi5) ) { return false; } } else { $m4is_w9feq2 = strtolower($m4is_w9feq2); if (! in_array($m4is_w9feq2, $m4is_ela6) && ! in_array($m4is_w9feq2, $m4is__yvi5) ) { return false; } } } return true; } return false; }    
function m4is_yy139k($m4is_aicfp) { global $wpdb; static $cached_affiliate_id = []; if (isset($cached_affiliate_id[$m4is_aicfp]) ) { return $cached_affiliate_id[$m4is_aicfp]; } if (empty($m4is_aicfp) ) { $m4is_aicfp = (int) m4is_lpl4d::m4is_a_2z(); } if ($m4is_aicfp < 1) { return 0; }  $m4is_aicfp = (int) $m4is_aicfp; $m4is_a8re = []; $m4is_qqzo = 1000; $m4is_zvxijt = 0; $m4is_u13x = 'Referral'; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr($m4is_u13x, false); $m4is_c_3n = 0;; $m4is_kc1q = [ 'ContactId' => $m4is_aicfp, ]; $m4is_hjx4 = $this->m4is_mmdrl('settings','referral_partner_order') == 1; do { $m4is_jpzyit = m4is_f84s3h::m4is_l2n5pg($m4is_u13x, (int) $m4is_qqzo, (int) $m4is_zvxijt, $m4is_kc1q, $m4is_hkp7s, 'Id', true); if (is_array($m4is_jpzyit) ) { foreach ($m4is_jpzyit as $m4is_wo7c93) { if (! isset($m4is_wo7c93['DateExpires']) || $m4is_wo7c93['DateExpires'] >= date( 'Ymd\T00:00:00' ) ) { $m4is_a8re[$m4is_wo7c93['Id']] = $m4is_wo7c93; } } $m4is_zvxijt++; $m4is_c_3n = $m4is_c_3n + count($m4is_jpzyit); } } while (count($m4is_jpzyit) == $m4is_qqzo); if ($m4is_hjx4) { $m4is_jeor = array_shift($m4is_a8re); } else { $m4is_jeor = array_pop($m4is_a8re); } unset($m4is_a8re, $m4is_jpzyit); $cached_affiliate_id[$m4is_aicfp] = isset($m4is_jeor['AffiliateId']) ? $m4is_jeor['AffiliateId'] : 0; return $cached_affiliate_id[$m4is_aicfp]; } 
function m4is_edes( int $m4is_aicfp, bool $m4is_fj79v = false ) : bool { global $wpdb; if ( empty( $m4is_aicfp ) ) { return false; } if ( wp_doing_ajax() ) { return false; } $m4is_qlyn = $this->m4is_mmdrl( 'settings', 'max_affiliate_age', 0 ); $m4is_q7m2 = $this->m4is_re5x( 'appname' ); $m4is_q4c_xa = m4is_zbyh::m4is__nfdz9( $m4is_aicfp ); $m4is_jbu6y = 'memberium/' . $m4is_q7m2 . '/affiliate/updated'; $m4is_hpgx6w = time(); $m4is_i8ic4 = 0;  if ( $m4is_qlyn && $m4is_fj79v == false ) { $m4is_du9f = $m4is_hpgx6w - (int) get_user_meta( $m4is_q4c_xa, $m4is_jbu6y, true ) - 30; if ( $m4is_du9f < $m4is_qlyn ) { return true; } } $m4is_zc6h5 = m4is__q5cn::m4is__21k( $m4is_aicfp ); if ( is_array ($m4is_zc6h5 ) ) { m4is__q5cn::m4is_yfyu2( $m4is_zc6h5 ); update_user_meta($m4is_q4c_xa, $m4is_jbu6y, $m4is_hpgx6w); return true; } return false;  } 
function m4is_gi0o($m4is_aicfp = 0) { global $wpdb; static $m4is_h826rd; if ( ! empty( $m4is_aicfp ) && isset( $m4is_h826rd[$m4is_aicfp] ) ) { return $m4is_h826rd[$m4is_aicfp]; } $m4is_ojcnt = $this->m4is_mmdrl(); $m4is_bd92x = $this->i2sdk_options; $m4is_qa4y = $this->m4is_mmdrl( 'settings', 'plaintext_db', false ); $m4is_jyx_t = $this->m4is_mmdrl( 'settings','password_field', '' ); $m4is_q7m2 = $this->m4is_re5x( 'appname' ); $m4is_aicfp = (int) $m4is_aicfp; $m4is_qqzo = 1000; $m4is_u13x = 'Affiliate'; $m4is_zvxijt = 0; $m4is__dxt_o = 'ContactId'; $m4is_v_fri = ( $m4is_aicfp > 0 ) ? (int) $m4is_aicfp : '%'; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr( $m4is_u13x, true ); $m4is_w6mt = MEMBERIUM_DB_AFFILIATES; $m4is_c_3n = 0; $m4is_h9ti6y = []; if ( $m4is_aicfp == 0 ) { $m4is_kc1q = [ 'ContactId' => '%' ]; } else { $m4is_kc1q = [ 'ContactId' => $m4is_aicfp ]; } do { $m4is_jpzyit = m4is_f84s3h::m4is_l2n5pg( $m4is_u13x, $m4is_qqzo, $m4is_zvxijt, $m4is_kc1q, $m4is_hkp7s, 'Id', true ); if ( is_array( $m4is_jpzyit ) && ! empty( $m4is_jpzyit ) ) { $m4is_dhrs = []; $m4is_o1af2 = []; foreach ($m4is_jpzyit as $m4is_wo7c93) { $m4is_wo7c93['!LastUpdated'] = time(); $m4is_b40e_m = (int) $m4is_wo7c93['Id']; $m4is_h9ti6y[] = $m4is_b40e_m; $m4is_kbu63_[] = []; foreach ( $m4is_wo7c93 as $m4is_ap3_ => $m4is_rhfd ) { if ( $m4is_qa4y ) { $m4is_rhfd = remove_accents( $m4is_rhfd );  } $m4is_rhfd = $m4is_rhfd == 'null' ? '' : $m4is_rhfd; $m4is_o1af2[] = $wpdb->prepare( '(%d, %s, %s, %s)', $m4is_b40e_m, $m4is_q7m2, $m4is_ap3_, $m4is_rhfd ); $m4is_kbu63_[] = $m4is_ap3_; $m4is_rhfd = ( $m4is_ap3_ != $m4is_jyx_t ) ? wp_strip_all_tags( $m4is_rhfd ) : $m4is_rhfd; } } $m4is_ioxk = "INSERT INTO {$m4is_w6mt} (id, appname, fieldname, value) VALUES " . implode(',', $m4is_o1af2) . " ON DUPLICATE KEY UPDATE id=VALUES(id), appname=VALUES(appname), fieldname=VALUES(fieldname), value=VALUES(value);"; $wpdb->query($m4is_ioxk); $m4is_zvxijt++; $m4is_c_3n = $m4is_c_3n + count($m4is_jpzyit); } } while (is_array($m4is_jpzyit) && count($m4is_jpzyit) == $m4is_qqzo); if (! empty($m4is_h9ti6y) ) { $m4is_ioxk = "DELETE FROM {$m4is_w6mt} WHERE `appname` = '{$m4is_q7m2}' AND `id` NOT IN (" . implode(',', $m4is_h9ti6y) . ");"; $wpdb->query($m4is_ioxk); } if ($m4is_aicfp == 0) {   set_transient('memberium_affiliates_updated', time() ); } $m4is_h826rd[$m4is_aicfp] = $m4is_c_3n; return $m4is_c_3n; } 
function m4is__ow7x2() { global $wpdb; } 
function m4is_xtczsh( $m4is_fdmw5, $m4is_dj0xf = '', $m4is_vcplah = '' ) { $m4is_fdmw5 = (int) $m4is_fdmw5; $m4is_ioxk = prepare('SELECT count(id) FROM `' . MEMBERIUM_DB_INVOICES . '` WHERE affiliateid = %d ', $m4is_fdmw5); $m4is_cmciq9 = (int) strtotime($m4is_dj0xf); $m4is_pgpnt = (int) strtotime($m4is_vcplah); if ($m4is_dj0xf) { $m4is_ioxk .= $wpdb->prepare( 'AND datecreated >= %s ', date( 'Y-m-d h:i:s', $m4is_cmciq9 ) ); } if ($m4is_vcplah) { $m4is_ioxk .= $wpdb->prepare( 'AND datecreated <= %s ', date('Y-m-d h:i:s', $m4is_pgpnt ) ); } }    
function m4is_m92l( $m4is_w5ky4q ) { $m4is_p78sgz = [ 'format' => 'serial', 'invoice_id' => 0, 'contact_id' => $this->m4is_w47qdy(), ]; $m4is_w5ky4q = wp_parse_args( $m4is_w5ky4q, $m4is_p78sgz ); $m4is_zcyj = (int) $m4is_w5ky4q['invoice_id']; $m4is_aicfp = (int) $m4is_w5ky4q['contact_id']; $m4is_mr7hxo = strtolower( trim( $m4is_w5ky4q['format'] ) ); $m4is_q7m2 = $this->m4is_re5x( 'appname' ); $m4is_t7i0bz = 'Memberium:' . $m4is_q7m2 . '::Receipt:' . $m4is_zcyj . '::Contact:' . $m4is_aicfp;  $m4is_gv_h = get_transient( $m4is_t7i0bz ); if ($m4is_gv_h === false) { if ($m4is_zcyj) {  $m4is_u13x = 'Invoice'; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr( $m4is_u13x, false ); $m4is_ra9j4 = m4is_f84s3h::m4is__5wbje( $m4is_u13x, (int) $m4is_zcyj, $m4is_hkp7s ); if ( ! $this->m4is_fop0d() ) { if ( isset($m4is_ra9j4['ContactId']) && $m4is_ra9j4['ContactId'] == $m4is_aicfp) { $m4is_zcyj = empty($m4is_ra9j4['Id']) ? 0 : (int) $m4is_ra9j4['Id']; $m4is_ccru2k = empty($m4is_ra9j4['JobId']) ? 0 : (int) $m4is_ra9j4['JobId']; } else { $m4is_zcyj = 0; } } if ($m4is_zcyj) { $m4is_gv_h['invoice'] = array_change_key_case($m4is_ra9j4, CASE_LOWER); $m4is_gv_h['invoice']['totaldue'] = $m4is_gv_h['invoice']['totaldue']; $m4is_gv_h['invoice']['invoicetotal'] = $m4is_gv_h['invoice']['invoicetotal']; $m4is_gv_h['invoice']['totalpaid'] = $m4is_gv_h['invoice']['totalpaid'];  $m4is_gv_h['contact'] = m4is_zbyh::m4is_w1bfmt($m4is_aicfp, true);  if ($m4is_ccru2k) { $m4is_u13x = 'Job'; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr($m4is_u13x, false); $m4is_da5x = $this->m4is_wnlbj_()->dsLoad($m4is_u13x, (int) $m4is_ccru2k, $m4is_hkp7s); if (is_array($m4is_da5x) ) { $m4is_gv_h['job'] = array_change_key_case($m4is_da5x, CASE_LOWER); }  $m4is_u13x = 'OrderItem'; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr($m4is_u13x, false); $m4is_qqzo = 1000; $m4is_zvxijt = 0; $m4is_kc1q = ['OrderId' => $m4is_ccru2k]; $m4is_b2iv = 'Id'; $m4is_hjx4 = true; $m4is__evi = m4is_f84s3h::m4is_l2n5pg($m4is_u13x, $m4is_qqzo, $m4is_zvxijt, $m4is_kc1q, $m4is_hkp7s, $m4is_b2iv, $m4is_hjx4); if (is_array($m4is__evi) ) { foreach($m4is__evi as $m4is_ap3_ => $m4is_rhfd) { $m4is__evi[$m4is_ap3_] = array_change_key_case($m4is_rhfd, CASE_LOWER); $m4is__evi[$m4is_ap3_]['ppu'] = $m4is__evi[$m4is_ap3_]['ppu']; $m4is__evi[$m4is_ap3_]['cpu'] = $m4is__evi[$m4is_ap3_]['cpu']; } $m4is_gv_h['orderitems'] = $m4is__evi; } }  $m4is_u13x = 'InvoiceItem'; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr($m4is_u13x, false); $m4is_qqzo = 1000; $m4is_zvxijt = 0; $m4is_kc1q = ['InvoiceId' => $m4is_zcyj]; $m4is_b2iv = 'Id'; $m4is_hjx4 = true; $m4is__evi = m4is_f84s3h::m4is_l2n5pg($m4is_u13x, $m4is_qqzo, $m4is_zvxijt, $m4is_kc1q, $m4is_hkp7s, $m4is_b2iv, $m4is_hjx4); if (is_array($m4is__evi) ) { foreach($m4is__evi as $m4is_ap3_ => $m4is_rhfd) { $m4is__evi[$m4is_ap3_] = array_change_key_case($m4is_rhfd, CASE_LOWER); $m4is__evi[$m4is_ap3_]['ppu'] = $m4is__evi[$m4is_ap3_]['ppu']; $m4is__evi[$m4is_ap3_]['cpu'] = $m4is__evi[$m4is_ap3_]['cpu']; $m4is__evi[$m4is_ap3_]['invoiceamt'] = $m4is__evi[$m4is_ap3_]['invoiceamt']; } $m4is_gv_h['invoiceitems'] = $m4is__evi; }  $m4is_u13x = 'Payment'; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr($m4is_u13x, false); $m4is_qqzo = 1000; $m4is_zvxijt = 0; $m4is_kc1q = ['InvoiceId' => $m4is_zcyj]; $m4is_b2iv = 'Id'; $m4is_hjx4 = true; $m4is_vehmxp = m4is_f84s3h::m4is_l2n5pg($m4is_u13x, $m4is_qqzo, $m4is_zvxijt, $m4is_kc1q, $m4is_hkp7s, $m4is_b2iv, $m4is_hjx4); $m4is_xu_5 = 0; if (is_array($m4is_vehmxp) ) { foreach($m4is_vehmxp as $m4is_ap3_ => $m4is_rhfd) { $m4is_vehmxp[$m4is_ap3_] = array_change_key_case($m4is_rhfd, CASE_LOWER); $m4is_vehmxp[$m4is_ap3_]['payamt'] = $m4is_vehmxp[$m4is_ap3_]['payamt']; } $m4is_gv_h['payments'] = $m4is_vehmxp; } if ($m4is_ra9j4['TotalPaid'] < $m4is_ra9j4['InvoiceTotal']) {  $m4is_u13x = 'PayPlan'; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr($m4is_u13x, false); $m4is_qqzo = 1000; $m4is_zvxijt = 0; $m4is_kc1q = ['InvoiceId' => $m4is_zcyj]; $m4is_b2iv = 'Id'; $m4is_hjx4 = true; $m4is_v2jy0 = m4is_f84s3h::m4is_l2n5pg($m4is_u13x, $m4is_qqzo, $m4is_zvxijt, $m4is_kc1q, $m4is_hkp7s, $m4is_b2iv, $m4is_hjx4); if (is_array($m4is_v2jy0) ) { foreach($m4is_v2jy0 as $m4is_ap3_ => $m4is_rhfd) { $m4is_v2jy0[$m4is_ap3_] = array_change_key_case($m4is_rhfd, CASE_LOWER); $m4is_v2jy0[$m4is_ap3_]['amtdue'] = $m4is_v2jy0[$m4is_ap3_]['amtdue']; $m4is_v2jy0[$m4is_ap3_]['firstpayamt'] = $m4is_v2jy0[$m4is_ap3_]['firstpayamt']; } $m4is_gv_h['paymentplan'] = $m4is_v2jy0[0]; }  $m4is_u13x = 'PayPlanItem'; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr($m4is_u13x, false); $m4is_qqzo = 1000; $m4is_zvxijt = 0; $m4is_kc1q = ['PayPlanId' => $m4is_v2jy0[0]['id'] ]; $m4is_b2iv = 'Id'; $m4is_hjx4 = true; $m4is_uwqb = m4is_f84s3h::m4is_l2n5pg($m4is_u13x, $m4is_qqzo, $m4is_zvxijt, $m4is_kc1q, $m4is_hkp7s, $m4is_b2iv, $m4is_hjx4); if (is_array($m4is_uwqb) ) { foreach($m4is_uwqb as $m4is_ap3_ => $m4is_rhfd) { $m4is_uwqb[$m4is_ap3_] = array_change_key_case($m4is_rhfd, CASE_LOWER); } $m4is_gv_h['paymentplanitems'] = $m4is_uwqb; } } } } } set_transient( $m4is_t7i0bz, $m4is_gv_h, HOUR_IN_SECONDS * 3 ); if ( $m4is_mr7hxo == 'json' ) { $m4is_gv_h = json_encode( $m4is_gv_h ); } return $m4is_gv_h; } 
function m4is_w1e0wk($m4is_aicfp, $m4is_biwz3l = true, $m4is_a38jb = true, $m4is_qr_0k = false) { $m4is_aicfp = (int) $m4is_aicfp; if ($m4is_aicfp < 1) { return []; } $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_t7i0bz = 'Memberium::' . $m4is_q7m2 . '::Invoices::' . $m4is_aicfp; $m4is_w1agy = []; if (! $m4is_qr_0k) { $m4is_jpzyit = get_transient($m4is_t7i0bz); } if (empty($m4is_w1agy) ) { $m4is_hjx4 = true; $m4is_b2iv = 'DateCreated'; $m4is_kc1q = [ 'ContactId' => (int) $m4is_aicfp ]; $m4is_hkp7s = [ 'Id', 'CreditStatus', 'DateCreated', 'Description', 'InvoiceTotal', 'InvoiceType', 'JobId', 'PayPlanStatus', 'PayStatus', 'ProductSold', 'RefundStatus', 'TotalDue', 'TotalPaid', ]; $m4is_jpzyit = m4is_f84s3h::m4is_l2n5pg('Invoice', 1000, 0, $m4is_kc1q, $m4is_hkp7s, $m4is_b2iv, $m4is_hjx4); set_transient($m4is_t7i0bz, $m4is_jpzyit, 1800); } foreach($m4is_jpzyit as $m4is_wo7c93) { $m4is_n8pnxq = false; $m4is_b40e_m = $m4is_wo7c93['Id']; $m4is_lxb6q4 = max($m4is_wo7c93['TotalDue'], $m4is_wo7c93['InvoiceTotal']); $m4is_n8pnxq = $m4is_wo7c93['TotalPaid'];  $m4is_wo7c93['!payment_due'] = $m4is_lxb6q4 - $m4is_n8pnxq; $m4is_n8pnxq = $m4is_wo7c93['!payment_due'] == 0; if ( $m4is_biwz3l && empty( $m4is_wo7c93['!payment_due'] ) ) { $m4is_w1agy[$m4is_b40e_m] = $m4is_wo7c93;  } if ($m4is_a38jb && (! empty($m4is_wo7c93['!payment_due']) ) ) { $m4is_w1agy[$m4is_b40e_m] = $m4is_wo7c93; } } return $m4is_w1agy; } 
function m4is_c7_8($m4is_zcyj = 0) { $m4is_zcyj = (int) $m4is_zcyj; if ($m4is_zcyj < 1) { return []; } $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_t7i0bz = "Memberium::{$m4is_q7m2}::Invoice::{$m4is_zcyj}"; $m4is_w1agy = []; $m4is_jpzyit = get_transient($m4is_t7i0bz); if (empty($m4is_jpzyit) ) { $m4is_w1agy = $this->m4is_w1e0wk($m4is_aicfp, true, true); } if (empty($m4is_jpzyit) ) { $m4is_hjx4 = true; $m4is_b2iv = 'DateCreated'; $m4is_kc1q = [ 'ContactId' => (int) $m4is_aicfp ]; $return_fields = [ 'Id', 'CreditStatus', 'DateCreated', 'Description', 'InvoiceTotal', 'InvoiceType', 'PayPlanStatus', 'PayStatus', 'ProductSold', 'RefundStatus', 'TotalDue', 'TotalPaid', ]; $m4is_jpzyit = m4is_f84s3h::m4is_l2n5pg('Invoice', 1000, 0, $m4is_kc1q, $return_fields, $m4is_b2iv, $m4is_hjx4); set_transient($m4is_t7i0bz, $m4is_jpzyit, 1800); } foreach ($m4is_jpzyit as $m4is_wo7c93) { if ($m4is_biwz3l && $m4is_wo7c93['PayStatus'] == 1) { $m4is_w1agy[$m4is_wo7c93['Id']] = $m4is_wo7c93; $m4is_w1agy[$m4is_wo7c93['Id']]['!amountdue'] = 0; $m4is_w1agy[$m4is_wo7c93['Id']]['!amountpaid'] = $m4is_wo7c93['TotalPaid']; } if ($unpaid && $m4is_wo7c93['InvoiceTotal'] > $m4is_wo7c93['TotalPaid']) { $m4is_w1agy[$m4is_wo7c93['Id']] = $m4is_wo7c93; $m4is_w1agy[$m4is_wo7c93['Id']]['!payplan'] = m4is_vvgc8::m4is_vksg( (int) $m4is_wo7c93['Id']); $m4is_w1agy[$m4is_wo7c93['Id']]['!payplanitems'] = m4is_vvgc8::m4is_vjtd7( (int) $m4is_w1agy[$m4is_wo7c93['Id']]['!payplan']['Id']); foreach ($m4is_w1agy[$m4is_wo7c93['Id']]['!payplanitems'] as $payplanitem) { if (isset($payplanitem['AmtDue']) && $payplanitem['AmtDue'] > 0) { $m4is_w1agy[$m4is_wo7c93['Id']]['!amountdue'] = $payplanitem['AmtDue']; $m4is_w1agy[$m4is_wo7c93['Id']]['!amountpaid'] = $payplanitem['AmtPaid']; break; } else { } } } } return $m4is_w1agy; } 
function m4is_pn3cs($m4is_ccru2k = 0) { $m4is_ccru2k = (int) $m4is_ccru2k; if ($m4is_ccru2k < 1) { return []; } $m4is_kc1q = ['JobId' => $m4is_ccru2k]; $m4is_u13x = 'Invoice'; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr($m4is_u13x); $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_w1agy = m4is_f84s3h::m4is_l2n5pg($m4is_u13x, 1, 0, $m4is_kc1q, $m4is_hkp7s); $m4is_ra9j4 = []; if (is_array($m4is_w1agy) && isset($m4is_w1agy[0]) ) { $m4is_ra9j4 = (is_array($m4is_w1agy) && isset($m4is_w1agy[0]) ) ? $m4is_w1agy[0] : []; $m4is_t7i0bz = "Memberium::{$m4is_q7m2}::Invoice::{$m4is_ra9j4['Id']}"; set_transient($m4is_t7i0bz, $m4is_ra9j4, 1800); } return $m4is_ra9j4; } 
function m4is_nisz() { $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_t7i0bz = 'Memberium::' . $m4is_q7m2 . '::SubscriptionPlans'; $m4is_muiqev = get_transient($m4is_t7i0bz); if (empty($m4is_muiqev) ) { $m4is_muiqev = m4is_vvgc8::m4is_d9auv(); } return $m4is_muiqev; } 
function m4is_houdcg($m4is_ccru2k = 0) { if ($m4is_ccru2k == 0) { return FALSE; } $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_ccru2k = (int) $m4is_ccru2k; $m4is_t7i0bz = "Memberium::{$m4is_q7m2}::OrderItems::{$m4is_ccru2k}"; $m4is_lakfd7 = get_transient($m4is_t7i0bz); if (! empty($m4is_lakfd7) ) { return $m4is_lakfd7; } unset($m4is_lakfd7); $m4is_u13x = 'OrderItem'; $m4is_kc1q = ['OrderId' => $m4is_ccru2k]; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr($m4is_u13x); $m4is_lakfd7 = m4is_f84s3h::m4is_yt5p0l($m4is_u13x, 1000, 0, $m4is_kc1q, $m4is_hkp7s); if (! empty($m4is_lakfd7) ) { if (is_array($m4is_lakfd7) ) { set_transient($m4is_t7i0bz, $m4is_lakfd7, 1800); return $m4is_lakfd7; } } return FALSE; } 
function m4is_u6sg($m4is_aicfp = 0, $m4is_qr_0k = false) { if ($m4is_aicfp == 0) { $m4is_aicfp = $this->m4is_w47qdy(); } $m4is_t7i0bz = 'memberium_subscriptions::' . $m4is_aicfp; $m4is_uke5g = get_transient($m4is_t7i0bz); if ($m4is_uke5g === false || $m4is_qr_0k) { $m4is_kc1q = ['ContactId' => $m4is_aicfp]; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr('RecurringOrder'); $m4is_b2iv = 'Id'; $m4is_hjx4 = false; $m4is_jpzyit = m4is_f84s3h::m4is_l2n5pg('RecurringOrder', 999, 0, $m4is_kc1q, $m4is_hkp7s, $m4is_b2iv, $m4is_hjx4); if (is_array($m4is_jpzyit) && ! empty($m4is_jpzyit) ) { foreach ($m4is_jpzyit as $m4is_wo7c93) { $m4is_uke5g[$m4is_wo7c93['Id']] = $m4is_wo7c93; } } set_transient($m4is_t7i0bz, $m4is_uke5g, HOUR_IN_SECONDS / 12); unset($m4is_jpzyit, $m4is_wo7c93, $m4is_hkp7s, $m4is_kc1q); } if (is_array($m4is_uke5g) ) { foreach($m4is_uke5g as $m4is_e3k_mi => $m4is_waxrhu) { if (! empty($m4is_waxrhu['EndDate']) && $m4is_waxrhu['Status'] == 'Active' && $m4is_waxrhu['EndDate'] < date( 'Ymd' ) ) { $m4is_waxrhu['Status'] = 'Inactive'; } if ($m4is_waxrhu['Status'] <> 'Active') { $m4is_waxrhu['NextBillDate'] = ''; } $m4is_uke5g[$m4is_e3k_mi] = $m4is_waxrhu; } } return $m4is_uke5g; } 
function m4is_g28l($m4is_aicfp = 0) { global $wpdb; $m4is_w6mt = MEMBERIUM_DB_INVOICES; $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_ioxk = "SELECT MAX(`jobid`) FROM `{$m4is_w6mt}` WHERE `appname` = '{$m4is_q7m2}' AND `contactid` = {$m4is_aicfp};"; return (int) $wpdb->get_var($m4is_ioxk); } 
function m4is_wy4j3() { global $wpdb; $m4is_w6mt = MEMBERIUM_DB_INVOICES; $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_ioxk = "SELECT MAX(`jobid`) FROM `{$m4is_w6mt}` WHERE `appname` = '{$m4is_q7m2}';"; return (int) $wpdb->get_var($m4is_ioxk); } 
function m4is_t8rb6() { global $wpdb; $m4is_w6mt = MEMBERIUM_DB_INVOICES; $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_ioxk = "SELECT MAX(`datecreateed`) FROM `{$m4is_w6mt}` WHERE `appname` = '{$m4is_q7m2}';"; return strtotime($wpdb->get_var($m4is_ioxk) ); } 
function m4is_rb4l($m4is_aicfp = false) { global $wpdb; if (! $m4is_aicfp) { $m4is_aicfp = $this->m4is_w47qdy(); } $m4is_t7i0bz = "memberium_jobs::{$m4is_aicfp}"; $m4is_icdqo = get_transient($m4is_t7i0bz); $m4is_icdqo = false; if ($m4is_icdqo === false) { $m4is_ojcnt = $this->m4is_mmdrl(); $m4is_bd92x = $this->i2sdk_options; $m4is_w6mt = MEMBERIUM_DB_JOBS; $m4is_u13x = 'Job'; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr($m4is_u13x, false); $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_qqzo = 1000; $m4is_zvxijt = 0; $m4is_c_3n = 0; $m4is_icdqo = []; $m4is_kc1q = ['ContactId' => (int) $m4is_aicfp]; do { $m4is_jpzyit = m4is_f84s3h::m4is_l2n5pg($m4is_u13x, $m4is_qqzo, $m4is_zvxijt, $m4is_kc1q, $m4is_hkp7s, 'Id', true); if (is_array($m4is_jpzyit) ) { foreach($m4is_jpzyit as $m4is_wo7c93) { $m4is_icdqo[$m4is_wo7c93['Id']] = $m4is_wo7c93; } } $m4is_zvxijt++; } while (count($m4is_jpzyit) == $m4is_qqzo); $m4is_c_3n = count($m4is_icdqo); if ($m4is_c_3n) { set_transient($m4is_t7i0bz, $m4is_icdqo, HOUR_IN_SECONDS); } else { set_transient($m4is_t7i0bz, $m4is_icdqo, 300); } } $m4is_c_3n = count($m4is_icdqo); return $m4is_icdqo; }  
function m4is_e39uf($m4is_rxc9n1) { $m4is_fqo6 = strtolower(substr($m4is_rxc9n1['bypass_commissions'], 0, 1) ); $m4is_fqo6 = ($m4is_fqo6 == 'y' || $m4is_fqo6 == 1) ? TRUE : FALSE; $m4is_fqo6 = (bool) $m4is_rxc9n1['bypass_commissions']; $m4is_kz8cpj = strtolower(substr($m4is_rxc9n1['delete_failed'], 0, 1) ); $m4is_kz8cpj = ($m4is_kz8cpj == 'y' || $m4is_kz8cpj == 1) ? TRUE : FALSE; $m4is_vz8cu = (int) $m4is_rxc9n1['product_type']; $m4is_vz8cu = ($m4is_rxc9n1['product_type'] > 0 && $m4is_rxc9n1['product_type'] < 15) ? $m4is_rxc9n1['product_type'] : 4; $m4is__qs0x = (bool) $m4is_rxc9n1['autorun']; $m4is__dxr0 = (int) $m4is_rxc9n1['creditcard_id']; $m4is_kz8cpj = (bool) $m4is_rxc9n1['delete_failed']; $m4is_vz8cu = (int) $m4is_rxc9n1['item_type']; $m4is_c1lsgt = (int) $m4is_rxc9n1['lead_affiliate_id']; $m4is_qkiet = (int) $m4is_rxc9n1['merchant_id']; $m4is_sdob0 = (int) $m4is_rxc9n1['product_id']; $m4is_ffak2q = trim($m4is_rxc9n1['product_description']); $m4is_h6b1eo = (float) $m4is_rxc9n1['product_price']; $m4is_r3zgrq = (int) $m4is_rxc9n1['quantity']; $m4is_f9idn = (int) $m4is_rxc9n1['sales_affiliate_id']; $m4is_ukyj6 = (int) $m4is_rxc9n1['has_payment_plan']; $m4is_amo0 = $m4is_rxc9n1['order_date']; $m4is_lp4cx8 = (bool) $m4is_rxc9n1['taxable']; $m4is_izovfq = trim($m4is_rxc9n1['success_action']); $m4is_f685f = trim($m4is_rxc9n1['success_goals']); $m4is_q5hk = trim($m4is_rxc9n1['success_tags']); $m4is_fh10gz = trim($m4is_rxc9n1['fail_action']); $m4is_bq1c = trim($m4is_rxc9n1['fail_goals']); $m4is_stil = trim($m4is_rxc9n1['fail_tags']); if ($m4is_ukyj6) { $m4is_fyj9l = (bool) $m4is_rxc9n1['payplan_autocharge']; $m4is_lm96 = (int) $m4is_rxc9n1['payplan_max_retries']; $m4is_cfj8v_ = (int) $m4is_rxc9n1['payplan_retry_days']; $m4is_zmkr = (float) $m4is_rxc9n1['payplan_initial_amount']; $m4is_w1fsk = (int) $m4is_rxc9n1['payplan_payment_count']; $m4is_kplw = (int) $m4is_rxc9n1['payplan_days_between']; }  $m4is_amo0 = date( 'Y-m-d\TH:i:s' ); $m4is_zcyj = $this->m4is_wnlbj_()->blankOrder($m4is_aicfp, $m4is_ffak2q, $m4is_amo0, $m4is_c1lsgt, $m4is_f9idn); $this->m4is_wnlbj_()->addOrderItem($m4is_zcyj, $m4is_sdob0, $m4is_vz8cu, $m4is_h6b1eo, $m4is_r3zgrq, $product_name, $m4is_ffak2q); if ($m4is_ukyj6) { $m4is_w2nemj = $app->infuDate("10-11-2008"); $m4is_pbvw = $app->infuDate("10-25-2008"); $m4is_n_bp6 = $app->payPlan($m4is_zcyj, $m4is_fyj9l, $m4is__dxr0, $m4is_qkiet, $m4is_cfj8v_, $m4is_lm96, $m4is_zmkr, $payplan_initial_date, $payplan_startdate, $m4is_w1fsk, $m4is_kplw); } if ($m4is_lp4cx8) { $ret = $this->m4is_wnlbj_()->recalculateTax($m4is_zcyj); } $m4is_n_bp6 = $this->m4is_wnlbj_()->chargeInvoice($m4is_zcyj, 'Memberium API Order', $m4is__dxr0, $m4is_qkiet, false ); if (in_array(strtolower($m4is_n_bp6['Code']), ['approved', 'skipped']) ) {  $m4is_n_bp6 = $m4is_zcyj; if ($success_action > '') { $this->m4is_evrbh($m4is_izovfq, $m4is_aicfp); } if ($success_goals > '') { $this->m4is_rctzo($m4is_f685f, $m4is_aicfp); } if ($success_tags > '') { $this->m4is__mkz($m4is_q5hk, $m4is_aicfp); } } else { if ($m4is_kz8cpj && $m4is_zcyj > 0) { $this->m4is_wnlbj_()->deleteInvoice($m4is_zcyj); }  if ($m4is_fh10gz > '') { $this->m4is_evrbh($fail_action, $m4is_aicfp); } if ($m4is_bq1c > '') { $this->m4is_rctzo($fail_goals, $m4is_aicfp); } if ($m4is_stil > '') { $this->m4is__mkz($fail_tags, $m4is_aicfp); } $m4is_n_bp6 = false; } $this->m4is_qjrxkl($m4is_aicfp); } 
function m4is_sp6w($m4is_tct_hk) { $m4is_o2td = false; $m4is_fdmw5 = (int) $m4is_tct_hk['affiliate_id']; $m4is_aicfp = (int) $m4is_tct_hk['contact_id']; $m4is__dxr0 = (int) $m4is_tct_hk['creditcard_id']; $m4is_d30k = (boolean) $m4is_tct_hk['delete_failures']; $m4is_qkiet = (int) $m4is_tct_hk['merchant_id']; $m4is_z2ra_ = (int) $m4is_tct_hk['plan_id']; $m4is_rz4w = (double) $m4is_tct_hk['price']; $m4is_r3zgrq = (int) $m4is_tct_hk['quantity']; $m4is_lp4cx8 = (boolean) $m4is_tct_hk['taxable']; $m4is_w1yzt = (int) $m4is_tct_hk['trial_days']; if ($m4is_aicfp < 1 || $m4is_z2ra_ < 1 || $m4is_r3zgrq < 1 || $m4is_qkiet < 1 || $m4is__dxr0 < 1 || $m4is_rz4w < 0 || $m4is_rvmb < 0 || $m4is_nbvo0 < 0) { $m4is_qwab = false; } else { $m4is_qwab = true; } if ($m4is_qwab) { $m4is_jc9gya = (int) $this->m4is_wnlbj_()->addRecurringAdv($m4is_aicfp, $m4is_z2ra_, $m4is_r3zgrq, $m4is_rz4w, $m4is_lp4cx8, $m4is_qkiet, $m4is__dxr0, $m4is_fdmw5, $m4is_w1yzt); if ($m4is_jc9gya > 0) { if ($m4is_w1yzt == 0) { $m4is_zcyj = $this->m4is_wnlbj_()->recurringInvoice($m4is_jc9gya); $m4is_n_bp6 = $this->m4is_wnlbj_()->chargeInvoice($m4is_zcyj, 'Memberium Subscription Payment', $m4is__dxr0, $m4is_qkiet, false); if (in_array(strtolower($m4is_n_bp6['Code']), ['approved', 'skipped'] ) ) { $m4is_o2td = true; } else { if ($m4is_d30k) { $this->m4is_wnlbj_()->deleteSubscription($m4is_jc9gya); } } } else { $m4is_o2td = true; } } } else { } if (! $m4is_o2td) { return false; } else { return $m4is_jc9gya; } }     
function m4is_qv5mn( $m4is_r4za, $m4is_q4c_xa = false, $m4is_adiq = false ) { if ( empty( $m4is_r4za ) ) { return; } if (! m4is_o5aoir::m4is__qlbej() ) { return; } if (! is_array($m4is_r4za) ) { $m4is_r4za = array_filter( explode( ',', trim( $m4is_r4za ) ) ); } $m4is_r4za = array_filter(array_map('strtolower', $m4is_r4za) ); if ( empty( $m4is_r4za ) ) { return; } if (! $m4is_q4c_xa) { $m4is_q4c_xa = get_current_user_id(); } if ($m4is_q4c_xa < 1) { return; } $m4is_c3lvq = get_user_meta($m4is_q4c_xa, 'memberium_tokens', true); if (! $m4is_c3lvq) { $m4is_c3lvq = []; } $m4is_c3lvq = array_filter(array_map('strtolower', $m4is_c3lvq) ); foreach ($m4is_r4za as $m4is_uhmj6v) { if (substr($m4is_uhmj6v, 0, 1) === '-') { $m4is_uhmj6v = substr($m4is_uhmj6v, 1); $m4is_ap3_ = array_search($m4is_uhmj6v, $m4is_c3lvq); unset($m4is_c3lvq[$m4is_ap3_]); do_action('memb_remove_token', $m4is_q4c_xa, $m4is_uhmj6v); } else { $m4is_c3lvq[] = $m4is_uhmj6v; do_action('memb_add_token', $m4is_q4c_xa, $m4is_uhmj6v); } } $m4is_c3lvq = array_unique($m4is_c3lvq); update_user_meta($m4is_q4c_xa, 'memberium_tokens', $m4is_c3lvq); } 
function m4is_wceaq($m4is_r4za, $m4is_q4c_xa = false) { if (current_user_can('manage_options') ) { return true; }  if (! m4is_o5aoir::m4is__qlbej() ) { return false; } if (! $m4is_q4c_xa) { $m4is_q4c_xa = get_current_user_id(); } if ($m4is_q4c_xa < 1) { return; } $m4is_r4za = array_filter(array_map('strtolower', explode(',', trim($m4is_r4za) ) ) ); $m4is_c3lvq = get_user_meta($m4is_q4c_xa, 'memberium_tokens', true); if (! $m4is_c3lvq) { $m4is_c3lvq = []; } $m4is_c3lvq = array_filter(array_map('strtolower', $m4is_c3lvq) ); if (count(array_intersect($m4is_r4za, $m4is_c3lvq) ) ) { return true; } return false; }    
function m4is_jxy4gf( $m4is_k4nl_, $m4is_xfv5nd = 0, $m4is_ivm3qw = '' ) { $m4is_k4nl_ = trim( $m4is_k4nl_ ); if ( empty( $m4is_k4nl_ ) ) { return FALSE; } $m4is_bfkn = [ 'GroupCategoryId' => $m4is_xfv5nd, 'GroupDescription' => $m4is_ivm3qw, 'GroupName' => $m4is_k4nl_ ]; $m4is_qxtoe = m4is_f84s3h::m4is_y3qvg('ContactGroup', $m4is_bfkn); if ( $m4is_qxtoe > 0 ) { global $wpdb; $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_ioxk = 'INSERT INTO `' . MEMBERIUM_DB_TAGS . '` (`id`, `appname`, `name`, `category`) VALUES (%d, %s, %s, %s);'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_qxtoe, $m4is_q7m2, $m4is_k4nl_, $m4is_xfv5nd); $wpdb->query($m4is_ioxk); return $m4is_qxtoe; } return FALSE; } 
function m4is_du9qi($m4is_js7k = false) { global $wpdb;  $m4is_ioxk = 'SELECT `name`, `id` FROM `' . MEMBERIUM_DB_TAGS . '` WHERE `appname` = %s ORDER BY `name`;'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $this->m4is_re5x('appname') ); $m4is_znf9 = $wpdb->get_results($m4is_ioxk, ARRAY_N); $m4is_brphsl = []; if (is_array($m4is_znf9) ) { foreach($m4is_znf9 as $m4is_w9feq2) { $m4is_brphsl[] = trim($m4is_w9feq2[0]) . ' (' . $m4is_w9feq2[1] . ')'; if ($m4is_js7k) { $m4is_brphsl[] = '-' . trim($m4is_w9feq2[0]) . ' (' . $m4is_w9feq2[1] . ')'; } } } return $m4is_brphsl; } 
function m4is_hodysq($m4is_k4nl_) { $m4is_k4nl_ = trim($m4is_k4nl_); if ( (int) $m4is_k4nl_ > 0) { return $m4is_k4nl_; } if ($m4is_k4nl_ == '') { return false; } global $wpdb;  $m4is_ioxk = 'SELECT `id` FROM `' . MEMBERIUM_DB_TAGS . '` WHERE `id` > 0 AND `appname` = %s AND `name` = %s ORDER BY `id` LIMIT 1;'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $this->m4is_re5x('appname'), $m4is_k4nl_); $m4is_qxtoe = (int) $wpdb->get_var($m4is_ioxk); if ($m4is_qxtoe > 0) { return $m4is_qxtoe; } else { return false; } }  
function m4is_d1y9($m4is_lphf, $m4is_sc3p){ $m4is_fdf0v = $this->m4is_mmdrl('memberships'); $m4is_fdf0v = is_array($m4is_fdf0v) ? $m4is_fdf0v : []; return $m4is_fdf0v; }  
function m4is_zuw6j4($m4is_lphf, $m4is_sc3p){ $m4is_fnc39 = []; $m4is_js7k = ( $m4is_sc3p === 'oxygen' ) ? false : true; $m4is_znf9 = $this->m4is_ee0h(true, $m4is_js7k); $i = ($m4is_js7k) ? 'hn' : 'mc'; $m4is_znf9 = (isset($m4is_znf9[$i]) ) ? $m4is_znf9[$i] : false; if ($m4is_znf9){ foreach ($m4is_znf9 as $m4is_b40e_m => $m4is_w9feq2) { $m4is_fnc39[$m4is_b40e_m] = $m4is_w9feq2 . ' (' . str_replace('-', '', $m4is_b40e_m) . ')'; } } return $m4is_fnc39; }  
function m4is_ee0h($m4is_lsvyxw = false, $m4is_rbrpz3 = false) { global $wpdb; static $m4is_v53_; $m4is_celntz = (int) $m4is_lsvyxw; $m4is_n_bp6 = []; $m4is_wmzqp = memberium_app()->m4is_mmdrl('settings'); if (! isset($m4is_v53_[$m4is_celntz]) ) {  $m4is_csvkg = ''; if ($m4is_lsvyxw == true && $m4is_wmzqp['ignore_tag_categories'] > '') { $m4is_csvkg = ' AND category NOT IN (' . $m4is_wmzqp['ignore_tag_categories'] . ') '; } $m4is_a89oh = []; $m4is_w6mt = MEMBERIUM_DB_TAGS; $m4is_q7m2 = memberium_app()->m4is_re5x('appname'); $m4is_ioxk = "SELECT id, name FROM {$m4is_w6mt} WHERE `appname` = '{$m4is_q7m2}' {$m4is_csvkg} ORDER BY category, name "; $m4is_znf9 = $wpdb->get_results($m4is_ioxk, ARRAY_A); foreach ($m4is_znf9 as $m4is_w9feq2) { $m4is_a89oh['mc'][$m4is_w9feq2['id']] = $m4is_w9feq2['name']; $m4is_a89oh['lc'][$m4is_w9feq2['id']] = strtolower($m4is_w9feq2['name']); } $m4is_n_bp6 = $m4is_a89oh; $m4is_v53_[$m4is_celntz] = $m4is_n_bp6; } else { $m4is_n_bp6 = $m4is_v53_[$m4is_celntz]; }  if ($m4is_rbrpz3) { if (! empty($m4is_n_bp6['mc']) && is_array($m4is_n_bp6['mc']) ){ $m4is_n_bp6['hn'] = []; $m4is_lneu = __('Does Not Have', 'memberium'); foreach ($m4is_n_bp6['mc'] as $m4is_b40e_m => $m4is_w9feq2) { $m4is_n_bp6['hn'][$m4is_b40e_m] = $m4is_w9feq2; $m4is_n_bp6['hn'][ '-' . $m4is_b40e_m] = $m4is_lneu . ' ' . $m4is_w9feq2; } } } return (array) $m4is_n_bp6; }  
function m4is_r0vot($m4is_znf9) { global $wpdb;  if (is_array($m4is_znf9) ) { $m4is_znf9 = implode(',', $m4is_znf9); } $m4is_znf9 = trim($m4is_znf9, ','); if (trim($m4is_znf9) == '') { return; } $m4is_ioxk = "SELECT `name` FROM `". MEMBERIUM_DB_TAGS . "` WHERE `id` in ({$m4is_znf9}) ORDER BY `name` ASC;"; $m4is_jpzyit = $wpdb->get_results($m4is_ioxk, ARRAY_A); foreach ($m4is_jpzyit as $m4is_wo7c93) { $m4is_mcisn[] = $m4is_wo7c93['name']; } if (count($m4is_mcisn) > 0) { $m4is_mv6io = implode(', ', $m4is_mcisn); } return $m4is_mv6io; } 
function m4is_p98el($m4is_capqjd) { if (! is_array($m4is_capqjd) ) { $m4is_znf9 = preg_replace(['/, */', '/ *,/'], ',', trim($m4is_capqjd) ); $m4is_znf9 = explode(',', $m4is_znf9); } else { if (is_array($m4is_capqjd) ) { $m4is_znf9 = $m4is_capqjd; } else { return FALSE; } } static $m4is_mcisn = null; $m4is_z437at = []; if ($m4is_mcisn == null) { $m4is_in0ti = false; $m4is_mcisn = wp_cache_get('tags', 'memberium2/keap', false, $m4is_in0ti); if (! $m4is_in0ti) { global $wpdb; $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_ioxk = "SELECT name, id FROM `" . MEMBERIUM_DB_TAGS . "` WHERE `appname` = '{$m4is_q7m2}' "; $m4is_v0xhuc = $wpdb->get_results($m4is_ioxk, ARRAY_A); foreach ($m4is_v0xhuc as $m4is_w9feq2) { $m4is_m8uda2 = strtolower($m4is_w9feq2['name']); $m4is_mcisn[$m4is_m8uda2] = $m4is_w9feq2['id']; } wp_cache_set('tags', $m4is_mcisn, 'memberium2/keap', 10800); } } foreach ($m4is_znf9 as $m4is_w9feq2) { if (is_numeric($m4is_w9feq2) ) { $m4is_z437at[] = $m4is_w9feq2; } else { if (substr($m4is_w9feq2, 0, 1) == '-') { $m4is_m8uda2 = strtolower(substr($m4is_w9feq2, 1) ); $m4is_eg2e = '-'; } else { $m4is_m8uda2 = strtolower($m4is_w9feq2); $m4is_eg2e = ''; } if (isset($m4is_mcisn[$m4is_m8uda2]) ) { $m4is_z437at[] = intval($m4is_eg2e . $m4is_mcisn[$m4is_m8uda2]); } } } return $m4is_z437at; }  
function m4is_q9epk4( $m4is_aicfp, $m4is_znf9 ) { global $wpdb; $m4is_aicfp = (int) $m4is_aicfp; if (is_int($m4is_znf9) || is_string($m4is_znf9) ) { $m4is_znf9 = explode(',', $m4is_znf9); }  foreach ($m4is_znf9 as $m4is_w9feq2) { if ( (int) $m4is_w9feq2 > 0) { $this->m4is_wnlbj_()->grpAssign($m4is_aicfp, (int) $m4is_w9feq2); $this->m4is_l41p7r($m4is_aicfp); } else { $this->m4is_nn6s_()->grpRemove($m4is_aicfp, (int) abs($m4is_w9feq2) ); $this->m4is_l41p7r($m4is_aicfp); } } if (isset($_SESSION['memb_user']['user_id']) && $_SESSION['memb_user']['user_id'] == $m4is_aicfp) { $m4is_ce365g = explode(',', $_SESSION['memb_user']['tags']); foreach ($m4is_znf9 as $m4is_w9feq2) { if ($m4is_w9feq2 > 0) { $m4is_ce365g[] = $m4is_w9feq2; } else { $m4is_w9feq2 = (int) abs($m4is_w9feq2); unset($m4is_ce365g[$m4is_w9feq2]); } } $_SESSION['memb_user']['tags'] = implode(',', $m4is_ce365g); $wpdb->query("REPLACE INTO `" . MEMBERIUM_DB_CONTACTS ."` SET `value`='' WHERE `id` = {$m4is_aicfp} AND `appname` = `{$this->i2sdk_options['app_name']}` "); $this->m4is_l41p7r($m4is_aicfp); $this->disable_login_redirect = TRUE; if (m4is_lpl4d::m4is_a_2z() == $m4is_aicfp) { $_SESSION = $this->m4is_q4nu(); } else { $this->m4is_q4nu(); } } }    
function m4is_m6fy3q($m4is_xt1u) { $m4is_xt1u = (int) $m4is_xt1u; $m4is_ppq5 = 'memberium::email_template::' . $m4is_xt1u;  $m4is_i0ltb = get_transient($m4is_ppq5); if ($m4is_i0ltb === false) { $m4is_i0ltb = $this->m4is_wnlbj_()->getEmailTemplate($m4is_xt1u); if (is_array($m4is_i0ltb) ) { set_transient($m4is_ppq5, $m4is_i0ltb, DAY_IN_SECONDS); } else { $m4is_i0ltb = false; } } return $m4is_i0ltb; } 
function m4is_fpcg($m4is_i0ltb) { }      
function m4is_ri3a_7() { } 
function m4is_s6vju($m4is_aicfp, $m4is_m0nora = false) { $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_t7i0bz = m4is_wdzu::m4is_epld($m4is_aicfp, $m4is_q7m2); $m4is_bm6ib = get_transient($m4is_t7i0bz); if (empty($m4is_bm6ib) || ! is_array($m4is_bm6ib) ) { $m4is_bm6ib = m4is_wdzu::m4is_dsh3tk($m4is_aicfp); } if ($m4is_m0nora) { $m4is_bm6ib = $this->m4is_uvktw6( $m4is_bm6ib ); } return $m4is_bm6ib; }    
function m4is_i1wc($m4is_aicfp, $m4is_znf9 = '', $m4is_b8ve = '', $m4is_eum9fq = '', $m4is_q7m2 = false, $m4is_f1ghx = false, $m4is_adiq = false) { if (! empty($m4is_eum9fq) ) { $this->m4is_rctzo($m4is_eum9fq, $m4is_aicfp, $m4is_q7m2); } if (! empty($m4is_b8ve) ) { $this->m4is_evrbh($m4is_b8ve, $m4is_aicfp); } if (! empty($m4is_znf9) ) { $this->m4is__mkz($m4is_znf9, $m4is_aicfp, $m4is_f1ghx, $m4is_adiq); } } 
function m4is_a59p86($m4is_aicfp = 0, $m4is_l926 = []) { $m4is_p78sgz = [ 'actionsets' => '', 'api_goals' => '', 'tags' => '', 'full_update' => false, 'debug' => false, 'appname' => false, ]; $m4is_l926 = wp_parse_args($m4is_l926, $m4is_p78sgz); do_action('memberium/do_actions_before', $m4is_aicfp, $m4is_l926); if ($m4is_aicfp) { if (! empty($m4is_l926['tags']) ) { $this->m4is__mkz($m4is_l926['tags'], $m4is_aicfp, $m4is_f1ghx, $m4is_adiq); } if (! empty($m4is_l926['actionsets']) ) { $this->m4is_evrbh($m4is_l926['actionsets'], $m4is_aicfp); } if (! empty($m4is_l926['api_goals']) ) { $this->m4is_rctzo($m4is_l926['api_goals'], $m4is_aicfp, $m4is_q7m2); } } do_action('memberium/do_actions_after', $m4is_aicfp, $m4is_l926); } 
function m4is_rctzo($m4is_eum9fq = '', $m4is_aicfp = false, $m4is_q7m2 = false) { if (empty($m4is_eum9fq) ) { return; } if (! m4is_o5aoir::m4is__qlbej() ) { return; } if (! $m4is_aicfp) { $m4is_aicfp = m4is_lpl4d::m4is_a_2z(); } $m4is_aicfp = (int) $m4is_aicfp; if ($m4is_aicfp < 1) { return; } if (! $m4is_q7m2) { $m4is_q7m2 = $this->m4is_re5x('appname'); } if (! is_array($m4is_eum9fq) ) { $m4is_eum9fq = array_filter(explode(',', $m4is_eum9fq) ); } $this->m4is_wqis4l(); $m4is_zjt81g = false; foreach ($m4is_eum9fq as $m4is_qw8dk) { if ($m4is_qw8dk > '') { $m4is_n_bp6 = m4is_f84s3h::m4is_zox_z5($m4is_aicfp, $m4is_qw8dk, $m4is_q7m2); $m4is_zjt81g = (boolean) ($m4is_n_bp6[0]['success'] == 1); } } if ($m4is_zjt81g) { $this->m4is_l41p7r($m4is_aicfp); } } 
function m4is_qrlqb6($m4is__siek5, $m4is_aicfp = false) { if (! m4is_o5aoir::m4is__qlbej() ) { return; } if (! $m4is_aicfp) { $m4is_aicfp = m4is_lpl4d::m4is_a_2z(); } $m4is_aicfp = (int) $m4is_aicfp; if ($m4is_aicfp < 1) { return; } if (! is_array($m4is__siek5) ) { $m4is__siek5 = array_filter(explode(',', $m4is__siek5) ); } foreach ($m4is__siek5 as $fus_id) { if ($fus_id > 0) { $this->m4is_wnlbj_()->campAssign($m4is_aicfp, $fus_id); } } } 
function m4is_tcjd($fus_ids, $m4is_aicfp = false) { if (! m4is_o5aoir::m4is__qlbej() ) { return; } if (! $m4is_aicfp) { $m4is_aicfp = m4is_lpl4d::m4is_a_2z(); } $m4is_aicfp = (int) $m4is_aicfp; if ($m4is_aicfp < 1) { return; } if (! is_array($m4is__siek5) ) { $m4is__siek5 = array_filter(explode(',', $m4is__siek5) ); } foreach ($m4is__siek5 as $m4is_xg719d) { if ($m4is_xg719d > 0) { $this->m4is_wnlbj_()->campPause($m4is_aicfp, $m4is_xg719d); } } } 
function m4is_evrbh($m4is_b8ve, $m4is_aicfp = false) { if (empty($m4is_b8ve) ) { return; } if (! m4is_o5aoir::m4is__qlbej() ) { return; } if (! $m4is_aicfp) { $m4is_aicfp = m4is_lpl4d::m4is_a_2z(); } $m4is_aicfp = (int) $m4is_aicfp; if ($m4is_aicfp < 1) { return; } if (! is_array($m4is_b8ve) ) { $m4is_b8ve = array_filter(explode(',', $m4is_b8ve) ); }   $this->m4is_wqis4l(); $m4is_zjt81g = false; foreach ($m4is_b8ve as $m4is_cga2c) { $m4is_cga2c = (int) $m4is_cga2c; if ($m4is_cga2c > 0) { $m4is_jr7f6 = m4is_f84s3h::m4is_ot30uq($m4is_aicfp, (int) $m4is_cga2c); if (is_array($m4is_jr7f6) ) { foreach ($m4is_jr7f6 as $m4is_n_bp6) { if (strtolower($m4is_n_bp6['Message']) <> 'nothing to do') { $m4is_zjt81g = true; } } unset($m4is_n_bp6); } } }  if ($m4is_zjt81g) { $this->m4is_qjrxkl($this->m4is_w47qdy() ); $this->m4is_l41p7r($this->m4is_w47qdy() ); if (m4is_lpl4d::m4is_a_2z() == $m4is_aicfp) { $_SESSION = $this->m4is_q4nu(); } else { $this->m4is_q4nu(); } } return $m4is_jr7f6; } 
function m4is_ssj6p($m4is__siek5, $m4is_aicfp = false) { if (! m4is_o5aoir::m4is__qlbej() ) { return; } if (! $m4is_aicfp) { $m4is_aicfp = m4is_lpl4d::m4is_a_2z(); } $m4is_aicfp = (int) $m4is_aicfp; if ($m4is_aicfp < 1) { return; } if (! is_array($m4is__siek5) ) { $m4is__siek5 = array_filter(explode(',', $m4is__siek5) ); } foreach ($m4is__siek5 as $m4is_xg719d) { if ($m4is_xg719d > 0) { $this->m4is_wnlbj_()->campRemove($m4is_aicfp, $m4is_xg719d); } } } 
function m4is__mkz($m4is_znf9 = '', $m4is_aicfp = false, $m4is_f1ghx = false, $m4is_adiq = false) { global $wpdb; if (! m4is_o5aoir::m4is__qlbej() ) { return; } if (! $m4is_aicfp) { $m4is_aicfp = m4is_lpl4d::m4is_a_2z(); } if ($m4is_aicfp < 1) { return; } if (! is_array($m4is_znf9) ) { $m4is_znf9 = array_filter(explode(',', $m4is_znf9) ); } if (count($m4is_znf9) == 0) { return; } $m4is_znf9 = array_unique($this->m4is_p98el($m4is_znf9) );  if( count($m4is_znf9) > 1 ){ if( ( $this->m4is_mmdrl('settings', 'beta/oauth') == 1 ) && $this->m4is_nn6s_()->isRestAvailable() ){ return $this->m4is_odsyql( $m4is_znf9, $m4is_aicfp ); } } $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_zjt81g = false; $m4is_ixyb = []; $m4is_ee9o = ($m4is_aicfp == m4is_lpl4d::m4is_a_2z() ); $this->m4is_wqis4l();  if ($m4is_ee9o && (m4is_lpl4d::m4is_bfi49('groups') > '') ) { $m4is_ixyb = array_flip(array_filter(explode(',', m4is_lpl4d::m4is_bfi49('groups') ) ) ); } else { $m4is_nq7s = m4is_zbyh::m4is_w1bfmt( $m4is_aicfp, true ); $m4is_ixyb = isset( $m4is_nq7s['groups'] ) ? array_flip( array_filter( explode( ',', $m4is_nq7s['groups'] ) ) ) : []; } foreach ($m4is_znf9 as $m4is_w9feq2) { $m4is_w9feq2 = (int) $m4is_w9feq2; if ($m4is_w9feq2 < 0) { $m4is_qxtoe = abs($m4is_w9feq2); $m4is_n_bp6 = $this->m4is_wnlbj_()->grpRemove($m4is_aicfp, $m4is_qxtoe); if ($m4is_n_bp6) { $m4is_zjt81g = true; unset($m4is_ixyb[$m4is_qxtoe]); } if ($this->m4is_mmdrl('settings', 'sync_tag_details') == 1) { $m4is_ioxk = 'DELETE FROM `' . MEMBERIUM_DB_CONTACTTAGS . '` WHERE `contactid` = %d AND `tagid` = %d AND `appname` = %s ;'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_aicfp, abs($m4is_w9feq2), $m4is_q7m2); $wpdb->query($m4is_ioxk); }; do_action('memb_remove_tag', $m4is_aicfp, abs($m4is_w9feq2) ); do_action('memberium/tag/remove', $m4is_aicfp, abs($m4is_qxtoe) ); } elseif ($m4is_w9feq2 > 0) { $m4is_n_bp6 = $this->m4is_wnlbj_()->grpAssign($m4is_aicfp, $m4is_w9feq2); if ($m4is_n_bp6) { $m4is_ixyb[ $m4is_w9feq2 ] = ! empty($m4is_ixyb) ? max($m4is_ixyb) + 1 : 1; $m4is_zjt81g = true; } if ($this->m4is_mmdrl('settings', 'sync_tag_details') == 1) { $m4is_ioxk = 'INSERT IGNORE INTO `' . MEMBERIUM_DB_CONTACTTAGS . '` (`appname`, `contactid`, `tagid`) VALUES (%s, %d, %d);'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_q7m2, $m4is_aicfp, abs($m4is_w9feq2) ); $wpdb->query($m4is_ioxk); }; do_action('memb_add_tag', $m4is_aicfp, $m4is_w9feq2); do_action('memberium/tag/assign', $m4is_aicfp, $m4is_w9feq2); } } $m4is_ixyb = array_flip($m4is_ixyb); sort($m4is_ixyb); $m4is_ixyb = implode(',', $m4is_ixyb);  $m4is_ioxk = 'UPDATE `' . MEMBERIUM_DB_CONTACTS . '` SET `value` = %s WHERE `id` = %d AND `appname` = %s AND `fieldname` = "Groups";'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_ixyb, $m4is_aicfp, $m4is_q7m2); $wpdb->query($m4is_ioxk); $this->m4is_l41p7r($m4is_aicfp); if ($m4is_ee9o) { $_SESSION = $this->m4is_q4nu(); } else { $this->m4is_q4nu(); }  } 
function m4is_odsyql( array $m4is_znf9, int $m4is_aicfp = 0 ){ if (! m4is_o5aoir::m4is__qlbej() ) { return; } if( empty($m4is_znf9) ){ return false; } if ( empty($m4is_aicfp) ) { $m4is_aicfp = m4is_lpl4d::m4is_a_2z(); } if ($m4is_aicfp < 1) { return; } $m4is_jr7f6 = $this->m4is_nn6s_()->addRemoveContactTags($m4is_aicfp, $m4is_znf9); if( empty($m4is_jr7f6) || ! is_array($m4is_jr7f6) || is_wp_error($m4is_jr7f6) ){ return; } $m4is_xsac64 = !empty($m4is_jr7f6['add']) && !empty($m4is_jr7f6['add']['SUCCESS']) ? $m4is_jr7f6['add']['SUCCESS'] : false; $m4is_xhxmk = !empty($m4is_jr7f6['remove']) && !empty($m4is_jr7f6['remove']['SUCCESS']) ? $m4is_jr7f6['remove']['SUCCESS'] : false; if( ! $m4is_xsac64 && ! $m4is_xhxmk ){ return; } global $wpdb; $m4is_zlyv = ( $this->m4is_mmdrl('settings', 'sync_tag_details') == 1 ); $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_zjt81g = false; $m4is_ixyb = []; $m4is_ee9o = ($m4is_aicfp == m4is_lpl4d::m4is_a_2z() ); $this->m4is_wqis4l();  if ($m4is_ee9o && (m4is_lpl4d::m4is_bfi49('groups') > '') ) { $m4is_ixyb = array_flip(array_filter(explode(',', m4is_lpl4d::m4is_bfi49('groups') ) ) ); } else { $m4is_nq7s = m4is_zbyh::m4is_w1bfmt($m4is_aicfp, true); $m4is_ixyb = array_flip(array_filter(explode(',', $m4is_nq7s['groups']) ) ); }  if( $m4is_xsac64 ){ foreach ($m4is_xsac64 as $m4is_qxtoe) { if( ! array_key_exists($m4is_qxtoe, $m4is_ixyb) ){ if( $m4is_zlyv ){ $m4is_ioxk = 'INSERT IGNORE INTO `' . MEMBERIUM_DB_CONTACTTAGS . '` (`appname`, `contactid`, `tagid`) VALUES (%s, %d, %d);'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_q7m2, $m4is_aicfp, $m4is_qxtoe ); $wpdb->query($m4is_ioxk); } $m4is_ixyb[ $m4is_qxtoe ] = ! empty($m4is_ixyb) ? max($m4is_ixyb) + 1 : 1; $m4is_zjt81g = true; do_action('memb_add_tag', $m4is_aicfp, $m4is_qxtoe); do_action('memberium/tag/assign', $m4is_aicfp, $m4is_w9feq2); } } } unset($m4is_xsac64);  if( $m4is_xhxmk ){ foreach ($m4is_xhxmk as $m4is_qxtoe) { if( array_key_exists($m4is_qxtoe, $m4is_ixyb) ){ if( $m4is_zlyv ){ $m4is_ioxk = 'DELETE FROM `' . MEMBERIUM_DB_CONTACTTAGS . '` WHERE `contactid` = %d AND `tagid` = %d AND `appname` = %s ;'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_aicfp, $m4is_qxtoe, $m4is_q7m2); $wpdb->query($m4is_ioxk); } unset($m4is_ixyb[ $m4is_qxtoe ]); $m4is_zjt81g = true; do_action('memb_remove_tag', $m4is_aicfp, $m4is_qxtoe); do_action('memberium/tag/remove', $m4is_aicfp, $m4is_qxtoe); } } } unset($m4is_xhxmk);  if( $m4is_zjt81g ){ $m4is_ixyb = array_flip($m4is_ixyb); sort($m4is_ixyb); $m4is_ixyb = implode(',', $m4is_ixyb); $m4is_ioxk = 'UPDATE `' . MEMBERIUM_DB_CONTACTS . '` SET `value` = %s WHERE `id` = %d AND `appname` = %s AND `fieldname` = "Groups";'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_ixyb, $m4is_aicfp, $m4is_q7m2); $wpdb->query($m4is_ioxk); $this->m4is_l41p7r($m4is_aicfp);  if ($m4is_ee9o) { $_SESSION = $this->m4is_q4nu(); } else { $this->m4is_q4nu(); } } return; } 
function m4is_m6e2x( array $m4is_ulo1, int $m4is_qxtoe ){ if (! m4is_o5aoir::m4is__qlbej() ) { return false; } if( empty($m4is_ulo1) || empty($m4is_qxtoe) ){ return false; } $m4is_edow = $m4is_qxtoe < 0 ? 'remove' : 'add'; $m4is_jr7f6 = $this->m4is_nn6s_()->addRemoveTagContacts($m4is_ulo1, $m4is_qxtoe); $m4is_qxtoe = abs($m4is_qxtoe); if( empty($m4is_jr7f6) || ! array_key_exists($m4is_qxtoe, $m4is_jr7f6) ){ return false; } $m4is_jr7f6 = $m4is_jr7f6[$m4is_qxtoe]; if( empty($m4is_jr7f6['SUCCESS']) ){ return false; } global $wpdb; $m4is_zlyv = ( $this->m4is_mmdrl('settings', 'sync_tag_details') == 1 ); $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_pr_4y = m4is_zbyh::m4is_prqoyt($m4is_jr7f6['SUCCESS']);  foreach ($m4is_jr7f6['SUCCESS'] as $m4is_aicfp) { $m4is_zjt81g = false; $m4is_ixyb = array_key_exists($m4is_aicfp, $m4is_pr_4y) ? $m4is_pr_4y[$m4is_aicfp]->value : ''; $m4is_ixyb = empty($m4is_ixyb) ? [] : array_flip(array_filter(explode(',', $m4is_ixyb) ) );  if( $m4is_edow === 'add' ){ if( ! array_key_exists($m4is_qxtoe, $m4is_ixyb) ){ if( $m4is_zlyv ){ $m4is_ioxk = 'INSERT IGNORE INTO `' . MEMBERIUM_DB_CONTACTTAGS . '` (`appname`, `contactid`, `tagid`) VALUES (%s, %d, %d);'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_q7m2, $m4is_aicfp, $m4is_qxtoe ); $wpdb->query($m4is_ioxk); } $m4is_ixyb[ $m4is_qxtoe ] = ! empty($m4is_ixyb) ? max($m4is_ixyb) + 1 : 1; $m4is_zjt81g = true; do_action('memb_add_tag', $m4is_aicfp, $m4is_qxtoe); do_action('memberium/tag/assign', $m4is_aicfp, $m4is_w9feq2); } }  else{ if( array_key_exists($m4is_qxtoe, $m4is_ixyb) ){ if( $m4is_zlyv ){ $m4is_ioxk = 'DELETE FROM `' . MEMBERIUM_DB_CONTACTTAGS . '` WHERE `contactid` = %d AND `tagid` = %d AND `appname` = %s ;'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_aicfp, $m4is_qxtoe, $m4is_q7m2); $wpdb->query($m4is_ioxk); } unset($m4is_ixyb[ $m4is_qxtoe ]); $m4is_zjt81g = true; do_action('memb_remove_tag', $m4is_aicfp, $m4is_qxtoe); do_action('memberium/tag/remove', $m4is_aicfp, $m4is_qxtoe); } }  if( $m4is_zjt81g ){ $m4is_ixyb = array_flip($m4is_ixyb); sort($m4is_ixyb); $m4is_ixyb = implode(',', $m4is_ixyb); $m4is_ioxk = 'UPDATE `' . MEMBERIUM_DB_CONTACTS . '` SET `value` = %s WHERE `id` = %d AND `appname` = %s AND `fieldname` = "Groups";'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_ixyb, $m4is_aicfp, $m4is_q7m2); $wpdb->query($m4is_ioxk); $this->m4is_l41p7r($m4is_aicfp); } } return $m4is_jr7f6; }    
function m4is_lhu9() { $m4is_icdqo = $this->m4is_uli3q(); foreach ($m4is_icdqo as $m4is_da5x) { $m4is_aicfp = 0; if (! empty($m4is_da5x['data']['contact_id']) ) { $m4is_aicfp = (int) $m4is_da5x['data']['contact_id']; } else { $m4is_b40e_m = (int) $m4is_da5x['data']['recurringorder_id']; if ($m4is_b40e_m > 0) { $m4is_kbu63_ = ['ContactId']; $m4is_wo7c93 = $this->m4is_wnlbj_()->dsLoad('RecurringOrder', $m4is_b40e_m, $m4is_kbu63_); if (is_array($m4is_wo7c93) ) { $m4is_aicfp = (int) $m4is_wo7c93['ContactId']; } } } if ($m4is_aicfp > 0) { if ($m4is_da5x['actiontype'] == 'achievegoal') { $m4is_qw8dk = $m4is_da5x['data']['end_goal']; m4is_f84s3h::m4is_zox_z5($m4is_aicfp, $m4is_qw8dk, $m4is_da5x['appname']); $this->m4is_lxs0($m4is_da5x); } elseif ($m4is_da5x['actiontype'] == 'actionset') { $m4is_cga2c = (int) $m4is_da5x['data']['end_action']; m4is_f84s3h::m4is_ot30uq($m4is_aicfp, $m4is_cga2c); $this->m4is_lxs0($m4is_da5x); } elseif ($m4is_da5x['actiontype'] == 'settags') { } elseif ($m4is_da5x['actiontype'] == 'sendemail') { } } } } 
function m4is__th3u($m4is_uvwm9, $m4is_ui123, $m4is_j0n7) { global $wpdb; $m4is_q7m2 = $this->m4is_re5x('appname'); $m4is_uvwm9 = strtolower(trim($m4is_uvwm9) ); $m4is_hpgx6w = strtotime($m4is_ui123); $m4is_ioxk = 'INSERT INTO `' . MEMBERIUM_DB_QUEUE . '` (`pidlock`, `appname`, `actiontype`, `scheduled`, `data`) VALUES (-1, %s, %s, %s, %s);'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_q7m2, $m4is_uvwm9, $m4is_ui123, json_encode($m4is_j0n7) ); $wpdb->query($m4is_ioxk); $m4is_b40e_m = $wpdb->insert_id; return $m4is_b40e_m; } 
function m4is_uli3q() { global $wpdb; $m4is_q7m2 = $this->m4is_re5x('appname');  $m4is_wz8y = mt_rand( 1000000, 9999999 ); $m4is_ioxk = 'UPDATE `' . MEMBERIUM_DB_QUEUE . '` SET `pidlock` = %d WHERE `appname`= %s AND `scheduled` <= NOW() AND `pidlock` < 1 ;'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_wz8y, $m4is_q7m2); $wpdb->query($m4is_ioxk); $m4is_ioxk = 'SELECT * FROM `' . MEMBERIUM_DB_QUEUE . '` WHERE `pidlock` = %d AND `appname`= %s ;'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_wz8y, $m4is_q7m2); $m4is_swnk = $wpdb->get_results($m4is_ioxk, ARRAY_A); foreach ($m4is_swnk as $m4is_ap3_ => $m4is_rhfd) { $m4is_j0n7 = json_decode($m4is_rhfd['data'], true); if ($m4is_j0n7) { $m4is_swnk[$m4is_ap3_]['data'] = $m4is_j0n7; } } return $m4is_swnk; } 
function m4is_lxs0($m4is_da5x) { $m4is_b40e_m = (int) $m4is_da5x['id']; if ($m4is_b40e_m) { global $wpdb; $m4is_ioxk = 'DELETE FROM `' . MEMBERIUM_DB_QUEUE . '` WHERE `id` = %d and `appname` = %s;'; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_da5x['id'], $m4is_da5x['appname']); $wpdb->query($m4is_ioxk); } }    
function m4is_g3uqh($m4is_ho0w2, $m4is_rhfd = 1) { $m4is_ho0w2 = trim($m4is_ho0w2); if (empty($m4is_ho0w2) ) { return false; } global $wpdb; $m4is_ioxk = ''; return false; }    
function m4is_lwrzj() { $m4is_l926 = unserialize(base64_decode($_POST['payload']) ); $m4is_aicfp = (int) $m4is_l926['contact_id']; $m4is_znf9 = $m4is_l926['tag_id']; $m4is_eum9fq = $m4is_l926['goals']; $m4is_b8ve = $m4is_l926['action_id']; $m4is_k_fdu = '';  if ($m4is_znf9 > '') { $this->m4is_q9epk4($m4is_aicfp, $m4is_znf9); } if ($m4is_b8ve > '') { $this->m4is_evrbh($m4is_aicfp, $m4is_b8ve); } if ($m4is_eum9fq > '') { $this->m4is_rctzo($m4is_eum9fq, $m4is_aicfp); } $this->m4is_qjrxkl($m4is_aicfp); die(); } 
function m4is_xm34($m4is_zal8uo, $precision = 2) { $m4is_p6ao = ['B', 'KB', 'MB', 'GB', 'TB']; $m4is_zal8uo = max($m4is_zal8uo, 0); $m4is_vjtak_ = floor( ($m4is_zal8uo ? log($m4is_zal8uo) : 0) / log(1024) ); $m4is_vjtak_ = min($m4is_vjtak_, count($m4is_p6ao) - 1); $m4is_zal8uo /= (1 << (10 * $m4is_vjtak_) ); return round($m4is_zal8uo, $precision) . ' ' . $m4is_p6ao[$m4is_vjtak_]; }    
function m4is_d4wp( $m4is_ho0w2 = '' ) { $m4is_ho0w2 = strtolower(trim($m4is_ho0w2) ); $m4is_g4ulmz = false; $m4is_g8qm = $this->m4is_mmdrl( 'remote_files' ); if ($m4is_ho0w2) { if (array_key_exists($m4is_ho0w2, $m4is_g8qm) ) { $m4is_g4ulmz = $m4is_g8qm[$m4is_ho0w2]; $m4is_p78sgz = [ 'region' => 'us-east-1', ]; $m4is_g4ulmz = wp_parse_args($m4is_g4ulmz, $m4is_p78sgz); } } return $m4is_g4ulmz; }        
function m4is_a6vz9w() {  } 
function m4is_olo97f() { $m4is_u13x = 'SavedFilter'; $m4is_pnc6w = []; $m4is_qqzo = 1000; $m4is_zvxijt = 0; $m4is_hkp7s = m4is_f84s3h::m4is_cm6nr('SavedFilter'); $m4is_kc1q = [ 'ReportStoredName' => 'AffiliateActivitySummary', ]; do { $m4is_jpzyit = m4is_f84s3h::m4is_yt5p0l($m4is_u13x, $m4is_qqzo, $m4is_zvxijt, $m4is_kc1q, $m4is_hkp7s); foreach($m4is_jpzyit as $m4is_wo7c93) { $m4is_pnc6w[$m4is_wo7c93['Id']] = [ 'UserId' => (int) $m4is_wo7c93['UserId'], 'FilterName' => $m4is_wo7c93['FilterName'], ]; } $m4is_zvxijt++; } while (count($m4is_jpzyit) >= $m4is_qqzo); unset($m4is_jpzyit, $m4is_wo7c93, $m4is_zvxijt, $m4is_qqzo, $m4is_u13x, $m4is_hkp7s, $m4is_kc1q); if (count($m4is_pnc6w) == 1) { } return $m4is_pnc6w; } 
function m4is_xzurni($m4is_aicfp = 0, $m4is_rprd_t = 'first') { } 
function m4is_gnk8qe($m4is_aicfp, $m4is_sv3h) { if (! $m4is_aicfp || empty($m4is_sv3h) ) { return; } $m4is_sv3h = strtolower($m4is_sv3h); $session_contact_id = m4is_lpl4d::m4is_a_2z(); $m4is_n_bp6 = ''; if ($m4is_aicfp == $session_contact_id) { $m4is_n_bp6 = m4is_lpl4d::m4is_bfi49($m4is_sv3h); } else { $m4is_q4c_xa = m4is_zbyh::m4is__nfdz9($m4is_aicfp); $m4is_sxfbjo = $this->m4is_q4nu($m4is_q4c_xa); $m4is_n_bp6 = isset($m4is_sxfbjo['keap']['contact'][$m4is_sv3h]) ? $m4is_sxfbjo['keap']['contact'][$m4is_sv3h] : ''; } return $m4is_n_bp6; }    
function m4is_pjea( $m4is_g58k, $m4is_aa5b, $m4is_q4c_xa ) { $m4is_c1eh = (bool) $this->m4is_mmdrl('settings', 'persistent_login'); if ($m4is_c1eh) { if (! user_can($m4is_q4c_xa, 'manage_options')) { $m4is_llsi7q = $m4is_c1eh ? 1 * MONTH_IN_SECONDS : 3 * DAY_IN_SECONDS; $m4is_g58k = $m4is_llsi7q; } else { $m4is_llsi7q = YEAR_IN_SECONDS; } } return $m4is_g58k; } 
function m4is_bqf92g( array $m4is_p78sgz ) { if (! $m4is_p78sgz['value_remember']) { if ($this->m4is_mmdrl('settings', 'persistent_login') ) { $m4is_p78sgz['value_remember'] = true; } } return $m4is_p78sgz; } 
function m4is_gkdp() { if ( $this->m4is_mmdrl( 'settings', 'persistent_login' ) ) { echo '<input type="hidden" name="rememberme" value="on" />'; } }  
function m4is_gh84( $m4is_p1ug, $m4is_aa5b = 0, $m4is_cm9tab = true, $m4is_db2sv = true ) { if ($this->m4is_mmdrl('settings', 'password_field') == 'Password') { $m4is_p1ug = substr($m4is_p1ug, 0, 20); } return $m4is_p1ug; } private 
function m4is_bwx1i() { if ( headers_sent() ) { return; } $m4is_hsyp0 = $this->m4is_mmdrl( 'settings', 'version', $this->m4is_gu3m() ); $m4is_cqia = $this->m4is_mmdrl( 'settings', 'disable_xframe', false ); header( 'X-Powered-By: Memberium ' . $m4is_hsyp0, false ); if (! $m4is_cqia) { header('X-Frame-Options: SAMEORIGIN'); } } private 
function m4is_v8he() { add_action('clear_auth_cookie', ['m4is_pewcid', 'm4is_i0skt2']); add_action('wp_authenticate', ['m4is_pewcid', 'm4is_e87ze'], 10); add_action('wp_authenticate', ['m4is_pewcid', 'm4is_cmns'], 1); add_action('wp_login', ['m4is_pewcid', 'm4is_qhrbj'], 900, 2);  add_action('wp_login', ['m4is_pewcid', 'm4is_gvh8'], 20, 2); add_filter('authenticate', ['m4is_pewcid', 'm4is_rdoyem'], 10, 3); add_filter('authenticate', ['m4is_pewcid', 'm4is_zzomh'], 10, 3); add_filter('authenticate', ['m4is_pewcid', 'm4is_mlnq'], 100, 3); add_filter('authenticate', ['m4is_pewcid', 'm4is_yu4p'], -10, 3);  add_filter('authenticate', ['m4is_pewcid', 'm4is_u6id'], -15, 3); add_filter('login_form_defaults', [$this, 'm4is_bqf92g']); add_filter('login_redirect', ['m4is_pewcid', 'm4is_qz1oy'], 999999, 3); add_filter('login_url', [$this, 'm4is_ja20c'], 999999, 3); add_filter('wp_login', ['m4is_pewcid', 'm4is_t93t4'], PHP_INT_MAX);  add_filter('authenticate', ['m4is_pewcid', 'm4is_dxhlr'], -1000, 3); add_filter('login_form_bottom', ['m4is_pewcid', 'm4is_jga1s'], 10, 2); add_action('login_form', ['m4is_pewcid', 'm4is_jga1s']); } private 
function m4is_j1fd() { $m4is_pverx = time() - 300; $m4is_icdqo = [ 'memberium_license_check' => 'daily', 'memberium_maintenance' => 'hourly', 'memberium_maintenance12' => 'twicedaily', 'memberium_scanmakepass' => '3min', ]; foreach($m4is_icdqo as $m4is_da5x => $m4is_ptw7) { $m4is_capm = (int) wp_next_scheduled($m4is_da5x); if ($m4is_capm < $m4is_pverx) { wp_clear_scheduled_hook($m4is_da5x); wp_schedule_event(time() + mt_rand(600,900), $m4is_ptw7, $m4is_da5x); } } } private 
function m4is_fqxc() { add_filter('cron_schedules', [$this, 'm4is_kfly'], 1);  add_action('memberium_license_check', ['m4is_o5aoir', 'm4is_qlzwa4']);  add_action('memberium_maintenance', ['m4is__q5cn', 'm4is_d9t0o']); add_action('memberium_maintenance', ['m4is__4htl6', 'm4is_kwmaqg']); add_action('memberium_maintenance', ['m4is__4htl6', 'm4is_ek8203']); add_action('memberium_maintenance12', ['m4is__4htl6', 'm4is_tjvl']); add_action('memberium_maintenance12', ['m4is_q1amx', 'm4is_dd80rf']); add_action('memberium_maintenance12', ['m4is__4htl6', 'm4is_afk0']); add_action('memberium_scanmakepass', ['m4is__4htl6', 'm4is_ttv9e']); } private 
function m4is_l7ynkj() { add_filter('wp_privacy_personal_data_erasers', ['m4is__qfb', 'm4is_hi6g'], 11); add_filter('wp_privacy_personal_data_exporters', ['m4is__qfb', 'm4is_kcu9j'], 10); } private 
function m4is_sdvsqi() {  if ($this->m4is_mmdrl('settings', 'multi_language', 0) ) { add_filter('gettext', ['m4is_zjw4c', 'm4is_jq_4'], PHP_INT_MAX, 3); add_filter('gettext_with_context', ['m4is_zjw4c', 'm4is_tf6yhb'], PHP_INT_MAX, 4); } } private 
function m4is_bx4h() { if ( $this->m4is_mmdrl( 'settings', 'sync_meta_updates' ) ) {   add_filter( 'update_user_metadata', [$this, 'm4is_glzd'], 10, 5 ); add_filter( 'memberium/usermeta/crm_field_maps', [$this, 'm4is_ec8i23'], 10, 1 ); } } private 
function m4is_untkc() {  add_filter('wpal/ecomm/config', [$this, 'm4is_xo_ui'], PHP_INT_MAX, 1); add_filter('wpal/ecomm/customer/add_update', [$this, 'm4is_ldo0'], 10, 3); } private 
function m4is_ax1wh() { add_action( 'init', [$this, 'm4is_uj6t_'], PHP_INT_MAX ); } private 
function m4is_yld7() { add_filter('site_status_tests', ['m4is_by_t', 'm4is_i6e_do']);  add_filter('debug_information', ['m4is_by_t', 'm4is__iluz']); } private 
function m4is_se_fop() { add_filter('updater_plugins_api_result', ['m4is_n2_bj', 'm4is_jj8be'], 10, 3); add_filter('updater_plugins_api', ['m4is_n2_bj', 'm4is_a893'], 10, 3); add_filter('updater_pre_set_site_transient_update_plugins', ['m4is_n2_bj', 'm4is_zuyei'], 10, 1); } private 
function m4is_ap508() { $this->m4is_fqxc(); $this->m4is_se_fop(); $this->m4is_v8he(); $this->m4is_l7ynkj(); $this->m4is_ca5eyn(); $this->m4is_yld7(); $this->m4is_sdvsqi(); $this->m4is_bx4h(); $this->m4is_untkc(); $this->m4is_ax1wh(); add_filter( 'admin_email_check_interval', '__return_false' ); add_filter( 'auth_cookie_expiration', [$this, 'm4is_pjea'], PHP_INT_MAX - 1, 3 ); add_filter( 'http_request_args', [$this, 'm4is_hu50'], PHP_INT_MAX, 2 ); add_filter( 'random_password', [$this, 'm4is_gh84'], 10, 4 ); add_filter( 'wp_nav_menu_args', [$this, 'm4is_chn17'] ); add_filter( 'random_password', [$this, 'm4is_acvik'], 20, 4 );     add_action( 'plugins_loaded', [$this, 'm4is_vfa0vb'], 11, 0 ); add_action( 'plugins_loaded', [$this, 'm4is_ru32'], 12, 0 ); add_action( 'after_setup_theme', [$this, 'm4is_qheg'], 10 ); add_action( 'admin_bar_menu', ['m4is_q87q9', 'm4is_hb3o'], 71 );  add_action( 'admin_bar_menu', ['m4is_q87q9', 'm4is_td7a'], 101 );  add_action( 'after_password_reset', [$this, 'm4is_jf_d'], 10, 2 ); add_action( 'deleted_user', ['m4is_o5aoir', 'm4is_s105'], PHP_INT_MAX, 0 ); add_action( 'i2sdk_custom_fields_sync', [$this, 'm4is_xkic'], 10, 2 ); add_action( 'init', ['m4is__vdno', 'm4is_folc3'], 1 ); add_action( 'init', [$this, 'm4is_lkdub'] ); add_action( 'plugins_loaded', [$this, 'm4is_f3y8'], 1 ); add_action( 'post_updated', [$this, 'm4is_npamy'], PHP_INT_MAX, 1 ); add_action( 'set_current_user', [$this, 'm4is_cc4zl7'], 10 ); add_action( 'shutdown', [$this, 'm4is_t7v4h'], 10, 0 ); add_action( 'init', [$this, 'elv_process_updated_sessions'], 20 ); add_action( 'wp_footer', [$this, 'm4is_bg9mi5'], PHP_INT_MAX ); add_action( 'shutdown', [$this, 'm4is_a5h284'], PHP_INT_MAX ); add_action( 'user_register', ['m4is_o5aoir', 'm4is_s105'], PHP_INT_MAX, 0 ); add_action( 'user_register', ['m4is_cwzpq', 'm4is_ma9pcq'], 10, 2 ); add_action( 'wp_ajax_memb_ajax_actions', [$this, 'm4is_lwrzj'], 99 ); add_action( 'wp_ajax_nopriv_memb_ajax_actions', [$this, 'm4is_lwrzj'], 99 );     add_action( 'woocommerce_customer_reset_password', [$this, 'm4is_jf_d'], 10, 1);  add_filter( 'wpseo_indexable_excluded_post_types', [$this, 'm4is_l1q7j']);  add_action( 'wpdc_sso_provider_before_sso_redirect', ['m4is_q_nw6f', 'm4is_ojuwh'], 10, 2 );  } private 
function m4is_o13at() { if ( (defined('DOING_AJAX') && DOING_AJAX) || (! is_admin() ) ) { include_once __DIR__ . '/frontend.php'; m4is_pcys::m4is_a6x52r();  } if (is_admin() ) { include_once __DIR__ . '/admin.php'; m4is_zvyj::m4is_a6x52r(); } } private 
function m4is_mruzt() { global $wpdb; $m4is_rq0hia = [ 'MEMBERIUM_BETA' => 0,   'MEMBERIUM_DB_APP' => 'memberium_appname', 'MEMBERIUM_DB_ACTIONSETS' => 'memberium_actionsets', 'MEMBERIUM_DB_AFFILIATES' => 'memberium_affiliates', 'MEMBERIUM_DB_AFFILIATES_TOTALS' => 'memberium_affiliates_totals', 'MEMBERIUM_DB_CONTACTGROUPCATEGORIES' => 'memberium_contactgroupcategories', 'MEMBERIUM_DB_CONTACTS' => 'memberium_contacts', 'MEMBERIUM_DB_CONTACTTAGS' => 'memberium_contacttags', 'MEMBERIUM_DB_DATAFORMFIELDS' => 'i2sdk_dataformfields', 'MEMBERIUM_DB_EVENTS' => "{$wpdb->prefix}memberium_events", 'MEMBERIUM_DB_HTTPPOST' => 'memberium_httppost', 'MEMBERIUM_DB_INVOICES' => 'memberium_invoices', 'MEMBERIUM_DB_JOBS' => 'memberium_jobs', 'MEMBERIUM_DB_LANG' => "{$wpdb->prefix}memberium_lang", 'MEMBERIUM_DB_LOGINLOG' => 'memberium_loginlog', 'MEMBERIUM_DB_PAGETRACKING' => "{$wpdb->prefix}memberium_pagetracking", 'MEMBERIUM_DB_PRODUCTS' => 'memberium_products', 'MEMBERIUM_DB_QUEUE' => 'memberium_queue', 'MEMBERIUM_DB_SESSIONS' => "{$wpdb->prefix}memberium_sessions", 'MEMBERIUM_DB_SOCIAL' => "{$wpdb->prefix}memberium_socialaccount", 'MEMBERIUM_DB_TAGS' => 'memberium_tags', 'MEMBERIUM_DEBUG' => 0, 'MEMBERIUM_DB_WORDS' => "{$wpdb->prefix}memberium_words", 'MEMBERIUM_DEBUGLOG' => "{$_SERVER['DOCUMENT_ROOT']}/debuglog.txt", 'MEMBERIUM_DELIMITER' => ',', 'MEMBERIUM_ERRORLOG' => 0, 'MEMBERIUM_SKU' => 'm4is', 'MEMBERIUM_NESTING_LEVELS' => 10, 'MEMBERIUM_INSTALLED' => 1, 'MEMBERIUM_NOWYSIWYG' => 0, ]; foreach($m4is_rq0hia as $m4is_e3k_mi => $m4is_waxrhu) { defined($m4is_e3k_mi) ? '' : define($m4is_e3k_mi, $m4is_waxrhu); } } private 
function m4is_z40qw_() { $m4is_qfup8 = MEMBERIUM_HOME; $m4is_mn_xj = 'm4is_d2vzc'; register_activation_hook($m4is_qfup8, [$m4is_mn_xj, 'm4is_fpjv2']); register_uninstall_hook($m4is_qfup8, [$m4is_mn_xj, 'm4is_vvfujp']); register_deactivation_hook($m4is_qfup8, [$m4is_mn_xj, 'm4is_hpwynq']); } private 
function m4is_tt57() { if (! headers_sent() ) { $m4is_a6r4iu = session_status(); if ($m4is_a6r4iu === PHP_SESSION_DISABLED) { error_log('PHP Sessions Disabled'); return; } elseif ($m4is_a6r4iu === PHP_SESSION_ACTIVE) { return; } $m4is_tptod = $this->m4is_mmdrl( 'settings', 'db_sessions' ); $m4is_wnb23w = $this->m4is_mmdrl( 'settings', 'microcache_compat_session' ); if ($m4is_tptod) { m4is_q6lca::m4is_gopgz(); } if ( empty( $m4is_wnb23w ) ) { @session_start(); } } }  
function m4is_jgl15() { return $this->m4is_f_d2; }     
function m4is_l5kr8_( array $m4is_jpzyit ) : array { if ( ! $this->m4is_mmdrl( 'settings', 'plaintext_db', false ) ) { return $m4is_jpzyit; } foreach ( $m4is_jpzyit as $m4is_ho0w2 => $m4is_rhfd ) { $m4is_jpzyit[$m4is_ho0w2] = remove_accents( $m4is_rhfd );  $m4is_jpzyit[$m4is_ho0w2] = filter_var( $m4is_jpzyit[$m4is_ho0w2], FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_HIGH ); } return $m4is_jpzyit; } 
function m4is_ndf59( array $m4is_nz9s, $m4is_ho0w2 = 'fieldname', $m4is_rhfd = 'value' ) : array { $m4is_jpzyit = []; foreach ( $m4is_nz9s as $m4is_celntz => $m4is_i2t3ps ) { $m4is_jpzyit[ $m4is_i2t3ps[$m4is_ho0w2] ] = $m4is_i2t3ps[$m4is_rhfd]; unset( $m4is_nz9s[$m4is_celntz] ); } return $m4is_jpzyit; } 
function m4is_ab02( array $m4is_avxe, array $m4is_qp5t ) { $m4is_n3zp = []; foreach( $m4is_avxe as $m4is_ap3_ => $m4is_rhfd ) { if ( ! array_key_exists( $m4is_ap3_, $m4is_qp5t ) ) { $m4is_n3zp[$m4is_ap3_] = ''; } elseif ( $m4is_rhfd !== $m4is_qp5t[$m4is_ap3_] ) { $m4is_n3zp[$m4is_ap3_] = $m4is_qp5t[$m4is_ap3_]; } } return $m4is_n3zp;  } 
function m4is_nk208x( array $m4is_avxe, array $m4is_qp5t ) : array { return array_keys( array_diff_key( $m4is_avxe, $m4is_qp5t ) ); } 
function m4is_rdm7ak( array $m4is_avxe, array $m4is_qp5t ) : array { return array_diff_key( $m4is_qp5t, $m4is_avxe ); } 
function m4is_h6_9( array $m4is_i1i5, array $m4is_s52_9 ) { foreach( $m4is_s52_9 as $m4is_qouy8i ) { unset( $m4is_i1i5[$m4is_qouy8i ] ); } return $m4is_i1i5; } public $license_key_name = ''; public $login_error = ''; public $servername = '';  const DELIMITER = '|'; const DEBUGLOG = '/tmp/debuglog.txt'; const DB_DATAFORMFIELDS = 'i2sdk_dataformfields'; const PLUGIN_UPDATE_URL = 'https://licenseserver.webpowerandlight.com/memberium-is/current-version.php'; }
