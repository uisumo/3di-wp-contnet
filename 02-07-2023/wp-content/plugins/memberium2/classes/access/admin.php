<?php
/**
 * Copyright (c) 2017-2022 David J Bullock
 * Web Power and Light, LLC
 * https://webpowerandlight.com
 * support@webpowerandlight.com
 *
 */

 class_exists('m4is_emz57o') || die(); final 
class m4is_v98gbn { static 
function m4is_a6x52r() : self { static $m4is_jprj8; return isset( $m4is_jprj8 ) ? $m4is_jprj8 : $m4is_jprj8 = new self; }  private 
function __construct() {} 
function m4is_katqdw(){ $m4is_moqfu = 'gutenberg'; $m4is_iikfu = $this->m4is_ubq5l( $m4is_moqfu ); if( empty( $m4is_iikfu ) ){ return; }  $m4is_swhd5 = $this->m4is_vvsj(); $m4is_eg2e = m4is_l0uwos::PREFIX; $m4is_ahusy0 = m4is_l0uwos::NS; $m4is_j0n7 = [ 'WPAL_BLOCKS_PREFIX' => $m4is_eg2e, 'WPAL_BLOCKS_SETTINGS_TITLE' => $m4is_swhd5['settings_title'], 'WPAL_BLOCKS_KEYS_REMOVED_TEXT' => $m4is_swhd5['keys_removed_text'], 'debug' => defined('WPAL_BLOCKS_DEBUG') ? WPAL_BLOCKS_DEBUG : 0, 'notices' => [] ];  $m4is_znf9 = $this->m4is_ee0h(); if( ! empty($m4is_znf9) ){ $m4is_j0n7['tags'] = array_map( function($m4is_waxrhu) { return [ 'value' => $m4is_waxrhu['id'], 'label' => $m4is_waxrhu['text'] ]; }, $m4is_znf9 ); }  $m4is__nytb = [ 'type' => 'string', 'default' => '' ]; $m4is_j0n7['attributes'] = [ "{$m4is_eg2e}_memberships" => $m4is__nytb ]; foreach ($m4is_iikfu as $m4is_e3k_mi => $m4is_waxrhu) { $m4is_j1vz = isset($m4is_waxrhu['type']) && $m4is_waxrhu['type'] > '' ? $m4is_waxrhu['type'] : false; if ( isset($m4is_waxrhu['level']) ) { $m4is_iikfu[$m4is_e3k_mi]['label'] = str_replace("&nbsp;", " ", $m4is_waxrhu['label']); } else { $m4is_j0n7['attributes'][$m4is_waxrhu['name']] = $m4is__nytb; } } $m4is_j0n7['controls'] = $m4is_iikfu;  $m4is_j0n7['omitted_blocks'] = apply_filters("{$m4is_ahusy0}/{$m4is_moqfu}/settings/omitted_blocks", [ 'core/freeform', 'divi/placeholder', 'fl-builder/layout' ] );  $m4is_hdsl31 = 'wpal-blocks-gutenberg-editor'; $m4is__mto = plugin_dir_url(MEMBERIUM_HOME); $m4is_sosdfw = "{$m4is__mto}js/gutenberg-editor-access.js"; $m4is_pg9ue0 = "{$m4is__mto}css/gutenberg-editor-access.css"; $m4is_fe7l = [ 'react', 'react-dom', 'wp-block-editor', 'wp-blocks', 'wp-components', 'wp-data', 'wp-element', 'wp-hooks', 'wp-i18n', 'wp-polyfill' ]; wp_enqueue_script($m4is_hdsl31, $m4is_sosdfw, $m4is_fe7l, '1.2.0', false); wp_enqueue_style("{$m4is_hdsl31}-css", $m4is_pg9ue0, [], '1.2.0', 'all'); wp_localize_script($m4is_hdsl31, 'wpal_blocks_params', $m4is_j0n7); } 
function m4is_x8mgkb( $m4is_pfmsua = false, string $m4is_hdsl31 = '' ) : string { $m4is__mto = plugin_dir_url(MEMBERIUM_HOME); $m4is_hsyp0 = memberium_app()->m4is_gu3m(); wp_register_style("{$m4is_hdsl31}_s2css", "{$m4is__mto}css/wpal-select2.min.css", false, '4.0.3', 'all'); wp_register_script("{$m4is_hdsl31}_s2js", "{$m4is__mto}js/wpal-select2.full.min.js", ['jquery'], '4.0.3', true); if( $m4is_pfmsua ){ wp_enqueue_style("{$m4is_hdsl31}_s2css"); wp_enqueue_script("{$m4is_hdsl31}_s2js"); } return 'wpalSelect2'; }  
function m4is_hos3p( string $m4is_moqfu ) : array { $m4is_yp8jv = [ 'asset_id' => 0, 'invert_results' => 0 ]; $m4is_ahusy0 = m4is_l0uwos::NS; $m4is_yp8jv = apply_filters("{$m4is_ahusy0}/{$m4is_moqfu}/disabled/controls", $m4is_yp8jv); return is_array($m4is_yp8jv) ? $m4is_yp8jv : []; }  
function m4is_ubq5l( string $m4is_moqfu ) : array { $m4is_ahusy0 = m4is_l0uwos::NS; $m4is_eg2e = m4is_l0uwos::PREFIX; $m4is_swhd5 = $this->m4is_vvsj(); $m4is_ll9yd5 = 0; $m4is_iikfu = []; $m4is_hm8yuh = 0; $m4is_f51b4 = 10; $m4is_yp8jv = $this->m4is_hos3p($m4is_moqfu); $m4is_xydr = [ 'type' => 'checkbox', 'default' => '0', 'label_on' => _x('On', "{$m4is_ahusy0}/access/checkbox", $m4is_ahusy0), 'label_off' => _x('Off', "{$m4is_ahusy0}/access/checkbox", $m4is_ahusy0), 'return_value' => '1' ];  if (! array_key_exists( 'any_membership', $m4is_yp8jv ) ){ $m4is_iikfu[$m4is_ll9yd5] = $m4is_xydr; $m4is_iikfu[$m4is_ll9yd5]['name'] = "{$m4is_eg2e}_anymembership"; $m4is_iikfu[$m4is_ll9yd5]['label'] = sprintf( _x('Any %s', "{$m4is_ahusy0}/access/membership/level", $m4is_ahusy0), $m4is_swhd5['membership_levels']); $m4is_iikfu[$m4is_ll9yd5]['priority'] = $m4is_hm8yuh + $m4is_f51b4; $m4is_iikfu[$m4is_ll9yd5]['toggles'] = [ 'off' => false, 'on' => [ "{$m4is_eg2e}_membership_levels" => true, "{$m4is_eg2e}_anonymous_only" => false, "{$m4is_eg2e}_loggedin" => false, ] ]; $m4is_ll9yd5 ++; }  $m4is_fdf0v = $this->m4is_lc3g(); $m4is_fdf0v = isset( $m4is_fdf0v ) && is_array( $m4is_fdf0v ) ? $m4is_fdf0v : false; $m4is_q70xl = ! array_key_exists( 'memberships', $m4is_yp8jv ); if ( $m4is_fdf0v && $m4is_q70xl ) { foreach ( $m4is_fdf0v as $m4is_b40e_m => $m4is_tyoak ) { $m4is_iikfu[$m4is_ll9yd5] = $m4is_xydr; $m4is_iikfu[$m4is_ll9yd5]['name'] = "{$m4is_eg2e}_membership_levels-{$m4is_b40e_m}"; $m4is_iikfu[$m4is_ll9yd5]['label'] = stripslashes( $m4is_tyoak['name'] ) . "&nbsp;({$m4is_tyoak['level']})"; $m4is_iikfu[$m4is_ll9yd5]['priority'] = $m4is_hm8yuh + $m4is_f51b4; $m4is_iikfu[$m4is_ll9yd5]['level'] = $m4is_b40e_m; $m4is_iikfu[$m4is_ll9yd5]['toggles'] = [ 'on' => [ "{$m4is_eg2e}_anonymous_only" => false, "{$m4is_eg2e}_loggedin" => false ], 'off' => [ "{$m4is_eg2e}_anymembership" => false ] ]; $m4is_ll9yd5 ++; } }  if ( ! array_key_exists( 'logged_in_only', $m4is_yp8jv ) ){ $m4is_iikfu[$m4is_ll9yd5] = $m4is_xydr; $m4is_iikfu[$m4is_ll9yd5]['name'] = "{$m4is_eg2e}_loggedin"; $m4is_iikfu[$m4is_ll9yd5]['label'] = $m4is_swhd5['any_logged_in']; $m4is_iikfu[$m4is_ll9yd5]['priority'] = $m4is_hm8yuh + $m4is_f51b4; $m4is_iikfu[$m4is_ll9yd5]['toggles'] = [ 'on' => [ "{$m4is_eg2e}_membership_levels" => false, "{$m4is_eg2e}_anymembership" => false, "{$m4is_eg2e}_anonymous_only" => false ], 'off' => false, ]; $m4is_ll9yd5 ++; }  if ( ! array_key_exists('logged_out_only', $m4is_yp8jv ) ) { $m4is_iikfu[$m4is_ll9yd5] = $m4is_xydr; $m4is_iikfu[$m4is_ll9yd5]['name'] = "{$m4is_eg2e}_anonymous_only"; $m4is_iikfu[$m4is_ll9yd5]['label'] = $m4is_swhd5['logged_out_only']; $m4is_iikfu[$m4is_ll9yd5]['priority'] = $m4is_hm8yuh + $m4is_f51b4; $m4is_iikfu[$m4is_ll9yd5]['toggles'] = [ 'off' => false, 'on' => [ "{$m4is_eg2e}_membership_levels" => false, "{$m4is_eg2e}_anymembership" => false, "{$m4is_eg2e}_loggedin" => false ] ]; $m4is_ll9yd5 ++; }  if (! array_key_exists('invert_results', $m4is_yp8jv) ) { $m4is_iikfu[$m4is_ll9yd5] = $m4is_xydr; $m4is_iikfu[$m4is_ll9yd5]['name'] = "{$m4is_eg2e}_invert_results"; $m4is_iikfu[$m4is_ll9yd5]['label'] = $m4is_swhd5['invert']; $m4is_iikfu[$m4is_ll9yd5]['priority'] = $m4is_hm8yuh + $m4is_f51b4; $m4is_iikfu[$m4is_ll9yd5]['description'] = $m4is_swhd5['invert_desc']; $m4is_ll9yd5 ++; }  $m4is_pcvr8l = []; if ( ! array_key_exists( 'tags1', $m4is_yp8jv ) ){ $m4is_pcvr8l["{$m4is_eg2e}_access_tags"] = $m4is_swhd5['require_key']; } if ( ! array_key_exists( 'tags2', $m4is_yp8jv ) ){ $m4is_pcvr8l["{$m4is_eg2e}_access_tags2"] = $m4is_swhd5['and_require_key']; } if (! empty($m4is_pcvr8l) ){ foreach ($m4is_pcvr8l as $name => $label) { $m4is_iikfu[$m4is_ll9yd5] = [ 'name' => $name, 'type' => 'SELECT2', 'label' => $label, 'priority' => $m4is_hm8yuh + $m4is_f51b4 ]; $m4is_ll9yd5 ++; } }  if (! array_key_exists('contact_ids', $m4is_yp8jv) ) { $m4is_iikfu[$m4is_ll9yd5] = [ 'name' => "{$m4is_eg2e}_contact_ids", 'type' => 'textarea', 'label' => $m4is_swhd5['user_ids'], 'priority' => $m4is_hm8yuh + $m4is_f51b4, 'rows' => 1, 'description' => $m4is_swhd5['user_ids_desc'], 'sanitize' => 'number-csv' ]; $m4is_ll9yd5 ++; }  if (! array_key_exists('eval', $m4is_yp8jv) ){ $m4is_iikfu[$m4is_ll9yd5] = [ 'name' => "{$m4is_eg2e}_eval", 'type' => 'textarea', 'label' => $m4is_swhd5['eval'], 'priority' => $m4is_hm8yuh + $m4is_f51b4, 'rows' => 1, 'description' => $m4is_swhd5['eval_desc'] ]; $m4is_ll9yd5 ++; }  if (! array_key_exists( 'asset_id', $m4is_yp8jv) ){ $m4is_iikfu[$m4is_ll9yd5] = [ 'name' => "{$m4is_eg2e}_asset_id", 'type' => 'text', 'label' => $m4is_swhd5['asset_id'], 'priority' => $m4is_hm8yuh + $m4is_f51b4, 'description' => $m4is_swhd5['asset_id_desc'], 'sanitize' => 'slugify' ]; } return apply_filters("{$m4is_ahusy0}/{$m4is_moqfu}/control/config", $m4is_iikfu); }  
function m4is_lc3g(){ $m4is_fdf0v = memberium_app()->m4is_mmdrl('memberships'); return is_array($m4is_fdf0v) ? $m4is_fdf0v : []; }  
function m4is_vvsj( $m4is_ap3_ = false, $m4is_moqfu = '' ) { $m4is_ahusy0 = m4is_l0uwos::NS; $m4is_moqfu = ! empty( $m4is_moqfu ) ? "{$m4is_ahusy0}/access" : '';  $m4is_swhd5 = [ 'all_visitors' => 'All Visitors', 'and_key_desc' => 'The contact must have both the 1st Tag ID(s) AND this Tag ID(s) in order to view this item and these settings are only available for logged in users.', 'and_key_name' => 'AND Tag ID(s)', 'and_require_key' => 'AND Require Tag ID(s)', 'any_logged_in' => 'Any Logged In User', 'any_membership' => 'Any Membership Level', 'asset_id_desc' => 'Enter an admin ID to be used for filters. Non-leading _ and alpha / numerical characters only.', 'asset_id' => 'Asset ID', 'eval_desc' => 'Enter a boolean expression which evaluates to true to show or false to hide this element.', 'eval' => 'PHP Boolean Expression', 'hide' => 'Hide Completely', 'key_name' => 'Tag ID(s)', 'keys_removed_text' => 'Notice : The following Tag ID(s) have been removed', 'logged_in_msg' => 'settings are only available for logged in users.', 'logged_in_only' => 'Logged In Users Only', 'logged_out_only' => 'Logged Out Only', 'logged_out_user' => 'Logged Out Visitors Only', 'membership_levels' => 'Membership Levels', 'memberships' => 'Memberships', 'prohibited_action' => 'When Prohibited :', 'redirect_url' => 'Redirect URL', 'redirect' => 'Redirect', 'require_key' => 'Require Tag ID(s)', 'settings_title' => 'Memberium', 'user_ids_desc' => 'Comma Seperated values. Example : 123,456,789', 'user_ids' => 'Require User IDs', 'user_status' => 'User Status', ]; if( is_string( $m4is_ap3_ ) ){ return ! empty( $m4is_swhd5[$m4is_ap3_] ) ? _x( $m4is_swhd5[$m4is_ap3_], $m4is_moqfu, $m4is_ahusy0 ) : ''; } else{ return $m4is_swhd5; } }    
function m4is_hivk1g( string $m4is_j1vz ) : array { $m4is_swhd5 = $this->m4is_vvsj(); $m4is_iikfu = [ [ 'name' => 'status', 'label' => $m4is_swhd5['user_status'], 'type' => 'select2', 'data' => 'status', 'disable-search' => true, 'change' => "statusToggle", 'priority' => 100 ], [ 'name' => 'memberships', 'label' => $m4is_swhd5['memberships'], 'info' => "{$m4is_swhd5['memberships']} {$m4is_swhd5['logged_in_msg']}", 'type' => 'select2', 'data' => 'levels', 'change' => "contactToggle", 'multiple' => 1, 'priority' => 200 ], [ 'name' => 'tags1', 'label' => $m4is_swhd5['key_name'], 'info' => "{$m4is_swhd5['key_name']} {$m4is_swhd5['logged_in_msg']}", 'type' => 'select2', 'data' => 'keys', 'change' => "contactToggle", 'multiple' => 1, 'priority' => 300 ], [ 'name' => 'tags2', 'label' => $m4is_swhd5['and_key_name'], 'info' => $m4is_swhd5['and_key_desc'], 'type' => 'select2', 'data' => 'keys', 'change' => "contactToggle", 'multiple' => 1, 'priority' => 400 ], [ 'name' => 'eval', 'label' => $m4is_swhd5['eval'], 'type' => 'textarea', 'desc' => $m4is_swhd5['eval_desc'], 'priority' => 500 ], ]; if( $m4is_j1vz === 'taxonomy' ){ $m4is_iikfu[] = [ 'name' => 'prohibited_action', 'label' => $m4is_swhd5['prohibited_action'], 'type' => 'select2', 'data' => 'prohibited_actions', 'change' => 'prohibitedActionToggle', 'disable-search' => true, 'priority' => 600 ]; $m4is_iikfu[] = [ 'name' => 'redirect_url', 'label' => $m4is_swhd5['redirect_url'], 'type' => 'text', 'priority' => 700 ]; } return $m4is_iikfu; } 
function m4is_ifb6(){ return apply_filters('memberium/access/logged_in_only/fields', ['memberships', 'tags1', 'tags2'] ); } 
function m4is_la9pyi( array $m4is_j0n7 ) : array { $m4is_t_g0a = apply_filters( 'memberium/access/logged_in_settings', [ 'any_membership' => 1, 'memberships' => 1, 'tags1' => 1, 'tags2' => 1 ]); if ( is_array( $m4is_t_g0a ) && ! empty( $m4is_t_g0a ) ) { foreach ( $m4is_t_g0a as $m4is_ap3_ => $m4is_rhfd ) { if ( array_key_exists( $m4is_ap3_, $m4is_j0n7 ) ) { unset( $m4is_j0n7[$m4is_ap3_] ); } } } return $m4is_j0n7; } 
function m4is_ramz($m4is_qrhk_) { $m4is_fdf0v = empty($m4is_qrhk_) ? [] : array_filter( explode(',', $m4is_qrhk_) ); return in_array('any_membership', $m4is_fdf0v) ? 'any_membership' : $m4is_qrhk_; } 
function m4is_vqt6( string $type ){ $m4is_jrkhw2 = plugin_dir_url(MEMBERIUM_HOME); $m4is_sosdfw = "{$m4is_jrkhw2}js/core-wp-asset-access.js"; $m4is_hsyp0 = memberium_app()->m4is_gu3m(); $m4is_hdsl31 = "memb-core-wp-asset-access-js";  $this->m4is_x8mgkb( true ); wp_register_style('memberium_admin_css', $m4is_jrkhw2 . 'css/admin.css', false, $m4is_hsyp0, 'all'); wp_enqueue_style('memberium_admin_css');  $m4is_j0n7 = [ 'type' => $type, 'select2Data' => [ 'levels' => $this->m4is__ca2(), 'keys' => $this->m4is_ee0h(), 'status' => $this->m4is_cd7g(), 'prohibited_actions' => $this->m4is_r7np() ], 'I18n' => [ 'ids_removed' => $this->m4is_vvsj('keys_removed_text') ], 'loggedInOnlyKeys' => $this->m4is_ifb6() ];  wp_enqueue_script($m4is_hdsl31, $m4is_sosdfw, ['jquery'], $m4is_hsyp0, true); wp_localize_script($m4is_hdsl31, "membCoreAssetsAccessData", $m4is_j0n7); unset($m4is_jrkhw2, $m4is_sosdfw, $m4is_hsyp0, $m4is_hdsl31, $m4is_j0n7); }    
function m4is__ca2() : array { static $m4is_kwj9pd = []; if ( empty( $m4is_kwj9pd ) ) { $m4is_fdf0v = $this->m4is_lc3g(); $m4is_kwj9pd = [ [ 'id' => 'any_membership', 'text' => $this->m4is_vvsj( 'any_membership' ) ] ]; if( ! empty( $m4is_fdf0v ) ) { foreach ( $m4is_fdf0v as $m4is_b40e_m => $m4is_t3f61c ) { $m4is_kwj9pd[] = [ 'id' => $m4is_b40e_m, 'text' => stripslashes( $m4is_t3f61c['name'] ) . " ({$m4is_t3f61c['level']})" ]; } } } return $m4is_kwj9pd; } 
function m4is_ee0h() : array { static $m4is_dhrs = []; if( empty( $m4is_dhrs ) ) { $m4is_u30i = memberium_app()->m4is_zuw6j4( [], '' ); if( ! empty( $m4is_u30i ) ) { $m4is_dhrs = array_map( function( $m4is_e3k_mi, $m4is_waxrhu ) { return [ 'id' => $m4is_e3k_mi, 'text' => $m4is_waxrhu ]; }, array_keys( $m4is_u30i ), $m4is_u30i ); } } return $m4is_dhrs; } 
function m4is_cd7g() : array { $m4is_swhd5 = $this->m4is_vvsj(); return [ [ 'id' => '', 'text' => $m4is_swhd5['all_visitors'] ], [ 'id' => '1', 'text' => $m4is_swhd5['logged_in_only'] ], [ 'id' => '2', 'text' => $m4is_swhd5['logged_out_user'] ] ]; } 
function m4is_r7np() : array { $m4is_swhd5 = $this->m4is_vvsj(); return [ [ 'id' => '', 'text' => $m4is_swhd5['hide'] ], [ 'id' => '1', 'text' => $m4is_swhd5['redirect'] ] ]; } }
