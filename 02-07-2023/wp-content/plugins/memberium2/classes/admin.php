<?php
/**
 * Copyright (c) 2012-2022 David J Bullock
 * Web Power and Light, LLC
 * https://webpowerandlight.com
 * support@webpowerandlight.com
 *
 */

 class_exists('m4is_emz57o') || die(); final 
class m4is_zvyj { private $settings; private $notices; private $core; private $appname; private $non_enhanced_post_types = []; private $public_post_types = []; private $advanced_mode = false; private $preview_mode = false; private $minimum_i2sdk_version = 3.55; private $m4is_bxv7u; static 
function m4is_a6x52r() : self { static $m4is_jprj8; return isset( $m4is_jprj8 ) ? $m4is_jprj8 : $m4is_jprj8 = new self; } private 
function __construct() { $this->m4is_bxv7u = memberium_app(); $this->notices = []; $this->appname = $this->m4is_bxv7u->m4is_re5x( 'appname' ); $this->advanced_mode = (bool) $this->m4is_bxv7u->m4is_mmdrl( 'settings', 'show_advanced_options' ); $this->preview_mode = (int) $this->m4is_bxv7u->m4is_mmdrl( 'settings', 'preview_mode' ); $m4is_eu2_ = (string) $this->m4is_bxv7u->m4is_mmdrl( 'settings', 'version' ); $this->m4is_gxlj(); add_action( 'admin_menu', [$this, 'm4is_v43f_'] );  if ( ! method_exists( $this->m4is_bxv7u->m4is_nn6s_(), 'isVerified' ) || ! $this->m4is_bxv7u->m4is_nn6s_()->isVerified() ) { return; } if ($m4is_eu2_ <> $this->m4is_bxv7u->m4is_gu3m() ) { m4is_d2vzc::m4is_fpjv2(); } if (! m4is_o5aoir::m4is__qlbej() ) { m4is_o5aoir::m4is_qlzwa4(); } add_action('admin_enqueue_scripts', [$this, 'm4is_aa65h9'], 1); add_action('admin_init', [$this, 'm4is_h0kj'], 100); add_action('admin_notices', [$this, 'm4is_da83'] ); add_action('admin_post_memberium_scan_users', [$this, 'm4is_hx6lu']); add_action('wpmu_new_blog', [$this, 'm4is_bej7r'], 10, 6); add_filter('plugin_action_links', [$this, 'm4is__lywr'], 10, 2); add_filter('plugin_action_links', [$this, 'm4is_t1s7l'], 10, 4); if (! m4is_o5aoir::m4is__qlbej()) { return; } add_action( 'wp_loaded', [$this, 'm4is_awxdrb'], 1 ); add_action( 'admin_init', [$this, 'm4is_myqov'] ); add_action( 'admin_print_scripts-edit.php', [$this, 'm4is_nxzv9'] ); add_action( 'edit_form_after_title', [$this, 'm4is_n4sdz'] ); add_action( 'init', [$this, 'm4is_r1kq'], 5 ); add_action( 'init', [$this, 'm4is_bt6e'], 999999 ); add_action( 'save_post', [$this, 'm4is_qlf9'], 1, 3 ); add_action( 'save_post', [$this, 'm4is_v0yx5'] ); add_action( 'wp_ajax_memberium_save_bulk_edit', [$this, 'm4is_id9fs7'] ); if (m4is_o5aoir::m4is_m4q_z(['unlimited']) ) { if ( $this->m4is_bxv7u->m4is_mmdrl( 'settings', 'fast_user_list' ) ) { add_filter( 'manage_users_columns', [ $this, 'm4is_k98fe' ], PHP_INT_MAX ); } }  add_post_type_support('page', 'excerpt'); if ( function_exists( 'wp_generate_password' ) ) { if ( empty( $this->m4is_bxv7u->m4is_mmdrl( 'settings', 'random_seed' ) ) ) { $this->m4is_bxv7u->m4is_oqwxk( wp_generate_password( 16, FALSE, FALSE), 'settings', 'random_seed' ); } } require_once ABSPATH . 'wp-admin/includes/plugin.php'; $this->m4is_bxv7u->m4is_oqwxk( is_plugin_active( 'google-analytics-for-wordpress/googleanalytics.php'), 'plugins', 'google-analytics-for-wordpress' ); $this->m4is_bxv7u->m4is_oqwxk( is_plugin_active( 'nextend-facebook-connect/nextend-facebook-connect.php'), 'plugins', 'nextend-facebook-connect' ); add_filter( 'bulk_actions-edit-post', [ $this, 'm4is_bjca'] ); add_filter( 'bulk_actions-edit-page', [ $this, 'm4is_bjca'] ); add_filter( 'handle_bulk_actions-edit-post', [ $this, 'm4is_bkhc'], 10, 3 ); add_filter( 'handle_bulk_actions-edit-page', [ $this, 'm4is_bkhc'], 10, 3 ); add_filter( 'gutenberg_can_edit_post_type', [$this, 'm4is_n3zq'], PHP_INT_MAX, 2 ); add_action( 'user_new_form', [$this, 'm4is_i5lxc'] ); if ( isset( $_GET['memberium_ignore_notice'] ) ) { add_action( 'init', [$this, 'm4is_pd45'] ); } $this->m4is_ap508(); require_once $this->m4is_bxv7u->m4is_wule6i( 'marketplace/init.php' ); }  private 
function m4is_gxlj() { $m4is_n8zp05 = [ 'm4is_vtewl' => 'classes/admin_banner', 'm4is_c6uv4' => 'classes/access/admin-menu', 'm4is_mxg2' => 'classes/admin-tabs', 'm4is_qd7az' => 'classes/access/admin-taxonomy', 'm4is__95_' => 'classes/admin-ui', 'm4is__d4kf' => 'classes/access/admin-widgets', 'm4is_oz3r' => 'classes/diagnostics', 'm4is_xj90' => 'classes/post_sherpa', ]; $this->m4is_bxv7u->m4is_fovlg( $m4is_n8zp05 ); } 
function m4is_we7al() : int { $m4is__xysg = 0; $m4is__xysg = empty( $_POST['post_ID'] ) ? $m4is__xysg : (int) $_POST['post_ID']; $m4is__xysg = empty( $_GET['post'] ) ? $m4is__xysg : (int) $_GET['post']; return $m4is__xysg;  }   
function m4is_w5zj() : string { $m4is_j1vz = isset( $_GET['post_type'] ) ? $_GET['post_type'] : ''; $m4is_j1vz = empty( $m4is_j1vz ) ? get_post_type( $this->m4is_we7al() ) : $m4is_j1vz; $m4is_j1vz = empty( $m4is_j1vz ) ? 'post' : $m4is_j1vz; return $m4is_j1vz; } 
function m4is_kbi2( int $m4is__xysg, string $m4is_mrug, string $m4is_edow ) : bool { if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) { return false; } if (empty($_POST[$m4is_mrug]) || ! wp_verify_nonce($_POST[$m4is_mrug], $m4is_edow) ) { return false; } if (! current_user_can('edit_posts', $m4is__xysg) ) { return false; } return true; } 
function m4is_bjca(array $m4is_l926) : array { $m4is_l926['memberium-page-export'] = 'Page Export'; return $m4is_l926; } 
function m4is_bkhc(string $m4is_u4dt3v, string $m4is_jd80az, $m4is_ac5j) : string { if ($m4is_jd80az == 'memberium-page-export') { $m4is_ncnge = m4is_xj90::m4is_kgpuey($m4is_ac5j); return get_admin_url() . 'upload.php?item=' .(int) $m4is_ncnge; return get_permalink($m4is_ncnge); } return $m4is_u4dt3v; } 
function m4is__lywr(array $m4is_bjmh, string $m4is_qfup8) { if ($m4is_qfup8 == 'memberium2/memberium2.php') { $m4is_bjmh['starthere'] = sprintf('<a href="%s"> %s </a>', admin_url('admin.php?page=memberium'), __('Start Here', 'plugin_domain') ); $m4is_bjmh['settings'] = sprintf('<a href="%s"> %s </a>', admin_url('admin.php?page=memberium-options'), __('Settings', 'plugin_domain') ); $m4is_bjmh['help'] = sprintf('<a href="%s" target="_blank"> %s </a>', 'https://memberium.com/documentation/', __('Docs', 'plugin_domain') ); $m4is_bjmh['support'] = sprintf('<a href="%s" target="_blank"> %s </a>', 'https://memberium.com/support/', __('Support', 'plugin_domain') ); } return $m4is_bjmh; } 
function m4is_n3zq(bool $m4is_h2mwa, string $m4is_dmesa) : bool { if ($m4is_h2mwa) { $m4is_au751 = [ 'memb_shortcodeblocks', 'partials', ]; $m4is_dmesa = strtolower($m4is_dmesa); $m4is_h2mwa = ! in_array($m4is_dmesa, $m4is_au751); } return $m4is_h2mwa; } 
function m4is_t1s7l(array $m4is_l926, string $m4is_thud, $m4is_dao69, $m4is_moqfu) : array { if ($m4is_thud == 'i2sdk2/i2sdk2.php') { $m4is_l926['activate'] = '<em style="color:red;">No longer needed.  Please delete.</em>'; } return $m4is_l926; }    
function m4is_r1kq() { add_action( 'personal_options_update', [$this, 'm4is_lc9w0'], 1 ); add_filter( 'get_sample_permalink_html', [$this, 'm4is_i_asn'], 10, 5 ); if ( current_user_can( 'manage_options' ) ) {  add_action( 'delete_user', [$this, 'm4is_ydty'] ); add_action( 'load-users.php', [$this, 'm4is_dslyq_'] ); add_action( 'edit_user_profile', [$this, 'm4is_vb9z'], 2000 ); add_action( 'edit_user_profile_update', [$this, 'm4is_lc9w0'], 1 ); add_action( 'profile_update', [$this, 'm4is_r7rkcg'], 10, 2 ); add_action( 'show_user_profile', [$this, 'm4is_vb9z'] ); } if ( current_user_can( 'manage_options' ) ) { if ( MEMBERIUM_BETA ) { add_action( 'admin_notices', [$this, 'm4is_n735h'] ); } } if ( is_plugin_active( 'memberium2-installer/memberium2-installer.php' ) ) { deactivate_plugins( 'memberium2-installer/memberium2-installer.php' ); } } 
function m4is_i_asn( $m4is_fnc39, $m4is__xysg, $m4is_xz4whn, $new_slug, $m4is_pgsbl ) { if ( property_exists( $m4is_pgsbl, 'post_type' ) ) { if ( in_array( $m4is_pgsbl->post_type, ['partials', 'memb_shortcodeblocks'] ) ) { return null; } } return $m4is_fnc39; } 
function m4is_bt6e() { $this->non_enhanced_post_types = $this->m4is_bxv7u->m4is_mtur(); $m4is_dmesa = isset($_GET['post_type']) ? $_GET['post_type'] : 'post'; $m4is_lo2pt9 = ! in_array($m4is_dmesa, $this->non_enhanced_post_types); $m4is_lo2pt9 = $m4is_lo2pt9 || in_array($m4is_dmesa, ['memb_shortcodeblocks']); if ( $m4is_lo2pt9 ) { add_action( 'manage_pages_custom_column', [$this, 'm4is__2kju'], 10, 2 ); add_action( 'manage_posts_custom_column', [$this, 'm4is__2kju'], 10, 2 ); add_action( 'quick_edit_custom_box', [$this, 'm4is_owdq'], 10, 2 ); add_action( 'bulk_edit_custom_box', [$this, 'm4is_c5xy'], 10, 2 ); add_filter( 'manage_pages_columns', [$this, 'm4is_gib5sz'] ); add_filter( 'manage_posts_columns', [$this, 'm4is_gib5sz'] ); } } 
function m4is_n4sdz() { if (isset($_GET['post']) ) { $m4is_pgsbl = get_post($_GET['post']); if (empty($m4is_pgsbl->post_name) ) { return; } } else { return; } $m4is_yeag = ''; if ($m4is_pgsbl->post_type == 'partials') { $m4is_yeag = '[memb_include_partial id=' . $m4is_pgsbl->ID . ']'; } elseif ($m4is_pgsbl->post_type == 'memb_shortcodeblocks') { $m4is_yeag = '[membc_' . $m4is_pgsbl->post_name . ']'; } if (! empty($m4is_yeag) ) { echo '<h2>', $m4is_yeag, '</h2>'; } }    private 
function m4is_rtw1u() { global $wpdb; $m4is_ioxk = "DELETE FROM `{$wpdb->options}` WHERE `option_name` LIKE '%transient_memberium%' OR `option_name` LIKE '%transient_timeout_memberium%' ; "; $wpdb->query($m4is_ioxk); } 
function m4is_qmg0jt() { global $wpdb; $this->m4is_rtw1u(); $m4is_h8qxt = m4is__q5cn::m4is_kski(); $this->m4is_bxv7u->m4is_oqwxk( $m4is_h8qxt, 'settings', 'referral_partner_order' ); m4is_f84s3h::m4is_miqxc(); m4is_f84s3h::m4is_br8l(); m4is_f84s3h::m4is_faik(); m4is_f84s3h::m4is_omi1x4(); m4is_y96l1::m4is_xidq(); m4is_vvgc8::m4is_m_gb8n(); m4is_vvgc8::m4is_d9auv(); if (! empty( $this->m4is_bxv7u->m4is_mmdrl('settings', 'sync_ecommerce') ) ) { m4is_vvgc8::m4is_z3anvh(); } $this->m4is_bxv7u->m4is_gi0o(); $m4is_yqog2 = get_option('memberium_tables_updated', [] ); $m4is_yqog2['actionsets'] = time(); $m4is_yqog2['i2sdk_customfields'] = time(); $m4is_yqog2['tagcategories'] = time(); $m4is_yqog2['tags'] = time(); $m4is_yqog2['products'] = time(); $m4is_yqog2['subscriptionplans'] = time(); update_option('memberium_tables_updated', $m4is_yqog2); m4is__95_::m4is_hbfrj('Keap Synchronized', 'update'); } 
function m4is_rksu() { global $wpdb; $m4is_j3ik2e = get_option( 'memberium_tables', [] ); $m4is_dqth = []; $m4is_ioxk = 'SHOW TABLES'; $m4is_x8jhan = $wpdb->get_col( $m4is_ioxk ); foreach( $m4is_j3ik2e as $m4is_u13x ) { if ( ! in_array( $m4is_u13x, $m4is_x8jhan ) ) { $m4is_dqth[] = $m4is_u13x; } } return $m4is_dqth; } 
function m4is_xydx() {       } 
function m4is_aa65h9($m4is_uwsyca) {   $m4is_u7x4 = false; $m4is_u7x4 = $m4is_u7x4 || strpos($m4is_uwsyca, 'memberium') !== false; $m4is_bnuai = [ 'edit.php', 'post-new.php', 'post.php', 'user-edit.php', 'users.php' ]; $m4is_bnuai = apply_filters('memberium/enhanced_admin_scripts', $m4is_bnuai);  $m4is_u7x4 = $m4is_u7x4 || in_array($m4is_uwsyca, $m4is_bnuai); if ($m4is_u7x4) { $m4is_jrkhw2 = plugin_dir_url(MEMBERIUM_HOME); $m4is_ot4v7 = $this->m4is_bxv7u->m4is_gu3m(); wp_register_style('wpal_s2css', $m4is_jrkhw2 . 'css/wpal-select2.min.css', false, '4.0.3', 'all'); wp_register_script('wpal_s2js', $m4is_jrkhw2 . 'js/wpal-select2.full.min.js', ['jquery'], '4.0.3', true); wp_enqueue_style('wpal_s2css'); wp_enqueue_script('wpal_s2js'); wp_register_style('memberium_admin_css', $m4is_jrkhw2 . 'css/admin.css', false, $m4is_ot4v7, 'all'); wp_enqueue_style('memberium_admin_css'); wp_register_script('memberium_adminsettings', $m4is_jrkhw2 . 'js/admin-settings.js', false, $m4is_ot4v7); wp_enqueue_script('memberium_adminsettings'); wp_enqueue_style('font-awesome', 'https://use.fontawesome.com/releases/v5.12.0/css/all.css', false, '5.12.0'); } } 
function m4is_h0kj() {  if (is_network_admin() || isset($_GET['activate-multi']) ) { return; } if (is_admin() ) { $m4is_ap3_ = 'memberium/activation_timestamp'; $m4is_cotjnw = (time() - get_option($m4is_ap3_, time()) ); if ($m4is_cotjnw < 5) { update_option($m4is_ap3_, time() );  wp_safe_redirect(add_query_arg(['page' => 'memberium'], admin_url('admin.php') ) ); exit; } } } 
function m4is_n735h() { $m4is_ssdxa6 = $_GET; if (isset($m4is_ssdxa6['tab']) && $m4is_ssdxa6['tab'] == 'checklist' || ! current_user_can('manage_options') ) { return; } if (! get_user_meta(get_current_user_id(), 'memberium_ignore_notice_checklist', true) ) { $m4is_qljrs = $this->m4is_zonrv(true); if (! empty($m4is_qljrs['active']) ) { $m4is_vkc5 = m4is__95_::m4is_qn24qm('checklist'); $m4is_mn_xj = "updated"; $m4is_fgxy = '<h3 style="margin-bottom:6px;">Memberium Setup CheckList</h3>' . '<p>Your next setup checklist step is to ' . $m4is_qljrs['active'][0]['t'] . '</p><p><a href="admin.php?page=dashboard&tab=checklist"><strong>Click here</strong></a> to return to the setup checklist.</p>' . '<div style="text-align:right;"><p><a href="'. $m4is_vkc5 .'">Hide these Reminders</a></p></div>'; echo"<div class='{$m4is_mn_xj}'>{$m4is_fgxy}</div>"; } } } 
function m4is_pd45() { $m4is_ssdxa6 = $_GET; $m4is_q4c_xa = get_current_user_id(); $m4is_ap3_ = isset($m4is_ssdxa6['memberium_ignore_notice']) ? sanitize_text_field($m4is_ssdxa6['memberium_ignore_notice']) : ''; if (! empty($m4is_ap3_) ) { update_option("memberium/notice/{$m4is_ap3_}", 1); if (wp_get_referer() ) { wp_safe_redirect(wp_get_referer() ); } else { wp_safe_redirect(site_url() ); } } } 
function m4is_da83() { $m4is_vkc5 = m4is__95_::m4is_d6u3(1226); if (false && ! m4is_o5aoir::m4is__qlbej() ) { echo '<div class="error"><p><strong style="font-size:150%;color:red;">Memberium License Missing / Expired', $m4is_vkc5, '</strong></p>'; echo '<p>For possible causes, <a target="_blank" href="https://memberium.com/?p=1226">click here</a>.</p>'; echo '<p>If you have not yet purchased a license, please <a target="_blank" href="https://memberium.com/pricing/">purchase a license by clicking here</a></p>'; echo '<p>If you already have a license please <a target="_blank" href="https://memberium.com/support/">contact support by clicking here</a>.</p></div>'; } } private 
function m4is_g3762() { $m4is_tgj7k8 = false; $m4is_q4c_xa = get_current_user_id(); $m4is_pp5aht = explode( ',', $this->m4is_bxv7u->m4is_mmdrl( 'settings', 'allow_wpadmin_dashboard' ) ); if ( ! empty( $m4is_pp5aht ) ) { $m4is_tgj7k8 = true; foreach ( $m4is_pp5aht as $m4is_jzk7tr ) { if ( user_can( $m4is_q4c_xa, $m4is_jzk7tr ) ) { $m4is_tgj7k8 = false; break; } } } else { if ( ! $m4is_tgj7k8 ) { $m4is_wlv5 = $this->m4is_bxv7u->m4is_mmdrl( 'settings', 'allow_wpadmin', false ); if ($m4is_j196) { $m4is_tgj7k8 = false; } else { $m4is_tgj7k8 = true; } } } return ! $m4is_tgj7k8; }  
function m4is_awxdrb() { static $m4is_tg04 = false; $m4is_tg04 = $m4is_tg04 || defined( 'DOING_AJAX' ) && DOING_AJAX; $m4is_tg04 = $m4is_tg04 || function_exists( 'wp_doing_ajax' ) && wp_doing_ajax(); $m4is_tg04 = $m4is_tg04 || isset($_SERVER['SCRIPT_NAME']) && ( basename($_SERVER['SCRIPT_NAME']) == 'admin-post.php' ); $m4is_tg04 = $m4is_tg04 || $this->m4is_bxv7u->m4is_fop0d(); $m4is_tg04 = $m4is_tg04 || $this->m4is_g3762(); $m4is_tg04 = apply_filters( 'memberium/wpadmin/allow', $m4is_tg04 ); if ( $m4is_tg04 ) { return; }    $m4is_pizyx = wp_login_url($_SERVER['REQUEST_URI']);  if (is_user_logged_in() ) { $m4is_sxfbjo = isset( $_SESSION ) ? $_SESSION : $this->m4is_bxv7u->m4is_q4nu( get_current_user_id() ); if ($m4is_sxfbjo['memb_user']['login_page'] > 0) { $m4is_pizyx = get_permalink($m4is_sxfbjo['memb_user']['login_page']); } else { $m4is_pizyx = get_site_url(); } if ($m4is_sxfbjo['memb_user']['login_page'] == -1) { if (function_exists('bbp_get_user_profile_url') ) { $m4is_pizyx = bbp_get_user_profile_url($m4is_q4c_xa); } else { $m4is_sxfbjo['memb_user']['login_page'] = 0; } }  $m4is_jhd1 = function_exists('get_current_screen') ? get_current_screen() : false; if ($m4is_jhd1 && $m4is_jhd1->id == 'user-edit') { if (function_exists('bp_loggedin_user_domain') ) { $m4is_pizyx = bp_loggedin_user_domain(); } else { $pages = get_option('memberium_pages', [] ); $m4is_pizyx = isset($pages['profile_page']) ? get_permalink($pages['profile_page']) : $m4is_pizyx; } } } if (! $m4is_pizyx) { $m4is_pizyx = get_site_url(); } wp_redirect($m4is_pizyx, 302, 'Memberium Admin Dashboard Protection'); exit; }    
function m4is_bej7r( $m4is_q_to1c, $m4is_q4c_xa, $m4is_cbcf, $m4is_s3dnu, $m4is_amx7k, $m4is_ti8od ) { global $wpdb; if (is_plugin_active_for_network('memberium2/memberium2.php') ) { $m4is_enqyc = $wpdb->blogid; switch_to_blog($m4is_q_to1c); m4is_d2vzc::m4is_yw1mi( false ); switch_to_blog($m4is_enqyc); } }    
function m4is_klro8($m4is_ejfox = 0, $m4is_yeag = '') { $m4is_ejfox = (int) $m4is_ejfox; if (! $m4is_ejfox) { return; } if (empty($m4is_yeag) ) { $m4is_yeag = $m4is_ejfox; } return "<span class='update-plugins count-{$m4is_ejfox}' title='{$m4is_yeag}'><span class='update-count'>{$m4is_yeag}</span></span>"; } 
function m4is_k8hv46() { static $m4is_ejfox; if ($m4is_ejfox) { return $m4is_ejfox; } global $wpdb; $m4is_io8_tp = $this->m4is_bxv7u->m4is_re5x('appname'); $m4is_ejfox = $wpdb->get_var("SELECT count(*) FROM `" . MEMBERIUM_DB_HTTPPOST . "` WHERE `appname` = '{$m4is_io8_tp}';"); $m4is_ejfox = $m4is_ejfox + $wpdb->get_var("SELECT count(*) FROM `" . MEMBERIUM_DB_LOGINLOG . "` WHERE `appname` = '{$m4is_io8_tp}';"); return $m4is_ejfox; } 
function m4is_y5lk() { static $m4is_ejfox; if ($m4is_ejfox) { return $m4is_ejfox; } $i2sdk_options = $this->m4is_bxv7u->get_i2sdk_options(); $m4is_ejfox = $i2sdk_options['server_verified'] ? 0 : 1; $m4is_ejfox = $m4is_ejfox + empty($i2sdk_options['app_name']) ? 1 : 0; $m4is_ejfox = $m4is_ejfox + empty($i2sdk_options['api_key']) ? 1 : 0; $m4is_ejfox = $m4is_ejfox + class_exists('i2sdk_class') ? 0 : 1; return $m4is_ejfox; } 
function m4is_v43f_() { $m4is__i4j2 = 'manage_options'; if (! current_user_can($m4is__i4j2) ) { return; } $m4is_wql7a2 = m4is_o5aoir::m4is__qlbej(); $m4is_l0waz = 'dashicons-groups';  $m4is_bd92x = $this->m4is_bxv7u->get_i2sdk_options(); $m4is_xhf4gm = 'memberium'; $m4is_dwgs_ = $m4is__i4j2; $m4is_ksj1wl = 2; $m4is_ll9yd5 = $this->m4is_y5lk();   if (! empty($m4is_ll9yd5) ) { add_menu_page('', 'Memberium ' . $this->m4is_klro8(1, 'Alert'), $m4is__i4j2, $m4is_xhf4gm, [$this, 'm4is_qze1o_'], $m4is_l0waz, $m4is_ksj1wl); add_submenu_page($m4is_xhf4gm, 'Memberium Support', 'Support', $m4is_dwgs_, 'memberium-support', [$this, 'm4is_ik_gqb']); if (class_exists('i2sdk_class') ) { add_submenu_page($m4is_xhf4gm, 'Keap Connection', 'Keap Connection ' . $this->m4is_klro8(1, 'Unconfigured'), $m4is__i4j2, 'i2sdk-admin', 'i2sdk_admin_menu'); } return; }  if (! $m4is_wql7a2) { add_menu_page('Memberium', 'Memberium', $m4is__i4j2, $m4is_xhf4gm, [$this, 'm4is_qze1o_'], $m4is_l0waz, $m4is_ksj1wl); add_submenu_page($m4is_xhf4gm, 'Memberium Support', 'Support', $m4is_dwgs_, 'memberium-support', [$this, 'm4is_ik_gqb']); add_submenu_page($m4is_xhf4gm, 'Keap Connection', 'Keap Connection', $m4is__i4j2, 'i2sdk-admin', 'i2sdk_admin_menu'); add_submenu_page($m4is_xhf4gm, '', '', $m4is__i4j2, $m4is_xhf4gm, [$this, 'm4is_a9wa']); return; }  if (! class_exists('i2sdk_class') || ! method_exists( $this->m4is_bxv7u->m4is_nn6s_(), 'isVerified') || ! $this->m4is_bxv7u->m4is_nn6s_()->isVerified() ) { add_menu_page('Memberium', 'Memberium', $m4is__i4j2, $m4is_xhf4gm, [$this, 'm4is_qze1o_'], $m4is_l0waz, $m4is_ksj1wl); add_submenu_page($m4is_xhf4gm, 'Memberium Support', 'Support', $m4is_dwgs_, 'memberium-support', [$this, 'm4is_ik_gqb']); if (class_exists('i2sdk_class') ) { add_submenu_page($m4is_xhf4gm, 'Keap Connection', 'Keap Connection', $m4is__i4j2, 'i2sdk-admin', 'i2sdk_admin_menu'); } return; }  add_menu_page('', 'Memberium', $m4is_dwgs_, $m4is_xhf4gm, '', $m4is_l0waz, $m4is_ksj1wl); add_submenu_page($m4is_xhf4gm, 'Start Here', 'Start Here', $m4is_dwgs_, $m4is_xhf4gm, [$this, 'm4is_a9wa']); add_submenu_page($m4is_xhf4gm, 'Memberium Support', 'Support', $m4is_dwgs_, 'memberium-support', [$this, 'm4is_ik_gqb']); add_submenu_page($m4is_xhf4gm, 'Memberium Settings', 'Settings', $m4is_dwgs_, 'memberium-options', [$this, 'm4is_erup']); add_submenu_page($m4is_xhf4gm, 'Memberium Memberships', 'Memberships', $m4is_dwgs_, 'memberium-memberships', [$this, 'm4is_sdaewy']); add_submenu_page($m4is_xhf4gm, 'Memberium Partials', 'Partials', $m4is_dwgs_, 'edit.php?post_type=partials'); add_submenu_page($m4is_xhf4gm, 'Memberium Custom Shortcodes', 'Custom Shortcodes', $m4is_dwgs_, 'edit.php?post_type=memb_shortcodeblocks'); add_submenu_page($m4is_xhf4gm, 'Memberium eCommerce Integration', 'eCommerce', $m4is_dwgs_, 'memberium-ecommerce', [$this, 'm4is_vew7']); add_submenu_page($m4is_xhf4gm, 'Memberium Remote Files Configuration', 'Remote Files', $m4is_dwgs_, 'memberium-remote-files', [$this, 'm4is_gx93as']); add_submenu_page($m4is_xhf4gm, 'Sync Options', 'Sync Options', $m4is_dwgs_, 'memberium-sync-options', [$this, 'm4is_e4a5y']); do_action('memberium_admin_menu_addons', $m4is_xhf4gm); if (defined('WPSEO_FILE') || defined('GAWP_FILE') ) { add_submenu_page($m4is_xhf4gm, 'Memberium Google Analytics', 'Google Analytics', $m4is__i4j2, 'memberium-ga', [$this, 'm4is_bxk01']); } $m4is_ll9yd5 = $this->m4is_k8hv46(); add_submenu_page($m4is_xhf4gm, 'Memberium Logs', 'Logs '. $this->m4is_klro8($m4is_ll9yd5), $m4is__i4j2, 'memberium-logs', [$this, 'm4is_e327r']); add_submenu_page($m4is_xhf4gm, 'Keap Connection', 'Keap Connection', $m4is__i4j2, 'i2sdk-admin', 'i2sdk_admin_menu');  add_submenu_page(null, null, null, $m4is_dwgs_, 'dashboard', [$this, 'm4is_a9wa']); add_submenu_page(null, null, null, $m4is_dwgs_, 'memberium-welcome-screen', [$this, 'm4is_a9wa']); }     
function m4is_h3awf5() { $m4is_t7i0bz = 'memberium::manualupdate::list'; $m4is_da6e = base64_decode( 'aHR0cHM6Ly9saWNlbnNlc2VydmVyLndlYnBvd2VyYW5kbGlnaHQuY29tL3VwZGF0ZXMvdXBkYXRlLWxpc3QucGhw' );  $m4is_j0n7 = get_transient( $m4is_t7i0bz ); $result = []; if ( is_array( $m4is_j0n7 ) ) { $result = $m4is_j0n7; } else { $m4is_j0n7 = wp_remote_get( $m4is_da6e );  if ( is_array( $m4is_j0n7 ) ) { $m4is_j0n7 = json_decode( $m4is_j0n7['body'], true ); set_transient( $m4is_t7i0bz, $m4is_j0n7, 600 ); } } return $m4is_j0n7; } 
function m4is_i89a($m4is_jifvx = 'memberium2') { if ( ! wp_is_writable( __DIR__ ) ) { echo 'Plugin Folder Not Writeable</p>'; return; } $m4is_n3zp = $this->m4is_h3awf5(); $m4is_o2qgd5 = $this->m4is_bxv7u->m4is_gu3m(); $output = '<select name="manual_upgrade" style="width:250px !important;">'; if ( is_array( $m4is_n3zp ) ) { foreach ( $m4is_n3zp as $m4is_b40e_m=>$m4is_g68c ) { $output .= '<option value="' . $m4is_b40e_m . '" ' .($m4is_o2qgd5 == $m4is_g68c['version'] ? ' selected="selected" ' : '') . '>' . $m4is_g68c['name'] . ' ' . $m4is_g68c['comments'] . '</option>'; } } $output .= '</select>&nbsp;<input name="manual_upgrade_confirm" value="1" type="checkbox">Confirm Update'; return $output; } 
function m4is_bpkxq( int $m4is_j59w7v, string $m4is_jifvx ) { $m4is_n3zp = $this->m4is_h3awf5($m4is_jifvx); if (isset($m4is_n3zp[$m4is_j59w7v]['url']) ) { $m4is_igqjih = WP_PLUGIN_DIR; $m4is_itpo = ABSPATH . '.maintenance'; $m4is_iov8jz = 'PD9waHAgJHVwZ3JhZGluZyA9IHRpbWUoKTs=';  $m4is_rhacq = $m4is_n3zp[$m4is_j59w7v]['url'];  ignore_user_abort();  $m4is_pvxbs = $m4is_zv59 = download_url( $m4is_rhacq, 300 );  if ( file_exists( $m4is_pvxbs ) ) {   require_once ABSPATH .'/wp-admin/includes/file.php';  WP_Filesystem(); file_put_contents( $m4is_itpo, $m4is_iov8jz ); if ( ! function_exists( 'disk_free_space' ) ) { add_filter( 'wp_doing_cron', '__return_false', 10, 1 ); } unzip_file($m4is_pvxbs, $m4is_igqjih); remove_filter( 'wp_doing_cron', '__return_false', 10 ); unlink(ABSPATH . '.maintenance'); unlink($m4is_pvxbs); } if ( function_exists( 'opcache_reset' ) ) { opcache_reset(); } echo '<p>Upgrade Process Completed.</p>'; echo '<p><a href="', admin_url(), 'admin.php?page=memberium">Continue</a></p>'; exit; } else { m4is__95_::m4is_hbfrj('<p><strong>Memberium</strong>:  Unable to install update</p>', 'error'); } }    
function m4is_r7rkcg($user_id, $old_user_data) {   } 
function m4is_ydty( $m4is_q4c_xa ) { $m4is_nzrv1 = get_userdata($m4is_q4c_xa); $m4is_aicfp = m4is_zbyh::m4is_fhxr6($m4is_q4c_xa); if ( $m4is_aicfp > 0 ) { m4is_zbyh::m4is__98tl( $m4is_aicfp ); } } 
function m4is_ipj0r() {  global $wpdb;  $m4is_ioxk = 'SET SQL_BIG_SELECTS = 1;'; $wpdb->query($m4is_ioxk); $m4is_w6mt = MEMBERIUM_DB_TAGS; $m4is_ioxk = "SELECT " . "`{$m4is_w6mt}_2`.`id` as `id`, " . "{$m4is_w6mt}.id as payf_id, " . "{$m4is_w6mt}_3.id as cancel_id, " . "{$m4is_w6mt}_4.id as suspend_id, " . "{$m4is_w6mt}_2.name " . "FROM " . "{$m4is_w6mt}, " . "{$m4is_w6mt} as {$m4is_w6mt}_2 " . "LEFT OUTER JOIN  {$m4is_w6mt} as {$m4is_w6mt}_3 ON CONCAT({$m4is_w6mt}_2.name, 'CANC') = {$m4is_w6mt}_3.name AND {$m4is_w6mt}_3.appname = '{$this->appname}' " . "LEFT OUTER JOIN  {$m4is_w6mt} as {$m4is_w6mt}_4 ON CONCAT({$m4is_w6mt}_2.name, 'SUSP') = {$m4is_w6mt}_4.name AND {$m4is_w6mt}_4.appname = '{$this->appname}' " . "WHERE CONCAT({$m4is_w6mt}_2.name, 'PAYF') = {$m4is_w6mt}.name " . "AND {$m4is_w6mt}.appname   = '{$this->appname}' " . "AND {$m4is_w6mt}_2.appname = '{$this->appname}' " . "ORDER BY " . "{$m4is_w6mt}_2.name ASC"; $m4is_g8ojt = $wpdb->get_results($m4is_ioxk, ARRAY_A); $m4is_kikx = []; foreach ($m4is_g8ojt as $m4is_o46ba9) { $m4is_kikx[$m4is_o46ba9['id']] = [ 'name' => $m4is_o46ba9['name'], 'payf_id' => $m4is_o46ba9['payf_id'], 'cancel_id' => $m4is_o46ba9['cancel_id'], 'suspend_id' => $m4is_o46ba9['suspend_id'] ]; } return $m4is_kikx; } 
function m4is_s46yj(string $m4is_enmq, string $m4is_z4zva_ = 'Text', int $m4is_li3g = 0) { if (empty($m4is_enmq) ) { return; } $m4is_enmq = trim($m4is_enmq); $m4is_li3g = (int) $m4is_li3g; $m4is_z4zva_ = trim($m4is_z4zva_); if ($m4is_li3g == 0) { $m4is_hkp7s = [ 'Id', 'Name' ]; $m4is_kc1q = [ 'Id' => '%' ]; $m4is_qkf0_8 = m4is_f84s3h::m4is_yt5p0l('DataFormGroup', 1000, 0, $m4is_kc1q, $m4is_hkp7s); $m4is_li3g = (int) $m4is_qkf0_8[0]['Id']; } if ($m4is_li3g > 0) { m4is_f84s3h::m4is_wv2a5n('Contact', $_POST['new_crm_field'], $m4is_z4zva_, $m4is_li3g); m4is_f84s3h::m4is_br8l(); } else { m4is__95_::m4is_hbfrj('Unable to add new custom field.  Please create a custom tab and custom group in Keap first.'); } }  
function m4is_veu5f($m4is_rxc9n1 = [] ) { global $wpdb; $m4is_p78sgz = [ 'exclude' => 'topic,reply' . (defined('MEMBERIUM_IGNORE_POSTTYPE') ? (',' . MEMBERIUM_IGNORE_POSTTYPE) : ''), 'entries' => [], ]; $m4is_rxc9n1 = wp_parse_args($m4is_rxc9n1, $m4is_p78sgz); $m4is_rxc9n1['exclude'] = "'" . implode("','", explode(',', $m4is_rxc9n1['exclude']) ) . "'"; unset($m4is_p78sgz); $m4is_ioxk = "SELECT `ID`, `post_title` FROM `{$wpdb->posts}` WHERE `post_status` = 'publish' AND `post_type` IN ('" . implode("','", m4is__95_::m4is_gel18() ) . "') AND `post_type` NOT IN (" . $m4is_rxc9n1['exclude'] . ") ORDER BY `id` ASC;"; $m4is_bnuai = $wpdb->get_results($m4is_ioxk, ARRAY_A); $m4is_xq5r_m[] = [ 'id' => 0, 'text' => '(Default / Homepage)' ]; foreach ($m4is_bnuai as $m4is_b40e_m=>$m4is_zvxijt) { $m4is_xq5r_m[] = [ 'id' => $m4is_zvxijt['ID'], 'text' => "{$m4is_zvxijt['post_title']} ({$m4is_zvxijt['ID']})", ]; unset($m4is_bnuai[$m4is_b40e_m]); } unset($m4is_zvxijt, $m4is_ioxk); $m4is_xq5r_m = json_encode($m4is_xq5r_m, JSON_INVALID_UTF8_SUBSTITUTE); return $m4is_xq5r_m; }  
function m4is_tzre_($m4is_w5ky4q = [] ) { $m4is_nzrv1 = get_user_by('id', get_current_user_id() ); $m4is_bqel = $m4is_nzrv1->allcaps; $m4is_xmnb1d = []; foreach($m4is_bqel as $cap => $caps) { $m4is_xmnb1d[] = [ 'id' => $cap, 'text' => ucwords(strtr($cap, '_', ' ') ) ]; } return json_encode($m4is_xmnb1d); } 
function m4is_a7ear($args = [] ) { }    
function m4is_czy0u($m4is_lsnol) { $m4is_lsnol['allow_unsafe_link_target'] = true; return $m4is_lsnol; } 
function m4is_myqov() { $m4is_dmesa = $this->m4is_w5zj(); $m4is_ifjh = m4is__95_::m4is_gel18(); add_action( 'admin_footer', [$this, 'm4is_o8eji3']) ; if ( in_array( $m4is_dmesa, $this->non_enhanced_post_types ) ) { return; } add_meta_box( 'is4wp-member-access' , 'Memberium Protection', [$this, 'm4is_uiyaz'], $m4is_dmesa, 'side' ); add_meta_box( 'is4wp-page-templates', 'Membership Templates', [$this, 'm4is_swl0'], $m4is_dmesa, 'normal' ); add_meta_box( 'is4wp-course-grid', 'Membership Course Grid', [$this, 'm4is_tecao'], $m4is_dmesa, 'side' ); add_action( 'save_post', [$this, 'm4is_g_irh'] ); add_action( 'save_post', [$this, 'm4is_q7uha5'] ); add_action( 'save_post', [$this, 'm4is_jehw'] ); if ( ! in_array( $m4is_dmesa, $m4is_ifjh ) ) { return; } if ( in_array( $m4is_dmesa, ['partials', 'memb_shortcodeblocks', 'elementor_library'] ) ) { return; } if ( ! current_user_can( 'manage_options' ) ) { return; } add_meta_box( 'is4wp-custom-code', 'Memberium Custom Page Code', [$this, 'm4is_wqynae'], $m4is_dmesa, 'normal' ); add_action( 'save_post', [$this, 'm4is_f9cz3o'] ); } 
function m4is_o8eji3() { echo '<!-- metabox footer -->';   $m4is_znf9 = $this->m4is_bxv7u->m4is_ee0h( TRUE ); $m4is_znf9 = $m4is_znf9['mc']; $m4is_q4i2j = []; $m4is_q4i2j[] = [ 'id' => 0, 'text' => '(None)' ]; foreach ( (array) $m4is_znf9 as $m4is_dgjydi => $m4is_w9feq2) { $m4is_q4i2j[] = [ 'id' => $m4is_dgjydi, 'text' => "{$m4is_w9feq2} ({$m4is_dgjydi})" ]; } $m4is_meysf = []; $m4is_meysf[] = [ 'id' => 0, 'text' => '(None)' ]; foreach ( (array) $m4is_znf9 as $m4is_dgjydi => $m4is_w9feq2) { $m4is_meysf[] = [ 'id' => $m4is_dgjydi, 'text' => "{$m4is_w9feq2} ({$m4is_dgjydi})" ]; $m4is_meysf[] = [ 'id' => - $m4is_dgjydi, 'text' => "Not {$m4is_w9feq2} (-{$m4is_dgjydi})" ]; } $m4is_q4i2j = json_encode( $m4is_q4i2j ); $m4is_meysf = json_encode( $m4is_meysf ); unset( $m4is_znf9, $m4is_dgjydi, $m4is_w9feq2 ); echo '<script>'; echo '	var taglist = ', $m4is_q4i2j, ';'; echo '	var taglist2 = ', $m4is_meysf, ';'; echo '	var memb_coursegrid_i18n = '. json_encode([ 'locked' => [ 'title' => __('Select Locked Course Thumbnail', 'memberium'), 'button' => __('Set Locked Course Thumbnail', 'memberium'), 'remove' => __('Remove Locked Course Thumbnail', 'memberium'), ], 'unlocked' => [ 'title' => __('Select Unlocked Course Thumbnail', 'memberium'), 'button' => __('Set Unlocked Course Thumbnail', 'memberium'), 'remove' => __('Remove Unlocked Course Thumbnail', 'memberium'), ] ]) .';'; echo '</script>'; unset($actionsets, $m4is_znf9); $m4is_eu2_ = $this->m4is_bxv7u->m4is_mmdrl( 'settings', 'version' ); wp_register_script('memberium_postmeta', plugin_dir_url( MEMBERIUM_HOME ) . 'js/postmetabox.js', [], $m4is_eu2_, true); wp_enqueue_script('memberium_postmeta'); } 
function m4is_swl0() { $m4is_hh79 = $this->m4is_ggin(); echo '<div class="memb_template_options">'; echo '<label for="_is4wp_page_template">' . _e("Install Page Template", 'memberium') . '</label> '; echo '<select class="actionset-selector" name="_is4wp_page_template" style="width:100%; max-width:100%">'; echo '<option value="">(No Template)</option>'; if (is_array($m4is_hh79) ) { foreach ($m4is_hh79 as $m4is_hzmk => $m4is_i0ltb) { echo '<option value="', $m4is_hzmk + 1, '">', $m4is_i0ltb['name'], '</option>'; } } echo '</select>'; echo '</div>'; } 
function m4is_q7uha5() { $m4is_pgsbl = $_POST; if (! empty($m4is_pgsbl['_is4wp_page_template']) ) { $this->m4is_prf9($m4is_pgsbl['post_ID'], ($m4is_pgsbl['_is4wp_page_template'] - 1) ); } return; } 
function m4is_tecao(){ global $post; $m4is_ti8od = get_post_meta( $post->ID, '_memberium/coursegrid/config', true ); $m4is_ab48 = [ 'unlocked' => __('Unlocked', 'memberium'), 'locked' => __('Locked', 'memberium') ]; echo '<div class="memb_coursegrid_options">'; wp_nonce_field( $this->m4is_bxv7u->m4is_yl5j8(), "memberium_coursegrid_nonce_{$post->ID}"); $m4is__4sba = '_memb_coursegrid'; foreach ($m4is_ab48 as $m4is_e3k_mi => $m4is_a4jlfw) { $m4is_tofpz = empty( $m4is_ti8od[$m4is_e3k_mi] ) ? '' : $m4is_ti8od[$m4is_e3k_mi]; $m4is_afkz64 = empty( $m4is_tofpz['url'] ) ? '' : esc_url( $m4is_tofpz['url'] ); $m4is_pb3qa = empty( $m4is_tofpz['id'] ) ? 0 : (int) $m4is_tofpz['id']; echo "<div class=\"memb_coursegrid_thumbnail\" data-key=\"{$m4is_e3k_mi}\">"; if( ! empty( $m4is_afkz64 ) ){ $m4is_sp3n = sprintf( __( 'Remove %s Course Thumbnail', 'memberium' ), $m4is_a4jlfw ); echo "<a class=\"memb_coursegrid_thumbnail_remove\" href=\"#\" title=\"{$m4is_sp3n}\">"; echo "<span class=\"dashicons dashicons-dismiss\"></span>"; echo "</a>"; } echo "<br><label for=\"{$m4is_e3k_mi}_url\">" . sprintf( __( '%s Thumbnail', 'memberium' ), $m4is_a4jlfw) . "</label> "; echo "<div class=\"memb_coursegrid_preview\">"; echo ! empty($m4is_afkz64) ? "<img src=\"{$m4is_afkz64}\"/>" : ''; echo "</div>"; echo "<div class=\"memb_coursegrid_input_button_wrap wp-clearfix\">"; echo "<input type=\"url\" class=\"large-text memb_coursegrid_thumbnail_url\" name=\"{$m4is__4sba}[{$m4is_e3k_mi}][url]\" id=\"{$m4is_e3k_mi}_url\" value=\"{$m4is_afkz64}\">"; echo "<button type=\"button\" class=\"button memb_coursegrid_thumbnail_upload\" id=\"{$m4is_tofpz}_upload\">"; echo "<span class=\"dashicons dashicons-format-image\"></span>"; echo "<span class=\"screen-reader-text\">"; echo sprintf( __( 'Set %s Thumbnail', 'memberium' ), $m4is_a4jlfw ); echo "</span>"; echo "</button>"; echo "</div>"; echo "<input type=\"hidden\" class=\"memb_coursegrid_thumbnail_id\" name=\"{$m4is__4sba}[{$m4is_e3k_mi}][id]\" id=\"{$m4is_e3k_mi}_id\" value=\"{$m4is_pb3qa}\">"; echo "</div>"; } $m4is_alg0m = empty( $m4is_ti8od['locked_url'] ) ? '' : esc_url( $m4is_ti8od['locked_url'] );  $m4is_nxs4 = empty( $m4is_ti8od['excerpt'] ) ? '' : $m4is_ti8od['excerpt'];  $m4is_rprd_t = empty( $m4is_ti8od['order'] ) ? 0 : $m4is_ti8od['order'];  echo "<br><label for=\"memb_coursegrid_locked_url\">" . __( 'Locked Course URL', 'memberium' ) . "</label> "; echo "<input name=\"{$m4is__4sba}[locked_url]\" type=\"text\" id=\"memb_coursegrid_locked_url\" value=\"{$m4is_alg0m}\" class=\"widefat\">"; echo "<br><br><label for=\"memb_coursegrid_excerpt\">" . __( 'Course Excerpt', 'memberium' ) . "</label> "; echo "<textarea id=\"memb_coursegrid_excerpt\" rows=\"4\" name=\"{$m4is__4sba}[excerpt]\" class=\"widefat\">{$m4is_nxs4}</textarea>"; echo "<br><br><label for=\"memb_coursegrid_order\">" . __( 'Course Order', 'memberium' ) . "</label> "; echo "<input name=\"{$m4is__4sba}[order]\" type=\"number\" max=\"9999\" id=\"memb_coursegrid_order\" value=\"{$m4is_rprd_t}\">"; echo '</div>'; } 
function m4is_jehw( $m4is__xysg ){  if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) { return; } $m4is_s3_zp1 = $_POST;  if (empty($m4is_s3_zp1["memberium_coursegrid_nonce_{$m4is__xysg}"]) || ! wp_verify_nonce($m4is_s3_zp1["memberium_coursegrid_nonce_{$m4is__xysg}"], $this->m4is_bxv7u->m4is_yl5j8() ) ) { return; }  if (! empty($m4is_s3_zp1['post_type']) && 'page' == $m4is_s3_zp1['post_type']) { if (! current_user_can('edit_pages', $m4is__xysg) ) { return; } } else { if (! current_user_can('edit_posts', $m4is__xysg) ) { return; } }  $m4is_j0n7 = []; if (! empty($m4is_s3_zp1['_memb_coursegrid']) ) { $m4is__zksg9 = $m4is_s3_zp1['_memb_coursegrid'];  foreach (['unlocked', 'locked'] as $m4is_e3k_mi) { $m4is_tofpz = !empty($m4is__zksg9[$m4is_e3k_mi]) ? $m4is__zksg9[$m4is_e3k_mi] : []; $m4is_afkz64 = !empty($m4is_tofpz['url']) ? esc_url($m4is_tofpz['url']) : ''; $m4is_pb3qa = !empty($m4is_tofpz['id']) ? (int)$m4is_tofpz['id'] : 0; if( !empty($m4is_afkz64) || !empty($m4is_pb3qa) ){ $m4is_j0n7[$m4is_e3k_mi] = [ 'url' => $m4is_afkz64, 'id' => $m4is_pb3qa ]; } }  if( !empty($m4is__zksg9['locked_url']) ){ $m4is_alg0m = esc_url($m4is__zksg9['locked_url']); if( !empty($m4is_alg0m) ){ $m4is_j0n7['locked_url'] = $m4is_alg0m; } }  if( !empty($m4is__zksg9['excerpt']) ){ $m4is_nxs4 = sanitize_text_field( htmlentities(trim($m4is__zksg9['excerpt'])) ); if( !empty($m4is__zksg9['excerpt']) ){ $m4is_j0n7['excerpt'] = $m4is_nxs4; } }  $m4is_rprd_t = !empty($m4is__zksg9['order']) ? (int)$m4is__zksg9['order'] : 0; if( !empty($m4is_j0n7) || $m4is_rprd_t > 0 ){ $m4is_j0n7['order'] = $m4is_rprd_t; } } $m4is_wpig0 = '_memberium/coursegrid/config'; $m4is_pr_4y = get_post_meta($m4is__xysg, $m4is_wpig0, true); if( empty($m4is_j0n7) ){ if( $m4is_pr_4y ){ delete_post_meta($m4is__xysg, $m4is_wpig0); } } else{ $m4is_pr_4y = !$m4is_pr_4y ? [] : $m4is_pr_4y; if( ! empty(array_diff($m4is_j0n7, $m4is_pr_4y)) ){ update_post_meta($m4is__xysg, $m4is_wpig0, $m4is_j0n7); } } } 
function m4is_wqynae() { global $post; $m4is_ti8od = get_post_meta($post->ID, '_iswp_custom_code', true); $defaults = [ 'head' => '', 'css' => '', 'js' => '', ]; $m4is_ti8od = wp_parse_args($m4is_ti8od, $defaults); wp_nonce_field( $this->m4is_bxv7u->m4is_yl5j8(), 'memberium_customcode_nonce'); echo '<p>HTML Head Code</p>'; echo '<textarea id="is4wp_html_head" name="is4wp_html_head" placeholder="Head HTML Code" rows="3" cols="30" style="width:100%;">', $m4is_ti8od['head'], '</textarea>'; echo '<p>CSS Code</p>'; echo '<textarea id="is4wp_css" name="is4wp_css" placeholder="Enter your custom CSS code here.  <style> tags are automatically included." rows="3" cols="30" style="width:100%;">', $m4is_ti8od['css'], '</textarea>'; echo '<p>JavaScript Code</p>'; echo '<textarea id="is4wp_js" name="is4wp_js" rows=3 cols=30 placeholder="JavaScript Code.  <script> tags are automatically included." style="width:100%;">', $m4is_ti8od['js'], '</textarea>'; $m4is_nmc5g = method_exists('wp_screen','is_block_editor') ? get_current_screen()->is_block_editor() : false;  if (! $m4is_nmc5g) { echo '<style>
				.CodeMirror { height: auto !important; border: 1px solid #ddd; }
				.CodeMirror-scroll { min-height: 100px !important; max-height:300px !important; }
				</style>';  if (get_bloginfo('version') >= '4.9') { $m4is_ck8j = [ 'is4wp_css' => 'text/css', 'is4wp_html_head' => 'text/html',  'is4wp_js' => 'application/javascript', ]; foreach($m4is_ck8j as $m4is_b40e_m => $m4is_oknpuo) { $m4is_tct_hk = wp_enqueue_code_editor(['type' => $m4is_oknpuo]); wp_add_inline_script('code-editor', sprintf('jQuery(function() { wp.codeEditor.initialize("' . $m4is_b40e_m . '", %s); });', wp_json_encode($m4is_tct_hk) ) ); } } } } 
function m4is_f9cz3o($m4is__xysg) { $m4is_pgsbl = $_POST;  if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) { return; }  if (empty($m4is_pgsbl['memberium_customcode_nonce']) || ! wp_verify_nonce($m4is_pgsbl['memberium_customcode_nonce'], $this->m4is_bxv7u->m4is_yl5j8()) ) { return; }  if (! empty($m4is_pgsbl['post_type']) && 'page' == $m4is_pgsbl['post_type']) { if (! current_user_can('edit_pages', $m4is__xysg) ) { return; } } else { if (! current_user_can('edit_posts', $m4is__xysg) ) { return; } } $m4is_ti8od = [ 'head' => isset($m4is_pgsbl['is4wp_html_head']) ? trim($m4is_pgsbl['is4wp_html_head']) : '', 'css' => isset($m4is_pgsbl['is4wp_css']) ? trim($m4is_pgsbl['is4wp_css']) : '', 'js' => isset($m4is_pgsbl['is4wp_js']) ? trim($m4is_pgsbl['is4wp_js']) : '', ]; m4is_qmpq8::m4is_mp57d($m4is__xysg, 'custom_code', $m4is_ti8od); } 
function m4is_nxzv9() { wp_enqueue_script('memberium-admin-edit', plugins_url('js/quickedit.js', MEMBERIUM_HOME), ['jquery', 'inline-edit-post'], '', TRUE); }       
function m4is_gib5sz( $m4is_zv_f ) { $m4is_dmesa = isset( $_GET['post_type'] ) ? $_GET['post_type'] : 'post'; $m4is_bdn8 = m4is__95_::m4is_gel18(); $m4is_jdpxc = []; $m4is_yrlf0 = []; if ( false ) { $m4is_jdpxc['memberships'] = __( 'Membership Levels'); $m4is_jdpxc['tag_ids'] = __( "Tag ID's" ); $m4is_jdpxc['contact_ids'] = __( "Contact ID's" ); $m4is_jdpxc['prohibited_action'] = __( 'Prohibited Action' ); $m4is_jdpxc['anonymous_only'] = __( 'Logged Out Only' ); $m4is_jdpxc['facebook_crawler'] = __( 'Facebook crawler' ); $m4is_jdpxc['google_1stclick'] = __( 'Google First Click Free' ); } if ( $m4is_dmesa == 'memb_shortcodeblocks' ) { $m4is_jdpxc['memb_custom_shortcode'] = __( 'Shortcode' ); $m4is_yrlf0[] = 'categories'; $m4is_yrlf0[] = 'date'; } else { if ($m4is_dmesa == 'partials') { $m4is_jdpxc['memb_partial_shortcode'] = __('Shortcode'); unset($m4is_zv_f['categories'], $m4is_zv_f['date']); } $m4is_jdpxc['memberships'] = __('Membership Levels'); $m4is_jdpxc['tag_ids'] = __('Tag ID\'s'); $m4is_jdpxc['prohibited_action'] = __('Prohibited Action'); if (! empty( $this->m4is_bxv7u->m4is_mmdrl('settings', 'show_post_columns') ) ) { $m4is_jdpxc['contact_ids'] = __('Contact ID\'s'); $m4is_jdpxc['anonymous_only'] = __('Logged Out Only'); $m4is_jdpxc['facebook_crawler'] = __('Facebook crawler'); $m4is_jdpxc['google_1stclick'] = __('Google First Click Free'); } } foreach ( $m4is_yrlf0 as $m4is_e8rx2n ) { unset( $m4is_zv_f[ $m4is_e8rx2n ] ); }  $m4is_zv_f = array_merge( $m4is_zv_f, $m4is_jdpxc ); return $m4is_zv_f; } 
function m4is__2kju( $m4is_t1s26, $m4is__xysg ) { switch ($m4is_t1s26) { case 'memb_custom_shortcode': echo '<div style="white-space:nowrap;">', '[membc_', get_post($m4is__xysg)->post_name, ']', '</div>'; break; case 'memb_partial_shortcode': echo '<div style="white-space:nowrap;">', '[memb_include_partial id=', $m4is__xysg, ']', '</div>'; break; case 'anonymous_only': $m4is_rhfd = get_post_meta($m4is__xysg, '_is4wp_anonymous_only', TRUE); if ($m4is_rhfd) { $m4is_yeag = '<strong style="color:green;">Yes</strong>'; $m4is_ms3pm = 1; } else { $m4is_yeag = '<strong style="color:red;">No</strong>'; $m4is_ms3pm = 0; } echo '<div>', $m4is_yeag, '</div>';  echo '<input type="hidden" id="memb-anonymousonly-', $m4is__xysg, '" value="', $m4is_ms3pm, '">'; break; case 'contact_ids': $m4is_rhfd = get_post_meta($m4is__xysg, '_is4wp_contact_ids', true); echo '<div id="memb-contactids-' . $m4is__xysg . '">' . $m4is_rhfd . '</div>'; break; case 'facebook_crawler': $m4is_rhfd = get_post_meta($m4is__xysg, '_is4wp_facebook_crawler', true); if ($m4is_rhfd) { $m4is_yeag = '<strong style="color:green;">Yes</strong>'; $m4is_ms3pm = 1; } else { $m4is_yeag = '<strong style="color:red;">No</strong>'; $m4is_ms3pm = 0; } echo '<div>', $m4is_yeag, '</div>';  echo '<input type="hidden" id="memb-facebookcrawler-', $m4is__xysg, '" value="', $m4is_ms3pm, '">'; break; case 'google_1stclick': $m4is_rhfd = get_post_meta($m4is__xysg, '_is4wp_google_1stclick', true); if ($m4is_rhfd) { $m4is_yeag = '<strong style="color:green;">Yes</strong>'; $m4is_ms3pm = 1; } else { $m4is_yeag = '<strong style="color:red;">No</strong>'; $m4is_ms3pm = 0; } echo '<div>', $m4is_yeag, '</div>';  echo '<input type="hidden" id="memb-google1stclick-', $m4is__xysg, '" value="', $m4is_ms3pm, '">'; break; case 'memberships': $m4is_fdf0v = array_filter(explode(',', get_post_meta($m4is__xysg, '_is4wp_membership_levels', true) ) ); $m4is_u86f = count($m4is_fdf0v); $m4is__178g = []; $m4is_ms_k = 0; $m4is_x6y3 = get_post_meta($m4is__xysg, '_is4wp_any_loggedin_user', true); $m4is_f7ow = get_post_meta($m4is__xysg, '_is4wp_any_membership', true); $m4is_isxlf = $this->m4is_bxv7u->m4is_mmdrl('memberships'); if ($m4is_u86f > 0) { foreach($m4is_fdf0v as $m4is_ap3_ => $m4is_tyoak) { $m4is__178g[] = $m4is_tyoak; echo isset($m4is_isxlf[$m4is_tyoak]['name']) ? $m4is_isxlf[$m4is_tyoak]['name'] : ''; if (++$m4is_ms_k < $m4is_u86f) { echo ', '; } } echo '<input type="hidden" id="memb-memberships-', $m4is__xysg, '" value="', implode(',', $m4is__178g), '" >'; } if ($m4is_x6y3) { echo '<span style="white-space:nowrap;">(Any Logged In User)</span> '; } if ($m4is_f7ow) { echo '<span style="white-space:nowrap;">(Any Membership)</span> '; } break; case 'prohibited_action': $m4is_hvib = get_post_meta( $m4is__xysg, '_is4wp_prohibited_action', true ); $m4is_pizyx = trim( get_post_meta( $m4is__xysg, '_is4wp_redirect_url', true ) );   echo '<input type="hidden" id="memb-prohibitedaction-', $m4is__xysg, '" value="', $m4is_hvib, '">'; echo '<input type="hidden" id="memb-redirecturl-', $m4is__xysg, '" value="', $m4is_pizyx, '">'; echo ucwords($m4is_hvib), '<br />'; echo $m4is_pizyx, '<br />'; break; case 'tag_ids': $m4is_rhfd = trim( get_post_meta( $m4is__xysg, '_is4wp_access_tags', true ), ',' ); $m4is_rhfd = implode( ', ', explode( ',', $m4is_rhfd ) ); echo '<div id="memb-accesstagids-', $m4is__xysg, '">', $m4is_rhfd, '</div>'; break; } } 
function m4is_c5xy( $m4is_czdy35, $m4is_dmesa ) { static $m4is_pvdt = true; if ($m4is_pvdt) { $m4is_pvdt = false; wp_nonce_field( $this->m4is_bxv7u->m4is_yl5j8(), 'memb_accesscontrol_bulkedit_nonce'); } echo '<fieldset class="inline-edit-col-right inline-edit-', $m4is_czdy35, '">'; echo '<div class="inline-edit-col column-', $m4is_czdy35 , '">'; echo '<label class="inline-edit-group">'; switch ($m4is_czdy35) { case 'memberships': $m4is_fdf0v = $this->m4is_bxv7u->m4is_mmdrl('memberships'); $m4is_dkwq1s = []; foreach ($m4is_fdf0v as $m4is_ap3_ => $m4is_i2t3ps) { $m4is_dkwq1s[] = $m4is_ap3_; } $m4is_dkwq1s = implode(',', $m4is_dkwq1s); echo '<input type="hidden" name="bulkedit-membershiplist" id="bulkedit-membershiplist" value="', $m4is_dkwq1s, '">';  if (count($m4is_fdf0v) > 0) { echo '<ul class="cat-checklist category-checklist">'; echo '<em>Membership Access</em>'; echo '<label for="memb_useexisting"><input type="checkbox" name="memb_useexisting" value="1" id="memb_useexisting"> <em>Use Existing Memberships</em></label>'; foreach ($m4is_fdf0v as $m4is_b40e_m => $m4is_tyoak) { echo "<label for='memb_membership_level_{$m4is_b40e_m}'><input type='checkbox' name='memb_membership_level_{$m4is_b40e_m}' value='{$m4is_b40e_m}' id='memb_membership_level_{$m4is_b40e_m}'> " . stripslashes($m4is_tyoak['name']) . '</label>'; } } echo '<label for="memb_anonymousonly"><input type="checkbox" name="memb_anonymousonly" value="1" id="memb_anonymousonly"> Logged Out Only</label>'; echo '<label for="memb_anyloggedinuser"><input type="checkbox" name="memb_anyloggedinuser" value="1" id="memb_anyloggedinuser"> Any Logged In User</label>'; echo '<label for="memb_google1stclick"><input type="checkbox" name="memb_google1stclick" value="1" id="memb_google1stclick"> Google 1st Click Free</label>'; echo '<label for="memb_facebookcrawler"><input type="checkbox" name="memb_facebookcrawler" value="1" id="memb_facebookcrawler"> Facebook Crawler Access</label>'; echo '</ul>'; echo '<hr />'; echo '<label for="memb_prohibitedaction"><span class="title" style="width:75px;">Prohibited</span><select name="memb_prohibitedaction" id="memb_prohibitedaction">'; echo '<option value="default">Default</option>'; echo '<option value="redirect">Redirect</option>'; echo '<option value="hide">Hide Completely</option>'; echo '<option value="excerpt">Show Excerpt Only</option>'; echo '</select></label>'; echo '<label><span class="title" style="width:75px;">Redirect URL  </span><input type="text" name="memb_redirecturl" value="" placeholder="" id="memb_redirecturl"></label>'; break; } echo '</label></div></fieldset>'; } 
function m4is_qlf9( int $m4is__xysg, WP_Post $m4is_pgsbl, bool $m4is_g68c ) { $m4is_x87ea = [ 'memb_shortcodeblocks', ]; if ( isset( $m4is_pgsbl->post_type ) && ! in_array( $m4is_pgsbl->post_type, $m4is_x87ea ) ) { return; }; if ( ! current_user_can( 'edit_post', $m4is__xysg ) ) { return; } m4is_pcys::m4is_a6x52r()->m4is_ryqzi( true );  }    
function m4is_lqdj() { if (!current_user_can('manage_options') ) { wp_die(__('You do not have sufficient permissions to access this page.') ); } } 
function m4is_bxk01() { require_once $this->m4is_bxv7u->m4is_n367bl('googleanalytics.php'); } 
function m4is_r3xk() {   } 
function m4is_f9o4yu( $m4is_tusb ) { if ( ! is_array( $m4is_tusb ) || empty( $m4is_tusb ) ) { return false; } global $wpdb; $m4is_ioxk = "SELECT `post_id`, `meta_value` FROM `{$wpdb->postmeta}` WHERE `meta_key` = '_is4wp_membership_levels' AND `meta_value` > '' "; $m4is__jp4yb = $wpdb->get_results( $m4is_ioxk, ARRAY_A ); foreach ( $m4is__jp4yb as $m4is_pgsbl ) { $m4is_xmovf = explode( ',', $m4is_pgsbl['meta_value'] ); $m4is__ph0v = implode( ',', array_diff( $m4is_xmovf, $m4is_tusb) ); m4is_qmpq8::m4is_mp57d($m4is_pgsbl['post_id'], 'memberships', $m4is__ph0v); } $this->m4is_bxv7u->m4is_sc3a(); return true; } 
function m4is_gx93as() { require_once $this->m4is_bxv7u->m4is_n367bl('remotefiles.php'); }  
function m4is_ggin() { $m4is_t7i0bz = 'memberium::page_templates'; $m4is_eogp = 'https://licenseserver.webpowerandlight.com/updates/page-templates.php';  $m4is_j0n7 = get_transient($m4is_t7i0bz, false); $m4is_n_bp6 = []; if (is_array($m4is_j0n7) ) { $m4is_n_bp6 = $m4is_j0n7; } else { $m4is_rxc9n1 = [ 'timeout' => 10, ]; $m4is_j0n7 = wp_remote_get($m4is_eogp, $m4is_rxc9n1); if (is_a($m4is_j0n7, 'WP_Error') ) { $m4is_a6g9qj = $m4is_j0n7->get_error_message(); if (! empty($m4is_a6g9qj) ) { echo '<div class="notice notice-error"><h3>', print_r($m4is_a6g9qj, true), '</h3></div>'; return; } } if (is_array($m4is_j0n7) ) { $m4is_n_bp6 = json_decode($m4is_j0n7['body'], true); if (is_array($m4is_n_bp6) ) { set_transient($m4is_t7i0bz, $m4is_n_bp6, 3600); } } else { $m4is_n_bp6 = []; } } return $m4is_n_bp6; } 
function m4is_mwom() { $m4is_bqmv7g = 'https://licenseserver.webpowerandlight.com/updates/email-templates.php'; $m4is_rxc9n1 = [ 'timeout' => 10, ]; $m4is_hh79 = wp_remote_get($m4is_bqmv7g, $m4is_rxc9n1); if (is_a($m4is_hh79, 'WP_Error') ) { $m4is_a6g9qj = $m4is_hh79->get_error_message(); if (! empty($m4is_a6g9qj) ) { echo '<div class="notice notice-error"><h3>', print_r($m4is_a6g9qj, true), '</h3></div>'; return; } } $m4is_hh79 = json_decode($m4is_hh79['body'], true); if (is_array($m4is_hh79) ) { $m4is_hkp7s = [ 'Id', 'PieceTitle' ]; $m4is_kc1q = [ 'PieceTitle' => 'MEMBERIUM TEMPLATE - %' ]; $m4is_b7jedq = m4is_f84s3h::m4is_yt5p0l( 'Template', 1000, 0, $m4is_kc1q, $m4is_hkp7s ); $m4is_y_sdm = 0; array_walk ($m4is_b7jedq, function(&$m4is_rhfd) { $m4is_rhfd['PieceTitle'] = strtolower(trim($m4is_rhfd['PieceTitle']) ); }); foreach($m4is_hh79 as $m4is_i0ltb) { if (is_array($m4is_b7jedq) ) { $m4is_in0ti = false; foreach($m4is_b7jedq as $m4is_hzmk) { if (strtolower($m4is_hzmk['PieceTitle']) == strtolower($m4is_i0ltb['pieceTitle']) ) { $m4is_in0ti = true; } } if (! $m4is_in0ti) {  $id = $this->m4is_bxv7u->m4is_wnlbj_()->addEmailTemplate( $m4is_i0ltb['pieceTitle'], $m4is_i0ltb['categories'], $m4is_i0ltb['fromAddress'], $m4is_i0ltb['toAddress'], $m4is_i0ltb['ccAddress'], $m4is_i0ltb['bccAddress'], $m4is_i0ltb['subject'], $m4is_i0ltb['textBody'], $m4is_i0ltb['htmlBody'], $m4is_i0ltb['contentType'], $m4is_i0ltb['mergeContext'] ); $m4is_y_sdm++; } } } } return $m4is_y_sdm; } 
function m4is_prf9($m4is__xysg, $m4is_hzmk) { if ($m4is__xysg === '') { return; } $m4is_hh79 = $this->m4is_ggin(); if (! isset($m4is_hh79[$m4is_hzmk]) ) { return; } $m4is_i0ltb = $m4is_hh79[$m4is_hzmk]; unset($m4is_hh79); if ($m4is__xysg > 0) { $m4is_kyxn3w = get_post($m4is__xysg, 'ARRAY_A'); } else { $m4is_kyxn3w = []; } if (! empty($m4is_i0ltb['content_url']) ) { $m4is_zv59 = wp_remote_get($m4is_i0ltb['content_url']); $m4is_ih2d = []; if (is_array($m4is_zv59) ) { $m4is_ih2d = json_decode($m4is_zv59['body'], true); $m4is_i0ltb['post']['post_content'] = $m4is_ih2d['post']['post_content']; $m4is_i0ltb['post']['post_excerpt'] = $m4is_ih2d['post']['post_excerpt']; } } $m4is_pgsbl = []; $m4is_pgsbl['ID'] = $m4is__xysg; $m4is_pgsbl['post_title'] = empty($m4is_kyxn3w['post_title']) ? $m4is_i0ltb['post']['post_title'] : $m4is_kyxn3w['post_title']; $m4is_pgsbl['post_content'] = $m4is_i0ltb['post']['post_content']; $m4is_pgsbl['post_type'] = empty($m4is_kyxn3w['post_type']) ? $m4is_i0ltb['post']['post_type'] : $m4is_kyxn3w['post_type']; $m4is_pgsbl['post_status'] = empty($m4is_kyxn3w['post_status']) ? 'draft' : $m4is_kyxn3w['post_status']; $m4is_pgsbl['meta_input'] = $m4is_i0ltb['meta']; $_POST['post_content'] = $m4is_pgsbl['post_content']; $_POST['post_excerpt'] = $m4is_pgsbl['post_excerpt']; remove_action('save_post', [$this, 'm4is_q7uha5']); $foo = wp_insert_post($m4is_pgsbl, false); foreach($m4is_i0ltb['meta'] as $m4is_ap3_ => $m4is_rhfd) { update_post_meta($m4is__xysg, $m4is_ap3_, $m4is_rhfd); } add_action('save_post', [$this, 'm4is_q7uha5']); }  
function m4is_zonrv($m4is_hm1qz = false) { $m4is_t7i0bz = 'memberium::setup::checklist'; if (defined('MEMBERIUM_BETA') && MEMBERIUM_BETA) { delete_transient($m4is_t7i0bz); } $m4is_diag = get_transient($m4is_t7i0bz, [] ); if (! $m4is_diag) { $m4is_j0n7 = wp_remote_get('https://licenseserver.webpowerandlight.com/welcome/checklist.php'); if (! is_object($m4is_j0n7) && ! empty($m4is_j0n7['body']) ) { $m4is_diag = json_decode($m4is_j0n7['body'], true); set_transient($m4is_t7i0bz, $m4is_diag, 3600); } } if (is_array($m4is_diag) ) { usort($m4is_diag, function($a, $b) { return $a['o'] - $b['o']; }); }  $m4is_ur7x = (array) get_option('memberium_setup_completed');  $m4is__u0k = get_option( $this->m4is_bxv7u->license_key_name); $m4is_nvawk6 = m4is_o5aoir::m4is_ehns($m4is__u0k); if ($m4is_nvawk6['valid']) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('get_license', $m4is_ur7x); } unset($m4is_nvawk6);  $m4is_bd92x = $this->m4is_bxv7u->get_i2sdk_options(); if ($m4is_bd92x['server_verified']) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('configure_i2sdk', $m4is_ur7x); } unset($m4is_bd92x); if ( $this->m4is_bxv7u->m4is_mmdrl('settings', 'default_page_redirect') > '' ) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('set_default_redirect', $m4is_ur7x); } if ( $this->m4is_bxv7u->m4is_mmdrl('settings', 'show_advanced_options') > '') { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('view_advanced', $m4is_ur7x); } if (count( $this->m4is_bxv7u->m4is_mmdrl('memberships') ) ) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('create_membership', $m4is_ur7x); } if (! empty( $this->m4is_bxv7u->m4is_mmdrl('settings', 'global_excerpt') ) ) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('set_default_excerpt', $m4is_ur7x); } global $wpdb;  $m4is_ioxk = "SELECT count(*) FROM `{$wpdb->postmeta}` WHERE `meta_key` LIKE '_is4wp_%' AND `meta_value` > '0';"; $m4is_ejfox = $wpdb->get_col();  if ($m4is_ejfox > 0) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('protect_pages', $m4is_ur7x); } unset($m4is_ioxk, $m4is_ejfox);  $m4is_ejfox = (int) m4is_o5aoir::m4is_i0_t(); if ($m4is_ejfox > 0) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('1user', $m4is_ur7x); } if ($m4is_ejfox > 9) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('10users', $m4is_ur7x); } if ($m4is_ejfox > 24) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('25users', $m4is_ur7x); } if ($m4is_ejfox > 99) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('100users', $m4is_ur7x); } if ($m4is_ejfox > 499) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('500users', $m4is_ur7x); } if ($m4is_ejfox > 999) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('1kusers', $m4is_ur7x); } if ($m4is_ejfox > 2499) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('2500users', $m4is_ur7x); } if ($m4is_ejfox > 9999) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('10kusers', $m4is_ur7x); } if ($m4is_ejfox > 24999) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('25kusers', $m4is_ur7x); } if ($m4is_ejfox > 49999) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('50kusers', $m4is_ur7x); } if ($m4is_ejfox > 99999) { $m4is_ur7x = $this->m4is_bxv7u->m4is_v64c('100kusers', $m4is_ur7x); } unset($m4is_ioxk, $m4is_ejfox); update_option('memberium_setup_completed', array_filter(array_unique($m4is_ur7x) ) ); update_option('memberium_checklist', $m4is_diag);  if ($m4is_hm1qz) { foreach ($m4is_diag as $m4is_ap3_ => $m4is_u7wr1f) { if (! isset($m4is_u7wr1f['n']) || $m4is_u7wr1f['n'] <> 1) { unset($m4is_diag[$m4is_ap3_]); } } }  $m4is_zv_f = []; $m4is_zv_f['active'] = []; $m4is_zv_f['completed'] = []; if (is_array($m4is_diag) ) { foreach ($m4is_diag as $m4is_u7wr1f) { $m4is_u6p_ = false; $m4is_qrcp = false;  if (in_array($m4is_u7wr1f['k'], $m4is_ur7x) ) { $m4is_u6p_ = true; }  $m4is_ifabt = isset($m4is_u7wr1f['p']) ? explode(',', $m4is_u7wr1f['p']) : []; if (empty($m4is_ifabt) ) { $m4is_qrcp = true; } else { $m4is_qrcp = (count(array_intersect($m4is_ur7x, $m4is_ifabt) ) > 0); }   $m4is_ifabt = isset($m4is_u7wr1f['r']) ? explode(',', $m4is_u7wr1f['r']) : []; if (empty($m4is_ifabt) ) { $m4is_d8pnq = false; } else { $m4is_d8pnq = (count(array_intersect($m4is_ur7x, $m4is_ifabt) ) > 0); } if (! $m4is_u6p_) { if ($m4is_qrcp) { $m4is_zv_f['active'][] = $m4is_u7wr1f; } } else { if (! $m4is_d8pnq) { $m4is_zv_f['completed'][] = $m4is_u7wr1f; } } } } return $m4is_zv_f; } 
function m4is_pgyzr() {  $m4is_cxe1 = $this->m4is_zonrv(); $m4is_ur7x = (array) get_option('memberium_setup_completed'); $m4is_zv_f = []; $m4is_zv_f['active'] = []; $m4is_zv_f['completed'] = []; foreach ($m4is_cxe1 as $m4is_empodr) { $m4is_u6p_ = false; $m4is_qrcp = false;  if (in_array($m4is_empodr['k'], $m4is_ur7x) ) { $m4is_u6p_ = true; }  $m4is_ifabt = isset($m4is_empodr['p']) ? explode(',', $m4is_empodr['p']) : []; if (empty($m4is_ifabt) ) { $m4is_qrcp = true; } else { $m4is_qrcp = (count(array_intersect($m4is_ur7x, $m4is_ifabt) ) > 0); }   $m4is_ifabt = isset($m4is_empodr['r']) ? explode(',', $m4is_empodr['r']) : []; if (empty($m4is_ifabt) ) { $m4is_d8pnq = false; } else { $m4is_d8pnq = (count(array_intersect($m4is_ur7x, $m4is_ifabt) ) > 0); } if (! $m4is_u6p_) { if ($m4is_qrcp) { if ($m4is_empodr['m'] == 'm') { $m4is_yeag = '<input type="hidden" value="0" name="' . $m4is_empodr['k'] . '">' . '<input name="' . $m4is_empodr['k'] . '" id="' . $m4is_empodr['k'] . '" value="1" type="checkbox"> ' . $m4is_empodr['t']; if ($m4is_empodr['l'] > 0) { $m4is_yeag .= ' - ' . m4is__95_::m4is_d6u3($m4is_empodr['l']); } $m4is_zv_f['active'][] = $m4is_yeag; } elseif ($m4is_empodr['m'] == 'a') { $m4is_zv_f['active'][] = '<input type="checkbox"> ' . $m4is_empodr['t']; } } } else { if (! $m4is_d8pnq) { $m4is_zv_f['completed'][] = '<input type="checkbox" disabled="disabled" checked="checked"> ' . $m4is_empodr['t']; } } } return $m4is_zv_f; } 
function m4is_mvgrp3() { $m4is_qljrs = $this->m4is_zonrv(); echo '<form method="post" style="margin-left:25px;">'; echo '<p>Complete the checklist below to launch your site, most settings are optional since you can just use the defaults we provide but click the steps below and follow the directions on each page.</p><p>It\'s easier than you think, and you\'ll be done in no time!</p>'; echo '<div style="float:left; width:400px;">'; echo '<h3>Upcoming Tasks and Goals</h3>'; if (! empty($m4is_qljrs['active']) ) { foreach ($m4is_qljrs['active'] as $m4is_nb_gya) { if ($m4is_nb_gya['m'] == 'm') { echo '<p style="text-indent:-25px;margin-left:25px;"><input type="hidden" value="0" name="', $m4is_nb_gya['k'], '">'; echo '<input name="', $m4is_nb_gya['k'], '" id="', $m4is_nb_gya['k'], '" value="1" type="checkbox"> ', $m4is_nb_gya['t']; if ($m4is_nb_gya['l'] > 0) { echo ' ', m4is__95_::m4is_d6u3($m4is_nb_gya['l']); } '</p>'; } elseif ($m4is_nb_gya['m'] == 'a') { echo '<p style="text-indent:-25px;margin-left:25px;"><input type="checkbox" class="automatic"> <em>' . $m4is_nb_gya['t'], ' <strong>*</strong></em></p>'; } } } else { echo '<p>All goals have been achieved!</p>'; } echo '</div>'; echo '<div style="float:left; width:400px; margin-left:80px;">'; echo '<h3>Completed Tasks and Goals</h3>'; if (! empty($m4is_qljrs['completed']) ) { $m4is_qljrs['completed'] = array_reverse($m4is_qljrs['completed']); foreach ($m4is_qljrs['completed'] as $m4is_nb_gya) { echo '<p style="text-indent:-25px;margin-left:25px;"><strike>', $m4is_nb_gya['t'], '</strike></p>'; } } else { echo '<p>You have no completed tasks.</p>'; } echo '</div>'; echo '<div style="clear:both;"></div>'; echo '<input type="submit" value="Mark Complete" class="button-primary"> &nbsp;&nbsp; '; echo '<p>View <a href="https://memberium.com/documentation/" target="_blank">More Documentation Online</a></p>'; echo '</form>'; echo '<p><em><strong>*</strong> Automatically detected tasks and goals</em> cannot be manually checked.</p>'; echo '<script>'; echo 'jQuery("input:checkbox.automatic").click(function() { return false; });'; echo '</script>'; } 
function m4is_eyul($m4is_t92sw) { $m4is_xat6s = []; $m4is_j2b4c = 'memberium::environment_signatures'; $m4is_xat6s = get_transient( $m4is_j2b4c ); $m4is_xat6s = false; if ( ! is_array( $m4is_xat6s ) ) { $m4is__mto = 'https://licenseserver.webpowerandlight.com/memberium/environment-fingerprints.php'; $m4is_zaxy = wp_remote_get( $m4is__mto ); if ( is_array( $m4is_zaxy ) && ! empty( $m4is_zaxy['body'] ) ) { $m4is_xat6s = json_decode( $m4is_zaxy['body'], true );  foreach( $m4is_xat6s as $m4is_ap3_ => $m4is_k_fdu) { if ( ! empty( $m4is_k_fdu['platforms'] ) ) { if ( false === stripos( $m4is_k_fdu['platforms'], $m4is_t92sw ) ) { unset( $m4is_xat6s[$m4is_ap3_] ); } } } set_transient( $m4is_j2b4c, $m4is_xat6s, ( 12 * HOUR_IN_SECONDS ) ); } } return $m4is_xat6s; } 
function m4is_vwja7v() { $m4is_y79zsw = []; $m4is_t92sw = 'm4is'; if ( defined('GD_VIP') && GD_VIP ) { define('GD_MANAGED_HOSTING', 1); }   $m4is_xat6s = $this->m4is_eyul($m4is_t92sw); $m4is_q1d6 = get_option('active_plugins'); $m4is_yh4wl = wp_get_theme(); $m4is_yh4wl = $m4is_yh4wl->parent() ? $m4is_yh4wl->parent() : $m4is_yh4wl; foreach ($m4is_xat6s as $m4is_k_fdu) { $m4is_in0ti = false; if ($m4is_k_fdu['type'] == 'extension') { $m4is_in0ti = extension_loaded($m4is_k_fdu['fingerprint']); } elseif ($m4is_k_fdu['type'] == 'function') { $m4is_in0ti = function_exists($m4is_k_fdu['fingerprint']); } elseif ($m4is_k_fdu['type'] == 'class') { $m4is_in0ti = class_exists($m4is_k_fdu['fingerprint']); } elseif ($m4is_k_fdu['type'] == 'environment') { $m4is_in0ti = isset($_SERVER[$m4is_k_fdu['fingerprint']]); } elseif ($m4is_k_fdu['type'] == 'theme') { $m4is_in0ti = $m4is_yh4wl->get_stylesheet() == $m4is_k_fdu['fingerprint']; } elseif ($m4is_k_fdu['type'] == 'plugin') { $m4is_in0ti = in_array($m4is_k_fdu['fingerprint'], $m4is_q1d6); } elseif ($m4is_k_fdu['type'] == 'constant') { $m4is_in0ti = defined($m4is_k_fdu['fingerprint']); } if ($m4is_in0ti) { if ($m4is_k_fdu['class'] == 'good') { $m4is_y79zsw['detected'][] = $m4is_k_fdu; } else { $m4is_y79zsw['problem'][] = $m4is_k_fdu; } } else { if ($m4is_k_fdu['class'] == 'good') { $m4is_y79zsw['available'][] = $m4is_k_fdu; } } } return $m4is_y79zsw; }    
function m4is_qze1o_() { return; $m4is_ll9yd5 = $this->m4is_y5lk(); echo '<div class="wrap about-wrap">';  echo '<h3 style="font-size:225%">', _('Invalid License'), '</h3>'; echo '<p class="about-text" style="margin-bottom:-30px;padding-bottom:0px;">'; echo 'We are unable to license this site for one of the following reasons:'; echo '</p>'; echo '<ul style="margin-left:20px;">'; if (! empty($m4is_ll9yd5) ) { echo '<li>Your i2SDK setup is incomplete or missing.  <a href="admin.php?page=i2sdk-admin">Click here to configure it</a>.</li>'; } else { echo '<li>The domain you installed this on does not match the domain that the license was purchased for.</li>'; echo '<li>You purchased an unlimited license but used a different Keap app or sandbox to connect to.</li>'; echo '<li>Your webhost has outbound connections to our license server blocked.</li>'; } echo '</ul>'; echo '<p>'; echo '&ndash; The Memberium Team<br />'; echo '<a href="https://memberium.com/support/" target="_blank">https://memberium.com/support/</a>'; echo '</p>'; echo '</div>'; } 
function m4is_a9wa() { $this->m4is_bxv7u->m4is_lhu9(); $m4is_s3_zp1 = $_POST; $m4is_j2myt9 = $_SERVER; $m4is_m_fnw0 = new m4is_mxg2();   $m4is_m_fnw0->m4is_vr1up( 'fa fa-tasks', 'Setup Checklist', 'checklist', [$this, 'm4is_mvgrp3']); $m4is_m_fnw0->m4is_vr1up( 'fa fa-users', 'About Memberium', 'about', [$this, 'm4is_yqg9']); $m4is_m_fnw0->m4is_mneuy0( $this->m4is_bxv7u->m4is_n367bl('header.php') ); $m4is_shny = $m4is_m_fnw0->m4is_j_qc4(); if ($m4is_j2myt9['REQUEST_METHOD'] == 'POST') { if ($m4is_shny == 'checklist') { if (is_array($m4is_s3_zp1) ) { foreach ($m4is_s3_zp1 as $m4is_ap3_ => $m4is_rhfd) { if ($m4is_rhfd == '1') { $this->m4is_bxv7u->m4is_v64c($m4is_ap3_); } } } } elseif ($m4is_shny == 'updates') { m4is__95_::m4is_hbfrj('Updates Options Updated');  $m4is_tct_hk = [ 'autoupdate', ]; foreach($m4is_tct_hk as $m4is_ap3_) { if (isset($m4is_s3_zp1[$m4is_ap3_]) ) { $m4is_rhfd = (int) (bool) trim($m4is_s3_zp1[$m4is_ap3_]); $this->m4is_bxv7u->m4is_oqwxk($m4is_rhfd, 'settings', $m4is_ap3_); } }  if (! empty($m4is_s3_zp1['manual_upgrade_confirm']) ) { $this->m4is_bpkxq($m4is_s3_zp1['manual_upgrade'], 'memberium2'); } } elseif ($m4is_shny == 'debug' && isset($m4is_s3_zp1['delete-debug']) && $m4is_s3_zp1['delete-debug'] > '') { unlink(MEMBERIUM_DEBUGLOG); } } $m4is_m_fnw0->m4is_rtwq(); return; } 
function m4is_ik_gqb() { $this->m4is_bxv7u->m4is_lhu9(); $m4is_idyzi5 = $this->m4is_bxv7u->m4is_n367bl(); $m4is_m_fnw0 = new m4is_mxg2(); $m4is_s3_zp1 = $_POST; $m4is_j2myt9 = $_SERVER; $m4is_m_fnw0->m4is_mneuy0('<h1>Memberium Support</h1>'); $m4is_m_fnw0->m4is_vr1up('fa fa-life-ring', 'Support', 'support', [$this, 'm4is_qp2k']); $m4is_m_fnw0->m4is_vr1up('fa fa-tachometer-alt', 'Dashboard', 'dashboard', $this->m4is_bxv7u->m4is_n367bl('starthere-dashboard-show.php') ); $m4is_m_fnw0->m4is_vr1up('fa fa-cogs', 'Integrations', 'integrations', $this->m4is_bxv7u->m4is_n367bl('starthere-integrations-show.php') ); $m4is_m_fnw0->m4is_vr1up('fa fa-download', 'Updates', 'updates', $this->m4is_bxv7u->m4is_n367bl('starthere-updates-show.php') ); $m4is_m_fnw0->m4is_vr1up('fa fa-bug', 'Debug', 'debug', [$this, 'm4is_mcqdp2']); $m4is_shny = $m4is_m_fnw0->m4is_j_qc4(); if ($_SERVER['REQUEST_METHOD'] == 'POST') { if ($m4is_shny == 'dashboard') { if (isset($m4is_s3_zp1['save']) && $m4is_s3_zp1['save'] == 'Renew License') { m4is_o5aoir::m4is_qlzwa4(true); m4is__95_::m4is_hbfrj('License Updated', 'update'); } elseif (isset($m4is_s3_zp1['save']) && $m4is_s3_zp1['save'] == 'Re-Activate Plugin') { m4is_d2vzc::m4is_yw1mi( false ); m4is__95_::m4is_hbfrj('System Activation Re-Run', 'update'); } elseif (isset($m4is_s3_zp1['save']) && $m4is_s3_zp1['save'] == 'Synchronize Keap') { $this->m4is_qmg0jt(); } elseif (isset($_GET['purge-contacts']) ) { $m4is_w6mt = MEMBERIUM_DB_CONTACTS; $m4is_ioxk = "TRUNCATE `{$m4is_w6mt}` "; $m4is_ixli71 = $wpdb->query($m4is_ioxk); m4is__95_::m4is_hbfrj('Local Contact Database Purged', 'update'); } } elseif ($m4is_shny == 'updates') { m4is__95_::m4is_hbfrj('Updates Options Updated'); $m4is_tct_hk = ['autoupdate',];  foreach($m4is_tct_hk as $m4is_ap3_) { if (isset($m4is_s3_zp1[$m4is_ap3_]) ) { $m4is_rhfd = (int) (bool) trim($m4is_s3_zp1[$m4is_ap3_]); $this->m4is_bxv7u->m4is_oqwxk($m4is_rhfd, 'settings', $m4is_ap3_); } }  if (! empty($m4is_s3_zp1['manual_upgrade_confirm']) ) { $this->m4is_bpkxq($m4is_s3_zp1['manual_upgrade'], 'memberium2'); } } elseif ($m4is_shny == 'debug' && isset($m4is_s3_zp1['delete-debug']) && $m4is_s3_zp1['delete-debug'] > '') { unlink(MEMBERIUM_DEBUGLOG); } } $m4is_m_fnw0->m4is_rtwq(); } 
function m4is_erup() { $this->m4is_bxv7u->m4is_lhu9(); $m4is_idyzi5 = $this->m4is_bxv7u->m4is_n367bl(); $m4is_imq43e = $this->m4is_bxv7u->m4is_mmdrl('settings', 'multi_language'); $m4is_m_fnw0 = new m4is_mxg2(); $m4is_m_fnw0->m4is_mneuy0('<h3 style="font-size:200%;">Memberium Settings</h3>'); $m4is_m_fnw0->m4is_vr1up('fa fa-users', 'Logins', 'logins', $this->m4is_bxv7u->m4is_n367bl('options-login-show.php') ); $m4is_m_fnw0->m4is_vr1up('fa fa-file', 'Content Protection', 'content', $this->m4is_bxv7u->m4is_n367bl('options-content-show.php') ); $m4is_m_fnw0->m4is_vr1up('fa fa-unlock-alt', 'Page Handling', 'pagehandling', $this->m4is_bxv7u->m4is_n367bl('options-pagehandling-show.php') ); if (! empty($m4is_imq43e) ) { $m4is_m_fnw0->m4is_vr1up('fa fa-language', 'Language', 'language', $this->m4is_bxv7u->m4is_n367bl('options-language-show.php') ); } $m4is_m_fnw0->m4is_vr1up('fa fa-sitemap', 'Pages', 'pages', $this->m4is_bxv7u->m4is_n367bl('options-pages-show.php') ); $m4is_m_fnw0->m4is_vr1up('fa fa-shield-alt', 'Security', 'security', $this->m4is_bxv7u->m4is_n367bl('options-sitesecurity-show.php') ); $m4is_m_fnw0->m4is_vr1up('fa fa-rocket', 'Performance', 'performance', $this->m4is_bxv7u->m4is_n367bl('options-performance-show.php') ); $m4is_m_fnw0->m4is_vr1up('fa fa-plug', 'Extensions', 'extensions', $this->m4is_bxv7u->m4is_n367bl('options-extensions-show.php') ); $m4is_m_fnw0->m4is_vr1up('fa fa-exchange-alt', 'HTTP Posts/Links', 'httppost', $this->m4is_bxv7u->m4is_n367bl('options-httppost-show.php') ); $current_tab = $m4is_m_fnw0->m4is_j_qc4(); include $this->m4is_bxv7u->m4is_n367bl('options.php'); $m4is_m_fnw0->m4is_rtwq(); } 
function m4is_e4a5y() { require_once $this->m4is_bxv7u->m4is_n367bl('sync.php'); } 
function m4is_sdaewy() { require_once $this->m4is_bxv7u->m4is_n367bl('memberships.php'); } 
function m4is_vew7() { require_once $this->m4is_bxv7u->m4is_n367bl('ecommerce.php'); } 
function m4is_e327r() { require_once $this->m4is_bxv7u->m4is_n367bl('logs.php'); }    
function m4is_yqg9() { echo m4is__95_::m4is_dq5ce('credits'); } 
function m4is_qp2k() { echo m4is__95_::m4is_dq5ce('support'); } 
function m4is_mcqdp2() { require_once $this->m4is_bxv7u->m4is_n367bl('support-debug.php'); }    
function m4is_r9nx($m4is_zv_f) { $m4is_jdpxc = []; foreach($m4is_zv_f as $m4is_ap3_ => $m4is_it_fe) { $m4is_jdpxc[$m4is_ap3_] = $m4is_it_fe; if ($m4is_ap3_ == 'username') { $m4is_jdpxc['user_id_contact_id'] = 'User ID / Contact ID'; } } return $m4is_jdpxc; } 
function m4is_r53f7($m4is_rhfd, $m4is_czdy35, $m4is_q4c_xa) { if ($m4is_czdy35 === 'user_id_contact_id') { $m4is_aicfp = m4is_zbyh::m4is_fhxr6($m4is_q4c_xa); $m4is_rhfd = $m4is_q4c_xa . ' / ' . ($m4is_aicfp ? $m4is_aicfp : '(None)'); } return $m4is_rhfd; } 
function m4is_i5lxc() { if ( $this->m4is_bxv7u->m4is_fop0d() ) { $m4is_zk_wne = current_filter() == 'user_new_form' ? 'checked = "checked" ' : ''; ?>
			<table class="form-table">
				<tr class="form-field">
					<th scope="row"><label for="keap">Keap</label></th>
					<td>
						<label for="mail_chimp">
							<input type="hidden" name="memberium_add_contact" value="off">
							<input style="width: auto;" type="checkbox" name="memberium_add_contact" id="memberium_add_contact" <?php echo $m4is_zk_wne; ?> /> Create a matching contact for this user
						</label>
					</td>
				</tr>
			</table>
			<?php
 } } 
function m4is_dslyq_(){  } 
function m4is_vb9z($m4is_nzrv1) { include_once $this->m4is_bxv7u->m4is_n367bl('user-edit.php'); m4is_vo2q::m4is_y3z1($m4is_nzrv1);  } 
function m4is_lc9w0( $m4is_q4c_xa ) { global $wpdb; $m4is_s3_zp1 = $_POST; if (! current_user_can('manage_options') ) { return; } $m4is_nzrv1 = get_user_by('id', $m4is_q4c_xa); $m4is_aicfp = (int) $this->m4is_bxv7u->m4is__yge( $m4is_nzrv1->user_email ); if ( ! $m4is_aicfp ) { $m4is_aicfp = (int) $this->m4is_bxv7u->m4is_r231y( $m4is_q4c_xa ); } $m4is_nq7s = $this->m4is_bxv7u->m4is_q4nu( $m4is_q4c_xa ); $m4is_bxlnvk = strtolower(trim($m4is_nzrv1->login) ); $m4is_qxfj9 = isset($m4is_s3_zp1['new_emailaddress']) ? strtolower(trim($m4is_s3_zp1['new_emailaddress']) ) : $m4is_bxlnvk; $m4is_pa_1 = strtolower(trim($m4is_nzrv1->user_email) ); $m4is_yj_s = strtolower(trim($m4is_s3_zp1['email']) );  $m4is_lzfpk7 = isset($m4is_s3_zp1['memberium_private_comments']) ? (int) (bool) $m4is_s3_zp1['memberium_private_comments'] : 0;  update_user_meta($m4is_q4c_xa, 'memberium_private_comments', $m4is_lzfpk7);  if ( ! empty( $m4is_s3_zp1['updated_tags'] ) ) { $this->m4is_bxv7u->m4is__mkz( $m4is_s3_zp1['updated_tags'], $m4is_aicfp ); }   if ( ! empty( $m4is_yj_s ) && ( $m4is_pa_1 <> $m4is_yj_s ) || ( $m4is_yj_s <> $m4is_nzrv1->user_login ) ) { $m4is_jgfo_m = ! empty($m4is_s3_zp1['memb_update_email_confirm']); if ($m4is_aicfp) { $this->m4is_bxv7u->m4is_yvxkt($m4is_q4c_xa, $m4is_yj_s, $m4is_aicfp, $m4is_jgfo_m); } $m4is_s3_zp1['email'] = $m4is_yj_s; }    if ( empty( $this->m4is_bxv7u->m4is_mmdrl('settings', 'local_auth_only', false ) ) ) { if ($m4is_s3_zp1['pass1'] > '' && $m4is_s3_zp1['pass1'] === $m4is_s3_zp1['pass2']) { $m4is_aicfp = (int) $this->m4is_bxv7u->m4is__yge($m4is_s3_zp1['email']); if ($m4is_aicfp > 0) { $m4is_ncgn = [ $this->m4is_bxv7u->m4is_mmdrl('settings', 'password_field') => $m4is_s3_zp1['pass1'], ]; m4is_zbyh::m4is_pp0i($m4is_aicfp, $m4is_ncgn, true); } } }  if (! empty( $m4is_s3_zp1['memberium_sync'] ) ) { $this->m4is_bxv7u->m4is_wqve( $m4is_nzrv1->user_email ); $m4is_j6ls = (int) $this->m4is_bxv7u->m4is__yge( $m4is_nzrv1->user_email ); $this->m4is_bxv7u->m4is_cuoc( $m4is_q4c_xa, $m4is_j6ls );   $m4is_q7m2 = $this->m4is_bxv7u->m4is_re5x( 'appname' ); $m4is_w6mt = MEMBERIUM_DB_CONTACTS; $m4is_ioxk = "SELECT `id` FROM `{$m4is_w6mt}` WHERE `appname` = %s AND `fieldname` = 'email' and `value` = %s AND `id` <> %d"; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_q7m2, $m4is_s3_zp1['email'], $m4is_j6ls ); $m4is_jpzyit = $wpdb->get_results($m4is_ioxk, ARRAY_A); $m4is_zs7_ = []; foreach ($m4is_jpzyit as $row) { $m4is_zs7_[] = $row['id']; } if ( ! empty($m4is_zs7_) ) { $m4is_zs7_ = implode(',', $m4is_zs7_); $m4is_ioxk = "DELETE FROM `{$m4is_w6mt}` WHERE `appname` = %s AND `id` IN ({$m4is_zs7_}) "; $m4is_ioxk = $wpdb->prepare($m4is_ioxk, $m4is_q7m2); $m4is_n_bp6 = $wpdb->query($m4is_ioxk); } $m4is_aicfp = $m4is_j6ls;  } $m4is_sxfbjo = $this->m4is_bxv7u->m4is_q4nu( $m4is_q4c_xa ); do_action('memberium/session/updated', $m4is_s3_zp1['user_id'], $m4is_sxfbjo); }  
function m4is_ak52($m4is_ho0w2 = '', $m4is_wmzqp = [], $m4is_i2zk = '', $m4is_w5ky4q = [] ) { if (empty($m4is_wmzqp) || empty($m4is_ho0w2) ) { return; } if (! is_array($m4is_i2zk) ) { $m4is_i2zk = explode(',', $m4is_i2zk); } $m4is_p78sgz = [ 'autofocus' => false, 'class' => '', 'disabled' => false, 'case_sensitive' => false, 'echo' => true, 'form' => '', 'id' => $m4is_ho0w2, 'multiple' => false, 'required' => false, 'size' => 1, 'style' => '', ]; $m4is_w5ky4q = wp_parse_args($m4is_w5ky4q, $m4is_p78sgz); $m4is_k2qb08 = ''; $m4is_k2qb08 .= "<input type='hidden' name='{$m4is_ho0w2}' value=''>"; $m4is_k2qb08 .= '<select name="' . $m4is_ho0w2 . '" '; if ($m4is_w5ky4q['autofocus']) { $m4is_k2qb08 .= ' autofocus="autofocus"'; } if ($m4is_w5ky4q['disabled']) { $m4is_k2qb08 .= ' disabled="disabled"'; } if ($m4is_w5ky4q['multiple']) { $m4is_k2qb08 .= ' multiple="multiple"'; } if ($m4is_w5ky4q['required']) { $m4is_k2qb08 .= ' required="required"'; } if ($m4is_w5ky4q['size']) { $m4is_k2qb08 .= ' size="' . (int) $m4is_w5ky4q['size'] . '"'; } if (! empty($m4is_w5ky4q['class']) ) { $m4is_k2qb08 .= ' class="' . $m4is_w5ky4q['class'] . '"'; } if (! empty($m4is_w5ky4q['style']) ) { $m4is_k2qb08 .= ' style="' . $m4is_w5ky4q['style'] . '"'; } if (! empty($m4is_w5ky4q['form']) ) { $m4is_k2qb08 .= ' form="' . $m4is_w5ky4q['form'] . '"'; } if (! empty($m4is_w5ky4q['id']) ) { $m4is_k2qb08 .= ' id="' . $m4is_w5ky4q['id'] . '"'; } $m4is_k2qb08 .= ' size="' . $m4is_w5ky4q['size'] . '">'; foreach($m4is_wmzqp as $m4is_rhfd => $m4is_a4jlfw) { $m4is_bp1zf3 = false; foreach($m4is_i2zk as $m4is_lphf) { if ($m4is_w5ky4q['case_sensitive']) { $m4is_bp1zf3 = $m4is_bp1zf3 || (bool) ($m4is_rhfd == $m4is_lphf); } else { $m4is_bp1zf3 = $m4is_bp1zf3 || (bool) (0 === strcasecmp($m4is_rhfd, $m4is_lphf) ); } } $m4is_k2qb08 .= '<option value="' . $m4is_rhfd . '" ' . ($m4is_bp1zf3 ? ' selected="selected" ' : '') . '>' . $m4is_a4jlfw . '</option>'; } $m4is_k2qb08 .= '</select>'; if ($m4is_w5ky4q['disabled']) { $m4is_k2qb08 .= '<input type="hidden" name="' . $m4is_ho0w2 . '" value="' . implode(',', $m4is_i2zk) . '">'; } if ($m4is_w5ky4q['echo']) { echo "\n\n", $m4is_k2qb08, "\n\n"; } else { return "\n\n" . $m4is_k2qb08 . "\n\n"; } } 
function m4is_y8v3() { global $wp_roles; $m4is_xmnb1d = []; foreach($wp_roles->roles as $role) { foreach($role['capabilities'] as $k => $v) { $m4is_xmnb1d[] = $k; } } $m4is_xmnb1d = array_unique($m4is_xmnb1d); sort($m4is_xmnb1d); return $m4is_xmnb1d; }  
function m4is_id9fs7() { if (! current_user_can('edit_posts') && ! current_user_can('edit_others_posts') ) { return; } echo __LINE__, ' @ ', __METHOD__; print_r( func_get_args(), true ); die();   $m4is_vzts = empty($_POST['memb_anonymousonly']) ? 0 : (int) $_POST['memb_anonymousonly']; $m4is_x6y3 = empty($_POST['memb_anyloggedinuser']) ? 0 : (int) $_POST['memb_anyloggedinuser']; $m4is_ayghfu = empty($_POST['memb_facebookcrawler']) ? 0 : (int) $_POST['memb_facebookcrawler']; $m4is_au68i = empty($_POST['memb_google1stclick']) ? 0 : (int) $_POST['memb_google1stclick']; $m4is_ac5j = empty($_POST['post_ids']) ? [] : $_POST['post_ids']; $m4is_o3iq = empty($_POST['memb_prohibitedaction']) ? 'default' : $_POST['memb_prohibitedaction']; $m4is_pizyx = empty($_POST['memb_redirecturl']) ? '' : trim($_POST['memb_redirecturl']); $m4is_yx2o = empty($_POST['memb_useexisting']) ? 0 : 1; $m4is_g1gw_z = isset($_POST['memb_memberships']) && ! empty($_POST['memb_memberships']) ? $_POST['memb_memberships'] : ''; if ($m4is_vzts == 1) { $_POST['memb_memberships'] = ''; } if (! empty($_POST['memb_memberships']) ) { } foreach ($m4is_ac5j as $m4is__xysg) { if (current_user_can('edit_post', $m4is__xysg) ) { $m4is_dwgs_ = [ 'prohibited_action' => $m4is_o3iq, 'redirect_url' => $m4is_pizyx, 'facebook_crawler' => $m4is_ayghfu, 'google_1st_click' => $m4is_au68i, ]; m4is_qmpq8::m4is_mp57d($m4is__xysg, $m4is_dwgs_);  if (! $m4is_yx2o) { m4is_qmpq8::m4is_mp57d($m4is__xysg, 'memberships', $m4is_g1gw_z);  if (! empty($_POST['memb_memberships']) ) { $m4is_dwgs_ = [ 'anonymous_only' => $m4is_vzts, 'any_loggedin_user' => $m4is_x6y3, 'any_membership' => '', 'memberships' => $m4is_g1gw_z, ]; m4is_qmpq8::m4is_mp57d($m4is__xysg, $m4is_dwgs_); } else { $m4is_dwgs_ = [ 'anonymous_only' => $m4is_vzts, 'any_loggedin_user' => $m4is_x6y3, 'any_membership' => '', ]; m4is_qmpq8::m4is_mp57d($m4is__xysg, $m4is_dwgs_); } } else { } } else { } } } 
function m4is_uiyaz() { global $post;  $m4is_galwv0 = get_post_meta($post->ID); $m4is_kbu63_ = [ '_is4wp_commenter_action' => '_is4wp_commenter_action', '_is4wp_commenter_goal' => '_is4wp_commenter_goal', '_is4wp_commenter_tag' => '_is4wp_commenter_tag', '_is4wp_hide_from_menu' => '_is4wp_hide_from_menu', '_is4wp_private_comments' => '_is4wp_private_comments', 'access_tags' => '_is4wp_access_tags', 'access_tags2' => '_is4wp_access_tags2', 'anonymous_only' => '_is4wp_anonymous_only', 'any_membership' => '_is4wp_any_membership', 'contact_ids' => '_is4wp_contact_ids', 'facebook_crawler' => '_is4wp_facebook_crawler', 'google_1stclick' => '_is4wp_google_1stclick', 'hide_completely' => '_is4wp_hide_completely', 'is4wp_can_comment' => '_is4wp_can_comment', 'is4wp_discourage_cache' => '_is4wp_discourage_cache', 'is4wp_force_public' => '_is4wp_force_public', 'logged_in' => '_is4wp_any_loggedin_user', 'membership_levels' => '_is4wp_membership_levels', 'prohibited_action' => '_is4wp_prohibited_action', 'redirect_url' => '_is4wp_redirect_url', ]; foreach ($m4is_kbu63_ as $m4is_sd4y_p => $m4is_taok8) { if (isset($m4is_galwv0[$m4is_taok8][0]) ) { $m4is_ti8od[$m4is_sd4y_p] = $m4is_galwv0[$m4is_taok8][0]; } else { $m4is_ti8od[$m4is_sd4y_p] = ''; } } unset($m4is_galwv0);  if ($m4is_ti8od['hide_completely'] == 1) { $m4is_ti8od['prohibited_action'] = 'hide'; } if ($m4is_ti8od['prohibited_action'] == '') { $m4is_oog89i = $this->m4is_bxv7u->m4is_mmdrl('settings', 'default_prohibited_action'); if (! empty($m4is_oog89i) ) { $m4is_ti8od['prohibited_action'] = $m4is_oog89i; } } wp_nonce_field( $this->m4is_bxv7u->m4is_yl5j8(), "memberium_membershipaccess_nonce_{$post->ID}"); if ($post->post_parent > 0 && $this->m4is_bxv7u->m4is_mmdrl('settings', 'page_inheritance') ) { echo '<p style="color:red;text-align:center;"><strong>Inherits Access from the <a href="post.php?post=', $post->post_parent, '&action=edit">Parent Page</a></strong></p>'; } echo '<div class="memb_access_options">'; echo '<input type="checkbox" name="is4wp_anymembership" id="is4wp_anymembership" value="1" ', ($m4is_ti8od['any_membership'] == 1 ? ' checked="checked" ' : ''), '> <label for="is4wp_anymembership">', _e('Any Membership Level', 'memberium'), '</label><br />';  $m4is_g1gw_z = array_filter(explode(',', $m4is_ti8od['membership_levels']) ); $m4is_fdf0v = $this->m4is_bxv7u->m4is_mmdrl('memberships'); if (is_array($m4is_fdf0v) ) { foreach ($m4is_fdf0v as $m4is_b40e_m => $m4is_tyoak) { echo '<input type="checkbox" class="memberium_membership_checkbox" name="is4wp_membership_levels[' . $m4is_b40e_m . ']" value="' . $m4is_b40e_m . '" id="is4wp_membership_' . $m4is_b40e_m . '" ' . (in_array($m4is_b40e_m, $m4is_g1gw_z) ? ' checked="checked" ' : '') . '>&nbsp;<label class="memberium_membership_checkbox" for="is4wp_membership_' . $m4is_b40e_m . '">' . stripslashes($m4is_tyoak['name']) . '&nbsp;(' . $m4is_tyoak['level'] . ')</label><br />'; } } echo '</div>'; echo '<hr />'; if ( $this->m4is_bxv7u->m4is_mmdrl('settings', 'site_lock_enabled') ) { echo '<input type="checkbox" name="is4wp_force_public" id="is4wp_force_public" value="1" ', ($m4is_ti8od['is4wp_force_public'] == 1 ? ' checked="checked" ' : ''), '> <label for="is4wp_force_public">', _e('Force Public', 'memberium'), '</label><br />'; } echo '<div class="memb_access_options">'; echo '<input type="checkbox" name="is4wp_loggedin" id="is4wp_loggedin" value="1" ', ($m4is_ti8od['logged_in'] == 1 ? ' checked="checked" ' : ''), '> <label for="is4wp_loggedin">', _e('Any Logged In User', 'memberium'), '</label><br />'; echo '<input type="checkbox" name="is4wp_anonymous_only" id="is4wp_anonymous_only" value="1" ', ($m4is_ti8od['anonymous_only'] == 1 ? ' checked="checked" ' : ''), '> <label for="is4wp_anonymous_only">', _e('Logged Out Only', 'memberium'), '</label><br />'; echo '<label for="is4wp_contact_ids">' . _e("Require Contact ID's", 'memberium') . '</label>'; echo '<textarea name="is4wp_contact_ids" rows="1" style="width:100%; max-width:100%">' . ($m4is_ti8od['contact_ids'] > '' ? $m4is_ti8od['contact_ids'] : '') . '</textarea>'; echo '<label for="is4wp_access_tags">' . _e("Require Tag ID&#39;s", 'memberium') . '</label> '; echo '<input type="text" name="is4wp_access_tags" value="' . ($m4is_ti8od['access_tags'] > '' ? $m4is_ti8od['access_tags'] : '') . '" class="multitaglist2" style="width:100%; max-width:100%">'; echo '<label for="is4wp_access_tags2">' . _e("AND Require Tag ID&#39;s", 'memberium') . '</label> '; echo '<input type="text" name="is4wp_access_tags2" value="' . ($m4is_ti8od['access_tags2'] > '' ? $m4is_ti8od['access_tags2'] : '') . '" class="multitaglist2" style="width:100%; max-width:100%">'; echo '</div>'; echo '<hr />'; echo '<input type="checkbox" name="is4wp_hide_from_menu" id="is4wp_hide_from_menu" value="1" ', ($m4is_ti8od['_is4wp_hide_from_menu'] == 1 ? ' checked="checked" ' : ''), '> <label for="is4wp_hide_from_menu">', _e('Hide from Menus', 'memberium'), '</label><br />'; echo '<div class="memb_access_options">'; echo '<input type="checkbox" name="is4wp_google_1stclick" id="is4wp_google_1stclick" value="1" ', ($m4is_ti8od['google_1stclick'] == 1 ? ' checked="checked" ' : ''), '> <label for="is4wp_google_1stclick">', _e('Google 1st Click Free', 'memberium'), '</label><br />'; echo '<input type="checkbox" name="is4wp_facebook_crawler" id="is4wp_facebook_crawler" value="1" ', ($m4is_ti8od['facebook_crawler'] == 1 ? ' checked="checked" ' : ''), '> <label for="is4wp_facebook_crawler">', _e('Facebook Crawler Access', 'memberium'), '</label><br />'; echo '</div>'; echo '<hr />'; echo '<div class="memb_access_options">'; echo _e('When Prohibited', 'memberium'), ': <select id="is4wp_prohibited_action" name="is4wp_prohibited_action">'; $m4is_hfpx0 = []; $m4is_oog89i = $this->m4is_bxv7u->m4is_mmdrl('settings', 'default_prohibited_action'); if ($m4is_oog89i > '') { $m4is_hfpx0['default'] = 'Site Default (' . ucwords($m4is_oog89i) . ')'; } $m4is_hfpx0['hide'] = 'Hide Completely'; if (post_type_supports($post->post_type, 'excerpt') ) { $m4is_hfpx0['excerpt'] = 'Show Excerpt Only'; } $m4is_hfpx0['redirect'] = 'Redirect'; foreach ($m4is_hfpx0 as $m4is_rhfd => $m4is_a4jlfw) { $m4is_bp1zf3 = $m4is_ti8od['prohibited_action'] == $m4is_rhfd ? 'selected="selected"' : ''; echo '<option value="' . $m4is_rhfd . '" ' . $m4is_bp1zf3 . '>' . $m4is_a4jlfw . '</option>'; } echo '</select><br />'; echo '</div>'; $m4is_il2bfy = $this->m4is_bxv7u->m4is_mmdrl('settings', 'default_page_redirect'); $m4is_o30y = ($m4is_il2bfy > '' ? 'Default Redirect to ' . $m4is_il2bfy : 'Leave blank for sitewide default'); echo '<div class="memb_redirect_options">'; echo '<label for="is4wp_redirect_url">' . _e('Redirect URL', 'memberium') . '</label> '; echo '<input type="text" id="is4wp_redirect_url" name="is4wp_redirect_url" style="width:100%; max-width:100%" rows="1" value="', $m4is_ti8od['redirect_url'], '" placeholder="', $m4is_o30y, '">'; echo '</div>'; if (post_type_supports($post->post_type, 'comments') ) { echo '<p style="margin-top:20px;"><strong>Advanced Comment Functions</strong></p>'; echo '<input type="hidden" name="_is4wp_private_comments" value="0">'; echo '<input type="checkbox" name="_is4wp_private_comments" id="_is4wp_private_comments" value="1" ', ($m4is_ti8od['_is4wp_private_comments'] == 1 ? ' checked="checked" ' : ''), '> <label for="_is4wp_private_comments">', _e('Private Commenting', 'memberium'), '</label><br />'; echo '<label for="is4wp_can_comment">' . _e("Enable Comments if Tag Present", 'memberium') . '</label> '; echo '<input type="text" name="is4wp_can_comment" value="' . ($m4is_ti8od['is4wp_can_comment'] > '' ? $m4is_ti8od['is4wp_can_comment'] : '') . '" class="multitaglist" style="width:100%; max-width:100%">'; echo '<label for="_is4wp_commenter_tag">' . _e("Apply Tags on Comment", 'memberium') . '</label> '; echo '<input type="text" name="_is4wp_commenter_tag" value="' . ($m4is_ti8od['_is4wp_commenter_tag'] > '' ? $m4is_ti8od['_is4wp_commenter_tag'] : '') . '" class="multitaglist" style="width:100%; max-width:100%">'; echo '<label for="_is4wp_commenter_goal">' . _e("Achieve Goal on Comment", 'memberium') . '</label> '; echo '<input type="text" name="_is4wp_commenter_goal" style="width:100%; max-width:100%" value="' . ($m4is_ti8od['_is4wp_commenter_goal'] > '' ? $m4is_ti8od['_is4wp_commenter_goal'] : '') . '">'; echo '<label for="_is4wp_commenter_action">' . _e("Run Actionset on Comment", 'memberium') . '</label> '; echo '<select class="actionset-selector" name="_is4wp_commenter_action" style="width:100%; max-width:100%">'; echo '<option value="0">(No Actions)</option>'; $m4is_b8ve = m4is_f84s3h::m4is_wl42q6(); if (is_array($m4is_b8ve) ) { foreach ($m4is_b8ve as $m4is_cga2c => $m4is_bnlctw) { echo '<option value="', $m4is_cga2c, '" ', ($m4is_ti8od['_is4wp_commenter_action'] == $m4is_cga2c ? ' selected="selected" ' : '') , '>', $m4is_bnlctw, '</option>'; } } unset($m4is_b8ve, $m4is_cga2c, $m4is_bnlctw); echo '</select>'; } echo '<p>'; echo '<input type="hidden" name="is4wp_discourage_cache" value="0">'; echo '<input type="checkbox" name="is4wp_discourage_cache" id="is4wp_discourage_cache" value="1" ', ($m4is_ti8od['is4wp_discourage_cache'] == 1 ? ' checked="checked" ' : ''), '> <label for="is4wp_discourage_cache">', _e('Discourage Caching', 'memberium'), '</label><br />'; echo '</p>'; } 
function m4is_g_irh($m4is__xysg) {  if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) { return; } $m4is_s3_zp1 = $_POST;  if (empty($m4is_s3_zp1["memberium_membershipaccess_nonce_{$m4is__xysg}"]) || ! wp_verify_nonce($m4is_s3_zp1["memberium_membershipaccess_nonce_{$m4is__xysg}"], $this->m4is_bxv7u->m4is_yl5j8() ) ) { return; }  if (! empty($m4is_s3_zp1['post_type']) && 'page' == $m4is_s3_zp1['post_type']) { if (! current_user_can('edit_pages', $m4is__xysg) ) { return; } } else { if (! current_user_can('edit_posts', $m4is__xysg) ) { return; } } $m4is_s3_zp1['is4wp_discourage_cache'] = isset($m4is_s3_zp1['is4wp_discourage_cache']) ? $m4is_s3_zp1['is4wp_discourage_cache'] : ''; $m4is_s3_zp1['is4wp_access_tags'] = isset($m4is_s3_zp1['is4wp_access_tags']) ? $m4is_s3_zp1['is4wp_access_tags'] : ''; $m4is_s3_zp1['is4wp_access_tags2'] = isset($m4is_s3_zp1['is4wp_access_tags2']) ? $m4is_s3_zp1['is4wp_access_tags2'] : ''; $m4is_s3_zp1['is4wp_anonymous_only'] = isset($m4is_s3_zp1['is4wp_anonymous_only']) ? $m4is_s3_zp1['is4wp_anonymous_only'] : 0; $m4is_s3_zp1['is4wp_anymembership'] = isset($m4is_s3_zp1['is4wp_anymembership']) ? $m4is_s3_zp1['is4wp_anymembership'] : 0; $m4is_s3_zp1['is4wp_contact_ids'] = isset($m4is_s3_zp1['is4wp_contact_ids']) ? $m4is_s3_zp1['is4wp_contact_ids'] : ''; $m4is_s3_zp1['is4wp_facebook_crawler'] = isset($m4is_s3_zp1['is4wp_facebook_crawler']) ? $m4is_s3_zp1['is4wp_facebook_crawler'] : 0; $m4is_s3_zp1['is4wp_force_public'] = isset($m4is_s3_zp1['is4wp_force_public']) ? $m4is_s3_zp1['is4wp_force_public'] : ''; $m4is_s3_zp1['is4wp_google_1stclick'] = isset($m4is_s3_zp1['is4wp_google_1stclick']) ? $m4is_s3_zp1['is4wp_google_1stclick'] : 0; $m4is_s3_zp1['is4wp_hide_completely'] = isset($m4is_s3_zp1['is4wp_hide_completely']) ? $m4is_s3_zp1['is4wp_hide_completely'] : 0; $m4is_s3_zp1['is4wp_hide_from_menu'] = isset($m4is_s3_zp1['is4wp_hide_from_menu']) ? $m4is_s3_zp1['is4wp_hide_from_menu'] : ''; $m4is_s3_zp1['is4wp_loggedin'] = isset($m4is_s3_zp1['is4wp_loggedin']) ? $m4is_s3_zp1['is4wp_loggedin'] : 0; $m4is_s3_zp1['is4wp_prohibited_action'] = isset($m4is_s3_zp1['is4wp_prohibited_action']) ? $m4is_s3_zp1['is4wp_prohibited_action'] : ''; $m4is_s3_zp1['is4wp_redirect_url'] = isset($m4is_s3_zp1['is4wp_redirect_url']) ? trim($m4is_s3_zp1['is4wp_redirect_url']) : ''; if ($m4is_s3_zp1['is4wp_anymembership'] == 0) { $m4is_s3_zp1['is4wp_membership_levels'] = isset($m4is_s3_zp1['is4wp_membership_levels']) ? $m4is_s3_zp1['is4wp_membership_levels'] : []; } else { $m4is_s3_zp1['is4wp_membership_levels'] = []; } if (isset($m4is_s3_zp1['_is4wp_private_comments']) ) { m4is_qmpq8::m4is_mp57d($m4is__xysg, 'private_comments', $m4is_s3_zp1['_is4wp_private_comments']); } if (isset($m4is_s3_zp1['is4wp_can_comment']) ) { m4is_qmpq8::m4is_mp57d($m4is__xysg, 'can_comment', $m4is_s3_zp1['is4wp_can_comment']); } if (isset($m4is_s3_zp1['_is4wp_commenter_tag']) ) { m4is_qmpq8::m4is_mp57d($m4is__xysg, 'commenter_tag', $m4is_s3_zp1['_is4wp_commenter_tag']); } if (isset($m4is_s3_zp1['_is4wp_commenter_action']) ) { m4is_qmpq8::m4is_mp57d($m4is__xysg, 'commenter_action', $m4is_s3_zp1['_is4wp_commenter_action']); } if (isset($m4is_s3_zp1['_is4wp_commenter_goal']) ) { m4is_qmpq8::m4is_mp57d($m4is__xysg, 'commenter_goal', $m4is_s3_zp1['_is4wp_commenter_goal']); } if ( (int)$m4is_s3_zp1['is4wp_anonymous_only'] == 1) { $m4is_s3_zp1['is4wp_membership_levels'] = ''; } $m4is_g1gw_z = implode(',', (array) $m4is_s3_zp1['is4wp_membership_levels']); $m4is_dwgs_ = [ 'access_tags' => $m4is_s3_zp1['is4wp_access_tags'], 'access_tags2' => $m4is_s3_zp1['is4wp_access_tags2'], 'anonymous_only' => (int) $m4is_s3_zp1['is4wp_anonymous_only'], 'any_loggedin_user' => (int) $m4is_s3_zp1['is4wp_loggedin'], 'any_membership' => $m4is_s3_zp1['is4wp_anymembership'], 'contact_ids' => $m4is_s3_zp1['is4wp_contact_ids'], 'discourage_cache' => (int) $m4is_s3_zp1['is4wp_discourage_cache'], 'facebook_crawler' => (int) $m4is_s3_zp1['is4wp_facebook_crawler'], 'force_public' => (int) $m4is_s3_zp1['is4wp_force_public'], 'google_1st_click' => (int) $m4is_s3_zp1['is4wp_google_1stclick'], 'hide_from_menu' => (int) $m4is_s3_zp1['is4wp_hide_from_menu'], 'memberships' => $m4is_g1gw_z, 'prohibited_action' => $m4is_s3_zp1['is4wp_prohibited_action'], 'redirect_url' => $m4is_s3_zp1['is4wp_redirect_url'], ]; m4is_qmpq8::m4is_mp57d($m4is__xysg, $m4is_dwgs_); $this->m4is_bxv7u->m4is_sc3a(); delete_post_meta($m4is__xysg, '_is4wp_hide_completely'); return; } 
function m4is_owdq($m4is_czdy35, $m4is_dmesa) { static $m4is_galxyj = TRUE; if ($m4is_galxyj) { $m4is_galxyj = FALSE; wp_nonce_field( $this->m4is_bxv7u->m4is_yl5j8(), 'memb_accesscontrol_quickedit_nonce'); } echo '<fieldset class="inline-edit-col-right inline-edit-', $m4is_czdy35, '">'; echo '<div class="inline-edit-col column-', $m4is_czdy35, '">'; echo '<label class="inline-edit-group">'; switch ($m4is_czdy35) { case 'memberships': $m4is_fdf0v = $this->m4is_bxv7u->m4is_mmdrl('memberships'); if (count($m4is_fdf0v) > 0) {  echo '<ul>'; echo '<em>Membership Access</em>'; foreach ($m4is_fdf0v as $m4is_b40e_m => $m4is_tyoak) { echo '<label for="memb_membership_' . $m4is_b40e_m . '"><input type="checkbox" name="memb_membership_levels[' . $m4is_b40e_m . ']" value="' . $m4is_b40e_m . '" id="memb_membership_' . $m4is_b40e_m . '"> ' . stripslashes($m4is_tyoak['name']) . '</label>'; } echo '<label for="memb_anonymousonly"><input type="checkbox" name="memb_anonymousonly" value="1" id="memb_anonymousonly">Logged Out Only</label>'; echo '<label for="memb_google1stclick"><input type="checkbox" name="memb_google1stclick" value="1" id="memb_google1stclick">Google 1st Click Free</label>'; echo '<label for="memb_facebookcrawler"><input type="checkbox" name="memb_facebookcrawler" value="1" id="memb_facebookcrawler">Facebook Crawler Access</label>'; echo '</ul>'; echo '<hr />'; echo '<label><span class="title" style="width:75px;">Prohibited</span><select name="memb_prohibitedaction" id="memb_prohibitedaction">'; echo '<option value="default">Default</option>'; echo '<option value="redirect">Redirect</option>'; echo '<option value="hide">Hide Completely</option>'; echo '<option value="excerpt">Show Excerpt Only</option>'; echo '</select></label>'; echo '<label><span class="title" style="width:75px;">Redirect URL  </span><input type="text" name="memb_redirecturl" value="" placeholder="" id="memb_redirecturl"></label>'; } break; } echo '</label></div></fieldset>'; } 
function m4is_v0yx5() { $m4is_s3_zp1 = $_POST; if (!isset($m4is_s3_zp1['memb_accesscontrol_quickedit_nonce']) || !wp_verify_nonce($m4is_s3_zp1['memb_accesscontrol_quickedit_nonce'], $this->m4is_bxv7u->m4is_yl5j8() ) ) { return; } if (! current_user_can('edit_posts') && ! current_user_can('edit_others_posts') ) { return; } $m4is__xysg = (int) $m4is_s3_zp1['ID']; if ($m4is__xysg > 0 && current_user_can('edit_post', $m4is__xysg) ) { $m4is_s3_zp1['memb_facebookcrawler'] = isset($m4is_s3_zp1['memb_facebookcrawler']) ? $m4is_s3_zp1['memb_facebookcrawler'] : 0; $m4is_s3_zp1['memb_google1stclick'] = isset($m4is_s3_zp1['memb_google1stclick']) ? $m4is_s3_zp1['memb_google1stclick'] : 0; $m4is_s3_zp1['memb_anonymousonly'] = isset($m4is_s3_zp1['memb_anonymousonly']) ? $m4is_s3_zp1['memb_anonymousonly'] : 0; $m4is_s3_zp1['memb_membership_levels'] = isset($m4is_s3_zp1['memb_membership_levels']) ? $m4is_s3_zp1['memb_membership_levels'] : ''; $m4is_s3_zp1['memb_redirecturl'] = isset($m4is_s3_zp1['memb_redirecturl']) ? trim($m4is_s3_zp1['memb_redirecturl']) : '';  if ( (int)$m4is_s3_zp1['memb_anonymousonly'] == 1) { $m4is_s3_zp1['memb_membership_levels'] = ''; } if ($m4is_s3_zp1['memb_prohibitedaction'] != 'redirect') { $m4is_s3_zp1['memb_redirecturl'] = ''; } $m4is_g1gw_z = implode(',', (array) $m4is_s3_zp1['memb_membership_levels']);  m4is_qmpq8::m4is_mp57d($m4is__xysg, 'anonymous_only', $m4is_s3_zp1['memb_anonymousonly']); m4is_qmpq8::m4is_mp57d($m4is__xysg, 'google_1st_click', $m4is_s3_zp1['memb_google1stclick']); m4is_qmpq8::m4is_mp57d($m4is__xysg, 'facebook_crawler', $m4is_s3_zp1['memb_facebookcrawler']); m4is_qmpq8::m4is_mp57d($m4is__xysg, 'memberships', $m4is_g1gw_z); m4is_qmpq8::m4is_mp57d($m4is__xysg, 'prohibited_action', $m4is_s3_zp1['memb_prohibitedaction']); m4is_qmpq8::m4is_mp57d($m4is__xysg, 'redirect_url', $m4is_s3_zp1['memb_redirecturl']); delete_post_meta($m4is__xysg, '_is4wp_hide_completely'); $this->m4is_bxv7u->m4is_sc3a(); } }  
function m4is_hx6lu() { return; } 
function m4is_k98fe($m4is_zv_f = []) { static $m4is_d4yu8j = false; if (! is_array($m4is_d4yu8j)) { $m4is_vp9k = [ 'cb', 'email', 'name', 'username', ]; $m4is_vp9k = apply_filters('memberium/admin/user/columns', $m4is_vp9k, $m4is_zv_f); foreach($m4is_zv_f as $m4is_ap3_ => $m4is_a4jlfw) { if (! in_array($m4is_ap3_, $m4is_vp9k)) { unset($m4is_zv_f[$m4is_ap3_]); } } $m4is_d4yu8j = $m4is_zv_f; } return $m4is_d4yu8j; }    
function m4is_d4jl($m4is_zv59, $m4is_rp1is, $m4is__mto) { if (session_status() !== PHP_SESSION_ACTIVE && ! headers_sent() ) { session_start(); } return $m4is_zv59; } 
function m4is_empn($m4is_sqngl, $m4is_w5ky4q, $m4is__mto) { if (session_status() === PHP_SESSION_ACTIVE) { session_write_close(); } return $m4is_sqngl; } 
function m4is_o918($m4is_uv1r) {  if (session_status() == PHP_SESSION_ACTIVE) { session_write_close(); } return $m4is_uv1r; } private 
function m4is_xckg3u() { add_action('admin_notices', ['m4is_vtewl', 'm4is_x12tl']); } 
function m4is_ap508() { $this->m4is_xckg3u(); add_filter('site_status_tests', [$this, 'm4is_o918'], 1, 1); add_filter('http_response', [$this, 'm4is_d4jl'], 1, 3); add_filter('pre_http_request', [$this, 'm4is_empn'], 1, 3); add_filter('manage_users_columns', [$this, 'm4is_r9nx']); add_filter('manage_users_custom_column', [$this, 'm4is_r53f7'], 10, 3 ); } }
