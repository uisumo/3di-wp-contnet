(()=>{var e={587:()=>{function e(e,n,a){if(a||(a=location.href),e=escape(e),!(n=escape(n)))return t(e,a);var o=e+"="+n,s=new RegExp("(&|\\?)"+e+"=[^&]*");return(a=a.replace(s,"$1"+o)).indexOf(e+"=")>-1||(a.indexOf("?")>-1?a+="&"+o:a+="?"+o),a}function t(e,t){t||(t=location.href),e=escape(e);var n=new RegExp("(&|\\?)"+e+"=[^&]*");return t.replace(n,"")}jQuery(document).ready((function(n){function a(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n("#uoc-generate-code-preview-fake-code").length>0){var t=uoCodesStrings.avail_characters,a=n("input[name='coupon-dash']").val(),o=n("input[name='coupon-length']").val(),s=n("input[name='coupon-prefix']").val(),r=s.length,i=n("input[name='coupon-suffix']").val(),c=i.length,l="",u=n("input[type=checkbox][name='coupon-character-type[]']:checked").map((function(){return n(this).val()})).get();-1==n.inArray("lowercase-letters",u)&&(t=t.replace("abcdefghjkmnpqrstuvwxyz","")),-1==n.inArray("uppercase-letters",u)&&(t=t.replace("ABCDEFGHJKLMNPQRSTUVWXYZ","")),-1==n.inArray("numbers",u)&&(t=t.replace("123456789","")),0==t.length&&(t="123456789ABCDEFGHJKLMNPQRSTUVWXYZ"),o=o-r-c;for(var d=0;d<o;d++){var h=Math.floor(Math.random()*t.length);l+=t.substring(h,h+1)}var p=s+l+i;if(a){a=a.split("-");var m=p.split(""),f="",y=0,g=0;n(m).each((function(e){f+=n(this)[0],y++,a[g]<=y&&(g++,y=0,f+="-")})),"-"==f.substring(f.length-1,f.length)&&(f=f.substring(0,f.length-1))}else f=p;if(e)return f;n("#uoc-generate-code-preview-fake-code").html(f)}}function o(){"courses"==n("#uncanny_form_input_vendor #assign_where").val()?(n("#uncanny_form_input_vendor #assign_courses").show(),n("#uncanny_form_input_vendor #assign_lessons").hide()):(n("#uncanny_form_input_vendor #assign_courses").hide(),n("#uncanny_form_input_vendor #assign_lessons").show())}n("#coupon-length").keypress((function(e){10!==e.which&&13!==e.which||e.preventDefault()})),n(".uo-btn-delete").on("click",(function(e){confirm(uoCodesStrings.Doyoureallywanttodeletethesecodes)||e.preventDefault()})),a(),n("input[name='coupon-length'], input[name='coupon-prefix'], input[name='coupon-suffix'], input[name='coupon-dash']").on("input",(function(e){a()})),n("input[type=checkbox][name='coupon-character-type[]']").change((function(e){a()})),n("#uncanny_form_input_vendor #assign_where").length&&(o(),n("#uncanny_form_input_vendor #assign_where").change((function(){o()}))),n("#page_coupon_stat .btn_delete, #page_coupon_stat .btn_delete").click((function(e){confirm(uoCodesStrings.Doyoureallywanttodeletethis)||e.preventDefault()})),n("#prefix_selector_for_coupon_group").change((function(){n(this).val()?location.href=e("prefix",n(this).val()):location.href=t("prefix")})),n("#badge_selector_for_coupon_group").change((function(){n(this).val()?location.href=e("badge_id",n(this).val()):location.href=t("badge_id")}))})),jQuery.fn.regexMask=function(e){jQuery(this).keypress((function(t){if(!t.charCode)return!0;var n=this.value.substring(0,this.selectionStart),a=this.value.substring(this.selectionEnd,this.value.length);return!!e.test(n+String.fromCharCode(t.charCode)+a)&&void 0}))},jQuery(document).ready((function(){var e=new RegExp("^[A-Za-z0-9]*$");jQuery("input.regex-alphanumeric").regexMask(e)}))},238:()=>{jQuery(document).ready((function(e){e(document).ready((function(){var n=window.location.href,a=new URL(n);(a.searchParams.has("action")&&"edit"===a.searchParams.get("action")||a.searchParams.has("post_type")&&"product"===a.searchParams.get("post_type"))&&e("body").hasClass("post-type-product")&&t.init()}));var t={init:function(){this.getElements(),this.setupUncannyCodesType(),this.setCodesGroupID(),this.addActions()},getElements:function(){this.$elements={product_type:jQuery("#product-type"),virtual_input:jQuery("#_virtual"),general_tab:jQuery(".product_data_tabs .general_tab"),general_tab_link:jQuery("li.general_options a"),general_pricing:jQuery("#general_product_data .pricing"),inventory_options:e(".inventory_options"),inventory_manage_stock:e("#_manage_stock"),inventory_manage_stock_field:e("#inventory_product_data ._manage_stock_field"),inventory_stock:jQuery("#_stock"),inventory_stock_status:jQuery("#_stock_status"),inventory_backorders:jQuery("#_backorders"),inventory_sold_individually_field:e("#inventory_product_data ._sold_individually_field"),codesGroupName:e("#codes_group_name"),codesGroupTotal:e("#codes_group_total"),codesGroupAvailable:e("#codes_group_available"),codesGroupEdit:e("#codes_group_edit"),codesGroupError:e("#codes_group_error")}},setupUncannyCodesType:function(){this.$elements.general_pricing.addClass("show_if_automator_codes"),this.$elements.inventory_manage_stock_field.addClass("show_if_automator_codes"),this.$elements.inventory_sold_individually_field.addClass("show_if_automator_codes"),this.$elements.inventory_sold_individually_field.parent().addClass("show_if_automator_codes"),"automator_codes"===this.$elements.product_type.val()&&(this.$elements.general_tab.show(),this.$elements.general_pricing.show(),this.$elements.inventory_options.show(),this.$elements.inventory_manage_stock_field.show(),this.$elements.inventory_stock_status.prop("disabled",!0),this.$elements.inventory_backorders.prop("disabled",!0))},setCodesGroupID:function(){"automator_codes"===this.$elements.product_type.val()&&this.updateGroupCodesFields()},addActions:function(){var t=this;this.$elements.product_type.on("change",(function(e){"automator_codes"===t.$elements.product_type.val()&&(t.$elements.inventory_manage_stock.trigger("click"),t.$elements.virtual_input.trigger("click"),t.$elements.inventory_stock_status.prop("disabled",!0),t.$elements.inventory_backorders.prop("disabled",!0),t.$elements.inventory_options.show(),t.$elements.inventory_manage_stock_field.show(),t.updateGroupCodesFields())})),this.$elements.codesGroupName.on("change",(function(e){t.updateGroupCodesFields()})),this.$elements.codesGroupEdit.on("click",(function(){var t=e(this).data("group"),n=e(this).data("href");window.open(n+t,"_blank")}))},updateGroupCodesFields:function(){t.$elements.codesGroupTotal.val(""),t.$elements.codesGroupTotal.val(""),t.$elements.codesGroupAvailable.val(""),t.$elements.codesGroupEdit.data("group",this.$elements.codesGroupName.val()),n.restCall()}},n={restCall:function(){t.$elements.codesGroupTotal.val(""),t.$elements.codesGroupAvailable.val(""),e.ajax({method:"GET",url:uoCodesStrings.root+"/get_codes_group_detail/"+t.$elements.codesGroupName.val()+"/",beforeSend:function(e){t.$elements.codesGroupName.attr("disabled","disabled"),t.$elements.codesGroupEdit.attr("disabled","disabled"),t.$elements.codesGroupError.hide(),e.setRequestHeader("X-WP-Nonce",uoCodesStrings.nonce)}}).done((function(e){!0===e.success?(t.$elements.codesGroupTotal.val(e.total),t.$elements.codesGroupAvailable.val(e.available),t.$elements.inventory_stock.val(e.available),t.$elements.inventory_stock_status.val(e.stock_status)):(t.$elements.codesGroupTotal.val(""),t.$elements.codesGroupAvailable.val(""),t.$elements.codesGroupError.first().html(e.message),t.$elements.codesGroupError.show().delay(7e3).fadeOut())})).fail((function(e){})).always((function(e){t.$elements.codesGroupName.removeAttr("disabled"),t.$elements.codesGroupEdit.removeAttr("disabled")}))}}}))}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=jQuery;var t=n.n(e);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,s=[],r=!0,i=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(s.push(a.value),!t||s.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==n.return||n.return()}finally{if(i)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var r=function(e){return null!=e},i=function(e){var t=!0;return r(e)&&(t=e.isArray?0==e.length:c(e)?Object.keys(e).length:""==e),t},c=function(e){return"object"===s(e)&&null!==e},l=function(e,n){return Array.isArray(e)?0==arrayDifference(e,n).length:-1!==t().inArray(e,n)},u=function(e,t){var n=-1;return function(){clearTimeout(n);var a=arguments,o=this;n=setTimeout((function(){e.apply(o,a)}),t)}};function d(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=jQuery,f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isTheCodesBatchGenerator()&&(this.getElements(),this.getData(),this.updateUI(),this.listenChangesToBatchName(),this.listenChangesToDependencyOptions(),this.listenChangesToLearnDashContent(),this.listenChangesToGenerationMethod(),this.listenChangesToNumberOfUsesPerCode(),this.initSelect2Fields())}var n,o;return n=e,o=[{key:"getElements",value:function(){this.$elements={container:m("#uoc-generate"),batchName:m("#uoc-generate-batch-name"),batchNameError:m("#uoc-generate-batch-name-error"),batchNameContainer:m("#uoc-generate-batch-name-container"),select2Fields:m(".uoc-generate--select2-js"),dependencyOptions:m(".uoc-generate-dependency-option--js"),dependencyLearnDashContent:m(".uoc-generate-dependency-ld-content-option--js"),generationMethod:m(".uoc-generate-generation-method--js"),numberOfUsesPerCode:m("#uoc-generate-coupon-max-usage"),submitButton:m("#uoc-generate-submit-button"),allFieldsWithDynamicRequiredProp:m("#uoc-generate input:not(.uoc-generate--always-required-js), #uoc-generate select:not(.uoc-generate--always-required-js), #uoc-generate textarea:not(.uoc-generate--always-required-js)"),sections:{dependencyLearnDash:m("#uoc-generate-dependency-specific-learndash"),dependencyLearnDashCourses:m("#uoc-generate-dependency-specific-learndash-courses"),dependencyLearnDashGroups:m("#uoc-generate-dependency-specific-learndash-groups"),codeSetup:m("#uoc-generate-code-setup"),creationMethodAuto:m("#uoc-generate-generation-method-auto"),creationMethodManual:m("#uoc-generate-generation-method-manual")},notices:{youMustInstallAutomator:m("#uoc-generate-dependency-automator-install"),youMustUpdateAutomator:m("#uoc-generate-dependency-automator-update"),automatorNextStep:m("#uoc-generate-dependency-automator-what-now"),youMustInstallLearnDash:m("#uoc-generate-dependency-learndash-install"),codeMaxUsageWooCommerce:m("#uoc-generate-code-setup-max-usage-woocommerce-notice")}}}},{key:"getData",value:function(){this.data={isFirstStepReady:!1,selectedData:{dependency:null,learnDashContent:null,generationMethod:null,numberOfUsesPerCode:null},dynamicRequiredFields:{learndash:{always:["learndash-content","learndash-code-type"],whenSelectingCourses:["learndash-courses[]"],whenSelectingGroups:["learndash-groups[]"]},generationMethod:{auto:["coupon-amount","coupon-length","coupon-dash"],manual:["manual-codes"]}},batchNameRestCall:null,batchNameRestCallInProgress:!1,batchNameIsUnique:"edit"==UncannyCodes.generate.mode},this.updateSelectedDependency(),this.updateSelectedLearnDashContent(),this.updateSelectedGenerationMethod(),this.updateSelectedNumberOfUsesPerCode(),this.updateIsFirstStepReady()}},{key:"initSelect2Fields",value:function(){m.fn.select2&&this.$elements.select2Fields.select2({theme:"uoc-select2",language:{noResults:function(){return UncannyCodes.generate.i18n.noResults}}})}},{key:"updateUI",value:function(){Object.values(this.$elements.sections).forEach((function(e){m(e).hide()})),Object.values(this.$elements.notices).forEach((function(e){m(e).hide()})),"learndash"==this.data.selectedData.dependency&&(UncannyCodes.generate.hasLearnDashInstalled?this.$elements.sections.dependencyLearnDash.show():this.$elements.notices.youMustInstallLearnDash.show(),this.$elements.submitButton.val(UncannyCodes.generate.i18n.submitButton.forLearnDash)),"learndash-courses"==this.data.selectedData.learnDashContent&&this.$elements.sections.dependencyLearnDashCourses.show(),"learndash-groups"==this.data.selectedData.learnDashContent&&this.$elements.sections.dependencyLearnDashGroups.show(),"automator"==this.data.selectedData.dependency&&(UncannyCodes.generate.hasAutomatorInstalled?UncannyCodes.generate.hasToUpdateAutomator?this.$elements.notices.youMustUpdateAutomator.show():this.$elements.notices.automatorNextStep.show():this.$elements.notices.youMustInstallAutomator.show(),this.$elements.submitButton.val(UncannyCodes.generate.i18n.submitButton.forAutomator),UncannyCodes.generate.hasWooCommerceInstalled&&this.data.selectedData.numberOfUsesPerCode>1&&this.$elements.notices.codeMaxUsageWooCommerce.show()),"edit"==UncannyCodes.generate.mode&&this.$elements.submitButton.val(UncannyCodes.generate.i18n.submitButton.modifyBatch),"auto"==this.data.selectedData.generationMethod&&this.$elements.sections.creationMethodAuto.show(),"manual"==this.data.selectedData.generationMethod&&this.$elements.sections.creationMethodManual.show(),this.data.isFirstStepReady?this.$elements.sections.codeSetup.show():this.$elements.sections.codeSetup.hide(),this.updateRequiredFields()}},{key:"updateRequiredFields",value:function(){var e=this;this.$elements.allFieldsWithDynamicRequiredProp.prop("required",!1);var t=[];"learndash"==this.data.selectedData.dependency&&(t.push.apply(t,d(this.data.dynamicRequiredFields.learndash.always)),"learndash-courses"==this.data.selectedData.learnDashContent&&t.push.apply(t,d(this.data.dynamicRequiredFields.learndash.whenSelectingCourses)),"learndash-groups"==this.data.selectedData.learnDashContent&&t.push.apply(t,d(this.data.dynamicRequiredFields.learndash.whenSelectingGroups))),"auto"==this.data.selectedData.generationMethod&&t.push.apply(t,d(this.data.dynamicRequiredFields.generationMethod.auto)),"manual"==this.data.selectedData.generationMethod&&t.push.apply(t,d(this.data.dynamicRequiredFields.generationMethod.manual)),t.forEach((function(t){e.$elements.allFieldsWithDynamicRequiredProp.filter('input[name="'.concat(t,'"], select[name="').concat(t,'"], textarea[name="').concat(t,'"]')).prop("required",!0)}))}},{key:"listenChangesToDependencyOptions",value:function(){var e=this;this.$elements.dependencyOptions.on("change",(function(){e.updateSelectedDependency(),e.updateUI()}))}},{key:"listenChangesToLearnDashContent",value:function(){var e=this;this.$elements.dependencyLearnDashContent.on("change",(function(){e.updateSelectedLearnDashContent(),e.updateUI()}))}},{key:"listenChangesToGenerationMethod",value:function(){var e=this;this.$elements.generationMethod.on("change",(function(){e.updateSelectedGenerationMethod(),e.updateUI()}))}},{key:"listenChangesToNumberOfUsesPerCode",value:function(){var e=this;this.$elements.numberOfUsesPerCode.on("input",u((function(){e.updateSelectedNumberOfUsesPerCode(),e.updateUI()}),200))}},{key:"listenChangesToBatchName",value:function(){var e=this;this.$elements.batchName.on("input",(function(){e.$elements.batchNameContainer.removeClass("uoc-generate-section-form-field--loading")})),this.$elements.batchName.on("input",u((function(){e.checkIfBatchNameIsAvailable()}),500))}},{key:"updateSelectedDependency",value:function(){var e=null,n=this.$elements.dependencyOptions.filter(":checked");return n.length>0&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(e)&&(e=window.location.href);try{e=new URL(e)}catch(t){return e}for(var s=e.search.substr(1).split("&"),r=0,c=Object.entries(n);r<c.length;r++){var l=a(c[r],2),u=l[0],d=l[1];u=encodeURI(u),d=encodeURI(d);for(var h=s.length,p=void 0;h--;)if((p=s[h].split("="))[0]==u){p[1]=d,s[h]=p.join("=");break}h<0&&(s[s.length]=[u,d].join("="))}if(s=s.filter((function(e){return!i(e)})),e.search=s.join("&"),(o=t().extend({},{setAsURL:!1,refresh:!1},o)).setAsURL)if(o.refresh)window.location.href=e.href;else{var m=document.title;window.history.pushState({},m,e.href)}e.href}("",{dependency:e=n.val()},{setAsURL:!0}),this.data.selectedData.dependency=e,this.updateIsFirstStepReady(),e}},{key:"updateSelectedLearnDashContent",value:function(){var e=null,t=this.$elements.dependencyLearnDashContent.filter(":checked");return t.length>0&&(e=t.val()),this.data.selectedData.learnDashContent=e,this.updateIsFirstStepReady(),e}},{key:"updateSelectedGenerationMethod",value:function(){var e=null,t=this.$elements.generationMethod.filter(":checked");return t.length>0&&(e=t.val()),this.data.selectedData.generationMethod=e,this.updateIsFirstStepReady(),e}},{key:"updateSelectedNumberOfUsesPerCode",value:function(){var e=parseInt(this.$elements.numberOfUsesPerCode.val());return this.data.selectedData.numberOfUsesPerCode=e,e}},{key:"updateIsFirstStepReady",value:function(){var e;return e=this.data.batchNameIsUnique&&("automator"==this.data.selectedData.dependency&&UncannyCodes.generate.hasAutomatorInstalled&&!UncannyCodes.generate.hasToUpdateAutomator||"learndash"==this.data.selectedData.dependency&&UncannyCodes.generate.hasLearnDashInstalled&&!i(this.data.selectedData.learnDashContent)),this.data.isFirstStepReady=e,e}},{key:"checkIfBatchNameIsAvailable",value:function(){var e=this,n=this.$elements.batchName.val();this.$elements.batchNameError.text(""),this.$elements.batchNameContainer.removeClass("uoc-generate-section-form-field--success"),this.data.batchNameIsUnique=!1,i(n)?(this.updateIsFirstStepReady(),this.updateUI()):(this.data.batchNameRestCallInProgress&&r(this.data.batchNameRestCall)&&this.data.batchNameRestCall.abort(),this.$elements.batchNameContainer.addClass("uoc-generate-section-form-field--loading"),this.data.batchNameRestCall=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=["group_batch_has_name"];l(e,s)?t().ajax({method:"POST",url:"".concat(UncannyCodes.restURL,"/").concat(e,"/"),data:t().param(n)+"&"+t().param({doing_rest:1}),dataType:"json",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",UncannyCodes.nonce)},success:function(e){e.success?r(a)&&a(e):(console.error("The call was successful, but there were errors."),r(o)&&o(e))},statusCode:{403:function(e){r(o)&&o(e)}},error:function(e,t,n){r(o)&&o({success:!1})},fail:function(e){r(o)&&o(e)}}):console.error(vsprintf("The %s endPoint does not exists. The valid endpoints are %s",[e,s.join(", ")]))}("group_batch_has_name",{batch_name:n},(function(t){e.$elements.batchNameContainer.removeClass("uoc-generate-section-form-field--loading"),t.is_available?(e.$elements.batchNameContainer.addClass("uoc-generate-section-form-field--success"),e.data.batchNameIsUnique=!0):e.$elements.batchNameError.text(UncannyCodes.generate.i18n.batchName.errors.nameExists),e.updateIsFirstStepReady(),e.updateUI()}),(function(t){e.$elements.batchNameContainer.removeClass("uoc-generate-section-form-field--loading"),r(t.message)?e.$elements.batchNameError.text(t.message):e.$elements.batchNameError.text(UncannyCodes.generate.i18n.somethingWentWrong)})))}},{key:"isTheCodesBatchGenerator",value:function(){return 1==m("#uoc-generate").length}}],o&&p(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();n(587),n(238),document.addEventListener("DOMContentLoaded",(function(){new f}))})()})();
//# sourceMappingURL=bundle.min.js.map