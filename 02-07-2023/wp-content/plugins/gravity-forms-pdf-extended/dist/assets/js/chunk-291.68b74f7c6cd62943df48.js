"use strict";(self.webpackChunkgravity_pdf=self.webpackChunkgravity_pdf||[]).push([[291],{7291:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var o=r(7294),n=r(5697),s=r.n(n),a=r(3727),l=r(6550),i=(r(6992),r(3948),r(4916),r(5306),r(6706));r(5069);const c=()=>o.createElement("div",{className:"gfpdf-core-font-spacer"},"---");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}
/**
 * @package     Gravity PDF
 * @copyright   Copyright (c) 2023, Blue Liquid Designs
 * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 * @since       5.0
 */class d extends o.Component{render(){var e=this.props.console,t=Object.keys(e).reverse(),r=this.props.retry.length>0;return t.length?o.createElement("ul",{className:"gfpdf-core-font-list-results-container","aria-label":GFPDF.coreFontAriaLabel},t.map((t=>o.createElement("li",{key:t,className:"gfpdf-core-font-status-"+e[t].status},e[t].message," ","completed"===t&&r&&o.createElement(p,{history:this.props.history,retryText:this.props.retryText}),"completed"===t&&o.createElement(c,null))))):null}}u(d,"propTypes",{console:s().object,retry:s().array,history:s().object,retryText:s().string});class p extends o.Component{constructor(){super(...arguments),u(this,"handleTriggerRetryFontDownload",(e=>{e.preventDefault(),this.props.history.replace("retryDownloadCoreFonts")}))}render(){return o.createElement("a",{href:"#",onClick:this.handleTriggerRetryFontDownload,"aria-live":"polite",role:"dialog"},this.props.retryText)}}u(p,"propTypes",{history:s().object,retryText:s().string});
/**
 * @package     Gravity PDF
 * @copyright   Copyright (c) 2023, Blue Liquid Designs
 * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 * @since       5.0
 */
var h=e=>{var{queue:t,text:r}=e;return o.createElement("span",{className:"gfpdf-core-font-counter"},r," ",t)};h.propTypes={queue:s().number,text:s().string};const F=h;var m=r(1581),y=r(7046);function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}
/**
 * @package     Gravity PDF
 * @copyright   Copyright (c) 2023, Blue Liquid Designs
 * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 * @since       5.0
 */class b extends o.Component{constructor(){var e;super(...arguments),e=this,g(this,"state",{ajax:!1}),g(this,"maybeStartDownload",(function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"/downloadCoreFonts"===t&&e.startDownloadFonts(r,o),"/retryDownloadCoreFonts"===t&&(e.setState({ajax:!0}),e.startDownloadFonts(r,o))})),g(this,"startDownloadFonts",((e,t)=>{if(0===e.length)return this.props.clearButtonClickedAndRetryList(),this.handleGithubApiError(t);this.props.clearConsole(),this.props.clearButtonClickedAndRetryList(),this.props.history.replace(""),setTimeout((()=>e.map((e=>this.props.downloadFontsApiCall(e)))),300)})),g(this,"handleGithubApiError",(e=>{this.setState({ajax:!1}),this.props.addToConsole("completed","error",e),this.props.history.replace("")})),g(this,"handleTriggerFontDownload",(()=>{!1===this.state.ajax&&this.setState({ajax:!0},(()=>{this.props.getFilesFromGitHub()}))})),g(this,"resetState",(()=>{var{clearRequestRemainingData:e,history:t}=this.props;this.setState({ajax:!1}),e(),t.replace("")}))}componentDidUpdate(){var{fontList:e,buttonClicked:t,location:r,retry:o,getFilesFromGitHubFailed:n,requestDownload:s}=this.props;e.length>0&&t&&this.startDownloadFonts(e),"/downloadCoreFonts"===r.pathname&&this.handleTriggerFontDownload(),"/retryDownloadCoreFonts"===r.pathname&&this.maybeStartDownload(r.pathname,o),""!==n&&t&&this.startDownloadFonts(e,n),"finished"===s&&this.resetState()}componentDidMount(){"/downloadCoreFonts"===this.props.location.pathname&&this.handleTriggerFontDownload()}render(){var{ajax:e}=this.state,{fontList:t,buttonClassName:r,buttonText:n,counterText:s,queue:a,history:l,console:i,retry:c,retryText:u}=this.props,p=a<t.length&&0!==a||e;return o.createElement("div",null,o.createElement("button",{className:r,type:"button",onClick:this.handleTriggerFontDownload,disabled:p},n),e&&o.createElement(m.Z,null),e&&0!==a&&o.createElement(F,{text:s,queue:a}),o.createElement(d,{history:l,console:i,retry:c,retryText:u}))}}g(b,"propTypes",{location:s().object,requestDownload:s().string,clearRequestRemainingData:s().func,getFilesFromGitHub:s().func,buttonClicked:s().bool,fontList:s().array,getFilesFromGitHubFailed:s().string,retry:s().array,clearConsole:s().func,history:s().object,clearButtonClickedAndRetryList:s().func,downloadFontsApiCall:s().func,addToConsole:s().func,console:s().object,buttonClassName:s().string,buttonText:s().string,counterText:s().string,retryText:s().string,queue:s().number});const f=(0,i.$j)((e=>({buttonClicked:e.coreFonts.buttonClicked,fontList:e.coreFonts.fontList,getFilesFromGitHubFailed:e.coreFonts.getFilesFromGitHubFailed,console:e.coreFonts.console,retry:e.coreFonts.retry,requestDownload:e.coreFonts.requestDownload,queue:e.coreFonts.downloadCounter})),{addToConsole:y.hA,clearButtonClickedAndRetryList:y.cL,getFilesFromGitHub:y.Zh,downloadFontsApiCall:y.gX,clearRequestRemainingData:y.io,clearConsole:y.En})(b);
/**
 * @package     Gravity PDF
 * @copyright   Copyright (c) 2023, Blue Liquid Designs
 * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 * @since       5.0
 */
var C=e=>{var{button:t}=e;return o.createElement(a.UT,null,o.createElement(l.rs,null,o.createElement(l.AW,{render:e=>o.createElement(D,{history:e.history,button:t})}),o.createElement(l.AW,{path:"/downloadCoreFonts",exact:!0,render:e=>o.createElement(D,{history:e.history,button:t})}),o.createElement(l.AW,{path:"/retryDownloadCoreFonts",exact:!0,render:e=>o.createElement(D,{history:e.history,button:t})})))};C.propTypes={history:s().object,button:s().object};var D=e=>{var{history:t,button:r}=e;return o.createElement(f,{history:t,location:t.location,buttonClassName:r.className,buttonText:r.innerText,success:GFPDF.coreFontSuccess,error:GFPDF.coreFontError,itemPending:GFPDF.coreFontItemPendingMessage,itemSuccess:GFPDF.coreFontItemSuccessMessage,itemError:GFPDF.coreFontItemErrorMessage,counterText:GFPDF.coreFontCounter,retryText:GFPDF.coreFontRetry})};D.propTypes={history:s().object,button:s().object};const w=C},5069:(e,t,r)=>{var o=r(2109),n=r(1702),s=r(3157),a=n([].reverse),l=[1,2];o({target:"Array",proto:!0,forced:String(l)===String(l.reverse())},{reverse:function(){return s(this)&&(this.length=this.length),a(this)}})}}]);