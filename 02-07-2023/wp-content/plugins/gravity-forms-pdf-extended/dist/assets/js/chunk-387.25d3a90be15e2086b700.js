(self.webpackChunkgravity_pdf=self.webpackChunkgravity_pdf||[]).push([[387],{9387:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TemplateList:()=>$,default:()=>A});var a=r(7294),s=r(5697),n=r.n(s),i=r(6706),l=r(5439),o=(r(6992),r(3948),r(7658),r(6550)),p=e=>{var{image:t}=e,r=t?"theme-screenshot":"theme-screenshot blank";return a.createElement("div",{className:r},t?a.createElement("img",{src:t,alt:""}):null)};p.propTypes={image:n().string};const c=p;var m=r(38),u=e=>{var{label:t}=e;return a.createElement("span",{className:"more-details"},t)};u.propTypes={label:n().string};var d=e=>{var{group:t}=e;return a.createElement("p",{className:"theme-author"},t)};d.propTypes={group:n().string};var h=r(5218),f=r(6152),g=r(4738);function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}
/**
 * Display the individual template item for usage our template list
 *
 * @package     Gravity PDF
 * @copyright   Copyright (c) 2023, Blue Liquid Designs
 * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 * @since       4.1
 */class v extends a.Component{constructor(){super(...arguments),T(this,"handleMaybeShowDetailedTemplate",(e=>{13===e.keyCode&&-1===e.target.className.indexOf("button")&&this.handleShowDetailedTemplate()})),T(this,"handleShowDetailedTemplate",(()=>{this.props.history.push("/template/"+this.props.template.id)})),T(this,"removeMessage",(()=>{this.props.updateTemplateParam(this.props.template.id,"message",null)}))}render(){var e=this.props.template,t=this.props.activeTemplate===e.id,r=e.compatible,s=t?"active theme":"theme";return a.createElement("div",{onClick:this.handleShowDetailedTemplate,onKeyDown:this.handleMaybeShowDetailedTemplate,className:s,"data-slug":e.id,tabIndex:"150",role:"option","aria-label":e.group+" "+e.template+" "+GFPDF.details},a.createElement(c,{image:e.screenshot}),e.error?a.createElement(m.Z,{text:e.error,error:!0}):null,e.message?a.createElement(m.Z,{text:e.message,dismissableCallback:this.removeMessage,dismissable:!0,delay:12e3}):null,a.createElement(u,{label:this.props.templateDetailsText}),a.createElement(d,{group:e.group}),a.createElement(h.VG,{name:e.template}),a.createElement("div",{className:"theme-actions"},!t&&r?a.createElement(f.ZP,{template:this.props.template,buttonText:this.props.activateText}):null))}}T(v,"propTypes",{history:n().object,template:n().object,activeTemplate:n().string,updateTemplateParam:n().func,activateText:n().string,templateDetailsText:n().string});const x=(0,o.EN)((0,i.$j)((e=>({activeTemplate:e.template.activeTemplate})),(e=>({updateTemplateParam:(t,r,a)=>{e((0,g.Fz)(t,r,a))}})))(v));r(4916),r(4765);var b=r(1296),y=r.n(b);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}
/**
 * Handles the PDF template search functionality
 *
 * @package     Gravity PDF
 * @copyright   Copyright (c) 2023, Blue Liquid Designs
 * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 * @since       4.1
 */class j extends a.Component{constructor(e){super(e),E(this,"handleSearch",(e=>{e.persist(),this.runSearch(e)})),E(this,"runSearch",(e=>{this.props.onSearch(e.target.value||"")})),this.runSearch=y()(this.runSearch,200)}componentDidMount(){this.input.focus()}render(){return a.createElement("div",{role:"form"},a.createElement("input",{className:"wp-filter-search",id:"wp-filter-search-input",ref:e=>this.input=e,placeholder:GFPDF.searchTemplatePlaceholder,type:"search","aria-describedby":"live-search-desc",tabIndex:"145",onChange:this.handleSearch,defaultValue:this.props.search}))}}E(j,"propTypes",{onSearch:n().func,search:n().string});const S=(0,i.$j)((e=>({search:e.template.search})),(e=>({onSearch:t=>{e((0,g.f7)(t))}})))(j);
/**
 * Renders the Template Header Title
 *
 * @package     Gravity PDF
 * @copyright   Copyright (c) 2023, Blue Liquid Designs
 * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 * @since       4.1
 */
var P=e=>{var{header:t}=e;return a.createElement("h1",null,t)};P.propTypes={header:n().string};const U=P;r(9601);var N=r(4184),w=r.n(N),O=r(463);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},D.apply(this,arguments)}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}
/**
 * Handles the uploading of new PDF templates to the server
 *
 * @package     Gravity PDF
 * @copyright   Copyright (c) 2023, Blue Liquid Designs
 * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 * @since       4.1
 */class F extends a.Component{constructor(){super(...arguments),I(this,"state",{ajax:!1,error:"",message:""}),I(this,"handleOndrop",(e=>{e instanceof Array&&e.length>0&&e.forEach((e=>{var t=e.name;this.checkFilename(t)&&this.checkFilesize(e.size)&&(this.setState({ajax:!0,error:"",message:""}),this.props.postTemplateUploadProcessing(e,t))}))})),I(this,"checkFilename",(e=>".zip"===e.substr(e.length-4)||(this.setState({error:this.props.filenameErrorText}),!1))),I(this,"checkFilesize",(e=>!(e/1024>10240)||(this.setState({error:this.props.filesizeErrorText}),!1))),I(this,"ajaxSuccess",(e=>{e.body.templates.forEach((e=>{void 0===this.props.templates.find((t=>t.id===e.id))?(e.new=!0,e.message=this.props.installSuccessText,this.props.addNewTemplate(e)):this.props.updateTemplateParam(e.id,"message",this.props.installUpdatedText)})),this.setState({ajax:!1,message:this.props.templateSuccessfullyInstalledUpdated}),this.props.clearTemplateUploadProcessing()})),I(this,"ajaxFailed",(e=>{this.setState({error:e.response.body&&void 0!==e.response.body.error?e.response.body.error:this.props.genericUploadErrorText,ajax:!1}),this.props.clearTemplateUploadProcessing()})),I(this,"removeMessage",(()=>{this.setState({message:""})}))}componentDidUpdate(e){var{templateUploadProcessingSuccess:t,templateUploadProcessingError:r}=this.props;e.templateUploadProcessingSuccess!==t&&Object.keys(t).length>0&&this.ajaxSuccess(t),e.templateUploadProcessingError!==r&&Object.keys(r).length>0&&this.ajaxFailed(r)}render(){return a.createElement("div",{className:"theme add-new-theme gfpdf-dropzone"},a.createElement(O.ZP,{onDrop:this.handleOndrop},(e=>{var{getRootProps:t,getInputProps:r,isDragActive:s}=e;return a.createElement("div",D({},t(),{className:w()("dropzone",{"dropzone--isActive":s})}),a.createElement("input",r()),a.createElement("a",{href:"#/template",className:this.state.ajax?"doing-ajax":"","aria-labelledby":"gfpdf-template-install-instructions"},a.createElement("div",{className:"theme-screenshot"},a.createElement("span",null)),""!==this.state.error?a.createElement(m.Z,{text:this.state.error,error:!0}):null,""!==this.state.message?a.createElement(m.Z,{text:this.state.message,dismissable:!0,dismissableCallback:this.removeMessage}):null,a.createElement("h2",{className:"theme-name"},this.props.addTemplateText)),a.createElement("div",{className:"gfpdf-template-install-instructions",id:"gfpdf-template-install-instructions"},this.props.templateInstallInstructions))})))}}I(F,"propTypes",{genericUploadErrorText:n().string,addTemplateText:n().string,filenameErrorText:n().string,filesizeErrorText:n().string,installSuccessText:n().string,installUpdatedText:n().string,templateSuccessfullyInstalledUpdated:n().string,templateInstallInstructions:n().string,addNewTemplate:n().func,updateTemplateParam:n().func,postTemplateUploadProcessing:n().func,clearTemplateUploadProcessing:n().func,templates:n().array,templateUploadProcessingSuccess:n().object,templateUploadProcessingError:n().object});const k=(0,i.$j)((e=>({templates:e.template.list,templateUploadProcessingSuccess:e.template.templateUploadProcessingSuccess,templateUploadProcessingError:e.template.templateUploadProcessingError})),(e=>({addNewTemplate:t=>{e((0,g.WF)(t))},updateTemplateParam:(t,r,a)=>{e((0,g.Fz)(t,r,a))},postTemplateUploadProcessing:(t,r)=>{e((0,g.NC)(t,r))},clearTemplateUploadProcessing:()=>{e((0,g.Dy)())}})))(F);var z,C,M,Z=r(3223);
/**
 * The master component for rendering the all PDF templates as a list
 *
 * @package     Gravity PDF
 * @copyright   Copyright (c) 2023, Blue Liquid Designs
 * @license     http://opensource.org/licenses/gpl-2.0.php GNU Public License
 * @since       4.1
 */
class $ extends a.Component{render(){var e=GFPDF.userCapabilities.administrator||GFPDF.userCapabilities.gravityforms_edit_settings||!1;return a.createElement(l.Z,{header:a.createElement(U,{header:this.props.templateHeaderText}),closeRoute:"/"},a.createElement(S,null),a.createElement("div",{role:"listbox"},this.props.templates.map(((e,t)=>a.createElement(x,{key:t,template:e,templateDetailsText:this.props.templateDetailsText,activateText:this.props.activateText}))),e&&a.createElement(k,{ajaxUrl:this.props.ajaxUrl,ajaxNonce:this.props.ajaxNonce,addTemplateText:this.props.addTemplateText,genericUploadErrorText:this.props.genericUploadErrorText,filenameErrorText:this.props.filenameErrorText,filesizeErrorText:this.props.filesizeErrorText,installSuccessText:this.props.installSuccessText,installUpdatedText:this.props.installUpdatedText,templateSuccessfullyInstalledUpdated:this.props.templateSuccessfullyInstalledUpdated,templateInstallInstructions:this.props.templateInstallInstructions})))}}z=$,C="propTypes",M={templateHeaderText:n().string,templates:n().array,templateDetailsText:n().string,activateText:n().string,ajaxUrl:n().string,ajaxNonce:n().string,addTemplateText:n().string,genericUploadErrorText:n().string,filenameErrorText:n().string,filesizeErrorText:n().string,installSuccessText:n().string,installUpdatedText:n().string,templateSuccessfullyInstalledUpdated:n().string,templateInstallInstructions:n().string},C in z?Object.defineProperty(z,C,{value:M,enumerable:!0,configurable:!0,writable:!0}):z[C]=M;const A=(0,i.$j)((e=>({templates:(0,Z.ZP)(e)})))($)},4184:(e,t)=>{var r;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var a={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var n=typeof r;if("string"===n||"number"===n)e.push(r);else if(Array.isArray(r)){if(r.length){var i=s.apply(null,r);i&&e.push(i)}}else if("object"===n){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var l in r)a.call(r,l)&&r[l]&&e.push(l)}}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(r=function(){return s}.apply(t,[]))||(e.exports=r)}()},1296:(e,t,r)=>{var a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,i=/^0o[0-7]+$/i,l=parseInt,o="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,p="object"==typeof self&&self&&self.Object===Object&&self,c=o||p||Function("return this")(),m=Object.prototype.toString,u=Math.max,d=Math.min,h=function(){return c.Date.now()};function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==m.call(e)}(e))return NaN;if(f(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=f(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var r=n.test(e);return r||i.test(e)?l(e.slice(2),r?2:8):s.test(e)?NaN:+e}e.exports=function(e,t,r){var a,s,n,i,l,o,p=0,c=!1,m=!1,T=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var r=a,n=s;return a=s=void 0,p=t,i=e.apply(n,r)}function x(e){return p=e,l=setTimeout(y,t),c?v(e):i}function b(e){var r=e-o;return void 0===o||r>=t||r<0||m&&e-p>=n}function y(){var e=h();if(b(e))return E(e);l=setTimeout(y,function(e){var r=t-(e-o);return m?d(r,n-(e-p)):r}(e))}function E(e){return l=void 0,T&&a?v(e):(a=s=void 0,i)}function j(){var e=h(),r=b(e);if(a=arguments,s=this,o=e,r){if(void 0===l)return x(o);if(m)return l=setTimeout(y,t),v(o)}return void 0===l&&(l=setTimeout(y,t)),i}return t=g(t)||0,f(r)&&(c=!!r.leading,n=(m="maxWait"in r)?u(g(r.maxWait)||0,t):n,T="trailing"in r?!!r.trailing:T),j.cancel=function(){void 0!==l&&clearTimeout(l),p=0,a=o=s=l=void 0},j.flush=function(){return void 0===l?i:E(h())},j}}}]);