/**
 * @license
 * GrassBladeVideo 1.1 <http://nextsoftwaresolutions.com/>
 * Copyright Next Software Solutions. <http://nextsoftwaresolutions.com/>
 * Restricted Commercial License.
 * Includes Video.js 7.5.4 <http://videojs.com/> | Apache License Version 2.0 | <https://github.com/videojs/video.js/blob/master/LICENSE>
 * Includes 
*/
/*! jQuery v3.4.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],E=C.document,r=Object.getPrototypeOf,s=t.slice,g=t.concat,u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.4.1",k=function(e,t){return new k.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function d(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}k.fn=k.prototype={jquery:f,constructor:k,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(n){return this.pushStack(k.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},k.extend=k.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,a[t]=k.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},k.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){b(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0;if(d(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(d(Object(e))?k.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(d(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g.apply([],a)},guid:1,support:y}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=t[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var h=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,k="sizzle"+1*new Date,m=n.document,S=0,r=0,p=ue(),x=ue(),N=ue(),A=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",$=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",F=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp($),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(m.childNodes),m.childNodes),t[m.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&((e?e.ownerDocument||e:m)!==C&&T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!A[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&U.test(t)){(s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=k),o=(l=h(t)).length;while(o--)l[o]="#"+s+" "+xe(l[o]);c=l.join(","),f=ee.test(t)&&ye(e.parentNode)||e}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){A(t,!0)}finally{s===k&&e.removeAttribute("id")}}}return g(t.replace(B,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[k]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:m;return r!==C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),m!==C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=k,!C.getElementsByName||!C.getElementsByName(k).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){a.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+k+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||v.push(".#.+[+~]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",$)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e===C||e.ownerDocument===m&&y(m,e)?-1:t===C||t.ownerDocument===m&&y(m,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===C?-1:t===C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]===m?-1:s[r]===m?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&T(e),d.matchesSelector&&E&&!A[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){A(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!==C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=p[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&p(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(F," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[S,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[S,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[k]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace(B,"$1"));return s[k]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[S,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[k]||(e[k]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===S&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[k]&&(v=Ce(v)),y&&!y[k]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[k]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(B,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(B," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=N[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[k]?i.push(a):o.push(a);(a=N(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=S+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t===C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument===C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(S=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(S=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=k.split("").sort(D).join("")===k,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);k.find=h,k.expr=h.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=h.uniqueSort,k.text=h.getText,k.isXMLDoc=h.isXML,k.contains=h.contains,k.escapeSelector=h.escape;var T=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&k(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},N=k.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?k.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?k.grep(e,function(e){return e===n!==r}):"string"!=typeof n?k.grep(e,function(e){return-1<i.call(n,e)!==r}):k.filter(n,e,r)}k.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?k.find.matchesSelector(r,e)?[r]:[]:k.find.matches(e,k.grep(t,function(e){return 1===e.nodeType}))},k.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(k(e).filter(function(){for(t=0;t<r;t++)if(k.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)k.find(e,i[t],n);return 1<r?k.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&N.test(e)?k(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),D.test(r[1])&&k.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,q=k(E);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}k.fn.extend({has:function(e){var t=k(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(k.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&k(e);if(!N.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&k.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?k.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(k(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return"undefined"!=typeof e.contentDocument?e.contentDocument:(A(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},function(r,i){k.fn[r]=function(e,t){var n=k.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=k.filter(t,n)),1<this.length&&(O[r]||k.uniqueSort(n),H.test(r)&&n.reverse()),this.pushStack(n)}});var R=/[^\x20\t\r\n\f]+/g;function M(e){return e}function I(e){throw e}function W(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}k.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},k.each(e.match(R)||[],function(e,t){n[t]=!0}),n):k.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){k.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return k.each(arguments,function(e,t){var n;while(-1<(n=k.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<k.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},k.extend({Deferred:function(e){var o=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return k.Deferred(function(r){k.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,M,s),l(u,o,I,s)):(u++,t.call(e,l(u,o,M,s),l(u,o,I,s),l(u,o,M,o.notifyWith))):(a!==M&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==I&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(k.Deferred.getStackHook&&(t.stackTrace=k.Deferred.getStackHook()),C.setTimeout(t))}}return k.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:M,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:M)),o[2][3].add(l(0,e,m(n)?n:I))}).promise()},promise:function(e){return null!=e?k.extend(e,a):a}},s={};return k.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=k.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(W(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)W(i[t],a(t),o.reject);return o.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&$.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){C.setTimeout(function(){throw e})};var F=k.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),k.ready()}k.fn.ready=function(e){return F.then(e)["catch"](function(e){k.readyException(e)}),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0)!==e&&0<--k.readyWait||F.resolveWith(E,[k])}}),k.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(k.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var _=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)_(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(k(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},z=/^-ms-/,U=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function V(e){return e.replace(z,"ms-").replace(U,X)}var G=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=k.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[V(t)]=n;else for(r in t)i[V(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(V):(t=V(t))in r?[t]:t.match(R)||[]).length;while(n--)delete r[t[n]]}(void 0===t||k.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var Q=new Y,J=new Y,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function ee(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:K.test(i)?JSON.parse(i):i)}catch(e){}J.set(e,t,n)}else n=void 0;return n}k.extend({hasData:function(e){return J.hasData(e)||Q.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),k.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=J.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=V(r.slice(5)),ee(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){J.set(this,n)}):_(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=J.get(o,n))?t:void 0!==(t=ee(o,n))?t:void 0;this.each(function(){J.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){J.remove(this,e)})}}),k.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=k.queue(e,t),r=n.length,i=n.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){k.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:k.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),k.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?k.queue(this[0],t):void 0===n?this:this.each(function(){var e=k.queue(this,t,n);k._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&k.dequeue(this,t)})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=k.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],ie=E.documentElement,oe=function(e){return k.contains(e.ownerDocument,e)},ae={composed:!0};ie.getRootNode&&(oe=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===k.css(e,"display")},ue=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function le(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return k.css(e,t,"")},u=s(),l=n&&n[3]||(k.cssNumber[t]?"":"px"),c=e.nodeType&&(k.cssNumber[t]||"px"!==l&&+u)&&ne.exec(k.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)k.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,k.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ce={};function fe(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Q.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&se(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ce[s])||(o=a.body.appendChild(a.createElement(s)),u=k.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ce[s]=u)))):"none"!==n&&(l[c]="none",Q.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}k.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){se(this)?k(this).show():k(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?k.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var me,xe,be=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))k.merge(p,o.nodeType?[o]:o);else if(be.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+k.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;k.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<k.inArray(o,r))i&&i.push(o);else if(l=oe(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}me=E.createDocumentFragment().appendChild(E.createElement("div")),(xe=E.createElement("input")).setAttribute("type","radio"),xe.setAttribute("checked","checked"),xe.setAttribute("name","t"),me.appendChild(xe),y.checkClone=me.cloneNode(!0).cloneNode(!0).lastChild.checked,me.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!me.cloneNode(!0).lastChild.defaultValue;var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Se(){return!1}function Ne(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Se;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return k().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=k.guid++)),e.each(function(){k.event.add(this,t,i,r,n)})}function De(e,i,o){o?(Q.set(e,i,!1),k.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Q.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(k.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Q.set(this,i,r),t=o(this,i),this[i](),r!==(n=Q.get(this,i))||t?Q.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Q.set(this,i,{value:k.event.trigger(k.extend(r[0],k.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,i)&&k.event.add(e,i,ke)}k.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.get(t);if(v){n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(ie,i),n.guid||(n.guid=k.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof k&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(R)||[""]).length;while(l--)d=g=(s=Ee.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=k.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=k.event.special[d]||{},c=k.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),k.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.hasData(e)&&Q.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(R)||[""]).length;while(l--)if(d=g=(s=Ee.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=k.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||k.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)k.event.remove(e,d+t[l],n,r,!0);k.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=k.event.fix(e),u=new Array(arguments.length),l=(Q.get(this,"events")||{})[s.type]||[],c=k.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){a=k.event.handlers.call(this,s,l),t=0;while((i=a[t++])&&!s.isPropagationStopped()){s.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!s.isImmediatePropagationStopped())s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<k(i,this).index(l):k.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click",ke),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Q.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},function(e,t){k.event.special[e]={setup:function(){return De(this,e,Ne),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){k.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||k.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),k.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,k(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each(function(){k.event.remove(this,e,n,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qe=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),a=Q.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)k.event.add(t,i,l[i][n]);J.hasData(e)&&(s=J.access(e),u=k.extend({},s),J.set(t,u))}}function Ie(n,r,i,o){r=g.apply([],r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Le.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Ie(t,r,i,o)});if(f&&(t=(e=we(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=k.map(ve(e,"script"),Pe)).length;c<f;c++)u=e,c!==p&&(u=k.clone(u,!0,!0),s&&k.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,k.map(a,Re),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Q.access(u,"globalEval")&&k.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?k._evalUrl&&!u.noModule&&k._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):b(u.textContent.replace(He,""),u,l))}return n}function We(e,t,n){for(var r,i=t?k.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(ve(r)),r.parentNode&&(n&&oe(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}k.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=oe(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Me(o[r],a[r]);else Me(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=k.event.special,o=0;void 0!==(n=e[o]);o++)if(G(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),k.fn.extend({detach:function(e){return We(this,e,!0)},remove:function(e){return We(this,e)},text:function(e){return _(this,function(e){return void 0===e?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ie(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)})},prepend:function(){return Ie(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return k.clone(this,e,t)})},html:function(e){return _(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(k.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Ie(this,arguments,function(e){var t=this.parentNode;k.inArray(this,n)<0&&(k.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){k.fn[e]=function(e){for(var t,n=[],r=k(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),k(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var $e=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Fe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Be=new RegExp(re.join("|"),"i");function _e(e,t,n){var r,i,o,a,s=e.style;return(n=n||Fe(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe(e)||(a=k.style(e,t)),!y.pixelBoxStyles()&&$e.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(s).appendChild(u);var e=C.getComputedStyle(u);n="1%"!==e.top,a=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),r=36===t(e.width),u.style.position="absolute",i=12===t(u.offsetWidth/3),ie.removeChild(s),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s=E.createElement("div"),u=E.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),i}}))}();var Ue=["Webkit","Moz","ms"],Xe=E.createElement("div").style,Ve={};function Ge(e){var t=k.cssProps[e]||Ve[e];return t||(e in Xe?e:Ve[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Ue.length;while(n--)if((e=Ue[n]+t)in Xe)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Qe=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"};function Ze(e,t,n){var r=ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=k.css(e,n+re[a],!0,i)),r?("content"===n&&(u-=k.css(e,"padding"+re[a],!0,i)),"margin"!==n&&(u-=k.css(e,"border"+re[a]+"Width",!0,i))):(u+=k.css(e,"padding"+re[a],!0,i),"padding"!==n?u+=k.css(e,"border"+re[a]+"Width",!0,i):s+=k.css(e,"border"+re[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function tt(e,t,n){var r=Fe(e),i=(!y.boxSizingReliable()||n)&&"border-box"===k.css(e,"boxSizing",!1,r),o=i,a=_e(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===k.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===k.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+et(e,t,n||(i?"border":"content"),o,r,a)+"px"}function nt(e,t,n,r,i){return new nt.prototype.init(e,t,n,r,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_e(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=V(t),u=Qe.test(t),l=e.style;if(u||(t=Ge(s)),a=k.cssHooks[t]||k.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=ne.exec(n))&&i[1]&&(n=le(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=V(t);return Qe.test(t)||(t=Ge(s)),(a=k.cssHooks[t]||k.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=_e(e,t,r)),"normal"===i&&t in Ke&&(i=Ke[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],function(e,u){k.cssHooks[u]={get:function(e,t,n){if(t)return!Ye.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,u,n):ue(e,Je,function(){return tt(e,u,n)})},set:function(e,t,n){var r,i=Fe(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===k.css(e,"boxSizing",!1,i),s=n?et(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-et(e,u,"border",!1,i)-.5)),s&&(r=ne.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=k.css(e,u)),Ze(0,t,s)}}}),k.cssHooks.marginLeft=ze(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(_e(e,"marginLeft"))||e.getBoundingClientRect().left-ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(i,o){k.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+re[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(k.cssHooks[i+o].set=Ze)}),k.fn.extend({css:function(e,t){return _(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Fe(e),i=t.length;a<i;a++)o[t[a]]=k.css(e,t[a],!1,r);return o}return void 0!==n?k.style(e,t,n):k.css(e,t)},e,t,1<arguments.length)}}),((k.Tween=nt).prototype={constructor:nt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}}).init.prototype=nt.prototype,(nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||!k.cssHooks[e.prop]&&null==e.elem.style[Ge(e.prop)]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=nt.prototype.init,k.fx.step={};var rt,it,ot,at,st=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function lt(){it&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(lt):C.setTimeout(lt,k.fx.interval),k.fx.tick())}function ct(){return C.setTimeout(function(){rt=void 0}),rt=Date.now()}function ft(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=re[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function pt(e,t,n){for(var r,i=(dt.tweeners[t]||[]).concat(dt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function dt(o,e,t){var n,a,r=0,i=dt.prefilters.length,s=k.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=rt||ct(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},t),originalProperties:e,originalOptions:t,startTime:rt||ct(),duration:t.duration,tweens:[],createTween:function(e,t){var n=k.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=V(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=k.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=dt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(k._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return k.map(c,pt,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),k.fx.timer(k.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}k.Animation=k.extend(dt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(R);for(var n,r=0,i=e.length;r<i;r++)n=e[r],dt.tweeners[n]=dt.tweeners[n]||[],dt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&se(e),v=Q.get(e,"fxshow");for(r in n.queue||(null==(a=k._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,k.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],st.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||k.style(e,r)}if((u=!k.isEmptyObject(t))||!k.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Q.get(e,"display")),"none"===(c=k.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=k.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===k.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Q.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&fe([e],!0),p.done(function(){for(r in g||fe([e]),Q.remove(e,"fxshow"),d)k.style(e,r,d[r])})),u=pt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?dt.prefilters.unshift(e):dt.prefilters.push(e)}}),k.speed=function(e,t,n){var r=e&&"object"==typeof e?k.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(e,t,n,r){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=k.isEmptyObject(t),o=k.speed(e,n,r),a=function(){var e=dt(this,k.extend({},t),o);(i||Q.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=k.timers,r=Q.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&ut.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||k.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Q.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=k.timers,o=n?n.length:0;for(t.finish=!0,k.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),k.each(["toggle","show","hide"],function(e,r){var i=k.fn[r];k.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ft(r,!0),e,t,n)}}),k.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){k.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),k.timers=[],k.fx.tick=function(){var e,t=0,n=k.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||k.fx.stop(),rt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){it||(it=!0,lt())},k.fx.stop=function(){it=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(r,e){return r=k.fx&&k.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},ot=E.createElement("input"),at=E.createElement("select").appendChild(E.createElement("option")),ot.type="checkbox",y.checkOn=""!==ot.value,y.optSelected=at.selected,(ot=E.createElement("input")).value="t",ot.type="radio",y.radioValue="t"===ot.value;var ht,gt=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return _(this,k.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}}),k.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?k.prop(e,t,n):(1===o&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?ht:void 0)),void 0!==n?null===n?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=k.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(R);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ht={set:function(e,t,n){return!1===t?k.removeAttr(e,n):e.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var a=gt[t]||k.find.attr;gt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=gt[o],gt[o]=r,r=null!=a(e,t,n)?o:null,gt[o]=i),r}});var vt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;function mt(e){return(e.match(R)||[]).join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}k.fn.extend({prop:function(e,t){return _(this,k.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[k.propFix[e]||e]})}}),k.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).addClass(t.call(this,e,xt(this)))});if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).removeClass(t.call(this,e,xt(this)))});if(!arguments.length)return this.attr("class","");if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){k(this).toggleClass(i.call(this,e,xt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=k(this),r=bt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=xt(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+mt(xt(n))+" ").indexOf(t))return!0;return!1}});var wt=/\r/g;k.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,k(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=k.map(t,function(e){return null==e?"":e+""})),(r=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=k.valHooks[t.type]||k.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(wt,""):null==e?"":e:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:mt(k.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=k(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=k.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<k.inArray(k.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<k.inArray(k(e).val(),t)}},y.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var Tt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!Tt.test(d+k.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[k.expando]?e:new k.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:k.makeArray(t,[e]),c=k.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,Tt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Q.get(o,"events")||{})[e.type]&&Q.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&G(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!G(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),k.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Ct),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Ct),k.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=k.extend(new k.Event,n,{type:e,isSimulated:!0});k.event.trigger(r,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return k.event.trigger(e,t,n,!0)}}),y.focusin||k.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){k.event.simulate(r,e.target,k.event.fix(e))};k.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=Q.access(e,r);t||e.addEventListener(n,i,!0),Q.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Q.access(e,r)-1;t?Q.access(e,r,t):(e.removeEventListener(n,i,!0),Q.remove(e,r))}}});var Et=C.location,kt=Date.now(),St=/\?/;k.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+e),t};var Nt=/\[\]$/,At=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function qt(n,e,r,i){var t;if(Array.isArray(e))k.each(e,function(e,t){r||Nt.test(n)?i(n,t):qt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)qt(n+"["+t+"]",e[t],r,i)}k.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,function(){i(this.name,this.value)});else for(n in e)qt(n,e[n],t,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&jt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:n.replace(At,"\r\n")}}).get()}});var Lt=/%20/g,Ht=/#.*$/,Ot=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,Mt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Ft=E.createElement("a");function Bt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(R)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function _t(t,i,o,a){var s={},u=t===Wt;function l(e){var r;return s[e]=!0,k.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function zt(e,t){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&k.extend(!0,e,r),e}Ft.href=Et.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,k.ajaxSettings),t):zt(k.ajaxSettings,e)},ajaxPrefilter:Bt(It),ajaxTransport:Bt(Wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=k.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?k(y):k.event,x=k.Deferred(),b=k.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Pt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace(Mt,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(R)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Ft.protocol+"//"+Ft.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=k.param(v.data,v.traditional)),_t(It,v,t,T),h)return T;for(i in(g=k.event&&v.global)&&0==k.active++&&k.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Rt.test(v.type),f=v.url.replace(Ht,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Lt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(St.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Ot,"$1"),o=(St.test(f)?"&":"?")+"_="+kt+++o),v.url=f+o),v.ifModified&&(k.lastModified[f]&&T.setRequestHeader("If-Modified-Since",k.lastModified[f]),k.etag[f]&&T.setRequestHeader("If-None-Match",k.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+$t+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=_t(Wt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(k.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(k.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--k.active||k.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return k.get(e,t,n,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],function(e,i){k[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),k.ajax(k.extend({url:e,type:i,dataType:r,data:t,success:n},k.isPlainObject(e)&&e))}}),k._evalUrl=function(e,t){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t)}})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){k(this).wrapInner(n.call(this,e))}):this.each(function(){var e=k(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){k(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Xt=k.ajaxSettings.xhr();y.cors=!!Xt&&"withCredentials"in Xt,y.ajax=Xt=!!Xt,k.ajaxTransport(function(i){var o,a;if(y.cors||Xt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Ut[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),k.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),k.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=k("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Vt,Gt=[],Yt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||k.expando+"_"+kt++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Yt,"$1"+r):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||k.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?k(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Vt=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),k.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=D.exec(e))?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=mt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?k("<div>").append(k.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}}),k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length},k.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=k.css(e,"position"),c=k(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=k.css(e,"top"),u=k.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,k.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){k.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===k.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(r,"marginTop",!0),left:t.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===k.css(e,"position"))e=e.offsetParent;return e||ie})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;k.fn[t]=function(e){return _(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),k.each(["top","left"],function(e,n){k.cssHooks[n]=ze(y.pixelPosition,function(e,t){if(t)return t=_e(e,n),$e.test(t)?k(e).position()[n]+"px":t})}),k.each({Height:"height",Width:"width"},function(a,s){k.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){k.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return _(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?k.css(e,t,i):k.style(e,t,n,i)},s,n?e:void 0,n)}})}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){k.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),k.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),k.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=A,k.isFunction=m,k.isWindow=x,k.camelCase=V,k.type=w,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return k});var Qt=C.jQuery,Jt=C.$;return k.noConflict=function(e){return C.$===k&&(C.$=Jt),e&&C.jQuery===k&&(C.jQuery=Qt),k},e||(C.jQuery=C.$=k),k});
(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("global/window"),require("global/document")):typeof define==="function"&&define.amd?define(["global/window","global/document"],t):(e=e||self,e.videojs=t(e.window,e.document))})(this,function(_,d){_=_&&_.hasOwnProperty("default")?_["default"]:_;d=d&&d.hasOwnProperty("default")?d["default"]:d;var c="7.5.4";function o(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function u(e,t){u=Object.setPrototypeOf||function e(t,i){t.__proto__=i;return t};return u(e,t)}function r(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function s(e,t,i){if(r()){s=Reflect.construct}else{s=function e(t,i,r){var n=[null];n.push.apply(n,i);var a=Function.bind.apply(t,n);var s=new a;if(r)u(s,r.prototype);return s}}return s.apply(null,arguments)}function h(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function e(e,t){if(!t){t=e.slice(0)}e.raw=t;return e}var l=[];var f=function e(s,o){return function(e,t,i){var r=o.levels[t];var n=new RegExp("^("+r+")$");if(e!=="log"){i.unshift(e.toUpperCase()+":")}i.unshift(s+":");if(l){l.push([].concat(i))}if(!_.console){return}var a=_.console[e];if(!a&&e==="debug"){a=_.console.info||_.console.log}if(!a||!r||!n.test(e)){return}a[Array.isArray(i)?"apply":"call"](_.console,i)}};function p(t){var n="info";var a;var i=function e(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}a("log",n,i)};a=f(t,i);i.createLogger=function(e){return p(t+": "+e)};i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n};i.level=function(e){if(typeof e==="string"){if(!i.levels.hasOwnProperty(e)){throw new Error('"'+e+'" in not a valid log level')}n=e}return n};i.history=function(){return l?[].concat(l):[]};i.history.filter=function(t){return(l||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})};i.history.clear=function(){if(l){l.length=0}};i.history.disable=function(){if(l!==null){l.length=0;l=null}};i.history.enable=function(){if(l===null){l=[]}};i.error=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++){t[i]=arguments[i]}return a("error",n,t)};i.warn=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++){t[i]=arguments[i]}return a("warn",n,t)};i.debug=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++){t[i]=arguments[i]}return a("debug",n,t)};return i}var m=p("VIDEOJS");var v=m.createLogger;function n(e){return e.replace(/\n\r?\s*/g,"")}var g=function e(t){var i="",r=0;for(;r<arguments.length;r++){i+=n(t[r])+(arguments[r+1]||"")}return i};var t=Object.prototype.toString;var a=function e(t){return T(t)?Object.keys(t):[]};function y(t,i){a(t).forEach(function(e){return i(t[e],e)})}function i(i,r,e){if(e===void 0){e=0}return a(i).reduce(function(e,t){return r(e,i[t],t)},e)}function b(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++){t[r-1]=arguments[r]}if(Object.assign){return Object.assign.apply(Object,[i].concat(t))}t.forEach(function(e){if(!e){return}y(e,function(e,t){i[t]=e})});return i}function T(e){return!!e&&typeof e==="object"}function S(e){return T(e)&&t.call(e)==="[object Object]"&&e.constructor===Object}function k(e,t){if(!e||!t){return""}if(typeof _.getComputedStyle==="function"){var i=_.getComputedStyle(e);return i?i[t]:""}return""}function w(){var t=e(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);w=function e(){return t};return t}function C(e){return typeof e==="string"&&/\S/.test(e)}function E(e){if(/\s/.test(e)){throw new Error("class has illegal whitespace characters")}}function A(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function L(){return d===_.document}function I(e){return T(e)&&e.nodeType===1}function P(){try{return _.parent!==_.self}catch(e){return true}}function O(r){return function(e,t){if(!C(e)){return d[r](null)}if(C(t)){t=d.querySelector(t)}var i=I(t)?t:d;return i[r]&&i[r](e)}}function U(e,i,t,r){if(e===void 0){e="div"}if(i===void 0){i={}}if(t===void 0){t={}}var n=d.createElement(e);Object.getOwnPropertyNames(i).forEach(function(e){var t=i[e];if(e.indexOf("aria-")!==-1||e==="role"||e==="type"){m.warn(g(w(),e,t));n.setAttribute(e,t)}else if(e==="textContent"){D(n,t)}else{n[e]=t}});Object.getOwnPropertyNames(t).forEach(function(e){n.setAttribute(e,t[e])});if(r){J(n,r)}return n}function D(e,t){if(typeof e.textContent==="undefined"){e.innerText=t}else{e.textContent=t}return e}function x(e,t){if(t.firstChild){t.insertBefore(e,t.firstChild)}else{t.appendChild(e)}}function R(e,t){E(t);if(e.classList){return e.classList.contains(t)}return A(t).test(e.className)}function M(e,t){if(e.classList){e.classList.add(t)}else if(!R(e,t)){e.className=(e.className+" "+t).trim()}return e}function B(e,t){if(e.classList){e.classList.remove(t)}else{E(t);e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")}return e}function N(e,t,i){var r=R(e,t);if(typeof i==="function"){i=i(e,t)}if(typeof i!=="boolean"){i=!r}if(i===r){return}if(i){M(e,t)}else{B(e,t)}return e}function j(i,r){Object.getOwnPropertyNames(r).forEach(function(e){var t=r[e];if(t===null||typeof t==="undefined"||t===false){i.removeAttribute(e)}else{i.setAttribute(e,t===true?"":t)}})}function F(e){var t={};var i=","+"autoplay,controls,playsinline,loop,muted,default,defaultMuted"+",";if(e&&e.attributes&&e.attributes.length>0){var r=e.attributes;for(var n=r.length-1;n>=0;n--){var a=r[n].name;var s=r[n].value;if(typeof e[a]==="boolean"||i.indexOf(","+a+",")!==-1){s=s!==null?true:false}t[a]=s}}return t}function V(e,t){return e.getAttribute(t)}function H(e,t,i){e.setAttribute(t,i)}function q(e,t){e.removeAttribute(t)}function z(){d.body.focus();d.onselectstart=function(){return false}}function W(){d.onselectstart=function(){return true}}function G(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect();var i={};["bottom","height","left","right","top","width"].forEach(function(e){if(t[e]!==undefined){i[e]=t[e]}});if(!i.height){i.height=parseFloat(k(e,"height"))}if(!i.width){i.width=parseFloat(k(e,"width"))}return i}}function X(e){var t;if(e.getBoundingClientRect&&e.parentNode){t=e.getBoundingClientRect()}if(!t){return{left:0,top:0}}var i=d.documentElement;var r=d.body;var n=i.clientLeft||r.clientLeft||0;var a=_.pageXOffset||r.scrollLeft;var s=t.left+a-n;var o=i.clientTop||r.clientTop||0;var u=_.pageYOffset||r.scrollTop;var l=t.top+u-o;return{left:Math.round(s),top:Math.round(l)}}function Y(e,t){var i={};var r=X(e);var n=e.offsetWidth;var a=e.offsetHeight;var s=r.top;var o=r.left;var u=t.pageY;var l=t.pageX;if(t.changedTouches){l=t.changedTouches[0].pageX;u=t.changedTouches[0].pageY}i.y=Math.max(0,Math.min(1,(s-u+a)/a));i.x=Math.max(0,Math.min(1,(l-o)/n));return i}function K(e){return T(e)&&e.nodeType===3}function $(e){while(e.firstChild){e.removeChild(e.firstChild)}return e}function Q(e){if(typeof e==="function"){e=e()}return(Array.isArray(e)?e:[e]).map(function(e){if(typeof e==="function"){e=e()}if(I(e)||K(e)){return e}if(typeof e==="string"&&/\S/.test(e)){return d.createTextNode(e)}}).filter(function(e){return e})}function J(t,e){Q(e).forEach(function(e){return t.appendChild(e)});return t}function Z(e,t){return J($(e),t)}function ee(e){if(e.button===undefined&&e.buttons===undefined){return true}if(e.button===0&&e.buttons===undefined){return true}if(e.button!==0||e.buttons!==1){return false}return true}var te=O("querySelector");var ie=O("querySelectorAll");var re=Object.freeze({isReal:L,isEl:I,isInFrame:P,createEl:U,textContent:D,prependTo:x,hasClass:R,addClass:M,removeClass:B,toggleClass:N,setAttributes:j,getAttributes:F,getAttribute:V,setAttribute:H,removeAttribute:q,blockTextSelection:z,unblockTextSelection:W,getBoundingClientRect:G,findPosition:X,getPointerPosition:Y,isTextNode:K,emptyEl:$,normalizeContent:Q,appendContent:J,insertContent:Z,isSingleLeftClick:ee,$:te,$$:ie});var ne=1;function ae(){return ne++}var se={};var oe="vdata"+(new Date).getTime();function ue(e){var t=e[oe];if(!t){t=e[oe]=ae()}if(!se[t]){se[t]={}}return se[t]}function le(e){var t=e[oe];if(!t){return false}return!!Object.getOwnPropertyNames(se[t]).length}function ce(t){var e=t[oe];if(!e){return}delete se[e];try{delete t[oe]}catch(e){if(t.removeAttribute){t.removeAttribute(oe)}else{t[oe]=null}}}function fe(e,t){var i=ue(e);if(i.handlers[t].length===0){delete i.handlers[t];if(e.removeEventListener){e.removeEventListener(t,i.dispatcher,false)}else if(e.detachEvent){e.detachEvent("on"+t,i.dispatcher)}}if(Object.getOwnPropertyNames(i.handlers).length<=0){delete i.handlers;delete i.dispatcher;delete i.disabled}if(Object.getOwnPropertyNames(i).length===0){ce(e)}}function de(t,i,e,r){e.forEach(function(e){t(i,e,r)})}function he(e){function t(){return true}function i(){return false}if(!e||!e.isPropagationStopped){var r=e||_.event;e={};for(var n in r){if(n!=="layerX"&&n!=="layerY"&&n!=="keyLocation"&&n!=="webkitMovementX"&&n!=="webkitMovementY"){if(!(n==="returnValue"&&r.preventDefault)){e[n]=r[n]}}}if(!e.target){e.target=e.srcElement||d}if(!e.relatedTarget){e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement}e.preventDefault=function(){if(r.preventDefault){r.preventDefault()}e.returnValue=false;r.returnValue=false;e.defaultPrevented=true};e.defaultPrevented=false;e.stopPropagation=function(){if(r.stopPropagation){r.stopPropagation()}e.cancelBubble=true;r.cancelBubble=true;e.isPropagationStopped=t};e.isPropagationStopped=i;e.stopImmediatePropagation=function(){if(r.stopImmediatePropagation){r.stopImmediatePropagation()}e.isImmediatePropagationStopped=t;e.stopPropagation()};e.isImmediatePropagationStopped=i;if(e.clientX!==null&&e.clientX!==undefined){var a=d.documentElement;var s=d.body;e.pageX=e.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0);e.pageY=e.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}e.which=e.charCode||e.keyCode;if(e.button!==null&&e.button!==undefined){e.button=e.button&1?0:e.button&4?1:e.button&2?2:0}}return e}var pe=false;(function(){try{var e=Object.defineProperty({},"passive",{get:function e(){pe=true}});_.addEventListener("test",null,e);_.removeEventListener("test",null,e)}catch(e){}})();var me=["touchstart","touchmove"];function ve(s,e,t){if(Array.isArray(e)){return de(ve,s,e,t)}var o=ue(s);if(!o.handlers){o.handlers={}}if(!o.handlers[e]){o.handlers[e]=[]}if(!t.guid){t.guid=ae()}o.handlers[e].push(t);if(!o.dispatcher){o.disabled=false;o.dispatcher=function(e,t){if(o.disabled){return}e=he(e);var i=o.handlers[e.type];if(i){var r=i.slice(0);for(var n=0,a=r.length;n<a;n++){if(e.isImmediatePropagationStopped()){break}else{try{r[n].call(s,e,t)}catch(e){m.error(e)}}}}}}if(o.handlers[e].length===1){if(s.addEventListener){var i=false;if(pe&&me.indexOf(e)>-1){i={passive:true}}s.addEventListener(e,o.dispatcher,i)}else if(s.attachEvent){s.attachEvent("on"+e,o.dispatcher)}}}function ge(e,t,i){if(!le(e)){return}var r=ue(e);if(!r.handlers){return}if(Array.isArray(t)){return de(ge,e,t,i)}var n=function e(t,i){r.handlers[i]=[];fe(t,i)};if(t===undefined){for(var a in r.handlers){if(Object.prototype.hasOwnProperty.call(r.handlers||{},a)){n(e,a)}}return}var s=r.handlers[t];if(!s){return}if(!i){n(e,t);return}if(i.guid){for(var o=0;o<s.length;o++){if(s[o].guid===i.guid){s.splice(o--,1)}}}fe(e,t)}function ye(e,t,i){var r=le(e)?ue(e):{};var n=e.parentNode||e.ownerDocument;if(typeof t==="string"){t={type:t,target:e}}else if(!t.target){t.target=e}t=he(t);if(r.dispatcher){r.dispatcher.call(e,t,i)}if(n&&!t.isPropagationStopped()&&t.bubbles===true){ye.call(null,n,t,i)}else if(!n&&!t.defaultPrevented&&t.target&&t.target[t.type]){var a=ue(t.target);if(t.target[t.type]){a.disabled=true;if(typeof t.target[t.type]==="function"){t.target[t.type]()}a.disabled=false}}return!t.defaultPrevented}function _e(t,i,r){if(Array.isArray(i)){return de(_e,t,i,r)}var e=function e(){ge(t,i,e);r.apply(this,arguments)};e.guid=r.guid=r.guid||ae();ve(t,i,e)}var be=Object.freeze({fixEvent:he,on:ve,off:ge,trigger:ye,one:_e});var Te=false;var Se;var ke=function e(){if(!L()||Se.options.autoSetup===false){return}var t=Array.prototype.slice.call(d.getElementsByTagName("video"));var i=Array.prototype.slice.call(d.getElementsByTagName("audio"));var r=Array.prototype.slice.call(d.getElementsByTagName("video-js"));var n=t.concat(i,r);if(n&&n.length>0){for(var a=0,s=n.length;a<s;a++){var o=n[a];if(o&&o.getAttribute){if(o.player===undefined){var u=o.getAttribute("data-setup");if(u!==null){Se(o)}}}else{we(1);break}}}else if(!Te){we(1)}};function we(e,t){if(t){Se=t}_.setTimeout(ke,e)}if(L()&&d.readyState==="complete"){Te=true}else{_e(_,"load",function(){Te=true})}var Ce=function e(t){var i=d.createElement("style");i.className=t;return i};var Ee=function e(t,i){if(t.styleSheet){t.styleSheet.cssText=i}else{t.textContent=i}};var Ae=function e(t,i,r){if(!i.guid){i.guid=ae()}var n=function e(){return i.apply(t,arguments)};n.guid=r?r+"_"+i.guid:i.guid;return n};var Le=function e(i,r){var n=Date.now();var t=function e(){var t=Date.now();if(t-n>=r){i.apply(void 0,arguments);n=t}};return t};var Ie=function e(n,a,s,o){if(o===void 0){o=_}var u;var t=function e(){o.clearTimeout(u);u=null};var i=function e(){var t=this;var i=arguments;var r=function e(){u=null;r=null;if(!s){n.apply(t,i)}};if(!u&&s){n.apply(t,i)}o.clearTimeout(u);u=o.setTimeout(r,a)};i.cancel=t;return i};var Pe=function e(){};Pe.prototype.allowedEvents_={};Pe.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){};ve(this,e,t);this.addEventListener=i};Pe.prototype.addEventListener=Pe.prototype.on;Pe.prototype.off=function(e,t){ge(this,e,t)};Pe.prototype.removeEventListener=Pe.prototype.off;Pe.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){};_e(this,e,t);this.addEventListener=i};Pe.prototype.trigger=function(e){var t=e.type||e;if(typeof e==="string"){e={type:t}}e=he(e);if(this.allowedEvents_[t]&&this["on"+t]){this["on"+t](e)}ye(this,e)};Pe.prototype.dispatchEvent=Pe.prototype.trigger;var Oe;Pe.prototype.queueTrigger=function(e){var t=this;if(!Oe){Oe=new Map}var i=e.type||e;var r=Oe.get(this);if(!r){r=new Map;Oe.set(this,r)}var n=r.get(i);r.delete(i);_.clearTimeout(n);var a=_.setTimeout(function(){if(r.size===0){r=null;Oe.delete(t)}t.trigger(e)},0);r.set(i,a)};var Ue=function e(t){return t instanceof Pe||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return typeof t[e]==="function"})};var De=function e(t,i){if(Ue(t)){i()}else{if(!t.eventedCallbacks){t.eventedCallbacks=[]}t.eventedCallbacks.push(i)}};var xe=function e(t){return typeof t==="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length};var Re=function e(t){if(!t.nodeName&&!Ue(t)){throw new Error("Invalid target; must be a DOM node or evented object.")}};var Me=function e(t){if(!xe(t)){throw new Error("Invalid event type; must be a non-empty string or array.")}};var Be=function e(t){if(typeof t!=="function"){throw new Error("Invalid listener; must be a function.")}};var Ne=function e(t,i){var r=i.length<3||i[0]===t||i[0]===t.eventBusEl_;var n;var a;var s;if(r){n=t.eventBusEl_;if(i.length>=3){i.shift()}a=i[0];s=i[1]}else{n=i[0];a=i[1];s=i[2]}Re(n);Me(a);Be(s);s=Ae(t,s);return{isTargetingSelf:r,target:n,type:a,listener:s}};var je=function e(t,i,r,n){Re(t);if(t.nodeName){be[i](t,r,n)}else{t[i](r,n)}};var Fe={on:function e(){var t=this;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++){r[n]=arguments[n]}var a=Ne(this,r),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;je(o,"on",u,l);if(!s){var c=function e(){return t.off(o,u,l)};c.guid=l.guid;var f=function e(){return t.off("dispose",c)};f.guid=l.guid;je(this,"on","dispose",c);je(o,"on","dispose",f)}},one:function e(){var n=this;for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}var a=Ne(this,i),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;if(s){je(o,"one",u,l)}else{var c=function e(){n.off(o,u,e);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}l.apply(null,i)};c.guid=l.guid;je(o,"one",u,c)}},off:function e(t,i,r){if(!t||xe(t)){ge(this.eventBusEl_,t,i)}else{var n=t;var a=i;Re(n);Me(a);Be(r);r=Ae(this,r);this.off("dispose",r);if(n.nodeName){ge(n,a,r);ge(n,"dispose",r)}else if(Ue(n)){n.off(a,r);n.off("dispose",r)}}},trigger:function e(t,i){return ye(this.eventBusEl_,t,i)}};function Ve(e,t){if(t===void 0){t={}}var i=t,r=i.eventBusKey;if(r){if(!e[r].nodeName){throw new Error('The eventBusKey "'+r+'" does not refer to an element.')}e.eventBusEl_=e[r]}else{e.eventBusEl_=U("span",{className:"vjs-event-bus"})}b(e,Fe);if(e.eventedCallbacks){e.eventedCallbacks.forEach(function(e){e()})}e.on("dispose",function(){e.off();_.setTimeout(function(){e.eventBusEl_=null},0)});return e}var He={state:{},setState:function e(t){var i=this;if(typeof t==="function"){t=t()}var r;y(t,function(e,t){if(i.state[t]!==e){r=r||{};r[t]={from:i.state[t],to:e}}i.state[t]=e});if(r&&Ue(this)){this.trigger({changes:r,type:"statechanged"})}return r}};function qe(e,t){b(e,He);e.state=b({},e.state,t);if(typeof e.handleStateChanged==="function"&&Ue(e)){e.on("statechanged",e.handleStateChanged)}return e}function ze(e){if(typeof e!=="string"){return e}return e.charAt(0).toUpperCase()+e.slice(1)}function We(e,t){return ze(e)===ze(t)}function Ge(){var i={};for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}t.forEach(function(e){if(!e){return}y(e,function(e,t){if(!S(e)){i[t]=e;return}if(!S(i[t])){i[t]={}}i[t]=Ge(i[t],e)})});return i}var Xe=function(){function c(e,t,i){if(!e&&this.play){this.player_=e=this}else{this.player_=e}this.parentComponent_=null;this.options_=Ge({},this.options_);t=this.options_=Ge(this.options_,t);this.id_=t.id||t.el&&t.el.id;if(!this.id_){var r=e&&e.id&&e.id()||"no_player";this.id_=r+"_component_"+ae()}this.name_=t.name||null;if(t.el){this.el_=t.el}else if(t.createEl!==false){this.el_=this.createEl()}if(t.evented!==false){Ve(this,{eventBusKey:this.el_?"el_":null})}qe(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};if(t.initChildren!==false){this.initChildren()}this.ready(i);if(t.reportTouchActivity!==false){this.enableTouchActivity()}}var e=c.prototype;e.dispose=function e(){this.trigger({type:"dispose",bubbles:false});if(this.children_){for(var t=this.children_.length-1;t>=0;t--){if(this.children_[t].dispose){this.children_[t].dispose()}}}this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.parentComponent_=null;if(this.el_){if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_)}ce(this.el_);this.el_=null}this.player_=null};e.player=function e(){return this.player_};e.options=function e(t){m.warn("this.options() has been deprecated and will be moved to the constructor in 6.0");if(!t){return this.options_}this.options_=Ge(this.options_,t);return this.options_};e.el=function e(){return this.el_};e.createEl=function e(t,i,r){return U(t,i,r)};e.localize=function e(t,n,i){if(i===void 0){i=t}var r=this.player_.language&&this.player_.language();var a=this.player_.languages&&this.player_.languages();var s=a&&a[r];var o=r&&r.split("-")[0];var u=a&&a[o];var l=i;if(s&&s[t]){l=s[t]}else if(u&&u[t]){l=u[t]}if(n){l=l.replace(/\{(\d+)\}/g,function(e,t){var i=n[t-1];var r=i;if(typeof i==="undefined"){r=e}return r})}return l};e.contentEl=function e(){return this.contentEl_||this.el_};e.id=function e(){return this.id_};e.name=function e(){return this.name_};e.children=function e(){return this.children_};e.getChildById=function e(t){return this.childIndex_[t]};e.getChild=function e(t){if(!t){return}t=ze(t);return this.childNameIndex_[t]};e.addChild=function e(t,i,r){if(i===void 0){i={}}if(r===void 0){r=this.children_.length}var n;var a;if(typeof t==="string"){a=ze(t);var s=i.componentClass||a;i.name=a;var o=c.getComponent(s);if(!o){throw new Error("Component "+s+" does not exist")}if(typeof o!=="function"){return null}n=new o(this.player_||this,i)}else{n=t}if(n.parentComponent_){n.parentComponent_.removeChild(n)}this.children_.splice(r,0,n);n.parentComponent_=this;if(typeof n.id==="function"){this.childIndex_[n.id()]=n}a=a||n.name&&ze(n.name());if(a){this.childNameIndex_[a]=n}if(typeof n.el==="function"&&n.el()){var u=this.contentEl().children;var l=u[r]||null;this.contentEl().insertBefore(n.el(),l)}return n};e.removeChild=function e(t){if(typeof t==="string"){t=this.getChild(t)}if(!t||!this.children_){return}var i=false;for(var r=this.children_.length-1;r>=0;r--){if(this.children_[r]===t){i=true;this.children_.splice(r,1);break}}if(!i){return}t.parentComponent_=null;this.childIndex_[t.id()]=null;this.childNameIndex_[t.name()]=null;var n=t.el();if(n&&n.parentNode===this.contentEl()){this.contentEl().removeChild(t.el())}};e.initChildren=function e(){var a=this;var r=this.options_.children;if(r){var s=this.options_;var t=function e(t){var i=t.name;var r=t.opts;if(s[i]!==undefined){r=s[i]}if(r===false){return}if(r===true){r={}}r.playerOptions=a.options_.playerOptions;var n=a.addChild(i,r);if(n){a[i]=n}};var i;var n=c.getComponent("Tech");if(Array.isArray(r)){i=r}else{i=Object.keys(r)}i.concat(Object.keys(this.options_).filter(function(t){return!i.some(function(e){if(typeof e==="string"){return t===e}return t===e.name})})).map(function(e){var t;var i;if(typeof e==="string"){t=e;i=r[t]||a.options_[t]||{}}else{t=e.name;i=e}return{name:t,opts:i}}).filter(function(e){var t=c.getComponent(e.opts.componentClass||ze(e.name));return t&&!n.isTech(t)}).forEach(t)}};e.buildCSSClass=function e(){return""};e.ready=function e(t,i){if(i===void 0){i=false}if(!t){return}if(!this.isReady_){this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(t);return}if(i){t.call(this)}else{this.setTimeout(t,1)}};e.triggerReady=function e(){this.isReady_=true;this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[];if(e&&e.length>0){e.forEach(function(e){e.call(this)},this)}this.trigger("ready")},1)};e.$=function e(t,i){return te(t,i||this.contentEl())};e.$$=function e(t,i){return ie(t,i||this.contentEl())};e.hasClass=function e(t){return R(this.el_,t)};e.addClass=function e(t){M(this.el_,t)};e.removeClass=function e(t){B(this.el_,t)};e.toggleClass=function e(t,i){N(this.el_,t,i)};e.show=function e(){this.removeClass("vjs-hidden")};e.hide=function e(){this.addClass("vjs-hidden")};e.lockShowing=function e(){this.addClass("vjs-lock-showing")};e.unlockShowing=function e(){this.removeClass("vjs-lock-showing")};e.getAttribute=function e(t){return V(this.el_,t)};e.setAttribute=function e(t,i){H(this.el_,t,i)};e.removeAttribute=function e(t){q(this.el_,t)};e.width=function e(t,i){return this.dimension("width",t,i)};e.height=function e(t,i){return this.dimension("height",t,i)};e.dimensions=function e(t,i){this.width(t,true);this.height(i)};e.dimension=function e(t,i,r){if(i!==undefined){if(i===null||i!==i){i=0}if((""+i).indexOf("%")!==-1||(""+i).indexOf("px")!==-1){this.el_.style[t]=i}else if(i==="auto"){this.el_.style[t]=""}else{this.el_.style[t]=i+"px"}if(!r){this.trigger("componentresize")}return}if(!this.el_){return 0}var n=this.el_.style[t];var a=n.indexOf("px");if(a!==-1){return parseInt(n.slice(0,a),10)}return parseInt(this.el_["offset"+ze(t)],10)};e.currentDimension=function e(t){var i=0;if(t!=="width"&&t!=="height"){throw new Error("currentDimension only accepts width or height value")}if(typeof _.getComputedStyle==="function"){var r=_.getComputedStyle(this.el_);i=r.getPropertyValue(t)||r[t]}i=parseFloat(i);if(i===0){var n="offset"+ze(t);i=this.el_[n]}return i};e.currentDimensions=function e(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};e.currentWidth=function e(){return this.currentDimension("width")};e.currentHeight=function e(){return this.currentDimension("height")};e.focus=function e(){this.el_.focus()};e.blur=function e(){this.el_.blur()};e.handleKeyPress=function e(t){if(this.player_){this.player_.handleKeyPress(t)}};e.emitTapEvents=function e(){var i=0;var n=null;var a=10;var r=200;var s;this.on("touchstart",function(e){if(e.touches.length===1){n={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY};i=(new Date).getTime();s=true}});this.on("touchmove",function(e){if(e.touches.length>1){s=false}else if(n){var t=e.touches[0].pageX-n.pageX;var i=e.touches[0].pageY-n.pageY;var r=Math.sqrt(t*t+i*i);if(r>a){s=false}}});var t=function e(){s=false};this.on("touchleave",t);this.on("touchcancel",t);this.on("touchend",function(e){n=null;if(s===true){var t=(new Date).getTime()-i;if(t<r){e.preventDefault();this.trigger("tap")}}})};e.enableTouchActivity=function e(){if(!this.player()||!this.player().reportUserActivity){return}var i=Ae(this.player(),this.player().reportUserActivity);var r;this.on("touchstart",function(){i();this.clearInterval(r);r=this.setInterval(i,250)});var t=function e(t){i();this.clearInterval(r)};this.on("touchmove",i);this.on("touchend",t);this.on("touchcancel",t)};e.setTimeout=function e(t,i){var r=this;var n,a;t=Ae(this,t);n=_.setTimeout(function(){r.off("dispose",a);t()},i);a=function e(){return r.clearTimeout(n)};a.guid="vjs-timeout-"+n;this.on("dispose",a);return n};e.clearTimeout=function e(t){_.clearTimeout(t);var i=function e(){};i.guid="vjs-timeout-"+t;this.off("dispose",i);return t};e.setInterval=function e(t,i){var r=this;t=Ae(this,t);var n=_.setInterval(t,i);var a=function e(){return r.clearInterval(n)};a.guid="vjs-interval-"+n;this.on("dispose",a);return n};e.clearInterval=function e(t){_.clearInterval(t);var i=function e(){};i.guid="vjs-interval-"+t;this.off("dispose",i);return t};e.requestAnimationFrame=function e(t){var i=this;var r,n;if(this.supportsRaf_){t=Ae(this,t);r=_.requestAnimationFrame(function(){i.off("dispose",n);t()});n=function e(){return i.cancelAnimationFrame(r)};n.guid="vjs-raf-"+r;this.on("dispose",n);return r}return this.setTimeout(t,1e3/60)};e.cancelAnimationFrame=function e(t){if(this.supportsRaf_){_.cancelAnimationFrame(t);var i=function e(){};i.guid="vjs-raf-"+t;this.off("dispose",i);return t}return this.clearTimeout(t)};c.registerComponent=function e(t,i){if(typeof t!=="string"||!t){throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.')}var r=c.getComponent("Tech");var n=r&&r.isTech(i);var a=c===i||c.prototype.isPrototypeOf(i.prototype);if(n||!a){var s;if(n){s="techs must be registered using Tech.registerTech()"}else{s="must be a Component subclass"}throw new Error('Illegal component, "'+t+'"; '+s+".")}t=ze(t);if(!c.components_){c.components_={}}var o=c.getComponent("Player");if(t==="Player"&&o&&o.players){var u=o.players;var l=Object.keys(u);if(u&&l.length>0&&l.map(function(e){return u[e]}).every(Boolean)){throw new Error("Can not register Player component after player has been created.")}}c.components_[t]=i;return i};c.getComponent=function e(t){if(!t){return}t=ze(t);if(c.components_&&c.components_[t]){return c.components_[t]}};return c}();Xe.prototype.supportsRaf_=typeof _.requestAnimationFrame==="function"&&typeof _.cancelAnimationFrame==="function";Xe.registerComponent("Component",Xe);var Ye=_.navigator&&_.navigator.userAgent||"";var Ke=/AppleWebKit\/([\d.]+)/i.exec(Ye);var $e=Ke?parseFloat(Ke.pop()):null;var Qe=/iPad/i.test(Ye);var Je=/iPhone/i.test(Ye)&&!Qe;var Ze=/iPod/i.test(Ye);var et=Je||Qe||Ze;var tt=function(){var e=Ye.match(/OS (\d+)_/i);if(e&&e[1]){return e[1]}return null}();var it=/Android/i.test(Ye);var rt=function(){var e=Ye.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e){return null}var t=e[1]&&parseFloat(e[1]);var i=e[2]&&parseFloat(e[2]);if(t&&i){return parseFloat(e[1]+"."+e[2])}else if(t){return t}return null}();var nt=it&&rt<5&&$e<537;var at=/Firefox/i.test(Ye);var st=/Edge/i.test(Ye);var ot=!st&&(/Chrome/i.test(Ye)||/CriOS/i.test(Ye));var ut=function(){var e=Ye.match(/(Chrome|CriOS)\/(\d+)/);if(e&&e[2]){return parseFloat(e[2])}return null}();var lt=function(){var e=/MSIE\s(\d+)\.\d/.exec(Ye);var t=e&&parseFloat(e[1]);if(!t&&/Trident\/7.0/i.test(Ye)&&/rv:11.0/.test(Ye)){t=11}return t}();var ct=/Safari/i.test(Ye)&&!ot&&!it&&!st;var ft=(ct||et)&&!ot;var dt=L()&&("ontouchstart"in _||_.navigator.maxTouchPoints||_.DocumentTouch&&_.document instanceof _.DocumentTouch);var ht=Object.freeze({IS_IPAD:Qe,IS_IPHONE:Je,IS_IPOD:Ze,IS_IOS:et,IOS_VERSION:tt,IS_ANDROID:it,ANDROID_VERSION:rt,IS_NATIVE_ANDROID:nt,IS_FIREFOX:at,IS_EDGE:st,IS_CHROME:ot,CHROME_VERSION:ut,IE_VERSION:lt,IS_SAFARI:ct,IS_ANY_SAFARI:ft,TOUCH_ENABLED:dt});function pt(e,t,i){if(typeof t!=="number"||t<0||t>i){throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}}function mt(e,t,i,r){pt(e,r,i.length-1);return i[r][t]}function vt(e){if(e===undefined||e.length===0){return{length:0,start:function e(){throw new Error("This TimeRanges object is empty")},end:function e(){throw new Error("This TimeRanges object is empty")}}}return{length:e.length,start:mt.bind(null,"start",0,e),end:mt.bind(null,"end",1,e)}}function gt(e,t){if(Array.isArray(e)){return vt(e)}else if(e===undefined||t===undefined){return vt()}return vt([[e,t]])}function yt(e,t){var i=0;var r;var n;if(!t){return 0}if(!e||!e.length){e=gt(0,0)}for(var a=0;a<e.length;a++){r=e.start(a);n=e.end(a);if(n>t){n=t}i+=n-r}return i/t}var _t={};var bt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]];var Tt=bt[0];var St;var kt=false;for(var wt=0;wt<bt.length;wt++){if(bt[wt][1]in d){St=bt[wt];break}}if(St){for(var Ct=0;Ct<St.length;Ct++){_t[Tt[Ct]]=St[Ct]}kt=St[0]===Tt[0]}function Et(e){if(e instanceof Et){return e}if(typeof e==="number"){this.code=e}else if(typeof e==="string"){this.message=e}else if(T(e)){if(typeof e.code==="number"){this.code=e.code}b(this,e)}if(!this.message){this.message=Et.defaultMessages[this.code]||""}}Et.prototype.code=0;Et.prototype.message="";Et.prototype.status=null;Et.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Et.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var At=0;At<Et.errorTypes.length;At++){Et[Et.errorTypes[At]]=At;Et.prototype[Et.errorTypes[At]]=At}var Lt=It;function It(e,t){var i;var r=null;try{i=JSON.parse(e,t)}catch(e){r=e}return[r,i]}function Pt(e){return e!==undefined&&e!==null&&typeof e.then==="function"}function Ot(e){if(Pt(e)){e.then(null,function(e){})}}var Ut=function e(r){var t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,t,i){if(r[t]){e[t]=r[t]}return e},{cues:r.cues&&Array.prototype.map.call(r.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})});return t};var Dt=function e(t){var i=t.$$("track");var r=Array.prototype.map.call(i,function(e){return e.track});var n=Array.prototype.map.call(i,function(e){var t=Ut(e.track);if(e.src){t.src=e.src}return t});return n.concat(Array.prototype.filter.call(t.textTracks(),function(e){return r.indexOf(e)===-1}).map(Ut))};var xt=function e(t,i){t.forEach(function(e){var t=i.addRemoteTextTrack(e).track;if(!e.src&&e.cues){e.cues.forEach(function(e){return t.addCue(e)})}});return i.textTracks()};var Rt={textTracksToJson:Dt,jsonToTextTracks:xt,trackToJson_:Ut};var Mt=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function Bt(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Nt=Bt(function(e,t){function i(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;if(t)e=t}if("number"===typeof e)return n[e];var i=String(e);var r=a[i.toLowerCase()];if(r)return r;var r=s[i.toLowerCase()];if(r)return r;if(i.length===1)return i.charCodeAt(0);return undefined}i.isEventKey=function e(t,i){if(t&&"object"===typeof t){var r=t.which||t.keyCode||t.charCode;if(r===null||r===undefined){return false}if(typeof i==="string"){var n=a[i.toLowerCase()];if(n){return n===r}var n=s[i.toLowerCase()];if(n){return n===r}}else if(typeof i==="number"){return i===r}return false}};t=e.exports=i;var a=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};var s=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(r=97;r<123;r++){a[String.fromCharCode(r)]=r-32}for(var r=48;r<58;r++){a[r-48]=r}for(r=1;r<13;r++){a["f"+r]=r+111}for(r=0;r<10;r++){a["numpad "+r]=r+96}var n=t.names=t.title={};for(r in a){n[a[r]]=r}for(var o in s){a[o]=s[o]}});var jt=Nt.code;var Ft=Nt.codes;var Vt=Nt.aliases;var Ht=Nt.names;var qt=Nt.title;var zt="vjs-modal-dialog";var Wt=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=false;i.closeable(!i.options_.uncloseable);i.content(i.options_.content);i.contentEl_=U("div",{className:zt+"-content"},{role:"document"});i.descEl_=U("p",{className:zt+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")});D(i.descEl_,i.description());i.el_.appendChild(i.descEl_);i.el_.appendChild(i.contentEl_);return i}var t=e.prototype;t.createEl=function e(){return r.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})};t.dispose=function e(){this.contentEl_=null;this.descEl_=null;this.previouslyActiveEl_=null;r.prototype.dispose.call(this)};t.buildCSSClass=function e(){return zt+" vjs-hidden "+r.prototype.buildCSSClass.call(this)};t.handleKeyPress=function e(t){if(Nt.isEventKey(t,"Escape")&&this.closeable()){this.close()}};t.label=function e(){return this.localize(this.options_.label||"Modal Window")};t.description=function e(){var t=this.options_.description||this.localize("This is a modal window.");if(this.closeable()){t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")}return t};t.open=function e(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen");this.opened_=true;if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill()}this.wasPlaying_=!t.paused();if(this.options_.pauseOnOpen&&this.wasPlaying_){t.pause()}if(this.closeable()){this.on(this.el_.ownerDocument,"keydown",Ae(this,this.handleKeyPress))}this.hadControls_=t.controls();t.controls(false);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=true}};t.opened=function e(t){if(typeof t==="boolean"){this[t?"open":"close"]()}return this.opened_};t.close=function e(){if(!this.opened_){return}var t=this.player();this.trigger("beforemodalclose");this.opened_=false;if(this.wasPlaying_&&this.options_.pauseOnOpen){t.play()}if(this.closeable()){this.off(this.el_.ownerDocument,"keydown",Ae(this,this.handleKeyPress))}if(this.hadControls_){t.controls(true)}this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();if(this.options_.temporary){this.dispose()}};t.closeable=function e(t){if(typeof t==="boolean"){var e=this.closeable_=!!t;var i=this.getChild("closeButton");if(e&&!i){var r=this.contentEl_;this.contentEl_=this.el_;i=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=r;this.on(i,"close",this.close)}if(!e&&i){this.off(i,"close",this.close);this.removeChild(i);i.dispose()}}return this.closeable_};t.fill=function e(){this.fillWith(this.content())};t.fillWith=function e(t){var i=this.contentEl();var r=i.parentNode;var n=i.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=true;r.removeChild(i);this.empty();Z(i,t);this.trigger("modalfill");if(n){r.insertBefore(i,n)}else{r.appendChild(i)}var a=this.getChild("closeButton");if(a){r.appendChild(a.el_)}};t.empty=function e(){this.trigger("beforemodalempty");$(this.contentEl());this.trigger("modalempty")};t.content=function e(t){if(typeof t!=="undefined"){this.content_=t}return this.content_};t.conditionalFocus_=function e(){var t=d.activeElement;var i=this.player_.el_;this.previouslyActiveEl_=null;if(i.contains(t)||i===t){this.previouslyActiveEl_=t;this.focus();this.on(d,"keydown",this.handleKeyDown)}};t.conditionalBlur_=function e(){if(this.previouslyActiveEl_){this.previouslyActiveEl_.focus();this.previouslyActiveEl_=null}this.off(d,"keydown",this.handleKeyDown)};t.handleKeyDown=function e(t){if(!Nt.isEventKey(t,"Tab")){return}var i=this.focusableEls_();var r=this.el_.querySelector(":focus");var n;for(var a=0;a<i.length;a++){if(r===i[a]){n=a;break}}if(d.activeElement===this.el_){n=0}if(t.shiftKey&&n===0){i[i.length-1].focus();t.preventDefault()}else if(!t.shiftKey&&n===i.length-1){i[0].focus();t.preventDefault()}};t.focusableEls_=function e(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(e){return(e instanceof _.HTMLAnchorElement||e instanceof _.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof _.HTMLInputElement||e instanceof _.HTMLSelectElement||e instanceof _.HTMLTextAreaElement||e instanceof _.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof _.HTMLIFrameElement||e instanceof _.HTMLObjectElement||e instanceof _.HTMLEmbedElement||e.hasAttribute("tabindex")&&e.getAttribute("tabindex")!==-1||e.hasAttribute("contenteditable")})};return e}(Xe);Wt.prototype.options_={pauseOnOpen:true,temporary:true};Xe.registerComponent("ModalDialog",Wt);var Gt=function(r){o(e,r);function e(e){var t;if(e===void 0){e=[]}t=r.call(this)||this;t.tracks_=[];Object.defineProperty(h(h(t)),"length",{get:function e(){return this.tracks_.length}});for(var i=0;i<e.length;i++){t.addTrack(e[i])}return t}var t=e.prototype;t.addTrack=function e(t){var i=this.tracks_.length;if(!(""+i in this)){Object.defineProperty(this,i,{get:function e(){return this.tracks_[i]}})}if(this.tracks_.indexOf(t)===-1){this.tracks_.push(t);this.trigger({track:t,type:"addtrack",target:this})}};t.removeTrack=function e(t){var i;for(var r=0,n=this.length;r<n;r++){if(this[r]===t){i=this[r];if(i.off){i.off()}this.tracks_.splice(r,1);break}}if(!i){return}this.trigger({track:i,type:"removetrack",target:this})};t.getTrackById=function e(t){var i=null;for(var r=0,n=this.length;r<n;r++){var a=this[r];if(a.id===t){i=a;break}}return i};return e}(Pe);Gt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var Xt in Gt.prototype.allowedEvents_){Gt.prototype["on"+Xt]=null}var Yt=function e(t,i){for(var r=0;r<t.length;r++){if(!Object.keys(t[r]).length||i.id===t[r].id){continue}t[r].enabled=false}};var Kt=function(r){o(e,r);function e(e){var t;if(e===void 0){e=[]}for(var i=e.length-1;i>=0;i--){if(e[i].enabled){Yt(e,e[i]);break}}t=r.call(this,e)||this;t.changing_=false;return t}var t=e.prototype;t.addTrack=function e(t){var i=this;if(t.enabled){Yt(this,t)}r.prototype.addTrack.call(this,t);if(!t.addEventListener){return}t.enabledChange_=function(){if(i.changing_){return}i.changing_=true;Yt(i,t);i.changing_=false;i.trigger("change")};t.addEventListener("enabledchange",t.enabledChange_)};t.removeTrack=function e(t){r.prototype.removeTrack.call(this,t);if(t.removeEventListener&&t.enabledChange_){t.removeEventListener("enabledchange",t.enabledChange_);t.enabledChange_=null}};return e}(Gt);var $t=function e(t,i){for(var r=0;r<t.length;r++){if(!Object.keys(t[r]).length||i.id===t[r].id){continue}t[r].selected=false}};var Qt=function(r){o(e,r);function e(e){var t;if(e===void 0){e=[]}for(var i=e.length-1;i>=0;i--){if(e[i].selected){$t(e,e[i]);break}}t=r.call(this,e)||this;t.changing_=false;Object.defineProperty(h(h(t)),"selectedIndex",{get:function e(){for(var t=0;t<this.length;t++){if(this[t].selected){return t}}return-1},set:function e(){}});return t}var t=e.prototype;t.addTrack=function e(t){var i=this;if(t.selected){$t(this,t)}r.prototype.addTrack.call(this,t);if(!t.addEventListener){return}t.selectedChange_=function(){if(i.changing_){return}i.changing_=true;$t(i,t);i.changing_=false;i.trigger("change")};t.addEventListener("selectedchange",t.selectedChange_)};t.removeTrack=function e(t){r.prototype.removeTrack.call(this,t);if(t.removeEventListener&&t.selectedChange_){t.removeEventListener("selectedchange",t.selectedChange_);t.selectedChange_=null}};return e}(Gt);var Jt=function(n){o(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;t.addTrack=function e(t){var i=this;n.prototype.addTrack.call(this,t);if(!this.queueChange_){this.queueChange_=function(){return i.queueTrigger("change")}}if(!this.triggerSelectedlanguagechange){this.triggerSelectedlanguagechange_=function(){return i.trigger("selectedlanguagechange")}}t.addEventListener("modechange",this.queueChange_);var r=["metadata","chapters"];if(r.indexOf(t.kind)===-1){t.addEventListener("modechange",this.triggerSelectedlanguagechange_)}};t.removeTrack=function e(t){n.prototype.removeTrack.call(this,t);if(t.removeEventListener){if(this.queueChange_){t.removeEventListener("modechange",this.queueChange_)}if(this.selectedlanguagechange_){t.removeEventListener("modechange",this.triggerSelectedlanguagechange_)}}};return e}(Gt);var Zt=function(){function e(e){if(e===void 0){e=[]}this.trackElements_=[];Object.defineProperty(this,"length",{get:function e(){return this.trackElements_.length}});for(var t=0,i=e.length;t<i;t++){this.addTrackElement_(e[t])}}var t=e.prototype;t.addTrackElement_=function e(t){var i=this.trackElements_.length;if(!(""+i in this)){Object.defineProperty(this,i,{get:function e(){return this.trackElements_[i]}})}if(this.trackElements_.indexOf(t)===-1){this.trackElements_.push(t)}};t.getTrackElementByTrack_=function e(t){var i;for(var r=0,n=this.trackElements_.length;r<n;r++){if(t===this.trackElements_[r].track){i=this.trackElements_[r];break}}return i};t.removeTrackElement_=function e(t){for(var i=0,r=this.trackElements_.length;i<r;i++){if(t===this.trackElements_[i]){if(this.trackElements_[i].track&&typeof this.trackElements_[i].track.off==="function"){this.trackElements_[i].track.off()}if(typeof this.trackElements_[i].off==="function"){this.trackElements_[i].off()}this.trackElements_.splice(i,1);break}}};return e}();var ei=function(){function t(e){t.prototype.setCues_.call(this,e);Object.defineProperty(this,"length",{get:function e(){return this.length_}})}var e=t.prototype;e.setCues_=function e(t){var i=this.length||0;var r=0;var n=t.length;this.cues_=t;this.length_=t.length;var a=function e(t){if(!(""+t in this)){Object.defineProperty(this,""+t,{get:function e(){return this.cues_[t]}})}};if(i<n){r=i;for(;r<n;r++){a.call(this,r)}}};e.getCueById=function e(t){var i=null;for(var r=0,n=this.length;r<n;r++){var a=this[r];if(a.id===t){i=a;break}}return i};return t}();var ti={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"};var ii={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"};var ri={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};var ni={disabled:"disabled",hidden:"hidden",showing:"showing"};var ai=function(a){o(e,a);function e(e){var i;if(e===void 0){e={}}i=a.call(this)||this;var r={id:e.id||"vjs_track_"+ae(),kind:e.kind||"",label:e.label||"",language:e.language||""};var t=function e(t){Object.defineProperty(h(h(i)),t,{get:function e(){return r[t]},set:function e(){}})};for(var n in r){t(n)}return i}return e}(Pe);var si=function e(t){var i=["protocol","hostname","port","pathname","search","hash","host"];var r=d.createElement("a");r.href=t;var n=r.host===""&&r.protocol!=="file:";var a;if(n){a=d.createElement("div");a.innerHTML='<a href="'+t+'"></a>';r=a.firstChild;a.setAttribute("style","display:none; position:absolute;");d.body.appendChild(a)}var s={};for(var o=0;o<i.length;o++){s[i[o]]=r[i[o]]}if(s.protocol==="http:"){s.host=s.host.replace(/:80$/,"")}if(s.protocol==="https:"){s.host=s.host.replace(/:443$/,"")}if(!s.protocol){s.protocol=_.location.protocol}if(n){d.body.removeChild(a)}return s};var oi=function e(t){if(!t.match(/^https?:\/\//)){var i=d.createElement("div");i.innerHTML='<a href="'+t+'">x</a>';t=i.firstChild.href}return t};var ui=function e(t){if(typeof t==="string"){var i=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i;var r=i.exec(t);if(r){return r.pop().toLowerCase()}}return""};var li=function e(t){var i=_.location;var r=si(t);var n=r.protocol===":"?i.protocol:r.protocol;var a=n+r.host!==i.protocol+i.host;return a};var ci=Object.freeze({parseUrl:si,getAbsoluteURL:oi,getFileExtension:ui,isCrossOrigin:li});var fi=hi;var di=Object.prototype.toString;function hi(e){var t=di.call(e);return t==="[object Function]"||typeof e==="function"&&t!=="[object RegExp]"||typeof window!=="undefined"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}var pi=Bt(function(e,t){t=e.exports=i;function i(e){return e.replace(/^\s*|\s*$/g,"")}t.left=function(e){return e.replace(/^\s*/,"")};t.right=function(e){return e.replace(/\s*$/,"")}});var mi=pi.left;var vi=pi.right;var gi=Function.prototype.toString;var yi=/^\s*class\b/;var _i=function e(t){try{var i=gi.call(t);return yi.test(i)}catch(e){return false}};var bi=function e(t){try{if(_i(t)){return false}gi.call(t);return true}catch(e){return false}};var Ti=Object.prototype.toString;var Si="[object Function]";var ki="[object GeneratorFunction]";var wi=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var Ci=function e(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(typeof t==="function"&&!t.prototype){return true}if(wi){return bi(t)}if(_i(t)){return false}var i=Ti.call(t);return i===Si||i===ki};var Ei=Object.prototype.toString;var Ai=Object.prototype.hasOwnProperty;var Li=function e(t,i,r){for(var n=0,a=t.length;n<a;n++){if(Ai.call(t,n)){if(r==null){i(t[n],n,t)}else{i.call(r,t[n],n,t)}}}};var Ii=function e(t,i,r){for(var n=0,a=t.length;n<a;n++){if(r==null){i(t.charAt(n),n,t)}else{i.call(r,t.charAt(n),n,t)}}};var Pi=function e(t,i,r){for(var n in t){if(Ai.call(t,n)){if(r==null){i(t[n],n,t)}else{i.call(r,t[n],n,t)}}}};var Oi=function e(t,i,r){if(!Ci(i)){throw new TypeError("iterator must be a function")}var n;if(arguments.length>=3){n=r}if(Ei.call(t)==="[object Array]"){Li(t,i,n)}else if(typeof t==="string"){Ii(t,i,n)}else{Pi(t,i,n)}};var Ui=Oi;var Di=function e(t){return Object.prototype.toString.call(t)==="[object Array]"};var xi=function e(t){if(!t)return{};var n={};Ui(pi(t).split("\n"),function(e){var t=e.indexOf(":"),i=pi(e.slice(0,t)).toLowerCase(),r=pi(e.slice(t+1));if(typeof n[i]==="undefined"){n[i]=r}else if(Di(n[i])){n[i].push(r)}else{n[i]=[n[i],r]}});return n};var Ri=Bi;var Mi=Object.prototype.hasOwnProperty;function Bi(){var e={};for(var t=0;t<arguments.length;t++){var i=arguments[t];for(var r in i){if(Mi.call(i,r)){e[r]=i[r]}}}return e}var Ni=Hi;Hi.XMLHttpRequest=_.XMLHttpRequest||Wi;Hi.XDomainRequest="withCredentials"in new Hi.XMLHttpRequest?Hi.XMLHttpRequest:_.XDomainRequest;ji(["get","put","post","patch","head","delete"],function(r){Hi[r==="delete"?"del":r]=function(e,t,i){t=Vi(e,t,i);t.method=r.toUpperCase();return qi(t)}});function ji(e,t){for(var i=0;i<e.length;i++){t(e[i])}}function Fi(e){for(var t in e){if(e.hasOwnProperty(t))return false}return true}function Vi(e,t,i){var r=e;if(fi(t)){i=t;if(typeof e==="string"){r={uri:e}}}else{r=Ri(t,{uri:e})}r.callback=i;return r}function Hi(e,t,i){t=Vi(e,t,i);return qi(t)}function qi(n){if(typeof n.callback==="undefined"){throw new Error("callback argument missing")}var a=false;var r=function e(t,i,r){if(!a){a=true;n.callback(t,i,r)}};function e(){if(o.readyState===4){setTimeout(i,0)}}function s(){var e=undefined;if(o.response){e=o.response}else{e=o.responseText||zi(o)}if(m){try{e=JSON.parse(e)}catch(e){}}return e}function t(e){clearTimeout(v);if(!(e instanceof Error)){e=new Error(""+(e||"Unknown XMLHttpRequest Error"))}e.statusCode=0;return r(e,g)}function i(){if(l)return;var e;clearTimeout(v);if(n.useXDR&&o.status===undefined){e=200}else{e=o.status===1223?204:o.status}var t=g;var i=null;if(e!==0){t={body:s(),statusCode:e,method:f,headers:{},url:c,rawRequest:o};if(o.getAllResponseHeaders){t.headers=xi(o.getAllResponseHeaders())}}else{i=new Error("Internal XMLHttpRequest Error")}return r(i,t,t.body)}var o=n.xhr||null;if(!o){if(n.cors||n.useXDR){o=new Hi.XDomainRequest}else{o=new Hi.XMLHttpRequest}}var u;var l;var c=o.url=n.uri||n.url;var f=o.method=n.method||"GET";var d=n.body||n.data;var h=o.headers=n.headers||{};var p=!!n.sync;var m=false;var v;var g={body:undefined,headers:{},statusCode:0,method:f,url:c,rawRequest:o};if("json"in n&&n.json!==false){m=true;h["accept"]||h["Accept"]||(h["Accept"]="application/json");if(f!=="GET"&&f!=="HEAD"){h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json");d=JSON.stringify(n.json===true?d:n.json)}}o.onreadystatechange=e;o.onload=i;o.onerror=t;o.onprogress=function(){};o.onabort=function(){l=true};o.ontimeout=t;o.open(f,c,!p,n.username,n.password);if(!p){o.withCredentials=!!n.withCredentials}if(!p&&n.timeout>0){v=setTimeout(function(){if(l)return;l=true;o.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT";t(e)},n.timeout)}if(o.setRequestHeader){for(u in h){if(h.hasOwnProperty(u)){o.setRequestHeader(u,h[u])}}}else if(n.headers&&!Fi(n.headers)){throw new Error("Headers cannot be set on an XDomainRequest object")}if("responseType"in n){o.responseType=n.responseType}if("beforeSend"in n&&typeof n.beforeSend==="function"){n.beforeSend(o)}o.send(d||null);return o}function zi(e){if(e.responseType==="document"){return e.responseXML}var t=e.responseXML&&e.responseXML.documentElement.nodeName==="parsererror";if(e.responseType===""&&!t){return e.responseXML}return null}function Wi(){}var Gi=function e(t,i){var r=new _.WebVTT.Parser(_,_.vttjs,_.WebVTT.StringDecoder());var n=[];r.oncue=function(e){i.addCue(e)};r.onparsingerror=function(e){n.push(e)};r.onflush=function(){i.trigger({type:"loadeddata",target:i})};r.parse(t);if(n.length>0){if(_.console&&_.console.groupCollapsed){_.console.groupCollapsed("Text Track parsing errors for "+i.src)}n.forEach(function(e){return m.error(e)});if(_.console&&_.console.groupEnd){_.console.groupEnd()}}r.flush()};var Xi=function e(t,a){var i={uri:t};var r=li(t);if(r){i.cors=r}Ni(i,Ae(this,function(e,t,i){if(e){return m.error(e,t)}a.loaded_=true;if(typeof _.WebVTT!=="function"){if(a.tech_){var r;var n=function e(){m.error("vttjs failed to load, stopping trying to process "+a.src);a.tech_.off("vttjsloaded",r)};r=function e(){a.tech_.off("vttjserror",n);return Gi(i,a)};a.tech_.one("vttjsloaded",r);a.tech_.one("vttjserror",n)}}else{Gi(i,a)}}))};var Yi=function(l){o(e,l);function e(e){var t;if(e===void 0){e={}}if(!e.tech){throw new Error("A tech was not provided.")}var i=Ge(e,{kind:ri[e.kind]||"subtitles",language:e.language||e.srclang||""});var r=ni[i.mode]||"disabled";var n=i.default;if(i.kind==="metadata"||i.kind==="chapters"){r="hidden"}t=l.call(this,i)||this;t.tech_=i.tech;t.cues_=[];t.activeCues_=[];var a=new ei(t.cues_);var o=new ei(t.activeCues_);var u=false;var s=Ae(h(h(t)),function(){this.activeCues=this.activeCues;if(u){this.trigger("cuechange");u=false}});if(r!=="disabled"){t.tech_.ready(function(){t.tech_.on("timeupdate",s)},true)}Object.defineProperties(h(h(t)),{default:{get:function e(){return n},set:function e(){}},mode:{get:function e(){return r},set:function e(t){var i=this;if(!ni[t]){return}r=t;if(r!=="disabled"){this.tech_.ready(function(){i.tech_.on("timeupdate",s)},true)}else{this.tech_.off("timeupdate",s)}this.trigger("modechange")}},cues:{get:function e(){if(!this.loaded_){return null}return a},set:function e(){}},activeCues:{get:function e(){if(!this.loaded_){return null}if(this.cues.length===0){return o}var t=this.tech_.currentTime();var i=[];for(var r=0,n=this.cues.length;r<n;r++){var a=this.cues[r];if(a.startTime<=t&&a.endTime>=t){i.push(a)}else if(a.startTime===a.endTime&&a.startTime<=t&&a.startTime+.5>=t){i.push(a)}}u=false;if(i.length!==this.activeCues_.length){u=true}else{for(var s=0;s<i.length;s++){if(this.activeCues_.indexOf(i[s])===-1){u=true}}}this.activeCues_=i;o.setCues_(this.activeCues_);return o},set:function e(){}}});if(i.src){t.src=i.src;Xi(i.src,h(h(t)))}else{t.loaded_=true}return t}var t=e.prototype;t.addCue=function e(t){var i=t;if(_.vttjs&&!(t instanceof _.vttjs.VTTCue)){i=new _.vttjs.VTTCue(t.startTime,t.endTime,t.text);for(var r in t){if(!(r in i)){i[r]=t[r]}}i.id=t.id;i.originalCue_=t}var n=this.tech_.textTracks();for(var a=0;a<n.length;a++){if(n[a]!==this){n[a].removeCue(i)}}this.cues_.push(i);this.cues.setCues_(this.cues_)};t.removeCue=function e(t){var i=this.cues_.length;while(i--){var r=this.cues_[i];if(r===t||r.originalCue_&&r.originalCue_===t){this.cues_.splice(i,1);this.cues.setCues_(this.cues_);break}}};return e}(ai);Yi.prototype.allowedEvents_={cuechange:"cuechange"};var Ki=function(n){o(e,n);function e(e){var t;if(e===void 0){e={}}var i=Ge(e,{kind:ii[e.kind]||""});t=n.call(this,i)||this;var r=false;Object.defineProperty(h(h(t)),"enabled",{get:function e(){return r},set:function e(t){if(typeof t!=="boolean"||t===r){return}r=t;this.trigger("enabledchange")}});if(i.enabled){t.enabled=i.enabled}t.loaded_=true;return t}return e}(ai);var $i=function(n){o(e,n);function e(e){var t;if(e===void 0){e={}}var i=Ge(e,{kind:ti[e.kind]||""});t=n.call(this,i)||this;var r=false;Object.defineProperty(h(h(t)),"selected",{get:function e(){return r},set:function e(t){if(typeof t!=="boolean"||t===r){return}r=t;this.trigger("selectedchange")}});if(i.selected){t.selected=i.selected}return t}return e}(ai);var Qi=0;var Ji=1;var Zi=2;var er=3;var tr=function(n){o(e,n);function e(e){var t;if(e===void 0){e={}}t=n.call(this)||this;var i;var r=new Yi(e);t.kind=r.kind;t.src=r.src;t.srclang=r.language;t.label=r.label;t.default=r.default;Object.defineProperties(h(h(t)),{readyState:{get:function e(){return i}},track:{get:function e(){return r}}});i=Qi;r.addEventListener("loadeddata",function(){i=Zi;t.trigger({type:"load",target:h(h(t))})});return t}return e}(Pe);tr.prototype.allowedEvents_={load:"load"};tr.NONE=Qi;tr.LOADING=Ji;tr.LOADED=Zi;tr.ERROR=er;var ir={audio:{ListClass:Kt,TrackClass:Ki,capitalName:"Audio"},video:{ListClass:Qt,TrackClass:$i,capitalName:"Video"},text:{ListClass:Jt,TrackClass:Yi,capitalName:"Text"}};Object.keys(ir).forEach(function(e){ir[e].getterName=e+"Tracks";ir[e].privateName=e+"Tracks_"});var rr={remoteText:{ListClass:Jt,TrackClass:Yi,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Zt,TrackClass:tr,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}};var nr=Ge(ir,rr);rr.names=Object.keys(rr);ir.names=Object.keys(ir);nr.names=[].concat(rr.names).concat(ir.names);var ar=Object.create||function(){function t(){}return function(e){if(arguments.length!==1){throw new Error("Object.create shim only accepts one parameter.")}t.prototype=e;return new t}}();function sr(e,t){this.name="ParsingError";this.code=e.code;this.message=t||e.message}sr.prototype=ar(Error.prototype);sr.prototype.constructor=sr;sr.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function or(e){function t(e,t,i,r){return(e|0)*3600+(t|0)*60+(i|0)+(r|0)/1e3}var i=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);if(!i){return null}if(i[3]){return t(i[1],i[2],i[3].replace(":",""),i[4])}else if(i[1]>59){return t(i[1],i[2],0,i[4])}else{return t(0,i[1],i[2],i[4])}}function ur(){this.values=ar(null)}ur.prototype={set:function e(t,i){if(!this.get(t)&&i!==""){this.values[t]=i}},get:function e(t,i,r){if(r){return this.has(t)?this.values[t]:i[r]}return this.has(t)?this.values[t]:i},has:function e(t){return t in this.values},alt:function e(t,i,r){for(var n=0;n<r.length;++n){if(i===r[n]){this.set(t,i);break}}},integer:function e(t,i){if(/^-?\d+$/.test(i)){this.set(t,parseInt(i,10))}},percent:function e(t,i){var r;if(r=i.match(/^([\d]{1,3})(\.[\d]*)?%$/)){i=parseFloat(i);if(i>=0&&i<=100){this.set(t,i);return true}}return false}};function lr(e,t,i,r){var n=r?e.split(r):[e];for(var a in n){if(typeof n[a]!=="string"){continue}var s=n[a].split(i);if(s.length!==2){continue}var o=s[0];var u=s[1];t(o,u)}}function cr(t,e,s){var i=t;function r(){var e=or(t);if(e===null){throw new sr(sr.Errors.BadTimeStamp,"Malformed timestamp: "+i)}t=t.replace(/^[^\sa-zA-Z-]+/,"");return e}function n(e,t){var a=new ur;lr(e,function(e,t){switch(e){case"region":for(var i=s.length-1;i>=0;i--){if(s[i].id===t){a.set(e,s[i].region);break}}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var r=t.split(","),n=r[0];a.integer(e,n);a.percent(e,n)?a.set("snapToLines",false):null;a.alt(e,n,["auto"]);if(r.length===2){a.alt("lineAlign",r[1],["start","middle","end"])}break;case"position":r=t.split(",");a.percent(e,r[0]);if(r.length===2){a.alt("positionAlign",r[1],["start","middle","end"])}break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start","middle","end","left","right"]);break}},/:/,/\s/);t.region=a.get("region",null);t.vertical=a.get("vertical","");t.line=a.get("line","auto");t.lineAlign=a.get("lineAlign","start");t.snapToLines=a.get("snapToLines",true);t.size=a.get("size",100);t.align=a.get("align","middle");t.position=a.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align);t.positionAlign=a.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}function a(){t=t.replace(/^\s+/,"")}a();e.startTime=r();a();if(t.substr(0,3)!=="--\x3e"){throw new sr(sr.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i)}t=t.substr(3);a();e.endTime=r();a();n(t,e)}var fr={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "};var dr={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"};var hr={v:"title",lang:"lang"};var pr={rt:"ruby"};function mr(a,i){function e(){if(!i){return null}function e(e){i=i.substr(e.length);return e}var t=i.match(/^([^<]*)(<[^>]*>?)?/);return e(t[1]?t[1]:t[2])}function t(e){return fr[e]}function r(e){while(h=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/)){e=e.replace(h[0],t)}return e}function n(e,t){return!pr[t.localName]||pr[t.localName]===e.localName}function s(e,t){var i=dr[e];if(!i){return null}var r=a.document.createElement(i);r.localName=i;var n=hr[e];if(n&&t){r[n]=t.trim()}return r}var o=a.document.createElement("div"),u=o,l,c=[];while((l=e())!==null){if(l[0]==="<"){if(l[1]==="/"){if(c.length&&c[c.length-1]===l.substr(2).replace(">","")){c.pop();u=u.parentNode}continue}var f=or(l.substr(1,l.length-2));var d;if(f){d=a.document.createProcessingInstruction("timestamp",f);u.appendChild(d);continue}var h=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h){continue}d=s(h[1],h[3]);if(!d){continue}if(!n(u,d)){continue}if(h[2]){d.className=h[2].substr(1).replace("."," ")}c.push(h[1]);u.appendChild(d);u=d;continue}u.appendChild(a.document.createTextNode(r(l)))}return o}var vr=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function gr(e){for(var t=0;t<vr.length;t++){var i=vr[t];if(e>=i[0]&&e<=i[1]){return true}}return false}function yr(e){var t=[],i="",r;if(!e||!e.childNodes){return"ltr"}function n(e,t){for(var i=t.childNodes.length-1;i>=0;i--){e.push(t.childNodes[i])}}function a(e){if(!e||!e.length){return null}var t=e.pop(),i=t.textContent||t.innerText;if(i){var r=i.match(/^.*(\n|\r)/);if(r){e.length=0;return r[0]}return i}if(t.tagName==="ruby"){return a(e)}if(t.childNodes){n(e,t);return a(e)}}n(t,e);while(i=a(t)){for(var s=0;s<i.length;s++){r=i.charCodeAt(s);if(gr(r)){return"rtl"}}}return"ltr"}function _r(e){if(typeof e.line==="number"&&(e.snapToLines||e.line>=0&&e.line<=100)){return e.line}if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement){return-1}var t=e.track,i=t.textTrackList,r=0;for(var n=0;n<i.length&&i[n]!==t;n++){if(i[n].mode==="showing"){r++}}return++r*-1}function br(){}br.prototype.applyStyles=function(e,t){t=t||this.div;for(var i in e){if(e.hasOwnProperty(i)){t.style[i]=e[i]}}};br.prototype.formatStyle=function(e,t){return e===0?0:e+t};function Tr(e,t,i){br.call(this);this.cue=t;this.cueDiv=mr(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv);this.div=e.document.createElement("div");r={direction:yr(this.cueDiv),writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:t.align==="middle"?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(r);this.div.appendChild(this.cueDiv);var n=0;switch(t.positionAlign){case"start":n=t.position;break;case"middle":n=t.position-t.size/2;break;case"end":n=t.position-t.size;break}if(t.vertical===""){this.applyStyles({left:this.formatStyle(n,"%"),width:this.formatStyle(t.size,"%")})}else{this.applyStyles({top:this.formatStyle(n,"%"),height:this.formatStyle(t.size,"%")})}this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}Tr.prototype=ar(br.prototype);Tr.prototype.constructor=Tr;function Sr(e){var t,i,r,n;if(e.div){i=e.div.offsetHeight;r=e.div.offsetWidth;n=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect();t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left;this.right=e.right;this.top=e.top||n;this.height=e.height||i;this.bottom=e.bottom||n+(e.height||i);this.width=e.width||r;this.lineHeight=t!==undefined?t:e.lineHeight}Sr.prototype.move=function(e,t){t=t!==undefined?t:this.lineHeight;switch(e){case"+x":this.left+=t;this.right+=t;break;case"-x":this.left-=t;this.right-=t;break;case"+y":this.top+=t;this.bottom+=t;break;case"-y":this.top-=t;this.bottom-=t;break}};Sr.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top};Sr.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++){if(this.overlaps(e[t])){return true}}return false};Sr.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right};Sr.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}};Sr.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),i=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),r=t*i;return r/(this.height*this.width)};Sr.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}};Sr.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0;var i=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0;var r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var n={left:e.left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||i};return n};function kr(e,t,o,u){function i(e,t){var i,r=new Sr(e),n=1;for(var a=0;a<t.length;a++){while(e.overlapsOppositeAxis(o,t[a])||e.within(o)&&e.overlapsAny(u)){e.move(t[a])}if(e.within(o)){return e}var s=e.intersectPercentage(o);if(n>s){i=new Sr(e);n=s}e=new Sr(r)}return i||r}var r=new Sr(t),n=t.cue,a=_r(n),s=[];if(n.snapToLines){var l;switch(n.vertical){case"":s=["+y","-y"];l="height";break;case"rl":s=["+x","-x"];l="width";break;case"lr":s=["-x","+x"];l="width";break}var c=r.lineHeight,f=c*Math.round(a),d=o[l]+c,h=s[0];if(Math.abs(f)>d){f=f<0?-1:1;f*=Math.ceil(d/c)*c}if(a<0){f+=n.vertical===""?o.height:o.width;s=s.reverse()}r.move(h,f)}else{var p=r.lineHeight/o.height*100;switch(n.lineAlign){case"middle":a-=p/2;break;case"end":a-=p;break}switch(n.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")});break}s=["+y","-x","+x","-y"];r=new Sr(t)}var m=i(r,s);t.move(m.toCSSCompatValues(o))}function wr(){}wr.StringDecoder=function(){return{decode:function e(t){if(!t){return""}if(typeof t!=="string"){throw new Error("Error - expected string data.")}return decodeURIComponent(encodeURIComponent(t))}}};wr.convertCueToDOMTree=function(e,t){if(!e||!t){return null}return mr(e,t)};var Cr=.05;var Er="sans-serif";var Ar="1.5%";wr.processCues=function(r,n,e){if(!r||!n||!e){return null}while(e.firstChild){e.removeChild(e.firstChild)}var a=r.document.createElement("div");a.style.position="absolute";a.style.left="0";a.style.right="0";a.style.top="0";a.style.bottom="0";a.style.margin=Ar;e.appendChild(a);function t(e){for(var t=0;t<e.length;t++){if(e[t].hasBeenReset||!e[t].displayState){return true}}return false}if(!t(n)){for(var i=0;i<n.length;i++){a.appendChild(n[i].displayState)}return}var s=[],o=Sr.getSimpleBoxPosition(a),u=Math.round(o.height*Cr*100)/100;var l={font:u+"px "+Er};(function(){var e,t;for(var i=0;i<n.length;i++){t=n[i];e=new Tr(r,t,l);a.appendChild(e.div);kr(r,e,o,s);t.displayState=e.div;s.push(Sr.getSimpleBoxPosition(e))}})()};wr.Parser=function(e,t,i){if(!i){i=t;t={}}if(!t){t={}}this.window=e;this.vttjs=t;this.state="INITIAL";this.buffer="";this.decoder=i||new TextDecoder("utf8");this.regionList=[]};wr.Parser.prototype={reportOrThrowError:function e(t){if(t instanceof sr){this.onparsingerror&&this.onparsingerror(t)}else{throw t}},parse:function e(t){var r=this;if(t){r.buffer+=r.decoder.decode(t,{stream:true})}function i(){var e=r.buffer;var t=0;while(t<e.length&&e[t]!=="\r"&&e[t]!=="\n"){++t}var i=e.substr(0,t);if(e[t]==="\r"){++t}if(e[t]==="\n"){++t}r.buffer=e.substr(t);return i}function n(e){var n=new ur;lr(e,function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(i.length!==2){break}var r=new ur;r.percent("x",i[0]);r.percent("y",i[1]);if(!r.has("x")||!r.has("y")){break}n.set(e+"X",r.get("x"));n.set(e+"Y",r.get("y"));break;case"scroll":n.alt(e,t,["up"]);break}},/=/,/\s/);if(n.has("id")){var t=new(r.vttjs.VTTRegion||r.window.VTTRegion);t.width=n.get("width",100);t.lines=n.get("lines",3);t.regionAnchorX=n.get("regionanchorX",0);t.regionAnchorY=n.get("regionanchorY",100);t.viewportAnchorX=n.get("viewportanchorX",0);t.viewportAnchorY=n.get("viewportanchorY",100);t.scroll=n.get("scroll","");r.onregion&&r.onregion(t);r.regionList.push({id:n.get("id"),region:t})}}function a(e){var i=new ur;lr(e,function(e,t){switch(e){case"MPEGT":i.integer(e+"S",t);break;case"LOCA":i.set(e+"L",or(t));break}},/[^\d]:/,/,/);r.ontimestampmap&&r.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")})}function s(e){if(e.match(/X-TIMESTAMP-MAP/)){lr(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":a(t);break}},/=/)}else{lr(e,function(e,t){switch(e){case"Region":n(t);break}},/:/)}}try{var o;if(r.state==="INITIAL"){if(!/\r\n|\n/.test(r.buffer)){return this}o=i();var u=o.match(/^WEBVTT([ \t].*)?$/);if(!u||!u[0]){throw new sr(sr.Errors.BadSignature)}r.state="HEADER"}var l=false;while(r.buffer){if(!/\r\n|\n/.test(r.buffer)){return this}if(!l){o=i()}else{l=false}switch(r.state){case"HEADER":if(/:/.test(o)){s(o)}else if(!o){r.state="ID"}continue;case"NOTE":if(!o){r.state="ID"}continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){r.state="NOTE";break}if(!o){continue}r.cue=new(r.vttjs.VTTCue||r.window.VTTCue)(0,0,"");r.state="CUE";if(o.indexOf("--\x3e")===-1){r.cue.id=o;continue}case"CUE":try{cr(o,r.cue,r.regionList)}catch(e){r.reportOrThrowError(e);r.cue=null;r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var c=o.indexOf("--\x3e")!==-1;if(!o||c&&(l=true)){r.oncue&&r.oncue(r.cue);r.cue=null;r.state="ID";continue}if(r.cue.text){r.cue.text+="\n"}r.cue.text+=o;continue;case"BADCUE":if(!o){r.state="ID"}continue}}}catch(e){r.reportOrThrowError(e);if(r.state==="CUETEXT"&&r.cue&&r.oncue){r.oncue(r.cue)}r.cue=null;r.state=r.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function e(){var t=this;try{t.buffer+=t.decoder.decode();if(t.cue||t.state==="HEADER"){t.buffer+="\n\n";t.parse()}if(t.state==="INITIAL"){throw new sr(sr.Errors.BadSignature)}}catch(e){t.reportOrThrowError(e)}t.onflush&&t.onflush();return this}};var Lr=wr;var Ir="auto";var Pr={"":1,lr:1,rl:1};var Or={start:1,middle:1,end:1,left:1,right:1};function Ur(e){if(typeof e!=="string"){return false}var t=Pr[e.toLowerCase()];return t?e.toLowerCase():false}function Dr(e){if(typeof e!=="string"){return false}var t=Or[e.toLowerCase()];return t?e.toLowerCase():false}function xr(e,t,i){this.hasBeenReset=false;var r="";var n=false;var a=e;var s=t;var o=i;var u=null;var l="";var c=true;var f="auto";var d="start";var h=50;var p="middle";var m=50;var v="middle";Object.defineProperties(this,{id:{enumerable:true,get:function e(){return r},set:function e(t){r=""+t}},pauseOnExit:{enumerable:true,get:function e(){return n},set:function e(t){n=!!t}},startTime:{enumerable:true,get:function e(){return a},set:function e(t){if(typeof t!=="number"){throw new TypeError("Start time must be set to a number.")}a=t;this.hasBeenReset=true}},endTime:{enumerable:true,get:function e(){return s},set:function e(t){if(typeof t!=="number"){throw new TypeError("End time must be set to a number.")}s=t;this.hasBeenReset=true}},text:{enumerable:true,get:function e(){return o},set:function e(t){o=""+t;this.hasBeenReset=true}},region:{enumerable:true,get:function e(){return u},set:function e(t){u=t;this.hasBeenReset=true}},vertical:{enumerable:true,get:function e(){return l},set:function e(t){var i=Ur(t);if(i===false){throw new SyntaxError("An invalid or illegal string was specified.")}l=i;this.hasBeenReset=true}},snapToLines:{enumerable:true,get:function e(){return c},set:function e(t){c=!!t;this.hasBeenReset=true}},line:{enumerable:true,get:function e(){return f},set:function e(t){if(typeof t!=="number"&&t!==Ir){throw new SyntaxError("An invalid number or illegal string was specified.")}f=t;this.hasBeenReset=true}},lineAlign:{enumerable:true,get:function e(){return d},set:function e(t){var i=Dr(t);if(!i){throw new SyntaxError("An invalid or illegal string was specified.")}d=i;this.hasBeenReset=true}},position:{enumerable:true,get:function e(){return h},set:function e(t){if(t<0||t>100){throw new Error("Position must be between 0 and 100.")}h=t;this.hasBeenReset=true}},positionAlign:{enumerable:true,get:function e(){return p},set:function e(t){var i=Dr(t);if(!i){throw new SyntaxError("An invalid or illegal string was specified.")}p=i;this.hasBeenReset=true}},size:{enumerable:true,get:function e(){return m},set:function e(t){if(t<0||t>100){throw new Error("Size must be between 0 and 100.")}m=t;this.hasBeenReset=true}},align:{enumerable:true,get:function e(){return v},set:function e(t){var i=Dr(t);if(!i){throw new SyntaxError("An invalid or illegal string was specified.")}v=i;this.hasBeenReset=true}}});this.displayState=undefined}xr.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Rr=xr;var Mr={"":true,up:true};function Br(e){if(typeof e!=="string"){return false}var t=Mr[e.toLowerCase()];return t?e.toLowerCase():false}function Nr(e){return typeof e==="number"&&e>=0&&e<=100}function jr(){var i=100;var r=3;var n=0;var a=100;var s=0;var o=100;var u="";Object.defineProperties(this,{width:{enumerable:true,get:function e(){return i},set:function e(t){if(!Nr(t)){throw new Error("Width must be between 0 and 100.")}i=t}},lines:{enumerable:true,get:function e(){return r},set:function e(t){if(typeof t!=="number"){throw new TypeError("Lines must be set to a number.")}r=t}},regionAnchorY:{enumerable:true,get:function e(){return a},set:function e(t){if(!Nr(t)){throw new Error("RegionAnchorX must be between 0 and 100.")}a=t}},regionAnchorX:{enumerable:true,get:function e(){return n},set:function e(t){if(!Nr(t)){throw new Error("RegionAnchorY must be between 0 and 100.")}n=t}},viewportAnchorY:{enumerable:true,get:function e(){return o},set:function e(t){if(!Nr(t)){throw new Error("ViewportAnchorY must be between 0 and 100.")}o=t}},viewportAnchorX:{enumerable:true,get:function e(){return s},set:function e(t){if(!Nr(t)){throw new Error("ViewportAnchorX must be between 0 and 100.")}s=t}},scroll:{enumerable:true,get:function e(){return u},set:function e(t){var i=Br(t);if(i===false){throw new SyntaxError("An invalid or illegal string was specified.")}u=i}}})}var Fr=jr;var Vr=Bt(function(e){var t=e.exports={WebVTT:Lr,VTTCue:Rr,VTTRegion:Fr};_.vttjs=t;_.WebVTT=t.WebVTT;var i=t.VTTCue;var r=t.VTTRegion;var n=_.VTTCue;var a=_.VTTRegion;t.shim=function(){_.VTTCue=i;_.VTTRegion=r};t.restore=function(){_.VTTCue=n;_.VTTRegion=a};if(!_.VTTCue){t.shim()}});var Hr=Vr.WebVTT;var qr=Vr.VTTCue;var zr=Vr.VTTRegion;function Wr(e,t,i,r,n){if(n===void 0){n={}}var a=e.textTracks();n.kind=t;if(i){n.label=i}if(r){n.language=r}n.tech=e;var s=new nr.text.TrackClass(n);a.addTrack(s);return s}var Gr=function(t){o(r,t);function r(i,e){var r;if(i===void 0){i={}}if(e===void 0){e=function e(){}}i.reportTouchActivity=false;r=t.call(this,null,i,e)||this;r.hasStarted_=false;r.on("playing",function(){this.hasStarted_=true});r.on("loadstart",function(){this.hasStarted_=false});nr.names.forEach(function(e){var t=nr[e];if(i&&i[t.getterName]){r[t.privateName]=i[t.getterName]}});if(!r.featuresProgressEvents){r.manualProgressOn()}if(!r.featuresTimeupdateEvents){r.manualTimeUpdatesOn()}["Text","Audio","Video"].forEach(function(e){if(i["native"+e+"Tracks"]===false){r["featuresNative"+e+"Tracks"]=false}});if(i.nativeCaptions===false||i.nativeTextTracks===false){r.featuresNativeTextTracks=false}else if(i.nativeCaptions===true||i.nativeTextTracks===true){r.featuresNativeTextTracks=true}if(!r.featuresNativeTextTracks){r.emulateTextTracks()}r.autoRemoteTextTracks_=new nr.text.ListClass;r.initTrackListeners();if(!i.nativeControlsForTouch){r.emitTapEvents()}if(r.constructor){r.name_=r.constructor.name||"Unknown Tech"}return r}var e=r.prototype;e.triggerSourceset=function e(t){var i=this;if(!this.isReady_){this.one("ready",function(){return i.setTimeout(function(){return i.triggerSourceset(t)},1)})}this.trigger({src:t,type:"sourceset"})};e.manualProgressOn=function e(){this.on("durationchange",this.onDurationChange);this.manualProgress=true;this.one("ready",this.trackProgress)};e.manualProgressOff=function e(){this.manualProgress=false;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};e.trackProgress=function e(t){this.stopTrackingProgress();this.progressInterval=this.setInterval(Ae(this,function(){var e=this.bufferedPercent();if(this.bufferedPercent_!==e){this.trigger("progress")}this.bufferedPercent_=e;if(e===1){this.stopTrackingProgress()}}),500)};e.onDurationChange=function e(t){this.duration_=this.duration()};e.buffered=function e(){return gt(0,0)};e.bufferedPercent=function e(){return yt(this.buffered(),this.duration_)};e.stopTrackingProgress=function e(){this.clearInterval(this.progressInterval)};e.manualTimeUpdatesOn=function e(){this.manualTimeUpdates=true;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};e.manualTimeUpdatesOff=function e(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};e.trackCurrentTime=function e(){if(this.currentTimeInterval){this.stopTrackingCurrentTime()}this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})},250)};e.stopTrackingCurrentTime=function e(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})};e.dispose=function e(){this.clearTracks(ir.names);if(this.manualProgress){this.manualProgressOff()}if(this.manualTimeUpdates){this.manualTimeUpdatesOff()}t.prototype.dispose.call(this)};e.clearTracks=function e(t){var n=this;t=[].concat(t);t.forEach(function(e){var t=n[e+"Tracks"]()||[];var i=t.length;while(i--){var r=t[i];if(e==="text"){n.removeRemoteTextTrack(r)}t.removeTrack(r)}})};e.cleanupAutoTextTracks=function e(){var t=this.autoRemoteTextTracks_||[];var i=t.length;while(i--){var r=t[i];this.removeRemoteTextTrack(r)}};e.reset=function e(){};e.error=function e(t){if(t!==undefined){this.error_=new Et(t);this.trigger("error")}return this.error_};e.played=function e(){if(this.hasStarted_){return gt(0,0)}return gt()};e.setCurrentTime=function e(){if(this.manualTimeUpdates){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})}};e.initTrackListeners=function e(){var n=this;ir.names.forEach(function(t){var e=ir[t];var i=function e(){n.trigger(t+"trackchange")};var r=n[e.getterName]();r.addEventListener("removetrack",i);r.addEventListener("addtrack",i);n.on("dispose",function(){r.removeEventListener("removetrack",i);r.removeEventListener("addtrack",i)})})};e.addWebVttScript_=function e(){var t=this;if(_.WebVTT){return}if(d.body.contains(this.el())){if(!this.options_["vtt.js"]&&S(Vr)&&Object.keys(Vr).length>0){this.trigger("vttjsloaded");return}var i=d.createElement("script");i.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";i.onload=function(){t.trigger("vttjsloaded")};i.onerror=function(){t.trigger("vttjserror")};this.on("dispose",function(){i.onload=null;i.onerror=null});_.WebVTT=true;this.el().parentNode.appendChild(i)}else{this.ready(this.addWebVttScript_)}};e.emulateTextTracks=function e(){var t=this;var r=this.textTracks();var i=this.remoteTextTracks();var n=function e(t){return r.addTrack(t.track)};var a=function e(t){return r.removeTrack(t.track)};i.on("addtrack",n);i.on("removetrack",a);this.addWebVttScript_();var s=function e(){return t.trigger("texttrackchange")};var o=function e(){s();for(var t=0;t<r.length;t++){var i=r[t];i.removeEventListener("cuechange",s);if(i.mode==="showing"){i.addEventListener("cuechange",s)}}};o();r.addEventListener("change",o);r.addEventListener("addtrack",o);r.addEventListener("removetrack",o);this.on("dispose",function(){i.off("addtrack",n);i.off("removetrack",a);r.removeEventListener("change",o);r.removeEventListener("addtrack",o);r.removeEventListener("removetrack",o);for(var e=0;e<r.length;e++){var t=r[e];t.removeEventListener("cuechange",s)}})};e.addTextTrack=function e(t,i,r){if(!t){throw new Error("TextTrack kind is required but was not provided")}return Wr(this,t,i,r)};e.createRemoteTextTrack=function e(t){var i=Ge(t,{tech:this});return new rr.remoteTextEl.TrackClass(i)};e.addRemoteTextTrack=function e(t,i){var r=this;if(t===void 0){t={}}var n=this.createRemoteTextTrack(t);if(i!==true&&i!==false){m.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js');i=true}this.remoteTextTrackEls().addTrackElement_(n);this.remoteTextTracks().addTrack(n.track);if(i!==true){this.ready(function(){return r.autoRemoteTextTracks_.addTrack(n.track)})}return n};e.removeRemoteTextTrack=function e(t){var i=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(i);this.remoteTextTracks().removeTrack(t);this.autoRemoteTextTracks_.removeTrack(t)};e.getVideoPlaybackQuality=function e(){return{}};e.setPoster=function e(){};e.playsinline=function e(){};e.setPlaysinline=function e(){};e.overrideNativeAudioTracks=function e(){};e.overrideNativeVideoTracks=function e(){};e.canPlayType=function e(){return""};r.canPlayType=function e(){return""};r.canPlaySource=function e(t,i){return r.canPlayType(t.type)};r.isTech=function e(t){return t.prototype instanceof r||t instanceof r||t===r};r.registerTech=function e(t,i){if(!r.techs_){r.techs_={}}if(!r.isTech(i)){throw new Error("Tech "+t+" must be a Tech")}if(!r.canPlayType){throw new Error("Techs must have a static canPlayType method on them")}if(!r.canPlaySource){throw new Error("Techs must have a static canPlaySource method on them")}t=ze(t);r.techs_[t]=i;if(t!=="Tech"){r.defaultTechOrder_.push(t)}return i};r.getTech=function e(t){if(!t){return}t=ze(t);if(r.techs_&&r.techs_[t]){return r.techs_[t]}if(_&&_.videojs&&_.videojs[t]){m.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)");return _.videojs[t]}};return r}(Xe);nr.names.forEach(function(e){var t=nr[e];Gr.prototype[t.getterName]=function(){this[t.privateName]=this[t.privateName]||new t.ListClass;return this[t.privateName]}});Gr.prototype.featuresVolumeControl=true;Gr.prototype.featuresMuteControl=true;Gr.prototype.featuresFullscreenResize=false;Gr.prototype.featuresPlaybackRate=false;Gr.prototype.featuresProgressEvents=false;Gr.prototype.featuresSourceset=false;Gr.prototype.featuresTimeupdateEvents=false;Gr.prototype.featuresNativeTextTracks=false;Gr.withSourceHandlers=function(a){a.registerSourceHandler=function(e,t){var i=a.sourceHandlers;if(!i){i=a.sourceHandlers=[]}if(t===undefined){t=i.length}i.splice(t,0,e)};a.canPlayType=function(e){var t=a.sourceHandlers||[];var i;for(var r=0;r<t.length;r++){i=t[r].canPlayType(e);if(i){return i}}return""};a.selectSourceHandler=function(e,t){var i=a.sourceHandlers||[];var r;for(var n=0;n<i.length;n++){r=i[n].canHandleSource(e,t);if(r){return i[n]}}return null};a.canPlaySource=function(e,t){var i=a.selectSourceHandler(e,t);if(i){return i.canHandleSource(e,t)}return""};var e=["seekable","seeking","duration"];e.forEach(function(e){var t=this[e];if(typeof t!=="function"){return}this[e]=function(){if(this.sourceHandler_&&this.sourceHandler_[e]){return this.sourceHandler_[e].apply(this.sourceHandler_,arguments)}return t.apply(this,arguments)}},a.prototype);a.prototype.setSource=function(e){var t=a.selectSourceHandler(e,this.options_);if(!t){if(a.nativeSourceHandler){t=a.nativeSourceHandler}else{m.error("No source handler found for the current source.")}}this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);if(t!==a.nativeSourceHandler){this.currentSource_=e}this.sourceHandler_=t.handleSource(e,this,this.options_);this.one("dispose",this.disposeSourceHandler)};a.prototype.disposeSourceHandler=function(){if(this.currentSource_){this.clearTracks(["audio","video"]);this.currentSource_=null}this.cleanupAutoTextTracks();if(this.sourceHandler_){if(this.sourceHandler_.dispose){this.sourceHandler_.dispose()}this.sourceHandler_=null}}};Xe.registerComponent("Tech",Gr);Gr.registerTech("Tech",Gr);Gr.defaultTechOrder_=[];var Xr={};var Yr={};var Kr={};function $r(e,t){Xr[e]=Xr[e]||[];Xr[e].push(t)}function Qr(e,t,i){e.setTimeout(function(){return cn(t,Xr[t.type],i,e)},1)}function Jr(e,t){e.forEach(function(e){return e.setTech&&e.setTech(t)})}function Zr(e,t,i){return e.reduceRight(sn(i),t[i]())}function en(e,t,i,r){return t[i](e.reduce(sn(i),r))}function tn(e,t,i,r){if(r===void 0){r=null}var n="call"+ze(i);var a=e.reduce(sn(n),r);var s=a===Kr;var o=s?null:t[i](a);on(e,i,o,s);return o}var rn={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1};var nn={setCurrentTime:1};var an={play:1,pause:1};function sn(i){return function(e,t){if(e===Kr){return Kr}if(t[i]){return t[i](e)}return e}}function on(e,t,i,r){for(var n=e.length-1;n>=0;n--){var a=e[n];if(a[t]){a[t](r,i)}}}function un(e){Yr[e.id()]=null}function ln(e,t){var i=Yr[e.id()];var r=null;if(i===undefined||i===null){r=t(e);Yr[e.id()]=[[t,r]];return r}for(var n=0;n<i.length;n++){var a=i[n],s=a[0],o=a[1];if(s!==t){continue}r=o}if(r===null){r=t(e);i.push([t,r])}return r}function cn(i,e,r,n,a,s){if(i===void 0){i={}}if(e===void 0){e=[]}if(a===void 0){a=[]}if(s===void 0){s=false}var t=e,o=t[0],u=t.slice(1);if(typeof o==="string"){cn(i,Xr[o],r,n,a,s)}else if(o){var l=ln(n,o);if(!l.setSource){a.push(l);return cn(i,u,r,n,a,s)}l.setSource(b({},i),function(e,t){if(e){return cn(i,u,r,n,a,s)}a.push(l);cn(t,i.type===t.type?u:Xr[t.type],r,n,a,s)})}else if(u.length){cn(i,u,r,n,a,s)}else if(s){r(i,a)}else{cn(i,Xr["*"],r,n,a,true)}}var fn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};var dn=function e(t){if(t===void 0){t=""}var i=ui(t);var r=fn[i.toLowerCase()];return r||""};var hn=function e(t,i){if(!i){return""}if(t.cache_.source.src===i&&t.cache_.source.type){return t.cache_.source.type}var r=t.cache_.sources.filter(function(e){return e.src===i});if(r.length){return r[0].type}var n=t.$$("source");for(var a=0;a<n.length;a++){var s=n[a];if(s.type&&s.src&&s.src===i){return s.type}}return dn(i)};var pn=function t(e){if(Array.isArray(e)){var i=[];e.forEach(function(e){e=t(e);if(Array.isArray(e)){i=i.concat(e)}else if(T(e)){i.push(e)}});e=i}else if(typeof e==="string"&&e.trim()){e=[mn({src:e})]}else if(T(e)&&typeof e.src==="string"&&e.src&&e.src.trim()){e=[mn(e)]}else{e=[]}return e};function mn(e){var t=dn(e.src);if(!e.type&&t){e.type=t}return e}var vn=function(l){o(e,l);function e(e,t,i){var r;var n=Ge({createEl:false},t);r=l.call(this,e,n,i)||this;if(!t.playerOptions.sources||t.playerOptions.sources.length===0){for(var a=0,s=t.playerOptions.techOrder;a<s.length;a++){var o=ze(s[a]);var u=Gr.getTech(o);if(!o){u=Xe.getComponent(o)}if(u&&u.isSupported()){e.loadTech_(o);break}}}else{e.src(t.playerOptions.sources)}return r}return e}(Xe);Xe.registerComponent("MediaLoader",vn);var gn=function(a){o(e,a);function e(e,t){var i;i=a.call(this,e,t)||this;i.emitTapEvents();i.enable();return i}var t=e.prototype;t.createEl=function e(t,i,r){if(t===void 0){t="div"}if(i===void 0){i={}}if(r===void 0){r={}}i=b({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},i);if(t==="button"){m.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead.")}r=b({role:"button"},r);this.tabIndex_=i.tabIndex;var n=a.prototype.createEl.call(this,t,i,r);this.createControlTextEl(n);return n};t.dispose=function e(){this.controlTextEl_=null;a.prototype.dispose.call(this)};t.createControlTextEl=function e(t){this.controlTextEl_=U("span",{className:"vjs-control-text"},{"aria-live":"polite"});if(t){t.appendChild(this.controlTextEl_)}this.controlText(this.controlText_,t);return this.controlTextEl_};t.controlText=function e(t,i){if(i===void 0){i=this.el()}if(t===undefined){return this.controlText_||"Need Text"}var r=this.localize(t);this.controlText_=t;D(this.controlTextEl_,r);if(!this.nonIconControl){i.setAttribute("title",r)}};t.buildCSSClass=function e(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)};t.enable=function e(){if(!this.enabled_){this.enabled_=true;this.removeClass("vjs-disabled");this.el_.setAttribute("aria-disabled","false");if(typeof this.tabIndex_!=="undefined"){this.el_.setAttribute("tabIndex",this.tabIndex_)}this.on(["tap","click"],this.handleClick);this.on("focus",this.handleFocus);this.on("blur",this.handleBlur)}};t.disable=function e(){this.enabled_=false;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");if(typeof this.tabIndex_!=="undefined"){this.el_.removeAttribute("tabIndex")}this.off(["tap","click"],this.handleClick);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur)};t.handleClick=function e(t){};t.handleFocus=function e(t){ve(d,"keydown",Ae(this,this.handleKeyPress))};t.handleKeyPress=function e(t){if(Nt.isEventKey(t,"Space")||Nt.isEventKey(t,"Enter")){t.preventDefault();this.trigger("click")}else{a.prototype.handleKeyPress.call(this,t)}};t.handleBlur=function e(t){ge(d,"keydown",Ae(this,this.handleKeyPress))};return e}(Xe);Xe.registerComponent("ClickableComponent",gn);var yn=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.update();e.on("posterchange",Ae(h(h(i)),i.update));return i}var t=e.prototype;t.dispose=function e(){this.player().off("posterchange",this.update);r.prototype.dispose.call(this)};t.createEl=function e(){var t=U("div",{className:"vjs-poster",tabIndex:-1});return t};t.update=function e(t){var i=this.player().poster();this.setSrc(i);if(i){this.show()}else{this.hide()}};t.setSrc=function e(t){var i="";if(t){i='url("'+t+'")'}this.el_.style.backgroundImage=i};t.handleClick=function e(t){if(!this.player_.controls()){return}if(this.player_.paused()){Ot(this.player_.play())}else{this.player_.pause()}this.player_.handleFocus({})};return e}(gn);Xe.registerComponent("PosterImage",yn);var _n="#222";var bn="#ccc";var Tn={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Sn(e,t){var i;if(e.length===4){i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]}else if(e.length===7){i=e.slice(1)}else{throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.")}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function kn(e,t,i){try{e.style[t]=i}catch(e){return}}var wn=function(a){o(e,a);function e(i,e,t){var r;r=a.call(this,i,e,t)||this;var n=Ae(h(h(r)),r.updateDisplay);i.on("loadstart",Ae(h(h(r)),r.toggleDisplay));i.on("texttrackchange",n);i.on("loadedmetadata",Ae(h(h(r)),r.preselectTrack));i.ready(Ae(h(h(r)),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks){this.hide();return}i.on("fullscreenchange",n);i.on("playerresize",n);_.addEventListener("orientationchange",n);i.on("dispose",function(){return _.removeEventListener("orientationchange",n)});var e=this.options_.playerOptions.tracks||[];for(var t=0;t<e.length;t++){this.player_.addRemoteTextTrack(e[t],true)}this.preselectTrack()}));return r}var t=e.prototype;t.preselectTrack=function e(){var t={captions:1,subtitles:1};var i=this.player_.textTracks();var r=this.player_.cache_.selectedLanguage;var n;var a;var s;for(var o=0;o<i.length;o++){var u=i[o];if(r&&r.enabled&&r.language&&r.language===u.language&&u.kind in t){if(u.kind===r.kind){s=u}else if(!s){s=u}}else if(r&&!r.enabled){s=null;n=null;a=null}else if(u.default){if(u.kind==="descriptions"&&!n){n=u}else if(u.kind in t&&!a){a=u}}}if(s){s.mode="showing"}else if(a){a.mode="showing"}else if(n){n.mode="showing"}};t.toggleDisplay=function e(){if(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks){this.hide()}else{this.show()}};t.createEl=function e(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};t.clearDisplay=function e(){if(typeof _.WebVTT==="function"){_.WebVTT.processCues(_,[],this.el_)}};t.updateDisplay=function e(){var t=this.player_.textTracks();this.clearDisplay();var i=null;var r=null;var n=t.length;while(n--){var a=t[n];if(a.mode==="showing"){if(a.kind==="descriptions"){i=a}else{r=a}}}if(r){if(this.getAttribute("aria-live")!=="off"){this.setAttribute("aria-live","off")}this.updateForTrack(r)}else if(i){if(this.getAttribute("aria-live")!=="assertive"){this.setAttribute("aria-live","assertive")}this.updateForTrack(i)}};t.updateForTrack=function e(t){if(typeof _.WebVTT!=="function"||!t.activeCues){return}var i=[];for(var r=0;r<t.activeCues.length;r++){i.push(t.activeCues[r])}_.WebVTT.processCues(_,i,this.el_);if(!this.player_.textTrackSettings){return}var n=this.player_.textTrackSettings.getValues();var a=i.length;while(a--){var s=i[a];if(!s){continue}var o=s.displayState;if(n.color){o.firstChild.style.color=n.color}if(n.textOpacity){kn(o.firstChild,"color",Sn(n.color||"#fff",n.textOpacity))}if(n.backgroundColor){o.firstChild.style.backgroundColor=n.backgroundColor}if(n.backgroundOpacity){kn(o.firstChild,"backgroundColor",Sn(n.backgroundColor||"#000",n.backgroundOpacity))}if(n.windowColor){if(n.windowOpacity){kn(o,"backgroundColor",Sn(n.windowColor,n.windowOpacity))}else{o.style.backgroundColor=n.windowColor}}if(n.edgeStyle){if(n.edgeStyle==="dropshadow"){o.firstChild.style.textShadow="2px 2px 3px "+_n+", 2px 2px 4px "+_n+", 2px 2px 5px "+_n}else if(n.edgeStyle==="raised"){o.firstChild.style.textShadow="1px 1px "+_n+", 2px 2px "+_n+", 3px 3px "+_n}else if(n.edgeStyle==="depressed"){o.firstChild.style.textShadow="1px 1px "+bn+", 0 1px "+bn+", -1px -1px "+_n+", 0 -1px "+_n}else if(n.edgeStyle==="uniform"){o.firstChild.style.textShadow="0 0 4px "+_n+", 0 0 4px "+_n+", 0 0 4px "+_n+", 0 0 4px "+_n}}if(n.fontPercent&&n.fontPercent!==1){var u=_.parseFloat(o.style.fontSize);o.style.fontSize=u*n.fontPercent+"px";o.style.height="auto";o.style.top="auto";o.style.bottom="2px"}if(n.fontFamily&&n.fontFamily!=="default"){if(n.fontFamily==="small-caps"){o.firstChild.style.fontVariant="small-caps"}else{o.firstChild.style.fontFamily=Tn[n.fontFamily]}}}};return e}(Xe);Xe.registerComponent("TextTrackDisplay",wn);var Cn=function(a){o(e,a);function e(){return a.apply(this,arguments)||this}var t=e.prototype;t.createEl=function e(){var t=this.player_.isAudio();var i=this.localize(t?"Audio Player":"Video Player");var r=U("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[i])});var n=a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});n.appendChild(r);return n};return e}(Xe);Xe.registerComponent("LoadingSpinner",Cn);var En=function(i){o(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;t.createEl=function e(t,i,r){if(i===void 0){i={}}if(r===void 0){r={}}t="button";i=b({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},i);r=b({type:"button"},r);var n=Xe.prototype.createEl.call(this,t,i,r);this.createControlTextEl(n);return n};t.addChild=function e(t,i){if(i===void 0){i={}}var r=this.constructor.name;m.warn("Adding an actionable (user controllable) child to a Button ("+r+") is not supported; use a ClickableComponent instead.");return Xe.prototype.addChild.call(this,t,i)};t.enable=function e(){i.prototype.enable.call(this);this.el_.removeAttribute("disabled")};t.disable=function e(){i.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};t.handleKeyPress=function e(t){if(!(Nt.isEventKey(t,"Space")||Nt.isEventKey(t,"Enter"))){i.prototype.handleKeyPress.call(this,t)}};return e}(gn);Xe.registerComponent("Button",En);var An=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.mouseused_=false;i.on("mousedown",i.handleMouseDown);return i}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-big-play-button"};t.handleClick=function e(t){var i=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){Ot(i);this.player_.handleFocus({});return}var r=this.player_.getChild("controlBar");var n=r&&r.getChild("playToggle");if(!n){this.player_.focus();return}var a=function e(){return n.focus()};if(Pt(i)){i.then(a,function(){})}else{this.setTimeout(a,1)}};t.handleKeyPress=function e(t){this.mouseused_=false;r.prototype.handleKeyPress.call(this,t)};t.handleMouseDown=function e(t){this.mouseused_=true};return e}(En);An.prototype.controlText_="Play Video";Xe.registerComponent("BigPlayButton",An);var Ln=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.controlText(t&&t.controlText||i.localize("Close"));return i}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-close-button "+r.prototype.buildCSSClass.call(this)};t.handleKeyPress=function e(t){};t.handleClick=function e(t){this.trigger({type:"close",bubbles:false})};return e}(En);Xe.registerComponent("CloseButton",Ln);var In=function(r){o(e,r);function e(e,t){var i;if(t===void 0){t={}}i=r.call(this,e,t)||this;t.replay=t.replay===undefined||t.replay;i.on(e,"play",i.handlePlay);i.on(e,"pause",i.handlePause);if(t.replay){i.on(e,"ended",i.handleEnded)}return i}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-play-control "+r.prototype.buildCSSClass.call(this)};t.handleClick=function e(t){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};t.handleSeeked=function e(t){this.removeClass("vjs-ended");if(this.player_.paused()){this.handlePause(t)}else{this.handlePlay(t)}};t.handlePlay=function e(t){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};t.handlePause=function e(t){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};t.handleEnded=function e(t){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return e}(En);In.prototype.controlText_="Play";Xe.registerComponent("PlayToggle",In);var Pn=function e(t,i){t=t<0?0:t;var r=Math.floor(t%60);var n=Math.floor(t/60%60);var a=Math.floor(t/3600);var s=Math.floor(i/60%60);var o=Math.floor(i/3600);if(isNaN(t)||t===Infinity){a=n=r="-"}a=a>0||o>0?a+":":"";n=((a||s>=10)&&n<10?"0"+n:n)+":";r=r<10?"0"+r:r;return a+n+r};var On=Pn;function Un(e){On=e}function Dn(){On=Pn}function xn(e,t){if(t===void 0){t=e}return On(e,t)}var Rn=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.throttledUpdateContent=Le(Ae(h(h(i)),i.updateContent),25);i.on(e,"timeupdate",i.throttledUpdateContent);return i}var t=e.prototype;t.createEl=function e(){var t=this.buildCSSClass();var i=r.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});this.contentEl_=U("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"});this.updateTextNode_();i.appendChild(this.contentEl_);return i};t.dispose=function e(){this.contentEl_=null;this.textNode_=null;r.prototype.dispose.call(this)};t.updateTextNode_=function e(){if(!this.contentEl_){return}while(this.contentEl_.firstChild){this.contentEl_.removeChild(this.contentEl_.firstChild)}this.textNode_=d.createTextNode(this.formattedTime_||this.formatTime_(0));this.contentEl_.appendChild(this.textNode_)};t.formatTime_=function e(t){return xn(t)};t.updateFormattedTime_=function e(t){var i=this.formatTime_(t);if(i===this.formattedTime_){return}this.formattedTime_=i;this.requestAnimationFrame(this.updateTextNode_)};t.updateContent=function e(t){};return e}(Xe);Rn.prototype.labelText_="Time";Rn.prototype.controlText_="Time";Xe.registerComponent("TimeDisplay",Rn);var Mn=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.on(e,"ended",i.handleEnded);return i}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-current-time"};t.updateContent=function e(t){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(i)};t.handleEnded=function e(t){if(!this.player_.duration()){return}this.updateFormattedTime_(this.player_.duration())};return e}(Rn);Mn.prototype.labelText_="Current Time";Mn.prototype.controlText_="Current Time";Xe.registerComponent("CurrentTimeDisplay",Mn);var Bn=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.on(e,"durationchange",i.updateContent);i.on(e,"loadstart",i.updateContent);i.on(e,"loadedmetadata",i.throttledUpdateContent);return i}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-duration"};t.updateContent=function e(t){var i=this.player_.duration();if(this.duration_!==i){this.duration_=i;this.updateFormattedTime_(i)}};return e}(Rn);Bn.prototype.labelText_="Duration";Bn.prototype.controlText_="Duration";Xe.registerComponent("DurationDisplay",Bn);var Nn=function(t){o(e,t);function e(){return t.apply(this,arguments)||this}var i=e.prototype;i.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":true})};return e}(Xe);Xe.registerComponent("TimeDivider",Nn);var jn=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.on(e,"durationchange",i.throttledUpdateContent);i.on(e,"ended",i.handleEnded);return i}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-remaining-time"};t.createEl=function e(){var t=r.prototype.createEl.call(this);t.insertBefore(U("span",{},{"aria-hidden":true},"-"),this.contentEl_);return t};t.updateContent=function e(t){if(typeof this.player_.duration()!=="number"){return}if(this.player_.remainingTimeDisplay){this.updateFormattedTime_(this.player_.remainingTimeDisplay())}else{this.updateFormattedTime_(this.player_.remainingTime())}};t.handleEnded=function e(t){if(!this.player_.duration()){return}this.updateFormattedTime_(0)};return e}(Rn);jn.prototype.labelText_="Remaining Time";jn.prototype.controlText_="Remaining Time";Xe.registerComponent("RemainingTimeDisplay",jn);var Fn=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.updateShowing();i.on(i.player(),"durationchange",i.updateShowing);return i}var t=e.prototype;t.createEl=function e(){var t=r.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=U("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"});t.appendChild(this.contentEl_);return t};t.dispose=function e(){this.contentEl_=null;r.prototype.dispose.call(this)};t.updateShowing=function e(t){if(this.player().duration()===Infinity){this.show()}else{this.hide()}};return e}(Xe);Xe.registerComponent("LiveDisplay",Fn);var Vn=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.updateLiveEdgeStatus();if(i.player_.liveTracker){i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatus)}return i}var t=e.prototype;t.createEl=function e(){var t=r.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});this.textEl_=U("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"});t.appendChild(this.textEl_);return t};t.updateLiveEdgeStatus=function e(t){if(!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()){this.setAttribute("aria-disabled",true);this.addClass("vjs-at-live-edge");this.controlText("Seek to live, currently playing live")}else{this.setAttribute("aria-disabled",false);this.removeClass("vjs-at-live-edge");this.controlText("Seek to live, currently behind live")}};t.handleClick=function e(){this.player_.liveTracker.seekToLiveEdge()};t.dispose=function e(){if(this.player_.liveTracker){this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus)}this.textEl_=null;r.prototype.dispose.call(this)};return e}(En);Vn.prototype.controlText_="Seek to live, currently playing live";Xe.registerComponent("SeekToLive",Vn);var Hn=function(n){o(e,n);function e(e,t){var i;i=n.call(this,e,t)||this;i.bar=i.getChild(i.options_.barName);i.vertical(!!i.options_.vertical);i.enable();return i}var t=e.prototype;t.enabled=function e(){return this.enabled_};t.enable=function e(){if(this.enabled()){return}this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("focus",this.handleFocus);this.on("blur",this.handleBlur);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent){this.on(this.player_,this.playerEvent,this.update)}this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=true};t.disable=function e(){if(!this.enabled()){return}var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(t,"mousemove",this.handleMouseMove);this.off(t,"mouseup",this.handleMouseUp);this.off(t,"touchmove",this.handleMouseMove);this.off(t,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");if(this.playerEvent){this.off(this.player_,this.playerEvent,this.update)}this.enabled_=false};t.createEl=function e(t,i,r){if(i===void 0){i={}}if(r===void 0){r={}}i.className=i.className+" vjs-slider";i=b({tabIndex:0},i);r=b({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r);return n.prototype.createEl.call(this,t,i,r)};t.handleMouseDown=function e(t){var i=this.bar.el_.ownerDocument;if(t.type==="mousedown"){t.preventDefault()}if(t.type==="touchstart"&&!ot){t.preventDefault()}z();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(i,"mousemove",this.handleMouseMove);this.on(i,"mouseup",this.handleMouseUp);this.on(i,"touchmove",this.handleMouseMove);this.on(i,"touchend",this.handleMouseUp);this.handleMouseMove(t)};t.handleMouseMove=function e(t){};t.handleMouseUp=function e(){var t=this.bar.el_.ownerDocument;W();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(t,"mousemove",this.handleMouseMove);this.off(t,"mouseup",this.handleMouseUp);this.off(t,"touchmove",this.handleMouseMove);this.off(t,"touchend",this.handleMouseUp);this.update()};t.update=function e(){if(!this.el_){return}var t=this.getPercent();var i=this.bar;if(!i){return}if(typeof t!=="number"||t!==t||t<0||t===Infinity){t=0}var r=(t*100).toFixed(2)+"%";var n=i.el().style;if(this.vertical()){n.height=r}else{n.width=r}return t};t.calculateDistance=function e(t){var i=Y(this.el_,t);if(this.vertical()){return i.y}return i.x};t.handleFocus=function e(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};t.handleKeyPress=function e(t){if(Nt.isEventKey(t,"Left")||Nt.isEventKey(t,"Down")){t.preventDefault();this.stepBack()}else if(Nt.isEventKey(t,"Right")||Nt.isEventKey(t,"Up")){t.preventDefault();this.stepForward()}else{n.prototype.handleKeyPress.call(this,t)}};t.handleBlur=function e(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};t.handleClick=function e(t){t.stopImmediatePropagation();t.preventDefault()};t.vertical=function e(t){if(t===undefined){return this.vertical_||false}this.vertical_=!!t;if(this.vertical_){this.addClass("vjs-slider-vertical")}else{this.addClass("vjs-slider-horizontal")}};return e}(Xe);Xe.registerComponent("Slider",Hn);var qn=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.partEls_=[];i.on(e,"progress",i.update);return i}var t=e.prototype;t.createEl=function e(){return r.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})};t.dispose=function e(){this.partEls_=null;r.prototype.dispose.call(this)};t.update=function e(t){var i=this.player_.liveTracker;var r=this.player_.buffered();var n=i&&i.isLive()?i.seekableEnd():this.player_.duration();var a=this.player_.bufferedEnd();var s=this.partEls_;var o=this.$(".vjs-control-text-loaded-percentage");var u=function e(t,i,r){var n=t/i||0;n=(n>=1?1:n)*100;if(r){n=n.toFixed(2)}return n+"%"};this.el_.style.width=u(a,n);D(o,u(a,n,true));for(var l=0;l<r.length;l++){var c=r.start(l);var f=r.end(l);var d=s[l];if(!d){d=this.el_.appendChild(U());s[l]=d}d.style.left=u(c,a);d.style.width=u(f-c,a)}for(var h=s.length;h>r.length;h--){this.el_.removeChild(s[h-1])}s.length=r.length};return e}(Xe);Xe.registerComponent("LoadProgressBar",qn);var zn=function(t){o(e,t);function e(){return t.apply(this,arguments)||this}var i=e.prototype;i.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})};i.update=function e(t,i,r){var n=G(this.el_);var a=G(this.player_.el());var s=t.width*i;if(!a||!n){return}var o=t.left-a.left+s;var u=t.width-s+(a.right-t.right);var l=n.width/2;if(o<l){l+=l-o}else if(u<l){l=u}if(l<0){l=0}else if(l>n.width){l=n.width}this.el_.style.right="-"+l+"px";D(this.el_,r)};i.updateTime=function e(n,a,s,o){var u=this;if(this.rafId_){this.cancelAnimationFrame(this.rafId_)}this.rafId_=this.requestAnimationFrame(function(){var e;var t=u.player_.duration();if(u.player_.liveTracker&&u.player_.liveTracker.isLive()){var i=u.player_.liveTracker.liveWindow();var r=i-a*i;e=(r<1?"":"-")+xn(r,i)}else{e=xn(s,t)}u.update(n,a,e);if(o){o()}})};return e}(Xe);Xe.registerComponent("TimeTooltip",zn);var Wn=function(t){o(e,t);function e(){return t.apply(this,arguments)||this}var i=e.prototype;i.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})};i.update=function e(t,i){var r=this.getChild("timeTooltip");if(!r){return}var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(t,i,n)};return e}(Xe);Wn.prototype.options_={children:[]};if(!et&&!it){Wn.prototype.options_.children.push("timeTooltip")}Xe.registerComponent("PlayProgressBar",Wn);var Gn=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.update=Le(Ae(h(h(i)),i.update),25);return i}var t=e.prototype;t.createEl=function e(){return r.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};t.update=function e(t,i){var r=this;var n=i*this.player_.duration();this.getChild("timeTooltip").updateTime(t,i,n,function(){r.el_.style.left=t.width*i+"px"})};return e}(Xe);Gn.prototype.options_={children:["timeTooltip"]};Xe.registerComponent("MouseTimeDisplay",Gn);var Xn=5;var Yn=12;var Kn=30;var $n=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.setEventHandlers_();return i}var t=e.prototype;t.setEventHandlers_=function e(){this.update=Le(Ae(this,this.update),Kn);this.on(this.player_,"timeupdate",this.update);this.on(this.player_,"ended",this.handleEnded);this.on(this.player_,"durationchange",this.update);if(this.player_.liveTracker){this.on(this.player_.liveTracker,"liveedgechange",this.update)}this.updateInterval=null;this.on(this.player_,["playing"],this.enableInterval_);this.on(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden"in d&&"visibilityState"in d){this.on(d,"visibilitychange",this.toggleVisibility_)}};t.toggleVisibility_=function e(t){if(d.hidden){this.disableInterval_(t)}else{this.enableInterval_();this.requestAnimationFrame(this.update)}};t.enableInterval_=function e(){var t=this;this.clearInterval(this.updateInterval);this.updateInterval=this.setInterval(function(){t.requestAnimationFrame(t.update)},Kn)};t.disableInterval_=function e(t){if(this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t.type!=="ended"){return}this.clearInterval(this.updateInterval)};t.createEl=function e(){return r.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};t.update_=function e(t,i){var r=this.player_.liveTracker;var n=this.player_.duration();if(r&&r.isLive()){n=this.player_.liveTracker.liveCurrentTime()}this.el_.setAttribute("aria-valuenow",(i*100).toFixed(2));this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[xn(t,n),xn(n,n)],"{1} of {2}"));if(this.bar){this.bar.update(G(this.el_),i)}};t.update=function e(t){if(this.el().offsetParent===null){return}var i=r.prototype.update.call(this);this.update_(this.getCurrentTime_(),i);return i};t.getCurrentTime_=function e(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};t.handleEnded=function e(t){this.update_(this.player_.duration(),1)};t.getPercent=function e(){var t=this.getCurrentTime_();var i;var r=this.player_.liveTracker;if(r&&r.isLive()){i=(t-r.seekableStart())/r.liveWindow();if(r.atLiveEdge()){i=1}}else{i=t/this.player_.duration()}return i>=1?1:i||0};t.handleMouseDown=function e(t){if(!ee(t)){return}t.stopPropagation();this.player_.scrubbing(true);this.videoWasPlaying=!this.player_.paused();this.player_.pause();r.prototype.handleMouseDown.call(this,t)};t.handleMouseMove=function e(t){if(!ee(t)){return}var i;var r=this.calculateDistance(t);var n=this.player_.liveTracker;if(!n||!n.isLive()){i=r*this.player_.duration();if(i===this.player_.duration()){i=i-.1}}else{var a=n.seekableStart();var s=n.liveCurrentTime();i=a+r*n.liveWindow();if(i>=s){i=s}if(i<=a){i=a+.1}if(i===Infinity){return}}this.player_.currentTime(i)};t.enable=function e(){r.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");if(!t){return}t.show()};t.disable=function e(){r.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");if(!t){return}t.hide()};t.handleMouseUp=function e(t){r.prototype.handleMouseUp.call(this,t);if(t){t.stopPropagation()}this.player_.scrubbing(false);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:true});if(this.videoWasPlaying){Ot(this.player_.play())}};t.stepForward=function e(){this.player_.currentTime(this.player_.currentTime()+Xn)};t.stepBack=function e(){this.player_.currentTime(this.player_.currentTime()-Xn)};t.handleAction=function e(t){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};t.handleKeyPress=function e(t){if(Nt.isEventKey(t,"Space")||Nt.isEventKey(t,"Enter")){t.preventDefault();this.handleAction(t)}else if(Nt.isEventKey(t,"Home")){t.preventDefault();this.player_.currentTime(0)}else if(Nt.isEventKey(t,"End")){t.preventDefault();this.player_.currentTime(this.player_.duration())}else if(/^[0-9]$/.test(Nt(t))){t.preventDefault();var i=(Nt.codes[Nt(t)]-Nt.codes["0"])*10/100;this.player_.currentTime(this.player_.duration()*i)}else if(Nt.isEventKey(t,"PgDn")){t.preventDefault();this.player_.currentTime(this.player_.currentTime()-Xn*Yn)}else if(Nt.isEventKey(t,"PgUp")){t.preventDefault();this.player_.currentTime(this.player_.currentTime()+Xn*Yn)}else{r.prototype.handleKeyPress.call(this,t)}};return e}(Hn);$n.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};if(!et&&!it){$n.prototype.options_.children.splice(1,0,"mouseTimeDisplay")}Xe.registerComponent("SeekBar",$n);var Qn=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.handleMouseMove=Le(Ae(h(h(i)),i.handleMouseMove),25);i.throttledHandleMouseSeek=Le(Ae(h(h(i)),i.handleMouseSeek),25);i.enable();return i}var t=e.prototype;t.createEl=function e(){return r.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};t.handleMouseMove=function e(t){var i=this.getChild("seekBar");if(i){var r=i.getChild("mouseTimeDisplay");var n=i.el();var a=G(n);var s=Y(n,t).x;if(s>1){s=1}else if(s<0){s=0}if(r){r.update(a,s)}}};t.handleMouseSeek=function e(t){var i=this.getChild("seekBar");if(i){i.handleMouseMove(t)}};t.enabled=function e(){return this.enabled_};t.disable=function e(){this.children().forEach(function(e){return e.disable&&e.disable()});if(!this.enabled()){return}this.off(["mousedown","touchstart"],this.handleMouseDown);this.off(this.el_,"mousemove",this.handleMouseMove);this.handleMouseUp();this.addClass("disabled");this.enabled_=false};t.enable=function e(){this.children().forEach(function(e){return e.enable&&e.enable()});if(this.enabled()){return}this.on(["mousedown","touchstart"],this.handleMouseDown);this.on(this.el_,"mousemove",this.handleMouseMove);this.removeClass("disabled");this.enabled_=true};t.handleMouseDown=function e(t){var i=this.el_.ownerDocument;var r=this.getChild("seekBar");if(r){r.handleMouseDown(t)}this.on(i,"mousemove",this.throttledHandleMouseSeek);this.on(i,"touchmove",this.throttledHandleMouseSeek);this.on(i,"mouseup",this.handleMouseUp);this.on(i,"touchend",this.handleMouseUp)};t.handleMouseUp=function e(t){var i=this.el_.ownerDocument;var r=this.getChild("seekBar");if(r){r.handleMouseUp(t)}this.off(i,"mousemove",this.throttledHandleMouseSeek);this.off(i,"touchmove",this.throttledHandleMouseSeek);this.off(i,"mouseup",this.handleMouseUp);this.off(i,"touchend",this.handleMouseUp)};return e}(Xe);Qn.prototype.options_={children:["seekBar"]};Xe.registerComponent("ProgressControl",Qn);var Jn=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.on(e,"fullscreenchange",i.handleFullscreenChange);if(d[_t.fullscreenEnabled]===false){i.disable()}return i}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-fullscreen-control "+r.prototype.buildCSSClass.call(this)};t.handleFullscreenChange=function e(t){if(this.player_.isFullscreen()){this.controlText("Non-Fullscreen")}else{this.controlText("Fullscreen")}};t.handleClick=function e(t){if(!this.player_.isFullscreen()){this.player_.requestFullscreen()}else{this.player_.exitFullscreen()}};return e}(En);Jn.prototype.controlText_="Fullscreen";Xe.registerComponent("FullscreenToggle",Jn);var Zn=function e(t,i){if(i.tech_&&!i.tech_.featuresVolumeControl){t.addClass("vjs-hidden")}t.on(i,"loadstart",function(){if(!i.tech_.featuresVolumeControl){t.addClass("vjs-hidden")}else{t.removeClass("vjs-hidden")}})};var ea=function(t){o(e,t);function e(){return t.apply(this,arguments)||this}var i=e.prototype;i.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return e}(Xe);Xe.registerComponent("VolumeLevel",ea);var ta=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.on("slideractive",i.updateLastVolume_);i.on(e,"volumechange",i.updateARIAAttributes);e.ready(function(){return i.updateARIAAttributes()});return i}var t=e.prototype;t.createEl=function e(){return r.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};t.handleMouseDown=function e(t){if(!ee(t)){return}r.prototype.handleMouseDown.call(this,t)};t.handleMouseMove=function e(t){if(!ee(t)){return}this.checkMuted();this.player_.volume(this.calculateDistance(t))};t.checkMuted=function e(){if(this.player_.muted()){this.player_.muted(false)}};t.getPercent=function e(){if(this.player_.muted()){return 0}return this.player_.volume()};t.stepForward=function e(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};t.stepBack=function e(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)};t.updateARIAAttributes=function e(t){var i=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",i);this.el_.setAttribute("aria-valuetext",i+"%")};t.volumeAsPercentage_=function e(){return Math.round(this.player_.volume()*100)};t.updateLastVolume_=function e(){var t=this;var i=this.player_.volume();this.one("sliderinactive",function(){if(t.player_.volume()===0){t.player_.lastVolume_(i)}})};return e}(Hn);ta.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};ta.prototype.playerEvent="volumechange";Xe.registerComponent("VolumeBar",ta);var ia=function(r){o(e,r);function e(e,t){var i;if(t===void 0){t={}}t.vertical=t.vertical||false;if(typeof t.volumeBar==="undefined"||S(t.volumeBar)){t.volumeBar=t.volumeBar||{};t.volumeBar.vertical=t.vertical}i=r.call(this,e,t)||this;Zn(h(h(i)),e);i.throttledHandleMouseMove=Le(Ae(h(h(i)),i.handleMouseMove),25);i.on("mousedown",i.handleMouseDown);i.on("touchstart",i.handleMouseDown);i.on(i.volumeBar,["focus","slideractive"],function(){i.volumeBar.addClass("vjs-slider-active");i.addClass("vjs-slider-active");i.trigger("slideractive")});i.on(i.volumeBar,["blur","sliderinactive"],function(){i.volumeBar.removeClass("vjs-slider-active");i.removeClass("vjs-slider-active");i.trigger("sliderinactive")});return i}var t=e.prototype;t.createEl=function e(){var t="vjs-volume-horizontal";if(this.options_.vertical){t="vjs-volume-vertical"}return r.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})};t.handleMouseDown=function e(t){var i=this.el_.ownerDocument;this.on(i,"mousemove",this.throttledHandleMouseMove);this.on(i,"touchmove",this.throttledHandleMouseMove);this.on(i,"mouseup",this.handleMouseUp);this.on(i,"touchend",this.handleMouseUp)};t.handleMouseUp=function e(t){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseMove);this.off(i,"touchmove",this.throttledHandleMouseMove);this.off(i,"mouseup",this.handleMouseUp);this.off(i,"touchend",this.handleMouseUp)};t.handleMouseMove=function e(t){this.volumeBar.handleMouseMove(t)};return e}(Xe);ia.prototype.options_={children:["volumeBar"]};Xe.registerComponent("VolumeControl",ia);var ra=function e(t,i){if(i.tech_&&!i.tech_.featuresMuteControl){t.addClass("vjs-hidden")}t.on(i,"loadstart",function(){if(!i.tech_.featuresMuteControl){t.addClass("vjs-hidden")}else{t.removeClass("vjs-hidden")}})};var na=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;ra(h(h(i)),e);i.on(e,["loadstart","volumechange"],i.update);return i}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-mute-control "+r.prototype.buildCSSClass.call(this)};t.handleClick=function e(t){var i=this.player_.volume();var r=this.player_.lastVolume_();if(i===0){var n=r<.1?.1:r;this.player_.volume(n);this.player_.muted(false)}else{this.player_.muted(this.player_.muted()?false:true)}};t.update=function e(t){this.updateIcon_();this.updateControlText_()};t.updateIcon_=function e(){var t=this.player_.volume();var i=3;if(et&&this.player_.tech_&&this.player_.tech_.el_){this.player_.muted(this.player_.tech_.el_.muted)}if(t===0||this.player_.muted()){i=0}else if(t<.33){i=1}else if(t<.67){i=2}for(var r=0;r<4;r++){B(this.el_,"vjs-vol-"+r)}M(this.el_,"vjs-vol-"+i)};t.updateControlText_=function e(){var t=this.player_.muted()||this.player_.volume()===0;var i=t?"Unmute":"Mute";if(this.controlText()!==i){this.controlText(i)}};return e}(En);na.prototype.controlText_="Mute";Xe.registerComponent("MuteToggle",na);var aa=function(r){o(e,r);function e(e,t){var i;if(t===void 0){t={}}if(typeof t.inline!=="undefined"){t.inline=t.inline}else{t.inline=true}if(typeof t.volumeControl==="undefined"||S(t.volumeControl)){t.volumeControl=t.volumeControl||{};t.volumeControl.vertical=!t.inline}i=r.call(this,e,t)||this;i.on(e,["loadstart"],i.volumePanelState_);i.on(i.volumeControl,["slideractive"],i.sliderActive_);i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_);return i}var t=e.prototype;t.sliderActive_=function e(){this.addClass("vjs-slider-active")};t.sliderInactive_=function e(){this.removeClass("vjs-slider-active")};t.volumePanelState_=function e(){if(this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-hidden")}if(this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-mute-toggle-only")}};t.createEl=function e(){var t="vjs-volume-panel-horizontal";if(!this.options_.inline){t="vjs-volume-panel-vertical"}return r.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})};return e}(Xe);aa.prototype.options_={children:["muteToggle","volumeControl"]};Xe.registerComponent("VolumePanel",aa);var sa=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;if(t){i.menuButton_=t.menuButton}i.focusedChild_=-1;i.on("keydown",i.handleKeyPress);i.boundHandleBlur_=Ae(h(h(i)),i.handleBlur);i.boundHandleTapClick_=Ae(h(h(i)),i.handleTapClick);return i}var t=e.prototype;t.addEventListenerForItem=function e(t){if(!(t instanceof Xe)){return}this.on(t,"blur",this.boundHandleBlur_);this.on(t,["tap","click"],this.boundHandleTapClick_)};t.removeEventListenerForItem=function e(t){if(!(t instanceof Xe)){return}this.off(t,"blur",this.boundHandleBlur_);this.off(t,["tap","click"],this.boundHandleTapClick_)};t.removeChild=function e(t){if(typeof t==="string"){t=this.getChild(t)}this.removeEventListenerForItem(t);r.prototype.removeChild.call(this,t)};t.addItem=function e(t){var i=this.addChild(t);if(i){this.addEventListenerForItem(i)}};t.createEl=function e(){var t=this.options_.contentElType||"ul";this.contentEl_=U(t,{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var i=r.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});i.appendChild(this.contentEl_);ve(i,"click",function(e){e.preventDefault();e.stopImmediatePropagation()});return i};t.dispose=function e(){this.contentEl_=null;this.boundHandleBlur_=null;this.boundHandleTapClick_=null;r.prototype.dispose.call(this)};t.handleBlur=function e(t){var i=t.relatedTarget||d.activeElement;if(!this.children().some(function(e){return e.el()===i})){var r=this.menuButton_;if(r&&r.buttonPressed_&&i!==r.el().firstChild){r.unpressButton()}}};t.handleTapClick=function e(t){if(this.menuButton_){this.menuButton_.unpressButton();var i=this.children();if(!Array.isArray(i)){return}var r=i.filter(function(e){return e.el()===t.target})[0];if(!r){return}if(r.name()!=="CaptionSettingsMenuItem"){this.menuButton_.focus()}}};t.handleKeyPress=function e(t){if(Nt.isEventKey(t,"Left")||Nt.isEventKey(t,"Down")){t.preventDefault();this.stepForward()}else if(Nt.isEventKey(t,"Right")||Nt.isEventKey(t,"Up")){t.preventDefault();this.stepBack()}};t.stepForward=function e(){var t=0;if(this.focusedChild_!==undefined){t=this.focusedChild_+1}this.focus(t)};t.stepBack=function e(){var t=0;if(this.focusedChild_!==undefined){t=this.focusedChild_-1}this.focus(t)};t.focus=function e(t){if(t===void 0){t=0}var i=this.children().slice();var r=i.length&&i[0].className&&/vjs-menu-title/.test(i[0].className);if(r){i.shift()}if(i.length>0){if(t<0){t=0}else if(t>=i.length){t=i.length-1}this.focusedChild_=t;i[t].el_.focus()}};return e}(Xe);Xe.registerComponent("Menu",sa);var oa=function(n){o(e,n);function e(e,t){var i;if(t===void 0){t={}}i=n.call(this,e,t)||this;i.menuButton_=new En(e,t);i.menuButton_.controlText(i.controlText_);i.menuButton_.el_.setAttribute("aria-haspopup","true");var r=En.prototype.buildCSSClass();i.menuButton_.el_.className=i.buildCSSClass()+" "+r;i.menuButton_.removeClass("vjs-control");i.addChild(i.menuButton_);i.update();i.enabled_=true;i.on(i.menuButton_,"tap",i.handleClick);i.on(i.menuButton_,"click",i.handleClick);i.on(i.menuButton_,"focus",i.handleFocus);i.on(i.menuButton_,"blur",i.handleBlur);i.on(i.menuButton_,"mouseenter",function(){i.menu.show()});i.on("keydown",i.handleSubmenuKeyPress);return i}var t=e.prototype;t.update=function e(){var t=this.createMenu();if(this.menu){this.menu.dispose();this.removeChild(this.menu)}this.menu=t;this.addChild(t);this.buttonPressed_=false;this.menuButton_.el_.setAttribute("aria-expanded","false");if(this.items&&this.items.length<=this.hideThreshold_){this.hide()}else{this.show()}};t.createMenu=function e(){var t=new sa(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var i=U("li",{className:"vjs-menu-title",innerHTML:ze(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var r=new Xe(this.player_,{el:i});t.addItem(r)}this.items=this.createItems();if(this.items){for(var n=0;n<this.items.length;n++){t.addItem(this.items[n])}}return t};t.createItems=function e(){};t.createEl=function e(){return n.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};t.buildWrapperCSSClass=function e(){var t="vjs-menu-button";if(this.options_.inline===true){t+="-inline"}else{t+="-popup"}var i=En.prototype.buildCSSClass();return"vjs-menu-button "+t+" "+i+" "+n.prototype.buildCSSClass.call(this)};t.buildCSSClass=function e(){var t="vjs-menu-button";if(this.options_.inline===true){t+="-inline"}else{t+="-popup"}return"vjs-menu-button "+t+" "+n.prototype.buildCSSClass.call(this)};t.controlText=function e(t,i){if(i===void 0){i=this.menuButton_.el()}return this.menuButton_.controlText(t,i)};t.handleClick=function e(t){if(this.buttonPressed_){this.unpressButton()}else{this.pressButton()}};t.focus=function e(){this.menuButton_.focus()};t.blur=function e(){this.menuButton_.blur()};t.handleFocus=function e(){ve(d,"keydown",Ae(this,this.handleKeyPress))};t.handleBlur=function e(){ge(d,"keydown",Ae(this,this.handleKeyPress))};t.handleKeyPress=function e(t){if(Nt.isEventKey(t,"Esc")||Nt.isEventKey(t,"Tab")){if(this.buttonPressed_){this.unpressButton()}if(!Nt.isEventKey(t,"Tab")){t.preventDefault();this.menuButton_.focus()}}else if(Nt.isEventKey(t,"Up")||Nt.isEventKey(t,"Down")){if(!this.buttonPressed_){t.preventDefault();this.pressButton()}}};t.handleSubmenuKeyPress=function e(t){if(Nt.isEventKey(t,"Esc")||Nt.isEventKey(t,"Tab")){if(this.buttonPressed_){this.unpressButton()}if(!Nt.isEventKey(t,"Tab")){t.preventDefault();this.menuButton_.focus()}}};t.pressButton=function e(){if(this.enabled_){this.buttonPressed_=true;this.menu.show();this.menu.lockShowing();this.menuButton_.el_.setAttribute("aria-expanded","true");if(et&&P()){return}this.menu.focus()}};t.unpressButton=function e(){if(this.enabled_){this.buttonPressed_=false;this.menu.unlockShowing();this.menu.hide();this.menuButton_.el_.setAttribute("aria-expanded","false")}};t.disable=function e(){this.unpressButton();this.enabled_=false;this.addClass("vjs-disabled");this.menuButton_.disable()};t.enable=function e(){this.enabled_=true;this.removeClass("vjs-disabled");this.menuButton_.enable()};return e}(Xe);Xe.registerComponent("MenuButton",oa);var ua=function(a){o(e,a);function e(e,t){var i;var r=t.tracks;i=a.call(this,e,t)||this;if(i.items.length<=1){i.hide()}if(!r){return h(i)}var n=Ae(h(h(i)),i.update);r.addEventListener("removetrack",n);r.addEventListener("addtrack",n);i.player_.on("ready",n);i.player_.on("dispose",function(){r.removeEventListener("removetrack",n);r.removeEventListener("addtrack",n)});return i}return e}(oa);Xe.registerComponent("TrackButton",ua);var la=["Tab","Esc","Up","Down","Right","Left"];var ca=function(n){o(e,n);function e(e,t){var i;i=n.call(this,e,t)||this;i.selectable=t.selectable;i.isSelected_=t.selected||false;i.multiSelectable=t.multiSelectable;i.selected(i.isSelected_);if(i.selectable){if(i.multiSelectable){i.el_.setAttribute("role","menuitemcheckbox")}else{i.el_.setAttribute("role","menuitemradio")}}else{i.el_.setAttribute("role","menuitem")}return i}var t=e.prototype;t.createEl=function e(t,i,r){this.nonIconControl=true;return n.prototype.createEl.call(this,"li",b({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},i),r)};t.handleKeyPress=function e(t){if(!la.some(function(e){return Nt.isEventKey(t,e)})){n.prototype.handleKeyPress.call(this,t)}};t.handleClick=function e(t){this.selected(true)};t.selected=function e(t){if(this.selectable){if(t){this.addClass("vjs-selected");this.el_.setAttribute("aria-checked","true");this.controlText(", selected");this.isSelected_=true}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-checked","false");this.controlText("");this.isSelected_=false}}};return e}(gn);Xe.registerComponent("MenuItem",ca);var fa=function(u){o(e,u);function e(e,t){var n;var i=t.track;var r=e.textTracks();t.label=i.label||i.language||"Unknown";t.selected=i.mode==="showing";n=u.call(this,e,t)||this;n.track=i;var a=function e(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}n.handleTracksChange.apply(h(h(n)),i)};var s=function e(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}n.handleSelectedLanguageChange.apply(h(h(n)),i)};e.on(["loadstart","texttrackchange"],a);r.addEventListener("change",a);r.addEventListener("selectedlanguagechange",s);n.on("dispose",function(){e.off(["loadstart","texttrackchange"],a);r.removeEventListener("change",a);r.removeEventListener("selectedlanguagechange",s)});if(r.onchange===undefined){var o;n.on(["tap","click"],function(){if(typeof _.Event!=="object"){try{o=new _.Event("change")}catch(e){}}if(!o){o=d.createEvent("Event");o.initEvent("change",true,true)}r.dispatchEvent(o)})}n.handleTracksChange();return n}var t=e.prototype;t.handleClick=function e(t){var i=this.track;var r=this.player_.textTracks();u.prototype.handleClick.call(this,t);if(!r){return}var n=(i.kinds||[i.kind]).filter(Boolean);for(var a=0;a<r.length;a++){var s=r[a];if(n.indexOf(s.kind)===-1){continue}if(s===i){if(s.mode!=="showing"){s.mode="showing"}}else if(s.mode!=="disabled"){s.mode="disabled"}}};t.handleTracksChange=function e(t){var i=this.track.mode==="showing";if(i!==this.isSelected_){this.selected(i)}};t.handleSelectedLanguageChange=function e(t){if(this.track.mode==="showing"){var i=this.player_.cache_.selectedLanguage;if(i&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind){return}this.player_.cache_.selectedLanguage={enabled:true,language:this.track.language,kind:this.track.kind}}};t.dispose=function e(){this.track=null;u.prototype.dispose.call(this)};return e}(ca);Xe.registerComponent("TextTrackMenuItem",fa);var da=function(i){o(e,i);function e(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:false,mode:"disabled"};if(!t.kinds){t.kinds=[t.kind]}if(t.label){t.track.label=t.label}else{t.track.label=t.kinds.join(" and ")+" off"}t.selectable=true;t.multiSelectable=false;return i.call(this,e,t)||this}var t=e.prototype;t.handleTracksChange=function e(t){var i=this.player().textTracks();var r=true;for(var n=0,a=i.length;n<a;n++){var s=i[n];if(this.options_.kinds.indexOf(s.kind)>-1&&s.mode==="showing"){r=false;break}}if(r!==this.isSelected_){this.selected(r)}};t.handleSelectedLanguageChange=function e(t){var i=this.player().textTracks();var r=true;for(var n=0,a=i.length;n<a;n++){var s=i[n];if(["captions","descriptions","subtitles"].indexOf(s.kind)>-1&&s.mode==="showing"){r=false;break}}if(r){this.player_.cache_.selectedLanguage={enabled:false}}};return e}(fa);Xe.registerComponent("OffTextTrackMenuItem",da);var ha=function(i){o(e,i);function e(e,t){if(t===void 0){t={}}t.tracks=e.textTracks();return i.call(this,e,t)||this}var t=e.prototype;t.createItems=function e(t,i){if(t===void 0){t=[]}if(i===void 0){i=fa}var r;if(this.label_){r=this.label_+" off"}t.push(new da(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r}));this.hideThreshold_+=1;var n=this.player_.textTracks();if(!Array.isArray(this.kinds_)){this.kinds_=[this.kind_]}for(var a=0;a<n.length;a++){var s=n[a];if(this.kinds_.indexOf(s.kind)>-1){var o=new i(this.player_,{track:s,selectable:true,multiSelectable:false});o.addClass("vjs-"+s.kind+"-menu-item");t.push(o)}}return t};return e}(ua);Xe.registerComponent("TextTrackButton",ha);var pa=function(s){o(e,s);function e(e,t){var i;var r=t.track;var n=t.cue;var a=e.currentTime();t.selectable=true;t.multiSelectable=false;t.label=n.text;t.selected=n.startTime<=a&&a<n.endTime;i=s.call(this,e,t)||this;i.track=r;i.cue=n;r.addEventListener("cuechange",Ae(h(h(i)),i.update));return i}var t=e.prototype;t.handleClick=function e(t){s.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};t.update=function e(t){var i=this.cue;var r=this.player_.currentTime();this.selected(i.startTime<=r&&r<i.endTime)};return e}(ca);Xe.registerComponent("ChaptersTrackMenuItem",pa);var ma=function(r){o(e,r);function e(e,t,i){return r.call(this,e,t,i)||this}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-chapters-button "+r.prototype.buildCSSClass.call(this)};t.buildWrapperCSSClass=function e(){return"vjs-chapters-button "+r.prototype.buildWrapperCSSClass.call(this)};t.update=function e(t){if(!this.track_||t&&(t.type==="addtrack"||t.type==="removetrack")){this.setTrack(this.findChaptersTrack())}r.prototype.update.call(this)};t.setTrack=function e(t){if(this.track_===t){return}if(!this.updateHandler_){this.updateHandler_=this.update.bind(this)}if(this.track_){var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(i){i.removeEventListener("load",this.updateHandler_)}this.track_=null}this.track_=t;if(this.track_){this.track_.mode="hidden";var r=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(r){r.addEventListener("load",this.updateHandler_)}}};t.findChaptersTrack=function e(){var t=this.player_.textTracks()||[];for(var i=t.length-1;i>=0;i--){var r=t[i];if(r.kind===this.kind_){return r}}};t.getMenuCaption=function e(){if(this.track_&&this.track_.label){return this.track_.label}return this.localize(ze(this.kind_))};t.createMenu=function e(){this.options_.title=this.getMenuCaption();return r.prototype.createMenu.call(this)};t.createItems=function e(){var t=[];if(!this.track_){return t}var i=this.track_.cues;if(!i){return t}for(var r=0,n=i.length;r<n;r++){var a=i[r];var s=new pa(this.player_,{track:this.track_,cue:a});t.push(s)}return t};return e}(ha);ma.prototype.kind_="chapters";ma.prototype.controlText_="Chapters";Xe.registerComponent("ChaptersButton",ma);var va=function(s){o(e,s);function e(e,t,i){var r;r=s.call(this,e,t,i)||this;var n=e.textTracks();var a=Ae(h(h(r)),r.handleTracksChange);n.addEventListener("change",a);r.on("dispose",function(){n.removeEventListener("change",a)});return r}var t=e.prototype;t.handleTracksChange=function e(t){var i=this.player().textTracks();var r=false;for(var n=0,a=i.length;n<a;n++){var s=i[n];if(s.kind!==this.kind_&&s.mode==="showing"){r=true;break}}if(r){this.disable()}else{this.enable()}};t.buildCSSClass=function e(){return"vjs-descriptions-button "+s.prototype.buildCSSClass.call(this)};t.buildWrapperCSSClass=function e(){return"vjs-descriptions-button "+s.prototype.buildWrapperCSSClass.call(this)};return e}(ha);va.prototype.kind_="descriptions";va.prototype.controlText_="Descriptions";Xe.registerComponent("DescriptionsButton",va);var ga=function(r){o(e,r);function e(e,t,i){return r.call(this,e,t,i)||this}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-subtitles-button "+r.prototype.buildCSSClass.call(this)};t.buildWrapperCSSClass=function e(){return"vjs-subtitles-button "+r.prototype.buildWrapperCSSClass.call(this)};return e}(ha);ga.prototype.kind_="subtitles";ga.prototype.controlText_="Subtitles";Xe.registerComponent("SubtitlesButton",ga);var ya=function(r){o(e,r);function e(e,t){var i;t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:false,default:false,mode:"disabled"};t.selectable=false;t.name="CaptionSettingsMenuItem";i=r.call(this,e,t)||this;i.addClass("vjs-texttrack-settings");i.controlText(", opens "+t.kind+" settings dialog");return i}var t=e.prototype;t.handleClick=function e(t){this.player().getChild("textTrackSettings").open()};return e}(fa);Xe.registerComponent("CaptionSettingsMenuItem",ya);var _a=function(r){o(e,r);function e(e,t,i){return r.call(this,e,t,i)||this}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-captions-button "+r.prototype.buildCSSClass.call(this)};t.buildWrapperCSSClass=function e(){return"vjs-captions-button "+r.prototype.buildWrapperCSSClass.call(this)};t.createItems=function e(){var t=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){t.push(new ya(this.player_,{kind:this.kind_}));this.hideThreshold_+=1}return r.prototype.createItems.call(this,t)};return e}(ha);_a.prototype.kind_="captions";_a.prototype.controlText_="Captions";Xe.registerComponent("CaptionsButton",_a);var ba=function(s){o(e,s);function e(){return s.apply(this,arguments)||this}var t=e.prototype;t.createEl=function e(t,i,r){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==="captions"){n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "}n+="</span>";var a=s.prototype.createEl.call(this,t,b({innerHTML:n},i),r);return a};return e}(fa);Xe.registerComponent("SubsCapsMenuItem",ba);var Ta=function(r){o(e,r);function e(e,t){var i;if(t===void 0){t={}}i=r.call(this,e,t)||this;i.label_="subtitles";if(["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)>-1){i.label_="captions"}i.menuButton_.controlText(ze(i.label_));return i}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-subs-caps-button "+r.prototype.buildCSSClass.call(this)};t.buildWrapperCSSClass=function e(){return"vjs-subs-caps-button "+r.prototype.buildWrapperCSSClass.call(this)};t.createItems=function e(){var t=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){t.push(new ya(this.player_,{kind:this.label_}));this.hideThreshold_+=1}t=r.prototype.createItems.call(this,t,ba);return t};return e}(ha);Ta.prototype.kinds_=["captions","subtitles"];Ta.prototype.controlText_="Subtitles";Xe.registerComponent("SubsCapsButton",Ta);var Sa=function(s){o(e,s);function e(e,t){var n;var i=t.track;var r=e.audioTracks();t.label=i.label||i.language||"Unknown";t.selected=i.enabled;n=s.call(this,e,t)||this;n.track=i;n.addClass("vjs-"+i.kind+"-menu-item");var a=function e(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}n.handleTracksChange.apply(h(h(n)),i)};r.addEventListener("change",a);n.on("dispose",function(){r.removeEventListener("change",a)});return n}var t=e.prototype;t.createEl=function e(t,i,r){var n='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==="main-desc"){n+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "}n+="</span>";var a=s.prototype.createEl.call(this,t,b({innerHTML:n},i),r);return a};t.handleClick=function e(t){var i=this.player_.audioTracks();s.prototype.handleClick.call(this,t);for(var r=0;r<i.length;r++){var n=i[r];n.enabled=n===this.track}};t.handleTracksChange=function e(t){this.selected(this.track.enabled)};return e}(ca);Xe.registerComponent("AudioTrackMenuItem",Sa);var ka=function(i){o(e,i);function e(e,t){if(t===void 0){t={}}t.tracks=e.audioTracks();return i.call(this,e,t)||this}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-audio-button "+i.prototype.buildCSSClass.call(this)};t.buildWrapperCSSClass=function e(){return"vjs-audio-button "+i.prototype.buildWrapperCSSClass.call(this)};t.createItems=function e(t){if(t===void 0){t=[]}this.hideThreshold_=1;var i=this.player_.audioTracks();for(var r=0;r<i.length;r++){var n=i[r];t.push(new Sa(this.player_,{track:n,selectable:true,multiSelectable:false}))}return t};return e}(ua);ka.prototype.controlText_="Audio Track";Xe.registerComponent("AudioTrackButton",ka);var wa=function(a){o(e,a);function e(e,t){var i;var r=t.rate;var n=parseFloat(r,10);t.label=r;t.selected=n===1;t.selectable=true;t.multiSelectable=false;i=a.call(this,e,t)||this;i.label=r;i.rate=n;i.on(e,"ratechange",i.update);return i}var t=e.prototype;t.handleClick=function e(t){a.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};t.update=function e(t){this.selected(this.player().playbackRate()===this.rate)};return e}(ca);wa.prototype.contentElType="button";Xe.registerComponent("PlaybackRateMenuItem",wa);var Ca=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.updateVisibility();i.updateLabel();i.on(e,"loadstart",i.updateVisibility);i.on(e,"ratechange",i.updateLabel);return i}var t=e.prototype;t.createEl=function e(){var t=r.prototype.createEl.call(this);this.labelEl_=U("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});t.appendChild(this.labelEl_);return t};t.dispose=function e(){this.labelEl_=null;r.prototype.dispose.call(this)};t.buildCSSClass=function e(){return"vjs-playback-rate "+r.prototype.buildCSSClass.call(this)};t.buildWrapperCSSClass=function e(){return"vjs-playback-rate "+r.prototype.buildWrapperCSSClass.call(this)};t.createMenu=function e(){var t=new sa(this.player());var i=this.playbackRates();if(i){for(var r=i.length-1;r>=0;r--){t.addChild(new wa(this.player(),{rate:i[r]+"x"}))}}return t};t.updateARIAAttributes=function e(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};t.handleClick=function e(t){var i=this.player().playbackRate();var r=this.playbackRates();var n=r[0];for(var a=0;a<r.length;a++){if(r[a]>i){n=r[a];break}}this.player().playbackRate(n)};t.playbackRates=function e(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};t.playbackRateSupported=function e(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0};t.updateVisibility=function e(t){if(this.playbackRateSupported()){this.removeClass("vjs-hidden")}else{this.addClass("vjs-hidden")}};t.updateLabel=function e(t){if(this.playbackRateSupported()){this.labelEl_.innerHTML=this.player().playbackRate()+"x"}};return e}(oa);Ca.prototype.controlText_="Playback Rate";Xe.registerComponent("PlaybackRateMenuButton",Ca);var Ea=function(t){o(e,t);function e(){return t.apply(this,arguments)||this}var i=e.prototype;i.buildCSSClass=function e(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)};i.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return e}(Xe);Xe.registerComponent("Spacer",Ea);var Aa=function(i){o(e,i);function e(){return i.apply(this,arguments)||this}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-custom-control-spacer "+i.prototype.buildCSSClass.call(this)};t.createEl=function e(){var t=i.prototype.createEl.call(this,{className:this.buildCSSClass()});t.innerHTML=" ";return t};return e}(Ea);Xe.registerComponent("CustomControlSpacer",Aa);var La=function(t){o(e,t);function e(){return t.apply(this,arguments)||this}var i=e.prototype;i.createEl=function e(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return e}(Xe);La.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};Xe.registerComponent("ControlBar",La);var Ia=function(r){o(e,r);function e(e,t){var i;i=r.call(this,e,t)||this;i.on(e,"error",i.open);return i}var t=e.prototype;t.buildCSSClass=function e(){return"vjs-error-display "+r.prototype.buildCSSClass.call(this)};t.content=function e(){var t=this.player().error();return t?this.localize(t.message):""};return e}(Wt);Ia.prototype.options_=Ge(Wt.prototype.options_,{pauseOnOpen:false,fillAlways:true,temporary:false,uncloseable:true});Xe.registerComponent("ErrorDisplay",Ia);var Pa="vjs-text-track-settings";var Oa=["#000","Black"];var Ua=["#00F","Blue"];var Da=["#0FF","Cyan"];var xa=["#0F0","Green"];var Ra=["#F0F","Magenta"];var Ma=["#F00","Red"];var Ba=["#FFF","White"];var Na=["#FF0","Yellow"];var ja=["1","Opaque"];var Fa=["0.5","Semi-Transparent"];var Va=["0","Transparent"];var Ha={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Oa,Ba,Ma,xa,Ua,Na,Ra,Da]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[ja,Fa,Va]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Ba,Oa,Ma,xa,Ua,Na,Ra,Da]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function e(t){return t==="1.00"?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[ja,Fa]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Va,Fa,ja]}};Ha.windowColor.options=Ha.backgroundColor.options;function qa(e,t){if(t){e=t(e)}if(e&&e!=="none"){return e}}function za(e,t){var i=e.options[e.options.selectedIndex].value;return qa(i,t)}function Wa(e,t,i){if(!t){return}for(var r=0;r<e.options.length;r++){if(qa(e.options[r].value,i)===t){e.selectedIndex=r;break}}}var Ga=function(r){o(e,r);function e(e,t){var i;t.temporary=false;i=r.call(this,e,t)||this;i.updateDisplay=Ae(h(h(i)),i.updateDisplay);i.fill();i.hasBeenOpened_=i.hasBeenFilled_=true;i.endDialog=U("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")});i.el().appendChild(i.endDialog);i.setDefaults();if(t.persistTextTrackSettings===undefined){i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings}i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings();i.close()});i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults();i.updateDisplay()});y(Ha,function(e){i.on(i.$(e.selector),"change",i.updateDisplay)});if(i.options_.persistTextTrackSettings){i.restoreSettings()}return i}var t=e.prototype;t.dispose=function e(){this.endDialog=null;r.prototype.dispose.call(this)};t.createElSelect_=function e(t,i,r){var n=this;if(i===void 0){i=""}if(r===void 0){r="label"}var a=Ha[t];var s=a.id.replace("%s",this.id_);var o=[i,s].join(" ").trim();return["<"+r+' id="'+s+'" class="'+(r==="label"?"vjs-label":"")+'">',this.localize(a.label),"</"+r+">",'<select aria-labelledby="'+o+'">'].concat(a.options.map(function(e){var t=s+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+o+" "+t+'">',n.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")};t.createElFgColor_=function e(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")};t.createElBgColor_=function e(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")};t.createElWinColor_=function e(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")};t.createElColors_=function e(){return U("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};t.createElFont_=function e(){return U("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};t.createElControls_=function e(){var t=this.localize("restore all settings to the default values");return U("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})};t.content=function e(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};t.label=function e(){return this.localize("Caption Settings Dialog")};t.description=function e(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};t.buildCSSClass=function e(){return r.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};t.getValues=function e(){var n=this;return i(Ha,function(e,t,i){var r=za(n.$(t.selector),t.parser);if(r!==undefined){e[i]=r}return e},{})};t.setValues=function e(i){var r=this;y(Ha,function(e,t){Wa(r.$(e.selector),i[t],e.parser)})};t.setDefaults=function e(){var i=this;y(Ha,function(e){var t=e.hasOwnProperty("default")?e.default:0;i.$(e.selector).selectedIndex=t})};t.restoreSettings=function e(){var t;try{t=JSON.parse(_.localStorage.getItem(Pa))}catch(e){m.warn(e)}if(t){this.setValues(t)}};t.saveSettings=function e(){if(!this.options_.persistTextTrackSettings){return}var t=this.getValues();try{if(Object.keys(t).length){_.localStorage.setItem(Pa,JSON.stringify(t))}else{_.localStorage.removeItem(Pa)}}catch(e){m.warn(e)}};t.updateDisplay=function e(){var t=this.player_.getChild("textTrackDisplay");if(t){t.updateDisplay()}};t.conditionalBlur_=function e(){this.previouslyActiveEl_=null;this.off(d,"keydown",this.handleKeyDown);var t=this.player_.controlBar;var i=t&&t.subsCapsButton;var r=t&&t.captionsButton;if(i){i.focus()}else if(r){r.focus()}};return e}(Wt);Xe.registerComponent("TextTrackSettings",Ga);var Xa=function(a){o(e,a);function e(e,t){var i;var r=t.ResizeObserver||_.ResizeObserver;if(t.ResizeObserver===null){r=false}var n=Ge({createEl:!r,reportTouchActivity:false},t);i=a.call(this,e,n)||this;i.ResizeObserver=t.ResizeObserver||_.ResizeObserver;i.loadListener_=null;i.resizeObserver_=null;i.debouncedHandler_=Ie(function(){i.resizeHandler()},100,false,h(h(i)));if(r){i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_);i.resizeObserver_.observe(e.el())}else{i.loadListener_=function(){if(!i.el_||!i.el_.contentWindow){return}var e=i.debouncedHandler_;var t=i.unloadListener_=function(){ge(this,"resize",e);ge(this,"unload",t);t=null};ve(i.el_.contentWindow,"unload",t);ve(i.el_.contentWindow,"resize",e)};i.one("load",i.loadListener_)}return i}var t=e.prototype;t.createEl=function e(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})};t.resizeHandler=function e(){if(!this.player_||!this.player_.trigger){return}this.player_.trigger("playerresize")};t.dispose=function e(){if(this.debouncedHandler_){this.debouncedHandler_.cancel()}if(this.resizeObserver_){if(this.player_.el()){this.resizeObserver_.unobserve(this.player_.el())}this.resizeObserver_.disconnect()}if(this.loadListener_){this.off("load",this.loadListener_)}if(this.el_&&this.el_.contentWindow&&this.unloadListener_){this.unloadListener_.call(this.el_.contentWindow)}this.ResizeObserver=null;this.resizeObserver=null;this.debouncedHandler_=null;this.loadListener_=null;a.prototype.dispose.call(this)};return e}(Xe);Xe.registerComponent("ResizeManager",Xa);var Ya=function(n){o(e,n);function e(e,t){var i;var r=Ge({createEl:false},t);i=n.call(this,e,r)||this;i.reset_();i.on(i.player_,"durationchange",i.handleDurationchange);if(lt&&"hidden"in d&&"visibilityState"in d){i.on(d,"visibilitychange",i.handleVisibilityChange)}return i}var t=e.prototype;t.handleVisibilityChange=function e(){if(this.player_.duration()!==Infinity){return}if(d.hidden){this.stopTracking()}else{this.startTracking()}};t.isBehind_=function e(){if(!this.timeupdateSeen_){return false}var t=this.liveCurrentTime();var i=this.player_.currentTime();var r=this.seekableIncrement_;var n=r*2+.07;return t!==Infinity&&t-n>=i};t.trackLive_=function e(){this.pastSeekEnd_=this.pastSeekEnd_;var t=this.player_.seekable();if(!t||!t.length){return}var i=this.seekableEnd();if(i!==this.lastSeekEnd_){if(this.lastSeekEnd_){this.seekableIncrement_=Math.abs(i-this.lastSeekEnd_)}this.pastSeekEnd_=0;this.lastSeekEnd_=i;this.trigger("seekableendchange")}this.pastSeekEnd_=this.pastSeekEnd()+.03;if(this.isBehind_()!==this.behindLiveEdge()){this.behindLiveEdge_=this.isBehind_();this.trigger("liveedgechange")}};t.handleDurationchange=function e(){if(this.player_.duration()===Infinity){this.startTracking()}else{this.stopTracking()}};t.startTracking=function e(){var t=this;if(this.isTracking()){return}this.trackingInterval_=this.setInterval(this.trackLive_,30);this.trackLive_();this.on(this.player_,"play",this.trackLive_);this.on(this.player_,"pause",this.trackLive_);this.one(this.player_,"play",this.handlePlay);if(!this.timeupdateSeen_){this.handleTimeupdate=function(){t.timeupdateSeen_=true;t.handleTimeupdate=null};this.one(this.player_,"timeupdate",this.handleTimeupdate)}};t.handlePlay=function e(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)};t.reset_=function e(){this.pastSeekEnd_=0;this.lastSeekEnd_=null;this.behindLiveEdge_=null;this.timeupdateSeen_=false;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.seekableIncrement_=12;this.off(this.player_,"play",this.trackLive_);this.off(this.player_,"pause",this.trackLive_);this.off(this.player_,"play",this.handlePlay);this.off(this.player_,"timeupdate",this.seekToLiveEdge);if(this.handleTimeupdate){this.off(this.player_,"timeupdate",this.handleTimeupdate);this.handleTimeupdate=null}};t.stopTracking=function e(){if(!this.isTracking()){return}this.reset_()};t.seekableEnd=function e(){var t=this.player_.seekable();var i=[];var r=t?t.length:0;while(r--){i.push(t.end(r))}return i.length?i.sort()[i.length-1]:Infinity};t.seekableStart=function e(){var t=this.player_.seekable();var i=[];var r=t?t.length:0;while(r--){i.push(t.start(r))}return i.length?i.sort()[0]:0};t.liveWindow=function e(){var t=this.liveCurrentTime();if(t===Infinity){return Infinity}return t-this.seekableStart()};t.isLive=function e(){return this.isTracking()};t.atLiveEdge=function e(){return!this.behindLiveEdge()};t.liveCurrentTime=function e(){return this.pastSeekEnd()+this.seekableEnd()};t.pastSeekEnd=function e(){return this.pastSeekEnd_};t.behindLiveEdge=function e(){return this.behindLiveEdge_};t.isTracking=function e(){return typeof this.trackingInterval_==="number"};t.seekToLiveEdge=function e(){if(this.atLiveEdge()){return}this.player_.currentTime(this.liveCurrentTime());if(this.player_.paused()){this.player_.play()}};t.dispose=function e(){this.stopTracking();n.prototype.dispose.call(this)};return e}(Xe);Xe.registerComponent("LiveTracker",Ya);var Ka=function e(t){var i=t.el();if(i.hasAttribute("src")){t.triggerSourceset(i.src);return true}var r=t.$$("source");var n=[];var a="";if(!r.length){return false}for(var s=0;s<r.length;s++){var o=r[s].src;if(o&&n.indexOf(o)===-1){n.push(o)}}if(!n.length){return false}if(n.length===1){a=n[0]}t.triggerSourceset(a);return true};var $a=Object.defineProperty({},"innerHTML",{get:function e(){return this.cloneNode(true).innerHTML},set:function e(t){var i=d.createElement(this.nodeName.toLowerCase());i.innerHTML=t;var r=d.createDocumentFragment();while(i.childNodes.length){r.appendChild(i.childNodes[0])}this.innerText="";_.Element.prototype.appendChild.call(this,r);return this.innerHTML}});var Qa=function e(t,i){var r={};for(var n=0;n<t.length;n++){r=Object.getOwnPropertyDescriptor(t[n],i);if(r&&r.set&&r.get){break}}r.enumerable=true;r.configurable=true;return r};var Ja=function e(t){return Qa([t.el(),_.HTMLMediaElement.prototype,_.Element.prototype,$a],"innerHTML")};var Za=function e(a){var s=a.el();if(s.resetSourceWatch_){return}var t={};var i=Ja(a);var r=function e(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++){t[i]=arguments[i]}var r=n.apply(s,t);Ka(a);return r}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){if(!s[e]){return}t[e]=s[e];s[e]=r(t[e])});Object.defineProperty(s,"innerHTML",Ge(i,{set:r(i.set)}));s.resetSourceWatch_=function(){s.resetSourceWatch_=null;Object.keys(t).forEach(function(e){s[e]=t[e]});Object.defineProperty(s,"innerHTML",i)};a.one("sourceset",s.resetSourceWatch_)};var es=Object.defineProperty({},"src",{get:function e(){if(this.hasAttribute("src")){return oi(_.Element.prototype.getAttribute.call(this,"src"))}return""},set:function e(t){_.Element.prototype.setAttribute.call(this,"src",t);return t}});var ts=function e(t){return Qa([t.el(),_.HTMLMediaElement.prototype,es],"src")};var is=function e(r){if(!r.featuresSourceset){return}var n=r.el();if(n.resetSourceset_){return}var a=ts(r);var s=n.setAttribute;var t=n.load;Object.defineProperty(n,"src",Ge(a,{set:function e(t){var i=a.set.call(n,t);r.triggerSourceset(n.src);return i}}));n.setAttribute=function(e,t){var i=s.call(n,e,t);if(/src/i.test(e)){r.triggerSourceset(n.src)}return i};n.load=function(){var e=t.call(n);if(!Ka(r)){r.triggerSourceset("");Za(r)}return e};if(n.currentSrc){r.triggerSourceset(n.currentSrc)}else if(!Ka(r)){Za(r)}n.resetSourceset_=function(){n.resetSourceset_=null;n.load=t;n.setAttribute=s;Object.defineProperty(n,"src",a);if(n.resetSourceWatch_){n.resetSourceWatch_()}}};function rs(){var t=e(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);rs=function e(){return t};return t}var ns=function(f){o(l,f);function l(e,t){var i;i=f.call(this,e,t)||this;var r=e.source;var n=false;if(r&&(i.el_.currentSrc!==r.src||e.tag&&e.tag.initNetworkState_===3)){i.setSource(r)}else{i.handleLateInit_(i.el_)}if(e.enableSourceset){i.setupSourcesetHandling_()}if(i.el_.hasChildNodes()){var a=i.el_.childNodes;var s=a.length;var o=[];while(s--){var u=a[s];var l=u.nodeName.toLowerCase();if(l==="track"){if(!i.featuresNativeTextTracks){o.push(u)}else{i.remoteTextTrackEls().addTrackElement_(u);i.remoteTextTracks().addTrack(u.track);i.textTracks().addTrack(u.track);if(!n&&!i.el_.hasAttribute("crossorigin")&&li(u.src)){n=true}}}}for(var c=0;c<o.length;c++){i.el_.removeChild(o[c])}}i.proxyNativeTracks_();if(i.featuresNativeTextTracks&&n){m.warn(g(rs()))}i.restoreMetadataTracksInIOSNativePlayer_();if((dt||Je||nt)&&e.nativeControlsForTouch===true){i.setControls(true)}i.proxyWebkitFullscreen_();i.triggerReady();return i}var e=l.prototype;e.dispose=function e(){if(this.el_&&this.el_.resetSourceset_){this.el_.resetSourceset_()}l.disposeMediaElement(this.el_);this.options_=null;f.prototype.dispose.call(this)};e.setupSourcesetHandling_=function e(){is(this)};e.restoreMetadataTracksInIOSNativePlayer_=function e(){var r=this.textTracks();var n;var t=function e(){n=[];for(var t=0;t<r.length;t++){var i=r[t];if(i.kind==="metadata"){n.push({track:i,storedMode:i.mode})}}};t();r.addEventListener("change",t);this.on("dispose",function(){return r.removeEventListener("change",t)});var i=function e(){for(var t=0;t<n.length;t++){var i=n[t];if(i.track.mode==="disabled"&&i.track.mode!==i.storedMode){i.track.mode=i.storedMode}}r.removeEventListener("change",e)};this.on("webkitbeginfullscreen",function(){r.removeEventListener("change",t);r.removeEventListener("change",i);r.addEventListener("change",i)});this.on("webkitendfullscreen",function(){r.removeEventListener("change",t);r.addEventListener("change",t);r.removeEventListener("change",i)})};e.overrideNative_=function e(t,i){var r=this;if(i!==this["featuresNative"+t+"Tracks"]){return}var n=t.toLowerCase();if(this[n+"TracksListeners_"]){Object.keys(this[n+"TracksListeners_"]).forEach(function(e){var t=r.el()[n+"Tracks"];t.removeEventListener(e,r[n+"TracksListeners_"][e])})}this["featuresNative"+t+"Tracks"]=!i;this[n+"TracksListeners_"]=null;this.proxyNativeTracksForType_(n)};e.overrideNativeAudioTracks=function e(t){this.overrideNative_("Audio",t)};e.overrideNativeVideoTracks=function e(t){this.overrideNative_("Video",t)};e.proxyNativeTracksForType_=function e(t){var r=this;var i=ir[t];var a=this.el()[i.getterName];var s=this[i.getterName]();if(!this["featuresNative"+i.capitalName+"Tracks"]||!a||!a.addEventListener){return}var n={change:function e(t){s.trigger({type:"change",target:s,currentTarget:s,srcElement:s})},addtrack:function e(t){s.addTrack(t.track)},removetrack:function e(t){s.removeTrack(t.track)}};var o=function e(){var t=[];for(var i=0;i<s.length;i++){var r=false;for(var n=0;n<a.length;n++){if(a[n]===s[i]){r=true;break}}if(!r){t.push(s[i])}}while(t.length){s.removeTrack(t.shift())}};this[i.getterName+"Listeners_"]=n;Object.keys(n).forEach(function(t){var i=n[t];a.addEventListener(t,i);r.on("dispose",function(e){return a.removeEventListener(t,i)})});this.on("loadstart",o);this.on("dispose",function(e){return r.off("loadstart",o)})};e.proxyNativeTracks_=function e(){var t=this;ir.names.forEach(function(e){t.proxyNativeTracksForType_(e)})};e.createEl=function e(){var t=this.options_.tag;if(!t||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(t){var i=t.cloneNode(true);if(t.parentNode){t.parentNode.insertBefore(i,t)}l.disposeMediaElement(t);t=i}else{t=d.createElement("video");var r=this.options_.tag&&F(this.options_.tag);var n=Ge({},r);if(!dt||this.options_.nativeControlsForTouch!==true){delete n.controls}j(t,b(n,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}if(typeof this.options_.preload!=="undefined"){H(t,"preload",this.options_.preload)}var a=["loop","muted","playsinline","autoplay"];for(var s=0;s<a.length;s++){var o=a[s];var u=this.options_[o];if(typeof u!=="undefined"){if(u){H(t,o,o)}else{q(t,o)}t[o]=u}}return t};e.handleLateInit_=function e(t){if(t.networkState===0||t.networkState===3){return}if(t.readyState===0){var i=false;var r=function e(){i=true};this.on("loadstart",r);var n=function e(){if(!i){this.trigger("loadstart")}};this.on("loadedmetadata",n);this.ready(function(){this.off("loadstart",r);this.off("loadedmetadata",n);if(!i){this.trigger("loadstart")}});return}var a=["loadstart"];a.push("loadedmetadata");if(t.readyState>=2){a.push("loadeddata")}if(t.readyState>=3){a.push("canplay")}if(t.readyState>=4){a.push("canplaythrough")}this.ready(function(){a.forEach(function(e){this.trigger(e)},this)})};e.setCurrentTime=function e(t){try{this.el_.currentTime=t}catch(e){m(e,"Video is not ready. (Video.js)")}};e.duration=function e(){var t=this;if(this.el_.duration===Infinity&&it&&ot&&this.el_.currentTime===0){var i=function e(){if(t.el_.currentTime>0){if(t.el_.duration===Infinity){t.trigger("durationchange")}t.off("timeupdate",e)}};this.on("timeupdate",i);return NaN}return this.el_.duration||NaN};e.width=function e(){return this.el_.offsetWidth};e.height=function e(){return this.el_.offsetHeight};e.proxyWebkitFullscreen_=function e(){var t=this;if(!("webkitDisplayingFullscreen"in this.el_)){return}var i=function e(){this.trigger("fullscreenchange",{isFullscreen:false})};var r=function e(){if("webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"){this.one("webkitendfullscreen",i);this.trigger("fullscreenchange",{isFullscreen:true})}};this.on("webkitbeginfullscreen",r);this.on("dispose",function(){t.off("webkitbeginfullscreen",r);t.off("webkitendfullscreen",i)})};e.supportsFullScreen=function e(){if(typeof this.el_.webkitEnterFullScreen==="function"){var t=_.navigator&&_.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t)){return true}}return false};e.enterFullScreen=function e(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA){this.el_.play();this.setTimeout(function(){t.pause();t.webkitEnterFullScreen()},0)}else{t.webkitEnterFullScreen()}};e.exitFullScreen=function e(){this.el_.webkitExitFullScreen()};e.src=function e(t){if(t===undefined){return this.el_.src}this.setSrc(t)};e.reset=function e(){l.resetMediaElement(this.el_)};e.currentSrc=function e(){if(this.currentSource_){return this.currentSource_.src}return this.el_.currentSrc};e.setControls=function e(t){this.el_.controls=!!t};e.addTextTrack=function e(t,i,r){if(!this.featuresNativeTextTracks){return f.prototype.addTextTrack.call(this,t,i,r)}return this.el_.addTextTrack(t,i,r)};e.createRemoteTextTrack=function e(t){if(!this.featuresNativeTextTracks){return f.prototype.createRemoteTextTrack.call(this,t)}var i=d.createElement("track");if(t.kind){i.kind=t.kind}if(t.label){i.label=t.label}if(t.language||t.srclang){i.srclang=t.language||t.srclang}if(t.default){i.default=t.default}if(t.id){i.id=t.id}if(t.src){i.src=t.src}return i};e.addRemoteTextTrack=function e(t,i){var r=f.prototype.addRemoteTextTrack.call(this,t,i);if(this.featuresNativeTextTracks){this.el().appendChild(r)}return r};e.removeRemoteTextTrack=function e(t){f.prototype.removeRemoteTextTrack.call(this,t);if(this.featuresNativeTextTracks){var i=this.$$("track");var r=i.length;while(r--){if(t===i[r]||t===i[r].track){this.el().removeChild(i[r])}}}};e.getVideoPlaybackQuality=function e(){if(typeof this.el().getVideoPlaybackQuality==="function"){return this.el().getVideoPlaybackQuality()}var t={};if(typeof this.el().webkitDroppedFrameCount!=="undefined"&&typeof this.el().webkitDecodedFrameCount!=="undefined"){t.droppedVideoFrames=this.el().webkitDroppedFrameCount;t.totalVideoFrames=this.el().webkitDecodedFrameCount}if(_.performance&&typeof _.performance.now==="function"){t.creationTime=_.performance.now()}else if(_.performance&&_.performance.timing&&typeof _.performance.timing.navigationStart==="number"){t.creationTime=_.Date.now()-_.performance.timing.navigationStart}return t};return l}(Gr);if(L()){ns.TEST_VID=d.createElement("video");var as=d.createElement("track");as.kind="captions";as.srclang="en";as.label="English";ns.TEST_VID.appendChild(as)}ns.isSupported=function(){try{ns.TEST_VID.volume=.5}catch(e){return false}return!!(ns.TEST_VID&&ns.TEST_VID.canPlayType)};ns.canPlayType=function(e){return ns.TEST_VID.canPlayType(e)};ns.canPlaySource=function(e,t){return ns.canPlayType(e.type)};ns.canControlVolume=function(){try{var e=ns.TEST_VID.volume;ns.TEST_VID.volume=e/2+.1;return e!==ns.TEST_VID.volume}catch(e){return false}};ns.canMuteVolume=function(){try{var e=ns.TEST_VID.muted;ns.TEST_VID.muted=!e;if(ns.TEST_VID.muted){H(ns.TEST_VID,"muted","muted")}else{q(ns.TEST_VID,"muted","muted")}return e!==ns.TEST_VID.muted}catch(e){return false}};ns.canControlPlaybackRate=function(){if(it&&ot&&ut<58){return false}try{var e=ns.TEST_VID.playbackRate;ns.TEST_VID.playbackRate=e/2+.1;return e!==ns.TEST_VID.playbackRate}catch(e){return false}};ns.canOverrideAttributes=function(){try{var e=function e(){};Object.defineProperty(d.createElement("video"),"src",{get:e,set:e});Object.defineProperty(d.createElement("audio"),"src",{get:e,set:e});Object.defineProperty(d.createElement("video"),"innerHTML",{get:e,set:e});Object.defineProperty(d.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return false}return true};ns.supportsNativeTextTracks=function(){return ft||et&&ot};ns.supportsNativeVideoTracks=function(){return!!(ns.TEST_VID&&ns.TEST_VID.videoTracks)};ns.supportsNativeAudioTracks=function(){return!!(ns.TEST_VID&&ns.TEST_VID.audioTracks)};ns.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];ns.prototype.featuresVolumeControl=ns.canControlVolume();ns.prototype.featuresMuteControl=ns.canMuteVolume();ns.prototype.featuresPlaybackRate=ns.canControlPlaybackRate();ns.prototype.featuresSourceset=ns.canOverrideAttributes();ns.prototype.movingMediaElementInDOM=!et;ns.prototype.featuresFullscreenResize=true;ns.prototype.featuresProgressEvents=true;ns.prototype.featuresTimeupdateEvents=true;ns.prototype.featuresNativeTextTracks=ns.supportsNativeTextTracks();ns.prototype.featuresNativeVideoTracks=ns.supportsNativeVideoTracks();ns.prototype.featuresNativeAudioTracks=ns.supportsNativeAudioTracks();var ss=ns.TEST_VID&&ns.TEST_VID.constructor.prototype.canPlayType;var os=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;ns.patchCanPlayType=function(){if(rt>=4&&!at&&!ot){ns.TEST_VID.constructor.prototype.canPlayType=function(e){if(e&&os.test(e)){return"maybe"}return ss.call(this,e)}}};ns.unpatchCanPlayType=function(){var e=ns.TEST_VID.constructor.prototype.canPlayType;ns.TEST_VID.constructor.prototype.canPlayType=ss;return e};ns.patchCanPlayType();ns.disposeMediaElement=function(e){if(!e){return}if(e.parentNode){e.parentNode.removeChild(e)}while(e.hasChildNodes()){e.removeChild(e.firstChild)}e.removeAttribute("src");if(typeof e.load==="function"){(function(){try{e.load()}catch(e){}})()}};ns.resetMediaElement=function(e){if(!e){return}var t=e.querySelectorAll("source");var i=t.length;while(i--){e.removeChild(t[i])}e.removeAttribute("src");if(typeof e.load==="function"){(function(){try{e.load()}catch(e){}})()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){ns.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){ns.prototype["set"+ze(t)]=function(e){this.el_[t]=e;if(e){this.el_.setAttribute(t,t)}else{this.el_.removeAttribute(t)}}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){ns.prototype[e]=function(){return this.el_[e]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){ns.prototype["set"+ze(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(e){ns.prototype[e]=function(){return this.el_[e]()}});Gr.withSourceHandlers(ns);ns.nativeSourceHandler={};ns.nativeSourceHandler.canPlayType=function(e){try{return ns.TEST_VID.canPlayType(e)}catch(e){return""}};ns.nativeSourceHandler.canHandleSource=function(e,t){if(e.type){return ns.nativeSourceHandler.canPlayType(e.type)}else if(e.src){var i=ui(e.src);return ns.nativeSourceHandler.canPlayType("video/"+i)}return""};ns.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)};ns.nativeSourceHandler.dispose=function(){};ns.registerSourceHandler(ns.nativeSourceHandler);Gr.registerTech("Html5",ns);function us(){var t=e(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);us=function e(){return t};return t}var ls=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"];var cs={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"};var fs=["tiny","xsmall","small","medium","large","xlarge","huge"];var ds={};fs.forEach(function(e){var t=e.charAt(0)==="x"?"x-"+e.substring(1):e;ds[e]="vjs-layout-"+t});var hs={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity};var ps=function(f){o(l,f);function l(e,t,i){var r;e.id=e.id||t.id||"vjs_video_"+ae();t=b(l.getTagSettings(e),t);t.initChildren=false;t.createEl=false;t.evented=false;t.reportTouchActivity=false;if(!t.language){if(typeof e.closest==="function"){var n=e.closest("[lang]");if(n&&n.getAttribute){t.language=n.getAttribute("lang")}}else{var a=e;while(a&&a.nodeType===1){if(F(a).hasOwnProperty("lang")){t.language=a.getAttribute("lang");break}a=a.parentNode}}}r=f.call(this,null,t,i)||this;r.boundDocumentFullscreenChange_=Ae(h(h(r)),r.documentFullscreenChange_);r.boundFullWindowOnEscKey_=Ae(h(h(r)),r.fullWindowOnEscKey);r.boundHandleKeyPress_=Ae(h(h(r)),r.handleKeyPress);r.log=v(r.id_);r.isPosterFromTech_=false;r.queuedCallbacks_=[];r.isReady_=false;r.hasStarted_=false;r.userActive_=false;if(!r.options_||!r.options_.techOrder||!r.options_.techOrder.length){throw new Error("No techOrder specified. Did you overwrite "+"videojs.options instead of just changing the "+"properties you want to override?")}r.tag=e;r.tagAttributes=e&&F(e);r.language(r.options_.language);if(t.languages){var s={};Object.getOwnPropertyNames(t.languages).forEach(function(e){s[e.toLowerCase()]=t.languages[e]});r.languages_=s}else{r.languages_=l.prototype.options_.languages}r.resetCache_();r.poster_=t.poster||"";r.controls_=!!t.controls;e.controls=false;e.removeAttribute("controls");r.changingSrc_=false;r.playCallbacks_=[];r.playTerminatedQueue_=[];if(e.hasAttribute("autoplay")){r.autoplay(true)}else{r.autoplay(r.options_.autoplay)}if(t.plugins){Object.keys(t.plugins).forEach(function(e){if(typeof r[e]!=="function"){throw new Error('plugin "'+e+'" does not exist')}})}r.scrubbing_=false;r.el_=r.createEl();Ve(h(h(r)),{eventBusKey:"el_"});if(r.fluid_){r.on("playerreset",r.updateStyleEl_)}var o=Ge(r.options_);if(t.plugins){Object.keys(t.plugins).forEach(function(e){r[e](t.plugins[e])})}r.options_.playerOptions=o;r.middleware_=[];r.initChildren();r.isAudio(e.nodeName.toLowerCase()==="audio");if(r.controls()){r.addClass("vjs-controls-enabled")}else{r.addClass("vjs-controls-disabled")}r.el_.setAttribute("role","region");if(r.isAudio()){r.el_.setAttribute("aria-label",r.localize("Audio Player"))}else{r.el_.setAttribute("aria-label",r.localize("Video Player"))}if(r.isAudio()){r.addClass("vjs-audio")}if(r.flexNotSupported_()){r.addClass("vjs-no-flex")}if(dt){r.addClass("vjs-touch-enabled")}if(!et){r.addClass("vjs-workinghover")}l.players[r.id_]=h(h(r));var u=c.split(".")[0];r.addClass("vjs-v"+u);r.userActive(true);r.reportUserActivity();r.one("play",r.listenForUserActivity_);r.on("focus",r.handleFocus);r.on("blur",r.handleBlur);r.on("stageclick",r.handleStageClick_);r.breakpoints(r.options_.breakpoints);r.responsive(r.options_.responsive);return r}var e=l.prototype;e.dispose=function e(){var r=this;this.trigger("dispose");this.off("dispose");ge(d,_t.fullscreenchange,this.boundDocumentFullscreenChange_);ge(d,"keydown",this.boundFullWindowOnEscKey_);ge(d,"keydown",this.boundHandleKeyPress_);if(this.styleEl_&&this.styleEl_.parentNode){this.styleEl_.parentNode.removeChild(this.styleEl_);this.styleEl_=null}l.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null}if(this.el_&&this.el_.player){this.el_.player=null}if(this.tech_){this.tech_.dispose();this.isPosterFromTech_=false;this.poster_=""}if(this.playerElIngest_){this.playerElIngest_=null}if(this.tag){this.tag=null}un(this);nr.names.forEach(function(e){var t=nr[e];var i=r[t.getterName]();if(i&&i.off){i.off()}});f.prototype.dispose.call(this)};e.createEl=function e(){var t=this.tag;var i;var r=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");var n=this.tag.tagName.toLowerCase()==="video-js";if(r){i=this.el_=t.parentNode}else if(!n){i=this.el_=f.prototype.createEl.call(this,"div")}var a=F(t);if(n){i=this.el_=t;t=this.tag=d.createElement("video");while(i.children.length){t.appendChild(i.firstChild)}if(!R(i,"video-js")){M(i,"video-js")}i.appendChild(t);r=this.playerElIngest_=i;Object.keys(i).forEach(function(e){t[e]=i[e]})}t.setAttribute("tabindex","-1");a.tabindex="-1";if(lt){t.setAttribute("role","application");a.role="application"}t.removeAttribute("width");t.removeAttribute("height");if("width"in a){delete a.width}if("height"in a){delete a.height}Object.getOwnPropertyNames(a).forEach(function(e){if(!(n&&e==="class")){i.setAttribute(e,a[e])}if(n){t.setAttribute(e,a[e])}});t.playerId=t.id;t.id+="_html5_api";t.className="vjs-tech";t.player=i.player=this;this.addClass("vjs-paused");if(_.VIDEOJS_NO_DYNAMIC_STYLE!==true){this.styleEl_=Ce("vjs-styles-dimensions");var s=te(".vjs-styles-defaults");var o=te("head");o.insertBefore(this.styleEl_,s?s.nextSibling:o.firstChild)}this.fill_=false;this.fluid_=false;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);var u=t.getElementsByTagName("a");for(var l=0;l<u.length;l++){var c=u.item(l);M(c,"vjs-hidden");c.setAttribute("hidden","hidden")}t.initNetworkState_=t.networkState;if(t.parentNode&&!r){t.parentNode.insertBefore(i,t)}x(t,i);this.children_.unshift(t);this.el_.setAttribute("lang",this.language_);this.el_=i;return i};e.width=function e(t){return this.dimension("width",t)};e.height=function e(t){return this.dimension("height",t)};e.dimension=function e(t,i){var r=t+"_";if(i===undefined){return this[r]||0}if(i===""){this[r]=undefined;this.updateStyleEl_();return}var n=parseFloat(i);if(isNaN(n)){m.error('Improper value "'+i+'" supplied for for '+t);return}this[r]=n;this.updateStyleEl_()};e.fluid=function e(t){if(t===undefined){return!!this.fluid_}this.fluid_=!!t;if(Ue(this)){this.off("playerreset",this.updateStyleEl_)}if(t){this.addClass("vjs-fluid");this.fill(false);De(function(){this.on("playerreset",this.updateStyleEl_)})}else{this.removeClass("vjs-fluid")}this.updateStyleEl_()};e.fill=function e(t){if(t===undefined){return!!this.fill_}this.fill_=!!t;if(t){this.addClass("vjs-fill");this.fluid(false)}else{this.removeClass("vjs-fill")}};e.aspectRatio=function e(t){if(t===undefined){return this.aspectRatio_}if(!/^\d+\:\d+$/.test(t)){throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.")}this.aspectRatio_=t;this.fluid(true);this.updateStyleEl_()};e.updateStyleEl_=function e(){if(_.VIDEOJS_NO_DYNAMIC_STYLE===true){var t=typeof this.width_==="number"?this.width_:this.options_.width;var i=typeof this.height_==="number"?this.height_:this.options_.height;var r=this.tech_&&this.tech_.el();if(r){if(t>=0){r.width=t}if(i>=0){r.height=i}}return}var n;var a;var s;var o;if(this.aspectRatio_!==undefined&&this.aspectRatio_!=="auto"){s=this.aspectRatio_}else if(this.videoWidth()>0){s=this.videoWidth()+":"+this.videoHeight()}else{s="16:9"}var u=s.split(":");var l=u[1]/u[0];if(this.width_!==undefined){n=this.width_}else if(this.height_!==undefined){n=this.height_/l}else{n=this.videoWidth()||300}if(this.height_!==undefined){a=this.height_}else{a=n*l}if(/^[^a-zA-Z]/.test(this.id())){o="dimensions-"+this.id()}else{o=this.id()+"-dimensions"}this.addClass(o);Ee(this.styleEl_,"\n      ."+o+" {\n        width: "+n+"px;\n        height: "+a+"px;\n      }\n\n      ."+o+".vjs-fluid {\n        padding-top: "+l*100+"%;\n      }\n    ")};e.loadTech_=function e(t,i){var r=this;if(this.tech_){this.unloadTech_()}var n=ze(t);var a=t.charAt(0).toLowerCase()+t.slice(1);if(n!=="Html5"&&this.tag){Gr.getTech("Html5").disposeMediaElement(this.tag);this.tag.player=null;this.tag=null}this.techName_=n;this.isReady_=false;var s=typeof this.autoplay()==="string"?false:this.autoplay();var o={source:i,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+a+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||false,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};nr.names.forEach(function(e){var t=nr[e];o[t.getterName]=r[t.privateName]});b(o,this.options_[n]);b(o,this.options_[a]);b(o,this.options_[t.toLowerCase()]);if(this.tag){o.tag=this.tag}if(i&&i.src===this.cache_.src&&this.cache_.currentTime>0){o.startTime=this.cache_.currentTime}var u=Gr.getTech(t);if(!u){throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'")}this.tech_=new u(o);this.tech_.ready(Ae(this,this.handleTechReady_),true);Rt.jsonToTextTracks(this.textTracksJson_||[],this.tech_);ls.forEach(function(e){r.on(r.tech_,e,r["handleTech"+ze(e)+"_"])});Object.keys(cs).forEach(function(t){r.on(r.tech_,t,function(e){if(r.tech_.playbackRate()===0&&r.tech_.seeking()){r.queuedCallbacks_.push({callback:r["handleTech"+cs[t]+"_"].bind(r),event:e});return}r["handleTech"+cs[t]+"_"](e)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_()}if(this.tech_.el().parentNode!==this.el()&&(n!=="Html5"||!this.tag)){x(this.tech_.el(),this.el())}if(this.tag){this.tag.player=null;this.tag=null}};e.unloadTech_=function e(){var i=this;nr.names.forEach(function(e){var t=nr[e];i[t.privateName]=i[t.getterName]()});this.textTracksJson_=Rt.textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false;if(this.isPosterFromTech_){this.poster_="";this.trigger("posterchange")}this.isPosterFromTech_=false};e.tech=function e(t){if(t===undefined){m.warn(g(us()))}return this.tech_};e.addTechControlsListeners_=function e(){this.removeTechControlsListeners_();this.on(this.tech_,"mousedown",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};e.removeTechControlsListeners_=function e(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mousedown",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};e.handleTechReady_=function e(){this.triggerReady();if(this.cache_.volume){this.techCall_("setVolume",this.cache_.volume)}this.handleTechPosterChange_();this.handleTechDurationChange_()};e.handleTechLoadStart_=function e(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();if(!this.paused()){this.trigger("loadstart");this.trigger("firstplay")}else{this.hasStarted(false);this.trigger("loadstart")}this.manualAutoplay_(this.autoplay())};e.manualAutoplay_=function e(t){var n=this;if(!this.tech_||typeof t!=="string"){return}var i=function e(){var t=n.muted();n.muted(true);var i=function e(){n.muted(t)};n.playTerminatedQueue_.push(i);var r=n.play();if(!Pt(r)){return}return r.catch(i)};var r;if(t==="any"&&this.muted()!==true){r=this.play();if(Pt(r)){r=r.catch(i)}}else if(t==="muted"&&this.muted()!==true){r=i()}else{r=this.play()}if(!Pt(r)){return}return r.then(function(){n.trigger({type:"autoplay-success",autoplay:t})}).catch(function(e){n.trigger({type:"autoplay-failure",autoplay:t})})};e.updateSourceCaches_=function e(t){if(t===void 0){t=""}var i=t;var r="";if(typeof i!=="string"){i=t.src;r=t.type}this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];if(i&&!r){r=hn(this,i)}this.cache_.source=Ge({},t,{src:i,type:r});var n=this.cache_.sources.filter(function(e){return e.src&&e.src===i});var a=[];var s=this.$$("source");var o=[];for(var u=0;u<s.length;u++){var l=F(s[u]);a.push(l);if(l.src&&l.src===i){o.push(l.src)}}if(o.length&&!n.length){this.cache_.sources=a}else if(!n.length){this.cache_.sources=[this.cache_.source]}this.cache_.src=i};e.handleTechSourceset_=function e(t){var r=this;if(!this.changingSrc_){var i=function e(t){return r.updateSourceCaches_(t)};var n=this.currentSource().src;var a=t.src;if(n&&!/^blob:/.test(n)&&/^blob:/.test(a)){if(!this.lastSource_||this.lastSource_.tech!==a&&this.lastSource_.player!==n){i=function e(){}}}i(a);if(!t.src){var s=function e(t){if(t.type!=="sourceset"){var i=r.techGet("currentSrc");r.lastSource_.tech=i;r.updateSourceCaches_(i)}r.tech_.off(["sourceset","loadstart"],e)};this.tech_.one(["sourceset","loadstart"],s)}}this.lastSource_={player:this.currentSource().src,tech:t.src};this.trigger({src:t.src,type:"sourceset"})};e.hasStarted=function e(t){if(t===undefined){return this.hasStarted_}if(t===this.hasStarted_){return}this.hasStarted_=t;if(this.hasStarted_){this.addClass("vjs-has-started");this.trigger("firstplay")}else{this.removeClass("vjs-has-started")}};e.handleTechPlay_=function e(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(true);this.trigger("play")};e.handleTechRateChange_=function e(){if(this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0){this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)});this.queuedCallbacks_=[]}this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};e.handleTechWaiting_=function e(){var t=this;this.addClass("vjs-waiting");this.trigger("waiting");var i=this.currentTime();var r=function e(){if(i!==t.currentTime()){t.removeClass("vjs-waiting");t.off("timeupdate",e)}};this.on("timeupdate",r)};e.handleTechCanPlay_=function e(){this.removeClass("vjs-waiting");this.trigger("canplay")};e.handleTechCanPlayThrough_=function e(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};e.handleTechPlaying_=function e(){this.removeClass("vjs-waiting");this.trigger("playing")};e.handleTechSeeking_=function e(){this.addClass("vjs-seeking");this.trigger("seeking")};e.handleTechSeeked_=function e(){this.removeClass("vjs-seeking");this.removeClass("vjs-ended");this.trigger("seeked")};e.handleTechFirstPlay_=function e(){if(this.options_.starttime){m.warn("Passing the `starttime` option to the player will be deprecated in 6.0");this.currentTime(this.options_.starttime)}this.addClass("vjs-has-started");this.trigger("firstplay")};e.handleTechPause_=function e(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};e.handleTechEnded_=function e(){this.addClass("vjs-ended");if(this.options_.loop){this.currentTime(0);this.play()}else if(!this.paused()){this.pause()}this.trigger("ended")};e.handleTechDurationChange_=function e(){this.duration(this.techGet_("duration"))};e.handleTechClick_=function e(t){if(!ee(t)){return}if(!this.controls_){return}if(this.paused()){Ot(this.play())}else{this.pause()}};e.handleTechDoubleClick_=function e(t){if(!this.controls_){return}var i=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(t.target)});if(!i){if(this.options_===undefined||this.options_.userActions===undefined||this.options_.userActions.doubleClick===undefined||this.options_.userActions.doubleClick!==false){if(this.options_!==undefined&&this.options_.userActions!==undefined&&typeof this.options_.userActions.doubleClick==="function"){this.options_.userActions.doubleClick.call(this,t)}else if(this.isFullscreen()){this.exitFullscreen()}else{this.requestFullscreen()}}}};e.handleTechTap_=function e(){this.userActive(!this.userActive())};e.handleTechTouchStart_=function e(){this.userWasActive=this.userActive()};e.handleTechTouchMove_=function e(){if(this.userWasActive){this.reportUserActivity()}};e.handleTechTouchEnd_=function e(t){t.preventDefault()};e.handleStageClick_=function e(){this.reportUserActivity()};e.toggleFullscreenClass_=function e(){if(this.isFullscreen()){this.addClass("vjs-fullscreen")}else{this.removeClass("vjs-fullscreen")}};e.documentFullscreenChange_=function e(t){var i=_t;this.isFullscreen(d[i.fullscreenElement]===this.el()||this.el().matches(":"+i.fullscreen));if(this.isFullscreen()===false){ge(d,i.fullscreenchange,this.boundDocumentFullscreenChange_)}if(!kt){this.trigger("fullscreenchange")}};e.handleTechFullscreenChange_=function e(t,i){if(i){this.isFullscreen(i.isFullscreen)}this.trigger("fullscreenchange")};e.handleTechError_=function e(){var t=this.tech_.error();this.error(t)};e.handleTechTextData_=function e(){var t=null;if(arguments.length>1){t=arguments[1]}this.trigger("textdata",t)};e.getCache=function e(){return this.cache_};e.resetCache_=function e(){this.cache_={currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}};e.techCall_=function e(t,i){this.ready(function(){if(t in nn){return en(this.middleware_,this.tech_,t,i)}else if(t in an){return tn(this.middleware_,this.tech_,t,i)}try{if(this.tech_){this.tech_[t](i)}}catch(e){m(e);throw e}},true)};e.techGet_=function e(t){if(!this.tech_||!this.tech_.isReady_){return}if(t in rn){return Zr(this.middleware_,this.tech_,t)}else if(t in an){return tn(this.middleware_,this.tech_,t)}try{return this.tech_[t]()}catch(e){if(this.tech_[t]===undefined){m("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e);throw e}if(e.name==="TypeError"){m("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e);this.tech_.isReady_=false;throw e}m(e);throw e}};e.play=function e(){var t=this;var i=this.options_.Promise||_.Promise;if(i){return new i(function(e){t.play_(e)})}return this.play_()};e.play_=function e(t){var i=this;if(t===void 0){t=Ot}this.playCallbacks_.push(t);var r=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_){this.off(["ready","loadstart"],this.waitToPlay_);this.waitToPlay_=null}if(!this.isReady_||!r){this.waitToPlay_=function(e){i.play_()};this.one(["ready","loadstart"],this.waitToPlay_);if(!r&&(ft||et)){this.load()}return}var n=this.techGet_("play");if(n===null){this.runPlayTerminatedQueue_()}else{this.runPlayCallbacks_(n)}};e.runPlayTerminatedQueue_=function e(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];t.forEach(function(e){e()})};e.runPlayCallbacks_=function e(t){var i=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=[];i.forEach(function(e){e(t)})};e.pause=function e(){this.techCall_("pause")};e.paused=function e(){return this.techGet_("paused")===false?false:true};e.played=function e(){return this.techGet_("played")||gt(0,0)};e.scrubbing=function e(t){if(typeof t==="undefined"){return this.scrubbing_}this.scrubbing_=!!t;if(t){this.addClass("vjs-scrubbing")}else{this.removeClass("vjs-scrubbing")}};e.currentTime=function e(t){if(typeof t!=="undefined"){if(t<0){t=0}this.techCall_("setCurrentTime",t);return}this.cache_.currentTime=this.techGet_("currentTime")||0;return this.cache_.currentTime};e.duration=function e(t){if(t===undefined){return this.cache_.duration!==undefined?this.cache_.duration:NaN}t=parseFloat(t);if(t<0){t=Infinity}if(t!==this.cache_.duration){this.cache_.duration=t;if(t===Infinity){this.addClass("vjs-live");if(this.options_.liveui&&this.player_.liveTracker){this.addClass("vjs-liveui")}}else{this.removeClass("vjs-live");this.removeClass("vjs-liveui")}if(!isNaN(t)){this.trigger("durationchange")}}};e.remainingTime=function e(){return this.duration()-this.currentTime()};e.remainingTimeDisplay=function e(){return Math.floor(this.duration())-Math.floor(this.currentTime())};e.buffered=function e(){var e=this.techGet_("buffered");if(!e||!e.length){e=gt(0,0)}return e};e.bufferedPercent=function e(){return yt(this.buffered(),this.duration())};e.bufferedEnd=function e(){var t=this.buffered();var i=this.duration();var r=t.end(t.length-1);if(r>i){r=i}return r};e.volume=function e(t){var i;if(t!==undefined){i=Math.max(0,Math.min(1,parseFloat(t)));this.cache_.volume=i;this.techCall_("setVolume",i);if(i>0){this.lastVolume_(i)}return}i=parseFloat(this.techGet_("volume"));return isNaN(i)?1:i};e.muted=function e(t){if(t!==undefined){this.techCall_("setMuted",t);return}return this.techGet_("muted")||false};e.defaultMuted=function e(t){if(t!==undefined){return this.techCall_("setDefaultMuted",t)}return this.techGet_("defaultMuted")||false};e.lastVolume_=function e(t){if(t!==undefined&&t!==0){this.cache_.lastVolume=t;return}return this.cache_.lastVolume};e.supportsFullScreen=function e(){return this.techGet_("supportsFullScreen")||false};e.isFullscreen=function e(t){if(t!==undefined){this.isFullscreen_=!!t;this.toggleFullscreenClass_();return}return!!this.isFullscreen_};e.requestFullscreen=function e(){var t=_t;this.isFullscreen(true);if(t.requestFullscreen){ve(d,t.fullscreenchange,this.boundDocumentFullscreenChange_);this.el_[t.requestFullscreen]()}else if(this.tech_.supportsFullScreen()){this.techCall_("enterFullScreen")}else{this.enterFullWindow();this.trigger("fullscreenchange")}};e.exitFullscreen=function e(){var t=_t;this.isFullscreen(false);if(t.requestFullscreen){d[t.exitFullscreen]()}else if(this.tech_.supportsFullScreen()){this.techCall_("exitFullScreen")}else{this.exitFullWindow();this.trigger("fullscreenchange")}};e.enterFullWindow=function e(){this.isFullWindow=true;this.docOrigOverflow=d.documentElement.style.overflow;ve(d,"keydown",this.boundFullWindowOnEscKey_);d.documentElement.style.overflow="hidden";M(d.body,"vjs-full-window");this.trigger("enterFullWindow")};e.fullWindowOnEscKey=function e(t){if(Nt.isEventKey(t,"Esc")){if(this.isFullscreen()===true){this.exitFullscreen()}else{this.exitFullWindow()}}};e.exitFullWindow=function e(){this.isFullWindow=false;ge(d,"keydown",this.boundFullWindowOnEscKey_);d.documentElement.style.overflow=this.docOrigOverflow;B(d.body,"vjs-full-window");this.trigger("exitFullWindow")};e.handleFocus=function e(t){ge(d,"keydown",this.boundHandleKeyPress_);ve(d,"keydown",this.boundHandleKeyPress_)};e.handleBlur=function e(t){ge(d,"keydown",this.boundHandleKeyPress_)};e.handleKeyPress=function e(t){if(this.options_.userActions&&this.options_.userActions.hotkeys&&this.options_.userActions.hotkeys!==false){if(typeof this.options_.userActions.hotkeys==="function"){this.options_.userActions.hotkeys.call(this,t)}else{this.handleHotkeys(t)}}};e.handleHotkeys=function e(t){var i=this.options_.userActions?this.options_.userActions.hotkeys:{};var r=i.fullscreenKey,n=r===void 0?function(e){return Nt.isEventKey(e,"f")}:r,a=i.muteKey,s=a===void 0?function(e){return Nt.isEventKey(e,"m")}:a,o=i.playPauseKey,u=o===void 0?function(e){return Nt.isEventKey(e,"k")||Nt.isEventKey(e,"Space")}:o;if(n.call(this,t)){t.preventDefault();var l=Xe.getComponent("FullscreenToggle");if(d[_t.fullscreenEnabled]!==false){l.prototype.handleClick.call(this)}}else if(s.call(this,t)){t.preventDefault();var c=Xe.getComponent("MuteToggle");c.prototype.handleClick.call(this)}else if(u.call(this,t)){t.preventDefault();var f=Xe.getComponent("PlayToggle");f.prototype.handleClick.call(this)}};e.canPlayType=function e(t){var i;for(var r=0,n=this.options_.techOrder;r<n.length;r++){var a=n[r];var s=Gr.getTech(a);if(!s){s=Xe.getComponent(a)}if(!s){m.error('The "'+a+'" tech is undefined. Skipped browser support check for that tech.');continue}if(s.isSupported()){i=s.canPlayType(t);if(i){return i}}}return""};e.selectSource=function e(t){var a=this;var i=this.options_.techOrder.map(function(e){return[e,Gr.getTech(e)]}).filter(function(e){var t=e[0],i=e[1];if(i){return i.isSupported()}m.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.');return false});var r=function e(t,i,r){var n;t.some(function(t){return i.some(function(e){n=r(t,e);if(n){return true}})});return n};var n;var s=function e(i){return function(e,t){return i(t,e)}};var o=function e(t,i){var r=t[0],n=t[1];if(n.canPlaySource(i,a.options_[r.toLowerCase()])){return{source:i,tech:r}}};if(this.options_.sourceOrder){n=r(t,i,s(o))}else{n=r(i,t,o)}return n||false};e.src=function e(t){var r=this;if(typeof t==="undefined"){return this.cache_.src||""}var n=pn(t);if(!n.length){this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);return}this.changingSrc_=true;this.cache_.sources=n;this.updateSourceCaches_(n[0]);Qr(this,n[0],function(e,t){r.middleware_=t;r.cache_.sources=n;r.updateSourceCaches_(e);var i=r.src_(e);if(i){if(n.length>1){return r.src(n.slice(1))}r.changingSrc_=false;r.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);r.triggerReady();return}Jr(t,r.tech_)})};e.src_=function e(t){var i=this;var r=this.selectSource([t]);if(!r){return true}if(!We(r.tech,this.techName_)){this.changingSrc_=true;this.loadTech_(r.tech,r.source);this.tech_.ready(function(){i.changingSrc_=false});return false}this.ready(function(){if(this.tech_.constructor.prototype.hasOwnProperty("setSource")){this.techCall_("setSource",t)}else{this.techCall_("src",t.src)}this.changingSrc_=false},true);return false};e.load=function e(){this.techCall_("load")};e.reset=function e(){var t=this;var i=this.options_.Promise||_.Promise;if(this.paused()||!i){this.doReset_()}else{var r=this.play();Ot(r.then(function(){return t.doReset_()}))}};e.doReset_=function e(){if(this.tech_){this.tech_.clearTracks("text")}this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();if(Ue(this)){this.trigger("playerreset")}};e.resetControlBarUI_=function e(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_()};e.resetProgressBar_=function e(){this.currentTime(0);var t=this.controlBar,i=t.durationDisplay,r=t.remainingTimeDisplay;if(i){i.updateContent()}if(r){r.updateContent()}};e.resetPlaybackRate_=function e(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_()};e.resetVolumeBar_=function e(){this.volume(1);this.trigger("volumechange")};e.currentSources=function e(){var t=this.currentSource();var i=[];if(Object.keys(t).length!==0){i.push(t)}return this.cache_.sources||i};e.currentSource=function e(){return this.cache_.source||{}};e.currentSrc=function e(){return this.currentSource()&&this.currentSource().src||""};e.currentType=function e(){return this.currentSource()&&this.currentSource().type||""};e.preload=function e(t){if(t!==undefined){this.techCall_("setPreload",t);this.options_.preload=t;return}return this.techGet_("preload")};e.autoplay=function e(t){if(t===undefined){return this.options_.autoplay||false}var i;if(typeof t==="string"&&/(any|play|muted)/.test(t)){this.options_.autoplay=t;this.manualAutoplay_(t);i=false}else if(!t){this.options_.autoplay=false}else{this.options_.autoplay=true}i=typeof i==="undefined"?this.options_.autoplay:i;if(this.tech_){this.techCall_("setAutoplay",i)}};e.playsinline=function e(t){if(t!==undefined){this.techCall_("setPlaysinline",t);this.options_.playsinline=t;return this}return this.techGet_("playsinline")};e.loop=function e(t){if(t!==undefined){this.techCall_("setLoop",t);this.options_.loop=t;return}return this.techGet_("loop")};e.poster=function e(t){if(t===undefined){return this.poster_}if(!t){t=""}if(t===this.poster_){return}this.poster_=t;this.techCall_("setPoster",t);this.isPosterFromTech_=false;this.trigger("posterchange")};e.handleTechPosterChange_=function e(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";if(t!==this.poster_){this.poster_=t;this.isPosterFromTech_=true;this.trigger("posterchange")}}};e.controls=function e(t){if(t===undefined){return!!this.controls_}t=!!t;if(this.controls_===t){return}this.controls_=t;if(this.usingNativeControls()){this.techCall_("setControls",t)}if(this.controls_){this.removeClass("vjs-controls-disabled");this.addClass("vjs-controls-enabled");this.trigger("controlsenabled");if(!this.usingNativeControls()){this.addTechControlsListeners_()}}else{this.removeClass("vjs-controls-enabled");this.addClass("vjs-controls-disabled");this.trigger("controlsdisabled");if(!this.usingNativeControls()){this.removeTechControlsListeners_()}}};e.usingNativeControls=function e(t){if(t===undefined){return!!this.usingNativeControls_}t=!!t;if(this.usingNativeControls_===t){return}this.usingNativeControls_=t;if(this.usingNativeControls_){this.addClass("vjs-using-native-controls");this.trigger("usingnativecontrols")}else{this.removeClass("vjs-using-native-controls");this.trigger("usingcustomcontrols")}};e.error=function e(t){if(t===undefined){return this.error_||null}if(t===null){this.error_=t;this.removeClass("vjs-error");if(this.errorDisplay){this.errorDisplay.close()}return}this.error_=new Et(t);this.addClass("vjs-error");m.error("(CODE:"+this.error_.code+" "+Et.errorTypes[this.error_.code]+")",this.error_.message,this.error_);this.trigger("error");return};e.reportUserActivity=function e(t){this.userActivity_=true};e.userActive=function e(t){if(t===undefined){return this.userActive_}t=!!t;if(t===this.userActive_){return}this.userActive_=t;if(this.userActive_){this.userActivity_=true;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive");return}if(this.tech_){this.tech_.one("mousemove",function(e){e.stopPropagation();e.preventDefault()})}this.userActivity_=false;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")};e.listenForUserActivity_=function e(){var i;var r;var n;var a=Ae(this,this.reportUserActivity);var t=function e(t){if(t.screenX!==r||t.screenY!==n){r=t.screenX;n=t.screenY;a()}};var s=function e(){a();this.clearInterval(i);i=this.setInterval(a,250)};var o=function e(t){a();this.clearInterval(i)};this.on("mousedown",s);this.on("mousemove",t);this.on("mouseup",o);var u=this.getChild("controlBar");if(u&&!et&&!it){u.on("mouseenter",function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0});u.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})}this.on("keydown",a);this.on("keyup",a);var l;this.setInterval(function(){if(!this.userActivity_){return}this.userActivity_=false;this.userActive(true);this.clearTimeout(l);var e=this.options_.inactivityTimeout;if(e<=0){return}l=this.setTimeout(function(){if(!this.userActivity_){this.userActive(false)}},e)},250)};e.playbackRate=function e(t){if(t!==undefined){this.techCall_("setPlaybackRate",t);return}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.cache_.lastPlaybackRate||this.techGet_("playbackRate")}return 1};e.defaultPlaybackRate=function e(t){if(t!==undefined){return this.techCall_("setDefaultPlaybackRate",t)}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.techGet_("defaultPlaybackRate")}return 1};e.isAudio=function e(t){if(t!==undefined){this.isAudio_=!!t;return}return!!this.isAudio_};e.addTextTrack=function e(t,i,r){if(this.tech_){return this.tech_.addTextTrack(t,i,r)}};e.addRemoteTextTrack=function e(t,i){if(this.tech_){return this.tech_.addRemoteTextTrack(t,i)}};e.removeRemoteTextTrack=function e(t){if(t===void 0){t={}}var i=t,r=i.track;if(!r){r=t}if(this.tech_){return this.tech_.removeRemoteTextTrack(r)}};e.getVideoPlaybackQuality=function e(){return this.techGet_("getVideoPlaybackQuality")};e.videoWidth=function e(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};e.videoHeight=function e(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};e.language=function e(t){if(t===undefined){return this.language_}this.language_=String(t).toLowerCase()};e.languages=function e(){return Ge(l.prototype.options_.languages,this.languages_)};e.toJSON=function e(){var t=Ge(this.options_);var i=t.tracks;t.tracks=[];for(var r=0;r<i.length;r++){var n=i[r];n=Ge(n);n.player=undefined;t.tracks[r]=n}return t};e.createModal=function e(t,i){var r=this;i=i||{};i.content=t||"";var n=new Wt(this,i);this.addChild(n);n.on("dispose",function(){r.removeChild(n)});n.open();return n};e.updateCurrentBreakpoint_=function e(){if(!this.responsive()){return}var t=this.currentBreakpoint();var i=this.currentWidth();for(var r=0;r<fs.length;r++){var n=fs[r];var a=this.breakpoints_[n];if(i<=a){if(t===n){return}if(t){this.removeClass(ds[t])}this.addClass(ds[n]);this.breakpoint_=n;break}}};e.removeCurrentBreakpoint_=function e(){var t=this.currentBreakpointClass();this.breakpoint_="";if(t){this.removeClass(t)}};e.breakpoints=function e(t){if(t===undefined){return b(this.breakpoints_)}this.breakpoint_="";this.breakpoints_=b({},hs,t);this.updateCurrentBreakpoint_();return b(this.breakpoints_)};e.responsive=function e(t){if(t===undefined){return this.responsive_}t=Boolean(t);var i=this.responsive_;if(t===i){return}this.responsive_=t;if(t){this.on("playerresize",this.updateCurrentBreakpoint_);this.updateCurrentBreakpoint_()}else{this.off("playerresize",this.updateCurrentBreakpoint_);this.removeCurrentBreakpoint_()}return t};e.currentBreakpoint=function e(){return this.breakpoint_};e.currentBreakpointClass=function e(){return ds[this.breakpoint_]||""};e.loadMedia=function e(t,i){var r=this;if(!t||typeof t!=="object"){return}this.reset();this.cache_.media=Ge(t);var n=this.cache_.media,a=n.artwork,s=n.poster,o=n.src,u=n.textTracks;if(!a&&s){this.cache_.media.artwork=[{src:s,type:dn(s)}]}if(o){this.src(o)}if(s){this.poster(s)}if(Array.isArray(u)){u.forEach(function(e){return r.addRemoteTextTrack(e,false)})}this.ready(i)};e.getMedia=function e(){if(!this.cache_.media){var t=this.poster();var i=this.currentSources();var r=Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}});var n={src:i,textTracks:r};if(t){n.poster=t;n.artwork=[{src:n.poster,type:dn(n.poster)}]}return n}return Ge(this.cache_.media)};l.getTagSettings=function e(t){var i={sources:[],tracks:[]};var r=F(t);var n=r["data-setup"];if(R(t,"vjs-fill")){r.fill=true}if(R(t,"vjs-fluid")){r.fluid=true}if(n!==null){var a=Lt(n||"{}"),s=a[0],o=a[1];if(s){m.error(s)}b(r,o)}b(i,r);if(t.hasChildNodes()){var u=t.childNodes;for(var l=0,c=u.length;l<c;l++){var f=u[l];var d=f.nodeName.toLowerCase();if(d==="source"){i.sources.push(F(f))}else if(d==="track"){i.tracks.push(F(f))}}}return i};e.flexNotSupported_=function e(){var t=d.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)};return l}(Xe);nr.names.forEach(function(e){var t=nr[e];ps.prototype[t.getterName]=function(){if(this.tech_){return this.tech_[t.getterName]()}this[t.privateName]=this[t.privateName]||new t.ListClass;return this[t.privateName]}});ps.players={};var ms=_.navigator;ps.prototype.options_={techOrder:Gr.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:false,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:ms&&(ms.languages&&ms.languages[0]||ms.userLanguage||ms.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",breakpoints:{},responsive:false};["ended","seeking","seekable","networkState","readyState"].forEach(function(e){ps.prototype[e]=function(){return this.techGet_(e)}});ls.forEach(function(e){ps.prototype["handleTech"+ze(e)+"_"]=function(){return this.trigger(e)}});Xe.registerComponent("Player",ps);var vs="plugin";var gs="activePlugins_";var ys={};var _s=function e(t){return ys.hasOwnProperty(t)};var bs=function e(t){return _s(t)?ys[t]:undefined};var Ts=function e(t,i){t[gs]=t[gs]||{};t[gs][i]=true};var Ss=function e(t,i,r){var n=(r?"before":"")+"pluginsetup";t.trigger(n,i);t.trigger(n+":"+i.name,i)};var ks=function e(i,r){var t=function e(){Ss(this,{name:i,plugin:r,instance:null},true);var t=r.apply(this,arguments);Ts(this,i);Ss(this,{name:i,plugin:r,instance:t});return t};Object.keys(r).forEach(function(e){t[e]=r[e]});return t};var ws=function e(n,a){a.prototype.name=n;return function(){Ss(this,{name:n,plugin:a,instance:null},true);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++){t[i]=arguments[i]}var r=s(a,[this].concat(t));this[n]=function(){return r};Ss(this,r.getEventHash());return r}};var Cs=function(){function r(e){if(this.constructor===r){throw new Error("Plugin must be sub-classed; not directly instantiated.")}this.player=e;Ve(this);delete this.trigger;qe(this,this.constructor.defaultState);Ts(e,this.name);this.dispose=Ae(this,this.dispose);e.on("dispose",this.dispose)}var e=r.prototype;e.version=function e(){return this.constructor.VERSION};e.getEventHash=function e(t){if(t===void 0){t={}}t.name=this.name;t.plugin=this.constructor;t.instance=this;return t};e.trigger=function e(t,i){if(i===void 0){i={}}return ye(this.eventBusEl_,t,this.getEventHash(i))};e.handleStateChanged=function e(t){};e.dispose=function e(){var t=this.name,i=this.player;this.trigger("dispose");this.off();i.off("dispose",this.dispose);i[gs][t]=false;this.player=this.state=null;i[t]=ws(t,ys[t])};r.isBasic=function e(t){var i=typeof t==="string"?bs(t):t;return typeof i==="function"&&!r.prototype.isPrototypeOf(i.prototype)};r.registerPlugin=function e(t,i){if(typeof t!=="string"){throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".")}if(_s(t)){m.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!')}else if(ps.prototype.hasOwnProperty(t)){throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!')}if(typeof i!=="function"){throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof i+".")}ys[t]=i;if(t!==vs){if(r.isBasic(i)){ps.prototype[t]=ks(t,i)}else{ps.prototype[t]=ws(t,i)}}return i};r.deregisterPlugin=function e(t){if(t===vs){throw new Error("Cannot de-register base plugin.")}if(_s(t)){delete ys[t];delete ps.prototype[t]}};r.getPlugins=function e(t){if(t===void 0){t=Object.keys(ys)}var i;t.forEach(function(e){var t=bs(e);if(t){i=i||{};i[e]=t}});return i};r.getPluginVersion=function e(t){var i=bs(t);return i&&i.VERSION||""};return r}();Cs.getPlugin=bs;Cs.BASE_PLUGIN_NAME=vs;Cs.registerPlugin(vs,Cs);ps.prototype.usingPlugin=function(e){return!!this[gs]&&this[gs][e]===true};ps.prototype.hasPlugin=function(e){return!!_s(e)};var Es=function e(t,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof i)}t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(i){t.super_=i}};var As=function e(t,i){if(i===void 0){i={}}var r=function e(){t.apply(this,arguments)};var n={};if(typeof i==="object"){if(i.constructor!==Object.prototype.constructor){r=i.constructor}n=i}else if(typeof i==="function"){r=i}Es(r,t);for(var a in n){if(n.hasOwnProperty(a)){r.prototype[a]=n[a]}}return r};var Ls=function e(t){return t.indexOf("#")===0?t.slice(1):t};function Is(e,i,t){var r=Is.getPlayer(e);if(r){if(i){m.warn('Player "'+e+'" is already initialised. Options will not be applied.')}if(t){r.ready(t)}return r}var n=typeof e==="string"?te("#"+Ls(e)):e;if(!I(n)){throw new TypeError("The element or ID supplied is not valid. (videojs)")}if(!n.ownerDocument.defaultView||!n.ownerDocument.body.contains(n)){m.warn("The element supplied is not included in the DOM")}i=i||{};Is.hooks("beforesetup").forEach(function(e){var t=e(n,Ge(i));if(!T(t)||Array.isArray(t)){m.error("please return an object in beforesetup hooks");return}i=Ge(i,t)});var a=Xe.getComponent("Player");r=new a(n,i,t);Is.hooks("setup").forEach(function(e){return e(r)});return r}Is.hooks_={};Is.hooks=function(e,t){Is.hooks_[e]=Is.hooks_[e]||[];if(t){Is.hooks_[e]=Is.hooks_[e].concat(t)}return Is.hooks_[e]};Is.hook=function(e,t){Is.hooks(e,t)};Is.hookOnce=function(i,e){Is.hooks(i,[].concat(e).map(function(t){var e=function e(){Is.removeHook(i,e);return t.apply(void 0,arguments)};return e}))};Is.removeHook=function(e,t){var i=Is.hooks(e).indexOf(t);if(i<=-1){return false}Is.hooks_[e]=Is.hooks_[e].slice();Is.hooks_[e].splice(i,1);return true};if(_.VIDEOJS_NO_DYNAMIC_STYLE!==true&&L()){var Ps=te(".vjs-styles-defaults");if(!Ps){Ps=Ce("vjs-styles-defaults");var Os=te("head");if(Os){Os.insertBefore(Ps,Os.firstChild)}Ee(Ps,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}we(1,Is);Is.VERSION=c;Is.options=ps.prototype.options_;Is.getPlayers=function(){return ps.players};Is.getPlayer=function(e){var t=ps.players;var i;if(typeof e==="string"){var r=Ls(e);var n=t[r];if(n){return n}i=te("#"+r)}else{i=e}if(I(i)){var a=i,s=a.player,o=a.playerId;if(s||t[o]){return s||t[o]}}};Is.getAllPlayers=function(){return Object.keys(ps.players).map(function(e){return ps.players[e]}).filter(Boolean)};Is.players=ps.players;Is.getComponent=Xe.getComponent;Is.registerComponent=function(e,t){if(Gr.isTech(t)){m.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)")}Xe.registerComponent.call(Xe,e,t)};Is.getTech=Gr.getTech;Is.registerTech=Gr.registerTech;Is.use=$r;Object.defineProperty(Is,"middleware",{value:{},writeable:false,enumerable:true});Object.defineProperty(Is.middleware,"TERMINATOR",{value:Kr,writeable:false,enumerable:true});Is.browser=ht;Is.TOUCH_ENABLED=dt;Is.extend=As;Is.mergeOptions=Ge;Is.bind=Ae;Is.registerPlugin=Cs.registerPlugin;Is.deregisterPlugin=Cs.deregisterPlugin;Is.plugin=function(e,t){m.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return Cs.registerPlugin(e,t)};Is.getPlugins=Cs.getPlugins;Is.getPlugin=Cs.getPlugin;Is.getPluginVersion=Cs.getPluginVersion;Is.addLanguage=function(e,t){var i;e=(""+e).toLowerCase();Is.options.languages=Ge(Is.options.languages,(i={},i[e]=t,i));return Is.options.languages[e]};Is.log=m;Is.createLogger=v;Is.createTimeRange=Is.createTimeRanges=gt;Is.formatTime=xn;Is.setFormatTime=Un;Is.resetFormatTime=Dn;Is.parseUrl=si;Is.isCrossOrigin=li;Is.EventTarget=Pe;Is.on=ve;Is.one=_e;Is.off=ge;Is.trigger=ye;Is.xhr=Ni;Is.TextTrack=Yi;Is.AudioTrack=Ki;Is.VideoTrack=$i;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){Is[e]=function(){m.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead");return re[e].apply(null,arguments)}});Is.computedStyle=k;Is.dom=re;Is.url=ci;var Us=Bt(function(t,e){(function(e){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/;var f=/^([^\/?#]*)(.*)$/;var i=/(?:\/|^)\.(?=\/)/g;var n=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g;var d={buildAbsoluteURL:function e(t,i,r){r=r||{};t=t.trim();i=i.trim();if(!i){if(!r.alwaysNormalize){return t}var n=d.parseURL(t);if(!n){throw new Error("Error trying to parse base URL.")}n.path=d.normalizePath(n.path);return d.buildURLFromParts(n)}var a=d.parseURL(i);if(!a){throw new Error("Error trying to parse relative URL.")}if(a.scheme){if(!r.alwaysNormalize){return i}a.path=d.normalizePath(a.path);return d.buildURLFromParts(a)}var s=d.parseURL(t);if(!s){throw new Error("Error trying to parse base URL.")}if(!s.netLoc&&s.path&&s.path[0]!=="/"){var o=f.exec(s.path);s.netLoc=o[1];s.path=o[2]}if(s.netLoc&&!s.path){s.path="/"}var u={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc){u.netLoc=s.netLoc;if(a.path[0]!=="/"){if(!a.path){u.path=s.path;if(!a.params){u.params=s.params;if(!a.query){u.query=s.query}}}else{var l=s.path;var c=l.substring(0,l.lastIndexOf("/")+1)+a.path;u.path=d.normalizePath(c)}}}if(u.path===null){u.path=r.alwaysNormalize?d.normalizePath(a.path):a.path}return d.buildURLFromParts(u)},parseURL:function e(t){var i=r.exec(t);if(!i){return null}return{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}},normalizePath:function e(t){t=t.split("").reverse().join("").replace(i,"");while(t.length!==(t=t.replace(n,"")).length){}return t.split("").reverse().join("")},buildURLFromParts:function e(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=d})(Mt)});function Ds(){Ds=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i){if(Object.prototype.hasOwnProperty.call(i,r)){e[r]=i[r]}}}return e};return Ds.apply(this,arguments)}function xs(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function Rs(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var Ms=function(){function e(){this.listeners={}}var t=e.prototype;t.on=function e(t,i){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(i)};t.off=function e(t,i){if(!this.listeners[t]){return false}var r=this.listeners[t].indexOf(i);this.listeners[t].splice(r,1);return r>-1};t.trigger=function e(t){var i=this.listeners[t];var r;var n;var a;if(!i){return}if(arguments.length===2){n=i.length;for(r=0;r<n;++r){i[r].call(this,arguments[1])}}else{a=Array.prototype.slice.call(arguments,1);n=i.length;for(r=0;r<n;++r){i[r].apply(this,a)}}};t.dispose=function e(){this.listeners={}};t.pipe=function e(t){this.on("data",function(e){t.push(e)})};return e}();var Bs=function(t){xs(e,t);function e(){var e;e=t.call(this)||this;e.buffer="";return e}var i=e.prototype;i.push=function e(t){var i;this.buffer+=t;i=this.buffer.indexOf("\n");for(;i>-1;i=this.buffer.indexOf("\n")){this.trigger("data",this.buffer.substring(0,i));this.buffer=this.buffer.substring(i+1)}};return e}(Ms);var Ns=function e(){var t="[^=]*";var i='"[^"]*"|[^,]*';var r="(?:"+t+")=(?:"+i+")";return new RegExp("(?:^|,)("+r+")")};var js=function e(t){var i=t.split(Ns());var r={};var n=i.length;var a;while(n--){if(i[n]===""){continue}a=/([^=]*)=(.*)/.exec(i[n]).slice(1);a[0]=a[0].replace(/^\s+|\s+$/g,"");a[1]=a[1].replace(/^\s+|\s+$/g,"");a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1");r[a[0]]=a[1]}return r};var Fs=function(t){xs(e,t);function e(){var e;e=t.call(this)||this;e.customParsers=[];e.tagMappers=[];return e}var i=e.prototype;i.push=function e(r){var u=this;var l;var c;r=r.trim();if(r.length===0){return}if(r[0]!=="#"){this.trigger("data",{type:"uri",uri:r});return}var t=this.tagMappers.reduce(function(e,t){var i=t(r);if(i===r){return e}return e.concat([i])},[r]);t.forEach(function(e){for(var t=0;t<u.customParsers.length;t++){if(u.customParsers[t].call(u,e)){return}}if(e.indexOf("#EXT")!==0){u.trigger("data",{type:"comment",text:e.slice(1)});return}e=e.replace("\r","");l=/^#EXTM3U/.exec(e);if(l){u.trigger("data",{type:"tag",tagType:"m3u"});return}l=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e);if(l){c={type:"tag",tagType:"inf"};if(l[1]){c.duration=parseFloat(l[1])}if(l[2]){c.title=l[2]}u.trigger("data",c);return}l=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e);if(l){c={type:"tag",tagType:"targetduration"};if(l[1]){c.duration=parseInt(l[1],10)}u.trigger("data",c);return}l=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e);if(l){c={type:"tag",tagType:"totalduration"};if(l[1]){c.duration=parseInt(l[1],10)}u.trigger("data",c);return}l=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e);if(l){c={type:"tag",tagType:"version"};if(l[1]){c.version=parseInt(l[1],10)}u.trigger("data",c);return}l=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e);if(l){c={type:"tag",tagType:"media-sequence"};if(l[1]){c.number=parseInt(l[1],10)}u.trigger("data",c);return}l=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e);if(l){c={type:"tag",tagType:"discontinuity-sequence"};if(l[1]){c.number=parseInt(l[1],10)}u.trigger("data",c);return}l=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e);if(l){c={type:"tag",tagType:"playlist-type"};if(l[1]){c.playlistType=l[1]}u.trigger("data",c);return}l=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e);if(l){c={type:"tag",tagType:"byterange"};if(l[1]){c.length=parseInt(l[1],10)}if(l[2]){c.offset=parseInt(l[2],10)}u.trigger("data",c);return}l=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e);if(l){c={type:"tag",tagType:"allow-cache"};if(l[1]){c.allowed=!/NO/.test(l[1])}u.trigger("data",c);return}l=/^#EXT-X-MAP:?(.*)$/.exec(e);if(l){c={type:"tag",tagType:"map"};if(l[1]){var i=js(l[1]);if(i.URI){c.uri=i.URI}if(i.BYTERANGE){var r=i.BYTERANGE.split("@"),n=r[0],a=r[1];c.byterange={};if(n){c.byterange.length=parseInt(n,10)}if(a){c.byterange.offset=parseInt(a,10)}}}u.trigger("data",c);return}l=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e);if(l){c={type:"tag",tagType:"stream-inf"};if(l[1]){c.attributes=js(l[1]);if(c.attributes.RESOLUTION){var s=c.attributes.RESOLUTION.split("x");var o={};if(s[0]){o.width=parseInt(s[0],10)}if(s[1]){o.height=parseInt(s[1],10)}c.attributes.RESOLUTION=o}if(c.attributes.BANDWIDTH){c.attributes.BANDWIDTH=parseInt(c.attributes.BANDWIDTH,10)}if(c.attributes["PROGRAM-ID"]){c.attributes["PROGRAM-ID"]=parseInt(c.attributes["PROGRAM-ID"],10)}}u.trigger("data",c);return}l=/^#EXT-X-MEDIA:?(.*)$/.exec(e);if(l){c={type:"tag",tagType:"media"};if(l[1]){c.attributes=js(l[1])}u.trigger("data",c);return}l=/^#EXT-X-ENDLIST/.exec(e);if(l){u.trigger("data",{type:"tag",tagType:"endlist"});return}l=/^#EXT-X-DISCONTINUITY/.exec(e);if(l){u.trigger("data",{type:"tag",tagType:"discontinuity"});return}l=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e);if(l){c={type:"tag",tagType:"program-date-time"};if(l[1]){c.dateTimeString=l[1];c.dateTimeObject=new Date(l[1])}u.trigger("data",c);return}l=/^#EXT-X-KEY:?(.*)$/.exec(e);if(l){c={type:"tag",tagType:"key"};if(l[1]){c.attributes=js(l[1]);if(c.attributes.IV){if(c.attributes.IV.substring(0,2).toLowerCase()==="0x"){c.attributes.IV=c.attributes.IV.substring(2)}c.attributes.IV=c.attributes.IV.match(/.{8}/g);c.attributes.IV[0]=parseInt(c.attributes.IV[0],16);c.attributes.IV[1]=parseInt(c.attributes.IV[1],16);c.attributes.IV[2]=parseInt(c.attributes.IV[2],16);c.attributes.IV[3]=parseInt(c.attributes.IV[3],16);c.attributes.IV=new Uint32Array(c.attributes.IV)}}u.trigger("data",c);return}l=/^#EXT-X-START:?(.*)$/.exec(e);if(l){c={type:"tag",tagType:"start"};if(l[1]){c.attributes=js(l[1]);c.attributes["TIME-OFFSET"]=parseFloat(c.attributes["TIME-OFFSET"]);c.attributes.PRECISE=/YES/.test(c.attributes.PRECISE)}u.trigger("data",c);return}l=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e);if(l){c={type:"tag",tagType:"cue-out-cont"};if(l[1]){c.data=l[1]}else{c.data=""}u.trigger("data",c);return}l=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e);if(l){c={type:"tag",tagType:"cue-out"};if(l[1]){c.data=l[1]}else{c.data=""}u.trigger("data",c);return}l=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e);if(l){c={type:"tag",tagType:"cue-in"};if(l[1]){c.data=l[1]}else{c.data=""}u.trigger("data",c);return}u.trigger("data",{type:"tag",data:e.slice(4)})})};i.addParser=function e(t){var i=this;var r=t.expression,n=t.customType,a=t.dataParser,s=t.segment;if(typeof a!=="function"){a=function e(t){return t}}this.customParsers.push(function(e){var t=r.exec(e);if(t){i.trigger("data",{type:"custom",data:a(e),customType:n,segment:s});return true}})};i.addTagMapper=function e(t){var i=t.expression,r=t.map;var n=function e(t){if(i.test(t)){return r(t)}return t};this.tagMappers.push(n)};return e}(Ms);var Vs=function(i){xs(e,i);function e(){var e;e=i.call(this)||this;e.lineStream=new Bs;e.parseStream=new Fs;e.lineStream.pipe(e.parseStream);var t=Rs(Rs(e));var a=[];var s={};var o;var u;var l=function e(){};var c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};var f=0;e.manifest={allowCache:true,discontinuityStarts:[],segments:[]};e.parseStream.on("data",function(i){var r;var n;({tag:function e(){({"allow-cache":function e(){this.manifest.allowCache=i.allowed;if(!("allowed"in i)){this.trigger("info",{message:"defaulting allowCache to YES"});this.manifest.allowCache=true}},byterange:function e(){var e={};if("length"in i){s.byterange=e;e.length=i.length;if(!("offset"in i)){this.trigger("info",{message:"defaulting offset to zero"});i.offset=0}}if("offset"in i){s.byterange=e;e.offset=i.offset}},endlist:function e(){this.manifest.endList=true},inf:function e(){if(!("mediaSequence"in this.manifest)){this.manifest.mediaSequence=0;this.trigger("info",{message:"defaulting media sequence to zero"})}if(!("discontinuitySequence"in this.manifest)){this.manifest.discontinuitySequence=0;this.trigger("info",{message:"defaulting discontinuity sequence to zero"})}if(i.duration>0){s.duration=i.duration}if(i.duration===0){s.duration=.01;this.trigger("info",{message:"updating zero segment duration to a small value"})}this.manifest.segments=a},key:function e(){if(!i.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(i.attributes.METHOD==="NONE"){u=null;return}if(!i.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(!i.attributes.METHOD){this.trigger("warn",{message:"defaulting key method to AES-128"})}u={method:i.attributes.METHOD||"AES-128",uri:i.attributes.URI};if(typeof i.attributes.IV!=="undefined"){u.iv=i.attributes.IV}},"media-sequence":function e(){if(!isFinite(i.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+i.number});return}this.manifest.mediaSequence=i.number},"discontinuity-sequence":function e(){if(!isFinite(i.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+i.number});return}this.manifest.discontinuitySequence=i.number;f=i.number},"playlist-type":function e(){if(!/VOD|EVENT/.test(i.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+i.playlist});return}this.manifest.playlistType=i.playlistType},map:function e(){o={};if(i.uri){o.uri=i.uri}if(i.byterange){o.byterange=i.byterange}},"stream-inf":function e(){this.manifest.playlists=a;this.manifest.mediaGroups=this.manifest.mediaGroups||c;if(!i.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}if(!s.attributes){s.attributes={}}Ds(s.attributes,i.attributes)},media:function e(){this.manifest.mediaGroups=this.manifest.mediaGroups||c;if(!(i.attributes&&i.attributes.TYPE&&i.attributes["GROUP-ID"]&&i.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var t=this.manifest.mediaGroups[i.attributes.TYPE];t[i.attributes["GROUP-ID"]]=t[i.attributes["GROUP-ID"]]||{};r=t[i.attributes["GROUP-ID"]];n={default:/yes/i.test(i.attributes.DEFAULT)};if(n.default){n.autoselect=true}else{n.autoselect=/yes/i.test(i.attributes.AUTOSELECT)}if(i.attributes.LANGUAGE){n.language=i.attributes.LANGUAGE}if(i.attributes.URI){n.uri=i.attributes.URI}if(i.attributes["INSTREAM-ID"]){n.instreamId=i.attributes["INSTREAM-ID"]}if(i.attributes.CHARACTERISTICS){n.characteristics=i.attributes.CHARACTERISTICS}if(i.attributes.FORCED){n.forced=/yes/i.test(i.attributes.FORCED)}r[i.attributes.NAME]=n},discontinuity:function e(){f+=1;s.discontinuity=true;this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function e(){if(typeof this.manifest.dateTimeString==="undefined"){this.manifest.dateTimeString=i.dateTimeString;this.manifest.dateTimeObject=i.dateTimeObject}s.dateTimeString=i.dateTimeString;s.dateTimeObject=i.dateTimeObject},targetduration:function e(){if(!isFinite(i.duration)||i.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+i.duration});return}this.manifest.targetDuration=i.duration},totalduration:function e(){if(!isFinite(i.duration)||i.duration<0){this.trigger("warn",{message:"ignoring invalid total duration: "+i.duration});return}this.manifest.totalDuration=i.duration},start:function e(){if(!i.attributes||isNaN(i.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:i.attributes["TIME-OFFSET"],precise:i.attributes.PRECISE}},"cue-out":function e(){s.cueOut=i.data},"cue-out-cont":function e(){s.cueOutCont=i.data},"cue-in":function e(){s.cueIn=i.data}}[i.tagType]||l).call(t)},uri:function e(){s.uri=i.uri;a.push(s);if(this.manifest.targetDuration&&!("duration"in s)){this.trigger("warn",{message:"defaulting segment duration to the target duration"});s.duration=this.manifest.targetDuration}if(u){s.key=u}s.timeline=f;if(o){s.map=o}s={}},comment:function e(){},custom:function e(){if(i.segment){s.custom=s.custom||{};s.custom[i.customType]=i.data}else{this.manifest.custom=this.manifest.custom||{};this.manifest.custom[i.customType]=i.data}}})[i.type].call(t)});return e}var t=e.prototype;t.push=function e(t){this.lineStream.push(t)};t.end=function e(){this.lineStream.push("\n")};t.addParser=function e(t){this.parseStream.addParser(t)};t.addTagMapper=function e(t){this.parseStream.addTagMapper(t)};return e}(Ms);var Hs=function e(t){return!!t&&typeof t==="object"};var qs=function r(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++){t[i]=arguments[i]}return t.reduce(function(t,i){Object.keys(i).forEach(function(e){if(Array.isArray(t[e])&&Array.isArray(i[e])){t[e]=t[e].concat(i[e])}else if(Hs(t[e])&&Hs(i[e])){t[e]=r(t[e],i[e])}else{t[e]=i[e]}});return t},{})};var zs=function e(t){return Object.keys(t).map(function(e){return t[e]})};var Ws=function e(t,i){var r=[];for(var n=t;n<i;n++){r.push(n)}return r};var Gs=function e(t){return t.reduce(function(e,t){return e.concat(t)},[])};var Xs=function e(t){if(!t.length){return[]}var i=[];for(var r=0;r<t.length;r++){i.push(t[r])}return i};var Ys=function e(t,r){return t.reduce(function(e,t,i){if(t[r]){e.push(i)}return e},[])};var Ks=function e(t){var i=zs(t.reduce(function(e,t){var i=t.attributes.id+(t.attributes.lang||"");if(e[i]){var r;t.segments[0].discontinuity=true;(r=e[i].segments).push.apply(r,t.segments);if(t.attributes.contentProtection){e[i].attributes.contentProtection=t.attributes.contentProtection}}else{e[i]=t}return e},{}));return i.map(function(e){e.discontinuityStarts=Ys(e.segments,"discontinuity");return e})};var $s=function e(t){var i;var r=t.attributes,n=t.segments;var a={attributes:(i={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:(r.type||"static")==="static",timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1};if(r.contentProtection){a.contentProtection=r.contentProtection}return a};var Qs=function e(t){var i;var r=t.attributes,n=t.segments;if(typeof n==="undefined"){n=[{uri:r.baseUrl,timeline:r.periodIndex,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}];r.duration=r.sourceDuration}return{attributes:(i={NAME:r.id,BANDWIDTH:r.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:(r.type||"static")==="static",timeline:r.periodIndex,resolvedUri:r.baseUrl||"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1}};var Js=function e(t){return t.reduce(function(e,t){var i=t.attributes.role&&t.attributes.role.value||"main";var r=t.attributes.lang||"";var n="main";if(r){n=t.attributes.lang+" ("+i+")"}if(e[n]&&e[n].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth){return e}e[n]={language:r,autoselect:true,default:i==="main",playlists:[$s(t)],uri:""};return e},{})};var Zs=function e(t){return t.reduce(function(e,t){var i=t.attributes.lang||"text";if(e[i]){return e}e[i]={language:i,default:false,autoselect:false,playlists:[Qs(t)],uri:""};return e},{})};var eo=function e(t){var i;var r=t.attributes,n=t.segments;var a={attributes:(i={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:(r.type||"static")==="static",timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1};if(r.contentProtection){a.contentProtection=r.contentProtection}return a};var to=function e(t){var i;if(!t.length){return{}}var r=t[0].attributes,n=r.sourceDuration,a=r.minimumUpdatePeriod,s=a===void 0?0:a;var o=function e(t){var i=t.attributes;return i.mimeType==="video/mp4"||i.contentType==="video"};var u=function e(t){var i=t.attributes;return i.mimeType==="audio/mp4"||i.contentType==="audio"};var l=function e(t){var i=t.attributes;return i.mimeType==="text/vtt"||i.contentType==="text"};var c=Ks(t.filter(o)).map(eo);var f=Ks(t.filter(u));var d=t.filter(l);var h={allowCache:true,discontinuityStarts:[],segments:[],endList:true,mediaGroups:(i={AUDIO:{},VIDEO:{}},i["CLOSED-CAPTIONS"]={},i.SUBTITLES={},i),uri:"",duration:n,playlists:c,minimumUpdatePeriod:s*1e3};if(f.length){h.mediaGroups.AUDIO.audio=Js(f)}if(d.length){h.mediaGroups.SUBTITLES.subs=Zs(d)}return h};var io=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function ro(e,t){return t={exports:{}},e(t,t.exports),t.exports}var no=ro(function(t,e){(function(e){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/;var f=/^([^\/?#]*)(.*)$/;var i=/(?:\/|^)\.(?=\/)/g;var n=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g;var d={buildAbsoluteURL:function e(t,i,r){r=r||{};t=t.trim();i=i.trim();if(!i){if(!r.alwaysNormalize){return t}var n=d.parseURL(t);if(!n){throw new Error("Error trying to parse base URL.")}n.path=d.normalizePath(n.path);return d.buildURLFromParts(n)}var a=d.parseURL(i);if(!a){throw new Error("Error trying to parse relative URL.")}if(a.scheme){if(!r.alwaysNormalize){return i}a.path=d.normalizePath(a.path);return d.buildURLFromParts(a)}var s=d.parseURL(t);if(!s){throw new Error("Error trying to parse base URL.")}if(!s.netLoc&&s.path&&s.path[0]!=="/"){var o=f.exec(s.path);s.netLoc=o[1];s.path=o[2]}if(s.netLoc&&!s.path){s.path="/"}var u={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc){u.netLoc=s.netLoc;if(a.path[0]!=="/"){if(!a.path){u.path=s.path;if(!a.params){u.params=s.params;if(!a.query){u.query=s.query}}}else{var l=s.path;var c=l.substring(0,l.lastIndexOf("/")+1)+a.path;u.path=d.normalizePath(c)}}}if(u.path===null){u.path=r.alwaysNormalize?d.normalizePath(a.path):a.path}return d.buildURLFromParts(u)},parseURL:function e(t){var i=r.exec(t);if(!i){return null}return{scheme:i[1]||"",netLoc:i[2]||"",path:i[3]||"",params:i[4]||"",query:i[5]||"",fragment:i[6]||""}},normalizePath:function e(t){t=t.split("").reverse().join("").replace(i,"");while(t.length!==(t=t.replace(n,"")).length){}return t.split("").reverse().join("")},buildURLFromParts:function e(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=d})(io)});var ao=function e(t,i){if(/^[a-z]+:/i.test(i)){return i}if(!/\/\//i.test(t)){t=no.buildAbsoluteURL(_.location.href,t)}return no.buildAbsoluteURL(t,i)};var so=function e(t){var i=t.baseUrl,r=i===void 0?"":i,n=t.source,a=n===void 0?"":n,s=t.range,o=s===void 0?"":s;var u={uri:a,resolvedUri:ao(r||"",a)};if(o){var l=o.split("-");var c=parseInt(l[0],10);var f=parseInt(l[1],10);u.byterange={length:f-c,offset:c}}return u};var oo=function e(t,i,r){var n=t.NOW,a=t.clientOffset,s=t.availabilityStartTime,o=t.timescale,u=o===void 0?1:o,l=t.start,c=l===void 0?0:l,f=t.minimumUpdatePeriod,d=f===void 0?0:f;var h=(n+a)/1e3;var p=s+c;var m=h+d;var v=m-p;return Math.ceil((v*u-i)/r)};var uo=function e(t,i){var r=t.type,n=r===void 0?"static":r,a=t.minimumUpdatePeriod,s=a===void 0?0:a,o=t.media,u=o===void 0?"":o,l=t.sourceDuration,c=t.timescale,f=c===void 0?1:c,d=t.startNumber,h=d===void 0?1:d,p=t.periodIndex;var m=[];var v=-1;for(var g=0;g<i.length;g++){var y=i[g];var _=y.d;var b=y.r||0;var T=y.t||0;if(v<0){v=T}if(T&&T>v){v=T}var S=void 0;if(b<0){var k=g+1;if(k===i.length){if(n==="dynamic"&&s>0&&u.indexOf("$Number$")>0){S=oo(t,v,_)}else{S=(l*f-v)/_}}else{S=(i[k].t-v)/_}}else{S=b+1}var w=h+m.length+S;var C=h+m.length;while(C<w){m.push({number:C,duration:_/f,time:v,timeline:p});v+=_;C++}}return m};var lo={static:function e(t){var i=t.duration,r=t.timescale,n=r===void 0?1:r,a=t.sourceDuration;return{start:0,end:Math.ceil(a/(i/n))}},dynamic:function e(t){var i=t.NOW,r=t.clientOffset,n=t.availabilityStartTime,a=t.timescale,s=a===void 0?1:a,o=t.duration,u=t.start,l=u===void 0?0:u,c=t.minimumUpdatePeriod,f=c===void 0?0:c,d=t.timeShiftBufferDepth,h=d===void 0?Infinity:d;var p=(i+r)/1e3;var m=n+l;var v=p+f;var g=v-m;var y=Math.ceil(g*s/o);var _=Math.floor((p-m-h)*s/o);var b=Math.floor((p-m)*s/o);return{start:Math.max(0,_),end:Math.min(y,b)}}};var co=function e(u){return function(e,t){var i=u.duration,r=u.timescale,n=r===void 0?1:r,a=u.periodIndex,s=u.startNumber,o=s===void 0?1:s;return{number:o+e,duration:i/n,timeline:a,time:t*i}}};var fo=function e(t){var i=t.type,r=i===void 0?"static":i,n=t.duration,a=t.timescale,s=a===void 0?1:a,o=t.sourceDuration;var u=lo[r](t),l=u.start,c=u.end;var f=Ws(l,c).map(co(t));if(r==="static"){var d=f.length-1;f[d].duration=o-n/s*d}return f};var ho=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g;var po=function e(a){return function(e,t,i,r){if(e==="$$"){return"$"}if(typeof a[t]==="undefined"){return e}var n=""+a[t];if(t==="RepresentationID"){return n}if(!i){r=1}else{r=parseInt(r,10)}if(n.length>=r){return n}return""+new Array(r-n.length+1).join("0")+n}};var mo=function e(t,i){return t.replace(ho,po(i))};var vo=function e(t,i){if(!t.duration&&!i){return[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]}if(t.duration){return fo(t)}return uo(t,i)};var go=function e(i,t){var r={RepresentationID:i.id,Bandwidth:i.bandwidth||0};var n=i.initialization,a=n===void 0?{sourceURL:"",range:""}:n;var s=so({baseUrl:i.baseUrl,source:mo(a.sourceURL,r),range:a.range});var o=vo(i,t);return o.map(function(e){r.Number=e.number;r.Time=e.time;var t=mo(i.media||"",r);return{uri:t,timeline:e.timeline,duration:e.duration,resolvedUri:ao(i.baseUrl||"",t),map:s,number:e.number}})};var yo={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};var _o=function e(t,i){var r=t.baseUrl,n=t.initialization,a=n===void 0?{}:n;var s=so({baseUrl:r,source:a.sourceURL,range:a.range});var o=so({baseUrl:r,source:i.media,range:i.mediaRange});o.map=s;return o};var bo=function e(t,i){var r=t.duration,n=t.segmentUrls,a=n===void 0?[]:n;if(!r&&!i||r&&i){throw new Error(yo.SEGMENT_TIME_UNSPECIFIED)}var s=a.map(function(e){return _o(t,e)});var o;if(r){o=fo(t)}if(i){o=uo(t,i)}var u=o.map(function(e,t){if(s[t]){var i=s[t];i.timeline=e.timeline;i.duration=e.duration;i.number=e.number;return i}}).filter(function(e){return e});return u};var To=function e(t){var i=t.baseUrl,r=t.initialization,n=r===void 0?{}:r,a=t.sourceDuration,s=t.timescale,o=s===void 0?1:s,u=t.indexRange,l=u===void 0?"":u,c=t.duration;if(!i){throw new Error(yo.NO_BASE_URL)}var f=so({baseUrl:i,source:n.sourceURL,range:n.range});var d=so({baseUrl:i,source:i,range:l});d.map=f;if(c){var h=fo(t);if(h.length){d.duration=h[0].duration;d.timeline=h[0].timeline}}else if(a){d.duration=a/o;d.timeline=0}d.number=0;return[d]};var So=function e(t){var i=t.attributes,r=t.segmentInfo;var n;var a;if(r.template){a=go;n=qs(i,r.template)}else if(r.base){a=To;n=qs(i,r.base)}else if(r.list){a=bo;n=qs(i,r.list)}if(!a){return{attributes:i}}var s=a(n,r.timeline);if(n.duration){var o=n,u=o.duration,l=o.timescale,c=l===void 0?1:l;n.duration=u/c}else if(s.length){n.duration=s.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0)}else{n.duration=0}return{attributes:n,segments:s}};var ko=function e(t){return t.map(So)};var wo=function e(t,i){return Xs(t.childNodes).filter(function(e){var t=e.tagName;return t===i})};var Co=function e(t){return t.textContent.trim()};var Eo=function e(t){var i=365*24*60*60;var r=30*24*60*60;var n=24*60*60;var a=60*60;var s=60;var o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/;var u=o.exec(t);if(!u){return 0}var l=u.slice(1),c=l[0],f=l[1],d=l[2],h=l[3],p=l[4],m=l[5];return parseFloat(c||0)*i+parseFloat(f||0)*r+parseFloat(d||0)*n+parseFloat(h||0)*a+parseFloat(p||0)*s+parseFloat(m||0)};var Ao=function e(t){var i=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;if(i.test(t)){t+="Z"}return Date.parse(t)};var Lo={mediaPresentationDuration:function e(t){return Eo(t)},availabilityStartTime:function e(t){return Ao(t)/1e3},minimumUpdatePeriod:function e(t){return Eo(t)},timeShiftBufferDepth:function e(t){return Eo(t)},start:function e(t){return Eo(t)},width:function e(t){return parseInt(t,10)},height:function e(t){return parseInt(t,10)},bandwidth:function e(t){return parseInt(t,10)},startNumber:function e(t){return parseInt(t,10)},timescale:function e(t){return parseInt(t,10)},duration:function e(t){var i=parseInt(t,10);if(isNaN(i)){return Eo(t)}return i},d:function e(t){return parseInt(t,10)},t:function e(t){return parseInt(t,10)},r:function e(t){return parseInt(t,10)},DEFAULT:function e(t){return t}};var Io=function e(t){if(!(t&&t.attributes)){return{}}return Xs(t.attributes).reduce(function(e,t){var i=Lo[t.name]||Lo.DEFAULT;e[t.name]=i(t.value);return e},{})};function Po(e){var t=_.atob(e);var i=new Uint8Array(t.length);for(var r=0;r<t.length;r++){i[r]=t.charCodeAt(r)}return i}var Oo={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};var Uo=function e(t,i){if(!i.length){return t}return Gs(t.map(function(t){return i.map(function(e){return ao(t,Co(e))})}))};var Do=function e(t){var i=wo(t,"SegmentTemplate")[0];var r=wo(t,"SegmentList")[0];var n=r&&wo(r,"SegmentURL").map(function(e){return qs({tag:"SegmentURL"},Io(e))});var a=wo(t,"SegmentBase")[0];var s=r||i;var o=s&&wo(s,"SegmentTimeline")[0];var u=r||a||i;var l=u&&wo(u,"Initialization")[0];var c=i&&Io(i);if(c&&l){c.initialization=l&&Io(l)}else if(c&&c.initialization){c.initialization={sourceURL:c.initialization}}var f={template:c,timeline:o&&wo(o,"S").map(function(e){return Io(e)}),list:r&&qs(Io(r),{segmentUrls:n,initialization:Io(l)}),base:a&&qs(Io(a),{initialization:Io(l)})};Object.keys(f).forEach(function(e){if(!f[e]){delete f[e]}});return f};var xo=function e(a,s,o){return function(e){var t=wo(e,"BaseURL");var i=Uo(s,t);var r=qs(a,Io(e));var n=Do(e);return i.map(function(e){return{segmentInfo:qs(o,n),attributes:qs(r,{baseUrl:e})}})}};var Ro=function e(t){return t.reduce(function(e,t){var i=Io(t);var r=Oo[i.schemeIdUri];if(r){e[r]={attributes:i};var n=wo(t,"cenc:pssh")[0];if(n){var a=Co(n);var s=a&&Po(a);e[r].pssh=s}}return e},{})};var Mo=function e(c,f,d){return function(e){var t=Io(e);var i=Uo(f,wo(e,"BaseURL"));var r=wo(e,"Role")[0];var n={role:Io(r)};var a=qs(c,t,n);var s=Ro(wo(e,"ContentProtection"));if(Object.keys(s).length){a=qs(a,{contentProtection:s})}var o=Do(e);var u=wo(e,"Representation");var l=qs(d,o);return Gs(u.map(xo(a,i,l)))}};var Bo=function e(l,c){return function(e,t){var i=Uo(c,wo(e,"BaseURL"));var r=Io(e);var n=parseInt(r.id,10);var a=_.isNaN(n)?t:n;var s=qs(l,{periodIndex:a});var o=wo(e,"AdaptationSet");var u=Do(e);return Gs(o.map(Mo(s,i,u)))}};var No=function e(t,i){if(i===void 0){i={}}var r=i,n=r.manifestUri,a=n===void 0?"":n,s=r.NOW,o=s===void 0?Date.now():s,u=r.clientOffset,l=u===void 0?0:u;var c=wo(t,"Period");if(!c.length){throw new Error(yo.INVALID_NUMBER_OF_PERIOD)}var f=Io(t);var d=Uo([a],wo(t,"BaseURL"));f.sourceDuration=f.mediaPresentationDuration||0;f.NOW=o;f.clientOffset=l;return Gs(c.map(Bo(f,d)))};var jo=function e(t){if(t===""){throw new Error(yo.DASH_EMPTY_MANIFEST)}var i=new _.DOMParser;var r=i.parseFromString(t,"application/xml");var n=r&&r.documentElement.tagName==="MPD"?r.documentElement:null;if(!n||n&&n.getElementsByTagName("parsererror").length>0){throw new Error(yo.DASH_INVALID_XML)}return n};var Fo=function e(t){var i=wo(t,"UTCTiming")[0];if(!i){return null}var r=Io(i);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT";r.value=Date.parse(r.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(yo.UNSUPPORTED_UTC_TIMING_SCHEME)}return r};var Vo=function e(t,i){return to(ko(No(jo(t),i)))};var Ho=function e(t){return Fo(jo(t))};var qo=function e(t){return t>>>0};var zo={toUnsigned:qo};var Wo=zo.toUnsigned;var Go,Xo,Yo,Ko,$o;Go=function e(t,i){var r=[],n,a,s,o,u;if(!i.length){return null}for(n=0;n<t.byteLength;){a=Wo(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);s=Xo(t.subarray(n+4,n+8));o=a>1?n+a:t.byteLength;if(s===i[0]){if(i.length===1){r.push(t.subarray(n+8,o))}else{u=Go(t.subarray(n+8,o),i.slice(1));if(u.length){r=r.concat(u)}}}n=o}return r};Xo=function e(t){var i="";i+=String.fromCharCode(t[0]);i+=String.fromCharCode(t[1]);i+=String.fromCharCode(t[2]);i+=String.fromCharCode(t[3]);return i};Yo=function e(t){var i={},r=Go(t,["moov","trak"]);return r.reduce(function(e,t){var i,r,n,a,s;i=Go(t,["tkhd"])[0];if(!i){return null}r=i[0];n=r===0?12:20;a=Wo(i[n]<<24|i[n+1]<<16|i[n+2]<<8|i[n+3]);s=Go(t,["mdia","mdhd"])[0];if(!s){return null}r=s[0];n=r===0?12:20;e[a]=Wo(s[n]<<24|s[n+1]<<16|s[n+2]<<8|s[n+3]);return e},i)};Ko=function e(a,t){var i,r,n;i=Go(t,["moof","traf"]);r=[].concat.apply([],i.map(function(n){return Go(n,["tfhd"]).map(function(e){var t,i,r;t=Wo(e[4]<<24|e[5]<<16|e[6]<<8|e[7]);i=a[t]||9e4;r=Go(n,["tfdt"]).map(function(e){var t,i;t=e[0];i=Wo(e[4]<<24|e[5]<<16|e[6]<<8|e[7]);if(t===1){i*=Math.pow(2,32);i+=Wo(e[8]<<24|e[9]<<16|e[10]<<8|e[11])}return i})[0];r=r||Infinity;return r/i})}));n=Math.min.apply(null,r);return isFinite(n)?n:0};$o=function e(t){var i=Go(t,["moov","trak"]);var u=[];i.forEach(function(e){var t=Go(e,["mdia","hdlr"]);var o=Go(e,["tkhd"]);t.forEach(function(e,t){var i=Xo(e.subarray(8,12));var r=o[t];var n;var a;var s;if(i==="vide"){n=new DataView(r.buffer,r.byteOffset,r.byteLength);a=n.getUint8(0);s=a===0?n.getUint32(12):n.getUint32(20);u.push(s)}})});return u};var Qo={findBox:Go,parseType:Xo,timescale:Yo,startTime:Ko,videoTrackIds:$o};var Jo=Math.pow(2,32)-1;var Zo,eu,tu,iu,ru,nu,au,su,ou,uu,lu,cu,fu,du,hu,pu,mu,vu,gu,yu,_u,bu,Tu,Su,ku,wu,Cu,Eu,Au,Lu,Iu,Pu,Ou,Uu,Du,xu;(function(){var e;Tu={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if(typeof Uint8Array==="undefined"){return}for(e in Tu){if(Tu.hasOwnProperty(e)){Tu[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]}}Su=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]);wu=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]);ku=new Uint8Array([0,0,0,1]);Cu=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);Eu=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Au={video:Cu,audio:Eu};Pu=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);Iu=new Uint8Array([0,0,0,0,0,0,0,0]);Ou=new Uint8Array([0,0,0,0,0,0,0,0]);Uu=Ou;Du=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);xu=Ou;Lu=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])})();Zo=function e(t){var i=[],r=0,n,a,s;for(n=1;n<arguments.length;n++){i.push(arguments[n])}n=i.length;while(n--){r+=i[n].byteLength}a=new Uint8Array(r+8);s=new DataView(a.buffer,a.byteOffset,a.byteLength);s.setUint32(0,a.byteLength);a.set(t,4);for(n=0,r=8;n<i.length;n++){a.set(i[n],r);r+=i[n].byteLength}return a};eu=function e(){return Zo(Tu.dinf,Zo(Tu.dref,Pu))};tu=function e(t){return Zo(Tu.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))};iu=function e(){return Zo(Tu.ftyp,Su,ku,Su,wu)};pu=function e(t){return Zo(Tu.hdlr,Au[t])};ru=function e(t){return Zo(Tu.mdat,t)};hu=function e(t){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,t.duration&255,85,196,0,0]);if(t.samplerate){i[12]=t.samplerate>>>24&255;i[13]=t.samplerate>>>16&255;i[14]=t.samplerate>>>8&255;i[15]=t.samplerate&255}return Zo(Tu.mdhd,i)};du=function e(t){return Zo(Tu.mdia,hu(t),pu(t.type),au(t))};nu=function e(t){return Zo(Tu.mfhd,new Uint8Array([0,0,0,0,(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255]))};au=function e(t){return Zo(Tu.minf,t.type==="video"?Zo(Tu.vmhd,Lu):Zo(Tu.smhd,Iu),eu(),vu(t))};su=function e(t,i){var r=[],n=i.length;while(n--){r[n]=yu(i[n])}return Zo.apply(null,[Tu.moof,nu(t)].concat(r))};ou=function e(t){var i=t.length,r=[];while(i--){r[i]=cu(t[i])}return Zo.apply(null,[Tu.moov,lu(4294967295)].concat(r).concat(uu(t)))};uu=function e(t){var i=t.length,r=[];while(i--){r[i]=_u(t[i])}return Zo.apply(null,[Tu.mvex].concat(r))};lu=function e(t){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Zo(Tu.mvhd,i)};mu=function e(t){var i=t.samples||[],r=new Uint8Array(4+i.length),n,a;for(a=0;a<i.length;a++){n=i[a].flags;r[a+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy}return Zo(Tu.sdtp,r)};vu=function e(t){return Zo(Tu.stbl,gu(t),Zo(Tu.stts,xu),Zo(Tu.stsc,Uu),Zo(Tu.stsz,Du),Zo(Tu.stco,Ou))};(function(){var i,r;gu=function e(t){return Zo(Tu.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),t.type==="video"?i(t):r(t))};i=function e(t){var i=t.sps||[],r=t.pps||[],n=[],a=[],s;for(s=0;s<i.length;s++){n.push((i[s].byteLength&65280)>>>8);n.push(i[s].byteLength&255);n=n.concat(Array.prototype.slice.call(i[s]))}for(s=0;s<r.length;s++){a.push((r[s].byteLength&65280)>>>8);a.push(r[s].byteLength&255);a=a.concat(Array.prototype.slice.call(r[s]))}return Zo(Tu.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(t.width&65280)>>8,t.width&255,(t.height&65280)>>8,t.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),Zo(Tu.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([i.length]).concat(n).concat([r.length]).concat(a))),Zo(Tu.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};r=function e(t){return Zo(Tu.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(t.channelcount&65280)>>8,t.channelcount&255,(t.samplesize&65280)>>8,t.samplesize&255,0,0,0,0,(t.samplerate&65280)>>8,t.samplerate&255,0,0]),tu(t))}})();fu=function e(t){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(t.id&4278190080)>>24,(t.id&16711680)>>16,(t.id&65280)>>8,t.id&255,0,0,0,0,(t.duration&4278190080)>>24,(t.duration&16711680)>>16,(t.duration&65280)>>8,t.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(t.width&65280)>>8,t.width&255,0,0,(t.height&65280)>>8,t.height&255,0,0]);return Zo(Tu.tkhd,i)};yu=function e(t){var i,r,n,a,s,o,u;i=Zo(Tu.tfhd,new Uint8Array([0,0,0,58,(t.id&4278190080)>>24,(t.id&16711680)>>16,(t.id&65280)>>8,t.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));o=Math.floor(t.baseMediaDecodeTime/(Jo+1));u=Math.floor(t.baseMediaDecodeTime%(Jo+1));r=Zo(Tu.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,o&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255]));s=32+20+8+16+8+8;if(t.type==="audio"){n=bu(t,s);return Zo(Tu.traf,i,r,n)}a=mu(t);n=bu(t,a.length+s);return Zo(Tu.traf,i,r,n,a)};cu=function e(t){t.duration=t.duration||4294967295;return Zo(Tu.trak,fu(t),du(t))};_u=function e(t){var i=new Uint8Array([0,0,0,0,(t.id&4278190080)>>24,(t.id&16711680)>>16,(t.id&65280)>>8,t.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);if(t.type!=="video"){i[i.length-1]=0}return Zo(Tu.trex,i)};(function(){var r,n,o;o=function e(t,i){var r=0,n=0,a=0,s=0;if(t.length){if(t[0].duration!==undefined){r=1}if(t[0].size!==undefined){n=2}if(t[0].flags!==undefined){a=4}if(t[0].compositionTimeOffset!==undefined){s=8}}return[0,0,r|n|a|s,1,(t.length&4278190080)>>>24,(t.length&16711680)>>>16,(t.length&65280)>>>8,t.length&255,(i&4278190080)>>>24,(i&16711680)>>>16,(i&65280)>>>8,i&255]};n=function e(t,i){var r,n,a,s;n=t.samples||[];i+=8+12+16*n.length;r=o(n,i);for(s=0;s<n.length;s++){a=n[s];r=r.concat([(a.duration&4278190080)>>>24,(a.duration&16711680)>>>16,(a.duration&65280)>>>8,a.duration&255,(a.size&4278190080)>>>24,(a.size&16711680)>>>16,(a.size&65280)>>>8,a.size&255,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,a.flags.degradationPriority&240<<8,a.flags.degradationPriority&15,(a.compositionTimeOffset&4278190080)>>>24,(a.compositionTimeOffset&16711680)>>>16,(a.compositionTimeOffset&65280)>>>8,a.compositionTimeOffset&255])}return Zo(Tu.trun,new Uint8Array(r))};r=function e(t,i){var r,n,a,s;n=t.samples||[];i+=8+12+8*n.length;r=o(n,i);for(s=0;s<n.length;s++){a=n[s];r=r.concat([(a.duration&4278190080)>>>24,(a.duration&16711680)>>>16,(a.duration&65280)>>>8,a.duration&255,(a.size&4278190080)>>>24,(a.size&16711680)>>>16,(a.size&65280)>>>8,a.size&255])}return Zo(Tu.trun,new Uint8Array(r))};bu=function e(t,i){if(t.type==="audio"){return r(t,i)}return n(t,i)}})();var Ru={ftyp:iu,mdat:ru,moof:su,moov:ou,initSegment:function e(t){var i=iu(),r=ou(t),n;n=new Uint8Array(i.byteLength+r.byteLength);n.set(i);n.set(r,i.byteLength);return n}};var Mu=function e(){this.init=function(){var a={};this.on=function(e,t){if(!a[e]){a[e]=[]}a[e]=a[e].concat(t)};this.off=function(e,t){var i;if(!a[e]){return false}i=a[e].indexOf(t);a[e]=a[e].slice();a[e].splice(i,1);return i>-1};this.trigger=function(e){var t,i,r,n;t=a[e];if(!t){return}if(arguments.length===2){r=t.length;for(i=0;i<r;++i){t[i].call(this,arguments[1])}}else{n=[];i=arguments.length;for(i=1;i<arguments.length;++i){n.push(arguments[i])}r=t.length;for(i=0;i<r;++i){t[i].apply(this,n)}}};this.dispose=function(){a={}}}};Mu.prototype.pipe=function(t){this.on("data",function(e){t.push(e)});this.on("done",function(e){t.flush(e)});return t};Mu.prototype.push=function(e){this.trigger("data",e)};Mu.prototype.flush=function(e){this.trigger("done",e)};var Bu=Mu;var Nu=function e(t){var i,r,n=[],a=[];n.byteLength=0;for(i=0;i<t.length;i++){r=t[i];if(r.nalUnitType==="access_unit_delimiter_rbsp"){if(n.length){n.duration=r.dts-n.dts;a.push(n)}n=[r];n.byteLength=r.data.byteLength;n.pts=r.pts;n.dts=r.dts}else{if(r.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){n.keyFrame=true}n.duration=r.dts-n.dts;n.byteLength+=r.data.byteLength;n.push(r)}}if(a.length&&(!n.duration||n.duration<=0)){n.duration=a[a.length-1].duration}a.push(n);return a};var ju=function e(t){var i,r,n=[],a=[];n.byteLength=0;n.nalCount=0;n.duration=0;n.pts=t[0].pts;n.dts=t[0].dts;a.byteLength=0;a.nalCount=0;a.duration=0;a.pts=t[0].pts;a.dts=t[0].dts;for(i=0;i<t.length;i++){r=t[i];if(r.keyFrame){if(n.length){a.push(n);a.byteLength+=n.byteLength;a.nalCount+=n.nalCount;a.duration+=n.duration}n=[r];n.nalCount=r.length;n.byteLength=r.byteLength;n.pts=r.pts;n.dts=r.dts;n.duration=r.duration}else{n.duration+=r.duration;n.nalCount+=r.length;n.byteLength+=r.byteLength;n.push(r)}}if(a.length&&n.duration<=0){n.duration=a[a.length-1].duration}a.byteLength+=n.byteLength;a.nalCount+=n.nalCount;a.duration+=n.duration;a.push(n);return a};var Fu=function e(t){var i;if(!t[0][0].keyFrame&&t.length>1){i=t.shift();t.byteLength-=i.byteLength;t.nalCount-=i.nalCount;t[0][0].dts=i.dts;t[0][0].pts=i.pts;t[0][0].duration+=i.duration}return t};var Vu=function e(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}};var Hu=function e(t,i){var r=Vu();r.dataOffset=i;r.compositionTimeOffset=t.pts-t.dts;r.duration=t.duration;r.size=4*t.length;r.size+=t.byteLength;if(t.keyFrame){r.flags.dependsOn=2;r.flags.isNonSyncSample=0}return r};var qu=function e(t,i){var r,n,a,s,o,u=i||0,l=[];for(r=0;r<t.length;r++){s=t[r];for(n=0;n<s.length;n++){o=s[n];a=Hu(o,u);u+=a.size;l.push(a)}}return l};var zu=function e(t){var i,r,n,a,s,o,u=0,l=t.byteLength,c=t.nalCount,f=l+4*c,d=new Uint8Array(f),h=new DataView(d.buffer);for(i=0;i<t.length;i++){a=t[i];for(r=0;r<a.length;r++){s=a[r];for(n=0;n<s.length;n++){o=s[n];h.setUint32(u,o.data.byteLength);u+=4;d.set(o.data,u);u+=o.data.byteLength}}}return d};var Wu={groupNalsIntoFrames:Nu,groupFramesIntoGops:ju,extendFirstKeyFrame:Fu,generateSampleTable:qu,concatenateNalData:zu};var Gu=[33,16,5,32,164,27];var Xu=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var Yu=function e(t){var i=[];while(t--){i.push(0)}return i};var Ku=function e(i){return Object.keys(i).reduce(function(e,t){e[t]=new Uint8Array(i[t].reduce(function(e,t){return e.concat(t)},[]));return e},{})};var $u={96e3:[Gu,[227,64],Yu(154),[56]],88200:[Gu,[231],Yu(170),[56]],64e3:[Gu,[248,192],Yu(240),[56]],48e3:[Gu,[255,192],Yu(268),[55,148,128],Yu(54),[112]],44100:[Gu,[255,192],Yu(268),[55,163,128],Yu(84),[112]],32e3:[Gu,[255,192],Yu(268),[55,234],Yu(226),[112]],24e3:[Gu,[255,192],Yu(268),[55,255,128],Yu(268),[111,112],Yu(126),[224]],16e3:[Gu,[255,192],Yu(268),[55,255,128],Yu(268),[111,255],Yu(269),[223,108],Yu(195),[1,192]],12e3:[Xu,Yu(268),[3,127,248],Yu(268),[6,255,240],Yu(268),[13,255,224],Yu(268),[27,253,128],Yu(259),[56]],11025:[Xu,Yu(268),[3,127,248],Yu(268),[6,255,240],Yu(268),[13,255,224],Yu(268),[27,255,192],Yu(268),[55,175,128],Yu(108),[112]],8e3:[Xu,Yu(268),[3,121,16],Yu(47),[7]]};var Qu=Ku($u);var Ju=9e4,Zu,el,tl,il,rl,nl;Zu=function e(t){return t*Ju};el=function e(t,i){return t*i};tl=function e(t){return t/Ju};il=function e(t,i){return t/i};rl=function e(t,i){return Zu(il(t,i))};nl=function e(t,i){return el(tl(t),i)};var al={secondsToVideoTs:Zu,secondsToAudioTs:el,videoTsToSeconds:tl,audioTsToSeconds:il,audioTsToVideoTs:rl,videoTsToAudioTs:nl};var sl=9e4;var ol=function e(t){var i,r,n=0;for(i=0;i<t.length;i++){r=t[i];n+=r.data.byteLength}return n};var ul=function e(t,i,r,n){var a,s=0,o=0,u=0,l=0,c,f;if(!i.length){return}a=al.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate);s=Math.ceil(sl/(t.samplerate/1024));if(r&&n){o=a-Math.max(r,n);u=Math.floor(o/s);l=u*s}if(u<1||l>sl/2){return}c=Qu[t.samplerate];if(!c){c=i[0].data}for(f=0;f<u;f++){i.splice(f,0,{data:c})}t.baseMediaDecodeTime-=Math.floor(al.videoTsToAudioTs(l,t.samplerate))};var ll=function e(t,i,r){if(i.minSegmentDts>=r){return t}i.minSegmentDts=Infinity;return t.filter(function(e){if(e.dts>=r){i.minSegmentDts=Math.min(i.minSegmentDts,e.dts);i.minSegmentPts=i.minSegmentDts;return true}return false})};var cl=function e(t){var i,r,n=[];for(i=0;i<t.length;i++){r=t[i];n.push({size:r.data.byteLength,duration:1024})}return n};var fl=function e(t){var i,r,n=0,a=new Uint8Array(ol(t));for(i=0;i<t.length;i++){r=t[i];a.set(r.data,n);n+=r.data.byteLength}return a};var dl={prefixWithSilence:ul,trimAdtsFramesByEarliestDts:ll,generateSampleTable:cl,concatenateFrameData:fl};var hl=9e4;var pl=function e(t,i){if(typeof i.pts==="number"){if(t.timelineStartInfo.pts===undefined){t.timelineStartInfo.pts=i.pts}if(t.minSegmentPts===undefined){t.minSegmentPts=i.pts}else{t.minSegmentPts=Math.min(t.minSegmentPts,i.pts)}if(t.maxSegmentPts===undefined){t.maxSegmentPts=i.pts}else{t.maxSegmentPts=Math.max(t.maxSegmentPts,i.pts)}}if(typeof i.dts==="number"){if(t.timelineStartInfo.dts===undefined){t.timelineStartInfo.dts=i.dts}if(t.minSegmentDts===undefined){t.minSegmentDts=i.dts}else{t.minSegmentDts=Math.min(t.minSegmentDts,i.dts)}if(t.maxSegmentDts===undefined){t.maxSegmentDts=i.dts}else{t.maxSegmentDts=Math.max(t.maxSegmentDts,i.dts)}}};var ml=function e(t){delete t.minSegmentDts;delete t.maxSegmentDts;delete t.minSegmentPts;delete t.maxSegmentPts};var vl=function e(t,i){var r,n,a=t.minSegmentDts;if(!i){a-=t.timelineStartInfo.dts}r=t.timelineStartInfo.baseMediaDecodeTime;r+=a;r=Math.max(0,r);if(t.type==="audio"){n=t.samplerate/hl;r*=n;r=Math.floor(r)}return r};var gl={clearDtsInfo:ml,calculateTrackBaseMediaDecodeTime:vl,collectDtsInfo:pl};var yl=4,_l=128;var bl=function e(t){var i=0,r={payloadType:-1,payloadSize:0},n=0,a=0;while(i<t.byteLength){if(t[i]===_l){break}while(t[i]===255){n+=255;i++}n+=t[i++];while(t[i]===255){a+=255;i++}a+=t[i++];if(!r.payload&&n===yl){r.payloadType=n;r.payloadSize=a;r.payload=t.subarray(i,i+a);break}i+=a;n=0;a=0}return r};var Tl=function e(t){if(t.payload[0]!==181){return null}if((t.payload[1]<<8|t.payload[2])!==49){return null}if(String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])!=="GA94"){return null}if(t.payload[7]!==3){return null}return t.payload.subarray(8,t.payload.length-1)};var Sl=function e(t,i){var r=[],n,a,s,o;if(!(i[0]&64)){return r}a=i[0]&31;for(n=0;n<a;n++){s=n*3;o={type:i[s+2]&3,pts:t};if(i[s+2]&4){o.ccData=i[s+3]<<8|i[s+4];r.push(o)}}return r};var kl=function e(t){var i=t.byteLength,r=[],n=1,a,s;while(n<i-2){if(t[n]===0&&t[n+1]===0&&t[n+2]===3){r.push(n+2);n+=2}else{n++}}if(r.length===0){return t}a=i-r.length;s=new Uint8Array(a);var o=0;for(n=0;n<a;o++,n++){if(o===r[0]){o++;r.shift()}s[n]=t[o]}return s};var wl={parseSei:bl,parseUserData:Tl,parseCaptionPackets:Sl,discardEmulationPreventionBytes:kl,USER_DATA_REGISTERED_ITU_T_T35:yl};var Cl=function e(){e.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new Ol(0,0),new Ol(0,1),new Ol(1,0),new Ol(1,1)];this.reset();this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data"));e.on("done",this.trigger.bind(this,"done"))},this)};Cl.prototype=new Bu;Cl.prototype.push=function(e){var t,i,r;if(e.nalUnitType!=="sei_rbsp"){return}t=wl.parseSei(e.escapedRBSP);if(t.payloadType!==wl.USER_DATA_REGISTERED_ITU_T_T35){return}i=wl.parseUserData(t);if(!i){return}if(e.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;if(!this.numSameDts_){this.ignoreNextEqualDts_=false}return}r=wl.parseCaptionPackets(e.pts,i);this.captionPackets_=this.captionPackets_.concat(r);if(this.latestDts_!==e.dts){this.numSameDts_=0}this.numSameDts_++;this.latestDts_=e.dts};Cl.prototype.flush=function(){if(!this.captionPackets_.length){this.ccStreams_.forEach(function(e){e.flush()},this);return}this.captionPackets_.forEach(function(e,t){e.presortIndex=t});this.captionPackets_.sort(function(e,t){if(e.pts===t.pts){return e.presortIndex-t.presortIndex}return e.pts-t.pts});this.captionPackets_.forEach(function(e){if(e.type<2){this.dispatchCea608Packet(e)}},this);this.captionPackets_.length=0;this.ccStreams_.forEach(function(e){e.flush()},this);return};Cl.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(e){e.reset()})};Cl.prototype.dispatchCea608Packet=function(e){if(this.setsChannel1Active(e)){this.activeCea608Channel_[e.type]=0}else if(this.setsChannel2Active(e)){this.activeCea608Channel_[e.type]=1}if(this.activeCea608Channel_[e.type]===null){return}this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)};Cl.prototype.setsChannel1Active=function(e){return(e.ccData&30720)===4096};Cl.prototype.setsChannel2Active=function(e){return(e.ccData&30720)===6144};var El={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var Al=function e(t){if(t===null){return""}t=El[t]||t;return String.fromCharCode(t)};var Ll=14;var Il=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var Pl=function e(){var t=[],i=Ll+1;while(i--){t.push("")}return t};var Ol=function e(t,i){e.prototype.init.call(this);this.field_=t||0;this.dataChannel_=i||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(e){var t,i,r,n,a;t=e.ccData&32639;if(t===this.lastControlCode_){this.lastControlCode_=null;return}if((t&61440)===4096){this.lastControlCode_=t}else if(t!==this.PADDING_){this.lastControlCode_=null}r=t>>>8;n=t&255;if(t===this.PADDING_){return}else if(t===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else if(t===this.END_OF_CAPTION_){this.mode_="popOn";this.clearFormatting(e.pts);this.flushDisplayed(e.pts);i=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=i;this.startPts_=e.pts}else if(t===this.ROLL_UP_2_ROWS_){this.rollUpRows_=2;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_3_ROWS_){this.rollUpRows_=3;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_4_ROWS_){this.rollUpRows_=4;this.setRollUp(e.pts)}else if(t===this.CARRIAGE_RETURN_){this.clearFormatting(e.pts);this.flushDisplayed(e.pts);this.shiftRowsUp_();this.startPts_=e.pts}else if(t===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}}else if(t===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(e.pts);this.displayed_=Pl()}else if(t===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=Pl()}else if(t===this.RESUME_DIRECT_CAPTIONING_){if(this.mode_!=="paintOn"){this.flushDisplayed(e.pts);this.displayed_=Pl()}this.mode_="paintOn";this.startPts_=e.pts}else if(this.isSpecialCharacter(r,n)){r=(r&3)<<8;a=Al(r|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isExtCharacter(r,n)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}r=(r&3)<<8;a=Al(r|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isMidRowCode(r,n)){this.clearFormatting(e.pts);this[this.mode_](e.pts," ");this.column_++;if((n&14)===14){this.addFormatting(e.pts,["i"])}if((n&1)===1){this.addFormatting(e.pts,["u"])}}else if(this.isOffsetControlCode(r,n)){this.column_+=n&3}else if(this.isPAC(r,n)){var s=Il.indexOf(t&7968);if(this.mode_==="rollUp"){if(s-this.rollUpRows_+1<0){s=this.rollUpRows_-1}this.setRollUp(e.pts,s)}if(s!==this.row_){this.clearFormatting(e.pts);this.row_=s}if(n&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(e.pts,["u"])}if((t&16)===16){this.column_=((t&14)>>1)*4}if(this.isColorPAC(n)){if((n&14)===14){this.addFormatting(e.pts,["i"])}}}else if(this.isNormalChar(r)){if(n===0){n=null}a=Al(r);a+=Al(n);this[this.mode_](e.pts,a);this.column_+=a.length}}};Ol.prototype=new Bu;Ol.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){console.error("Skipping malformed caption.");return""}}).join("\n").replace(/^\n+|\n+$/g,"");if(t.length){this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})}};Ol.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=Pl();this.nonDisplayed_=Pl();this.lastControlCode_=null;this.column_=0;this.row_=Ll;this.rollUpRows_=2;this.formatting_=[]};Ol.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};Ol.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63};Ol.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63};Ol.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47};Ol.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35};Ol.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127};Ol.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127};Ol.prototype.isNormalChar=function(e){return e>=32&&e<=127};Ol.prototype.setRollUp=function(e,t){if(this.mode_!=="rollUp"){this.row_=Ll;this.mode_="rollUp";this.flushDisplayed(e);this.nonDisplayed_=Pl();this.displayed_=Pl()}if(t!==undefined&&t!==this.row_){for(var i=0;i<this.rollUpRows_;i++){this.displayed_[t-i]=this.displayed_[this.row_-i];this.displayed_[this.row_-i]=""}}if(t===undefined){t=this.row_}this.topRow_=t-this.rollUpRows_+1};Ol.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)};Ol.prototype.clearFormatting=function(e){if(!this.formatting_.length){return}var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[];this[this.mode_](e,t)};Ol.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t;this.nonDisplayed_[this.row_]=i};Ol.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t;this.displayed_[this.row_]=i};Ol.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++){this.displayed_[e]=""}for(e=this.row_+1;e<Ll+1;e++){this.displayed_[e]=""}for(e=this.topRow_;e<this.row_;e++){this.displayed_[e]=this.displayed_[e+1]}this.displayed_[this.row_]=""};Ol.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t;this.displayed_[this.row_]=i};var Ul={CaptionStream:Cl,Cea608Stream:Ol};var Dl={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};var xl=8589934592;var Rl=4294967296;var Ml=function e(t,i){var r=1;if(t>i){r=-1}while(Math.abs(i-t)>Rl){t+=r*xl}return t};var Bl=function e(t){var i,r;e.prototype.init.call(this);this.type_=t;this.push=function(e){if(e.type!==this.type_){return}if(r===undefined){r=e.dts}e.dts=Ml(e.dts,r);e.pts=Ml(e.pts,r);i=e.dts;this.trigger("data",e)};this.flush=function(){r=i;this.trigger("done")};this.discontinuity=function(){r=void 0;i=void 0}};Bl.prototype=new Bu;var Nl={TimestampRolloverStream:Bl,handleRollover:Ml};var jl=function e(t,i,r){var n,a="";for(n=i;n<r;n++){a+="%"+("00"+t[n].toString(16)).slice(-2)}return a},Fl=function e(t,i,r){return decodeURIComponent(jl(t,i,r))},Vl=function e(t,i,r){return unescape(jl(t,i,r))},Hl=function e(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},ql={TXXX:function e(t){var i;if(t.data[0]!==3){return}for(i=1;i<t.data.length;i++){if(t.data[i]===0){t.description=Fl(t.data,1,i);t.value=Fl(t.data,i+1,t.data.length).replace(/\0*$/,"");break}}t.data=t.value},WXXX:function e(t){var i;if(t.data[0]!==3){return}for(i=1;i<t.data.length;i++){if(t.data[i]===0){t.description=Fl(t.data,1,i);t.url=Fl(t.data,i+1,t.data.length);break}}},PRIV:function e(t){var i;for(i=0;i<t.data.length;i++){if(t.data[i]===0){t.owner=Vl(t.data,0,i);break}}t.privateData=t.data.subarray(i+1);t.data=t.privateData}},zl;zl=function e(t){var l={debug:!!(t&&t.debug),descriptor:t&&t.descriptor},c=0,f=[],d=0,i;zl.prototype.init.call(this);this.dispatchType=Dl.METADATA_STREAM_TYPE.toString(16);if(l.descriptor){for(i=0;i<l.descriptor.length;i++){this.dispatchType+=("00"+l.descriptor[i].toString(16)).slice(-2)}}this.push=function(e){var t,i,r,n,a,s;if(e.type!=="timed-metadata"){return}if(e.dataAlignmentIndicator){d=0;f.length=0}if(f.length===0&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0))){if(l.debug){console.log("Skipping unrecognized metadata packet")}return}f.push(e);d+=e.data.byteLength;if(f.length===1){c=Hl(e.data.subarray(6,10));c+=10}if(d<c){return}t={data:new Uint8Array(c),frames:[],pts:f[0].pts,dts:f[0].dts};for(a=0;a<c;){t.data.set(f[0].data.subarray(0,c-a),a);a+=f[0].data.byteLength;d-=f[0].data.byteLength;f.shift()}i=10;if(t.data[5]&64){i+=4;i+=Hl(t.data.subarray(10,14));c-=Hl(t.data.subarray(16,20))}do{r=Hl(t.data.subarray(i+4,i+8));if(r<1){return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}s=String.fromCharCode(t.data[i],t.data[i+1],t.data[i+2],t.data[i+3]);n={id:s,data:t.data.subarray(i+10,i+r+10)};n.key=n.id;if(ql[n.id]){ql[n.id](n);if(n.owner==="com.apple.streaming.transportStreamTimestamp"){var o=n.data,u=(o[3]&1)<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;u*=4;u+=o[7]&3;n.timeStamp=u;if(t.pts===undefined&&t.dts===undefined){t.pts=n.timeStamp;t.dts=n.timeStamp}this.trigger("timestamp",n)}}t.frames.push(n);i+=10;i+=r}while(i<c);this.trigger("data",t)}};zl.prototype=new Bu;var Wl=zl;var Gl=Nl.TimestampRolloverStream;var Xl,Yl,Kl;var $l=188,Ql=71;Xl=function e(){var n=new Uint8Array($l),a=0;Xl.prototype.init.call(this);this.push=function(e){var t=0,i=$l,r;if(a){r=new Uint8Array(e.byteLength+a);r.set(n.subarray(0,a));r.set(e,a);a=0}else{r=e}while(i<r.byteLength){if(r[t]===Ql&&r[i]===Ql){this.trigger("data",r.subarray(t,i));t+=$l;i+=$l;continue}t++;i++}if(t<r.byteLength){n.set(r.subarray(t),0);a=r.byteLength-t}};this.flush=function(){if(a===$l&&n[0]===Ql){this.trigger("data",n);a=0}this.trigger("done")}};Xl.prototype=new Bu;Yl=function e(){var r,n,a,l;Yl.prototype.init.call(this);l=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;r=function e(t,i){var r=0;if(i.payloadUnitStartIndicator){r+=t[r]+1}if(i.type==="pat"){n(t.subarray(r),i)}else{a(t.subarray(r),i)}};n=function e(t,i){i.section_number=t[7];i.last_section_number=t[8];l.pmtPid=(t[10]&31)<<8|t[11];i.pmtPid=l.pmtPid};a=function e(t,i){var r,n,a,s;if(!(t[5]&1)){return}l.programMapTable={video:null,audio:null,"timed-metadata":{}};r=(t[1]&15)<<8|t[2];n=3+r-4;a=(t[10]&15)<<8|t[11];s=12+a;while(s<n){var o=t[s];var u=(t[s+1]&31)<<8|t[s+2];if(o===Dl.H264_STREAM_TYPE&&l.programMapTable.video===null){l.programMapTable.video=u}else if(o===Dl.ADTS_STREAM_TYPE&&l.programMapTable.audio===null){l.programMapTable.audio=u}else if(o===Dl.METADATA_STREAM_TYPE){l.programMapTable["timed-metadata"][u]=o}s+=((t[s+3]&15)<<8|t[s+4])+5}i.programMapTable=l.programMapTable};this.push=function(e){var t={},i=4;t.payloadUnitStartIndicator=!!(e[1]&64);t.pid=e[1]&31;t.pid<<=8;t.pid|=e[2];if((e[3]&48)>>>4>1){i+=e[i]+1}if(t.pid===0){t.type="pat";r(e.subarray(i),t);this.trigger("data",t)}else if(t.pid===this.pmtPid){t.type="pmt";r(e.subarray(i),t);this.trigger("data",t);while(this.packetsWaitingForPmt.length){this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}}else if(this.programMapTable===undefined){this.packetsWaitingForPmt.push([e,i,t])}else{this.processPes_(e,i,t)}};this.processPes_=function(e,t,i){if(i.pid===this.programMapTable.video){i.streamType=Dl.H264_STREAM_TYPE}else if(i.pid===this.programMapTable.audio){i.streamType=Dl.ADTS_STREAM_TYPE}else{i.streamType=this.programMapTable["timed-metadata"][i.pid]}i.type="pes";i.data=e.subarray(t);this.trigger("data",i)}};Yl.prototype=new Bu;Yl.STREAM_TYPES={h264:27,adts:15};Kl=function e(){var c=this,n={data:[],size:0},a={data:[],size:0},s={data:[],size:0},f=function e(t,i){var r;i.packetLength=6+(t[4]<<8|t[5]);i.dataAlignmentIndicator=(t[6]&4)!==0;r=t[7];if(r&192){i.pts=(t[9]&14)<<27|(t[10]&255)<<20|(t[11]&254)<<12|(t[12]&255)<<5|(t[13]&254)>>>3;i.pts*=4;i.pts+=(t[13]&6)>>>1;i.dts=i.pts;if(r&64){i.dts=(t[14]&14)<<27|(t[15]&255)<<20|(t[16]&254)<<12|(t[17]&255)<<5|(t[18]&254)>>>3;i.dts*=4;i.dts+=(t[18]&6)>>>1}}i.data=t.subarray(9+t[8])},o=function e(t,i,r){var n=new Uint8Array(t.size),a={type:i},s=0,o=0,u=false,l;if(!t.data.length||t.size<9){return}a.trackId=t.data[0].pid;for(s=0;s<t.data.length;s++){l=t.data[s];n.set(l.data,o);o+=l.data.byteLength}f(n,a);u=i==="video"||a.packetLength<=t.size;if(r||u){t.size=0;t.data.length=0}if(u){c.trigger("data",a)}};Kl.prototype.init.call(this);this.push=function(r){({pat:function e(){},pes:function e(){var t,i;switch(r.streamType){case Dl.H264_STREAM_TYPE:case Dl.H264_STREAM_TYPE:t=n;i="video";break;case Dl.ADTS_STREAM_TYPE:t=a;i="audio";break;case Dl.METADATA_STREAM_TYPE:t=s;i="timed-metadata";break;default:return}if(r.payloadUnitStartIndicator){o(t,i,true)}t.data.push(r);t.size+=r.data.byteLength},pmt:function e(){var t={type:"metadata",tracks:[]},i=r.programMapTable;if(i.video!==null){t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.video,codec:"avc",type:"video"})}if(i.audio!==null){t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.audio,codec:"adts",type:"audio"})}c.trigger("data",t)}})[r.type]()};this.flush=function(){o(n,"video");o(a,"audio");o(s,"timed-metadata");this.trigger("done")}};Kl.prototype=new Bu;var Jl={PAT_PID:0,MP2T_PACKET_LENGTH:$l,TransportPacketStream:Xl,TransportParseStream:Yl,ElementaryStream:Kl,TimestampRolloverStream:Gl,CaptionStream:Ul.CaptionStream,Cea608Stream:Ul.Cea608Stream,MetadataStream:Wl};for(var Zl in Dl){if(Dl.hasOwnProperty(Zl)){Jl[Zl]=Dl[Zl]}}var ec=Jl;var tc;var ic=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];tc=function e(){var l;tc.prototype.init.call(this);this.push=function(e){var t=0,i=0,r,n,a,s,o,u;if(e.type!=="audio"){return}if(l){s=l;l=new Uint8Array(s.byteLength+e.data.byteLength);l.set(s);l.set(e.data,s.byteLength)}else{l=e.data}while(t+5<l.length){if(l[t]!==255||(l[t+1]&246)!==240){t++;continue}n=(~l[t+1]&1)*2;r=(l[t+3]&3)<<11|l[t+4]<<3|(l[t+5]&224)>>5;o=((l[t+6]&3)+1)*1024;u=o*9e4/ic[(l[t+2]&60)>>>2];a=t+r;if(l.byteLength<a){return}this.trigger("data",{pts:e.pts+i*u,dts:e.dts+i*u,sampleCount:o,audioobjecttype:(l[t+2]>>>6&3)+1,channelcount:(l[t+2]&1)<<2|(l[t+3]&192)>>>6,samplerate:ic[(l[t+2]&60)>>>2],samplingfrequencyindex:(l[t+2]&60)>>>2,samplesize:16,data:l.subarray(t+7+n,a)});if(l.byteLength===a){l=undefined;return}i++;l=l.subarray(a)}};this.flush=function(){this.trigger("done")}};tc.prototype=new Bu;var rc=tc;var nc;nc=function e(r){var n=r.byteLength,a=0,s=0;this.length=function(){return 8*n};this.bitsAvailable=function(){return 8*n+s};this.loadWord=function(){var e=r.byteLength-n,t=new Uint8Array(4),i=Math.min(4,n);if(i===0){throw new Error("no bytes available")}t.set(r.subarray(e,e+i));a=new DataView(t.buffer).getUint32(0);s=i*8;n-=i};this.skipBits=function(e){var t;if(s>e){a<<=e;s-=e}else{e-=s;t=Math.floor(e/8);e-=t*8;n-=t;this.loadWord();a<<=e;s-=e}};this.readBits=function(e){var t=Math.min(s,e),i=a>>>32-t;s-=t;if(s>0){a<<=t}else if(n>0){this.loadWord()}t=e-t;if(t>0){return i<<t|this.readBits(t)}return i};this.skipLeadingZeros=function(){var e;for(e=0;e<s;++e){if((a&2147483648>>>e)!==0){a<<=e;s-=e;return e}}this.loadWord();return e+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1};this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();if(1&e){return 1+e>>>1}return-1*(e>>>1)};this.readBoolean=function(){return this.readBits(1)===1};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var ac=nc;var sc,oc;var uc;oc=function e(){var i=0,r,n;oc.prototype.init.call(this);this.push=function(e){var t;if(!n){n=e.data}else{t=new Uint8Array(n.byteLength+e.data.byteLength);t.set(n);t.set(e.data,n.byteLength);n=t}for(;i<n.byteLength-3;i++){if(n[i+2]===1){r=i+5;break}}while(r<n.byteLength){switch(n[r]){case 0:if(n[r-1]!==0){r+=2;break}else if(n[r-2]!==0){r++;break}if(i+3!==r-2){this.trigger("data",n.subarray(i+3,r-2))}do{r++}while(n[r]!==1&&r<n.length);i=r-2;r+=3;break;case 1:if(n[r-1]!==0||n[r-2]!==0){r+=3;break}this.trigger("data",n.subarray(i+3,r-2));i=r-2;r+=3;break;default:r+=3;break}}n=n.subarray(i);r-=i;i=0};this.flush=function(){if(n&&n.byteLength>3){this.trigger("data",n.subarray(i+3))}n=null;i=0;this.trigger("done")}};oc.prototype=new Bu;uc={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};sc=function e(){var t=new oc,i,r,n,a,s,o,T;sc.prototype.init.call(this);i=this;this.push=function(e){if(e.type!=="video"){return}r=e.trackId;n=e.pts;a=e.dts;t.push(e)};t.on("data",function(e){var t={trackId:r,pts:n,dts:a,data:e};switch(e[0]&31){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp";t.escapedRBSP=s(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp";t.escapedRBSP=s(e.subarray(1));t.config=o(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp";break;default:break}i.trigger("data",t)});t.on("done",function(){i.trigger("done")});this.flush=function(){t.flush()};T=function e(t,i){var r=8,n=8,a,s;for(a=0;a<t;a++){if(n!==0){s=i.readExpGolomb();n=(r+s+256)%256}r=n===0?r:n}};s=function e(t){var i=t.byteLength,r=[],n=1,a,s;while(n<i-2){if(t[n]===0&&t[n+1]===0&&t[n+2]===3){r.push(n+2);n+=2}else{n++}}if(r.length===0){return t}a=i-r.length;s=new Uint8Array(a);var o=0;for(n=0;n<a;o++,n++){if(o===r[0]){o++;r.shift()}s[n]=t[o]}return s};o=function e(t){var i=0,r=0,n=0,a=0,s=1,o,u,l,c,f,d,h,p,m,v,g,y,_,b;o=new ac(t);u=o.readUnsignedByte();c=o.readUnsignedByte();l=o.readUnsignedByte();o.skipUnsignedExpGolomb();if(uc[u]){f=o.readUnsignedExpGolomb();if(f===3){o.skipBits(1)}o.skipUnsignedExpGolomb();o.skipUnsignedExpGolomb();o.skipBits(1);if(o.readBoolean()){g=f!==3?8:12;for(b=0;b<g;b++){if(o.readBoolean()){if(b<6){T(16,o)}else{T(64,o)}}}}}o.skipUnsignedExpGolomb();d=o.readUnsignedExpGolomb();if(d===0){o.readUnsignedExpGolomb()}else if(d===1){o.skipBits(1);o.skipExpGolomb();o.skipExpGolomb();h=o.readUnsignedExpGolomb();for(b=0;b<h;b++){o.skipExpGolomb()}}o.skipUnsignedExpGolomb();o.skipBits(1);p=o.readUnsignedExpGolomb();m=o.readUnsignedExpGolomb();v=o.readBits(1);if(v===0){o.skipBits(1)}o.skipBits(1);if(o.readBoolean()){i=o.readUnsignedExpGolomb();r=o.readUnsignedExpGolomb();n=o.readUnsignedExpGolomb();a=o.readUnsignedExpGolomb()}if(o.readBoolean()){if(o.readBoolean()){_=o.readUnsignedByte();switch(_){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:{y=[o.readUnsignedByte()<<8|o.readUnsignedByte(),o.readUnsignedByte()<<8|o.readUnsignedByte()];break}}if(y){s=y[0]/y[1]}}}return{profileIdc:u,levelIdc:l,profileCompatibility:c,width:Math.ceil(((p+1)*16-i*2-r*2)*s),height:(2-v)*(m+1)*16-n*2-a*2}}};sc.prototype=new Bu;var lc={H264Stream:sc,NalByteStream:oc};var cc=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var fc=function e(t){if(t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)){return true}return false};var dc=function e(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]};var hc=function e(t,i,r){var n,a="";for(n=i;n<r;n++){a+="%"+("00"+t[n].toString(16)).slice(-2)}return a};var pc=function e(t,i,r){return unescape(hc(t,i,r))};var mc=function e(t,i){var r=t[i+6]<<21|t[i+7]<<14|t[i+8]<<7|t[i+9],n=t[i+5],a=(n&16)>>4;if(a){return r+20}return r+10};var vc=function e(t,i){var r=(t[i+5]&224)>>5,n=t[i+4]<<3,a=t[i+3]&3<<11;return a|n|r};var gc=function e(t,i){if(t[i]==="I".charCodeAt(0)&&t[i+1]==="D".charCodeAt(0)&&t[i+2]==="3".charCodeAt(0)){return"timed-metadata"}else if(t[i]&255===255&&(t[i+1]&240)===240){return"audio"}return null};var yc=function e(t){var i=0;while(i+5<t.length){if(t[i]!==255||(t[i+1]&246)!==240){i++;continue}return cc[(t[i+2]&60)>>>2]}return null};var _c=function e(t){var i,r,n,a;i=10;if(t[5]&64){i+=4;i+=dc(t.subarray(10,14))}do{r=dc(t.subarray(i+4,i+8));if(r<1){return null}a=String.fromCharCode(t[i],t[i+1],t[i+2],t[i+3]);if(a==="PRIV"){n=t.subarray(i+10,i+r+10);for(var s=0;s<n.byteLength;s++){if(n[s]===0){var o=pc(n,0,s);if(o==="com.apple.streaming.transportStreamTimestamp"){var u=n.subarray(s+1);var l=(u[3]&1)<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;l*=4;l+=u[7]&3;return l}break}}}i+=10;i+=r}while(i<t.byteLength);return null};var bc={isLikelyAacData:fc,parseId3TagSize:mc,parseAdtsSize:vc,parseType:gc,parseSampleRate:yc,parseAacTimestamp:_c};var Tc;Tc=function e(){var o=new Uint8Array,u=0;Tc.prototype.init.call(this);this.setTimestamp=function(e){u=e};this.push=function(e){var t=0,i=0,r,n,a,s;if(o.length){s=o.length;o=new Uint8Array(e.byteLength+s);o.set(o.subarray(0,s));o.set(e,s)}else{o=e}while(o.length-i>=3){if(o[i]==="I".charCodeAt(0)&&o[i+1]==="D".charCodeAt(0)&&o[i+2]==="3".charCodeAt(0)){if(o.length-i<10){break}t=bc.parseId3TagSize(o,i);if(i+t>o.length){break}n={type:"timed-metadata",data:o.subarray(i,i+t)};this.trigger("data",n);i+=t;continue}else if((o[i]&255)===255&&(o[i+1]&240)===240){if(o.length-i<7){break}t=bc.parseAdtsSize(o,i);if(i+t>o.length){break}a={type:"audio",data:o.subarray(i,i+t),pts:u,dts:u};this.trigger("data",a);i+=t;continue}i++}r=o.length-i;if(r>0){o=o.subarray(i)}else{o=new Uint8Array}}};Tc.prototype=new Bu;var Sc=Tc;var kc=lc.H264Stream;var wc=bc.isLikelyAacData;var Cc=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];var Ec=["width","height","profileIdc","levelIdc","profileCompatibility"];var Ac,Lc,Ic,Pc;var Oc=function e(t,i){var r;if(t.length!==i.length){return false}for(r=0;r<t.length;r++){if(t[r]!==i[r]){return false}}return true};var Uc=function e(t,i,r,n,a,s){var o=r-i,u=n-i,l=a-r;return{start:{dts:t,pts:t+o},end:{dts:t+u,pts:t+l},prependedContentDuration:s,baseMediaDecodeTime:t}};Lc=function e(n,a){var s=[],o=0,u=0,l=0,c=Infinity;a=a||{};Lc.prototype.init.call(this);this.push=function(t){gl.collectDtsInfo(n,t);if(n){Cc.forEach(function(e){n[e]=t[e]})}s.push(t)};this.setEarliestDts=function(e){u=e-n.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(e){c=e};this.setAudioAppendStart=function(e){l=e};this.flush=function(){var e,t,i,r;if(s.length===0){this.trigger("done","AudioSegmentStream");return}e=dl.trimAdtsFramesByEarliestDts(s,n,u);n.baseMediaDecodeTime=gl.calculateTrackBaseMediaDecodeTime(n,a.keepOriginalTimestamps);dl.prefixWithSilence(n,e,l,c);n.samples=dl.generateSampleTable(e);i=Ru.mdat(dl.concatenateFrameData(e));s=[];t=Ru.moof(o,[n]);r=new Uint8Array(t.byteLength+i.byteLength);o++;r.set(t);r.set(i,t.byteLength);gl.clearDtsInfo(n);this.trigger("data",{track:n,boxes:r});this.trigger("done","AudioSegmentStream")}};Lc.prototype=new Bu;Ac=function e(c,f){var d=0,h=[],p=[],t,i;f=f||{};Ac.prototype.init.call(this);delete c.minPTS;this.gopCache_=[];this.push=function(e){gl.collectDtsInfo(c,e);if(e.nalUnitType==="seq_parameter_set_rbsp"&&!t){t=e.config;c.sps=[e.data];Ec.forEach(function(e){c[e]=t[e]},this)}if(e.nalUnitType==="pic_parameter_set_rbsp"&&!i){i=e.data;c.pps=[e.data]}h.push(e)};this.flush=function(){var e,t,i,r,n,a,s=0,o,u;while(h.length){if(h[0].nalUnitType==="access_unit_delimiter_rbsp"){break}h.shift()}if(h.length===0){this.resetStream_();this.trigger("done","VideoSegmentStream");return}e=Wu.groupNalsIntoFrames(h);i=Wu.groupFramesIntoGops(e);if(!i[0][0].keyFrame){t=this.getGopForFusion_(h[0],c);if(t){s=t.duration;i.unshift(t);i.byteLength+=t.byteLength;i.nalCount+=t.nalCount;i.pts=t.pts;i.dts=t.dts;i.duration+=t.duration}else{i=Wu.extendFirstKeyFrame(i)}}if(p.length){var l;if(f.alignGopsAtEnd){l=this.alignGopsAtEnd_(i)}else{l=this.alignGopsAtStart_(i)}if(!l){this.gopCache_.unshift({gop:i.pop(),pps:c.pps,sps:c.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);h=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}gl.clearDtsInfo(c);i=l}gl.collectDtsInfo(c,i);c.samples=Wu.generateSampleTable(i);n=Ru.mdat(Wu.concatenateNalData(i));c.baseMediaDecodeTime=gl.calculateTrackBaseMediaDecodeTime(c,f.keepOriginalTimestamps);this.trigger("processedGopsInfo",i.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}));o=i[0];u=i[i.length-1];this.trigger("segmentTimingInfo",Uc(c.baseMediaDecodeTime,o.dts,o.pts,u.dts+u.duration,u.pts+u.duration,s));this.gopCache_.unshift({gop:i.pop(),pps:c.pps,sps:c.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);h=[];this.trigger("baseMediaDecodeTime",c.baseMediaDecodeTime);this.trigger("timelineStartInfo",c.timelineStartInfo);r=Ru.moof(d,[c]);a=new Uint8Array(r.byteLength+n.byteLength);d++;a.set(r);a.set(n,r.byteLength);this.trigger("data",{track:c,boxes:a});this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){gl.clearDtsInfo(c);t=undefined;i=undefined};this.getGopForFusion_=function(e){var t=45e3,i=1e4,r=Infinity,n,a,s,o,u;for(u=0;u<this.gopCache_.length;u++){o=this.gopCache_[u];s=o.gop;if(!(c.pps&&Oc(c.pps[0],o.pps[0]))||!(c.sps&&Oc(c.sps[0],o.sps[0]))){continue}if(s.dts<c.timelineStartInfo.dts){continue}n=e.dts-s.dts-s.duration;if(n>=-i&&n<=t){if(!a||r>n){a=o;r=n}}}if(a){return a.gop}return null};this.alignGopsAtStart_=function(e){var t,i,r,n,a,s,o,u;a=e.byteLength;s=e.nalCount;o=e.duration;t=i=0;while(t<p.length&&i<e.length){r=p[t];n=e[i];if(r.pts===n.pts){break}if(n.pts>r.pts){t++;continue}i++;a-=n.byteLength;s-=n.nalCount;o-=n.duration}if(i===0){return e}if(i===e.length){return null}u=e.slice(i);u.byteLength=a;u.duration=o;u.nalCount=s;u.pts=u[0].pts;u.dts=u[0].dts;return u};this.alignGopsAtEnd_=function(e){var t,i,r,n,a,s;t=p.length-1;i=e.length-1;a=null;s=false;while(t>=0&&i>=0){r=p[t];n=e[i];if(r.pts===n.pts){s=true;break}if(r.pts>n.pts){t--;continue}if(t===p.length-1){a=i}i--}if(!s&&a===null){return null}var o;if(s){o=i}else{o=a}if(o===0){return e}var u=e.slice(o);var l=u.reduce(function(e,t){e.byteLength+=t.byteLength;e.duration+=t.duration;e.nalCount+=t.nalCount;return e},{byteLength:0,duration:0,nalCount:0});u.byteLength=l.byteLength;u.duration=l.duration;u.nalCount=l.nalCount;u.pts=u[0].pts;u.dts=u[0].dts;return u};this.alignGopsWith=function(e){p=e}};Ac.prototype=new Bu;Pc=function e(t,i){this.numberOfTracks=0;this.metadataStream=i;t=t||{};if(typeof t.remux!=="undefined"){this.remuxTracks=!!t.remux}else{this.remuxTracks=true}if(typeof t.keepOriginalTimestamps==="boolean"){this.keepOriginalTimestamps=t.keepOriginalTimestamps}this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;Pc.prototype.init.call(this);this.push=function(e){if(e.text){return this.pendingCaptions.push(e)}if(e.frames){return this.pendingMetadata.push(e)}this.pendingTracks.push(e.track);this.pendingBoxes.push(e.boxes);this.pendingBytes+=e.boxes.byteLength;if(e.track.type==="video"){this.videoTrack=e.track}if(e.track.type==="audio"){this.audioTrack=e.track}}};Pc.prototype=new Bu;Pc.prototype.flush=function(e){var t=0,i={captions:[],captionStreams:{},metadata:[],info:{}},r,n,a,s=0,o;if(this.pendingTracks.length<this.numberOfTracks){if(e!=="VideoSegmentStream"&&e!=="AudioSegmentStream"){return}else if(this.remuxTracks){return}else if(this.pendingTracks.length===0){this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}return}}if(this.videoTrack){s=this.videoTrack.timelineStartInfo.pts;Ec.forEach(function(e){i.info[e]=this.videoTrack[e]},this)}else if(this.audioTrack){s=this.audioTrack.timelineStartInfo.pts;Cc.forEach(function(e){i.info[e]=this.audioTrack[e]},this)}if(this.pendingTracks.length===1){i.type=this.pendingTracks[0].type}else{i.type="combined"}this.emittedTracks+=this.pendingTracks.length;a=Ru.initSegment(this.pendingTracks);i.initSegment=new Uint8Array(a.byteLength);i.initSegment.set(a);i.data=new Uint8Array(this.pendingBytes);for(o=0;o<this.pendingBoxes.length;o++){i.data.set(this.pendingBoxes[o],t);t+=this.pendingBoxes[o].byteLength}for(o=0;o<this.pendingCaptions.length;o++){r=this.pendingCaptions[o];r.startTime=r.startPts;if(!this.keepOriginalTimestamps){r.startTime-=s}r.startTime/=9e4;r.endTime=r.endPts;if(!this.keepOriginalTimestamps){r.endTime-=s}r.endTime/=9e4;i.captionStreams[r.stream]=true;i.captions.push(r)}for(o=0;o<this.pendingMetadata.length;o++){n=this.pendingMetadata[o];n.cueTime=n.pts;if(!this.keepOriginalTimestamps){n.cueTime-=s}n.cueTime/=9e4;i.metadata.push(n)}i.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger("data",i);if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}};Ic=function e(r){var n=this,i=true,a,s;Ic.prototype.init.call(this);r=r||{};this.baseMediaDecodeTime=r.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var t={};this.transmuxPipeline_=t;t.type="aac";t.metadataStream=new ec.MetadataStream;t.aacStream=new Sc;t.audioTimestampRolloverStream=new ec.TimestampRolloverStream("audio");t.timedMetadataTimestampRolloverStream=new ec.TimestampRolloverStream("timed-metadata");t.adtsStream=new rc;t.coalesceStream=new Pc(r,t.metadataStream);t.headOfPipeline=t.aacStream;t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream);t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream);t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)});t.aacStream.on("data",function(e){if(e.type==="timed-metadata"&&!t.audioSegmentStream){s=s||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"};t.coalesceStream.numberOfTracks++;t.audioSegmentStream=new Lc(s,r);t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream)}});t.coalesceStream.on("data",this.trigger.bind(this,"data"));t.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i;i.type="ts";i.metadataStream=new ec.MetadataStream;i.packetStream=new ec.TransportPacketStream;i.parseStream=new ec.TransportParseStream;i.elementaryStream=new ec.ElementaryStream;i.videoTimestampRolloverStream=new ec.TimestampRolloverStream("video");i.audioTimestampRolloverStream=new ec.TimestampRolloverStream("audio");i.timedMetadataTimestampRolloverStream=new ec.TimestampRolloverStream("timed-metadata");i.adtsStream=new rc;i.h264Stream=new kc;i.captionStream=new ec.CaptionStream;i.coalesceStream=new Pc(r,i.metadataStream);i.headOfPipeline=i.packetStream;i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream);i.elementaryStream.pipe(i.videoTimestampRolloverStream).pipe(i.h264Stream);i.elementaryStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream);i.elementaryStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream);i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream);i.elementaryStream.on("data",function(e){var t;if(e.type==="metadata"){t=e.tracks.length;while(t--){if(!a&&e.tracks[t].type==="video"){a=e.tracks[t];a.timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime}else if(!s&&e.tracks[t].type==="audio"){s=e.tracks[t];s.timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime}}if(a&&!i.videoSegmentStream){i.coalesceStream.numberOfTracks++;i.videoSegmentStream=new Ac(a,r);i.videoSegmentStream.on("timelineStartInfo",function(e){if(s){s.timelineStartInfo=e;i.audioSegmentStream.setEarliestDts(e.dts)}});i.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo"));i.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo"));i.videoSegmentStream.on("baseMediaDecodeTime",function(e){if(s){i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}});i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)}if(s&&!i.audioSegmentStream){i.coalesceStream.numberOfTracks++;i.audioSegmentStream=new Lc(s,r);i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)}}});i.coalesceStream.on("data",this.trigger.bind(this,"data"));i.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;if(!r.keepOriginalTimestamps){this.baseMediaDecodeTime=e}if(s){s.timelineStartInfo.dts=undefined;s.timelineStartInfo.pts=undefined;gl.clearDtsInfo(s);if(!r.keepOriginalTimestamps){s.timelineStartInfo.baseMediaDecodeTime=e}if(t.audioTimestampRolloverStream){t.audioTimestampRolloverStream.discontinuity()}}if(a){if(t.videoSegmentStream){t.videoSegmentStream.gopCache_=[];t.videoTimestampRolloverStream.discontinuity()}a.timelineStartInfo.dts=undefined;a.timelineStartInfo.pts=undefined;gl.clearDtsInfo(a);t.captionStream.reset();if(!r.keepOriginalTimestamps){a.timelineStartInfo.baseMediaDecodeTime=e}}if(t.timedMetadataTimestampRolloverStream){t.timedMetadataTimestampRolloverStream.discontinuity()}};this.setAudioAppendStart=function(e){if(s){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)}};this.alignGopsWith=function(e){if(a&&this.transmuxPipeline_.videoSegmentStream){this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)}};this.push=function(e){if(i){var t=wc(e);if(t&&this.transmuxPipeline_.type!=="aac"){this.setupAacPipeline()}else if(!t&&this.transmuxPipeline_.type!=="ts"){this.setupTsPipeline()}i=false}this.transmuxPipeline_.headOfPipeline.push(e)};this.flush=function(){i=true;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){if(this.transmuxPipeline_.captionStream){this.transmuxPipeline_.captionStream.reset()}}};Ic.prototype=new Bu;var Dc={Transmuxer:Ic,VideoSegmentStream:Ac,AudioSegmentStream:Lc,AUDIO_PROPERTIES:Cc,VIDEO_PROPERTIES:Ec,generateVideoSegmentTimingInfo:Uc};var xc,Rc,Mc=Qo.parseType,Bc=function e(t){return new Date(t*1e3-20828448e5)},Nc=function e(t){return{isLeading:(t[0]&12)>>>2,dependsOn:t[0]&3,isDependedOn:(t[1]&192)>>>6,hasRedundancy:(t[1]&48)>>>4,paddingValue:(t[1]&14)>>>1,isNonSyncSample:t[1]&1,degradationPriority:t[2]<<8|t[3]}},jc=function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=[],n,a;for(n=0;n+4<t.length;n+=a){a=i.getUint32(n);n+=4;if(a<=0){r.push("<span style='color:red;'>MALFORMED DATA</span>");continue}switch(t[n]&31){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+t[n]&31);break}}return r},Fc={avc1:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:i.getUint16(6),width:i.getUint16(24),height:i.getUint16(26),horizresolution:i.getUint16(28)+i.getUint16(30)/16,vertresolution:i.getUint16(32)+i.getUint16(34)/16,frameCount:i.getUint16(40),depth:i.getUint16(74),config:xc(t.subarray(78,t.byteLength))}},avcC:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={configurationVersion:t[0],avcProfileIndication:t[1],profileCompatibility:t[2],avcLevelIndication:t[3],lengthSizeMinusOne:t[4]&3,sps:[],pps:[]},n=t[5]&31,a,s,o,u;o=6;for(u=0;u<n;u++){s=i.getUint16(o);o+=2;r.sps.push(new Uint8Array(t.subarray(o,o+s)));o+=s}a=t[o];o++;for(u=0;u<a;u++){s=i.getUint16(o);o+=2;r.pps.push(new Uint8Array(t.subarray(o,o+s)));o+=s}return r},btrt:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{bufferSizeDB:i.getUint32(0),maxBitrate:i.getUint32(4),avgBitrate:i.getUint32(8)}},esds:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),esId:t[6]<<8|t[7],streamPriority:t[8]&31,decoderConfig:{objectProfileIndication:t[11],streamType:t[12]>>>2&63,bufferSize:t[13]<<16|t[14]<<8|t[15],maxBitrate:t[16]<<24|t[17]<<16|t[18]<<8|t[19],avgBitrate:t[20]<<24|t[21]<<16|t[22]<<8|t[23],decoderConfigDescriptor:{tag:t[24],length:t[25],audioObjectType:t[26]>>>3&31,samplingFrequencyIndex:(t[26]&7)<<1|t[27]>>>7&1,channelConfiguration:t[27]>>>3&15}}}},ftyp:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={majorBrand:Mc(t.subarray(0,4)),minorVersion:i.getUint32(4),compatibleBrands:[]},n=8;while(n<t.byteLength){r.compatibleBrands.push(Mc(t.subarray(n,n+4)));n+=4}return r},dinf:function e(t){return{boxes:xc(t)}},dref:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:xc(t.subarray(8))}},hdlr:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:Mc(t.subarray(8,12)),name:""},n=8;for(n=24;n<t.byteLength;n++){if(t[n]===0){n++;break}r.name+=String.fromCharCode(t[n])}r.name=decodeURIComponent(escape(r.name));return r},mdat:function e(t){return{byteLength:t.byteLength,nals:jc(t)}},mdhd:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=4,n,a={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:""};if(a.version===1){r+=4;a.creationTime=Bc(i.getUint32(r));r+=8;a.modificationTime=Bc(i.getUint32(r));r+=4;a.timescale=i.getUint32(r);r+=8;a.duration=i.getUint32(r)}else{a.creationTime=Bc(i.getUint32(r));r+=4;a.modificationTime=Bc(i.getUint32(r));r+=4;a.timescale=i.getUint32(r);r+=4;a.duration=i.getUint32(r)}r+=4;n=i.getUint16(r);a.language+=String.fromCharCode((n>>10)+96);a.language+=String.fromCharCode(((n&992)>>5)+96);a.language+=String.fromCharCode((n&31)+96);return a},mdia:function e(t){return{boxes:xc(t)}},mfhd:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sequenceNumber:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},minf:function e(t){return{boxes:xc(t)}},mp4a:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={dataReferenceIndex:i.getUint16(6),channelcount:i.getUint16(16),samplesize:i.getUint16(18),samplerate:i.getUint16(24)+i.getUint16(26)/65536};if(t.byteLength>28){r.streamDescriptor=xc(t.subarray(28))[0]}return r},moof:function e(t){return{boxes:xc(t)}},moov:function e(t){return{boxes:xc(t)}},mvex:function e(t){return{boxes:xc(t)}},mvhd:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=4,n={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};if(n.version===1){r+=4;n.creationTime=Bc(i.getUint32(r));r+=8;n.modificationTime=Bc(i.getUint32(r));r+=4;n.timescale=i.getUint32(r);r+=8;n.duration=i.getUint32(r)}else{n.creationTime=Bc(i.getUint32(r));r+=4;n.modificationTime=Bc(i.getUint32(r));r+=4;n.timescale=i.getUint32(r);r+=4;n.duration=i.getUint32(r)}r+=4;n.rate=i.getUint16(r)+i.getUint16(r+2)/16;r+=4;n.volume=i.getUint8(r)+i.getUint8(r+1)/8;r+=2;r+=2;r+=2*4;n.matrix=new Uint32Array(t.subarray(r,r+9*4));r+=9*4;r+=6*4;n.nextTrackId=i.getUint32(r);return n},pdin:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),rate:i.getUint32(4),initialDelay:i.getUint32(8)}},sdtp:function e(t){var i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},r;for(r=4;r<t.byteLength;r++){i.samples.push({dependsOn:(t[r]&48)>>4,isDependedOn:(t[r]&12)>>2,hasRedundancy:t[r]&3})}return i},sidx:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8),earliestPresentationTime:i.getUint32(12),firstOffset:i.getUint32(16)},n=i.getUint16(22),a;for(a=24;n;a+=12,n--){r.references.push({referenceType:(t[a]&128)>>>7,referencedSize:i.getUint32(a)&2147483647,subsegmentDuration:i.getUint32(a+4),startsWithSap:!!(t[a+8]&128),sapType:(t[a+8]&112)>>>4,sapDeltaTime:i.getUint32(a+8)&268435455})}return r},smhd:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),balance:t[4]+t[5]/256}},stbl:function e(t){return{boxes:xc(t)}},stco:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),chunkOffsets:[]},n=i.getUint32(4),a;for(a=8;n;a+=4,n--){r.chunkOffsets.push(i.getUint32(a))}return r},stsc:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=i.getUint32(4),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleToChunks:[]},a;for(a=8;r;a+=12,r--){n.sampleToChunks.push({firstChunk:i.getUint32(a),samplesPerChunk:i.getUint32(a+4),sampleDescriptionIndex:i.getUint32(a+8)})}return n},stsd:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleDescriptions:xc(t.subarray(8))}},stsz:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:i.getUint32(4),entries:[]},n;for(n=12;n<t.byteLength;n+=4){r.entries.push(i.getUint32(n))}return r},stts:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),timeToSamples:[]},n=i.getUint32(4),a;for(a=8;n;a+=8,n--){r.timeToSamples.push({sampleCount:i.getUint32(a),sampleDelta:i.getUint32(a+4)})}return r},styp:function e(t){return Fc.ftyp(t)},tfdt:function e(t){var i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:t[4]<<24|t[5]<<16|t[6]<<8|t[7]};if(i.version===1){i.baseMediaDecodeTime*=Math.pow(2,32);i.baseMediaDecodeTime+=t[8]<<24|t[9]<<16|t[10]<<8|t[11]}return i},tfhd:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:i.getUint32(4)},n=r.flags[2]&1,a=r.flags[2]&2,s=r.flags[2]&8,o=r.flags[2]&16,u=r.flags[2]&32,l=r.flags[0]&65536,c=r.flags[0]&131072,f;f=8;if(n){f+=4;r.baseDataOffset=i.getUint32(12);f+=4}if(a){r.sampleDescriptionIndex=i.getUint32(f);f+=4}if(s){r.defaultSampleDuration=i.getUint32(f);f+=4}if(o){r.defaultSampleSize=i.getUint32(f);f+=4}if(u){r.defaultSampleFlags=i.getUint32(f)}if(l){r.durationIsEmpty=true}if(!n&&c){r.baseDataOffsetIsMoof=true}return r},tkhd:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=4,n={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};if(n.version===1){r+=4;n.creationTime=Bc(i.getUint32(r));r+=8;n.modificationTime=Bc(i.getUint32(r));r+=4;n.trackId=i.getUint32(r);r+=4;r+=8;n.duration=i.getUint32(r)}else{n.creationTime=Bc(i.getUint32(r));r+=4;n.modificationTime=Bc(i.getUint32(r));r+=4;n.trackId=i.getUint32(r);r+=4;r+=4;n.duration=i.getUint32(r)}r+=4;r+=2*4;n.layer=i.getUint16(r);r+=2;n.alternateGroup=i.getUint16(r);r+=2;n.volume=i.getUint8(r)+i.getUint8(r+1)/8;r+=2;r+=2;n.matrix=new Uint32Array(t.subarray(r,r+9*4));r+=9*4;n.width=i.getUint16(r)+i.getUint16(r+2)/16;r+=4;n.height=i.getUint16(r)+i.getUint16(r+2)/16;return n},traf:function e(t){return{boxes:xc(t)}},trak:function e(t){return{boxes:xc(t)}},trex:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:i.getUint32(4),defaultSampleDescriptionIndex:i.getUint32(8),defaultSampleDuration:i.getUint32(12),defaultSampleSize:i.getUint32(16),sampleDependsOn:t[20]&3,sampleIsDependedOn:(t[21]&192)>>6,sampleHasRedundancy:(t[21]&48)>>4,samplePaddingValue:(t[21]&14)>>1,sampleIsDifferenceSample:!!(t[21]&1),sampleDegradationPriority:i.getUint16(22)}},trun:function e(t){var i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},r=new DataView(t.buffer,t.byteOffset,t.byteLength),n=i.flags[2]&1,a=i.flags[2]&4,s=i.flags[1]&1,o=i.flags[1]&2,u=i.flags[1]&4,l=i.flags[1]&8,c=r.getUint32(4),f=8,d;if(n){i.dataOffset=r.getInt32(f);f+=4}if(a&&c){d={flags:Nc(t.subarray(f,f+4))};f+=4;if(s){d.duration=r.getUint32(f);f+=4}if(o){d.size=r.getUint32(f);f+=4}if(l){d.compositionTimeOffset=r.getUint32(f);f+=4}i.samples.push(d);c--}while(c--){d={};if(s){d.duration=r.getUint32(f);f+=4}if(o){d.size=r.getUint32(f);f+=4}if(u){d.flags=Nc(t.subarray(f,f+4));f+=4}if(l){d.compositionTimeOffset=r.getUint32(f);f+=4}i.samples.push(d)}return i},"url ":function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}},vmhd:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),graphicsmode:i.getUint16(4),opcolor:new Uint16Array([i.getUint16(6),i.getUint16(8),i.getUint16(10)])}}};xc=function e(t){var i=0,r=[],n,a,s,o,u;var l=new ArrayBuffer(t.length);var c=new Uint8Array(l);for(var f=0;f<t.length;++f){c[f]=t[f]}n=new DataView(l);while(i<t.byteLength){a=n.getUint32(i);s=Mc(t.subarray(i+4,i+8));o=a>1?i+a:t.byteLength;u=(Fc[s]||function(e){return{data:e}})(t.subarray(i+8,o));u.size=a;u.type=s;r.push(u);i=o}return r};Rc=function e(t,i){var a;i=i||0;a=new Array(i*2+1).join(" ");return t.map(function(n,e){return a+n.type+"\n"+Object.keys(n).filter(function(e){return e!=="type"&&e!=="boxes"}).map(function(e){var t=a+"  "+e+": ",i=n[e];if(i instanceof Uint8Array||i instanceof Uint32Array){var r=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);if(!r){return t+"<>"}if(r.length===1){return t+"<"+r.join("").slice(1)+">"}return t+"<\n"+r.map(function(e){return a+"  "+e}).join("\n")+"\n"+a+"  >"}return t+JSON.stringify(i,null,2).split("\n").map(function(e,t){if(t===0){return e}return a+"  "+e}).join("\n")}).join("\n")+(n.boxes?"\n"+Rc(n.boxes,i+1):"")}).join("\n")};var Vc={inspect:xc,textify:Rc,parseTfdt:Fc.tfdt,parseHdlr:Fc.hdlr,parseTfhd:Fc.tfhd,parseTrun:Fc.trun,parseSidx:Fc.sidx};var Hc=wl.discardEmulationPreventionBytes;var qc=Ul.CaptionStream;var zc=function e(t,i){var r=t;for(var n=0;n<i.length;n++){var a=i[n];if(r<a.size){return a}r-=a.size}return null};var Wc=function e(t,i,r){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),a=[],s,o,u,l;for(o=0;o+4<t.length;o+=u){u=n.getUint32(o);o+=4;if(u<=0){continue}switch(t[o]&31){case 6:var c=t.subarray(o+1,o+1+u);var f=zc(o,i);s={nalUnitType:"sei_rbsp",size:u,data:c,escapedRBSP:Hc(c),trackId:r};if(f){s.pts=f.pts;s.dts=f.dts;l=f}else{s.pts=l.pts;s.dts=l.dts}a.push(s);break;default:break}}return a};var Gc=function e(t,i,r){var n=i;var a=r.defaultSampleDuration||0;var s=r.defaultSampleSize||0;var o=r.trackId;var u=[];t.forEach(function(e){var t=Vc.parseTrun(e);var i=t.samples;i.forEach(function(e){if(e.duration===undefined){e.duration=a}if(e.size===undefined){e.size=s}e.trackId=o;e.dts=n;if(e.compositionTimeOffset===undefined){e.compositionTimeOffset=0}e.pts=n+e.compositionTimeOffset;n+=e.duration});u=u.concat(i)});return u};var Xc=function e(t,f){var r=Qo.findBox(t,["moof","traf"]);var i=Qo.findBox(t,["mdat"]);var d={};var n=[];i.forEach(function(e,t){var i=r[t];n.push({mdat:e,traf:i})});n.forEach(function(e){var t=e.mdat;var i=e.traf;var r=Qo.findBox(i,["tfhd"]);var n=Vc.parseTfhd(r[0]);var a=n.trackId;var s=Qo.findBox(i,["tfdt"]);var o=s.length>0?Vc.parseTfdt(s[0]).baseMediaDecodeTime:0;var u=Qo.findBox(i,["trun"]);var l;var c;if(f===a&&u.length>0){l=Gc(u,o,n);c=Wc(t,l,a);if(!d[a]){d[a]=[]}d[a]=d[a].concat(c)}});return d};var Yc=function e(t,i,r){var n;if(!i){return null}n=Xc(t,i);return{seiNals:n[i],timescale:r}};var Kc=function e(){var t=false;var i;var a;var s;var o;var u;this.isInitialized=function(){return t};this.init=function(){i=new qc;t=true;i.on("data",function(e){e.startTime=e.startPts/o;e.endTime=e.endPts/o;u.captions.push(e);u.captionStreams[e.stream]=true})};this.isNewInit=function(e,t){if(e&&e.length===0||t&&typeof t==="object"&&Object.keys(t).length===0){return false}return s!==e[0]||o!==t[s]};this.parse=function(e,t,i){var r;if(!this.isInitialized()){return null}else if(!t||!i){return null}else if(this.isNewInit(t,i)){s=t[0];o=i[s]}else if(!s||!o){a.push(e);return null}while(a.length>0){var n=a.shift();this.parse(n,t,i)}r=Yc(e,s,o);if(r===null||!r.seiNals){return null}this.pushNals(r.seiNals);this.flushStream();return u};this.pushNals=function(e){if(!this.isInitialized()||!e||e.length===0){return null}e.forEach(function(e){i.push(e)})};this.flushStream=function(){if(!this.isInitialized()){return null}i.flush()};this.clearParsedCaptions=function(){u.captions=[];u.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized()){return null}i.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){a=[];s=null;o=null;if(!u){u={captions:[],captionStreams:{}}}else{this.clearParsedCaptions()}this.resetCaptionStream()};this.reset()};var $c=Kc;var Qc={generator:Ru,probe:Qo,Transmuxer:Dc.Transmuxer,AudioSegmentStream:Dc.AudioSegmentStream,VideoSegmentStream:Dc.VideoSegmentStream,CaptionParser:$c};var Jc=Qc.CaptionParser;var Zc=function e(t){var i=t[1]&31;i<<=8;i|=t[2];return i};var ef=function e(t){return!!(t[1]&64)};var tf=function e(t){var i=0;if((t[3]&48)>>>4>1){i+=t[4]+1}return i};var rf=function e(t,i){var r=Zc(t);if(r===0){return"pat"}else if(r===i){return"pmt"}else if(i){return"pes"}return null};var nf=function e(t){var i=ef(t);var r=4+tf(t);if(i){r+=t[r]+1}return(t[r+10]&31)<<8|t[r+11]};var af=function e(t){var i={};var r=ef(t);var n=4+tf(t);if(r){n+=t[n]+1}if(!(t[n+5]&1)){return}var a,s,o;a=(t[n+1]&15)<<8|t[n+2];s=3+a-4;o=(t[n+10]&15)<<8|t[n+11];var u=12+o;while(u<s){var l=n+u;i[(t[l+1]&31)<<8|t[l+2]]=t[l];u+=((t[l+3]&15)<<8|t[l+4])+5}return i};var sf=function e(t,i){var r=Zc(t);var n=i[r];switch(n){case Dl.H264_STREAM_TYPE:return"video";case Dl.ADTS_STREAM_TYPE:return"audio";case Dl.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}};var of=function e(t){var i=ef(t);if(!i){return null}var r=4+tf(t);if(r>=t.byteLength){return null}var n=null;var a;a=t[r+7];if(a&192){n={};n.pts=(t[r+9]&14)<<27|(t[r+10]&255)<<20|(t[r+11]&254)<<12|(t[r+12]&255)<<5|(t[r+13]&254)>>>3;n.pts*=4;n.pts+=(t[r+13]&6)>>>1;n.dts=n.pts;if(a&64){n.dts=(t[r+14]&14)<<27|(t[r+15]&255)<<20|(t[r+16]&254)<<12|(t[r+17]&255)<<5|(t[r+18]&254)>>>3;n.dts*=4;n.dts+=(t[r+18]&6)>>>1}}return n};var uf=function e(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};var lf=function e(t){var i=4+tf(t);var r=t.subarray(i);var n=0;var a=0;var s=false;var o;for(;a<r.byteLength-3;a++){if(r[a+2]===1){n=a+5;break}}while(n<r.byteLength){switch(r[n]){case 0:if(r[n-1]!==0){n+=2;break}else if(r[n-2]!==0){n++;break}if(a+3!==n-2){o=uf(r[a+3]&31);if(o==="slice_layer_without_partitioning_rbsp_idr"){s=true}}do{n++}while(r[n]!==1&&n<r.length);a=n-2;n+=3;break;case 1:if(r[n-1]!==0||r[n-2]!==0){n+=3;break}o=uf(r[a+3]&31);if(o==="slice_layer_without_partitioning_rbsp_idr"){s=true}a=n-2;n+=3;break;default:n+=3;break}}r=r.subarray(a);n-=a;a=0;if(r&&r.byteLength>3){o=uf(r[a+3]&31);if(o==="slice_layer_without_partitioning_rbsp_idr"){s=true}}return s};var cf={parseType:rf,parsePat:nf,parsePmt:af,parsePayloadUnitStartIndicator:ef,parsePesType:sf,parsePesTime:of,videoPacketContainsKeyFrame:lf};var ff=Nl.handleRollover;var df={};df.ts=cf;df.aac=bc;var hf=9e4,pf=188,mf=71;var vf=function e(t,i){var r=0,n=pf,a,s;while(n<t.byteLength){if(t[r]===mf&&t[n]===mf){a=t.subarray(r,n);s=df.ts.parseType(a,i.pid);switch(s){case"pat":if(!i.pid){i.pid=df.ts.parsePat(a)}break;case"pmt":if(!i.table){i.table=df.ts.parsePmt(a)}break;default:break}if(i.pid&&i.table){return}r+=pf;n+=pf;continue}r++;n++}};var gf=function e(t,i,r){var n=0,a=pf,s,o,u,l,c;var f=false;while(a<=t.byteLength){if(t[n]===mf&&(t[a]===mf||a===t.byteLength)){s=t.subarray(n,a);o=df.ts.parseType(s,i.pid);switch(o){case"pes":u=df.ts.parsePesType(s,i.table);l=df.ts.parsePayloadUnitStartIndicator(s);if(u==="audio"&&l){c=df.ts.parsePesTime(s);if(c){c.type="audio";r.audio.push(c);f=true}}break;default:break}if(f){break}n+=pf;a+=pf;continue}n++;a++}a=t.byteLength;n=a-pf;f=false;while(n>=0){if(t[n]===mf&&(t[a]===mf||a===t.byteLength)){s=t.subarray(n,a);o=df.ts.parseType(s,i.pid);switch(o){case"pes":u=df.ts.parsePesType(s,i.table);l=df.ts.parsePayloadUnitStartIndicator(s);if(u==="audio"&&l){c=df.ts.parsePesTime(s);if(c){c.type="audio";r.audio.push(c);f=true}}break;default:break}if(f){break}n-=pf;a-=pf;continue}n--;a--}};var yf=function e(t,i,r){var n=0,a=pf,s,o,u,l,c,f,d,h;var p=false;var m={data:[],size:0};while(a<t.byteLength){if(t[n]===mf&&t[a]===mf){s=t.subarray(n,a);o=df.ts.parseType(s,i.pid);switch(o){case"pes":u=df.ts.parsePesType(s,i.table);l=df.ts.parsePayloadUnitStartIndicator(s);if(u==="video"){if(l&&!p){c=df.ts.parsePesTime(s);if(c){c.type="video";r.video.push(c);p=true}}if(!r.firstKeyFrame){if(l){if(m.size!==0){f=new Uint8Array(m.size);d=0;while(m.data.length){h=m.data.shift();f.set(h,d);d+=h.byteLength}if(df.ts.videoPacketContainsKeyFrame(f)){r.firstKeyFrame=df.ts.parsePesTime(f);r.firstKeyFrame.type="video"}m.size=0}}m.data.push(s);m.size+=s.byteLength}}break;default:break}if(p&&r.firstKeyFrame){break}n+=pf;a+=pf;continue}n++;a++}a=t.byteLength;n=a-pf;p=false;while(n>=0){if(t[n]===mf&&t[a]===mf){s=t.subarray(n,a);o=df.ts.parseType(s,i.pid);switch(o){case"pes":u=df.ts.parsePesType(s,i.table);l=df.ts.parsePayloadUnitStartIndicator(s);if(u==="video"&&l){c=df.ts.parsePesTime(s);if(c){c.type="video";r.video.push(c);p=true}}break;default:break}if(p){break}n-=pf;a-=pf;continue}n--;a--}};var _f=function e(t,i){if(t.audio&&t.audio.length){var r=i;if(typeof r==="undefined"){r=t.audio[0].dts}t.audio.forEach(function(e){e.dts=ff(e.dts,r);e.pts=ff(e.pts,r);e.dtsTime=e.dts/hf;e.ptsTime=e.pts/hf})}if(t.video&&t.video.length){var n=i;if(typeof n==="undefined"){n=t.video[0].dts}t.video.forEach(function(e){e.dts=ff(e.dts,n);e.pts=ff(e.pts,n);e.dtsTime=e.dts/hf;e.ptsTime=e.pts/hf});if(t.firstKeyFrame){var a=t.firstKeyFrame;a.dts=ff(a.dts,n);a.pts=ff(a.pts,n);a.dtsTime=a.dts/hf;a.ptsTime=a.dts/hf}}};var bf=function e(t){var i=false,r=0,n=null,a=null,s=0,o=0,u;while(t.length-o>=3){var l=df.aac.parseType(t,o);switch(l){case"timed-metadata":if(t.length-o<10){i=true;break}s=df.aac.parseId3TagSize(t,o);if(s>t.length){i=true;break}if(a===null){u=t.subarray(o,o+s);a=df.aac.parseAacTimestamp(u)}o+=s;break;case"audio":if(t.length-o<7){i=true;break}s=df.aac.parseAdtsSize(t,o);if(s>t.length){i=true;break}if(n===null){u=t.subarray(o,o+s);n=df.aac.parseSampleRate(u)}r++;o+=s;break;default:o++;break}if(i){return null}}if(n===null||a===null){return null}var c=hf/n;var f={audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+r*1024*c,pts:a+r*1024*c}]};return f};var Tf=function e(t){var i={pid:null,table:null};var r={};vf(t,i);for(var n in i.table){if(i.table.hasOwnProperty(n)){var a=i.table[n];switch(a){case Dl.H264_STREAM_TYPE:r.video=[];yf(t,i,r);if(r.video.length===0){delete r.video}break;case Dl.ADTS_STREAM_TYPE:r.audio=[];gf(t,i,r);if(r.audio.length===0){delete r.audio}break;default:break}}}return r};var Sf=function e(t,i){var r=df.aac.isLikelyAacData(t);var n;if(r){n=bf(t)}else{n=Tf(t)}if(!n||!n.audio&&!n.video){return null}_f(n,i);return n};var kf={inspect:Sf,parseAudioPes_:gf};function wf(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}var Cf=function e(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}};var Ef=function(){function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(e,t,i){if(t)r(e.prototype,t);if(i)r(e,i);return e}}();var Af=function e(t,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof i)}t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(i)Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i};var Lf=function e(t,i){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i&&(typeof i==="object"||typeof i==="function")?i:t};var If=function e(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]];var i=t[0];var r=t[1];var n=i[4];var a=r[4];var s=void 0;var o=void 0;var u=void 0;var l=[];var c=[];var f=void 0;var d=void 0;var h=void 0;var p=void 0;var m=void 0;var v=void 0;for(s=0;s<256;s++){c[(l[s]=s<<1^(s>>7)*283)^s]=s}for(o=u=0;!n[o];o^=f||1,u=c[u]||1){p=u^u<<1^u<<2^u<<3^u<<4;p=p>>8^p&255^99;n[o]=p;a[p]=o;h=l[d=l[f=l[o]]];v=h*16843009^d*65537^f*257^o*16843008;m=l[p]*257^p*16843008;for(s=0;s<4;s++){i[s][o]=m=m<<24^m>>>8;r[s][p]=v=v<<24^v>>>8}}for(s=0;s<5;s++){i[s]=i[s].slice(0);r[s]=r[s].slice(0)}return t};var Pf=null;var Of=function(){function c(e){Cf(this,c);if(!Pf){Pf=If()}this._tables=[[Pf[0][0].slice(),Pf[0][1].slice(),Pf[0][2].slice(),Pf[0][3].slice(),Pf[0][4].slice()],[Pf[1][0].slice(),Pf[1][1].slice(),Pf[1][2].slice(),Pf[1][3].slice(),Pf[1][4].slice()]];var t=void 0;var i=void 0;var r=void 0;var n=void 0;var a=void 0;var s=this._tables[0][4];var o=this._tables[1];var u=e.length;var l=1;if(u!==4&&u!==6&&u!==8){throw new Error("Invalid aes key size")}n=e.slice(0);a=[];this._key=[n,a];for(t=u;t<4*u+28;t++){r=n[t-1];if(t%u===0||u===8&&t%u===4){r=s[r>>>24]<<24^s[r>>16&255]<<16^s[r>>8&255]<<8^s[r&255];if(t%u===0){r=r<<8^r>>>24^l<<24;l=l<<1^(l>>7)*283}}n[t]=n[t-u]^r}for(i=0;t;i++,t--){r=n[i&3?t:t-4];if(t<=4||i<4){a[i]=r}else{a[i]=o[0][s[r>>>24]]^o[1][s[r>>16&255]]^o[2][s[r>>8&255]]^o[3][s[r&255]]}}}c.prototype.decrypt=function e(t,i,r,n,a,s){var o=this._key[1];var u=t^o[0];var l=n^o[1];var c=r^o[2];var f=i^o[3];var d=void 0;var h=void 0;var p=void 0;var m=o.length/4-2;var v=void 0;var g=4;var y=this._tables[1];var _=y[0];var b=y[1];var T=y[2];var S=y[3];var k=y[4];for(v=0;v<m;v++){d=_[u>>>24]^b[l>>16&255]^T[c>>8&255]^S[f&255]^o[g];h=_[l>>>24]^b[c>>16&255]^T[f>>8&255]^S[u&255]^o[g+1];p=_[c>>>24]^b[f>>16&255]^T[u>>8&255]^S[l&255]^o[g+2];f=_[f>>>24]^b[u>>16&255]^T[l>>8&255]^S[c&255]^o[g+3];g+=4;u=d;l=h;c=p}for(v=0;v<4;v++){a[(3&-v)+s]=k[u>>>24]<<24^k[l>>16&255]<<16^k[c>>8&255]<<8^k[f&255]^o[g++];d=u;u=l;l=c;c=f;f=d}};return c}();var Uf=function(){function e(){Cf(this,e);this.listeners={}}e.prototype.on=function e(t,i){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(i)};e.prototype.off=function e(t,i){if(!this.listeners[t]){return false}var r=this.listeners[t].indexOf(i);this.listeners[t].splice(r,1);return r>-1};e.prototype.trigger=function e(t){var i=this.listeners[t];if(!i){return}if(arguments.length===2){var r=i.length;for(var n=0;n<r;++n){i[n].call(this,arguments[1])}}else{var a=Array.prototype.slice.call(arguments,1);var s=i.length;for(var o=0;o<s;++o){i[o].apply(this,a)}}};e.prototype.dispose=function e(){this.listeners={}};e.prototype.pipe=function e(t){this.on("data",function(e){t.push(e)})};return e}();var Df=function(t){Af(i,t);function i(){Cf(this,i);var e=Lf(this,t.call(this,Uf));e.jobs=[];e.delay=1;e.timeout_=null;return e}i.prototype.processJob_=function e(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}else{this.timeout_=null}};i.prototype.push=function e(t){this.jobs.push(t);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}};return i}(Uf);var xf=function e(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24};var Rf=function e(t,i,r){var n=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2);var a=new Of(Array.prototype.slice.call(i));var s=new Uint8Array(t.byteLength);var o=new Int32Array(s.buffer);var u=void 0;var l=void 0;var c=void 0;var f=void 0;var d=void 0;var h=void 0;var p=void 0;var m=void 0;var v=void 0;u=r[0];l=r[1];c=r[2];f=r[3];for(v=0;v<n.length;v+=4){d=xf(n[v]);h=xf(n[v+1]);p=xf(n[v+2]);m=xf(n[v+3]);a.decrypt(d,h,p,m,o,v);o[v]=xf(o[v]^u);o[v+1]=xf(o[v+1]^l);o[v+2]=xf(o[v+2]^c);o[v+3]=xf(o[v+3]^f);u=d;l=h;c=p;f=m}return s};var Mf=function(){function u(e,t,i,r){Cf(this,u);var n=u.STEP;var a=new Int32Array(e.buffer);var s=new Uint8Array(e.byteLength);var o=0;this.asyncStream_=new Df;this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+n),t,i,s));for(o=n;o<a.length;o+=n){i=new Uint32Array([xf(a[o-4]),xf(a[o-3]),xf(a[o-2]),xf(a[o-1])]);this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+n),t,i,s))}this.asyncStream_.push(function(){r(null,wf(s))})}u.prototype.decryptChunk_=function e(t,i,r,n){return function(){var e=Rf(t,i,r);n.set(e,t.byteOffset)}};Ef(u,null,[{key:"STEP",get:function e(){return 32e3}}]);return u}();var Bf=function e(t,i){if(/^[a-z]+:/i.test(i)){return i}if(!/\/\//i.test(t)){t=Us.buildAbsoluteURL(_.location.href,t)}return Us.buildAbsoluteURL(t,i)};var Nf=function e(t,i,r){if(t&&r.responseURL&&i!==r.responseURL){return r.responseURL}return i};var jf=function e(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}};var Ff=function(){function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(e,t,i){if(t)r(e.prototype,t);if(i)r(e,i);return e}}();var Vf=function e(t,i,r){if(t===null)t=Function.prototype;var n=Object.getOwnPropertyDescriptor(t,i);if(n===undefined){var a=Object.getPrototypeOf(t);if(a===null){return undefined}else{return e(a,i,r)}}else if("value"in n){return n.value}else{var s=n.get;if(s===undefined){return undefined}return s.call(r)}};var Hf=function e(t,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof i)}t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(i)Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i};var qf=function e(t,i){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i&&(typeof i==="object"||typeof i==="function")?i:t};var zf=function(){function i(e,t){var i=[];var r=true;var n=false;var a=undefined;try{for(var s=e[Symbol.iterator](),o;!(r=(o=s.next()).done);r=true){i.push(o.value);if(t&&i.length===t)break}}catch(e){n=true;a=e}finally{try{if(!r&&s["return"])s["return"]()}finally{if(n)throw a}}return i}return function(e,t){if(Array.isArray(e)){return e}else if(Symbol.iterator in Object(e)){return i(e,t)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var Wf=Is.mergeOptions,Gf=Is.EventTarget,Xf=Is.log;var Yf=function e(n,a){["AUDIO","SUBTITLES"].forEach(function(e){for(var t in n.mediaGroups[e]){for(var i in n.mediaGroups[e][t]){var r=n.mediaGroups[e][t][i];a(r,e,t,i)}}})};var Kf=function e(t,i,r){var n=i.slice();r=r||0;var a=Math.min(t.length,i.length+r);for(var s=r;s<a;s++){n[s-r]=Wf(t[s],n[s-r])}return n};var $f=function e(t,i){if(!t.resolvedUri){t.resolvedUri=Bf(i,t.uri)}if(t.key&&!t.key.resolvedUri){t.key.resolvedUri=Bf(i,t.key.uri)}if(t.map&&!t.map.resolvedUri){t.map.resolvedUri=Bf(i,t.map.uri)}};var Qf=function e(t,i){var r=Wf(t,{});var n=r.playlists[i.uri];if(!n){return null}if(n.segments&&i.segments&&n.segments.length===i.segments.length&&n.endList===i.endList&&n.mediaSequence===i.mediaSequence){return null}var a=Wf(n,i);if(n.segments){a.segments=Kf(n.segments,i.segments,i.mediaSequence-n.mediaSequence)}a.segments.forEach(function(e){$f(e,a.resolvedUri)});for(var s=0;s<r.playlists.length;s++){if(r.playlists[s].uri===i.uri){r.playlists[s]=a}}r.playlists[i.uri]=a;return r};var Jf=function e(t){var i=t.playlists.length;while(i--){var r=t.playlists[i];t.playlists[r.uri]=r;r.resolvedUri=Bf(t.uri,r.uri);r.id=i;if(!r.attributes){r.attributes={};Xf.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}};var Zf=function e(t){Yf(t,function(e){if(e.uri){e.resolvedUri=Bf(t.uri,e.uri)}})};var ed=function e(t,i){var r=t.segments[t.segments.length-1];var n=void 0;if(i&&r&&r.duration){n=r.duration*1e3}else{n=(t.targetDuration||10)*500}return n};var td=function(e){Hf(l,e);function l(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};jf(this,l);var r=qf(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));var n=i.withCredentials,a=n===undefined?false:n,s=i.handleManifestRedirects,o=s===undefined?false:s;r.srcUrl=e;r.hls_=t;r.withCredentials=a;r.handleManifestRedirects=o;var u=t.options_;r.customTagParsers=u&&u.customTagParsers||[];r.customTagMappers=u&&u.customTagMappers||[];if(!r.srcUrl){throw new Error("A non-empty playlist URL is required")}r.state="HAVE_NOTHING";r.on("mediaupdatetimeout",function(){if(r.state!=="HAVE_METADATA"){return}r.state="HAVE_CURRENT_METADATA";r.request=r.hls_.xhr({uri:Bf(r.master.uri,r.media().uri),withCredentials:r.withCredentials},function(e,t){if(!r.request){return}if(e){return r.playlistRequestError(r.request,r.media().uri,"HAVE_METADATA")}r.haveMetadata(r.request,r.media().uri)})});return r}Ff(l,[{key:"playlistRequestError",value:function e(t,i,r){this.request=null;if(r){this.state=r}this.error={playlist:this.master.playlists[i],status:t.status,message:"HLS playlist request error at URL: "+i,responseText:t.responseText,code:t.status>=500?4:2};this.trigger("error")}},{key:"haveMetadata",value:function e(t,i){var r=this;this.request=null;this.state="HAVE_METADATA";var n=new Vs;this.customTagParsers.forEach(function(e){return n.addParser(e)});this.customTagMappers.forEach(function(e){return n.addTagMapper(e)});n.push(t.responseText);n.end();n.manifest.uri=i;n.manifest.attributes=n.manifest.attributes||{};var a=Qf(this.master,n.manifest);this.targetDuration=n.manifest.targetDuration;if(a){this.master=a;this.media_=this.master.playlists[n.manifest.uri]}else{this.trigger("playlistunchanged")}if(!this.media().endList){_.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=_.setTimeout(function(){r.trigger("mediaupdatetimeout")},ed(this.media(),!!a))}this.trigger("loadedplaylist")}},{key:"dispose",value:function e(){this.stopRequest();_.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function e(){if(this.request){var t=this.request;this.request=null;t.onreadystatechange=null;t.abort()}}},{key:"media",value:function e(i){var r=this;if(!i){return this.media_}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state)}var n=this.state;if(typeof i==="string"){if(!this.master.playlists[i]){throw new Error("Unknown playlist URI: "+i)}i=this.master.playlists[i]}var t=!this.media_||i.uri!==this.media_.uri;if(this.master.playlists[i.uri].endList){if(this.request){this.request.onreadystatechange=null;this.request.abort();this.request=null}this.state="HAVE_METADATA";this.media_=i;if(t){this.trigger("mediachanging");this.trigger("mediachange")}return}if(!t){return}this.state="SWITCHING_MEDIA";if(this.request){if(i.resolvedUri===this.request.url){return}this.request.onreadystatechange=null;this.request.abort();this.request=null}if(this.media_){this.trigger("mediachanging")}this.request=this.hls_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(e,t){if(!r.request){return}i.resolvedUri=Nf(r.handleManifestRedirects,i.resolvedUri,t);if(e){return r.playlistRequestError(r.request,i.uri,n)}r.haveMetadata(t,i.uri);if(n==="HAVE_MASTER"){r.trigger("loadedmetadata")}else{r.trigger("mediachange")}})}},{key:"pause",value:function e(){this.stopRequest();_.clearTimeout(this.mediaUpdateTimeout);if(this.state==="HAVE_NOTHING"){this.started=false}if(this.state==="SWITCHING_MEDIA"){if(this.media_){this.state="HAVE_METADATA"}else{this.state="HAVE_MASTER"}}else if(this.state==="HAVE_CURRENT_METADATA"){this.state="HAVE_METADATA"}}},{key:"load",value:function e(t){var i=this;_.clearTimeout(this.mediaUpdateTimeout);var r=this.media();if(t){var n=r?r.targetDuration/2*1e3:5*1e3;this.mediaUpdateTimeout=_.setTimeout(function(){return i.load()},n);return}if(!this.started){this.start();return}if(r&&!r.endList){this.trigger("mediaupdatetimeout")}else{this.trigger("loadedplaylist")}}},{key:"start",value:function e(){var r=this;this.started=true;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(!r.request){return}r.request=null;if(e){r.error={status:t.status,message:"HLS playlist request error at URL: "+r.srcUrl,responseText:t.responseText,code:2};if(r.state==="HAVE_NOTHING"){r.started=false}return r.trigger("error")}var i=new Vs;r.customTagParsers.forEach(function(e){return i.addParser(e)});r.customTagMappers.forEach(function(e){return i.addTagMapper(e)});i.push(t.responseText);i.end();r.state="HAVE_MASTER";r.srcUrl=Nf(r.handleManifestRedirects,r.srcUrl,t);i.manifest.uri=r.srcUrl;if(i.manifest.playlists){r.master=i.manifest;Jf(r.master);Zf(r.master);r.trigger("loadedplaylist");if(!r.request){r.media(i.manifest.playlists[0])}return}r.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:_.location.href,playlists:[{uri:r.srcUrl,id:0,resolvedUri:r.srcUrl,attributes:{}}]};r.master.playlists[r.srcUrl]=r.master.playlists[0];r.haveMetadata(t,r.srcUrl);return r.trigger("loadedmetadata")})}}]);return l}(Gf);var id=Is.createTimeRange;var rd=function e(t,i){var r=0;var n=i-t.mediaSequence;var a=t.segments[n];if(a){if(typeof a.start!=="undefined"){return{result:a.start,precise:true}}if(typeof a.end!=="undefined"){return{result:a.end-a.duration,precise:true}}}while(n--){a=t.segments[n];if(typeof a.end!=="undefined"){return{result:r+a.end,precise:true}}r+=a.duration;if(typeof a.start!=="undefined"){return{result:r+a.start,precise:true}}}return{result:r,precise:false}};var nd=function e(t,i){var r=0;var n=void 0;var a=i-t.mediaSequence;for(;a<t.segments.length;a++){n=t.segments[a];if(typeof n.start!=="undefined"){return{result:n.start-r,precise:true}}r+=n.duration;if(typeof n.end!=="undefined"){return{result:n.end-r,precise:true}}}return{result:-1,precise:false}};var ad=function e(t,i,r){var n=void 0;var a=void 0;if(typeof i==="undefined"){i=t.mediaSequence+t.segments.length}if(i<t.mediaSequence){return 0}n=rd(t,i);if(n.precise){return n.result}a=nd(t,i);if(a.precise){return a.result}return n.result+r};var sd=function e(t,i,r){if(!t){return 0}if(typeof r!=="number"){r=0}if(typeof i==="undefined"){if(t.totalDuration){return t.totalDuration}if(!t.endList){return _.Infinity}}return ad(t,i,r)};var od=function e(t,i,r){var n=0;if(i>r){var a=[r,i];i=a[0];r=a[1]}if(i<0){for(var s=i;s<Math.min(0,r);s++){n+=t.targetDuration}i=0}for(var o=i;o<r;o++){n+=t.segments[o].duration}return n};var ud=function e(t){if(!t.segments.length){return 0}var i=t.segments.length-1;var r=t.segments[i].duration||t.targetDuration;var n=r+t.targetDuration*2;while(i--){r+=t.segments[i].duration;if(r>=n){break}}return Math.max(0,i)};var ld=function e(t,i,r){if(!t||!t.segments){return null}if(t.endList){return sd(t)}if(i===null){return null}i=i||0;var n=r?ud(t):t.segments.length;return ad(t,t.mediaSequence+n,i)};var cd=function e(t,i){var r=true;var n=i||0;var a=ld(t,i,r);if(a===null){return id()}return id(n,a)};var fd=function e(t){return t-Math.floor(t)===0};var dd=function e(t,i){if(fd(i)){return i+t*.1}var r=i.toString().split(".")[1].length;for(var n=1;n<=r;n++){var a=Math.pow(10,n);var s=i*a;if(fd(s)||n===r){return(s+t)/a}}};var hd=dd.bind(null,1);var pd=dd.bind(null,-1);var md=function e(t,i,r,n){var a=void 0;var s=void 0;var o=t.segments.length;var u=i-n;if(u<0){if(r>0){for(a=r-1;a>=0;a--){s=t.segments[a];u+=pd(s.duration);if(u>0){return{mediaIndex:a,startTime:n-od(t,r,a)}}}}return{mediaIndex:0,startTime:i}}if(r<0){for(a=r;a<0;a++){u-=t.targetDuration;if(u<0){return{mediaIndex:0,startTime:i}}}r=0}for(a=r;a<o;a++){s=t.segments[a];u-=hd(s.duration);if(u<0){return{mediaIndex:a,startTime:n+od(t,r,a)}}}return{mediaIndex:o-1,startTime:i}};var vd=function e(t){return t.excludeUntil&&t.excludeUntil>Date.now()};var gd=function e(t){return t.excludeUntil&&t.excludeUntil===Infinity};var yd=function e(t){var i=vd(t);return!t.disabled&&!i};var _d=function e(t){return t.disabled};var bd=function e(t){for(var i=0;i<t.segments.length;i++){if(t.segments[i].key){return true}}return false};var Td=function e(t){for(var i=0;i<t.segments.length;i++){if(t.segments[i].map){return true}}return false};var Sd=function e(t,i){return i.attributes&&i.attributes[t]};var kd=function e(t,i,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;if(!Sd("BANDWIDTH",r)){return NaN}var a=t*r.attributes.BANDWIDTH;return(a-n*8)/i};var wd=function e(t,i){if(t.playlists.length===1){return true}var r=i.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(function(e){if(!yd(e)){return false}return(e.attributes.BANDWIDTH||0)<r}).length===0};var Cd={duration:sd,seekable:cd,safeLiveIndex:ud,getMediaInfoForTime:md,isEnabled:yd,isDisabled:_d,isBlacklisted:vd,isIncompatible:gd,playlistEnd:ld,isAes:bd,isFmp4:Td,hasAttribute:Sd,estimateSegmentRequestTime:kd,isLowestEnabledRendition:wd};var Ed=Is.xhr,Ad=Is.mergeOptions;var Ld=function e(){var t=function e(t,r){t=Ad({timeout:45e3},t);var i=e.beforeRequest||Is.Hls.xhr.beforeRequest;if(i&&typeof i==="function"){var n=i(t);if(n){t=n}}var a=Ed(t,function(e,t){var i=a.response;if(!e&&i){a.responseTime=Date.now();a.roundTripTime=a.responseTime-a.requestTime;a.bytesReceived=i.byteLength||i.length;if(!a.bandwidth){a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3)}}if(t.headers){a.responseHeaders=t.headers}if(e&&e.code==="ETIMEDOUT"){a.timedout=true}if(!e&&!a.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0){e=new Error("XHR Failed with a response of: "+(a&&(i||a.responseText)))}r(e,a)});var s=a.abort;a.abort=function(){a.aborted=true;return s.apply(a,arguments)};a.uri=t.uri;a.requestTime=Date.now();return a};return t};var Id=function e(t,i){return t.start(i)+"-"+t.end(i)};var Pd=function e(t,i){var r=t.toString(16);return"00".substring(0,2-r.length)+r+(i%2?" ":"")};var Od=function e(t){if(t>=32&&t<126){return String.fromCharCode(t)}return"."};var Ud=function e(i){var r={};Object.keys(i).forEach(function(e){var t=i[e];if(ArrayBuffer.isView(t)){r[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}}else{r[e]=t}});return r};var Dd=function e(t){var i=t.byterange||{length:Infinity,offset:0};return[i.length,i.offset,t.resolvedUri].join(",")};var xd=function e(t){var i=Array.prototype.slice.call(t);var r=16;var n="";var a=void 0;var s=void 0;for(var o=0;o<i.length/r;o++){a=i.slice(o*r,o*r+r).map(Pd).join("");s=i.slice(o*r,o*r+r).map(Od).join("");n+=a+" "+s+"\n"}return n};var Rd=function e(t){var i=t.bytes;return xd(i)};var Md=function e(t){var i="";var r=void 0;for(r=0;r<t.length;r++){i+=Id(t,r)+" "}return i};var Bd=Object.freeze({createTransferableMessage:Ud,initSegmentId:Dd,hexDump:xd,tagDump:Rd,textRanges:Md});var Nd=.25;var jd=function e(t,i){if(!i.dateTimeObject){return null}var r=i.videoTimingInfo.transmuxerPrependedSeconds;var n=i.videoTimingInfo.transmuxedPresentationStart;var a=n+r;var s=t-a;return new Date(i.dateTimeObject.getTime()+s*1e3)};var Fd=function e(t){return t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds};var Vd=function e(t,i){var r=void 0;try{r=new Date(t)}catch(e){return null}if(!i||!i.segments||i.segments.length===0){return null}var n=i.segments[0];if(r<n.dateTimeObject){return null}for(var a=0;a<i.segments.length-1;a++){n=i.segments[a];var s=i.segments[a+1].dateTimeObject;if(r<s){break}}var o=i.segments[i.segments.length-1];var u=o.dateTimeObject;var l=o.videoTimingInfo?Fd(o.videoTimingInfo):o.duration+o.duration*Nd;var c=new Date(u.getTime()+l*1e3);if(r>c){return null}if(r>u){n=o}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:Cd.duration(i,i.mediaSequence+i.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"}};var Hd=function e(t,i){if(!i||!i.segments||i.segments.length===0){return null}var r=0;var n=void 0;for(var a=0;a<i.segments.length;a++){n=i.segments[a];r=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:r+n.duration;if(t<=r){break}}var s=i.segments[i.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t){return null}if(t>r){if(t>r+s.duration*Nd){return null}n=s}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:r-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}};var qd=function e(t,i){var r=void 0;var n=void 0;try{r=new Date(t);n=new Date(i)}catch(e){}var a=r.getTime();var s=n.getTime();return(s-a)/1e3};var zd=function e(t){if(!t.segments||t.segments.length===0){return false}for(var i=0;i<t.segments.length;i++){var r=t.segments[i];if(!r.dateTimeObject){return false}}return true};var Wd=function e(t){var i=t.playlist,r=t.time,n=r===undefined?undefined:r,a=t.callback;if(!a){throw new Error("getProgramTime: callback must be provided")}if(!i||n===undefined){return a({message:"getProgramTime: playlist and time must be provided"})}var s=Hd(n,i);if(!s){return a({message:"valid programTime was not found"})}if(s.type==="estimate"){return a({message:"Accurate programTime could not be determined."+" Please seek to e.seekTime and try again",seekTime:s.estimatedStart})}var o={mediaSeconds:n};var u=jd(n,s.segment);if(u){o.programDateTime=u.toISOString()}return a(null,o)};var Gd=function e(t){var i=t.programTime,r=t.playlist,n=t.retryCount,a=n===undefined?2:n,s=t.seekTo,o=t.pauseAfterSeek,u=o===undefined?true:o,l=t.tech,c=t.callback;if(!c){throw new Error("seekToProgramTime: callback must be provided")}if(typeof i==="undefined"||!r||!s){return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"})}if(!r.endList&&!l.hasStarted_){return c({message:"player must be playing a live stream to start buffering"})}if(!zd(r)){return c({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri})}var f=Vd(i,r);if(!f){return c({message:i+" was not found in the stream"})}var d=f.segment;var h=qd(d.dateTimeObject,i);if(f.type==="estimate"){if(a===0){return c({message:i+" is not buffered yet. Try again"})}s(f.estimatedStart+h);l.one("seeked",function(){e({programTime:i,playlist:r,retryCount:a-1,seekTo:s,pauseAfterSeek:u,tech:l,callback:c})});return}var p=d.start+h;var m=function e(){return c(null,l.currentTime())};l.one("seeked",m);if(u){l.pause()}s(p)};var Xd=1/30;var Yd=Xd*3;var Kd=function e(t,i){var r=[];var n=void 0;if(t&&t.length){for(n=0;n<t.length;n++){if(i(t.start(n),t.end(n))){r.push([t.start(n),t.end(n)])}}}return Is.createTimeRanges(r)};var $d=function e(t,i){return Kd(t,function(e,t){return e-Xd<=i&&t+Xd>=i})};var Qd=function e(t,i){return Kd(t,function(e){return e-Xd>=i})};var Jd=function e(t){if(t.length<2){return Is.createTimeRanges()}var i=[];for(var r=1;r<t.length;r++){var n=t.end(r-1);var a=t.start(r);i.push([n,a])}return Is.createTimeRanges(i)};var Zd=function e(t){var i=[];if(!t||!t.length){return""}for(var r=0;r<t.length;r++){i.push(t.start(r)+" => "+t.end(r))}return i.join(", ")};var eh=function e(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var n=t.length?t.end(t.length-1):0;return(n-i)/r};var th=function e(t){var i=[];for(var r=0;r<t.length;r++){i.push({start:t.start(r),end:t.end(r)})}return i};var ih=function e(t,i,r){var n=i.player_;if(r.captions&&r.captions.length){if(!t.inbandTextTracks_){t.inbandTextTracks_={}}for(var a in r.captionStreams){if(!t.inbandTextTracks_[a]){n.tech_.trigger({type:"usage",name:"hls-608"});var s=n.textTracks().getTrackById(a);if(s){t.inbandTextTracks_[a]=s}else{t.inbandTextTracks_[a]=n.addRemoteTextTrack({kind:"captions",id:a,label:a},false).track}}}}if(r.metadata&&r.metadata.length&&!t.metadataTrack_){t.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},false).track;t.metadataTrack_.inBandMetadataTrackDispatchType=r.metadata.dispatchType}};var rh=function e(t,i,r){var n=void 0;var a=void 0;if(!r){return}if(!r.cues){return}n=r.cues.length;while(n--){a=r.cues[n];if(a.startTime<=i&&a.endTime>=t){r.removeCue(a)}}};var nh=function e(t){Object.defineProperties(t.frame,{id:{get:function e(){Is.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return t.value.key}},value:{get:function e(){Is.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return t.value.data}},privateData:{get:function e(){Is.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return t.value.data}}})};var ah=function e(t){var i=void 0;if(isNaN(t)||Math.abs(t)===Infinity){i=Number.MAX_VALUE}else{i=t}return i};var sh=function e(t,i,r){var n=_.WebKitDataCue||_.VTTCue;if(i){i.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new n(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},t)}if(r){var a=ah(t.mediaSource_.duration);r.forEach(function(e){var i=e.cueTime+this.timestampOffset;if(typeof i!=="number"||_.isNaN(i)||i<0||!(i<Infinity)){return}e.frames.forEach(function(e){var t=new n(i,i,e.value||e.url||e.data||"");t.frame=e;t.value=e;nh(t);this.metadataTrack_.addCue(t)},this)},t);if(t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length){var s=t.metadataTrack_.cues;var o=[];for(var u=0;u<s.length;u++){if(s[u]){o.push(s[u])}}var l=o.reduce(function(e,t){var i=e[t.startTime]||[];i.push(t);e[t.startTime]=i;return e},{});var c=Object.keys(l).sort(function(e,t){return Number(e)-Number(t)});c.forEach(function(e,t){var i=l[e];var r=Number(c[t+1])||a;i.forEach(function(e){e.endTime=r})})}}};var oh=typeof window!=="undefined"?window:{},uh=typeof Symbol==="undefined"?"__target":Symbol(),lh="application/javascript",ch=oh.BlobBuilder||oh.WebKitBlobBuilder||oh.MozBlobBuilder||oh.MSBlobBuilder,fh=oh.URL||oh.webkitURL||fh&&fh.msURL,dh=oh.Worker;function hh(s,o){return function e(t){var i=this;if(!o){return new dh(s)}else if(dh&&!t){var r=o.toString().replace(/^function.+?{/,"").slice(0,-1),n=gh(r);this[uh]=new dh(n);yh(this[uh],n);return this[uh]}else{var a={postMessage:function e(t){if(i.onmessage){setTimeout(function(){i.onmessage({data:t,target:a})})}}};o.call(a);this.postMessage=function(e){setTimeout(function(){a.onmessage({data:e,target:i})})};this.isThisThread=true}}}if(dh){var ph,mh=gh("self.onmessage = function () {}"),vh=new Uint8Array(1);try{ph=new dh(mh);ph.postMessage(vh,[vh.buffer])}catch(e){dh=null}finally{fh.revokeObjectURL(mh);if(ph){ph.terminate()}}}function gh(t){try{return fh.createObjectURL(new Blob([t],{type:lh}))}catch(e){var i=new ch;i.append(t);return fh.createObjectURL(i.getBlob(type))}}function yh(e,t){if(!e||!t)return;var i=e.terminate;e.objURL=t;e.terminate=function(){if(e.objURL)fh.revokeObjectURL(e.objURL);i.call(e)}}var _h=new hh("./transmuxer-worker.worker.js",function(e,t){var mi=this;var i=function(){var l=Math.pow(2,32)-1;var c,i,n,a,e,s,r,t,o,u,f,d,h,p,m,v,g,y,_,b,T,S,k,w,C,E,A,L,I,P,O,U,D,x,R,M;(function(){var e;k={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if(typeof Uint8Array==="undefined"){return}for(e in k){if(k.hasOwnProperty(e)){k[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]}}w=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]);E=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]);C=new Uint8Array([0,0,0,1]);A=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);L=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);I={video:A,audio:L};U=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);O=new Uint8Array([0,0,0,0,0,0,0,0]);D=new Uint8Array([0,0,0,0,0,0,0,0]);x=D;R=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);M=D;P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])})();c=function e(t){var i=[],r=0,n,a,s;for(n=1;n<arguments.length;n++){i.push(arguments[n])}n=i.length;while(n--){r+=i[n].byteLength}a=new Uint8Array(r+8);s=new DataView(a.buffer,a.byteOffset,a.byteLength);s.setUint32(0,a.byteLength);a.set(t,4);for(n=0,r=8;n<i.length;n++){a.set(i[n],r);r+=i[n].byteLength}return a};i=function e(){return c(k.dinf,c(k.dref,U))};n=function e(t){return c(k.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))};a=function e(){return c(k.ftyp,w,C,w,E)};v=function e(t){return c(k.hdlr,I[t])};e=function e(t){return c(k.mdat,t)};m=function e(t){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,t.duration&255,85,196,0,0]);if(t.samplerate){i[12]=t.samplerate>>>24&255;i[13]=t.samplerate>>>16&255;i[14]=t.samplerate>>>8&255;i[15]=t.samplerate&255}return c(k.mdhd,i)};p=function e(t){return c(k.mdia,m(t),v(t.type),r(t))};s=function e(t){return c(k.mfhd,new Uint8Array([0,0,0,0,(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255]))};r=function e(t){return c(k.minf,t.type==="video"?c(k.vmhd,P):c(k.smhd,O),i(),y(t))};t=function e(t,i){var r=[],n=i.length;while(n--){r[n]=b(i[n])}return c.apply(null,[k.moof,s(t)].concat(r))};o=function e(t){var i=t.length,r=[];while(i--){r[i]=d(t[i])}return c.apply(null,[k.moov,f(4294967295)].concat(r).concat(u(t)))};u=function e(t){var i=t.length,r=[];while(i--){r[i]=T(t[i])}return c.apply(null,[k.mvex].concat(r))};f=function e(t){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return c(k.mvhd,i)};g=function e(t){var i=t.samples||[],r=new Uint8Array(4+i.length),n,a;for(a=0;a<i.length;a++){n=i[a].flags;r[a+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy}return c(k.sdtp,r)};y=function e(t){return c(k.stbl,_(t),c(k.stts,M),c(k.stsc,x),c(k.stsz,R),c(k.stco,D))};(function(){var i,r;_=function e(t){return c(k.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),t.type==="video"?i(t):r(t))};i=function e(t){var i=t.sps||[],r=t.pps||[],n=[],a=[],s;for(s=0;s<i.length;s++){n.push((i[s].byteLength&65280)>>>8);n.push(i[s].byteLength&255);n=n.concat(Array.prototype.slice.call(i[s]))}for(s=0;s<r.length;s++){a.push((r[s].byteLength&65280)>>>8);a.push(r[s].byteLength&255);a=a.concat(Array.prototype.slice.call(r[s]))}return c(k.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(t.width&65280)>>8,t.width&255,(t.height&65280)>>8,t.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c(k.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([i.length]).concat(n).concat([r.length]).concat(a))),c(k.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};r=function e(t){return c(k.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(t.channelcount&65280)>>8,t.channelcount&255,(t.samplesize&65280)>>8,t.samplesize&255,0,0,0,0,(t.samplerate&65280)>>8,t.samplerate&255,0,0]),n(t))}})();h=function e(t){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(t.id&4278190080)>>24,(t.id&16711680)>>16,(t.id&65280)>>8,t.id&255,0,0,0,0,(t.duration&4278190080)>>24,(t.duration&16711680)>>16,(t.duration&65280)>>8,t.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(t.width&65280)>>8,t.width&255,0,0,(t.height&65280)>>8,t.height&255,0,0]);return c(k.tkhd,i)};b=function e(t){var i,r,n,a,s,o,u;i=c(k.tfhd,new Uint8Array([0,0,0,58,(t.id&4278190080)>>24,(t.id&16711680)>>16,(t.id&65280)>>8,t.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));o=Math.floor(t.baseMediaDecodeTime/(l+1));u=Math.floor(t.baseMediaDecodeTime%(l+1));r=c(k.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,o&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255]));s=32+20+8+16+8+8;if(t.type==="audio"){n=S(t,s);return c(k.traf,i,r,n)}a=g(t);n=S(t,a.length+s);return c(k.traf,i,r,n,a)};d=function e(t){t.duration=t.duration||4294967295;return c(k.trak,h(t),p(t))};T=function e(t){var i=new Uint8Array([0,0,0,0,(t.id&4278190080)>>24,(t.id&16711680)>>16,(t.id&65280)>>8,t.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);if(t.type!=="video"){i[i.length-1]=0}return c(k.trex,i)};(function(){var r,n,o;o=function e(t,i){var r=0,n=0,a=0,s=0;if(t.length){if(t[0].duration!==undefined){r=1}if(t[0].size!==undefined){n=2}if(t[0].flags!==undefined){a=4}if(t[0].compositionTimeOffset!==undefined){s=8}}return[0,0,r|n|a|s,1,(t.length&4278190080)>>>24,(t.length&16711680)>>>16,(t.length&65280)>>>8,t.length&255,(i&4278190080)>>>24,(i&16711680)>>>16,(i&65280)>>>8,i&255]};n=function e(t,i){var r,n,a,s;n=t.samples||[];i+=8+12+16*n.length;r=o(n,i);for(s=0;s<n.length;s++){a=n[s];r=r.concat([(a.duration&4278190080)>>>24,(a.duration&16711680)>>>16,(a.duration&65280)>>>8,a.duration&255,(a.size&4278190080)>>>24,(a.size&16711680)>>>16,(a.size&65280)>>>8,a.size&255,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,a.flags.degradationPriority&240<<8,a.flags.degradationPriority&15,(a.compositionTimeOffset&4278190080)>>>24,(a.compositionTimeOffset&16711680)>>>16,(a.compositionTimeOffset&65280)>>>8,a.compositionTimeOffset&255])}return c(k.trun,new Uint8Array(r))};r=function e(t,i){var r,n,a,s;n=t.samples||[];i+=8+12+8*n.length;r=o(n,i);for(s=0;s<n.length;s++){a=n[s];r=r.concat([(a.duration&4278190080)>>>24,(a.duration&16711680)>>>16,(a.duration&65280)>>>8,a.duration&255,(a.size&4278190080)>>>24,(a.size&16711680)>>>16,(a.size&65280)>>>8,a.size&255])}return c(k.trun,new Uint8Array(r))};S=function e(t,i){if(t.type==="audio"){return r(t,i)}return n(t,i)}})();var B={ftyp:a,mdat:e,moof:t,moov:o,initSegment:function e(t){var i=a(),r=o(t),n;n=new Uint8Array(i.byteLength+r.byteLength);n.set(i);n.set(r,i.byteLength);return n}};var N=function e(t){return t>>>0};var j={toUnsigned:N};var F=j.toUnsigned;var V,H,q,z,W;V=function e(t,i){var r=[],n,a,s,o,u;if(!i.length){return null}for(n=0;n<t.byteLength;){a=F(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);s=H(t.subarray(n+4,n+8));o=a>1?n+a:t.byteLength;if(s===i[0]){if(i.length===1){r.push(t.subarray(n+8,o))}else{u=V(t.subarray(n+8,o),i.slice(1));if(u.length){r=r.concat(u)}}}n=o}return r};H=function e(t){var i="";i+=String.fromCharCode(t[0]);i+=String.fromCharCode(t[1]);i+=String.fromCharCode(t[2]);i+=String.fromCharCode(t[3]);return i};q=function e(t){var i={},r=V(t,["moov","trak"]);return r.reduce(function(e,t){var i,r,n,a,s;i=V(t,["tkhd"])[0];if(!i){return null}r=i[0];n=r===0?12:20;a=F(i[n]<<24|i[n+1]<<16|i[n+2]<<8|i[n+3]);s=V(t,["mdia","mdhd"])[0];if(!s){return null}r=s[0];n=r===0?12:20;e[a]=F(s[n]<<24|s[n+1]<<16|s[n+2]<<8|s[n+3]);return e},i)};z=function e(a,t){var i,r,n;i=V(t,["moof","traf"]);r=[].concat.apply([],i.map(function(n){return V(n,["tfhd"]).map(function(e){var t,i,r;t=F(e[4]<<24|e[5]<<16|e[6]<<8|e[7]);i=a[t]||9e4;r=V(n,["tfdt"]).map(function(e){var t,i;t=e[0];i=F(e[4]<<24|e[5]<<16|e[6]<<8|e[7]);if(t===1){i*=Math.pow(2,32);i+=F(e[8]<<24|e[9]<<16|e[10]<<8|e[11])}return i})[0];r=r||Infinity;return r/i})}));n=Math.min.apply(null,r);return isFinite(n)?n:0};W=function e(t){var i=V(t,["moov","trak"]);var u=[];i.forEach(function(e){var t=V(e,["mdia","hdlr"]);var o=V(e,["tkhd"]);t.forEach(function(e,t){var i=H(e.subarray(8,12));var r=o[t];var n;var a;var s;if(i==="vide"){n=new DataView(r.buffer,r.byteOffset,r.byteLength);a=n.getUint8(0);s=a===0?n.getUint32(12):n.getUint32(20);u.push(s)}})});return u};var G={findBox:V,parseType:H,timescale:q,startTime:z,videoTrackIds:W};var X=function e(){this.init=function(){var a={};this.on=function(e,t){if(!a[e]){a[e]=[]}a[e]=a[e].concat(t)};this.off=function(e,t){var i;if(!a[e]){return false}i=a[e].indexOf(t);a[e]=a[e].slice();a[e].splice(i,1);return i>-1};this.trigger=function(e){var t,i,r,n;t=a[e];if(!t){return}if(arguments.length===2){r=t.length;for(i=0;i<r;++i){t[i].call(this,arguments[1])}}else{n=[];i=arguments.length;for(i=1;i<arguments.length;++i){n.push(arguments[i])}r=t.length;for(i=0;i<r;++i){t[i].apply(this,n)}}};this.dispose=function(){a={}}}};X.prototype.pipe=function(t){this.on("data",function(e){t.push(e)});this.on("done",function(e){t.flush(e)});return t};X.prototype.push=function(e){this.trigger("data",e)};X.prototype.flush=function(e){this.trigger("done",e)};var Y=X;var K=function e(t){var i,r,n=[],a=[];n.byteLength=0;for(i=0;i<t.length;i++){r=t[i];if(r.nalUnitType==="access_unit_delimiter_rbsp"){if(n.length){n.duration=r.dts-n.dts;a.push(n)}n=[r];n.byteLength=r.data.byteLength;n.pts=r.pts;n.dts=r.dts}else{if(r.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){n.keyFrame=true}n.duration=r.dts-n.dts;n.byteLength+=r.data.byteLength;n.push(r)}}if(a.length&&(!n.duration||n.duration<=0)){n.duration=a[a.length-1].duration}a.push(n);return a};var $=function e(t){var i,r,n=[],a=[];n.byteLength=0;n.nalCount=0;n.duration=0;n.pts=t[0].pts;n.dts=t[0].dts;a.byteLength=0;a.nalCount=0;a.duration=0;a.pts=t[0].pts;a.dts=t[0].dts;for(i=0;i<t.length;i++){r=t[i];if(r.keyFrame){if(n.length){a.push(n);a.byteLength+=n.byteLength;a.nalCount+=n.nalCount;a.duration+=n.duration}n=[r];n.nalCount=r.length;n.byteLength=r.byteLength;n.pts=r.pts;n.dts=r.dts;n.duration=r.duration}else{n.duration+=r.duration;n.nalCount+=r.length;n.byteLength+=r.byteLength;n.push(r)}}if(a.length&&n.duration<=0){n.duration=a[a.length-1].duration}a.byteLength+=n.byteLength;a.nalCount+=n.nalCount;a.duration+=n.duration;a.push(n);return a};var Q=function e(t){var i;if(!t[0][0].keyFrame&&t.length>1){i=t.shift();t.byteLength-=i.byteLength;t.nalCount-=i.nalCount;t[0][0].dts=i.dts;t[0][0].pts=i.pts;t[0][0].duration+=i.duration}return t};var J=function e(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}};var Z=function e(t,i){var r=J();r.dataOffset=i;r.compositionTimeOffset=t.pts-t.dts;r.duration=t.duration;r.size=4*t.length;r.size+=t.byteLength;if(t.keyFrame){r.flags.dependsOn=2;r.flags.isNonSyncSample=0}return r};var ee=function e(t,i){var r,n,a,s,o,u=i||0,l=[];for(r=0;r<t.length;r++){s=t[r];for(n=0;n<s.length;n++){o=s[n];a=Z(o,u);u+=a.size;l.push(a)}}return l};var te=function e(t){var i,r,n,a,s,o,u=0,l=t.byteLength,c=t.nalCount,f=l+4*c,d=new Uint8Array(f),h=new DataView(d.buffer);for(i=0;i<t.length;i++){a=t[i];for(r=0;r<a.length;r++){s=a[r];for(n=0;n<s.length;n++){o=s[n];h.setUint32(u,o.data.byteLength);u+=4;d.set(o.data,u);u+=o.data.byteLength}}}return d};var ie={groupNalsIntoFrames:K,groupFramesIntoGops:$,extendFirstKeyFrame:Q,generateSampleTable:ee,concatenateNalData:te};var re=[33,16,5,32,164,27];var ne=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var ae=function e(t){var i=[];while(t--){i.push(0)}return i};var se=function e(i){return Object.keys(i).reduce(function(e,t){e[t]=new Uint8Array(i[t].reduce(function(e,t){return e.concat(t)},[]));return e},{})};var oe={96e3:[re,[227,64],ae(154),[56]],88200:[re,[231],ae(170),[56]],64e3:[re,[248,192],ae(240),[56]],48e3:[re,[255,192],ae(268),[55,148,128],ae(54),[112]],44100:[re,[255,192],ae(268),[55,163,128],ae(84),[112]],32e3:[re,[255,192],ae(268),[55,234],ae(226),[112]],24e3:[re,[255,192],ae(268),[55,255,128],ae(268),[111,112],ae(126),[224]],16e3:[re,[255,192],ae(268),[55,255,128],ae(268),[111,255],ae(269),[223,108],ae(195),[1,192]],12e3:[ne,ae(268),[3,127,248],ae(268),[6,255,240],ae(268),[13,255,224],ae(268),[27,253,128],ae(259),[56]],11025:[ne,ae(268),[3,127,248],ae(268),[6,255,240],ae(268),[13,255,224],ae(268),[27,255,192],ae(268),[55,175,128],ae(108),[112]],8e3:[ne,ae(268),[3,121,16],ae(47),[7]]};var ue=se(oe);var le=9e4,ce,fe,de,he,pe,me;ce=function e(t){return t*le};fe=function e(t,i){return t*i};de=function e(t){return t/le};he=function e(t,i){return t/i};pe=function e(t,i){return ce(he(t,i))};me=function e(t,i){return fe(de(t),i)};var ve={secondsToVideoTs:ce,secondsToAudioTs:fe,videoTsToSeconds:de,audioTsToSeconds:he,audioTsToVideoTs:pe,videoTsToAudioTs:me};var ge=9e4;var ye=function e(t){var i,r,n=0;for(i=0;i<t.length;i++){r=t[i];n+=r.data.byteLength}return n};var _e=function e(t,i,r,n){var a,s=0,o=0,u=0,l=0,c,f;if(!i.length){return}a=ve.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate);s=Math.ceil(ge/(t.samplerate/1024));if(r&&n){o=a-Math.max(r,n);u=Math.floor(o/s);l=u*s}if(u<1||l>ge/2){return}c=ue[t.samplerate];if(!c){c=i[0].data}for(f=0;f<u;f++){i.splice(f,0,{data:c})}t.baseMediaDecodeTime-=Math.floor(ve.videoTsToAudioTs(l,t.samplerate))};var be=function e(t,i,r){if(i.minSegmentDts>=r){return t}i.minSegmentDts=Infinity;return t.filter(function(e){if(e.dts>=r){i.minSegmentDts=Math.min(i.minSegmentDts,e.dts);i.minSegmentPts=i.minSegmentDts;return true}return false})};var Te=function e(t){var i,r,n=[];for(i=0;i<t.length;i++){r=t[i];n.push({size:r.data.byteLength,duration:1024})}return n};var Se=function e(t){var i,r,n=0,a=new Uint8Array(ye(t));for(i=0;i<t.length;i++){r=t[i];a.set(r.data,n);n+=r.data.byteLength}return a};var ke={prefixWithSilence:_e,trimAdtsFramesByEarliestDts:be,generateSampleTable:Te,concatenateFrameData:Se};var we=9e4;var Ce=function e(t,i){if(typeof i.pts==="number"){if(t.timelineStartInfo.pts===undefined){t.timelineStartInfo.pts=i.pts}if(t.minSegmentPts===undefined){t.minSegmentPts=i.pts}else{t.minSegmentPts=Math.min(t.minSegmentPts,i.pts)}if(t.maxSegmentPts===undefined){t.maxSegmentPts=i.pts}else{t.maxSegmentPts=Math.max(t.maxSegmentPts,i.pts)}}if(typeof i.dts==="number"){if(t.timelineStartInfo.dts===undefined){t.timelineStartInfo.dts=i.dts}if(t.minSegmentDts===undefined){t.minSegmentDts=i.dts}else{t.minSegmentDts=Math.min(t.minSegmentDts,i.dts)}if(t.maxSegmentDts===undefined){t.maxSegmentDts=i.dts}else{t.maxSegmentDts=Math.max(t.maxSegmentDts,i.dts)}}};var Ee=function e(t){delete t.minSegmentDts;delete t.maxSegmentDts;delete t.minSegmentPts;delete t.maxSegmentPts};var Ae=function e(t,i){var r,n,a=t.minSegmentDts;if(!i){a-=t.timelineStartInfo.dts}r=t.timelineStartInfo.baseMediaDecodeTime;r+=a;r=Math.max(0,r);if(t.type==="audio"){n=t.samplerate/we;r*=n;r=Math.floor(r)}return r};var Le={clearDtsInfo:Ee,calculateTrackBaseMediaDecodeTime:Ae,collectDtsInfo:Ce};var Ie=4,Pe=128;var Oe=function e(t){var i=0,r={payloadType:-1,payloadSize:0},n=0,a=0;while(i<t.byteLength){if(t[i]===Pe){break}while(t[i]===255){n+=255;i++}n+=t[i++];while(t[i]===255){a+=255;i++}a+=t[i++];if(!r.payload&&n===Ie){r.payloadType=n;r.payloadSize=a;r.payload=t.subarray(i,i+a);break}i+=a;n=0;a=0}return r};var Ue=function e(t){if(t.payload[0]!==181){return null}if((t.payload[1]<<8|t.payload[2])!==49){return null}if(String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])!=="GA94"){return null}if(t.payload[7]!==3){return null}return t.payload.subarray(8,t.payload.length-1)};var De=function e(t,i){var r=[],n,a,s,o;if(!(i[0]&64)){return r}a=i[0]&31;for(n=0;n<a;n++){s=n*3;o={type:i[s+2]&3,pts:t};if(i[s+2]&4){o.ccData=i[s+3]<<8|i[s+4];r.push(o)}}return r};var xe=function e(t){var i=t.byteLength,r=[],n=1,a,s;while(n<i-2){if(t[n]===0&&t[n+1]===0&&t[n+2]===3){r.push(n+2);n+=2}else{n++}}if(r.length===0){return t}a=i-r.length;s=new Uint8Array(a);var o=0;for(n=0;n<a;o++,n++){if(o===r[0]){o++;r.shift()}s[n]=t[o]}return s};var Re={parseSei:Oe,parseUserData:Ue,parseCaptionPackets:De,discardEmulationPreventionBytes:xe,USER_DATA_REGISTERED_ITU_T_T35:Ie};var Me=function e(){e.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new He(0,0),new He(0,1),new He(1,0),new He(1,1)];this.reset();this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data"));e.on("done",this.trigger.bind(this,"done"))},this)};Me.prototype=new Y;Me.prototype.push=function(e){var t,i,r;if(e.nalUnitType!=="sei_rbsp"){return}t=Re.parseSei(e.escapedRBSP);if(t.payloadType!==Re.USER_DATA_REGISTERED_ITU_T_T35){return}i=Re.parseUserData(t);if(!i){return}if(e.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;if(!this.numSameDts_){this.ignoreNextEqualDts_=false}return}r=Re.parseCaptionPackets(e.pts,i);this.captionPackets_=this.captionPackets_.concat(r);if(this.latestDts_!==e.dts){this.numSameDts_=0}this.numSameDts_++;this.latestDts_=e.dts};Me.prototype.flush=function(){if(!this.captionPackets_.length){this.ccStreams_.forEach(function(e){e.flush()},this);return}this.captionPackets_.forEach(function(e,t){e.presortIndex=t});this.captionPackets_.sort(function(e,t){if(e.pts===t.pts){return e.presortIndex-t.presortIndex}return e.pts-t.pts});this.captionPackets_.forEach(function(e){if(e.type<2){this.dispatchCea608Packet(e)}},this);this.captionPackets_.length=0;this.ccStreams_.forEach(function(e){e.flush()},this);return};Me.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(e){e.reset()})};Me.prototype.dispatchCea608Packet=function(e){if(this.setsChannel1Active(e)){this.activeCea608Channel_[e.type]=0}else if(this.setsChannel2Active(e)){this.activeCea608Channel_[e.type]=1}if(this.activeCea608Channel_[e.type]===null){return}this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)};Me.prototype.setsChannel1Active=function(e){return(e.ccData&30720)===4096};Me.prototype.setsChannel2Active=function(e){return(e.ccData&30720)===6144};var Be={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var Ne=function e(t){if(t===null){return""}t=Be[t]||t;return String.fromCharCode(t)};var je=14;var Fe=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var Ve=function e(){var t=[],i=je+1;while(i--){t.push("")}return t};var He=function e(t,i){e.prototype.init.call(this);this.field_=t||0;this.dataChannel_=i||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(e){var t,i,r,n,a;t=e.ccData&32639;if(t===this.lastControlCode_){this.lastControlCode_=null;return}if((t&61440)===4096){this.lastControlCode_=t}else if(t!==this.PADDING_){this.lastControlCode_=null}r=t>>>8;n=t&255;if(t===this.PADDING_){return}else if(t===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else if(t===this.END_OF_CAPTION_){this.mode_="popOn";this.clearFormatting(e.pts);this.flushDisplayed(e.pts);i=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=i;this.startPts_=e.pts}else if(t===this.ROLL_UP_2_ROWS_){this.rollUpRows_=2;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_3_ROWS_){this.rollUpRows_=3;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_4_ROWS_){this.rollUpRows_=4;this.setRollUp(e.pts)}else if(t===this.CARRIAGE_RETURN_){this.clearFormatting(e.pts);this.flushDisplayed(e.pts);this.shiftRowsUp_();this.startPts_=e.pts}else if(t===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}}else if(t===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(e.pts);this.displayed_=Ve()}else if(t===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=Ve()}else if(t===this.RESUME_DIRECT_CAPTIONING_){if(this.mode_!=="paintOn"){this.flushDisplayed(e.pts);this.displayed_=Ve()}this.mode_="paintOn";this.startPts_=e.pts}else if(this.isSpecialCharacter(r,n)){r=(r&3)<<8;a=Ne(r|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isExtCharacter(r,n)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}r=(r&3)<<8;a=Ne(r|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isMidRowCode(r,n)){this.clearFormatting(e.pts);this[this.mode_](e.pts," ");this.column_++;if((n&14)===14){this.addFormatting(e.pts,["i"])}if((n&1)===1){this.addFormatting(e.pts,["u"])}}else if(this.isOffsetControlCode(r,n)){this.column_+=n&3}else if(this.isPAC(r,n)){var s=Fe.indexOf(t&7968);if(this.mode_==="rollUp"){if(s-this.rollUpRows_+1<0){s=this.rollUpRows_-1}this.setRollUp(e.pts,s)}if(s!==this.row_){this.clearFormatting(e.pts);this.row_=s}if(n&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(e.pts,["u"])}if((t&16)===16){this.column_=((t&14)>>1)*4}if(this.isColorPAC(n)){if((n&14)===14){this.addFormatting(e.pts,["i"])}}}else if(this.isNormalChar(r)){if(n===0){n=null}a=Ne(r);a+=Ne(n);this[this.mode_](e.pts,a);this.column_+=a.length}}};He.prototype=new Y;He.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){console.error("Skipping malformed caption.");return""}}).join("\n").replace(/^\n+|\n+$/g,"");if(t.length){this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})}};He.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=Ve();this.nonDisplayed_=Ve();this.lastControlCode_=null;this.column_=0;this.row_=je;this.rollUpRows_=2;this.formatting_=[]};He.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};He.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63};He.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63};He.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47};He.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35};He.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127};He.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127};He.prototype.isNormalChar=function(e){return e>=32&&e<=127};He.prototype.setRollUp=function(e,t){if(this.mode_!=="rollUp"){this.row_=je;this.mode_="rollUp";this.flushDisplayed(e);this.nonDisplayed_=Ve();this.displayed_=Ve()}if(t!==undefined&&t!==this.row_){for(var i=0;i<this.rollUpRows_;i++){this.displayed_[t-i]=this.displayed_[this.row_-i];this.displayed_[this.row_-i]=""}}if(t===undefined){t=this.row_}this.topRow_=t-this.rollUpRows_+1};He.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)};He.prototype.clearFormatting=function(e){if(!this.formatting_.length){return}var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[];this[this.mode_](e,t)};He.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t;this.nonDisplayed_[this.row_]=i};He.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t;this.displayed_[this.row_]=i};He.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++){this.displayed_[e]=""}for(e=this.row_+1;e<je+1;e++){this.displayed_[e]=""}for(e=this.topRow_;e<this.row_;e++){this.displayed_[e]=this.displayed_[e+1]}this.displayed_[this.row_]=""};He.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t;this.displayed_[this.row_]=i};var qe={CaptionStream:Me,Cea608Stream:He};var ze={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};var We=8589934592;var Ge=4294967296;var Xe=function e(t,i){var r=1;if(t>i){r=-1}while(Math.abs(i-t)>Ge){t+=r*We}return t};var Ye=function e(t){var i,r;e.prototype.init.call(this);this.type_=t;this.push=function(e){if(e.type!==this.type_){return}if(r===undefined){r=e.dts}e.dts=Xe(e.dts,r);e.pts=Xe(e.pts,r);i=e.dts;this.trigger("data",e)};this.flush=function(){r=i;this.trigger("done")};this.discontinuity=function(){r=void 0;i=void 0}};Ye.prototype=new Y;var Ke={TimestampRolloverStream:Ye,handleRollover:Xe};var $e=function e(t,i,r){var n,a="";for(n=i;n<r;n++){a+="%"+("00"+t[n].toString(16)).slice(-2)}return a},Qe=function e(t,i,r){return decodeURIComponent($e(t,i,r))},Je=function e(t,i,r){return unescape($e(t,i,r))},Ze=function e(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},et={TXXX:function e(t){var i;if(t.data[0]!==3){return}for(i=1;i<t.data.length;i++){if(t.data[i]===0){t.description=Qe(t.data,1,i);t.value=Qe(t.data,i+1,t.data.length).replace(/\0*$/,"");break}}t.data=t.value},WXXX:function e(t){var i;if(t.data[0]!==3){return}for(i=1;i<t.data.length;i++){if(t.data[i]===0){t.description=Qe(t.data,1,i);t.url=Qe(t.data,i+1,t.data.length);break}}},PRIV:function e(t){var i;for(i=0;i<t.data.length;i++){if(t.data[i]===0){t.owner=Je(t.data,0,i);break}}t.privateData=t.data.subarray(i+1);t.data=t.privateData}},tt;tt=function e(t){var l={debug:!!(t&&t.debug),descriptor:t&&t.descriptor},c=0,f=[],d=0,i;tt.prototype.init.call(this);this.dispatchType=ze.METADATA_STREAM_TYPE.toString(16);if(l.descriptor){for(i=0;i<l.descriptor.length;i++){this.dispatchType+=("00"+l.descriptor[i].toString(16)).slice(-2)}}this.push=function(e){var t,i,r,n,a,s;if(e.type!=="timed-metadata"){return}if(e.dataAlignmentIndicator){d=0;f.length=0}if(f.length===0&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0))){if(l.debug){console.log("Skipping unrecognized metadata packet")}return}f.push(e);d+=e.data.byteLength;if(f.length===1){c=Ze(e.data.subarray(6,10));c+=10}if(d<c){return}t={data:new Uint8Array(c),frames:[],pts:f[0].pts,dts:f[0].dts};for(a=0;a<c;){t.data.set(f[0].data.subarray(0,c-a),a);a+=f[0].data.byteLength;d-=f[0].data.byteLength;f.shift()}i=10;if(t.data[5]&64){i+=4;i+=Ze(t.data.subarray(10,14));c-=Ze(t.data.subarray(16,20))}do{r=Ze(t.data.subarray(i+4,i+8));if(r<1){return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}s=String.fromCharCode(t.data[i],t.data[i+1],t.data[i+2],t.data[i+3]);n={id:s,data:t.data.subarray(i+10,i+r+10)};n.key=n.id;if(et[n.id]){et[n.id](n);if(n.owner==="com.apple.streaming.transportStreamTimestamp"){var o=n.data,u=(o[3]&1)<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;u*=4;u+=o[7]&3;n.timeStamp=u;if(t.pts===undefined&&t.dts===undefined){t.pts=n.timeStamp;t.dts=n.timeStamp}this.trigger("timestamp",n)}}t.frames.push(n);i+=10;i+=r}while(i<c);this.trigger("data",t)}};tt.prototype=new Y;var it=tt;var rt=Ke.TimestampRolloverStream;var nt,at,st;var ot=188,ut=71;nt=function e(){var n=new Uint8Array(ot),a=0;nt.prototype.init.call(this);this.push=function(e){var t=0,i=ot,r;if(a){r=new Uint8Array(e.byteLength+a);r.set(n.subarray(0,a));r.set(e,a);a=0}else{r=e}while(i<r.byteLength){if(r[t]===ut&&r[i]===ut){this.trigger("data",r.subarray(t,i));t+=ot;i+=ot;continue}t++;i++}if(t<r.byteLength){n.set(r.subarray(t),0);a=r.byteLength-t}};this.flush=function(){if(a===ot&&n[0]===ut){this.trigger("data",n);a=0}this.trigger("done")}};nt.prototype=new Y;at=function e(){var r,n,a,l;at.prototype.init.call(this);l=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;r=function e(t,i){var r=0;if(i.payloadUnitStartIndicator){r+=t[r]+1}if(i.type==="pat"){n(t.subarray(r),i)}else{a(t.subarray(r),i)}};n=function e(t,i){i.section_number=t[7];i.last_section_number=t[8];l.pmtPid=(t[10]&31)<<8|t[11];i.pmtPid=l.pmtPid};a=function e(t,i){var r,n,a,s;if(!(t[5]&1)){return}l.programMapTable={video:null,audio:null,"timed-metadata":{}};r=(t[1]&15)<<8|t[2];n=3+r-4;a=(t[10]&15)<<8|t[11];s=12+a;while(s<n){var o=t[s];var u=(t[s+1]&31)<<8|t[s+2];if(o===ze.H264_STREAM_TYPE&&l.programMapTable.video===null){l.programMapTable.video=u}else if(o===ze.ADTS_STREAM_TYPE&&l.programMapTable.audio===null){l.programMapTable.audio=u}else if(o===ze.METADATA_STREAM_TYPE){l.programMapTable["timed-metadata"][u]=o}s+=((t[s+3]&15)<<8|t[s+4])+5}i.programMapTable=l.programMapTable};this.push=function(e){var t={},i=4;t.payloadUnitStartIndicator=!!(e[1]&64);t.pid=e[1]&31;t.pid<<=8;t.pid|=e[2];if((e[3]&48)>>>4>1){i+=e[i]+1}if(t.pid===0){t.type="pat";r(e.subarray(i),t);this.trigger("data",t)}else if(t.pid===this.pmtPid){t.type="pmt";r(e.subarray(i),t);this.trigger("data",t);while(this.packetsWaitingForPmt.length){this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}}else if(this.programMapTable===undefined){this.packetsWaitingForPmt.push([e,i,t])}else{this.processPes_(e,i,t)}};this.processPes_=function(e,t,i){if(i.pid===this.programMapTable.video){i.streamType=ze.H264_STREAM_TYPE}else if(i.pid===this.programMapTable.audio){i.streamType=ze.ADTS_STREAM_TYPE}else{i.streamType=this.programMapTable["timed-metadata"][i.pid]}i.type="pes";i.data=e.subarray(t);this.trigger("data",i)}};at.prototype=new Y;at.STREAM_TYPES={h264:27,adts:15};st=function e(){var c=this,n={data:[],size:0},a={data:[],size:0},s={data:[],size:0},f=function e(t,i){var r;i.packetLength=6+(t[4]<<8|t[5]);i.dataAlignmentIndicator=(t[6]&4)!==0;r=t[7];if(r&192){i.pts=(t[9]&14)<<27|(t[10]&255)<<20|(t[11]&254)<<12|(t[12]&255)<<5|(t[13]&254)>>>3;i.pts*=4;i.pts+=(t[13]&6)>>>1;i.dts=i.pts;if(r&64){i.dts=(t[14]&14)<<27|(t[15]&255)<<20|(t[16]&254)<<12|(t[17]&255)<<5|(t[18]&254)>>>3;i.dts*=4;i.dts+=(t[18]&6)>>>1}}i.data=t.subarray(9+t[8])},o=function e(t,i,r){var n=new Uint8Array(t.size),a={type:i},s=0,o=0,u=false,l;if(!t.data.length||t.size<9){return}a.trackId=t.data[0].pid;for(s=0;s<t.data.length;s++){l=t.data[s];n.set(l.data,o);o+=l.data.byteLength}f(n,a);u=i==="video"||a.packetLength<=t.size;if(r||u){t.size=0;t.data.length=0}if(u){c.trigger("data",a)}};st.prototype.init.call(this);this.push=function(r){({pat:function e(){},pes:function e(){var t,i;switch(r.streamType){case ze.H264_STREAM_TYPE:case ze.H264_STREAM_TYPE:t=n;i="video";break;case ze.ADTS_STREAM_TYPE:t=a;i="audio";break;case ze.METADATA_STREAM_TYPE:t=s;i="timed-metadata";break;default:return}if(r.payloadUnitStartIndicator){o(t,i,true)}t.data.push(r);t.size+=r.data.byteLength},pmt:function e(){var t={type:"metadata",tracks:[]},i=r.programMapTable;if(i.video!==null){t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.video,codec:"avc",type:"video"})}if(i.audio!==null){t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.audio,codec:"adts",type:"audio"})}c.trigger("data",t)}})[r.type]()};this.flush=function(){o(n,"video");o(a,"audio");o(s,"timed-metadata");this.trigger("done")}};st.prototype=new Y;var lt={PAT_PID:0,MP2T_PACKET_LENGTH:ot,TransportPacketStream:nt,TransportParseStream:at,ElementaryStream:st,TimestampRolloverStream:rt,CaptionStream:qe.CaptionStream,Cea608Stream:qe.Cea608Stream,MetadataStream:it};for(var ct in ze){if(ze.hasOwnProperty(ct)){lt[ct]=ze[ct]}}var ft=lt;var dt;var ht=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];dt=function e(){var l;dt.prototype.init.call(this);this.push=function(e){var t=0,i=0,r,n,a,s,o,u;if(e.type!=="audio"){return}if(l){s=l;l=new Uint8Array(s.byteLength+e.data.byteLength);l.set(s);l.set(e.data,s.byteLength)}else{l=e.data}while(t+5<l.length){if(l[t]!==255||(l[t+1]&246)!==240){t++;continue}n=(~l[t+1]&1)*2;r=(l[t+3]&3)<<11|l[t+4]<<3|(l[t+5]&224)>>5;o=((l[t+6]&3)+1)*1024;u=o*9e4/ht[(l[t+2]&60)>>>2];a=t+r;if(l.byteLength<a){return}this.trigger("data",{pts:e.pts+i*u,dts:e.dts+i*u,sampleCount:o,audioobjecttype:(l[t+2]>>>6&3)+1,channelcount:(l[t+2]&1)<<2|(l[t+3]&192)>>>6,samplerate:ht[(l[t+2]&60)>>>2],samplingfrequencyindex:(l[t+2]&60)>>>2,samplesize:16,data:l.subarray(t+7+n,a)});if(l.byteLength===a){l=undefined;return}i++;l=l.subarray(a)}};this.flush=function(){this.trigger("done")}};dt.prototype=new Y;var pt=dt;var mt;mt=function e(r){var n=r.byteLength,a=0,s=0;this.length=function(){return 8*n};this.bitsAvailable=function(){return 8*n+s};this.loadWord=function(){var e=r.byteLength-n,t=new Uint8Array(4),i=Math.min(4,n);if(i===0){throw new Error("no bytes available")}t.set(r.subarray(e,e+i));a=new DataView(t.buffer).getUint32(0);s=i*8;n-=i};this.skipBits=function(e){var t;if(s>e){a<<=e;s-=e}else{e-=s;t=Math.floor(e/8);e-=t*8;n-=t;this.loadWord();a<<=e;s-=e}};this.readBits=function(e){var t=Math.min(s,e),i=a>>>32-t;s-=t;if(s>0){a<<=t}else if(n>0){this.loadWord()}t=e-t;if(t>0){return i<<t|this.readBits(t)}return i};this.skipLeadingZeros=function(){var e;for(e=0;e<s;++e){if((a&2147483648>>>e)!==0){a<<=e;s-=e;return e}}this.loadWord();return e+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1};this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();if(1&e){return 1+e>>>1}return-1*(e>>>1)};this.readBoolean=function(){return this.readBits(1)===1};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var vt=mt;var gt,yt;var _t;yt=function e(){var i=0,r,n;yt.prototype.init.call(this);this.push=function(e){var t;if(!n){n=e.data}else{t=new Uint8Array(n.byteLength+e.data.byteLength);t.set(n);t.set(e.data,n.byteLength);n=t}for(;i<n.byteLength-3;i++){if(n[i+2]===1){r=i+5;break}}while(r<n.byteLength){switch(n[r]){case 0:if(n[r-1]!==0){r+=2;break}else if(n[r-2]!==0){r++;break}if(i+3!==r-2){this.trigger("data",n.subarray(i+3,r-2))}do{r++}while(n[r]!==1&&r<n.length);i=r-2;r+=3;break;case 1:if(n[r-1]!==0||n[r-2]!==0){r+=3;break}this.trigger("data",n.subarray(i+3,r-2));i=r-2;r+=3;break;default:r+=3;break}}n=n.subarray(i);r-=i;i=0};this.flush=function(){if(n&&n.byteLength>3){this.trigger("data",n.subarray(i+3))}n=null;i=0;this.trigger("done")}};yt.prototype=new Y;_t={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};gt=function e(){var t=new yt,i,r,n,a,s,o,T;gt.prototype.init.call(this);i=this;this.push=function(e){if(e.type!=="video"){return}r=e.trackId;n=e.pts;a=e.dts;t.push(e)};t.on("data",function(e){var t={trackId:r,pts:n,dts:a,data:e};switch(e[0]&31){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp";t.escapedRBSP=s(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp";t.escapedRBSP=s(e.subarray(1));t.config=o(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp";break;default:break}i.trigger("data",t)});t.on("done",function(){i.trigger("done")});this.flush=function(){t.flush()};T=function e(t,i){var r=8,n=8,a,s;for(a=0;a<t;a++){if(n!==0){s=i.readExpGolomb();n=(r+s+256)%256}r=n===0?r:n}};s=function e(t){var i=t.byteLength,r=[],n=1,a,s;while(n<i-2){if(t[n]===0&&t[n+1]===0&&t[n+2]===3){r.push(n+2);n+=2}else{n++}}if(r.length===0){return t}a=i-r.length;s=new Uint8Array(a);var o=0;for(n=0;n<a;o++,n++){if(o===r[0]){o++;r.shift()}s[n]=t[o]}return s};o=function e(t){var i=0,r=0,n=0,a=0,s=1,o,u,l,c,f,d,h,p,m,v,g,y,_,b;o=new vt(t);u=o.readUnsignedByte();c=o.readUnsignedByte();l=o.readUnsignedByte();o.skipUnsignedExpGolomb();if(_t[u]){f=o.readUnsignedExpGolomb();if(f===3){o.skipBits(1)}o.skipUnsignedExpGolomb();o.skipUnsignedExpGolomb();o.skipBits(1);if(o.readBoolean()){g=f!==3?8:12;for(b=0;b<g;b++){if(o.readBoolean()){if(b<6){T(16,o)}else{T(64,o)}}}}}o.skipUnsignedExpGolomb();d=o.readUnsignedExpGolomb();if(d===0){o.readUnsignedExpGolomb()}else if(d===1){o.skipBits(1);o.skipExpGolomb();o.skipExpGolomb();h=o.readUnsignedExpGolomb();for(b=0;b<h;b++){o.skipExpGolomb()}}o.skipUnsignedExpGolomb();o.skipBits(1);p=o.readUnsignedExpGolomb();m=o.readUnsignedExpGolomb();v=o.readBits(1);if(v===0){o.skipBits(1)}o.skipBits(1);if(o.readBoolean()){i=o.readUnsignedExpGolomb();r=o.readUnsignedExpGolomb();n=o.readUnsignedExpGolomb();a=o.readUnsignedExpGolomb()}if(o.readBoolean()){if(o.readBoolean()){_=o.readUnsignedByte();switch(_){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:{y=[o.readUnsignedByte()<<8|o.readUnsignedByte(),o.readUnsignedByte()<<8|o.readUnsignedByte()];break}}if(y){s=y[0]/y[1]}}}return{profileIdc:u,levelIdc:l,profileCompatibility:c,width:Math.ceil(((p+1)*16-i*2-r*2)*s),height:(2-v)*(m+1)*16-n*2-a*2}}};gt.prototype=new Y;var bt={H264Stream:gt,NalByteStream:yt};var Tt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var St=function e(t){if(t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)){return true}return false};var kt=function e(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]};var wt=function e(t,i,r){var n,a="";for(n=i;n<r;n++){a+="%"+("00"+t[n].toString(16)).slice(-2)}return a};var Ct=function e(t,i,r){return unescape(wt(t,i,r))};var Et=function e(t,i){var r=t[i+6]<<21|t[i+7]<<14|t[i+8]<<7|t[i+9],n=t[i+5],a=(n&16)>>4;if(a){return r+20}return r+10};var At=function e(t,i){var r=(t[i+5]&224)>>5,n=t[i+4]<<3,a=t[i+3]&3<<11;return a|n|r};var Lt=function e(t,i){if(t[i]==="I".charCodeAt(0)&&t[i+1]==="D".charCodeAt(0)&&t[i+2]==="3".charCodeAt(0)){return"timed-metadata"}else if(t[i]&255===255&&(t[i+1]&240)===240){return"audio"}return null};var It=function e(t){var i=0;while(i+5<t.length){if(t[i]!==255||(t[i+1]&246)!==240){i++;continue}return Tt[(t[i+2]&60)>>>2]}return null};var Pt=function e(t){var i,r,n,a;i=10;if(t[5]&64){i+=4;i+=kt(t.subarray(10,14))}do{r=kt(t.subarray(i+4,i+8));if(r<1){return null}a=String.fromCharCode(t[i],t[i+1],t[i+2],t[i+3]);if(a==="PRIV"){n=t.subarray(i+10,i+r+10);for(var s=0;s<n.byteLength;s++){if(n[s]===0){var o=Ct(n,0,s);if(o==="com.apple.streaming.transportStreamTimestamp"){var u=n.subarray(s+1);var l=(u[3]&1)<<30|u[4]<<22|u[5]<<14|u[6]<<6|u[7]>>>2;l*=4;l+=u[7]&3;return l}break}}}i+=10;i+=r}while(i<t.byteLength);return null};var Ot={isLikelyAacData:St,parseId3TagSize:Et,parseAdtsSize:At,parseType:Lt,parseSampleRate:It,parseAacTimestamp:Pt};var Ut;Ut=function e(){var o=new Uint8Array,u=0;Ut.prototype.init.call(this);this.setTimestamp=function(e){u=e};this.push=function(e){var t=0,i=0,r,n,a,s;if(o.length){s=o.length;o=new Uint8Array(e.byteLength+s);o.set(o.subarray(0,s));o.set(e,s)}else{o=e}while(o.length-i>=3){if(o[i]==="I".charCodeAt(0)&&o[i+1]==="D".charCodeAt(0)&&o[i+2]==="3".charCodeAt(0)){if(o.length-i<10){break}t=Ot.parseId3TagSize(o,i);if(i+t>o.length){break}n={type:"timed-metadata",data:o.subarray(i,i+t)};this.trigger("data",n);i+=t;continue}else if((o[i]&255)===255&&(o[i+1]&240)===240){if(o.length-i<7){break}t=Ot.parseAdtsSize(o,i);if(i+t>o.length){break}a={type:"audio",data:o.subarray(i,i+t),pts:u,dts:u};this.trigger("data",a);i+=t;continue}i++}r=o.length-i;if(r>0){o=o.subarray(i)}else{o=new Uint8Array}}};Ut.prototype=new Y;var Dt=Ut;var xt=bt.H264Stream;var Rt=Ot.isLikelyAacData;var Mt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];var Bt=["width","height","profileIdc","levelIdc","profileCompatibility"];var Nt,jt,Ft,Vt;var Ht=function e(t,i){var r;if(t.length!==i.length){return false}for(r=0;r<t.length;r++){if(t[r]!==i[r]){return false}}return true};var qt=function e(t,i,r,n,a,s){var o=r-i,u=n-i,l=a-r;return{start:{dts:t,pts:t+o},end:{dts:t+u,pts:t+l},prependedContentDuration:s,baseMediaDecodeTime:t}};jt=function e(n,a){var s=[],o=0,u=0,l=0,c=Infinity;a=a||{};jt.prototype.init.call(this);this.push=function(t){Le.collectDtsInfo(n,t);if(n){Mt.forEach(function(e){n[e]=t[e]})}s.push(t)};this.setEarliestDts=function(e){u=e-n.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(e){c=e};this.setAudioAppendStart=function(e){l=e};this.flush=function(){var e,t,i,r;if(s.length===0){this.trigger("done","AudioSegmentStream");return}e=ke.trimAdtsFramesByEarliestDts(s,n,u);n.baseMediaDecodeTime=Le.calculateTrackBaseMediaDecodeTime(n,a.keepOriginalTimestamps);ke.prefixWithSilence(n,e,l,c);n.samples=ke.generateSampleTable(e);i=B.mdat(ke.concatenateFrameData(e));s=[];t=B.moof(o,[n]);r=new Uint8Array(t.byteLength+i.byteLength);o++;r.set(t);r.set(i,t.byteLength);Le.clearDtsInfo(n);this.trigger("data",{track:n,boxes:r});this.trigger("done","AudioSegmentStream")}};jt.prototype=new Y;Nt=function e(c,f){var d=0,h=[],p=[],t,i;f=f||{};Nt.prototype.init.call(this);delete c.minPTS;this.gopCache_=[];this.push=function(e){Le.collectDtsInfo(c,e);if(e.nalUnitType==="seq_parameter_set_rbsp"&&!t){t=e.config;c.sps=[e.data];Bt.forEach(function(e){c[e]=t[e]},this)}if(e.nalUnitType==="pic_parameter_set_rbsp"&&!i){i=e.data;c.pps=[e.data]}h.push(e)};this.flush=function(){var e,t,i,r,n,a,s=0,o,u;while(h.length){if(h[0].nalUnitType==="access_unit_delimiter_rbsp"){break}h.shift()}if(h.length===0){this.resetStream_();this.trigger("done","VideoSegmentStream");return}e=ie.groupNalsIntoFrames(h);i=ie.groupFramesIntoGops(e);if(!i[0][0].keyFrame){t=this.getGopForFusion_(h[0],c);if(t){s=t.duration;i.unshift(t);i.byteLength+=t.byteLength;i.nalCount+=t.nalCount;i.pts=t.pts;i.dts=t.dts;i.duration+=t.duration}else{i=ie.extendFirstKeyFrame(i)}}if(p.length){var l;if(f.alignGopsAtEnd){l=this.alignGopsAtEnd_(i)}else{l=this.alignGopsAtStart_(i)}if(!l){this.gopCache_.unshift({gop:i.pop(),pps:c.pps,sps:c.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);h=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}Le.clearDtsInfo(c);i=l}Le.collectDtsInfo(c,i);c.samples=ie.generateSampleTable(i);n=B.mdat(ie.concatenateNalData(i));c.baseMediaDecodeTime=Le.calculateTrackBaseMediaDecodeTime(c,f.keepOriginalTimestamps);this.trigger("processedGopsInfo",i.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}));o=i[0];u=i[i.length-1];this.trigger("segmentTimingInfo",qt(c.baseMediaDecodeTime,o.dts,o.pts,u.dts+u.duration,u.pts+u.duration,s));this.gopCache_.unshift({gop:i.pop(),pps:c.pps,sps:c.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);h=[];this.trigger("baseMediaDecodeTime",c.baseMediaDecodeTime);this.trigger("timelineStartInfo",c.timelineStartInfo);r=B.moof(d,[c]);a=new Uint8Array(r.byteLength+n.byteLength);d++;a.set(r);a.set(n,r.byteLength);this.trigger("data",{track:c,boxes:a});this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){Le.clearDtsInfo(c);t=undefined;i=undefined};this.getGopForFusion_=function(e){var t=45e3,i=1e4,r=Infinity,n,a,s,o,u;for(u=0;u<this.gopCache_.length;u++){o=this.gopCache_[u];s=o.gop;if(!(c.pps&&Ht(c.pps[0],o.pps[0]))||!(c.sps&&Ht(c.sps[0],o.sps[0]))){continue}if(s.dts<c.timelineStartInfo.dts){continue}n=e.dts-s.dts-s.duration;if(n>=-i&&n<=t){if(!a||r>n){a=o;r=n}}}if(a){return a.gop}return null};this.alignGopsAtStart_=function(e){var t,i,r,n,a,s,o,u;a=e.byteLength;s=e.nalCount;o=e.duration;t=i=0;while(t<p.length&&i<e.length){r=p[t];n=e[i];if(r.pts===n.pts){break}if(n.pts>r.pts){t++;continue}i++;a-=n.byteLength;s-=n.nalCount;o-=n.duration}if(i===0){return e}if(i===e.length){return null}u=e.slice(i);u.byteLength=a;u.duration=o;u.nalCount=s;u.pts=u[0].pts;u.dts=u[0].dts;return u};this.alignGopsAtEnd_=function(e){var t,i,r,n,a,s;t=p.length-1;i=e.length-1;a=null;s=false;while(t>=0&&i>=0){r=p[t];n=e[i];if(r.pts===n.pts){s=true;break}if(r.pts>n.pts){t--;continue}if(t===p.length-1){a=i}i--}if(!s&&a===null){return null}var o;if(s){o=i}else{o=a}if(o===0){return e}var u=e.slice(o);var l=u.reduce(function(e,t){e.byteLength+=t.byteLength;e.duration+=t.duration;e.nalCount+=t.nalCount;return e},{byteLength:0,duration:0,nalCount:0});u.byteLength=l.byteLength;u.duration=l.duration;u.nalCount=l.nalCount;u.pts=u[0].pts;u.dts=u[0].dts;return u};this.alignGopsWith=function(e){p=e}};Nt.prototype=new Y;Vt=function e(t,i){this.numberOfTracks=0;this.metadataStream=i;t=t||{};if(typeof t.remux!=="undefined"){this.remuxTracks=!!t.remux}else{this.remuxTracks=true}if(typeof t.keepOriginalTimestamps==="boolean"){this.keepOriginalTimestamps=t.keepOriginalTimestamps}this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;Vt.prototype.init.call(this);this.push=function(e){if(e.text){return this.pendingCaptions.push(e)}if(e.frames){return this.pendingMetadata.push(e)}this.pendingTracks.push(e.track);this.pendingBoxes.push(e.boxes);this.pendingBytes+=e.boxes.byteLength;if(e.track.type==="video"){this.videoTrack=e.track}if(e.track.type==="audio"){this.audioTrack=e.track}}};Vt.prototype=new Y;Vt.prototype.flush=function(e){var t=0,i={captions:[],captionStreams:{},metadata:[],info:{}},r,n,a,s=0,o;if(this.pendingTracks.length<this.numberOfTracks){if(e!=="VideoSegmentStream"&&e!=="AudioSegmentStream"){return}else if(this.remuxTracks){return}else if(this.pendingTracks.length===0){this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}return}}if(this.videoTrack){s=this.videoTrack.timelineStartInfo.pts;Bt.forEach(function(e){i.info[e]=this.videoTrack[e]},this)}else if(this.audioTrack){s=this.audioTrack.timelineStartInfo.pts;Mt.forEach(function(e){i.info[e]=this.audioTrack[e]},this)}if(this.pendingTracks.length===1){i.type=this.pendingTracks[0].type}else{i.type="combined"}this.emittedTracks+=this.pendingTracks.length;a=B.initSegment(this.pendingTracks);i.initSegment=new Uint8Array(a.byteLength);i.initSegment.set(a);i.data=new Uint8Array(this.pendingBytes);for(o=0;o<this.pendingBoxes.length;o++){i.data.set(this.pendingBoxes[o],t);t+=this.pendingBoxes[o].byteLength}for(o=0;o<this.pendingCaptions.length;o++){r=this.pendingCaptions[o];r.startTime=r.startPts;if(!this.keepOriginalTimestamps){r.startTime-=s}r.startTime/=9e4;r.endTime=r.endPts;if(!this.keepOriginalTimestamps){r.endTime-=s}r.endTime/=9e4;i.captionStreams[r.stream]=true;i.captions.push(r)}for(o=0;o<this.pendingMetadata.length;o++){n=this.pendingMetadata[o];n.cueTime=n.pts;if(!this.keepOriginalTimestamps){n.cueTime-=s}n.cueTime/=9e4;i.metadata.push(n)}i.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger("data",i);if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}};Ft=function e(r){var n=this,i=true,a,s;Ft.prototype.init.call(this);r=r||{};this.baseMediaDecodeTime=r.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var t={};this.transmuxPipeline_=t;t.type="aac";t.metadataStream=new ft.MetadataStream;t.aacStream=new Dt;t.audioTimestampRolloverStream=new ft.TimestampRolloverStream("audio");t.timedMetadataTimestampRolloverStream=new ft.TimestampRolloverStream("timed-metadata");t.adtsStream=new pt;t.coalesceStream=new Vt(r,t.metadataStream);t.headOfPipeline=t.aacStream;t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream);t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream);t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)});t.aacStream.on("data",function(e){if(e.type==="timed-metadata"&&!t.audioSegmentStream){s=s||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio"};t.coalesceStream.numberOfTracks++;t.audioSegmentStream=new jt(s,r);t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream)}});t.coalesceStream.on("data",this.trigger.bind(this,"data"));t.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i;i.type="ts";i.metadataStream=new ft.MetadataStream;i.packetStream=new ft.TransportPacketStream;i.parseStream=new ft.TransportParseStream;i.elementaryStream=new ft.ElementaryStream;i.videoTimestampRolloverStream=new ft.TimestampRolloverStream("video");i.audioTimestampRolloverStream=new ft.TimestampRolloverStream("audio");i.timedMetadataTimestampRolloverStream=new ft.TimestampRolloverStream("timed-metadata");i.adtsStream=new pt;i.h264Stream=new xt;i.captionStream=new ft.CaptionStream;i.coalesceStream=new Vt(r,i.metadataStream);i.headOfPipeline=i.packetStream;i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream);i.elementaryStream.pipe(i.videoTimestampRolloverStream).pipe(i.h264Stream);i.elementaryStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream);i.elementaryStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream);i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream);i.elementaryStream.on("data",function(e){var t;if(e.type==="metadata"){t=e.tracks.length;while(t--){if(!a&&e.tracks[t].type==="video"){a=e.tracks[t];a.timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime}else if(!s&&e.tracks[t].type==="audio"){s=e.tracks[t];s.timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime}}if(a&&!i.videoSegmentStream){i.coalesceStream.numberOfTracks++;i.videoSegmentStream=new Nt(a,r);i.videoSegmentStream.on("timelineStartInfo",function(e){if(s){s.timelineStartInfo=e;i.audioSegmentStream.setEarliestDts(e.dts)}});i.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo"));i.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo"));i.videoSegmentStream.on("baseMediaDecodeTime",function(e){if(s){i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}});i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)}if(s&&!i.audioSegmentStream){i.coalesceStream.numberOfTracks++;i.audioSegmentStream=new jt(s,r);i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)}}});i.coalesceStream.on("data",this.trigger.bind(this,"data"));i.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;if(!r.keepOriginalTimestamps){this.baseMediaDecodeTime=e}if(s){s.timelineStartInfo.dts=undefined;s.timelineStartInfo.pts=undefined;Le.clearDtsInfo(s);if(!r.keepOriginalTimestamps){s.timelineStartInfo.baseMediaDecodeTime=e}if(t.audioTimestampRolloverStream){t.audioTimestampRolloverStream.discontinuity()}}if(a){if(t.videoSegmentStream){t.videoSegmentStream.gopCache_=[];t.videoTimestampRolloverStream.discontinuity()}a.timelineStartInfo.dts=undefined;a.timelineStartInfo.pts=undefined;Le.clearDtsInfo(a);t.captionStream.reset();if(!r.keepOriginalTimestamps){a.timelineStartInfo.baseMediaDecodeTime=e}}if(t.timedMetadataTimestampRolloverStream){t.timedMetadataTimestampRolloverStream.discontinuity()}};this.setAudioAppendStart=function(e){if(s){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)}};this.alignGopsWith=function(e){if(a&&this.transmuxPipeline_.videoSegmentStream){this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)}};this.push=function(e){if(i){var t=Rt(e);if(t&&this.transmuxPipeline_.type!=="aac"){this.setupAacPipeline()}else if(!t&&this.transmuxPipeline_.type!=="ts"){this.setupTsPipeline()}i=false}this.transmuxPipeline_.headOfPipeline.push(e)};this.flush=function(){i=true;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){if(this.transmuxPipeline_.captionStream){this.transmuxPipeline_.captionStream.reset()}}};Ft.prototype=new Y;var zt={Transmuxer:Ft,VideoSegmentStream:Nt,AudioSegmentStream:jt,AUDIO_PROPERTIES:Mt,VIDEO_PROPERTIES:Bt,generateVideoSegmentTimingInfo:qt};var Wt,Gt,Xt=G.parseType,Yt=function e(t){return new Date(t*1e3-20828448e5)},Kt=function e(t){return{isLeading:(t[0]&12)>>>2,dependsOn:t[0]&3,isDependedOn:(t[1]&192)>>>6,hasRedundancy:(t[1]&48)>>>4,paddingValue:(t[1]&14)>>>1,isNonSyncSample:t[1]&1,degradationPriority:t[2]<<8|t[3]}},$t=function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=[],n,a;for(n=0;n+4<t.length;n+=a){a=i.getUint32(n);n+=4;if(a<=0){r.push("<span style='color:red;'>MALFORMED DATA</span>");continue}switch(t[n]&31){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+t[n]&31);break}}return r},Qt={avc1:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:i.getUint16(6),width:i.getUint16(24),height:i.getUint16(26),horizresolution:i.getUint16(28)+i.getUint16(30)/16,vertresolution:i.getUint16(32)+i.getUint16(34)/16,frameCount:i.getUint16(40),depth:i.getUint16(74),config:Wt(t.subarray(78,t.byteLength))}},avcC:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={configurationVersion:t[0],avcProfileIndication:t[1],profileCompatibility:t[2],avcLevelIndication:t[3],lengthSizeMinusOne:t[4]&3,sps:[],pps:[]},n=t[5]&31,a,s,o,u;o=6;for(u=0;u<n;u++){s=i.getUint16(o);o+=2;r.sps.push(new Uint8Array(t.subarray(o,o+s)));o+=s}a=t[o];o++;for(u=0;u<a;u++){s=i.getUint16(o);o+=2;r.pps.push(new Uint8Array(t.subarray(o,o+s)));o+=s}return r},btrt:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{bufferSizeDB:i.getUint32(0),maxBitrate:i.getUint32(4),avgBitrate:i.getUint32(8)}},esds:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),esId:t[6]<<8|t[7],streamPriority:t[8]&31,decoderConfig:{objectProfileIndication:t[11],streamType:t[12]>>>2&63,bufferSize:t[13]<<16|t[14]<<8|t[15],maxBitrate:t[16]<<24|t[17]<<16|t[18]<<8|t[19],avgBitrate:t[20]<<24|t[21]<<16|t[22]<<8|t[23],decoderConfigDescriptor:{tag:t[24],length:t[25],audioObjectType:t[26]>>>3&31,samplingFrequencyIndex:(t[26]&7)<<1|t[27]>>>7&1,channelConfiguration:t[27]>>>3&15}}}},ftyp:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={majorBrand:Xt(t.subarray(0,4)),minorVersion:i.getUint32(4),compatibleBrands:[]},n=8;while(n<t.byteLength){r.compatibleBrands.push(Xt(t.subarray(n,n+4)));n+=4}return r},dinf:function e(t){return{boxes:Wt(t)}},dref:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:Wt(t.subarray(8))}},hdlr:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:Xt(t.subarray(8,12)),name:""},n=8;for(n=24;n<t.byteLength;n++){if(t[n]===0){n++;break}r.name+=String.fromCharCode(t[n])}r.name=decodeURIComponent(escape(r.name));return r},mdat:function e(t){return{byteLength:t.byteLength,nals:$t(t)}},mdhd:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=4,n,a={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:""};if(a.version===1){r+=4;a.creationTime=Yt(i.getUint32(r));r+=8;a.modificationTime=Yt(i.getUint32(r));r+=4;a.timescale=i.getUint32(r);r+=8;a.duration=i.getUint32(r)}else{a.creationTime=Yt(i.getUint32(r));r+=4;a.modificationTime=Yt(i.getUint32(r));r+=4;a.timescale=i.getUint32(r);r+=4;a.duration=i.getUint32(r)}r+=4;n=i.getUint16(r);a.language+=String.fromCharCode((n>>10)+96);a.language+=String.fromCharCode(((n&992)>>5)+96);a.language+=String.fromCharCode((n&31)+96);return a},mdia:function e(t){return{boxes:Wt(t)}},mfhd:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sequenceNumber:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},minf:function e(t){return{boxes:Wt(t)}},mp4a:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={dataReferenceIndex:i.getUint16(6),channelcount:i.getUint16(16),samplesize:i.getUint16(18),samplerate:i.getUint16(24)+i.getUint16(26)/65536};if(t.byteLength>28){r.streamDescriptor=Wt(t.subarray(28))[0]}return r},moof:function e(t){return{boxes:Wt(t)}},moov:function e(t){return{boxes:Wt(t)}},mvex:function e(t){return{boxes:Wt(t)}},mvhd:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=4,n={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};if(n.version===1){r+=4;n.creationTime=Yt(i.getUint32(r));r+=8;n.modificationTime=Yt(i.getUint32(r));r+=4;n.timescale=i.getUint32(r);r+=8;n.duration=i.getUint32(r)}else{n.creationTime=Yt(i.getUint32(r));r+=4;n.modificationTime=Yt(i.getUint32(r));r+=4;n.timescale=i.getUint32(r);r+=4;n.duration=i.getUint32(r)}r+=4;n.rate=i.getUint16(r)+i.getUint16(r+2)/16;r+=4;n.volume=i.getUint8(r)+i.getUint8(r+1)/8;r+=2;r+=2;r+=2*4;n.matrix=new Uint32Array(t.subarray(r,r+9*4));r+=9*4;r+=6*4;n.nextTrackId=i.getUint32(r);return n},pdin:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),rate:i.getUint32(4),initialDelay:i.getUint32(8)}},sdtp:function e(t){var i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},r;for(r=4;r<t.byteLength;r++){i.samples.push({dependsOn:(t[r]&48)>>4,isDependedOn:(t[r]&12)>>2,hasRedundancy:t[r]&3})}return i},sidx:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8),earliestPresentationTime:i.getUint32(12),firstOffset:i.getUint32(16)},n=i.getUint16(22),a;for(a=24;n;a+=12,n--){r.references.push({referenceType:(t[a]&128)>>>7,referencedSize:i.getUint32(a)&2147483647,subsegmentDuration:i.getUint32(a+4),startsWithSap:!!(t[a+8]&128),sapType:(t[a+8]&112)>>>4,sapDeltaTime:i.getUint32(a+8)&268435455})}return r},smhd:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),balance:t[4]+t[5]/256}},stbl:function e(t){return{boxes:Wt(t)}},stco:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),chunkOffsets:[]},n=i.getUint32(4),a;for(a=8;n;a+=4,n--){r.chunkOffsets.push(i.getUint32(a))}return r},stsc:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=i.getUint32(4),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleToChunks:[]},a;for(a=8;r;a+=12,r--){n.sampleToChunks.push({firstChunk:i.getUint32(a),samplesPerChunk:i.getUint32(a+4),sampleDescriptionIndex:i.getUint32(a+8)})}return n},stsd:function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleDescriptions:Wt(t.subarray(8))}},stsz:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:i.getUint32(4),entries:[]},n;for(n=12;n<t.byteLength;n+=4){r.entries.push(i.getUint32(n))}return r},stts:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),timeToSamples:[]},n=i.getUint32(4),a;for(a=8;n;a+=8,n--){r.timeToSamples.push({sampleCount:i.getUint32(a),sampleDelta:i.getUint32(a+4)})}return r},styp:function e(t){return Qt.ftyp(t)},tfdt:function e(t){var i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:t[4]<<24|t[5]<<16|t[6]<<8|t[7]};if(i.version===1){i.baseMediaDecodeTime*=Math.pow(2,32);i.baseMediaDecodeTime+=t[8]<<24|t[9]<<16|t[10]<<8|t[11]}return i},tfhd:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:i.getUint32(4)},n=r.flags[2]&1,a=r.flags[2]&2,s=r.flags[2]&8,o=r.flags[2]&16,u=r.flags[2]&32,l=r.flags[0]&65536,c=r.flags[0]&131072,f;f=8;if(n){f+=4;r.baseDataOffset=i.getUint32(12);f+=4}if(a){r.sampleDescriptionIndex=i.getUint32(f);f+=4}if(s){r.defaultSampleDuration=i.getUint32(f);f+=4}if(o){r.defaultSampleSize=i.getUint32(f);f+=4}if(u){r.defaultSampleFlags=i.getUint32(f)}if(l){r.durationIsEmpty=true}if(!n&&c){r.baseDataOffsetIsMoof=true}return r},tkhd:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=4,n={version:i.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};if(n.version===1){r+=4;n.creationTime=Yt(i.getUint32(r));r+=8;n.modificationTime=Yt(i.getUint32(r));r+=4;n.trackId=i.getUint32(r);r+=4;r+=8;n.duration=i.getUint32(r)}else{n.creationTime=Yt(i.getUint32(r));r+=4;n.modificationTime=Yt(i.getUint32(r));r+=4;n.trackId=i.getUint32(r);r+=4;r+=4;n.duration=i.getUint32(r)}r+=4;r+=2*4;n.layer=i.getUint16(r);r+=2;n.alternateGroup=i.getUint16(r);r+=2;n.volume=i.getUint8(r)+i.getUint8(r+1)/8;r+=2;r+=2;n.matrix=new Uint32Array(t.subarray(r,r+9*4));r+=9*4;n.width=i.getUint16(r)+i.getUint16(r+2)/16;r+=4;n.height=i.getUint16(r)+i.getUint16(r+2)/16;return n},traf:function e(t){return{boxes:Wt(t)}},trak:function e(t){return{boxes:Wt(t)}},trex:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:i.getUint32(4),defaultSampleDescriptionIndex:i.getUint32(8),defaultSampleDuration:i.getUint32(12),defaultSampleSize:i.getUint32(16),sampleDependsOn:t[20]&3,sampleIsDependedOn:(t[21]&192)>>6,sampleHasRedundancy:(t[21]&48)>>4,samplePaddingValue:(t[21]&14)>>1,sampleIsDifferenceSample:!!(t[21]&1),sampleDegradationPriority:i.getUint16(22)}},trun:function e(t){var i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},r=new DataView(t.buffer,t.byteOffset,t.byteLength),n=i.flags[2]&1,a=i.flags[2]&4,s=i.flags[1]&1,o=i.flags[1]&2,u=i.flags[1]&4,l=i.flags[1]&8,c=r.getUint32(4),f=8,d;if(n){i.dataOffset=r.getInt32(f);f+=4}if(a&&c){d={flags:Kt(t.subarray(f,f+4))};f+=4;if(s){d.duration=r.getUint32(f);f+=4}if(o){d.size=r.getUint32(f);f+=4}if(l){d.compositionTimeOffset=r.getUint32(f);f+=4}i.samples.push(d);c--}while(c--){d={};if(s){d.duration=r.getUint32(f);f+=4}if(o){d.size=r.getUint32(f);f+=4}if(u){d.flags=Kt(t.subarray(f,f+4));f+=4}if(l){d.compositionTimeOffset=r.getUint32(f);f+=4}i.samples.push(d)}return i},"url ":function e(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}},vmhd:function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),graphicsmode:i.getUint16(4),opcolor:new Uint16Array([i.getUint16(6),i.getUint16(8),i.getUint16(10)])}}};Wt=function e(t){var i=0,r=[],n,a,s,o,u;var l=new ArrayBuffer(t.length);var c=new Uint8Array(l);for(var f=0;f<t.length;++f){c[f]=t[f]}n=new DataView(l);while(i<t.byteLength){a=n.getUint32(i);s=Xt(t.subarray(i+4,i+8));o=a>1?i+a:t.byteLength;u=(Qt[s]||function(e){return{data:e}})(t.subarray(i+8,o));u.size=a;u.type=s;r.push(u);i=o}return r};Gt=function e(t,i){var a;i=i||0;a=new Array(i*2+1).join(" ");return t.map(function(n,e){return a+n.type+"\n"+Object.keys(n).filter(function(e){return e!=="type"&&e!=="boxes"}).map(function(e){var t=a+"  "+e+": ",i=n[e];if(i instanceof Uint8Array||i instanceof Uint32Array){var r=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);if(!r){return t+"<>"}if(r.length===1){return t+"<"+r.join("").slice(1)+">"}return t+"<\n"+r.map(function(e){return a+"  "+e}).join("\n")+"\n"+a+"  >"}return t+JSON.stringify(i,null,2).split("\n").map(function(e,t){if(t===0){return e}return a+"  "+e}).join("\n")}).join("\n")+(n.boxes?"\n"+Gt(n.boxes,i+1):"")}).join("\n")};var Jt={inspect:Wt,textify:Gt,parseTfdt:Qt.tfdt,parseHdlr:Qt.hdlr,parseTfhd:Qt.tfhd,parseTrun:Qt.trun,parseSidx:Qt.sidx};var Zt=Re.discardEmulationPreventionBytes;var ei=qe.CaptionStream;var ti=function e(t,i){var r=t;for(var n=0;n<i.length;n++){var a=i[n];if(r<a.size){return a}r-=a.size}return null};var ii=function e(t,i,r){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),a=[],s,o,u,l;for(o=0;o+4<t.length;o+=u){u=n.getUint32(o);o+=4;if(u<=0){continue}switch(t[o]&31){case 6:var c=t.subarray(o+1,o+1+u);var f=ti(o,i);s={nalUnitType:"sei_rbsp",size:u,data:c,escapedRBSP:Zt(c),trackId:r};if(f){s.pts=f.pts;s.dts=f.dts;l=f}else{s.pts=l.pts;s.dts=l.dts}a.push(s);break;default:break}}return a};var ri=function e(t,i,r){var n=i;var a=r.defaultSampleDuration||0;var s=r.defaultSampleSize||0;var o=r.trackId;var u=[];t.forEach(function(e){var t=Jt.parseTrun(e);var i=t.samples;i.forEach(function(e){if(e.duration===undefined){e.duration=a}if(e.size===undefined){e.size=s}e.trackId=o;e.dts=n;if(e.compositionTimeOffset===undefined){e.compositionTimeOffset=0}e.pts=n+e.compositionTimeOffset;n+=e.duration});u=u.concat(i)});return u};var ni=function e(t,f){var r=G.findBox(t,["moof","traf"]);var i=G.findBox(t,["mdat"]);var d={};var n=[];i.forEach(function(e,t){var i=r[t];n.push({mdat:e,traf:i})});n.forEach(function(e){var t=e.mdat;var i=e.traf;var r=G.findBox(i,["tfhd"]);var n=Jt.parseTfhd(r[0]);var a=n.trackId;var s=G.findBox(i,["tfdt"]);var o=s.length>0?Jt.parseTfdt(s[0]).baseMediaDecodeTime:0;var u=G.findBox(i,["trun"]);var l;var c;if(f===a&&u.length>0){l=ri(u,o,n);c=ii(t,l,a);if(!d[a]){d[a]=[]}d[a]=d[a].concat(c)}});return d};var ai=function e(t,i,r){var n;if(!i){return null}n=ni(t,i);return{seiNals:n[i],timescale:r}};var si=function e(){var t=false;var i;var a;var s;var o;var u;this.isInitialized=function(){return t};this.init=function(){i=new ei;t=true;i.on("data",function(e){e.startTime=e.startPts/o;e.endTime=e.endPts/o;u.captions.push(e);u.captionStreams[e.stream]=true})};this.isNewInit=function(e,t){if(e&&e.length===0||t&&typeof t==="object"&&Object.keys(t).length===0){return false}return s!==e[0]||o!==t[s]};this.parse=function(e,t,i){var r;if(!this.isInitialized()){return null}else if(!t||!i){return null}else if(this.isNewInit(t,i)){s=t[0];o=i[s]}else if(!s||!o){a.push(e);return null}while(a.length>0){var n=a.shift();this.parse(n,t,i)}r=ai(e,s,o);if(r===null||!r.seiNals){return null}this.pushNals(r.seiNals);this.flushStream();return u};this.pushNals=function(e){if(!this.isInitialized()||!e||e.length===0){return null}e.forEach(function(e){i.push(e)})};this.flushStream=function(){if(!this.isInitialized()){return null}i.flush()};this.clearParsedCaptions=function(){u.captions=[];u.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized()){return null}i.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){a=[];s=null;o=null;if(!u){u={captions:[],captionStreams:{}}}else{this.clearParsedCaptions()}this.resetCaptionStream()};this.reset()};var oi=si;var ui={generator:B,probe:G,Transmuxer:zt.Transmuxer,AudioSegmentStream:zt.AudioSegmentStream,VideoSegmentStream:zt.VideoSegmentStream,CaptionParser:oi};var li=function e(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}};var ci=function(){function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(e,t,i){if(t)r(e.prototype,t);if(i)r(e,i);return e}}();var fi=function e(r,t){t.on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var i=e.data;e.data=i.buffer;r.postMessage({action:"data",segment:e,byteOffset:i.byteOffset,byteLength:i.byteLength},[e.data])});if(t.captionStream){t.captionStream.on("data",function(e){r.postMessage({action:"caption",data:e})})}t.on("done",function(e){r.postMessage({action:"done"})});t.on("gopInfo",function(e){r.postMessage({action:"gopInfo",gopInfo:e})});t.on("videoSegmentTimingInfo",function(e){r.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:e})})};var di=function(){function i(e,t){li(this,i);this.options=t||{};this.self=e;this.init()}ci(i,[{key:"init",value:function e(){if(this.transmuxer){this.transmuxer.dispose()}this.transmuxer=new ui.Transmuxer(this.options);fi(this.self,this.transmuxer)}},{key:"push",value:function e(t){var i=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(i)}},{key:"reset",value:function e(){this.init()}},{key:"setTimestampOffset",value:function e(t){var i=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(i*9e4))}},{key:"setAudioAppendStart",value:function e(t){this.transmuxer.setAudioAppendStart(Math.ceil(t.appendStart*9e4))}},{key:"flush",value:function e(t){this.transmuxer.flush()}},{key:"resetCaptions",value:function e(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function e(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())}}]);return i}();var hi=function e(t){t.onmessage=function(e){if(e.data.action==="init"&&e.data.options){this.messageHandlers=new di(t,e.data.options);return}if(!this.messageHandlers){this.messageHandlers=new di(t)}if(e.data&&e.data.action&&e.data.action!=="init"){if(this.messageHandlers[e.data.action]){this.messageHandlers[e.data.action](e.data)}}}};var pi=new hi(mi);return pi}()});var bh={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"};var Th=function e(t){return t.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,i){var r=("00"+Number(t).toString(16)).slice(-2);var n=("00"+Number(i).toString(16)).slice(-2);return"avc1."+r+"00"+n})})};var Sh=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var i={codecCount:0};var r=void 0;i.codecCount=t.split(",").length;i.codecCount=i.codecCount||2;r=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(t);if(r){i.videoCodec=r[2];i.videoObjectTypeIndicator=r[3]}i.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t);i.audioProfile=i.audioProfile&&i.audioProfile[2];return i};var kh=function e(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return Th([e])[0]})};var wh=function e(t,i,r){return t+"/"+i+'; codecs="'+r.filter(function(e){return!!e}).join(", ")+'"'};var Ch=function e(t){if(t.segments&&t.segments.length&&t.segments[0].map){return"mp4"}return"mp2t"};var Eh=function e(t){var i=t.attributes||{};if(i.CODECS){return Sh(i.CODECS)}return bh};var Ah=function e(t,i){if(!t.mediaGroups.AUDIO||!i){return null}var r=t.mediaGroups.AUDIO[i];if(!r){return null}for(var n in r){var a=r[n];if(a.default&&a.playlists){return Sh(a.playlists[0].attributes.CODECS).audioProfile}}return null};var Lh=function e(t,i){var r=Ch(i);var n=Eh(i);var a=i.attributes||{};var s=true;var o=false;if(!i){return[]}if(t.mediaGroups.AUDIO&&a.AUDIO){var u=t.mediaGroups.AUDIO[a.AUDIO];if(u){o=true;s=false;for(var l in u){if(!u[l].uri&&!u[l].playlists){s=true;break}}}}if(o&&!n.audioProfile){if(!s){n.audioProfile=Ah(t,a.AUDIO)}if(!n.audioProfile){Is.log.warn("Multiple audio tracks present but no audio codec string is specified. "+"Attempting to use the default audio codec (mp4a.40.2)");n.audioProfile=bh.audioProfile}}var c={};if(n.videoCodec){c.video=""+n.videoCodec+n.videoObjectTypeIndicator}if(n.audioProfile){c.audio="mp4a.40."+n.audioProfile}var f=wh("audio",r,[c.audio]);var d=wh("video",r,[c.video]);var h=wh("video",r,[c.video,c.audio]);if(o){if(!s&&c.video){return[d,f]}if(!s&&!c.video){return[f,f]}return[h,f]}if(!c.video){return[f]}return[h]};var Ih=function e(t){var n={type:"",parameters:{}};var i=t.trim().split(";");n.type=i.shift().trim();i.forEach(function(e){var t=e.trim().split("=");if(t.length>1){var i=t[0].replace(/"/g,"").trim();var r=t[1].replace(/"/g,"").trim();n.parameters[i]=r}});return n};var Ph=function e(t){return/mp4a\.\d+.\d+/i.test(t)};var Oh=function e(t){return/avc1\.[\da-f]+/i.test(t)};var Uh=function e(t,i,r){if(typeof i==="undefined"||i===null||!t.length){return[]}var n=Math.ceil((i-r+3)*9e4);var a=void 0;for(a=0;a<t.length;a++){if(t[a].pts>n){break}}return t.slice(a)};var Dh=function e(t,i,r){if(!i.length){return t}if(r){return i.slice()}var n=i[0].pts;var a=0;for(a;a<t.length;a++){if(t[a].pts>=n){break}}return t.slice(0,a).concat(i)};var xh=function e(t,i,r,n){var a=Math.ceil((i-n)*9e4);var s=Math.ceil((r-n)*9e4);var o=t.slice();var u=t.length;while(u--){if(t[u].pts<=s){break}}if(u===-1){return o}var l=u+1;while(l--){if(t[l].pts<=a){break}}l=Math.max(l,0);o.splice(l,u-l+1);return o};var Rh=function e(t,i,r){var n=null;var a=null;var s=0;var o=[];var u=[];if(!t&&!i){return Is.createTimeRange()}if(!t){return i.buffered}if(!i){return t.buffered}if(r){return t.buffered}if(t.buffered.length===0&&i.buffered.length===0){return Is.createTimeRange()}var l=t.buffered;var c=i.buffered;var f=l.length;while(f--){o.push({time:l.start(f),type:"start"});o.push({time:l.end(f),type:"end"})}f=c.length;while(f--){o.push({time:c.start(f),type:"start"});o.push({time:c.end(f),type:"end"})}o.sort(function(e,t){return e.time-t.time});for(f=0;f<o.length;f++){if(o[f].type==="start"){s++;if(s===2){n=o[f].time}}else if(o[f].type==="end"){s--;if(s===1){a=o[f].time}}if(n!==null&&a!==null){u.push([n,a]);n=null;a=null}}return Is.createTimeRanges(u)};var Mh=9e4;var Bh=function e(t,i){var r=t.addSourceBuffer(i);var n=Object.create(null);n.updating=false;n.realBuffer_=r;var a=function e(i){if(typeof r[i]==="function"){n[i]=function(){return r[i].apply(r,arguments)}}else if(typeof n[i]==="undefined"){Object.defineProperty(n,i,{get:function e(){return r[i]},set:function e(t){return r[i]=t}})}};for(var s in r){a(s)}return n};var Nh=function(e){Hf(n,e);function n(e,t){jf(this,n);var i=qf(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,Is.EventTarget));i.timestampOffset_=0;i.pendingBuffers_=[];i.bufferUpdating_=false;i.mediaSource_=e;i.codecs_=t;i.audioCodec_=null;i.videoCodec_=null;i.audioDisabled_=false;i.appendAudioInitSegment_=true;i.gopBuffer_=[];i.timeMapping_=0;i.safeAppend_=Is.browser.IE_VERSION>=11;var r={remux:false,alignGopsAtEnd:i.safeAppend_};i.codecs_.forEach(function(e){if(Ph(e)){i.audioCodec_=e}else if(Oh(e)){i.videoCodec_=e}});i.transmuxer_=new _h;i.transmuxer_.postMessage({action:"init",options:r});i.transmuxer_.onmessage=function(e){if(e.data.action==="data"){return i.data_(e)}if(e.data.action==="done"){return i.done_(e)}if(e.data.action==="gopInfo"){return i.appendGopInfo_(e)}if(e.data.action==="videoSegmentTimingInfo"){return i.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo)}};Object.defineProperty(i,"timestampOffset",{get:function e(){return this.timestampOffset_},set:function e(t){if(typeof t==="number"&&t>=0){this.timestampOffset_=t;this.appendAudioInitSegment_=true;this.gopBuffer_.length=0;this.timeMapping_=0;this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t})}}});Object.defineProperty(i,"appendWindowStart",{get:function e(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function e(t){if(this.videoBuffer_){this.videoBuffer_.appendWindowStart=t}if(this.audioBuffer_){this.audioBuffer_.appendWindowStart=t}}});Object.defineProperty(i,"updating",{get:function e(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(i,"buffered",{get:function e(){return Rh(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}});return i}Ff(n,[{key:"data_",value:function e(t){var i=t.data.segment;i.data=new Uint8Array(i.data,t.data.byteOffset,t.data.byteLength);i.initSegment=new Uint8Array(i.initSegment.data,i.initSegment.byteOffset,i.initSegment.byteLength);ih(this,this.mediaSource_,i);this.pendingBuffers_.push(i);return}},{key:"done_",value:function e(t){if(this.mediaSource_.readyState==="closed"){this.pendingBuffers_.length=0;return}this.processPendingSegments_();return}},{key:"videoSegmentTimingInfo_",value:function e(t){var i={start:{decode:t.start.dts/Mh,presentation:t.start.pts/Mh},end:{decode:t.end.dts/Mh,presentation:t.end.pts/Mh},baseMediaDecodeTime:t.baseMediaDecodeTime/Mh};if(t.prependedContentDuration){i.prependedContentDuration=t.prependedContentDuration/Mh}this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})}},{key:"createRealSourceBuffers_",value:function e(){var n=this;var a=["audio","video"];a.forEach(function(i){if(!n[i+"Codec_"]){return}if(n[i+"Buffer_"]){return}var e=null;if(n.mediaSource_[i+"Buffer_"]){e=n.mediaSource_[i+"Buffer_"];e.updating=false}else{var t=i+"Codec_";var r=i+'/mp4;codecs="'+n[t]+'"';e=Bh(n.mediaSource_.nativeMediaSource_,r);n.mediaSource_[i+"Buffer_"]=e}n[i+"Buffer_"]=e;["update","updatestart","updateend"].forEach(function(t){e.addEventListener(t,function(){if(i==="audio"&&n.audioDisabled_){return}if(t==="updateend"){n[i+"Buffer_"].updating=false}var e=a.every(function(e){if(e==="audio"&&n.audioDisabled_){return true}if(i!==e&&n[e+"Buffer_"]&&n[e+"Buffer_"].updating){return false}return true});if(e){return n.trigger(t)}})})})}},{key:"appendBuffer",value:function e(t){this.bufferUpdating_=true;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var i=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:i.end(i.length-1)})}if(this.videoBuffer_){this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:Uh(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)})}this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function e(t){this.gopBuffer_=Dh(this.gopBuffer_,t.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function e(t,i){if(this.videoBuffer_){this.videoBuffer_.updating=true;this.videoBuffer_.remove(t,i);this.gopBuffer_=xh(this.gopBuffer_,t,i,this.timeMapping_)}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.updating=true;this.audioBuffer_.remove(t,i)}rh(t,i,this.metadataTrack_);if(this.inbandTextTracks_){for(var r in this.inbandTextTracks_){rh(t,i,this.inbandTextTracks_[r])}}}},{key:"processPendingSegments_",value:function e(){var t={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};t=this.pendingBuffers_.reduce(function(e,t){var i=t.type;var r=t.data;var n=t.initSegment;e[i].segments.push(r);e[i].bytes+=r.byteLength;e[i].initSegment=n;if(t.captions){e.captions=e.captions.concat(t.captions)}if(t.info){e[i].info=t.info}if(t.metadata){e.metadata=e.metadata.concat(t.metadata)}return e},t);if(!this.videoBuffer_&&!this.audioBuffer_){if(t.video.bytes===0){this.videoCodec_=null}if(t.audio.bytes===0){this.audioCodec_=null}this.createRealSourceBuffers_()}if(t.audio.info){this.mediaSource_.trigger({type:"audioinfo",info:t.audio.info})}if(t.video.info){this.mediaSource_.trigger({type:"videoinfo",info:t.video.info})}if(this.appendAudioInitSegment_){if(!this.audioDisabled_&&this.audioBuffer_){t.audio.segments.unshift(t.audio.initSegment);t.audio.bytes+=t.audio.initSegment.byteLength}this.appendAudioInitSegment_=false}var i=false;if(this.videoBuffer_&&t.video.bytes){t.video.segments.unshift(t.video.initSegment);t.video.bytes+=t.video.initSegment.byteLength;this.concatAndAppendSegments_(t.video,this.videoBuffer_)}else if(this.videoBuffer_&&(this.audioDisabled_||!this.audioBuffer_)){i=true}sh(this,t.captions,t.metadata);if(!this.audioDisabled_&&this.audioBuffer_){this.concatAndAppendSegments_(t.audio,this.audioBuffer_)}this.pendingBuffers_.length=0;if(i){this.trigger("updateend")}this.bufferUpdating_=false}},{key:"concatAndAppendSegments_",value:function e(t,i){var r=0;var n=void 0;if(t.bytes){n=new Uint8Array(t.bytes);t.segments.forEach(function(e){n.set(e,r);r+=e.byteLength});try{i.updating=true;i.appendBuffer(n)}catch(e){if(this.mediaSource_.player_){this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}}},{key:"abort",value:function e(){if(this.videoBuffer_){this.videoBuffer_.abort()}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.abort()}if(this.transmuxer_){this.transmuxer_.postMessage({action:"reset"})}this.pendingBuffers_.length=0;this.bufferUpdating_=false}}]);return n}(Is.EventTarget);var jh=function(e){Hf(t,e);function t(){jf(this,t);var a=qf(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var e=void 0;a.nativeMediaSource_=new _.MediaSource;for(e in a.nativeMediaSource_){if(!(e in t.prototype)&&typeof a.nativeMediaSource_[e]==="function"){a[e]=a.nativeMediaSource_[e].bind(a.nativeMediaSource_)}}a.duration_=NaN;Object.defineProperty(a,"duration",{get:function e(){if(this.duration_===Infinity){return this.duration_}return this.nativeMediaSource_.duration},set:function e(t){this.duration_=t;if(t!==Infinity){this.nativeMediaSource_.duration=t;return}}});Object.defineProperty(a,"seekable",{get:function e(){if(this.duration_===Infinity){return Is.createTimeRanges([[0,this.nativeMediaSource_.duration]])}return this.nativeMediaSource_.seekable}});Object.defineProperty(a,"readyState",{get:function e(){return this.nativeMediaSource_.readyState}});Object.defineProperty(a,"activeSourceBuffers",{get:function e(){return this.activeSourceBuffers_}});a.sourceBuffers=[];a.activeSourceBuffers_=[];a.updateActiveSourceBuffers_=function(){a.activeSourceBuffers_.length=0;if(a.sourceBuffers.length===1){var e=a.sourceBuffers[0];e.appendAudioInitSegment_=true;e.audioDisabled_=!e.audioCodec_;a.activeSourceBuffers_.push(e);return}var i=false;var r=true;for(var t=0;t<a.player_.audioTracks().length;t++){var n=a.player_.audioTracks()[t];if(n.enabled&&n.kind!=="main"){i=true;r=false;break}}a.sourceBuffers.forEach(function(e,t){e.appendAudioInitSegment_=true;if(e.videoCodec_&&e.audioCodec_){e.audioDisabled_=i}else if(e.videoCodec_&&!e.audioCodec_){e.audioDisabled_=true;r=false}else if(!e.videoCodec_&&e.audioCodec_){e.audioDisabled_=t?r:!r;if(e.audioDisabled_){return}}a.activeSourceBuffers_.push(e)})};a.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=true})};a.onHlsReset_=function(){a.sourceBuffers.forEach(function(e){if(e.transmuxer_){e.transmuxer_.postMessage({action:"resetCaptions"})}})};a.onHlsSegmentTimeMapping_=function(t){a.sourceBuffers.forEach(function(e){return e.timeMapping_=t.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},a);a.on("sourceopen",function(e){var t=d.querySelector('[src="'+a.url_+'"]');if(!t){return}a.player_=Is(t.parentNode);if(!a.player_){return}a.player_.tech_.on("hls-reset",a.onHlsReset_);a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_);if(a.player_.audioTracks&&a.player_.audioTracks()){a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_);a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_);a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)}a.player_.on("mediachange",a.onPlayerMediachange_)});a.on("sourceended",function(e){var t=ah(a.duration);for(var i=0;i<a.sourceBuffers.length;i++){var r=a.sourceBuffers[i];var n=r.metadataTrack_&&r.metadataTrack_.cues;if(n&&n.length){n[n.length-1].endTime=t}}});a.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){if(e.transmuxer_){e.transmuxer_.terminate()}});this.sourceBuffers.length=0;if(!this.player_){return}if(this.player_.audioTracks&&this.player_.audioTracks()){this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)}if(this.player_.el_){this.player_.off("mediachange",this.onPlayerMediachange_)}if(this.player_.tech_&&this.player_.tech_.el_){this.player_.tech_.off("hls-reset",this.onHlsReset_);this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)}});return a}Ff(t,[{key:"addSeekableRange_",value:function e(t,i){var r=void 0;if(this.duration!==Infinity){r=new Error("MediaSource.addSeekableRange() can only be invoked "+"when the duration is Infinity");r.name="InvalidStateError";r.code=11;throw r}if(i>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration)){this.nativeMediaSource_.duration=i}}},{key:"addSourceBuffer",value:function e(t){var i=void 0;var r=Ih(t);if(/^(video|audio)\/mp2t$/i.test(r.type)){var n=[];if(r.parameters&&r.parameters.codecs){n=r.parameters.codecs.split(",");n=Th(n);n=n.filter(function(e){return Ph(e)||Oh(e)})}if(n.length===0){n=["avc1.4d400d","mp4a.40.2"]}i=new Nh(this,n);if(this.sourceBuffers.length!==0){this.sourceBuffers[0].createRealSourceBuffers_();i.createRealSourceBuffers_();this.sourceBuffers[0].audioDisabled_=true}}else{i=this.nativeMediaSource_.addSourceBuffer(t)}this.sourceBuffers.push(i);return i}}]);return t}(Is.EventTarget);var Fh=0;Is.mediaSources={};var Vh=function e(t,i){var r=Is.mediaSources[t];if(r){r.trigger({type:"sourceopen",swfId:i})}else{throw new Error("Media Source not found (Video.js)")}};var Hh=function e(){return!!_.MediaSource&&!!_.MediaSource.isTypeSupported&&_.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')};var qh=function e(){this.MediaSource={open:Vh,supportsNativeMediaSources:Hh};if(Hh()){return new jh}throw new Error("Cannot use create a virtual MediaSource for this video")};qh.open=Vh;qh.supportsNativeMediaSources=Hh;var zh={createObjectURL:function e(t){var i="blob:vjs-media-source/";var r=void 0;if(t instanceof jh){r=_.URL.createObjectURL(t.nativeMediaSource_);t.url_=r;return r}if(!(t instanceof jh)){r=_.URL.createObjectURL(t);t.url_=r;return r}r=i+Fh;Fh++;Is.mediaSources[r]=t;return r}};Is.MediaSource=qh;Is.URL=zh;var Wh=Is.EventTarget,Gh=Is.mergeOptions;var Xh=function e(t,i){var s=void 0;var o=Gh(t,{duration:i.duration,minimumUpdatePeriod:i.minimumUpdatePeriod});for(var r=0;r<i.playlists.length;r++){var n=Qf(o,i.playlists[r]);if(n){o=n}else{s=true}}Yf(i,function(e,t,i,r){if(e.playlists&&e.playlists.length){var n=e.playlists[0].uri;var a=Qf(o,e.playlists[0]);if(a){o=a;o.mediaGroups[t][i][r].playlists[0]=o.playlists[n];s=false}}});if(s){return null}return o};var Yh=function(e){Hf(l,e);function l(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var r=arguments[3];jf(this,l);var n=qf(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));var a=i.withCredentials,s=a===undefined?false:a,o=i.handleManifestRedirects,u=o===undefined?false:o;n.hls_=t;n.withCredentials=s;n.handleManifestRedirects=u;if(!e){throw new Error("A non-empty playlist URL or playlist is required")}n.on("minimumUpdatePeriod",function(){n.refreshXml_()});n.on("mediaupdatetimeout",function(){n.refreshMedia_()});n.state="HAVE_NOTHING";n.loadedPlaylists_={};if(typeof e==="string"){n.srcUrl=e;return qf(n)}n.setupChildLoader(r,e);return n}Ff(l,[{key:"setupChildLoader",value:function e(t,i){this.masterPlaylistLoader_=t;this.childPlaylist_=i}},{key:"dispose",value:function e(){this.stopRequest();this.loadedPlaylists_={};_.clearTimeout(this.mediaUpdateTimeout)}},{key:"hasPendingRequest",value:function e(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function e(){if(this.request){var t=this.request;this.request=null;t.onreadystatechange=null;t.abort()}}},{key:"media",value:function e(t){if(!t){return this.media_}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state)}var i=this.state;if(typeof t==="string"){if(!this.master.playlists[t]){throw new Error("Unknown playlist URI: "+t)}t=this.master.playlists[t]}var r=!this.media_||t.uri!==this.media_.uri;if(r&&this.loadedPlaylists_[t.uri]&&this.loadedPlaylists_[t.uri].endList){this.state="HAVE_METADATA";this.media_=t;if(r){this.trigger("mediachanging");this.trigger("mediachange")}return}if(!r){return}if(this.media_){this.trigger("mediachanging")}this.mediaRequest_=_.setTimeout(this.haveMetadata.bind(this,{startingState:i,playlist:t}),0)}},{key:"haveMetadata",value:function e(t){var i=t.startingState,r=t.playlist;this.state="HAVE_METADATA";this.media_=r;this.loadedPlaylists_[r.uri]=r;this.mediaRequest_=null;this.refreshMedia_();if(i==="HAVE_MASTER"){this.trigger("loadedmetadata")}else{this.trigger("mediachange")}}},{key:"pause",value:function e(){this.stopRequest();_.clearTimeout(this.mediaUpdateTimeout);if(this.state==="HAVE_NOTHING"){this.started=false}}},{key:"load",value:function e(t){var i=this;_.clearTimeout(this.mediaUpdateTimeout);var r=this.media();if(t){var n=r?r.targetDuration/2*1e3:5*1e3;this.mediaUpdateTimeout=_.setTimeout(function(){return i.load()},n);return}if(!this.started){this.start();return}this.trigger("loadedplaylist")}},{key:"parseMasterXml",value:function e(){var a=Vo(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});a.uri=this.srcUrl;for(var t=0;t<a.playlists.length;t++){var i="placeholder-uri-"+t;a.playlists[t].uri=i;a.playlists[i]=a.playlists[t]}Yf(a,function(e,t,i,r){if(e.playlists&&e.playlists.length){var n="placeholder-uri-"+t+"-"+i+"-"+r;e.playlists[0].uri=n;a.playlists[n]=e.playlists[0]}});Jf(a);Zf(a);return a}},{key:"start",value:function e(){var i=this;this.started=true;if(this.masterPlaylistLoader_){this.mediaRequest_=_.setTimeout(this.haveMaster_.bind(this),0);return}this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(!i.request){return}i.request=null;if(e){i.error={status:t.status,message:"DASH playlist request error at URL: "+i.srcUrl,responseText:t.responseText,code:2};if(i.state==="HAVE_NOTHING"){i.started=false}return i.trigger("error")}i.masterXml_=t.responseText;if(t.responseHeaders&&t.responseHeaders.date){i.masterLoaded_=Date.parse(t.responseHeaders.date)}else{i.masterLoaded_=Date.now()}i.srcUrl=Nf(i.handleManifestRedirects,i.srcUrl,t);i.syncClientServerClock_(i.onClientServerClockSync_.bind(i))})}},{key:"syncClientServerClock_",value:function e(r){var n=this;var a=Ho(this.masterXml_);if(a===null){this.clientOffset_=this.masterLoaded_-Date.now();return r()}if(a.method==="DIRECT"){this.clientOffset_=a.value-Date.now();return r()}this.request=this.hls_.xhr({uri:Bf(this.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},function(e,t){if(!n.request){return}if(e){n.clientOffset_=n.masterLoaded_-Date.now();return r()}var i=void 0;if(a.method==="HEAD"){if(!t.responseHeaders||!t.responseHeaders.date){i=n.masterLoaded_}else{i=Date.parse(t.responseHeaders.date)}}else{i=Date.parse(t.responseText)}n.clientOffset_=i-Date.now();r()})}},{key:"haveMaster_",value:function e(){this.state="HAVE_MASTER";this.mediaRequest_=null;if(!this.masterPlaylistLoader_){this.master=this.parseMasterXml();this.trigger("loadedplaylist")}else if(!this.media_){this.media(this.childPlaylist_)}}},{key:"onClientServerClockSync_",value:function e(){var t=this;this.haveMaster_();if(!this.hasPendingRequest()&&!this.media_){this.media(this.master.playlists[0])}if(this.master&&this.master.minimumUpdatePeriod){_.setTimeout(function(){t.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}}},{key:"refreshXml_",value:function e(){var n=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(!n.request){return}n.request=null;if(e){n.error={status:t.status,message:"DASH playlist request error at URL: "+n.srcUrl,responseText:t.responseText,code:2};if(n.state==="HAVE_NOTHING"){n.started=false}return n.trigger("error")}n.masterXml_=t.responseText;var i=n.parseMasterXml();var r=Xh(n.master,i);if(r){n.master=r}_.setTimeout(function(){n.trigger("minimumUpdatePeriod")},n.master.minimumUpdatePeriod)})}},{key:"refreshMedia_",value:function e(){var t=this;var i=void 0;var r=void 0;if(this.masterPlaylistLoader_){i=this.masterPlaylistLoader_.master;r=this.masterPlaylistLoader_.parseMasterXml()}else{i=this.master;r=this.parseMasterXml()}var n=Xh(i,r);if(n){if(this.masterPlaylistLoader_){this.masterPlaylistLoader_.master=n}else{this.master=n}this.media_=n.playlists[this.media_.uri]}else{this.trigger("playlistunchanged")}if(!this.media().endList){this.mediaUpdateTimeout=_.setTimeout(function(){t.trigger("mediaupdatetimeout")},ed(this.media(),!!n))}this.trigger("loadedplaylist")}}]);return l}(Wh);var Kh=function e(t){if(Is.log.debug){return Is.log.debug.bind(Is,"VHS:",t+" >")}return function(){}};function $h(){}var Qh=function(){function n(e,t,i,r){jf(this,n);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=e;this.processedAppend_=false;this.type_=i;this.mimeType_=t;this.logger_=Kh("SourceUpdater["+i+"]["+t+"]");if(e.readyState==="closed"){e.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,t,r))}else{this.createSourceBuffer_(t,r)}}Ff(n,[{key:"createSourceBuffer_",value:function e(t,i){var r=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(t);this.logger_("created SourceBuffer");if(i){i.trigger("sourcebufferadded");if(this.mediaSource.sourceBuffers.length<2){i.on("sourcebufferadded",function(){r.start_()});return}}this.start_()}},{key:"start_",value:function e(){var t=this;this.started_=true;this.onUpdateendCallback_=function(){var e=t.pendingCallback_;t.pendingCallback_=null;t.logger_("buffered ["+Zd(t.buffered())+"]");if(e){e()}t.runCallback_()};this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function e(t){var i=this;if(this.processedAppend_){this.queueCallback_(function(){i.sourceBuffer_.abort()},t)}}},{key:"appendBuffer",value:function e(t,i){var r=this;this.processedAppend_=true;this.queueCallback_(function(){if(t.videoSegmentTimingInfoCallback){r.sourceBuffer_.addEventListener("videoSegmentTimingInfo",t.videoSegmentTimingInfoCallback)}r.sourceBuffer_.appendBuffer(t.bytes)},function(){if(t.videoSegmentTimingInfoCallback){r.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",t.videoSegmentTimingInfoCallback)}i()})}},{key:"buffered",value:function e(){if(!this.sourceBuffer_){return Is.createTimeRanges()}return this.sourceBuffer_.buffered}},{key:"remove",value:function e(t,i){var r=this;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:$h;if(this.processedAppend_){this.queueCallback_(function(){r.logger_("remove ["+t+" => "+i+"]");r.sourceBuffer_.remove(t,i)},n)}}},{key:"updating",value:function e(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==$h}},{key:"timestampOffset",value:function e(t){var i=this;if(typeof t!=="undefined"){this.queueCallback_(function(){i.sourceBuffer_.timestampOffset=t});this.timestampOffset_=t}return this.timestampOffset_}},{key:"queueCallback_",value:function e(t,i){this.callbacks_.push([t.bind(this),i]);this.runCallback_()}},{key:"runCallback_",value:function e(){var t=void 0;if(!this.updating()&&this.callbacks_.length&&this.started_){t=this.callbacks_.shift();this.pendingCallback_=t[1];t[0]()}}},{key:"dispose",value:function e(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);if(this.sourceBuffer_&&this.mediaSource.readyState==="open"){this.sourceBuffer_.abort()}}}]);return n}();var Jh={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1};var Zh={FAILURE:2,TIMEOUT:-101,ABORTED:-102};var ep=function e(t){var i=void 0;var r=void 0;r=t.offset+t.length-1;i=t.offset;return"bytes="+i+"-"+r};var tp=function e(t){var i={};if(t.byterange){i.Range=ep(t.byterange)}return i};var ip=function e(t){t.forEach(function(e){e.abort()})};var rp=function e(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}};var np=function e(t){var i=t.target;var r=Date.now()-i.requestTime;var n={bandwidth:Infinity,bytesReceived:0,roundTripTime:r||0};n.bytesReceived=t.loaded;n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3);return n};var ap=function e(t,i){if(i.timedout){return{status:i.status,message:"HLS request timed-out at URL: "+i.uri,code:Zh.TIMEOUT,xhr:i}}if(i.aborted){return{status:i.status,message:"HLS request aborted at URL: "+i.uri,code:Zh.ABORTED,xhr:i}}if(t){return{status:i.status,message:"HLS request errored at URL: "+i.uri,code:Zh.FAILURE,xhr:i}}return null};var sp=function e(a,s){return function(e,t){var i=t.response;var r=ap(e,t);if(r){return s(r,a)}if(i.byteLength!==16){return s({status:t.status,message:"Invalid HLS key at URL: "+t.uri,code:Zh.FAILURE,xhr:t},a)}var n=new DataView(i);a.key.bytes=new Uint32Array([n.getUint32(0),n.getUint32(4),n.getUint32(8),n.getUint32(12)]);return s(null,a)}};var op=function e(n,a,s){return function(e,t){var i=t.response;var r=ap(e,t);if(r){return s(r,n)}if(i.byteLength===0){return s({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:Zh.FAILURE,xhr:t},n)}n.map.bytes=new Uint8Array(t.response);if(!a.isInitialized()){a.init()}n.map.timescales=Qo.timescale(n.map.bytes);n.map.videoTrackIds=Qo.videoTrackIds(n.map.bytes);return s(null,n)}};var up=function e(a,s,o){return function(e,t){var i=t.response;var r=ap(e,t);var n=void 0;if(r){return o(r,a)}if(i.byteLength===0){return o({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:Zh.FAILURE,xhr:t},a)}a.stats=rp(t);if(a.key){a.encryptedBytes=new Uint8Array(t.response)}else{a.bytes=new Uint8Array(t.response)}if(a.map&&a.map.bytes){if(!s.isInitialized()){s.init()}n=s.parse(a.bytes,a.map.videoTrackIds,a.map.timescales);if(n&&n.captions){a.captionStreams=n.captionStreams;a.fmp4Captions=n.captions}}return o(null,a)}};var lp=function e(r,n,a){var t=function e(t){if(t.data.source===n.requestId){r.removeEventListener("message",e);var i=t.data.decrypted;n.bytes=new Uint8Array(i.bytes,i.byteOffset,i.byteLength);return a(null,n)}};r.addEventListener("message",t);r.postMessage(Ud({source:n.requestId,encrypted:n.encryptedBytes,key:n.key.bytes,iv:n.key.iv}),[n.encryptedBytes.buffer,n.key.bytes.buffer])};var cp=function e(i,r,n){var a=0;var s=false;return function(e,t){if(s){return}if(e){s=true;ip(i);return n(e,t)}a+=1;if(a===i.length){t.endOfAllRequests=Date.now();if(t.encryptedBytes){return lp(r,t,n)}return n(null,t)}}};var fp=function e(t,i){return function(e){t.stats=Is.mergeOptions(t.stats,np(e));if(!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived){t.stats.firstBytesReceivedAt=Date.now()}return i(e,t)}};var dp=function e(t,i,r,n,a,s,o){var u=[];var l=cp(u,r,o);if(a.key){var c=Is.mergeOptions(i,{uri:a.key.resolvedUri,responseType:"arraybuffer"});var f=sp(a,l);var d=t(c,f);u.push(d)}if(a.map&&!a.map.bytes){var h=Is.mergeOptions(i,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:tp(a.map)});var p=op(a,n,l);var m=t(h,p);u.push(m)}var v=Is.mergeOptions(i,{uri:a.resolvedUri,responseType:"arraybuffer",headers:tp(a)});var g=up(a,n,l);var y=t(v,g);y.addEventListener("progress",fp(a,s));u.push(y);return function(){return ip(u)}};var hp=function e(t,i){var r=void 0;if(!t){return""}r=_.getComputedStyle(t);if(!r){return""}return r[i]};var pp=function e(t,r){var n=t.slice();t.sort(function(e,t){var i=r(e,t);if(i===0){return n.indexOf(e)-n.indexOf(t)}return i})};var mp=function e(t,i){var r=void 0;var n=void 0;if(t.attributes.BANDWIDTH){r=t.attributes.BANDWIDTH}r=r||_.Number.MAX_VALUE;if(i.attributes.BANDWIDTH){n=i.attributes.BANDWIDTH}n=n||_.Number.MAX_VALUE;return r-n};var vp=function e(t,i){var r=void 0;var n=void 0;if(t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width){r=t.attributes.RESOLUTION.width}r=r||_.Number.MAX_VALUE;if(i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width){n=i.attributes.RESOLUTION.width}n=n||_.Number.MAX_VALUE;if(r===n&&t.attributes.BANDWIDTH&&i.attributes.BANDWIDTH){return t.attributes.BANDWIDTH-i.attributes.BANDWIDTH}return r-n};var gp=function e(t,i,r,n,a){var s=t.playlists.map(function(e){var t=void 0;var i=void 0;var r=void 0;t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width;i=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;r=e.attributes.BANDWIDTH;r=r||_.Number.MAX_VALUE;return{bandwidth:r,width:t,height:i,playlist:e}});pp(s,function(e,t){return e.bandwidth-t.bandwidth});s=s.filter(function(e){return!Cd.isIncompatible(e.playlist)});var o=s.filter(function(e){return Cd.isEnabled(e.playlist)});if(!o.length){o=s.filter(function(e){return!Cd.isDisabled(e.playlist)})}var u=o.filter(function(e){return e.bandwidth*Jh.BANDWIDTH_VARIANCE<i});var l=u[u.length-1];var c=u.filter(function(e){return e.bandwidth===l.bandwidth})[0];if(a===false){var f=c||o[0]||s[0];return f?f.playlist:null}var d=u.filter(function(e){return e.width&&e.height});pp(d,function(e,t){return e.width-t.width});var h=d.filter(function(e){return e.width===r&&e.height===n});l=h[h.length-1];var p=h.filter(function(e){return e.bandwidth===l.bandwidth})[0];var m=void 0;var v=void 0;var g=void 0;if(!p){m=d.filter(function(e){return e.width>r||e.height>n});v=m.filter(function(e){return e.width===m[0].width&&e.height===m[0].height});l=v[v.length-1];g=v.filter(function(e){return e.bandwidth===l.bandwidth})[0]}var y=g||p||c||o[0]||s[0];return y?y.playlist:null};var yp=function e(){return gp(this.playlists.master,this.systemBandwidth,parseInt(hp(this.tech_.el(),"width"),10),parseInt(hp(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)};var _p=function e(t){var i=t.master,a=t.currentTime,s=t.bandwidth,o=t.duration,u=t.segmentDuration,l=t.timeUntilRebuffer,c=t.currentTimeline,f=t.syncController;var r=i.playlists.filter(function(e){return!Cd.isIncompatible(e)});var n=r.filter(Cd.isEnabled);if(!n.length){n=r.filter(function(e){return!Cd.isDisabled(e)})}var d=n.filter(Cd.hasAttribute.bind(null,"BANDWIDTH"));var h=d.map(function(e){var t=f.getSyncPoint(e,o,c,a);var i=t?1:2;var r=Cd.estimateSegmentRequestTime(u,s,e);var n=r*i-l;return{playlist:e,rebufferingImpact:n}});var p=h.filter(function(e){return e.rebufferingImpact<=0});pp(p,function(e,t){return mp(t.playlist,e.playlist)});if(p.length){return p[0]}pp(h,function(e,t){return e.rebufferingImpact-t.rebufferingImpact});return h[0]||null};var bp=function e(){var t=this.playlists.master.playlists.filter(Cd.isEnabled);pp(t,function(e,t){return mp(e,t)});var i=t.filter(function(e){return Sh(e.attributes.CODECS).videoCodec});return i[0]||null};var Tp=function e(t,i,r){for(var n in r){if(!t[n]){i.trigger({type:"usage",name:"hls-608"});var a=i.textTracks().getTrackById(n);if(a){t[n]=a}else{t[n]=i.addRemoteTextTrack({kind:"captions",id:n,label:n},false).track}}}};var Sp=function e(t){var n=t.inbandTextTracks,i=t.captionArray,a=t.timestampOffset;if(!i){return}var s=window.WebKitDataCue||window.VTTCue;i.forEach(function(e){var t=e.stream;var i=e.startTime;var r=e.endTime;if(!n[t]){return}i+=a;r+=a;n[t].addCue(new s(i,r,e.text))})};var kp=500;var wp=function e(t,i,r){if(!t||!i){return false}var n=t.segments;var a=r===n.length;return t.endList&&i.readyState==="open"&&a};var Cp=function e(t){return typeof t==="number"&&isFinite(t)};var Ep=function e(t,i,r){if(t!=="main"||!i||!r){return null}if(!r.containsAudio&&!r.containsVideo){return"Neither audio nor video found in segment."}if(i.containsVideo&&!r.containsVideo){return"Only audio found in segment when we expected video."+" We can't switch to audio only from a stream that had video."+" To get rid of this message, please add codec information to the manifest."}if(!i.containsVideo&&r.containsVideo){return"Video found in segment when we expected only audio."+" We can't switch to a stream with video from an audio only stream."+" To get rid of this message, please add codec information to the manifest."}return null};var Ap=function e(t,i,r){var n=void 0;if(t.length&&t.start(0)>0&&t.start(0)<i){n=t.start(0)}else{n=i-30}return Math.min(n,i-r)};var Lp=function e(t){var i=t.segment,r=i.start,n=i.end,a=t.playlist,s=a.mediaSequence,o=a.id,u=a.segments,l=u===undefined?[]:u,c=t.mediaIndex,f=t.timeline;return["appending ["+c+"] of ["+s+", "+(s+l.length)+"] from playlist ["+o+"]","["+r+" => "+n+"] in timeline ["+f+"]"].join(" ")};var Ip=function(e){Hf(i,e);function i(e){jf(this,i);var t=qf(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(!e){throw new TypeError("Initialization settings are required")}if(typeof e.currentTime!=="function"){throw new TypeError("No currentTime getter specified")}if(!e.mediaSource){throw new TypeError("No MediaSource specified")}t.bandwidth=e.bandwidth;t.throughput={rate:0,count:0};t.roundTrip=NaN;t.resetStats_();t.mediaIndex=null;t.hasPlayed_=e.hasPlayed;t.currentTime_=e.currentTime;t.seekable_=e.seekable;t.seeking_=e.seeking;t.duration_=e.duration;t.mediaSource_=e.mediaSource;t.hls_=e.hls;t.loaderType_=e.loaderType;t.startingMedia_=void 0;t.segmentMetadataTrack_=e.segmentMetadataTrack;t.goalBufferLength_=e.goalBufferLength;t.sourceType_=e.sourceType;t.inbandTextTracks_=e.inbandTextTracks;t.state_="INIT";t.checkBufferTimeout_=null;t.error_=void 0;t.currentTimeline_=-1;t.pendingSegment_=null;t.mimeType_=null;t.sourceUpdater_=null;t.xhrOptions_=null;t.activeInitSegmentId_=null;t.initSegments_={};t.captionParser_=new Jc;t.decrypter_=e.decrypter;t.syncController_=e.syncController;t.syncPoint_={segmentIndex:0,time:0};t.syncController_.on("syncinfoupdate",function(){return t.trigger("syncinfoupdate")});t.mediaSource_.addEventListener("sourceopen",function(){return t.ended_=false});t.fetchAtBuffer_=false;t.logger_=Kh("SegmentLoader["+t.loaderType_+"]");Object.defineProperty(t,"state",{get:function e(){return this.state_},set:function e(t){if(t!==this.state_){this.logger_(this.state_+" -> "+t);this.state_=t}}});return t}Ff(i,[{key:"resetStats_",value:function e(){this.mediaBytesTransferred=0;this.mediaRequests=0;this.mediaRequestsAborted=0;this.mediaRequestsTimedout=0;this.mediaRequestsErrored=0;this.mediaTransferDuration=0;this.mediaSecondsLoaded=0}},{key:"dispose",value:function e(){this.state="DISPOSED";this.pause();this.abort_();if(this.sourceUpdater_){this.sourceUpdater_.dispose()}this.resetStats_();this.captionParser_.reset()}},{key:"abort",value:function e(){if(this.state!=="WAITING"){if(this.pendingSegment_){this.pendingSegment_=null}return}this.abort_();this.state="READY";if(!this.paused()){this.monitorBuffer_()}}},{key:"abort_",value:function e(){if(this.pendingSegment_){this.pendingSegment_.abortRequests()}this.pendingSegment_=null}},{key:"error",value:function e(t){if(typeof t!=="undefined"){this.error_=t}this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function e(){this.ended_=true;this.pause();this.trigger("ended")}},{key:"buffered_",value:function e(){if(!this.sourceUpdater_){return Is.createTimeRanges()}return this.sourceUpdater_.buffered()}},{key:"initSegment",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!t){return null}var r=Dd(t);var n=this.initSegments_[r];if(i&&!n&&t.bytes){this.initSegments_[r]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,timescales:t.timescales,videoTrackIds:t.videoTrackIds}}return n||t}},{key:"couldBeginLoading_",value:function e(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&this.state==="INIT")&&!this.paused()}},{key:"load",value:function e(){this.monitorBuffer_();if(!this.playlist_){return}this.syncController_.setDateTimeMapping(this.playlist_);if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"){return}this.state="READY"}},{key:"init_",value:function e(){this.state="READY";this.sourceUpdater_=new Qh(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!t){return}var r=this.playlist_;var n=this.pendingSegment_;this.playlist_=t;this.xhrOptions_=i;if(!this.hasPlayed_()){t.syncInfo={mediaSequence:t.mediaSequence,time:0}}var a=null;if(r){if(r.id){a=r.id}else if(r.uri){a=r.uri}}this.logger_("playlist update ["+a+" => "+(t.id||t.uri)+"]");this.trigger("syncinfoupdate");if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!r||r.uri!==t.uri){if(this.mediaIndex!==null){this.resyncLoader()}return}var s=t.mediaSequence-r.mediaSequence;this.logger_("live window shift ["+s+"]");if(this.mediaIndex!==null){this.mediaIndex-=s}if(n){n.mediaIndex-=s;if(n.mediaIndex>=0){n.segment=t.segments[n.mediaIndex]}}this.syncController_.saveExpiredSegmentInfo(r,t)}},{key:"pause",value:function e(){if(this.checkBufferTimeout_){_.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=null}}},{key:"paused",value:function e(){return this.checkBufferTimeout_===null}},{key:"mimeType",value:function e(t,i){if(this.mimeType_){return}this.mimeType_=t;this.sourceBufferEmitter_=i;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}}},{key:"resetEverything",value:function e(t){this.ended_=false;this.resetLoader();this.remove(0,this.duration_(),t);this.captionParser_.clearAllCaptions();this.trigger("reseteverything")}},{key:"resetLoader",value:function e(){this.fetchAtBuffer_=false;this.resyncLoader()}},{key:"resyncLoader",value:function e(){this.mediaIndex=null;this.syncPoint_=null;this.abort()}},{key:"remove",value:function e(t,i,r){if(this.sourceUpdater_){this.sourceUpdater_.remove(t,i,r)}rh(t,i,this.segmentMetadataTrack_);if(this.inbandTextTracks_){for(var n in this.inbandTextTracks_){rh(t,i,this.inbandTextTracks_[n])}}}},{key:"monitorBuffer_",value:function e(){if(this.checkBufferTimeout_){_.clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=_.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function e(){if(this.state==="READY"){this.fillBuffer_()}if(this.checkBufferTimeout_){_.clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=_.setTimeout(this.monitorBufferTick_.bind(this),kp)}},{key:"fillBuffer_",value:function e(){if(this.sourceUpdater_.updating()){return}if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(!t){return}if(this.isEndOfStream_(t.mediaIndex)){this.endOfStream();return}if(t.mediaIndex===this.playlist_.segments.length-1&&this.mediaSource_.readyState==="ended"&&!this.seeking_()){return}if(t.timeline!==this.currentTimeline_||t.startOfSegment!==null&&t.startOfSegment<this.sourceUpdater_.timestampOffset()){this.syncController_.reset();t.timestampOffset=t.startOfSegment;this.captionParser_.clearAllCaptions()}this.loadSegment_(t)}},{key:"isEndOfStream_",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.playlist_;return wp(i,this.mediaSource_,t)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function e(t,i,r,n,a,s){var o=0;var u=void 0;if(t.length){o=t.end(t.length-1)}var l=Math.max(0,o-a);if(!i.segments.length){return null}if(l>=this.goalBufferLength_()){return null}if(!n&&l>=1){return null}if(s===null){r=this.getSyncSegmentCandidate_(i);return this.generateSegmentInfo_(i,r,null,true)}if(r!==null){var c=i.segments[r];if(c&&c.end){u=c.end}else{u=o}return this.generateSegmentInfo_(i,r+1,u,false)}if(this.fetchAtBuffer_){var f=Cd.getMediaInfoForTime(i,o,s.segmentIndex,s.time);r=f.mediaIndex;u=f.startTime}else{var d=Cd.getMediaInfoForTime(i,a,s.segmentIndex,s.time);r=d.mediaIndex;u=d.startTime}return this.generateSegmentInfo_(i,r,u,false)}},{key:"getSyncSegmentCandidate_",value:function e(t){var i=this;if(this.currentTimeline_===-1){return 0}var r=t.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===i.currentTimeline_});if(r.length){return r[Math.min(r.length-1,1)].segmentIndex}return Math.max(t.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function e(t,i,r,n){if(i<0||i>=t.segments.length){return null}var a=t.segments[i];return{requestId:"segment-loader-"+Math.random(),uri:a.resolvedUri,mediaIndex:i,isSyncRequest:n,startOfSegment:r,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:a.timeline,duration:a.duration,segment:a}}},{key:"abortRequestEarly_",value:function e(t){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH){return false}if(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3){return false}var i=this.currentTime_();var r=t.bandwidth;var n=this.pendingSegment_.duration;var a=Cd.estimateSegmentRequestTime(n,r,this.playlist_,t.bytesReceived);var s=eh(this.buffered_(),i,this.hls_.tech_.playbackRate())-1;if(a<=s){return false}var o=_p({master:this.hls_.playlists.master,currentTime:i,bandwidth:r,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o){return}var u=a-s;var l=u-o.rebufferingImpact;var c=.5;if(s<=Xd){c=1}if(!o.playlist||o.playlist.uri===this.playlist_.uri||l<c){return false}this.bandwidth=o.playlist.attributes.BANDWIDTH*Jh.BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return true}},{key:"handleProgress_",value:function e(t,i){if(!this.pendingSegment_||i.requestId!==this.pendingSegment_.requestId||this.abortRequestEarly_(i.stats)){return}this.trigger("progress")}},{key:"loadSegment_",value:function e(t){this.state="WAITING";this.pendingSegment_=t;this.trimBackBuffer_(t);t.abortRequests=dp(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(t),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function e(t){var i=Ap(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);if(i>0){this.remove(0,i)}}},{key:"createSimplifiedSegmentObj_",value:function e(t){var i=t.segment;var r={resolvedUri:i.resolvedUri,byterange:i.byterange,requestId:t.requestId};if(i.key){var n=i.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);r.key={resolvedUri:i.key.resolvedUri,iv:n}}if(i.map){r.map=this.initSegment(i.map)}return r}},{key:"segmentRequestFinished_",value:function e(t,i){this.mediaRequests+=1;if(i.stats){this.mediaBytesTransferred+=i.stats.bytesReceived;this.mediaTransferDuration+=i.stats.roundTripTime}if(!this.pendingSegment_){this.mediaRequestsAborted+=1;return}if(i.requestId!==this.pendingSegment_.requestId){return}if(t){this.pendingSegment_=null;this.state="READY";if(t.code===Zh.ABORTED){this.mediaRequestsAborted+=1;return}this.pause();if(t.code===Zh.TIMEOUT){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate");return}this.mediaRequestsErrored+=1;this.error(t);this.trigger("error");return}this.bandwidth=i.stats.bandwidth;this.roundTrip=i.stats.roundTripTime;if(i.map){i.map=this.initSegment(i.map,true)}this.processSegmentResponse_(i)}},{key:"processSegmentResponse_",value:function e(t){var i=this.pendingSegment_;i.bytes=t.bytes;if(t.map){i.segment.map.bytes=t.map.bytes}i.endOfAllRequests=t.endOfAllRequests;if(t.fmp4Captions){Tp(this.inbandTextTracks_,this.hls_.tech_,t.captionStreams);Sp({inbandTextTracks:this.inbandTextTracks_,captionArray:t.fmp4Captions,timestampOffset:0});this.captionParser_.clearParsedCaptions()}this.handleSegment_()}},{key:"handleSegment_",value:function e(){var t=this;if(!this.pendingSegment_){this.state="READY";return}var i=this.pendingSegment_;var r=i.segment;var n=this.syncController_.probeSegmentInfo(i);if(typeof this.startingMedia_==="undefined"&&n&&(n.containsAudio||n.containsVideo)){this.startingMedia_={containsAudio:n.containsAudio,containsVideo:n.containsVideo}}var a=Ep(this.loaderType_,this.startingMedia_,n);if(a){this.error({message:a,blacklistDuration:Infinity});this.trigger("error");return}if(i.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}if(i.timestampOffset!==null&&i.timestampOffset!==this.sourceUpdater_.timestampOffset()){this.sourceUpdater_.timestampOffset(i.timestampOffset);this.trigger("timestampoffset")}var s=this.syncController_.mappingForTimeline(i.timeline);if(s!==null){this.trigger({type:"segmenttimemapping",mapping:s})}this.state="APPENDING";if(r.map){var o=Dd(r.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==o){var u=this.initSegment(r.map);this.sourceUpdater_.appendBuffer({bytes:u.bytes},function(){t.activeInitSegmentId_=o})}}i.byteLength=i.bytes.byteLength;if(typeof r.start==="number"&&typeof r.end==="number"){this.mediaSecondsLoaded+=r.end-r.start}else{this.mediaSecondsLoaded+=r.duration}this.logger_(Lp(i));this.sourceUpdater_.appendBuffer({bytes:i.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,i.requestId)},this.handleUpdateEnd_.bind(this))}},{key:"handleVideoSegmentTimingInfo_",value:function e(t,i){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId){return}var r=this.pendingSegment_.segment;if(!r.videoTimingInfo){r.videoTimingInfo={}}r.videoTimingInfo.transmuxerPrependedSeconds=i.videoSegmentTimingInfo.prependedContentDuration||0;r.videoTimingInfo.transmuxedPresentationStart=i.videoSegmentTimingInfo.start.presentation;r.videoTimingInfo.transmuxedPresentationEnd=i.videoSegmentTimingInfo.end.presentation;r.videoTimingInfo.baseMediaDecodeTime=i.videoSegmentTimingInfo.baseMediaDecodeTime}},{key:"handleUpdateEnd_",value:function e(){if(!this.pendingSegment_){this.state="READY";if(!this.paused()){this.monitorBuffer_()}return}var t=this.pendingSegment_;var i=t.segment;var r=this.mediaIndex!==null;this.pendingSegment_=null;this.recordThroughput_(t);this.addSegmentMetadataCue_(t);this.state="READY";this.mediaIndex=t.mediaIndex;this.fetchAtBuffer_=true;this.currentTimeline_=t.timeline;this.trigger("syncinfoupdate");if(i.end&&this.currentTime_()-i.end>t.playlist.targetDuration*3){this.resetEverything();return}if(r){this.trigger("bandwidthupdate")}this.trigger("progress");if(this.isEndOfStream_(t.mediaIndex+1,t.playlist)){this.endOfStream()}if(!this.paused()){this.monitorBuffer_()}}},{key:"recordThroughput_",value:function e(t){var i=this.throughput.rate;var r=Date.now()-t.endOfAllRequests+1;var n=Math.floor(t.byteLength/r*8*1e3);this.throughput.rate+=(n-i)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function e(t){if(!this.segmentMetadataTrack_){return}var i=t.segment;var r=i.start;var n=i.end;if(!Cp(r)||!Cp(n)){return}rh(r,n,this.segmentMetadataTrack_);var a=_.WebKitDataCue||_.VTTCue;var s={custom:i.custom,dateTimeObject:i.dateTimeObject,dateTimeString:i.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.uri,start:r,end:n};var o=JSON.stringify(s);var u=new a(r,n,o);u.value=s;this.segmentMetadataTrack_.addCue(u)}}]);return i}(Is.EventTarget);var Pp=function e(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))};var Op=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)}));var Up=function(e){Hf(r,e);function r(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};jf(this,r);var i=qf(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));i.mediaSource_=null;i.subtitlesTrack_=null;return i}Ff(r,[{key:"buffered_",value:function e(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length){return Is.createTimeRanges()}var t=this.subtitlesTrack_.cues;var i=t[0].startTime;var r=t[t.length-1].startTime;return Is.createTimeRanges([[i,r]])}},{key:"initSegment",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!t){return null}var r=Dd(t);var n=this.initSegments_[r];if(i&&!n&&t.bytes){var a=Op.byteLength+t.bytes.byteLength;var s=new Uint8Array(a);s.set(t.bytes);s.set(Op,t.bytes.byteLength);this.initSegments_[r]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:s}}return n||t}},{key:"couldBeginLoading_",value:function e(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function e(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function e(t){if(typeof t==="undefined"){return this.subtitlesTrack_}this.subtitlesTrack_=t;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}return this.subtitlesTrack_}},{key:"remove",value:function e(t,i){rh(t,i,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function e(){var t=this;if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var i=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);i=this.skipEmptySegments_(i);if(!i){return}if(this.syncController_.timestampOffsetForTimeline(i.timeline)===null){var r=function e(){t.state="READY";if(!t.paused()){t.monitorBuffer_()}};this.syncController_.one("timestampoffset",r);this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(i)}},{key:"skipEmptySegments_",value:function e(t){while(t&&t.segment.empty){t=this.generateSegmentInfo_(t.playlist,t.mediaIndex+1,t.startOfSegment+t.duration,t.isSyncRequest)}return t}},{key:"handleSegment_",value:function e(){var t=this;if(!this.pendingSegment_||!this.subtitlesTrack_){this.state="READY";return}this.state="APPENDING";var i=this.pendingSegment_;var r=i.segment;if(typeof _.WebVTT!=="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var n=function e(){t.handleSegment_()};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",n);this.subtitlesTrack_.tech_.one("vttjserror",function(){t.subtitlesTrack_.tech_.off("vttjsloaded",n);t.error({message:"Error loading vtt.js"});t.state="READY";t.pause();t.trigger("error")});return}r.requested=true;try{this.parseVTTCues_(i)}catch(e){this.error({message:e.message});this.state="READY";this.pause();return this.trigger("error")}this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_);if(i.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}i.byteLength=i.bytes.byteLength;this.mediaSecondsLoaded+=r.duration;if(i.cues.length){this.remove(i.cues[0].endTime,i.cues[i.cues.length-1].endTime)}i.cues.forEach(function(e){t.subtitlesTrack_.addCue(e)});this.handleUpdateEnd_()}},{key:"parseVTTCues_",value:function e(t){var i=void 0;var r=false;if(typeof _.TextDecoder==="function"){i=new _.TextDecoder("utf8")}else{i=_.WebVTT.StringDecoder();r=true}var n=new _.WebVTT.Parser(_,_.vttjs,i);t.cues=[];t.timestampmap={MPEGTS:0,LOCAL:0};n.oncue=t.cues.push.bind(t.cues);n.ontimestampmap=function(e){return t.timestampmap=e};n.onparsingerror=function(e){Is.log.warn("Error encountered when parsing cues: "+e.message)};if(t.segment.map){var a=t.segment.map.bytes;if(r){a=Pp(a)}n.parse(a)}var s=t.bytes;if(r){s=Pp(s)}n.parse(s);n.flush()}},{key:"updateTimeMapping_",value:function e(t,i,r){var n=t.segment;if(!i){return}if(!t.cues.length){n.empty=true;return}var a=t.timestampmap;var s=a.MPEGTS/9e4-a.LOCAL+i.mapping;t.cues.forEach(function(e){e.startTime+=s;e.endTime+=s});if(!r.syncInfo){var o=t.cues[0].startTime;var u=t.cues[t.cues.length-1].startTime;r.syncInfo={mediaSequence:r.mediaSequence+t.mediaIndex,time:Math.min(o,u-n.duration)}}}}]);return r}(Ip);var Dp=function e(t,i){var r=t.cues;for(var n=0;n<r.length;n++){var a=r[n];if(i>=a.adStartTime&&i<=a.adEndTime){return a}}return null};var xp=function e(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!t.segments){return}var n=r;var a=void 0;for(var s=0;s<t.segments.length;s++){var o=t.segments[s];if(!a){a=Dp(i,n+o.duration/2)}if(a){if("cueIn"in o){a.endTime=n;a.adEndTime=n;n+=o.duration;a=null;continue}if(n<a.endTime){n+=o.duration;continue}a.endTime+=o.duration}else{if("cueOut"in o){a=new _.VTTCue(n,n+o.duration,o.cueOut);a.adStartTime=n;a.adEndTime=n+parseFloat(o.cueOut);i.addCue(a)}if("cueOutCont"in o){var u=void 0;var l=void 0;var c=o.cueOutCont.split("/").map(parseFloat);var f=zf(c,2);u=f[0];l=f[1];a=new _.VTTCue(n,n+o.duration,"");a.adStartTime=n-u;a.adEndTime=a.adStartTime+l;i.addCue(a)}}n+=o.duration}};var Rp=kf.inspect;var Mp=[{name:"VOD",run:function e(t,i,r,n,a){if(r!==Infinity){var s={time:0,segmentIndex:0};return s}return null}},{name:"ProgramDateTime",run:function e(t,i,r,n,a){if(!t.datetimeToDisplayTime){return null}var s=i.segments||[];var o=null;var u=null;a=a||0;for(var l=0;l<s.length;l++){var c=s[l];if(c.dateTimeObject){var f=c.dateTimeObject.getTime()/1e3;var d=f+t.datetimeToDisplayTime;var h=Math.abs(a-d);if(u!==null&&u<h){break}u=h;o={time:d,segmentIndex:l}}}return o}},{name:"Segment",run:function e(t,i,r,n,a){var s=i.segments||[];var o=null;var u=null;a=a||0;for(var l=0;l<s.length;l++){var c=s[l];if(c.timeline===n&&typeof c.start!=="undefined"){var f=Math.abs(a-c.start);if(u!==null&&u<f){break}if(!o||u===null||u>=f){u=f;o={time:c.start,segmentIndex:l}}}}return o}},{name:"Discontinuity",run:function e(t,i,r,n,a){var s=null;a=a||0;if(i.discontinuityStarts&&i.discontinuityStarts.length){var o=null;for(var u=0;u<i.discontinuityStarts.length;u++){var l=i.discontinuityStarts[u];var c=i.discontinuitySequence+u+1;var f=t.discontinuities[c];if(f){var d=Math.abs(a-f.time);if(o!==null&&o<d){break}if(!s||o===null||o>=d){o=d;s={time:f.time,segmentIndex:l}}}}}return s}},{name:"Playlist",run:function e(t,i,r,n,a){if(i.syncInfo){var s={time:i.syncInfo.time,segmentIndex:i.syncInfo.mediaSequence-i.mediaSequence};return s}return null}}];var Bp=function(e){Hf(t,e);function t(){jf(this,t);var e=qf(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.inspectCache_=undefined;e.timelines=[];e.discontinuities=[];e.datetimeToDisplayTime=null;e.logger_=Kh("SyncController");return e}Ff(t,[{key:"getSyncPoint",value:function e(t,i,r,n){var a=this.runStrategies_(t,i,r,n);if(!a.length){return null}return this.selectSyncPoint_(a,{key:"time",value:n})}},{key:"getExpiredTime",value:function e(t,i){if(!t||!t.segments){return null}var r=this.runStrategies_(t,i,t.discontinuitySequence,0);if(!r.length){return null}var n=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});if(n.segmentIndex>0){n.time*=-1}return Math.abs(n.time+od(t,n.segmentIndex,0))}},{key:"runStrategies_",value:function e(t,i,r,n){var a=[];for(var s=0;s<Mp.length;s++){var o=Mp[s];var u=o.run(this,t,i,r,n);if(u){u.strategy=o.name;a.push({strategy:o.name,syncPoint:u})}}return a}},{key:"selectSyncPoint_",value:function e(t,i){var r=t[0].syncPoint;var n=Math.abs(t[0].syncPoint[i.key]-i.value);var a=t[0].strategy;for(var s=1;s<t.length;s++){var o=Math.abs(t[s].syncPoint[i.key]-i.value);if(o<n){n=o;r=t[s].syncPoint;a=t[s].strategy}}this.logger_("syncPoint for ["+i.key+": "+i.value+"] chosen with strategy"+(" ["+a+"]: [time:"+r.time+",")+(" segmentIndex:"+r.segmentIndex+"]"));return r}},{key:"saveExpiredSegmentInfo",value:function e(t,i){var r=i.mediaSequence-t.mediaSequence;for(var n=r-1;n>=0;n--){var a=t.segments[n];if(a&&typeof a.start!=="undefined"){i.syncInfo={mediaSequence:t.mediaSequence+n,time:a.start};this.logger_("playlist refresh sync: [time:"+i.syncInfo.time+","+(" mediaSequence: "+i.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function e(t){if(!this.datetimeToDisplayTime&&t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var i=t.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-i}}},{key:"reset",value:function e(){this.inspectCache_=undefined}},{key:"probeSegmentInfo",value:function e(t){var i=t.segment;var r=t.playlist;var n=void 0;if(i.map){n=this.probeMp4Segment_(t)}else{n=this.probeTsSegment_(t)}if(n){if(this.calculateSegmentTimeMapping_(t,n)){this.saveDiscontinuitySyncInfo_(t);if(!r.syncInfo){r.syncInfo={mediaSequence:r.mediaSequence+t.mediaIndex,time:i.start}}}}return n}},{key:"probeMp4Segment_",value:function e(t){var i=t.segment;var r=Qo.timescale(i.map.bytes);var n=Qo.startTime(r,t.bytes);if(t.timestampOffset!==null){t.timestampOffset-=n}return{start:n,end:n+i.duration}}},{key:"probeTsSegment_",value:function e(t){var i=Rp(t.bytes,this.inspectCache_);var r=void 0;var n=void 0;if(!i){return null}if(i.video&&i.video.length===2){this.inspectCache_=i.video[1].dts;r=i.video[0].dtsTime;n=i.video[1].dtsTime}else if(i.audio&&i.audio.length===2){this.inspectCache_=i.audio[1].dts;r=i.audio[0].dtsTime;n=i.audio[1].dtsTime}var a={start:r,end:n,containsVideo:i.video&&i.video.length===2,containsAudio:i.audio&&i.audio.length===2};return a}},{key:"timestampOffsetForTimeline",value:function e(t){if(typeof this.timelines[t]==="undefined"){return null}return this.timelines[t].time}},{key:"mappingForTimeline",value:function e(t){if(typeof this.timelines[t]==="undefined"){return null}return this.timelines[t].mapping}},{key:"calculateSegmentTimeMapping_",value:function e(t,i){var r=t.segment;var n=this.timelines[t.timeline];if(t.timestampOffset!==null){n={time:t.startOfSegment,mapping:t.startOfSegment-i.start};this.timelines[t.timeline]=n;this.trigger("timestampoffset");this.logger_("time mapping for timeline "+t.timeline+": "+("[time: "+n.time+"] [mapping: "+n.mapping+"]"));r.start=t.startOfSegment;r.end=i.end+n.mapping}else if(n){r.start=i.start+n.mapping;r.end=i.end+n.mapping}else{return false}return true}},{key:"saveDiscontinuitySyncInfo_",value:function e(t){var i=t.playlist;var r=t.segment;if(r.discontinuity){this.discontinuities[r.timeline]={time:r.start,accuracy:0}}else if(i.discontinuityStarts&&i.discontinuityStarts.length){for(var n=0;n<i.discontinuityStarts.length;n++){var a=i.discontinuityStarts[n];var s=i.discontinuitySequence+n+1;var o=a-t.mediaIndex;var u=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>u){var l=void 0;if(o<0){l=r.start-od(i,t.mediaIndex,a)}else{l=r.end+od(i,t.mediaIndex+1,a)}this.discontinuities[s]={time:l,accuracy:u}}}}}}]);return t}(Is.EventTarget);var Np=new hh("./decrypter-worker.worker.js",function(e,t){var p=this;var i=function(){function l(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}var f=function e(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}};var e=function(){function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(e,t,i){if(t)r(e.prototype,t);if(i)r(e,i);return e}}();var r=function e(t,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof i)}t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(i)Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i};var n=function e(t,i){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i&&(typeof i==="object"||typeof i==="function")?i:t};var d=function e(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]];var i=t[0];var r=t[1];var n=i[4];var a=r[4];var s=void 0;var o=void 0;var u=void 0;var l=[];var c=[];var f=void 0;var d=void 0;var h=void 0;var p=void 0;var m=void 0;var v=void 0;for(s=0;s<256;s++){c[(l[s]=s<<1^(s>>7)*283)^s]=s}for(o=u=0;!n[o];o^=f||1,u=c[u]||1){p=u^u<<1^u<<2^u<<3^u<<4;p=p>>8^p&255^99;n[o]=p;a[p]=o;h=l[d=l[f=l[o]]];v=h*16843009^d*65537^f*257^o*16843008;m=l[p]*257^p*16843008;for(s=0;s<4;s++){i[s][o]=m=m<<24^m>>>8;r[s][p]=v=v<<24^v>>>8}}for(s=0;s<5;s++){i[s]=i[s].slice(0);r[s]=r[s].slice(0)}return t};var h=null;var g=function(){function c(e){f(this,c);if(!h){h=d()}this._tables=[[h[0][0].slice(),h[0][1].slice(),h[0][2].slice(),h[0][3].slice(),h[0][4].slice()],[h[1][0].slice(),h[1][1].slice(),h[1][2].slice(),h[1][3].slice(),h[1][4].slice()]];var t=void 0;var i=void 0;var r=void 0;var n=void 0;var a=void 0;var s=this._tables[0][4];var o=this._tables[1];var u=e.length;var l=1;if(u!==4&&u!==6&&u!==8){throw new Error("Invalid aes key size")}n=e.slice(0);a=[];this._key=[n,a];for(t=u;t<4*u+28;t++){r=n[t-1];if(t%u===0||u===8&&t%u===4){r=s[r>>>24]<<24^s[r>>16&255]<<16^s[r>>8&255]<<8^s[r&255];if(t%u===0){r=r<<8^r>>>24^l<<24;l=l<<1^(l>>7)*283}}n[t]=n[t-u]^r}for(i=0;t;i++,t--){r=n[i&3?t:t-4];if(t<=4||i<4){a[i]=r}else{a[i]=o[0][s[r>>>24]]^o[1][s[r>>16&255]]^o[2][s[r>>8&255]]^o[3][s[r&255]]}}}c.prototype.decrypt=function e(t,i,r,n,a,s){var o=this._key[1];var u=t^o[0];var l=n^o[1];var c=r^o[2];var f=i^o[3];var d=void 0;var h=void 0;var p=void 0;var m=o.length/4-2;var v=void 0;var g=4;var y=this._tables[1];var _=y[0];var b=y[1];var T=y[2];var S=y[3];var k=y[4];for(v=0;v<m;v++){d=_[u>>>24]^b[l>>16&255]^T[c>>8&255]^S[f&255]^o[g];h=_[l>>>24]^b[c>>16&255]^T[f>>8&255]^S[u&255]^o[g+1];p=_[c>>>24]^b[f>>16&255]^T[u>>8&255]^S[l&255]^o[g+2];f=_[f>>>24]^b[u>>16&255]^T[l>>8&255]^S[c&255]^o[g+3];g+=4;u=d;l=h;c=p}for(v=0;v<4;v++){a[(3&-v)+s]=k[u>>>24]<<24^k[l>>16&255]<<16^k[c>>8&255]<<8^k[f&255]^o[g++];d=u;u=l;l=c;c=f;f=d}};return c}();var a=function(){function e(){f(this,e);this.listeners={}}e.prototype.on=function e(t,i){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(i)};e.prototype.off=function e(t,i){if(!this.listeners[t]){return false}var r=this.listeners[t].indexOf(i);this.listeners[t].splice(r,1);return r>-1};e.prototype.trigger=function e(t){var i=this.listeners[t];if(!i){return}if(arguments.length===2){var r=i.length;for(var n=0;n<r;++n){i[n].call(this,arguments[1])}}else{var a=Array.prototype.slice.call(arguments,1);var s=i.length;for(var o=0;o<s;++o){i[o].apply(this,a)}}};e.prototype.dispose=function e(){this.listeners={}};e.prototype.pipe=function e(t){this.on("data",function(e){t.push(e)})};return e}();var c=function(t){r(i,t);function i(){f(this,i);var e=n(this,t.call(this,a));e.jobs=[];e.delay=1;e.timeout_=null;return e}i.prototype.processJob_=function e(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}else{this.timeout_=null}};i.prototype.push=function e(t){this.jobs.push(t);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}};return i}(a);var y=function e(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24};var s=function e(t,i,r){var n=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2);var a=new g(Array.prototype.slice.call(i));var s=new Uint8Array(t.byteLength);var o=new Int32Array(s.buffer);var u=void 0;var l=void 0;var c=void 0;var f=void 0;var d=void 0;var h=void 0;var p=void 0;var m=void 0;var v=void 0;u=r[0];l=r[1];c=r[2];f=r[3];for(v=0;v<n.length;v+=4){d=y(n[v]);h=y(n[v+1]);p=y(n[v+2]);m=y(n[v+3]);a.decrypt(d,h,p,m,o,v);o[v]=y(o[v]^u);o[v+1]=y(o[v+1]^l);o[v+2]=y(o[v+2]^c);o[v+3]=y(o[v+3]^f);u=d;l=h;c=p;f=m}return s};var o=function(){function u(e,t,i,r){f(this,u);var n=u.STEP;var a=new Int32Array(e.buffer);var s=new Uint8Array(e.byteLength);var o=0;this.asyncStream_=new c;this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+n),t,i,s));for(o=n;o<a.length;o+=n){i=new Uint32Array([y(a[o-4]),y(a[o-3]),y(a[o-2]),y(a[o-1])]);this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+n),t,i,s))}this.asyncStream_.push(function(){r(null,l(s))})}u.prototype.decryptChunk_=function e(t,i,r,n){return function(){var e=s(t,i,r);n.set(e,t.byteOffset)}};e(u,null,[{key:"STEP",get:function e(){return 32e3}}]);return u}();var u=function e(i){var r={};Object.keys(i).forEach(function(e){var t=i[e];if(ArrayBuffer.isView(t)){r[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}}else{r[e]=t}});return r};var t=function e(a){a.onmessage=function(e){var i=e.data;var t=new Uint8Array(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength);var r=new Uint32Array(i.key.bytes,i.key.byteOffset,i.key.byteLength/4);var n=new Uint32Array(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/4);new o(t,r,n,function(e,t){a.postMessage(u({source:i.source,decrypted:t}),[t.buffer])})}};var i=new t(p);return i}()});var jp=function e(t){var i=t.default?"main":"alternative";if(t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0){i="main-desc"}return i};var Fp=function e(t,i){t.abort();t.pause();if(i&&i.activePlaylistLoader){i.activePlaylistLoader.pause();i.activePlaylistLoader=null}};var Vp=function e(t,i){i.activePlaylistLoader=t;t.load()};var Hp=function e(o,u){return function(){var e=u.segmentLoaders,t=e[o],i=e.main,r=u.mediaTypes[o];var n=r.activeTrack();var a=r.activeGroup(n);var s=r.activePlaylistLoader;Fp(t,r);if(!a){return}if(!a.playlistLoader){if(s){i.resetEverything()}return}t.resyncLoader();Vp(a.playlistLoader,r)}};var qp=function e(o,u){return function(){var e=u.segmentLoaders,t=e[o],i=e.main,r=u.mediaTypes[o];var n=r.activeTrack();var a=r.activeGroup(n);var s=r.activePlaylistLoader;Fp(t,r);if(!a){return}if(!a.playlistLoader){i.resetEverything();return}if(s===a.playlistLoader){Vp(a.playlistLoader,r);return}if(t.track){t.track(n)}t.resetEverything();Vp(a.playlistLoader,r)}};var zp={AUDIO:function e(u,l){return function(){var e=l.segmentLoaders[u],t=l.mediaTypes[u],i=l.blacklistCurrentPlaylist;Fp(e,t);var r=t.activeTrack();var n=t.activeGroup();var a=(n.filter(function(e){return e.default})[0]||n[0]).id;var s=t.tracks[a];if(r===s){i({message:"Problem encountered loading the default audio track."});return}Is.log.warn("Problem encountered loading the alternate audio track."+"Switching back to default.");for(var o in t.tracks){t.tracks[o].enabled=t.tracks[o]===s}t.onTrackChanged()}},SUBTITLES:function e(r,n){return function(){var e=n.segmentLoaders[r],t=n.mediaTypes[r];Is.log.warn("Problem encountered loading the subtitle track."+"Disabling subtitle track.");Fp(e,t);var i=t.activeTrack();if(i){i.mode="disabled"}t.onTrackChanged()}}};var Wp={AUDIO:function e(t,i,r){if(!i){return}var n=r.tech,a=r.requestOptions,s=r.segmentLoaders[t];i.on("loadedmetadata",function(){var e=i.media();s.playlist(e,a);if(!n.paused()||e.endList&&n.preload()!=="none"){s.load()}});i.on("loadedplaylist",function(){s.playlist(i.media(),a);if(!n.paused()){s.load()}});i.on("error",zp[t](t,r))},SUBTITLES:function e(t,i,r){var n=r.tech,a=r.requestOptions,s=r.segmentLoaders[t],o=r.mediaTypes[t];i.on("loadedmetadata",function(){var e=i.media();s.playlist(e,a);s.track(o.activeTrack());if(!n.paused()||e.endList&&n.preload()!=="none"){s.load()}});i.on("loadedplaylist",function(){s.playlist(i.media(),a);if(!n.paused()){s.load()}});i.on("error",zp[t](t,r))}};var Gp=function e(t,i){return function(e){return e.attributes[t]===i}};var Xp=function e(t){return function(e){return e.resolvedUri===t}};var Yp={AUDIO:function e(t,i){var r=i.hls,n=i.sourceType,a=i.segmentLoaders[t],s=i.requestOptions,o=i.master,u=o.mediaGroups,l=o.playlists,c=i.mediaTypes[t],f=c.groups,d=c.tracks,h=i.masterPlaylistLoader;if(!u[t]||Object.keys(u[t]).length===0){u[t]={main:{default:{default:true}}}}for(var p in u[t]){if(!f[p]){f[p]=[]}var m=l.filter(Gp(t,p));for(var v in u[t][p]){var g=u[t][p][v];var y=m.filter(Xp(g.resolvedUri));if(y.length){delete g.resolvedUri}var _=void 0;if(g.resolvedUri){_=new td(g.resolvedUri,r,s)}else if(g.playlists&&n==="dash"){_=new Yh(g.playlists[0],r,s,h)}else{_=null}g=Is.mergeOptions({id:v,playlistLoader:_},g);Wp[t](t,g.playlistLoader,i);f[p].push(g);if(typeof d[v]==="undefined"){var b=new Is.AudioTrack({id:v,kind:jp(g),enabled:false,language:g.language,default:g.default,label:v});d[v]=b}}}a.on("error",zp[t](t,i))},SUBTITLES:function e(t,i){var r=i.tech,n=i.hls,a=i.sourceType,s=i.segmentLoaders[t],o=i.requestOptions,u=i.master.mediaGroups,l=i.mediaTypes[t],c=l.groups,f=l.tracks,d=i.masterPlaylistLoader;for(var h in u[t]){if(!c[h]){c[h]=[]}for(var p in u[t][h]){if(u[t][h][p].forced){continue}var m=u[t][h][p];var v=void 0;if(a==="hls"){v=new td(m.resolvedUri,n,o)}else if(a==="dash"){v=new Yh(m.playlists[0],n,o,d)}m=Is.mergeOptions({id:p,playlistLoader:v},m);Wp[t](t,m.playlistLoader,i);c[h].push(m);if(typeof f[p]==="undefined"){var g=r.addRemoteTextTrack({id:p,kind:"subtitles",default:m.default&&m.autoselect,language:m.language,label:p},false).track;f[p]=g}}}s.on("error",zp[t](t,i))},"CLOSED-CAPTIONS":function e(t,i){var r=i.tech,n=i.master.mediaGroups,a=i.mediaTypes[t],s=a.groups,o=a.tracks;for(var u in n[t]){if(!s[u]){s[u]=[]}for(var l in n[t][u]){var c=n[t][u][l];if(!c.instreamId.match(/CC\d/)){continue}s[u].push(Is.mergeOptions({id:l},c));if(typeof o[l]==="undefined"){var f=r.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default&&c.autoselect,language:c.language,label:l},false).track;o[l]=f}}}}};var Kp=function e(a,s){return function(t){var e=s.masterPlaylistLoader,i=s.mediaTypes[a].groups;var r=e.media();if(!r){return null}var n=null;if(r.attributes[a]){n=i[r.attributes[a]]}n=n||i.main;if(typeof t==="undefined"){return n}if(t===null){return null}return n.filter(function(e){return e.id===t.id})[0]||null}};var $p={AUDIO:function e(i,r){return function(){var e=r.mediaTypes[i].tracks;for(var t in e){if(e[t].enabled){return e[t]}}return null}},SUBTITLES:function e(i,r){return function(){var e=r.mediaTypes[i].tracks;for(var t in e){if(e[t].mode==="showing"){return e[t]}}return null}}};var Qp=function e(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){Yp[e](e,t)});var i=t.mediaTypes,r=t.masterPlaylistLoader,n=t.tech,a=t.hls;["AUDIO","SUBTITLES"].forEach(function(e){i[e].activeGroup=Kp(e,t);i[e].activeTrack=$p[e](e,t);i[e].onGroupChanged=Hp(e,t);i[e].onTrackChanged=qp(e,t)});var s=i.AUDIO.activeGroup();var o=(s.filter(function(e){return e.default})[0]||s[0]).id;i.AUDIO.tracks[o].enabled=true;i.AUDIO.onTrackChanged();r.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return i[e].onGroupChanged()})});var u=function e(){i.AUDIO.onTrackChanged();n.trigger({type:"usage",name:"hls-audio-change"})};n.audioTracks().addEventListener("change",u);n.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged);a.on("dispose",function(){n.audioTracks().removeEventListener("change",u);n.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)});n.clearTracks("audio");for(var l in i.AUDIO.tracks){n.audioTracks().addTrack(i.AUDIO.tracks[l])}};var Jp=function e(){var t={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:$h,activeTrack:$h,onGroupChanged:$h,onTrackChanged:$h}});return t};var Zp=60*2;var em=void 0;var tm=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"];var im=function e(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]};var rm=function(e){Hf(p,e);function p(e){jf(this,p);var t=qf(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));var i=e.url,r=e.handleManifestRedirects,n=e.withCredentials,a=e.tech,s=e.bandwidth,o=e.externHls,u=e.useCueTags,l=e.blacklistDuration,c=e.enableLowInitialPlaylist,f=e.sourceType,d=e.seekTo;if(!i){throw new Error("A non-empty playlist URL is required")}em=o;t.withCredentials=n;t.tech_=a;t.hls_=a.hls;t.seekTo_=d;t.sourceType_=f;t.useCueTags_=u;t.blacklistDuration=l;t.enableLowInitialPlaylist=c;if(t.useCueTags_){t.cueTagsTrack_=t.tech_.addTextTrack("metadata","ad-cues");t.cueTagsTrack_.inBandMetadataTrackDispatchType=""}t.requestOptions_={withCredentials:n,handleManifestRedirects:r,timeout:null};t.mediaTypes_=Jp();t.mediaSource=new Is.MediaSource;t.mediaSource.addEventListener("sourceopen",t.handleSourceOpen_.bind(t));t.seekable_=Is.createTimeRanges();t.hasPlayed_=function(){return false};t.syncController_=new Bp(e);t.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},false).track;t.decrypter_=new Np;t.inbandTextTracks_={};var h={hls:t.hls_,mediaSource:t.mediaSource,currentTime:t.tech_.currentTime.bind(t.tech_),seekable:function e(){return t.seekable()},seeking:function e(){return t.tech_.seeking()},duration:function e(){return t.mediaSource.duration},hasPlayed:function e(){return t.hasPlayed_()},goalBufferLength:function e(){return t.goalBufferLength()},bandwidth:s,syncController:t.syncController_,decrypter:t.decrypter_,sourceType:t.sourceType_,inbandTextTracks:t.inbandTextTracks_};t.masterPlaylistLoader_=t.sourceType_==="dash"?new Yh(i,t.hls_,t.requestOptions_):new td(i,t.hls_,t.requestOptions_);t.setupMasterPlaylistLoaderListeners_();t.mainSegmentLoader_=new Ip(Is.mergeOptions(h,{segmentMetadataTrack:t.segmentMetadataTrack_,loaderType:"main"}),e);t.audioSegmentLoader_=new Ip(Is.mergeOptions(h,{loaderType:"audio"}),e);t.subtitleSegmentLoader_=new Up(Is.mergeOptions(h,{loaderType:"vtt"}),e);t.setupSegmentLoaderListeners_();tm.forEach(function(e){t[e+"_"]=im.bind(t,e)});t.logger_=Kh("MPC");t.masterPlaylistLoader_.load();return t}Ff(p,[{key:"setupMasterPlaylistLoaderListeners_",value:function e(){var n=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=n.masterPlaylistLoader_.media();var t=e.targetDuration*1.5*1e3;if(wd(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.media())){n.requestOptions_.timeout=0}else{n.requestOptions_.timeout=t}if(e.endList&&n.tech_.preload()!=="none"){n.mainSegmentLoader_.playlist(e,n.requestOptions_);n.mainSegmentLoader_.load()}Qp({sourceType:n.sourceType_,segmentLoaders:{AUDIO:n.audioSegmentLoader_,SUBTITLES:n.subtitleSegmentLoader_,main:n.mainSegmentLoader_},tech:n.tech_,requestOptions:n.requestOptions_,masterPlaylistLoader:n.masterPlaylistLoader_,hls:n.hls_,master:n.master(),mediaTypes:n.mediaTypes_,blacklistCurrentPlaylist:n.blacklistCurrentPlaylist.bind(n)});n.triggerPresenceUsage_(n.master(),e);try{n.setupSourceBuffers_()}catch(e){Is.log.warn("Failed to create SourceBuffers",e);return n.mediaSource.endOfStream("decode")}n.setupFirstPlay();if(!n.mediaTypes_.AUDIO.activePlaylistLoader||n.mediaTypes_.AUDIO.activePlaylistLoader.media()){n.trigger("selectedinitialmedia")}else{n.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){n.trigger("selectedinitialmedia")})}});this.masterPlaylistLoader_.on("loadedplaylist",function(){var e=n.masterPlaylistLoader_.media();if(!e){n.excludeUnsupportedVariants_();var t=void 0;if(n.enableLowInitialPlaylist){t=n.selectInitialPlaylist()}if(!t){t=n.selectPlaylist()}n.initialMedia_=t;n.masterPlaylistLoader_.media(n.initialMedia_);return}if(n.useCueTags_){n.updateAdCues_(e)}n.mainSegmentLoader_.playlist(e,n.requestOptions_);n.updateDuration();if(!n.tech_.paused()){n.mainSegmentLoader_.load();if(n.audioSegmentLoader_){n.audioSegmentLoader_.load()}}if(!e.endList){var i=function e(){var t=n.seekable();if(t.length!==0){n.mediaSource.addSeekableRange_(t.start(0),t.end(0))}};if(n.duration()!==Infinity){var r=function e(){if(n.duration()===Infinity){i()}else{n.tech_.one("durationchange",e)}};n.tech_.one("durationchange",r)}else{i()}}});this.masterPlaylistLoader_.on("error",function(){n.blacklistCurrentPlaylist(n.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){n.mainSegmentLoader_.abort();n.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var e=n.masterPlaylistLoader_.media();var t=e.targetDuration*1.5*1e3;if(wd(n.masterPlaylistLoader_.master,n.masterPlaylistLoader_.media())){n.requestOptions_.timeout=0}else{n.requestOptions_.timeout=t}n.mainSegmentLoader_.playlist(e,n.requestOptions_);n.mainSegmentLoader_.load();n.tech_.trigger({type:"mediachange",bubbles:true})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=n.masterPlaylistLoader_.media();var t=n.stuckAtPlaylistEnd_(e);if(t){n.blacklistCurrentPlaylist({message:"Playlist no longer updating."});n.tech_.trigger("playliststuck")}});this.masterPlaylistLoader_.on("renditiondisabled",function(){n.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){n.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function e(t,i){var r=t.mediaGroups||{};var n=true;var a=Object.keys(r.AUDIO);for(var s in r.AUDIO){for(var o in r.AUDIO[s]){var u=r.AUDIO[s][o];if(!u.uri){n=false}}}if(n){this.tech_.trigger({type:"usage",name:"hls-demuxed"})}if(Object.keys(r.SUBTITLES).length){this.tech_.trigger({type:"usage",name:"hls-webvtt"})}if(em.Playlist.isAes(i)){this.tech_.trigger({type:"usage",name:"hls-aes"})}if(em.Playlist.isFmp4(i)){this.tech_.trigger({type:"usage",name:"hls-fmp4"})}if(a.length&&Object.keys(r.AUDIO[a[0]]).length>1){this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})}if(this.useCueTags_){this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}}},{key:"setupSegmentLoaderListeners_",value:function e(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=a.selectPlaylist();var t=a.masterPlaylistLoader_.media();var i=a.tech_.buffered();var r=i.length?i.end(i.length-1)-a.tech_.currentTime():0;var n=a.bufferLowWaterLine();if(!t.endList||a.duration()<Jh.MAX_BUFFER_LOW_WATER_LINE||e.attributes.BANDWIDTH<t.attributes.BANDWIDTH||r>=n){a.masterPlaylistLoader_.media(e)}a.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")});this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the "+"request without rebuffering."},Zp)});this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(e){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:e.mapping})});this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function e(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function e(){this.mainSegmentLoader_.load();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.load()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.load()}}},{key:"smoothQualityChange_",value:function e(){var t=this.selectPlaylist();if(t!==this.masterPlaylistLoader_.media()){this.masterPlaylistLoader_.media(t);this.mainSegmentLoader_.resetLoader()}}},{key:"fastQualityChange_",value:function e(){var t=this;var i=this.selectPlaylist();if(i===this.masterPlaylistLoader_.media()){return}this.masterPlaylistLoader_.media(i);this.mainSegmentLoader_.resetEverything(function(){if(Is.browser.IE_VERSION||Is.browser.IS_EDGE){t.tech_.setCurrentTime(t.tech_.currentTime()+.04)}else{t.tech_.setCurrentTime(t.tech_.currentTime())}})}},{key:"play",value:function e(){if(this.setupFirstPlay()){return}if(this.tech_.ended()){this.seekTo_(0)}if(this.hasPlayed_()){this.load()}var t=this.tech_.seekable();if(this.tech_.duration()===Infinity){if(this.tech_.currentTime()<t.start(0)){return this.seekTo_(t.end(t.length-1))}}}},{key:"setupFirstPlay",value:function e(){var t=this;var i=this.masterPlaylistLoader_.media();if(!i||this.tech_.paused()||this.hasPlayed_()){return false}if(!i.endList){var r=this.seekable();if(!r.length){return false}if(Is.browser.IE_VERSION&&this.tech_.readyState()===0){this.tech_.one("loadedmetadata",function(){t.trigger("firstplay");t.seekTo_(r.end(0));t.hasPlayed_=function(){return true}});return false}this.trigger("firstplay");this.seekTo_(r.end(0))}this.hasPlayed_=function(){return true};this.load();return true}},{key:"handleSourceOpen_",value:function e(){try{this.setupSourceBuffers_()}catch(e){Is.log.warn("Failed to create Source Buffers",e);return this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var t=this.tech_.play();if(typeof t!=="undefined"&&typeof t.then==="function"){t.then(null,function(e){})}}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function e(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo){t=t&&this.audioSegmentLoader_.ended_}else{t=this.audioSegmentLoader_.ended_}}if(!t){return}this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(e){Is.log.warn("Failed to call media source endOfStream",e)}}},{key:"stuckAtPlaylistEnd_",value:function e(t){var i=this.seekable();if(!i.length){return false}var r=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(r===null){return false}var n=em.Playlist.playlistEnd(t,r);var a=this.tech_.currentTime();var s=this.tech_.buffered();if(!s.length){return n-a<=Yd}var o=s.end(s.length-1);return o-a<=Yd&&n-o<=Yd}},{key:"blacklistCurrentPlaylist",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=arguments[1];var r=void 0;var n=void 0;r=t.playlist||this.masterPlaylistLoader_.media();i=i||t.blacklistDuration||this.blacklistDuration;if(!r){this.error=t;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var a=this.masterPlaylistLoader_.master.playlists.filter(yd).length===1;if(a){Is.log.warn("Problem encountered with the current "+"HLS playlist. Trying again since it is the final playlist.");this.tech_.trigger("retryplaylist");return this.masterPlaylistLoader_.load(a)}r.excludeUntil=Date.now()+i*1e3;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});n=this.selectPlaylist();Is.log.warn("Problem encountered with the current HLS playlist."+(t.message?" "+t.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(n)}},{key:"pauseLoading",value:function e(){this.mainSegmentLoader_.pause();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.pause()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.pause()}}},{key:"setCurrentTime",value:function e(t){var i=$d(this.tech_.buffered(),t);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())){return 0}if(!this.masterPlaylistLoader_.media().segments){return 0}if(i&&i.length){return t}this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.resetEverything();this.audioSegmentLoader_.abort()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.resetEverything();this.subtitleSegmentLoader_.abort()}this.load()}},{key:"duration",value:function e(){if(!this.masterPlaylistLoader_){return 0}if(this.mediaSource){return this.mediaSource.duration}return em.Playlist.duration(this.masterPlaylistLoader_.media())}},{key:"seekable",value:function e(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function e(){var t=void 0;var i=void 0;if(!this.masterPlaylistLoader_){return}var r=this.masterPlaylistLoader_.media();if(!r){return}var n=this.syncController_.getExpiredTime(r,this.mediaSource.duration);if(n===null){return}t=em.Playlist.seekable(r,n);if(t.length===0){return}if(this.mediaTypes_.AUDIO.activePlaylistLoader){r=this.mediaTypes_.AUDIO.activePlaylistLoader.media();n=this.syncController_.getExpiredTime(r,this.mediaSource.duration);if(n===null){return}i=em.Playlist.seekable(r,n);if(i.length===0){return}}var a=void 0;var s=void 0;if(this.seekable_&&this.seekable_.length){a=this.seekable_.end(0);s=this.seekable_.start(0)}if(!i){this.seekable_=t}else if(i.start(0)>t.end(0)||t.start(0)>i.end(0)){this.seekable_=t}else{this.seekable_=Is.createTimeRanges([[i.start(0)>t.start(0)?i.start(0):t.start(0),i.end(0)<t.end(0)?i.end(0):t.end(0)]])}if(this.seekable_&&this.seekable_.length){if(this.seekable_.end(0)===a&&this.seekable_.start(0)===s){return}}this.logger_("seekable updated ["+Zd(this.seekable_)+"]");this.tech_.trigger("seekablechanged")}},{key:"updateDuration",value:function e(){var t=this;var i=this.mediaSource.duration;var r=em.Playlist.duration(this.masterPlaylistLoader_.media());var n=this.tech_.buffered();var a=function e(){t.logger_("Setting duration from "+t.mediaSource.duration+" => "+r);try{t.mediaSource.duration=r}catch(e){Is.log.warn("Failed to set media source duration",e)}t.tech_.trigger("durationchange");t.mediaSource.removeEventListener("sourceopen",e)};if(n.length>0){r=Math.max(r,n.end(n.length-1))}if(i!==r){if(this.mediaSource.readyState!=="open"){this.mediaSource.addEventListener("sourceopen",a)}else{a()}}}},{key:"dispose",value:function e(){var r=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(e){var t=r.mediaTypes_[e].groups;for(var i in t){t[i].forEach(function(e){if(e.playlistLoader){e.playlistLoader.dispose()}})}});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function e(){return this.masterPlaylistLoader_.master}},{key:"media",value:function e(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function e(){var t=this.masterPlaylistLoader_.media();var i=void 0;if(!t||this.mediaSource.readyState!=="open"){return}i=Lh(this.masterPlaylistLoader_.master,t);if(i.length<1){this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri;return this.mediaSource.endOfStream("decode")}this.configureLoaderMimeTypes_(i);this.excludeIncompatibleVariants_(t)}},{key:"configureLoaderMimeTypes_",value:function e(t){var i=t.length>1&&t[0].indexOf(",")===-1&&t[0]!==t[1]?new Is.EventTarget:null;this.mainSegmentLoader_.mimeType(t[0],i);if(t[1]){this.audioSegmentLoader_.mimeType(t[1],i)}}},{key:"excludeUnsupportedVariants_",value:function e(){this.master().playlists.forEach(function(e){if(e.attributes.CODECS&&_.MediaSource&&_.MediaSource.isTypeSupported&&!_.MediaSource.isTypeSupported('video/mp4; codecs="'+kh(e.attributes.CODECS)+'"')){e.excludeUntil=Infinity}})}},{key:"excludeIncompatibleVariants_",value:function e(t){var i=2;var r=null;var n=void 0;if(t.attributes.CODECS){n=Sh(t.attributes.CODECS);r=n.videoCodec;i=n.codecCount}this.master().playlists.forEach(function(e){var t={codecCount:2,videoCodec:null};if(e.attributes.CODECS){t=Sh(e.attributes.CODECS)}if(t.codecCount!==i){e.excludeUntil=Infinity}if(t.videoCodec!==r){e.excludeUntil=Infinity}})}},{key:"updateAdCues_",value:function e(t){var i=0;var r=this.seekable();if(r.length){i=r.start(0)}xp(t,this.cueTagsTrack_,i)}},{key:"goalBufferLength",value:function e(){var t=this.tech_.currentTime();var i=Jh.GOAL_BUFFER_LENGTH;var r=Jh.GOAL_BUFFER_LENGTH_RATE;var n=Math.max(i,Jh.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+t*r,n)}},{key:"bufferLowWaterLine",value:function e(){var t=this.tech_.currentTime();var i=Jh.BUFFER_LOW_WATER_LINE;var r=Jh.BUFFER_LOW_WATER_LINE_RATE;var n=Math.max(i,Jh.MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+t*r,n)}}]);return p}(Is.EventTarget);var nm=function e(n,a,s){return function(e){var t=n.master.playlists[a];var i=gd(t);var r=yd(t);if(typeof e==="undefined"){return r}if(e){delete t.disabled}else{t.disabled=true}if(e!==r&&!i){s();if(e){n.trigger("renditionenabled")}else{n.trigger("renditiondisabled")}}return e}};var am=function e(t,i,r){jf(this,e);var n=t.masterPlaylistController_,a=t.options_.smoothQualityChange;var s=a?"smooth":"fast";var o=n[s+"QualityChange_"].bind(n);if(i.attributes.RESOLUTION){var u=i.attributes.RESOLUTION;this.width=u.width;this.height=u.height}this.bandwidth=i.attributes.BANDWIDTH;this.id=r;this.enabled=nm(t.playlists,i.uri,o)};var sm=function e(i){var t=i.playlists;i.representations=function(){return t.master.playlists.filter(function(e){return!gd(e)}).map(function(e,t){return new am(i,e,e.uri)})}};var om=["seeking","seeked","pause","playing","error"];var um=function(){function s(e){var t=this;jf(this,s);this.tech_=e.tech;this.seekable=e.seekable;this.seekTo=e.seekTo;this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow;this.media=e.media;this.consecutiveUpdates=0;this.lastRecordedTime=null;this.timer_=null;this.checkCurrentTimeTimeout_=null;this.logger_=Kh("PlaybackWatcher");this.logger_("initialize");var i=function e(){return t.monitorCurrentTime_()};var r=function e(){return t.techWaiting_()};var n=function e(){return t.cancelTimer_()};var a=function e(){return t.fixesBadSeeks_()};this.tech_.on("seekablechanged",a);this.tech_.on("waiting",r);this.tech_.on(om,n);this.tech_.on("canplay",i);this.dispose=function(){t.logger_("dispose");t.tech_.off("seekablechanged",a);t.tech_.off("waiting",r);t.tech_.off(om,n);t.tech_.off("canplay",i);if(t.checkCurrentTimeTimeout_){_.clearTimeout(t.checkCurrentTimeTimeout_)}t.cancelTimer_()}}Ff(s,[{key:"monitorCurrentTime_",value:function e(){this.checkCurrentTime_();if(this.checkCurrentTimeTimeout_){_.clearTimeout(this.checkCurrentTimeTimeout_)}this.checkCurrentTimeTimeout_=_.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function e(){if(this.tech_.seeking()&&this.fixesBadSeeks_()){this.consecutiveUpdates=0;this.lastRecordedTime=this.tech_.currentTime();return}if(this.tech_.paused()||this.tech_.seeking()){return}var t=this.tech_.currentTime();var i=this.tech_.buffered();if(this.lastRecordedTime===t&&(!i.length||t+Yd>=i.end(i.length-1))){return this.techWaiting_()}if(this.consecutiveUpdates>=5&&t===this.lastRecordedTime){this.consecutiveUpdates++;this.waiting_()}else if(t===this.lastRecordedTime){this.consecutiveUpdates++}else{this.consecutiveUpdates=0;this.lastRecordedTime=t}}},{key:"cancelTimer_",value:function e(){this.consecutiveUpdates=0;if(this.timer_){this.logger_("cancelTimer_");clearTimeout(this.timer_)}this.timer_=null}},{key:"fixesBadSeeks_",value:function e(){var t=this.tech_.seeking();if(!t){return false}var i=this.seekable();var r=this.tech_.currentTime();var n=this.afterSeekableWindow_(i,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow);var a=void 0;if(n){var s=i.end(i.length-1);a=s}if(this.beforeSeekableWindow_(i,r)){var o=i.start(0);a=o+Yd}if(typeof a!=="undefined"){this.logger_("Trying to seek outside of seekable at time "+r+" with "+("seekable range "+Zd(i)+". Seeking to ")+(a+"."));this.seekTo(a);return true}return false}},{key:"waiting_",value:function e(){if(this.techWaiting_()){return}var t=this.tech_.currentTime();var i=this.tech_.buffered();var r=$d(i,t);if(r.length&&t+3<=r.end(0)){this.cancelTimer_();this.seekTo(t);this.logger_("Stopped at "+t+" while inside a buffered region "+("["+r.start(0)+" -> "+r.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time.");this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},{key:"techWaiting_",value:function e(){var t=this.seekable();var i=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()){return true}if(this.tech_.seeking()||this.timer_!==null){return true}if(this.beforeSeekableWindow_(t,i)){var r=t.end(t.length-1);this.logger_("Fell out of live window at time "+i+". Seeking to "+("live point (seekable end) "+r));this.cancelTimer_();this.seekTo(r);this.tech_.trigger({type:"usage",name:"hls-live-resync"});return true}var n=this.tech_.buffered();var a=Qd(n,i);if(this.videoUnderflow_(a,n,i)){this.cancelTimer_();this.seekTo(i);this.tech_.trigger({type:"usage",name:"hls-video-underflow"});return true}if(a.length>0){var s=a.start(0)-i;this.logger_("Stopped at "+i+", setting timer for "+s+", seeking "+("to "+a.start(0)));this.timer_=setTimeout(this.skipTheGap_.bind(this),s*1e3,i);return true}return false}},{key:"afterSeekableWindow_",value:function e(t,i,r){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(!t.length){return false}var a=t.end(t.length-1)+Yd;var s=!r.endList;if(s&&n){a=t.end(t.length-1)+r.targetDuration*3}if(i>a){return true}return false}},{key:"beforeSeekableWindow_",value:function e(t,i){if(t.length&&t.start(0)>0&&i<t.start(0)-Yd){return true}return false}},{key:"videoUnderflow_",value:function e(t,i,r){if(t.length===0){var n=this.gapFromVideoUnderflow_(i,r);if(n){this.logger_("Encountered a gap in video from "+n.start+" to "+n.end+". "+("Seeking to current time "+r));return true}}return false}},{key:"skipTheGap_",value:function e(t){var i=this.tech_.buffered();var r=this.tech_.currentTime();var n=Qd(i,r);this.cancelTimer_();if(n.length===0||r!==t){return}this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",t,"nextRange start:",n.start(0));this.seekTo(n.start(0)+Xd);this.tech_.trigger({type:"usage",name:"hls-gap-skip"})}},{key:"gapFromVideoUnderflow_",value:function e(t,i){var r=Jd(t);for(var n=0;n<r.length;n++){var a=r.start(n);var s=r.end(n);if(i-a<4&&i-a>2){return{start:a,end:s}}}return null}}]);return s}();var lm={errorInterval:30,getSource:function e(t){var i=this.tech({IWillNotUseThisInPlugins:true});var r=i.currentSource_;return t(r)}};var cm=function i(r,e){var t=0;var n=0;var a=Is.mergeOptions(lm,e);r.ready(function(){r.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function e(){if(n){r.currentTime(n)}};var o=function e(t){if(t===null||t===undefined){return}n=r.duration()!==Infinity&&r.currentTime()||0;r.one("loadedmetadata",s);r.src(t);r.trigger({type:"usage",name:"hls-error-reload"});r.play()};var u=function e(){if(Date.now()-t<a.errorInterval*1e3){r.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!a.getSource||typeof a.getSource!=="function"){Is.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}t=Date.now();return a.getSource.call(r,o)};var l=function e(){r.off("loadedmetadata",s);r.off("error",u);r.off("dispose",e)};var c=function e(t){l();i(r,t)};r.on("error",u);r.on("dispose",l);r.reloadSourceOnError=c};var fm=function e(t){cm(this,t)};var dm="1.9.3";Is.use("*",function(i){return{setSource:function e(t,i){i(null,t)},setCurrentTime:function e(t){if(i.vhs&&i.currentSource().src===i.vhs.source_.src){i.vhs.setCurrentTime(t)}return t},play:function e(){if(i.vhs&&i.currentSource().src===i.vhs.source_.src){i.vhs.setCurrentTime(i.tech_.currentTime())}}}});var hm={PlaylistLoader:td,Playlist:Cd,Decrypter:Mf,AsyncStream:Df,decrypt:Rf,utils:Bd,STANDARD_PLAYLIST_SELECTOR:yp,INITIAL_PLAYLIST_SELECTOR:bp,comparePlaylistBandwidth:mp,comparePlaylistResolution:vp,xhr:Ld()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(i){Object.defineProperty(hm,i,{get:function e(){Is.log.warn("using Hls."+i+" is UNSAFE be sure you know what you are doing");return Jh[i]},set:function e(t){Is.log.warn("using Hls."+i+" is UNSAFE be sure you know what you are doing");if(typeof t!=="number"||t<0){Is.log.warn("value of Hls."+i+" must be greater than or equal to 0");return}Jh[i]=t}})});var pm="videojs-vhs";var mm=function e(t){var i=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;if(i.test(t)){return"hls"}var r=/^application\/dash\+xml/i;if(r.test(t)){return"dash"}return null};var vm=function e(t,i){var r=i.media();var n=-1;for(var a=0;a<t.length;a++){if(t[a].id===r.uri){n=a;break}}t.selectedIndex_=n;t.trigger({selectedIndex:n,type:"change"})};var gm=function e(t,i){i.representations().forEach(function(e){t.addQualityLevel(e)});vm(t,i.playlists)};hm.canPlaySource=function(){return Is.log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};var ym=function e(t,i,r){if(!t){return t}var n={};for(var a in t){n[a]={audioContentType:'audio/mp4; codecs="'+r.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+i.attributes.CODECS+'"'};if(i.contentProtection&&i.contentProtection[a]&&i.contentProtection[a].pssh){n[a].pssh=i.contentProtection[a].pssh}if(typeof t[a]==="string"){n[a].url=t[a]}}return Is.mergeOptions(t,n)};var _m=function e(t){if(t.options_.sourceType!=="dash"){return}var i=Is.players[t.tech_.options_.playerId];if(i.eme){var r=ym(t.source_.keySystems,t.playlists.media(),t.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());if(r){i.currentSource().keySystems=r;if(i.eme.initializeMediaKeys){i.eme.initializeMediaKeys()}}}};var bm=function e(){if(!window.localStorage){return null}var t=window.localStorage.getItem(pm);if(!t){return null}try{return JSON.parse(t)}catch(e){return null}};var Tm=function e(t){if(!window.localStorage){return false}var i=bm();i=i?Is.mergeOptions(i,t):t;try{window.localStorage.setItem(pm,JSON.stringify(i))}catch(e){return false}return i};hm.supportsNativeHls=function(){var t=d.createElement("video");if(!Is.getTech("Html5").isSupported()){return false}var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(e){return/maybe|probably/i.test(t.canPlayType(e))})}();hm.supportsNativeDash=function(){if(!Is.getTech("Html5").isSupported()){return false}return/maybe|probably/i.test(d.createElement("video").canPlayType("application/dash+xml"))}();hm.supportsTypeNatively=function(e){if(e==="hls"){return hm.supportsNativeHls}if(e==="dash"){return hm.supportsNativeDash}return false};hm.isSupported=function(){return Is.log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};var Sm=Is.getComponent("Component");var km=function(e){Hf(a,e);function a(e,t,i){jf(this,a);var r=qf(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,i.hls));if(t.options_&&t.options_.playerId){var n=Is(t.options_.playerId);if(!n.hasOwnProperty("hls")){Object.defineProperty(n,"hls",{get:function e(){Is.log.warn("player.hls is deprecated. Use player.tech().hls instead.");t.trigger({type:"usage",name:"hls-player-access"});return r},configurable:true})}n.vhs=r;n.dash=r;r.player_=n}r.tech_=t;r.source_=e;r.stats={};r.setOptions_();if(r.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks){t.overrideNativeAudioTracks(true);t.overrideNativeVideoTracks(true)}else if(r.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks)){throw new Error("Overriding native HLS requires emulated tracks. "+"See https://git.io/vMpjB")}r.on(d,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=d.fullscreenElement||d.webkitFullscreenElement||d.mozFullScreenElement||d.msFullscreenElement;if(t&&t.contains(r.tech_.el())){r.masterPlaylistController_.smoothQualityChange_()}});r.on(r.tech_,"seeking",function(){if(this.tech_.currentTime()===0&&this.tech_.player_.loop()){this.setCurrentTime(0)}});r.on(r.tech_,"error",function(){if(this.masterPlaylistController_){this.masterPlaylistController_.pauseLoading()}});r.on(r.tech_,"play",r.play);return r}Ff(a,[{key:"setOptions_",value:function e(){var t=this;this.options_.withCredentials=this.options_.withCredentials||false;this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||false;this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions===false?false:true;this.options_.smoothQualityChange=this.options_.smoothQualityChange||false;this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage!=="undefined"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||false;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||[];if(typeof this.options_.blacklistDuration!=="number"){this.options_.blacklistDuration=5*60}if(typeof this.options_.bandwidth!=="number"){if(this.options_.useBandwidthFromLocalStorage){var i=bm();if(i&&i.bandwidth){this.options_.bandwidth=i.bandwidth;this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})}if(i&&i.throughput){this.options_.throughput=i.throughput;this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"})}}}if(typeof this.options_.bandwidth!=="number"){this.options_.bandwidth=Jh.INITIAL_BANDWIDTH}this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Jh.INITIAL_BANDWIDTH;["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects"].forEach(function(e){if(typeof t.source_[e]!=="undefined"){t.options_[e]=t.source_[e]}});this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function e(t,i){var r=this;if(!t){return}this.setOptions_();this.options_.url=this.source_.src;this.options_.tech=this.tech_;this.options_.externHls=hm;this.options_.sourceType=mm(i);this.options_.seekTo=function(e){r.tech_.setCurrentTime(e);r.setCurrentTime(e)};this.masterPlaylistController_=new rm(this.options_);this.playbackWatcher_=new um(Is.mergeOptions(this.options_,{seekable:function e(){return r.seekable()},media:function e(){return r.masterPlaylistController_.media()}}));this.masterPlaylistController_.on("error",function(){var e=Is.players[r.tech_.options_.playerId];e.error(r.masterPlaylistController_.error)});this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):hm.STANDARD_PLAYLIST_SELECTOR.bind(this);this.masterPlaylistController_.selectInitialPlaylist=hm.INITIAL_PLAYLIST_SELECTOR.bind(this);this.playlists=this.masterPlaylistController_.masterPlaylistLoader_;this.mediaSource=this.masterPlaylistController_.mediaSource;Object.defineProperties(this,{selectPlaylist:{get:function e(){return this.masterPlaylistController_.selectPlaylist},set:function e(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function e(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function e(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function e(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function e(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function e(){var t=1/(this.bandwidth||1);var i=void 0;if(this.throughput>0){i=1/this.throughput}else{i=0}var r=Math.floor(1/(t+i));return r},set:function e(){Is.log.error('The "systemBandwidth" property is read-only')}}});if(this.options_.bandwidth){this.bandwidth=this.options_.bandwidth}if(this.options_.throughput){this.throughput=this.options_.throughput}Object.defineProperties(this.stats,{bandwidth:{get:function e(){return r.bandwidth||0},enumerable:true},mediaRequests:{get:function e(){return r.masterPlaylistController_.mediaRequests_()||0},enumerable:true},mediaRequestsAborted:{get:function e(){return r.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:true},mediaRequestsTimedout:{get:function e(){return r.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:true},mediaRequestsErrored:{get:function e(){return r.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:true},mediaTransferDuration:{get:function e(){return r.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:true},mediaBytesTransferred:{get:function e(){return r.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:true},mediaSecondsLoaded:{get:function e(){return r.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:true},buffered:{get:function e(){return th(r.tech_.buffered())},enumerable:true},currentTime:{get:function e(){return r.tech_.currentTime()},enumerable:true},currentSource:{get:function e(){return r.tech_.currentSource_},enumerable:true},currentTech:{get:function e(){return r.tech_.name_},enumerable:true},duration:{get:function e(){return r.tech_.duration()},enumerable:true},master:{get:function e(){return r.playlists.master},enumerable:true},playerDimensions:{get:function e(){return r.tech_.currentDimensions()},enumerable:true},seekable:{get:function e(){return th(r.tech_.seekable())},enumerable:true},timestamp:{get:function e(){return Date.now()},enumerable:true},videoPlaybackQuality:{get:function e(){return r.tech_.getVideoPlaybackQuality()},enumerable:true}});this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));this.tech_.on("bandwidthupdate",function(){if(r.options_.useBandwidthFromLocalStorage){Tm({bandwidth:r.bandwidth,throughput:Math.round(r.throughput)})}});this.masterPlaylistController_.on("selectedinitialmedia",function(){sm(r);_m(r)});this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")});this.tech_.ready(function(){return r.setupQualityLevels_()});if(!this.tech_.el()){return}this.tech_.src(Is.URL.createObjectURL(this.masterPlaylistController_.mediaSource))}},{key:"setupQualityLevels_",value:function e(){var t=this;var i=Is.players[this.tech_.options_.playerId];if(i&&i.qualityLevels){this.qualityLevels_=i.qualityLevels();this.masterPlaylistController_.on("selectedinitialmedia",function(){gm(t.qualityLevels_,t)});this.playlists.on("mediachange",function(){vm(t.qualityLevels_,t.playlists)})}}},{key:"play",value:function e(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function e(t){this.masterPlaylistController_.setCurrentTime(t)}},{key:"duration",value:function e(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function e(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function e(){if(this.playbackWatcher_){this.playbackWatcher_.dispose()}if(this.masterPlaylistController_){this.masterPlaylistController_.dispose()}if(this.qualityLevels_){this.qualityLevels_.dispose()}if(this.player_){delete this.player_.vhs;delete this.player_.dash;delete this.player_.hls}if(this.tech_&&this.tech_.hls){delete this.tech_.hls}Vf(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function e(t,i){return Wd({playlist:this.masterPlaylistController_.media(),time:t,callback:i})}},{key:"seekToProgramTime",value:function e(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:2;return Gd({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:i})}}]);return a}(Sm);var wm={name:"videojs-http-streaming",VERSION:dm,canHandleSource:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Is.mergeOptions(Is.options,i);return wm.canPlayType(t.type,r)},handleSource:function e(t,i){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=Is.mergeOptions(Is.options,r);i.hls=new km(t,i,n);i.hls.xhr=Ld();i.hls.src(t.src,t.type);return i.hls},canPlayType:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=Is.mergeOptions(Is.options,i),n=r.hls.overrideNative;var a=mm(t);var s=a&&(!hm.supportsTypeNatively(a)||n);return s?"maybe":""}};if(typeof Is.MediaSource==="undefined"||typeof Is.URL==="undefined"){Is.MediaSource=qh;Is.URL=zh}if(qh.supportsNativeMediaSources()){Is.getTech("Html5").registerSourceHandler(wm,0)}Is.HlsHandler=km;Is.HlsSourceHandler=wm;Is.Hls=hm;if(!Is.use){Is.registerComponent("Hls",hm)}Is.options.hls=Is.options.hls||{};if(Is.registerPlugin){Is.registerPlugin("reloadSourceOnError",fm)}else{Is.plugin("reloadSourceOnError",fm)}return Is});!function(){!function(e){var t=e&&e.videojs;t&&(t.CDN_VERSION="7.5.4")}(window)}();(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.videojsVimeo=e()}})(function(){var o,e,t;return function i(a,u,s){function f(n,e){if(!u[n]){if(!a[n]){var t=typeof require=="function"&&require;if(!e&&t)return t(n,!0);if(c)return c(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var o=u[n]={exports:{}};a[n][0].call(o.exports,function(e){var t=a[n][1][e];return f(t?t:e)},o,o.exports,i,a,u,s)}return u[n].exports}var c=typeof require=="function"&&require;for(var e=0;e<s.length;e++)f(s[e]);return f}({1:[function(e,n,r){(function(N){(function(e,t){typeof r==="object"&&typeof n!=="undefined"?n.exports=t():typeof o==="function"&&o.amd?o(t):(e=e||self,e.Vimeo=e.Vimeo||{},e.Vimeo.Player=t())})(this,function(){"use strict";function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function e(e,t,n){if(t)r(e.prototype,t);if(n)r(e,n);return e}var t=typeof N!=="undefined"&&{}.toString.call(N)==="[object global]";function a(e,t){if(e.indexOf(t.toLowerCase())===0){return e}return"".concat(t.toLowerCase()).concat(e.substr(0,1).toUpperCase()).concat(e.substr(1))}function u(e){return Boolean(e&&e.nodeType===1&&"nodeName"in e&&e.ownerDocument&&e.ownerDocument.defaultView)}function o(e){return!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e}function l(e){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(e)}function d(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=e.id;var n=e.url;var r=t||n;if(!r){throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.")}if(o(r)){return"https://vimeo.com/".concat(r)}if(l(r)){return r.replace("http:","https:")}if(t){throw new TypeError("“".concat(t,"” is not a valid video id."))}throw new TypeError("“".concat(r,"” is not a vimeo.com url."))}var n=typeof Array.prototype.indexOf!=="undefined";var s=typeof window!=="undefined"&&typeof window.postMessage!=="undefined";if(!t&&(!n||!s)){throw new Error("Sorry, the Vimeo Player API is not available in this browser.")}var f=typeof window!=="undefined"?window:typeof N!=="undefined"?N:typeof self!=="undefined"?self:{};function c(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e){if(e.WeakMap){return}var o=Object.prototype.hasOwnProperty;var i=function(e,t,n){if(Object.defineProperty){Object.defineProperty(e,t,{configurable:true,writable:true,value:n})}else{e[t]=n}};e.WeakMap=function(){function e(){if(this===void 0){throw new TypeError("Constructor WeakMap requires 'new'")}i(this,"_id",t("_WeakMap"));if(arguments.length>0){throw new TypeError("WeakMap iterable is not supported")}}i(e.prototype,"delete",function(e){r(this,"delete");if(!a(e)){return false}var t=e[this._id];if(t&&t[0]===e){delete e[this._id];return true}return false});i(e.prototype,"get",function(e){r(this,"get");if(!a(e)){return void 0}var t=e[this._id];if(t&&t[0]===e){return t[1]}return void 0});i(e.prototype,"has",function(e){r(this,"has");if(!a(e)){return false}var t=e[this._id];if(t&&t[0]===e){return true}return false});i(e.prototype,"set",function(e,t){r(this,"set");if(!a(e)){throw new TypeError("Invalid value used as weak map key")}var n=e[this._id];if(n&&n[0]===e){n[1]=t;return this}i(e,this._id,[e,t]);return this});function r(e,t){if(!a(e)||!o.call(e,"_id")){throw new TypeError(t+" method called on incompatible receiver "+typeof e)}}function t(e){return e+"_"+n()+"."+n()}function n(){return Math.random().toString().substring(2)}i(e,"_polyfill",true);return e}();function a(e){return Object(e)===e}})(typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof f!=="undefined"?f:f);var p=c(function(o){(function e(t,n,r){n[t]=n[t]||r();if(o.exports){o.exports=n[t]}})("Promise",typeof f!="undefined"?f:f,function e(){var t,n,r,i=Object.prototype.toString,o=typeof setImmediate!="undefined"?function e(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{});t=function e(t,n,r,o){return Object.defineProperty(t,n,{value:r,writable:true,configurable:o!==false})}}catch(e){t=function e(t,n,r){t[n]=r;return t}}r=function e(){var r,o,i;function a(e,t){this.fn=e;this.self=t;this.next=void 0}return{add:function e(t,n){i=new a(t,n);if(o){o.next=i}else{r=i}o=i;i=void 0},drain:function e(){var t=r;r=o=n=void 0;while(t){t.fn.call(t.self);t=t.next}}}}();function a(e,t){r.add(e,t);if(!n){n=o(r.drain)}}function u(e){var t,n=typeof e;if(e!=null&&(n=="object"||n=="function")){t=e.then}return typeof t=="function"?t:false}function s(){for(var e=0;e<this.chain.length;e++){f(this,this.state===1?this.chain[e].success:this.chain[e].failure,this.chain[e])}this.chain.length=0}function f(e,t,n){var r,o;try{if(t===false){n.reject(e.msg)}else{if(t===true){r=e.msg}else{r=t.call(void 0,e.msg)}if(r===n.promise){n.reject(TypeError("Promise-chain cycle"))}else if(o=u(r)){o.call(r,n.resolve,n.reject)}else{n.resolve(r)}}}catch(e){n.reject(e)}}function c(e){var n,r=this;if(r.triggered){return}r.triggered=true;if(r.def){r=r.def}try{if(n=u(e)){a(function(){var t=new p(r);try{n.call(e,function e(){c.apply(t,arguments)},function e(){l.apply(t,arguments)})}catch(e){l.call(t,e)}})}else{r.msg=e;r.state=1;if(r.chain.length>0){a(s,r)}}}catch(e){l.call(new p(r),e)}}function l(e){var t=this;if(t.triggered){return}t.triggered=true;if(t.def){t=t.def}t.msg=e;t.state=2;if(t.chain.length>0){a(s,t)}}function d(t,r,o,i){for(var e=0;e<r.length;e++){(function e(n){t.resolve(r[n]).then(function e(t){o(n,t)},i)})(e)}}function p(e){this.def=e;this.triggered=false}function h(e){this.promise=e;this.state=0;this.triggered=false;this.chain=[];this.msg=void 0}function v(e){if(typeof e!="function"){throw TypeError("Not a function")}if(this.__NPO__!==0){throw TypeError("Not a promise")}this.__NPO__=1;var o=new h(this);this["then"]=function e(t,n){var r={success:typeof t=="function"?t:true,failure:typeof n=="function"?n:false};r.promise=new this.constructor(function e(t,n){if(typeof t!="function"||typeof n!="function"){throw TypeError("Not a function")}r.resolve=t;r.reject=n});o.chain.push(r);if(o.state!==0){a(s,o)}return r.promise};this["catch"]=function e(t){return this.then(void 0,t)};try{e.call(void 0,function e(t){c.call(o,t)},function e(t){l.call(o,t)})}catch(e){l.call(o,e)}}var y=t({},"constructor",v,false);v.prototype=y;t(y,"__NPO__",0,false);t(v,"resolve",function e(r){var t=this;if(r&&typeof r=="object"&&r.__NPO__===1){return r}return new t(function e(t,n){if(typeof t!="function"||typeof n!="function"){throw TypeError("Not a function")}t(r)})});t(v,"reject",function e(r){return new this(function e(t,n){if(typeof t!="function"||typeof n!="function"){throw TypeError("Not a function")}n(r)})});t(v,"all",function e(n){var u=this;if(i.call(n)!="[object Array]"){return u.reject(TypeError("Not an array"))}if(n.length===0){return u.resolve([])}return new u(function e(r,t){if(typeof r!="function"||typeof t!="function"){throw TypeError("Not a function")}var o=n.length,i=Array(o),a=0;d(u,n,function e(t,n){i[t]=n;if(++a===o){r(i)}},t)})});t(v,"race",function e(n){var o=this;if(i.call(n)!="[object Array]"){return o.reject(TypeError("Not an array"))}return new o(function e(r,t){if(typeof r!="function"||typeof t!="function"){throw TypeError("Not a function")}d(o,n,function e(t,n){r(n)},t)})});return v})});var h=new WeakMap;function v(e,t,n){var r=h.get(e.element)||{};if(!(t in r)){r[t]=[]}r[t].push(n);h.set(e.element,r)}function y(e,t){var n=h.get(e.element)||{};return n[t]||[]}function m(e,t,n){var r=h.get(e.element)||{};if(!r[t]){return true}if(!n){r[t]=[];h.set(e.element,r);return true}var o=r[t].indexOf(n);if(o!==-1){r[t].splice(o,1)}h.set(e.element,r);return r[t]&&r[t].length===0}function g(e,t){var n=y(e,t);if(n.length<1){return false}var r=n.shift();m(e,t,r);return r}function w(e,t){var n=h.get(e);h.set(t,n);h.delete(e)}var _=["autopause","autoplay","background","byline","color","dnt","height","id","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","title","transparent","url","width"];function b(r){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return _.reduce(function(e,t){var n=r.getAttribute("data-vimeo-".concat(t));if(n||n===""){e[t]=n===""?1:n}return e},e)}function k(e,t){var n=e.html;if(!t){throw new TypeError("An element must be provided")}if(t.getAttribute("data-vimeo-initialized")!==null){return t.querySelector("iframe")}var r=document.createElement("div");r.innerHTML=n;t.appendChild(r.firstChild);t.setAttribute("data-vimeo-initialized","true");return t.querySelector("iframe")}function E(i){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var u=arguments.length>2?arguments[2]:undefined;return new Promise(function(t,n){if(!l(i)){throw new TypeError("“".concat(i,"” is not a vimeo.com url."))}var e="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(i),"&domain=").concat(window.location.hostname);for(var r in a){if(a.hasOwnProperty(r)){e+="&".concat(r,"=").concat(encodeURIComponent(a[r]))}}var o="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;o.open("GET",e,true);o.onload=function(){if(o.status===404){n(new Error("“".concat(i,"” was not found.")));return}if(o.status===403){n(new Error("“".concat(i,"” is not embeddable.")));return}try{var e=JSON.parse(o.responseText);if(e.domain_status_code===403){k(e,u);n(new Error("“".concat(i,"” is not embeddable.")));return}t(e)}catch(e){n(e)}};o.onerror=function(){var e=o.status?" (".concat(o.status,")"):"";n(new Error("There was an error fetching the embed code from Vimeo".concat(e,".")))};o.send()})}function T(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document;var t=[].slice.call(e.querySelectorAll("[data-vimeo-id], [data-vimeo-url]"));var r=function e(t){if("console"in window&&console.error){console.error("There was an error creating an embed: ".concat(t))}};t.forEach(function(t){try{if(t.getAttribute("data-vimeo-defer")!==null){return}var e=b(t);var n=d(e);E(n,e,t).then(function(e){return k(e,t)}).catch(r)}catch(e){r(e)}})}function S(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document;if(window.VimeoPlayerResizeEmbeds_){return}window.VimeoPlayerResizeEmbeds_=true;var e=function e(t){if(!l(t.origin)){return}if(!t.data||t.data.event!=="spacechange"){return}var n=i.querySelectorAll("iframe");for(var r=0;r<n.length;r++){if(n[r].contentWindow!==t.source){continue}var o=n[r].parentElement;o.style.paddingBottom="".concat(t.data.data[0].bottom,"px");break}};if(window.addEventListener){window.addEventListener("message",e,false)}else if(window.attachEvent){window.attachEvent("onmessage",e)}}function j(e){if(typeof e==="string"){try{e=JSON.parse(e)}catch(e){console.warn(e);return{}}}return e}function x(e,t,n){if(!e.element.contentWindow||!e.element.contentWindow.postMessage){return}var r={method:t};if(n!==undefined){r.value=n}var o=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));if(o>=8&&o<10){r=JSON.stringify(r)}e.element.contentWindow.postMessage(r,e.origin)}function P(n,r){r=j(r);var e=[];var t;if(r.event){if(r.event==="error"){var o=y(n,r.data.method);o.forEach(function(e){var t=new Error(r.data.message);t.name=r.data.name;e.reject(t);m(n,r.data.method,e)})}e=y(n,"event:".concat(r.event));t=r.data}else if(r.method){var i=g(n,r.method);if(i){e.push(i);t=r.value}}e.forEach(function(e){try{if(typeof e==="function"){e.call(n,t);return}e.resolve(t)}catch(e){}})}var M=new WeakMap;var V=new WeakMap;var C=function(){function o(a){var c=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};i(this,o);if(window.jQuery&&a instanceof jQuery){if(a.length>1&&window.console&&console.warn){console.warn("A jQuery object with multiple elements was passed, using the first element.")}a=a[0]}if(typeof document!=="undefined"&&typeof a==="string"){a=document.getElementById(a)}if(!u(a)){throw new TypeError("You must pass either a valid element or a valid id.")}var r=a.ownerDocument.defaultView;if(a.nodeName!=="IFRAME"){var e=a.querySelector("iframe");if(e){a=e}}if(a.nodeName==="IFRAME"&&!l(a.getAttribute("src")||"")){throw new Error("The player element passed isn’t a Vimeo embed.")}if(M.has(a)){return M.get(a)}this.element=a;this.origin="*";var t=new p(function(s,f){var e=function e(t){if(!l(t.origin)||c.element.contentWindow!==t.source){return}if(c.origin==="*"){c.origin=t.origin}var n=j(t.data);var r=n&&n.event==="error";var o=r&&n.data&&n.data.method==="ready";if(o){var i=new Error(n.data.message);i.name=n.data.name;f(i);return}var a=n&&n.event==="ready";var u=n&&n.method==="ping";if(a||u){c.element.setAttribute("data-ready","true");s();return}P(c,n)};if(r.addEventListener){r.addEventListener("message",e,false)}else if(r.attachEvent){r.attachEvent("onmessage",e)}if(c.element.nodeName!=="IFRAME"){var o=b(a,n);var i=d(o);var t=E(i,o,a);t.then(function(e){var t=k(e,a);c.element=t;c._originalElement=a;w(a,t);M.set(c.element,c);return e}).catch(function(e){var t=document.createElement("iframe");t.setAttribute("allowFullScreen","");t.setAttribute("webkitallowfullscreen","");t.setAttribute("mozallowfullscreen","");t.setAttribute("allow","autoplay; fullscreen");i=i.replace("vimeo.com","player.vimeo.com/video");t.src=i+"?"+jQuery.param(o);var n={type:"video",version:"1.0",provider_name:"Vimeo",provider_url:"https://vimeo.com/",domain_status_code:200,html:t.outerHTML};var r=k(n,a);c.element=r;c._originalElement=a;w(a,r);M.set(c.element,c);return n})}});V.set(this,t);M.set(this.element,this);if(this.element.nodeName==="IFRAME"){x(this,"ping")}return this}e(o,[{key:"callMethod",value:function e(n){var r=this;var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new p(function(e,t){return r.ready().then(function(){v(r,n,{resolve:e,reject:t});x(r,n,o)}).catch(t)})}},{key:"get",value:function e(n){var r=this;return new p(function(e,t){n=a(n,"get");return r.ready().then(function(){v(r,n,{resolve:e,reject:t});x(r,n)}).catch(t)})}},{key:"set",value:function e(n,r){var o=this;return new p(function(e,t){n=a(n,"set");if(r===undefined||r===null){throw new TypeError("There must be a value to set.")}return o.ready().then(function(){v(o,n,{resolve:e,reject:t});x(o,n,r)}).catch(t)})}},{key:"on",value:function e(t,n){if(!t){throw new TypeError("You must pass an event name.")}if(!n){throw new TypeError("You must pass a callback function.")}if(typeof n!=="function"){throw new TypeError("The callback must be a function.")}var r=y(this,"event:".concat(t));if(r.length===0){this.callMethod("addEventListener",t).catch(function(){})}v(this,"event:".concat(t),n)}},{key:"off",value:function e(t,n){if(!t){throw new TypeError("You must pass an event name.")}if(n&&typeof n!=="function"){throw new TypeError("The callback must be a function.")}var r=m(this,"event:".concat(t),n);if(r){this.callMethod("removeEventListener",t).catch(function(e){})}}},{key:"loadVideo",value:function e(t){return this.callMethod("loadVideo",t)}},{key:"ready",value:function e(){var t=V.get(this)||new p(function(e,t){t(new Error("Unknown player. Probably unloaded."))});return p.resolve(t)}},{key:"addCuePoint",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return this.callMethod("addCuePoint",{time:t,data:n})}},{key:"removeCuePoint",value:function e(t){return this.callMethod("removeCuePoint",t)}},{key:"enableTextTrack",value:function e(t,n){if(!t){throw new TypeError("You must pass a language.")}return this.callMethod("enableTextTrack",{language:t,kind:n})}},{key:"disableTextTrack",value:function e(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function e(){return this.callMethod("pause")}},{key:"play",value:function e(){return this.callMethod("play")}},{key:"unload",value:function e(){return this.callMethod("unload")}},{key:"destroy",value:function e(){var t=this;return new p(function(e){V.delete(t);M.delete(t.element);if(t._originalElement){M.delete(t._originalElement);t._originalElement.removeAttribute("data-vimeo-initialized")}if(t.element&&t.element.nodeName==="IFRAME"&&t.element.parentNode){t.element.parentNode.removeChild(t.element)}e()})}},{key:"getAutopause",value:function e(){return this.get("autopause")}},{key:"setAutopause",value:function e(t){return this.set("autopause",t)}},{key:"getBuffered",value:function e(){return this.get("buffered")}},{key:"getColor",value:function e(){return this.get("color")}},{key:"setColor",value:function e(t){return this.set("color",t)}},{key:"getCuePoints",value:function e(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function e(){return this.get("currentTime")}},{key:"setCurrentTime",value:function e(t){return this.set("currentTime",t)}},{key:"getDuration",value:function e(){return this.get("duration")}},{key:"getEnded",value:function e(){return this.get("ended")}},{key:"getLoop",value:function e(){return this.get("loop")}},{key:"setLoop",value:function e(t){return this.set("loop",t)}},{key:"getPaused",value:function e(){return this.get("paused")}},{key:"getPlaybackRate",value:function e(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function e(t){return this.set("playbackRate",t)}},{key:"getPlayed",value:function e(){return this.get("played")}},{key:"getSeekable",value:function e(){return this.get("seekable")}},{key:"getSeeking",value:function e(){return this.get("seeking")}},{key:"getTextTracks",value:function e(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function e(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function e(){return this.get("videoId")}},{key:"getVideoTitle",value:function e(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function e(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function e(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function e(){return this.get("videoUrl")}},{key:"getVolume",value:function e(){return this.get("volume")}},{key:"setVolume",value:function e(t){return this.set("volume",t)}}]);return o}();if(!t){T();S()}return C})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(h,e,v){(function(e){"use strict";v.__esModule=true;var t=typeof window!=="undefined"?window["videojs"]:typeof e!=="undefined"?e["videojs"]:null;var n=o(t);var r=h("@vimeo/player");var i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function s(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var f=n.default.getComponent("Component");var c=n.default.getTech("Tech");var l=false;function d(){if(l){return}l=true;var e="\n    .vjs-vimeo iframe {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n    }\n  ";var t=document.head||document.getElementsByTagName("head")[0];var n=document.createElement("style");n.type="text/css";if(n.styleSheet){n.styleSheet.cssText=e}else{n.appendChild(document.createTextNode(e))}t.appendChild(n)}var p=function(r){s(o,r);function o(e,t){a(this,o);var n=u(this,r.call(this,e,t));d();n.setPoster(e.poster);n.initVimeoPlayer();return n}o.prototype.initVimeoPlayer=function e(){var n=this;var t={url:this.options_.source.src,byline:false,portrait:false,title:false};if(typeof window.video_controls=="boolean")t.controls=window.video_controls;if(this.options_.autoplay){t.autoplay=true}if(this.options_.height){t.height=this.options_.height}if(this.options_.width){t.width=this.options_.width}if(this.options_.maxheight){t.maxheight=this.options_.maxheight}if(this.options_.maxwidth){t.maxwidth=this.options_.maxwidth}if(this.options_.loop){t.loop=this.options_.loop}if(this.options_.color){t.color=this.options_.color.replace(/^#/,"")}this._player=new i.default(this.el(),t);this.initVimeoState();this._player.on("loaded",function(){n.trigger("loadedmetadata")});["play","pause","ended","timeupdate","progress","seeked"].forEach(function(t){n._player.on(t,function(e){if(n._vimeoState.progress.duration!==e.duration){n._vimeoState.progress.duration=e.duration}if(t==="play")n.trigger("durationchange");if(t==="progress"){n._vimeoState.progress.buffered=e.seconds;n._vimeoState.progress.duration=e.duration}else{n._vimeoState.progress.seconds=e.seconds;n._vimeoState.progress.percent=e.percent;n._vimeoState.progress.duration=e.duration;if(e.seconds>n._vimeoState.progress.buffered){n._vimeoState.progress.buffered=e.seconds}}n.trigger(t)})});this._player.on("pause",function(){return n._vimeoState.playing=false});this._player.on("play",function(){n._vimeoState.playing=true;n._vimeoState.ended=false});this._player.on("ended",function(){n._vimeoState.playing=false;n._vimeoState.ended=true});this._player.on("volumechange",function(e){n._vimeoState.volume=e.volume;return n.trigger("volumechange")});this._player.on("error",function(e){return n.trigger("error",e)});this._player.on("seeking",function(e){n._vimeoState.seeking=true;return n.trigger("seeking",e)});this._player.on("seeked",function(e){n._vimeoState.seeking=false});this.triggerReady()};o.prototype.initVimeoState=function e(){var t=this._vimeoState={ended:false,playing:false,seeking:false,height:0,width:0,volume:0,progress:{seconds:0,percent:0,duration:0,buffered:0}};this._player.getCurrentTime().then(function(e){return t.progress.seconds=e});this._player.getDuration().then(function(e){return t.progress.duration=e});this._player.getPaused().then(function(e){return t.playing=!e});this._player.getVolume().then(function(e){return t.volume=e});this._player.getSeeking().then(function(e){return t.seeking=e});this._player.getVideoHeight().then(function(e){return t.height=e});this._player.getVideoWidth().then(function(e){return t.width=e})};o.prototype.createEl=function e(){var t=n.default.dom.createEl("div",{id:this.options_.techId});t.style.cssText="width:100%;height:100%;top:0;left:0;position:absolute";t.className="vjs-vimeo";return t};o.prototype.controls=function e(){return true};o.prototype.supportsFullScreen=function e(){return true};o.prototype.src=function e(){return this.options_.source};o.prototype.currentSrc=function e(){return this.options_.source.src};o.prototype.currentTime=function e(){return this._vimeoState.progress.seconds};o.prototype.setCurrentTime=function e(t){this._player.setCurrentTime(t)};o.prototype.volume=function e(){return this._vimeoState.volume};o.prototype.setVolume=function e(t){return this._player.setVolume(t)};o.prototype.duration=function e(){return this._vimeoState.progress.duration};o.prototype.buffered=function e(){var t=this._vimeoState.progress;return n.default.createTimeRange(0,t.buffered)};o.prototype.paused=function e(){return!this._vimeoState.playing};o.prototype.pause=function e(){this._player.pause()};o.prototype.play=function e(){this._player.play()};o.prototype.seeking=function e(){return this._vimeoState.seeking};o.prototype.muted=function e(){return this._vimeoState.volume===0};o.prototype.ended=function e(){return this._vimeoState.ended};o.prototype.videoHeight=function e(){return this._vimeoState.height};o.prototype.videoWidth=function e(){return this._vimeoState.width};o.prototype.playbackRate=function e(){return this._player.getPlaybackRate()};return o}(c);p.prototype.featuresTimeupdateEvents=true;p.isSupported=function(){return true};c.withSourceHandlers(p);p.nativeSourceHandler={};p.nativeSourceHandler.canPlayType=function(e){if(e==="video/vimeo"){return"maybe"}return""};p.nativeSourceHandler.canHandleSource=function(e){if(e.type){return p.nativeSourceHandler.canPlayType(e.type)}else if(e.src){return p.nativeSourceHandler.canPlayType(e.src)}return""};p.nativeSourceHandler.handleSource=function(e,t){t.src(e.src)};p.nativeSourceHandler.dispose=function(){};p.registerSourceHandler(p.nativeSourceHandler);if(typeof c.registerTech!=="undefined"){c.registerTech("Vimeo",p)}else{f.registerComponent("Vimeo",p)}p.VERSION="0.0.1";v.default=p}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"@vimeo/player":1}]},{},[2])(2)});(function(i,e){if(typeof define==="function"&&define.amd){define(["video.js"],function(t){return i.WistiaTech=e(t)})}else if(typeof module==="object"&&module.exports){module.exports=i.WistiaTech=e(require("video.js"))}else{i.WistiaTech=e(i.videojs)}})(this,function(o){"use strict";var s={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3};var e=o.getTech("Tech");var r=o.extend(e,{constructor:function(t,i){e.call(this,t,i);this.setSrc(this.options_.source.src,true)},dispose:function(){this.wistiaVideo.remove();this.el_.parentNode.removeChild(this.el_)},createEl:function(){var t=document.location.protocol==="file:"?"http:":document.location.protocol;this.wistia={};this.wistiaInfo={};this.baseUrl=t+"//fast.wistia.com/embed/iframe/";this.videoOptions=r.parseUrl(this.options_.source.src);this.videoId=this.videoOptions.videoId;this.playedId=this.options_.playerId;var i=o.dom.createEl("div",{id:this.videoId,className:this.videoOptions.classString,width:this.options_.width||"100%",height:this.options_.height||"100%"});this.wistiaScriptElement=o.dom.createEl("script",{src:t+"//fast.wistia.com/assets/external/E-v1.js"});var e=document.createElement("div");e.setAttribute("id","wistia-wrapper");e.appendChild(i);var s=document.createElement("div");s.setAttribute("class","vjs-iframe-blocker");s.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%");e.appendChild(s);i.insertBefore(this.wistiaScriptElement,i.firstChild);this.initPlayer();return e},initPlayer:function(){var i=this;var t=r.parseUrl(this.options_.source.src).videoId;i.wistiaInfo={state:s.UNSTARTED,volume:1,muted:false,muteVolume:1,time:0,duration:0,buffered:0,url:i.baseUrl+i.videoId,error:null};this.wistiaScriptElement.onload=function(){i.wistiaVideo=Wistia.api(i.videoId);window._wq=window._wq||[];var t={};t[i.videoId]=function(t){i.wistiaVideo=t;i.onLoad()};window._wq.push(t)}},ended:function(){return this.wistiaInfo.state===s.ENDED},onLoad:function(){this.wistiaInfo={state:s.UNSTARTED,volume:1,muted:false,muteVolume:1,time:0,duration:this.wistiaVideo.duration(),buffered:0,url:this.baseUrl+this.videoId,error:null};var e=this;this.wistiaVideo.hasData(function(){e.onReady()});this.wistiaVideo.embedded(function(){var t=o.getPlayers();if(t){var i=t[this.playedId];if(i&&i.controls()){var e=this.player_.el_.getElementsByTagName("video");if(e.length){e[0].style["pointerEvents"]="none"}}}}.bind(this));this.wistiaVideo.bind("pause",function(){e.onPause()});this.wistiaVideo.bind("play",function(){e.onPlay()});this.wistiaVideo.bind("seek",function(t,i){e.onSeek({seconds:t})});this.wistiaVideo.bind("secondchange",function(t){e.wistiaInfo.time=t;e.player_.trigger("timeupdate")});this.wistiaVideo.bind("end",function(t){if(e.wistiaInfo.duration-e.wistiaInfo.time<2)e.wistiaInfo.time=e.wistiaInfo.duration;this.trigger("pause");e.onFinish()});this.wistiaVideo.bind("cancelfullscreen",function(t){setInterval(function(){resize_video()},500)});this.wistiaVideo.bind("enterfullscreen",function(t){})},onReady:function(){this.isReady_=true;this.triggerReady();this.trigger("loadedmetadata");if(this.startMuted){this.setMuted(true);this.startMuted=false}this.wistiaInfo.duration=this.wistiaVideo.duration()},onLoadProgress:function(t){var i=!this.wistiaInfo.duration;this.wistiaInfo.duration=t.duration;this.wistiaInfo.buffered=t.percent;this.trigger("progress");if(i)this.trigger("durationchange")},onPlayProgress:function(t){this.wistiaInfo.time=t.seconds;this.wistiaVideo.time(this.wistiaInfo.time);this.trigger("timeupdate")},onPlay:function(){this.wistiaInfo.state=s.PLAYING;this.trigger("play")},onPause:function(){this.wistiaInfo.state=s.PAUSED;this.trigger("pause")},onFinish:function(){this.wistiaInfo.state=s.ENDED;this.trigger("ended")},onSeek:function(t){this.isSeeking=true;this.trigger("seeking");this.wistiaInfo.time=t.seconds;this.wistiaVideo.time(this.wistiaInfo.time);this.trigger("timeupdate");this.isSeeking=false;this.trigger("seeked")},onError:function(t){this.error=t;this.trigger("error")},seeking:function(){return this.isSeeking==true},error:function(){switch(this.errorNumber){case 2:return{code:"Unable to find the video"};case 5:return{code:"Error while trying to play the video"};case 100:return{code:"Unable to find the video"};case 101:case 150:return{code:"Playback on other Websites has been disabled by the video owner."}}return{code:"Wistia unknown error ("+this.errorNumber+")"}},playbackRate:function(){return this.suggestedRate?this.suggestedRate:1},setPlaybackRate:function(t){if(!this.wistiaVideo){return}var i=this.wistiaVideo.playbackRate(t);this.suggestedRate=t;this.trigger("ratechange")},src:function(t){if(t){this.setSrc({src:t})}return this.source},setSrc:function(t){if(!t||!t.src){return}this.source=t;this.videoOptions=r.parseUrl(t.src);this.wistiaVideo.replaceWith(this.videoOptions.videoId,this.videoOptions.options)},supportsFullScreen:function(){return true},enterFullScreen:function(){this.wistiaVideo.requestFullscreen();return true},exitFullScreen:function(){this.wistiaVideo.cancelFullscreen();return true},load:function(){},play:function(){this.wistiaVideo.play()},pause:function(){this.wistiaVideo.pause()},paused:function(){return this.wistiaInfo.state!==s.PLAYING&&this.wistiaInfo.state!==s.BUFFERING},currentTime:function(){return this.wistiaInfo.time||0},setCurrentTime:function(t){this.wistiaVideo.time(t);this.player_.trigger("timeupdate")},duration:function(){return this.wistiaInfo.duration||0},buffered:function(){return o.createTimeRange(0,this.wistiaInfo.buffered*this.wistiaInfo.duration||0)},volume:function(){return this.wistiaInfo.muted?this.wistiaInfo.muteVolume:this.wistiaInfo.volume},setVolume:function(t){this.wistiaInfo.volume=t;this.wistiaVideo.volume(t);this.player_.trigger("volumechange")},currentSrc:function(){return this.el_.src},muted:function(){return this.wistiaInfo.muted||false},setMuted:function(t){if(t){this.wistiaInfo.muteVolume=this.wistiaInfo.volume;this.setVolume(0)}else{this.setVolume(this.wistiaInfo.muteVolume)}this.wistiaInfo.muted=t;this.player_.trigger("volumechange")}});r.isSupported=function(){return true};r.canPlaySource=function(t){return t.type==="video/wistia"};r.parseUrl=function(t){var i={videoId:null,classes:[],classString:"",options:{}};var e={};var s=s=/^.*(wistia\.com\/)(embed\/iframe\/|medias\/)([A-z0-9]+)/;var o=t.match(s);if(o){i.videoId=o[3]}var r=[];r.push("vjs-tech");r.push("wistia_embed");r.push("wistia_async_"+i.videoId);var n={};n["wmode"]="transparent";if(t){var a=t.match(/playerColor=([#a-fA-f0-9]+)/);if(a){e.playerColor=a[1]}var u=t.match(/playbar=(true|false)/);if(u){e.playbar=u[1]}var l=t.match(/playButton=(true|false)/);if(l){e.playButton=l[1]}var d=t.match(/smallPlayButton=(true|false)/);if(d){e.smallPlayButton=d[1]}var h=t.match(/volumeControl=(true|false)/);if(h){e.volumeControl=h[1]}var c=t.match(/fullscreenButton=(true|false)/);if(c){e.fullscreenButton=c[1]}var f=t.match(/controlsVisibleOnLoad=(true|false)/);if(f){e.controls=f[1]}var m=t.match(/chromeless=(true|false)/);if(m){e.chromeless=m[1]}var p=t.match(/autoplay=(true|false)/);if(p){e.autoplay=p[1]}var v=t.match(/muted=(true|false)/);if(v){e.muted=true}var w=t.match(/volume=([0-9]+)/);if(w){e.volume=w[1]}var g=t.match(/endVideoBehavior=(loop|default|reset)/);if(g){e.endVideoBehavior=g[1]}}var y=e.playerColor;if(y&&y.substring(0,1)==="#"){e.playerColor=y.substring(1)}if(e.chromeless){n["chromeless"]=e.chromeless}if(e.playbar){n["playbar"]=e.playbar}if(e.playButton){n["playButton"]=e.playButton}if(e.smallPlayButton){n["smallPlayButton"]=e.smallPlayButton}if(e.volumeControl){n["volumeControl"]=e.volumeControl}if(e.fullscreenButton){n["fullscreenButton"]=e.fullscreenButton}if(e.controls){n["controlsVisibleOnLoad"]=e.controls}if(e.playerColor){n["playerColor"]=e.playerColor}if(e.autoplay){n["autoPlay"]=e.autoplay}if(e.volume!==false){n["volume"]=e.volume||1}if(e.muted){n["volume"]=0}if(e.loop){e.endVideoBehavior="loop"}if(e.endVideoBehavior){n["endVideoBehavior"]=e.endVideoBehavior}var I=Object.keys(n);var b=r.join(" ")+" ";for(var V=0;V<I.length;V++){var E=I[V];var B=n[E];b+=E+"="+B+"&"}b=b.replace(/&+$/,"");i.classes=r;i.classString=b;i.options=n;return i};o.registerTech("Wistia",r)});(function(t,i){if(typeof exports==="object"&&typeof module!=="undefined"){var e=require("video.js");module.exports=i(e.default||e)}else if(typeof define==="function"&&define.amd){define(["videojs"],function(e){return t.Youtube=i(e)})}else{t.Youtube=i(t.videojs)}})(this,function(t){"use strict";var s=t.browser.IS_IOS||t.browser.IS_NATIVE_ANDROID;var i=t.getTech("Tech");var r=t.extend(i,{constructor:function(e,t){i.call(this,e,t);this.setPoster(e.poster);this.setSrc(this.options_.source,true);this.setTimeout(function(){if(this.el_){this.el_.parentNode.className+=" vjs-youtube";if(s){this.el_.parentNode.className+=" vjs-youtube-mobile"}if(r.isApiReady){this.initYTPlayer()}else{r.apiReadyQueue.push(this)}}}.bind(this))},dispose:function(){if(this.ytPlayer){if(this.ytPlayer.stopVideo){this.ytPlayer.stopVideo()}if(this.ytPlayer.destroy){this.ytPlayer.destroy()}}else{var e=r.apiReadyQueue.indexOf(this);if(e!==-1){r.apiReadyQueue.splice(e,1)}}this.ytPlayer=null;this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-youtube","").replace(" vjs-youtube-mobile","");this.el_.parentNode.removeChild(this.el_);i.prototype.dispose.call(this)},createEl:function(){var e=document.createElement("div");e.setAttribute("id",this.options_.techId);e.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute");e.setAttribute("class","vjs-tech");var t=document.createElement("div");t.appendChild(e);if(!s&&!this.options_.ytControls){var i=document.createElement("div");i.setAttribute("class","vjs-iframe-blocker");i.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%");i.onclick=function(){this.pause()}.bind(this);t.appendChild(i)}return t},initYTPlayer:function(){var t={controls:0,modestbranding:1,rel:0,showinfo:0,loop:this.options_.loop?1:0};if(typeof this.options_.autohide!=="undefined"){t.autohide=this.options_.autohide}if(typeof this.options_["cc_load_policy"]!=="undefined"){t["cc_load_policy"]=this.options_["cc_load_policy"]}if(typeof this.options_.ytControls!=="undefined"){t.controls=this.options_.ytControls}if(typeof this.options_.disablekb!=="undefined"){t.disablekb=this.options_.disablekb}if(typeof this.options_.color!=="undefined"){t.color=this.options_.color}if(!t.controls){t.fs=0}else if(typeof this.options_.fs!=="undefined"){t.fs=this.options_.fs}if(this.options_.source.src.indexOf("end=")!==-1){var e=this.options_.source.src.match(/end=([0-9]*)/);this.options_.end=parseInt(e[1])}if(typeof this.options_.end!=="undefined"){t.end=this.options_.end}if(typeof this.options_.hl!=="undefined"){t.hl=this.options_.hl}else if(typeof this.options_.language!=="undefined"){t.hl=this.options_.language.substr(0,2)}if(typeof this.options_["iv_load_policy"]!=="undefined"){t["iv_load_policy"]=this.options_["iv_load_policy"]}if(typeof this.options_.list!=="undefined"){t.list=this.options_.list}else if(this.url&&typeof this.url.listId!=="undefined"){t.list=this.url.listId}if(typeof this.options_.listType!=="undefined"){t.listType=this.options_.listType}if(typeof this.options_.modestbranding!=="undefined"){t.modestbranding=this.options_.modestbranding}if(typeof this.options_.playlist!=="undefined"){t.playlist=this.options_.playlist}if(typeof this.options_.playsinline!=="undefined"){t.playsinline=this.options_.playsinline}if(typeof this.options_.rel!=="undefined"){t.rel=this.options_.rel}if(typeof this.options_.showinfo!=="undefined"){t.showinfo=this.options_.showinfo}if(this.options_.source.src.indexOf("start=")!==-1){var i=this.options_.source.src.match(/start=([0-9]*)/);this.options_.start=parseInt(i[1])}if(typeof this.options_.start!=="undefined"){t.start=this.options_.start}if(typeof this.options_.theme!=="undefined"){t.theme=this.options_.theme}if(typeof this.options_.customVars!=="undefined"){var s=this.options_.customVars;Object.keys(s).forEach(function(e){t[e]=s[e]})}this.activeVideoId=this.url?this.url.videoId:null;this.activeList=t.list;var r={videoId:this.activeVideoId,playerVars:t,events:{onReady:this.onPlayerReady.bind(this),onPlaybackQualityChange:this.onPlayerPlaybackQualityChange.bind(this),onPlaybackRateChange:this.onPlayerPlaybackRateChange.bind(this),onStateChange:this.onPlayerStateChange.bind(this),onVolumeChange:this.onPlayerVolumeChange.bind(this),onError:this.onPlayerError.bind(this)}};if(typeof this.options_.enablePrivacyEnhancedMode!=="undefined"&&this.options_.enablePrivacyEnhancedMode){r.host="https://www.youtube-nocookie.com"}this.ytPlayer=new YT.Player(this.options_.techId,r)},onPlayerReady:function(){if(this.options_.muted){this.ytPlayer.mute()}var e=this.ytPlayer.getAvailablePlaybackRates();if(e.length>1){this.featuresPlaybackRate=true}this.playerReady_=true;this.triggerReady();if(this.playOnReady){this.play()}else if(this.cueOnReady){this.cueVideoById_(this.url.videoId);this.activeVideoId=this.url.videoId}},onPlayerPlaybackQualityChange:function(){},onPlayerPlaybackRateChange:function(){this.trigger("ratechange")},onPlayerStateChange:function(e){var t=e.data;if(t===this.lastState||this.errorNumber){return}var i=this.lastState;this.lastState=t;switch(t){case-1:this.trigger("loadstart");this.trigger("loadedmetadata");this.trigger("durationchange");this.trigger("ratechange");break;case YT.PlayerState.ENDED:this.trigger("pause");this.trigger("ended");break;case YT.PlayerState.PLAYING:this.trigger("timeupdate");this.trigger("durationchange");if(this.isSeeking){this.onSeeked()}else{this.trigger("playing");this.trigger("play")}break;case YT.PlayerState.PAUSED:this.trigger("canplay");if(this.isSeeking){this.onSeeked()}else{this.trigger("pause")}break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate");this.player_.trigger("waiting");break}},onPlayerVolumeChange:function(){var e=this.volume();if(this.lastVol!=null&&this.lastVol!=e)this.trigger("volumechange");this.lastVol=e},onPlayerError:function(e){this.errorNumber=e.data;this.trigger("pause");this.trigger("error")},error:function(){var e=1e3+this.errorNumber;switch(this.errorNumber){case 5:return{code:e,message:"Error while trying to play the video"};case 2:case 100:return{code:e,message:"Unable to find the video"};case 101:case 150:return{code:e,message:"Playback on other Websites has been disabled by the video owner."}}return{code:e,message:"YouTube unknown error ("+this.errorNumber+")"}},loadVideoById_:function(e){var t={videoId:e};if(this.options_.start){t.startSeconds=this.options_.start}if(this.options_.end){t.endEnd=this.options_.end}this.ytPlayer.loadVideoById(t)},cueVideoById_:function(e){var t={videoId:e};if(this.options_.start){t.startSeconds=this.options_.start}if(this.options_.end){t.endEnd=this.options_.end}this.ytPlayer.cueVideoById(t)},src:function(e){if(e){this.setSrc({src:e})}return this.source},poster:function(){if(s){return null}return this.poster_},setPoster:function(e){this.poster_=e},setSrc:function(e){if(!e||!e.src){return}delete this.errorNumber;this.source=e;this.url=r.parseUrl(e.src);if(!this.options_.poster){if(this.url.videoId){this.poster_="https://img.youtube.com/vi/"+this.url.videoId+"/0.jpg";this.trigger("posterchange");this.checkHighResPoster()}}if(this.options_.autoplay&&!s){if(this.isReady_){this.play()}else{this.playOnReady=true}}else if(this.activeVideoId!==this.url.videoId){if(this.isReady_){this.cueVideoById_(this.url.videoId);this.activeVideoId=this.url.videoId}else{this.cueOnReady=true}}},autoplay:function(){return this.options_.autoplay},setAutoplay:function(e){this.options_.autoplay=e},loop:function(){return this.options_.loop},setLoop:function(e){this.options_.loop=e},play:function(){if(!this.url||!this.url.videoId){return}this.wasPausedBeforeSeek=false;if(this.isReady_){if(this.url.listId){if(this.activeList===this.url.listId){this.ytPlayer.playVideo()}else{this.ytPlayer.loadPlaylist(this.url.listId);this.activeList=this.url.listId}}if(this.activeVideoId===this.url.videoId){this.ytPlayer.playVideo()}else{this.loadVideoById_(this.url.videoId);this.activeVideoId=this.url.videoId}}else{this.trigger("waiting");this.playOnReady=true}},pause:function(){if(this.ytPlayer){this.ytPlayer.pauseVideo()}},paused:function(){return this.ytPlayer?this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING:true},currentTime:function(){if(this.ytPlayer){var e=this.ytPlayer.getCurrentTime();return e<1?0:e}return 0},setCurrentTime:function(e){if(this.lastState===YT.PlayerState.PAUSED){this.timeBeforeSeek=this.currentTime()}if(!this.isSeeking){this.wasPausedBeforeSeek=this.paused()}this.ytPlayer.seekTo(e,true);if(this.lastState!==YT.PlayerState.PAUSED&&this.lastState!==YT.PlayerState.ENDED){}this.isSeeking=true;this.trigger("seeking");this.trigger("timeupdate");if(this.lastState===YT.PlayerState.PAUSED&&this.timeBeforeSeek!==e){clearInterval(this.checkSeekedInPauseInterval);this.checkSeekedInPauseInterval=setInterval(function(){if(this.lastState!==YT.PlayerState.PAUSED||!this.isSeeking){clearInterval(this.checkSeekedInPauseInterval)}else if(this.currentTime()!==this.timeBeforeSeek){this.trigger("timeupdate");this.onSeeked()}}.bind(this),250)}},seeking:function(){return this.isSeeking==true},seekable:function(){if(!this.ytPlayer){return t.createTimeRange()}return t.createTimeRange(0,this.ytPlayer.getDuration())},onSeeked:function(){clearInterval(this.checkSeekedInPauseInterval);this.isSeeking=false;if(this.wasPausedBeforeSeek){this.pause()}this.trigger("seeked")},playbackRate:function(){return this.ytPlayer?this.ytPlayer.getPlaybackRate():1},setPlaybackRate:function(e){if(!this.ytPlayer){return}this.ytPlayer.setPlaybackRate(e)},duration:function(){return this.ytPlayer?this.ytPlayer.getDuration():0},currentSrc:function(){return this.source&&this.source.src},ended:function(){return this.ytPlayer?this.lastState===YT.PlayerState.ENDED:false},volume:function(){return this.ytPlayer?this.ytPlayer.getVolume()/100:1},setVolume:function(e){if(!this.ytPlayer){return}this.ytPlayer.setVolume(e*100)},muted:function(){return this.ytPlayer?this.ytPlayer.isMuted():false},videoHeight:function(){return this.ytPlayer?this.ytPlayer.getPlaybackQuality():0},setMuted:function(e){if(!this.ytPlayer){return}else{this.muted(true)}if(e){this.ytPlayer.mute()}else{this.ytPlayer.unMute()}this.setTimeout(function(){this.trigger("volumechange")},50)},buffered:function(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction){return t.createTimeRange()}var e=this.ytPlayer.getVideoLoadedFraction()*this.ytPlayer.getDuration();return t.createTimeRange(0,e)},preload:function(){},load:function(){},reset:function(){},networkState:function(){if(!this.ytPlayer){return 0}switch(this.ytPlayer.getPlayerState()){case-1:return 0;case 3:return 2;default:return 1}},readyState:function(){if(!this.ytPlayer){return 0}switch(this.ytPlayer.getPlayerState()){case-1:return 0;case 5:return 1;case 3:return 2;default:return 4}},supportsFullScreen:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled},checkHighResPoster:function(){var e="https://img.youtube.com/vi/"+this.url.videoId+"/maxresdefault.jpg";try{var t=new Image;t.onload=function(){if("naturalHeight"in t){if(t.naturalHeight<=90||t.naturalWidth<=120){return}}else if(t.height<=90||t.width<=120){return}this.poster_=e;this.trigger("posterchange")}.bind(this);t.onerror=function(){};t.src=e}catch(e){}}});r.isSupported=function(){return true};r.canPlaySource=function(e){return r.canPlayType(e.type)};r.canPlayType=function(e){return e==="video/youtube"};r.parseUrl=function(e){var t={videoId:null};var i=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;var s=e.match(i);if(s&&s[2].length===11){t.videoId=s[2]}var r=/[?&]list=([^#\&\?]+)/;s=e.match(r);if(s&&s[1]){t.listId=s[1]}return t};function e(){YT.ready(function(){r.isApiReady=true;for(var e=0;e<r.apiReadyQueue.length;++e){r.apiReadyQueue[e].initYTPlayer()}})}function o(e,t){var i=false;var s=document.createElement("script");var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(s,r);s.onload=function(){if(!i){i=true;t()}};s.onreadystatechange=function(){if(!i&&(this.readyState==="complete"||this.readyState==="loaded")){i=true;t()}};s.src=e}function n(){var e=".vjs-youtube .vjs-iframe-blocker { display: none; }"+".vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }"+".vjs-youtube .vjs-poster { background-size: cover; }"+".vjs-youtube-mobile .vjs-big-play-button { display: none; }";var t=document.head||document.getElementsByTagName("head")[0];var i=document.createElement("style");i.type="text/css";if(i.styleSheet){i.styleSheet.cssText=e}else{i.appendChild(document.createTextNode(e))}t.appendChild(i)}r.apiReadyQueue=[];if(typeof document!=="undefined"){o("https://www.youtube.com/iframe_api",e);n()}if(typeof t.registerTech!=="undefined"){t.registerTech("Youtube",r)}else{t.registerComponent("Youtube",r)}});var CryptoJS=CryptoJS||function(u,n){var t={};var r=t.lib={};var i=r.Base=function(){function n(){}return{extend:function(t){n.prototype=this;var r=new n;if(t){r.mixIn(t)}if(!r.hasOwnProperty("init")){r.init=function(){r.$super.init.apply(this,arguments)}}r.init.prototype=r;r.$super=this;return r},create:function(){var t=this.extend();t.init.apply(t,arguments);return t},init:function(){},mixIn:function(t){for(var r in t){if(t.hasOwnProperty(r)){this[r]=t[r]}}if(t.hasOwnProperty("toString")){this.toString=t.toString}},clone:function(){return this.init.prototype.extend(this)}}}();var l=r.WordArray=i.extend({init:function(t,r){t=this.words=t||[];if(r!=n){this.sigBytes=r}else{this.sigBytes=t.length*4}},toString:function(t){return(t||s).stringify(this)},concat:function(t){var r=this.words;var n=t.words;var i=this.sigBytes;var e=t.sigBytes;this.clamp();if(i%4){for(var s=0;s<e;s++){var a=n[s>>>2]>>>24-s%4*8&255;r[i+s>>>2]|=a<<24-(i+s)%4*8}}else if(n.length>65535){for(var s=0;s<e;s+=4){r[i+s>>>2]=n[s>>>2]}}else{r.push.apply(r,n)}this.sigBytes+=e;return this},clamp:function(){var t=this.words;var r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8;t.length=u.ceil(r/4)},clone:function(){var t=i.clone.call(this);t.words=this.words.slice(0);return t},random:function(t){var r=[];for(var n=0;n<t;n+=4){r.push(u.random()*4294967296|0)}return new l.init(r,t)}});var e=t.enc={};var s=e.Hex={stringify:function(t){var r=t.words;var n=t.sigBytes;var i=[];for(var e=0;e<n;e++){var s=r[e>>>2]>>>24-e%4*8&255;i.push((s>>>4).toString(16));i.push((s&15).toString(16))}return i.join("")},parse:function(t){var r=t.length;var n=[];for(var i=0;i<r;i+=2){n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4}return new l.init(n,r/2)}};var a=e.Latin1={stringify:function(t){var r=t.words;var n=t.sigBytes;var i=[];for(var e=0;e<n;e++){var s=r[e>>>2]>>>24-e%4*8&255;i.push(String.fromCharCode(s))}return i.join("")},parse:function(t){var r=t.length;var n=[];for(var i=0;i<r;i++){n[i>>>2]|=(t.charCodeAt(i)&255)<<24-i%4*8}return new l.init(n,r)}};var o=e.Utf8={stringify:function(t){try{return decodeURIComponent(escape(a.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return a.parse(unescape(encodeURIComponent(t)))}};var c=e.Base64={stringify:function(t){var r=t.words;var n=t.sigBytes;var i=this._map;t.clamp();var e=[];for(var s=0;s<n;s+=3){var a=r[s>>>2]>>>24-s%4*8&255;var o=r[s+1>>>2]>>>24-(s+1)%4*8&255;var c=r[s+2>>>2]>>>24-(s+2)%4*8&255;var h=a<<16|o<<8|c;for(var f=0;f<4&&s+f*.75<n;f++){e.push(i.charAt(h>>>6*(3-f)&63))}}var u=i.charAt(64);if(u){while(e.length%4){e.push(u)}}return e.join("")},parse:function(t){var r=t.length;var n=this._map;var i=n.charAt(64);if(i){var e=t.indexOf(i);if(e!=-1){r=e}}var s=[];var a=0;for(var o=0;o<r;o++){if(o%4){var c=n.indexOf(t.charAt(o-1))<<o%4*2;var h=n.indexOf(t.charAt(o))>>>6-o%4*2;s[a>>>2]|=(c|h)<<24-a%4*8;a++}}return l.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};var h=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new l.init;this._nDataBytes=0},_append:function(t){if(typeof t=="string"){t=o.parse(t)}this._data.concat(t);this._nDataBytes+=t.sigBytes},_process:function(t){var r=this._data;var n=r.words;var i=r.sigBytes;var e=this.blockSize;var s=e*4;var a=i/s;if(t){a=u.ceil(a)}else{a=u.max((a|0)-this._minBufferSize,0)}var o=a*e;var c=u.min(o*4,i);if(o){for(var h=0;h<o;h+=e){this._doProcessBlock(n,h)}var f=n.splice(0,o);r.sigBytes-=c}return new l.init(f,c)},clone:function(){var t=i.clone.call(this);t._data=this._data.clone();return t},_minBufferSize:0});var f=r.Hasher=h.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t);this.reset()},reset:function(){h.reset.call(this);this._doReset()},update:function(t){this._append(t);this._process();return this},finalize:function(t){if(t){this._append(t)}var r=this._doFinalize();return r},blockSize:512/32,_createHelper:function(n){return function(t,r){return new n.init(r).finalize(t)}},_createHmacHelper:function(n){return function(t,r){return new v.HMAC.init(n,r).finalize(t)}}});var v=t.algo={};var p=[];var d=v.SHA1=f.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,r){var n=this._hash.words;var i=n[0];var e=n[1];var s=n[2];var a=n[3];var o=n[4];for(var c=0;c<80;c++){if(c<16){p[c]=t[r+c]|0}else{var h=p[c-3]^p[c-8]^p[c-14]^p[c-16];p[c]=h<<1|h>>>31}var f=(i<<5|i>>>27)+o+p[c];if(c<20){f+=(e&s|~e&a)+1518500249}else if(c<40){f+=(e^s^a)+1859775393}else if(c<60){f+=(e&s|e&a|s&a)-1894007588}else{f+=(e^s^a)-899497514}o=a;a=s;s=e<<30|e>>>2;e=i;i=f}n[0]=n[0]+i|0;n[1]=n[1]+e|0;n[2]=n[2]+s|0;n[3]=n[3]+a|0;n[4]=n[4]+o|0},_doFinalize:function(){var t=this._data;var r=t.words;var n=this._nDataBytes*8;var i=t.sigBytes*8;r[i>>>5]|=128<<24-i%32;r[(i+64>>>9<<4)+14]=u.floor(n/4294967296);r[(i+64>>>9<<4)+15]=n;t.sigBytes=r.length*4;this._process();return this._hash},clone:function(){var t=f.clone.call(this);t._hash=this._hash.clone();return t}});t.SHA1=f._createHelper(d);t.HmacSHA1=f._createHmacHelper(d);return t}(Math);var CryptoJS=CryptoJS||function(o,n){var t={},r=t.lib={},i=function(){},e=r.Base={extend:function(t){i.prototype=this;var r=new i;t&&r.mixIn(t);r.hasOwnProperty("init")||(r.init=function(){r.$super.init.apply(this,arguments)});r.init.prototype=r;r.$super=this;return r},create:function(){var t=this.extend();t.init.apply(t,arguments);return t},init:function(){},mixIn:function(t){for(var r in t)t.hasOwnProperty(r)&&(this[r]=t[r]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=r.WordArray=e.extend({init:function(t,r){t=this.words=t||[];this.sigBytes=r!=n?r:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var r=this.words,n=t.words,i=this.sigBytes;t=t.sigBytes;this.clamp();if(i%4)for(var e=0;e<t;e++)r[i+e>>>2]|=(n[e>>>2]>>>24-8*(e%4)&255)<<24-8*((i+e)%4);else if(65535<n.length)for(e=0;e<t;e+=4)r[i+e>>>2]=n[e>>>2];else r.push.apply(r,n);this.sigBytes+=t;return this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-8*(r%4);t.length=o.ceil(r/4)},clone:function(){var t=e.clone.call(this);t.words=this.words.slice(0);return t},random:function(t){for(var r=[],n=0;n<t;n+=4)r.push(4294967296*o.random()|0);return new c.init(r,t)}}),s=t.enc={},a=s.Hex={stringify:function(t){var r=t.words;t=t.sigBytes;for(var n=[],i=0;i<t;i++){var e=r[i>>>2]>>>24-8*(i%4)&255;n.push((e>>>4).toString(16));n.push((e&15).toString(16))}return n.join("")},parse:function(t){for(var r=t.length,n=[],i=0;i<r;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-4*(i%8);return new c.init(n,r/2)}},h=s.Latin1={stringify:function(t){var r=t.words;t=t.sigBytes;for(var n=[],i=0;i<t;i++)n.push(String.fromCharCode(r[i>>>2]>>>24-8*(i%4)&255));return n.join("")},parse:function(t){for(var r=t.length,n=[],i=0;i<r;i++)n[i>>>2]|=(t.charCodeAt(i)&255)<<24-8*(i%4);return new c.init(n,r)}},f=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},u=r.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=new c.init;this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t));this._data.concat(t);this._nDataBytes+=t.sigBytes},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,e=this.blockSize,s=i/(4*e),s=t?o.ceil(s):o.max((s|0)-this._minBufferSize,0);t=s*e;i=o.min(4*t,i);if(t){for(var a=0;a<t;a+=e)this._doProcessBlock(n,a);a=n.splice(0,t);r.sigBytes-=i}return new c.init(a,i)},clone:function(){var t=e.clone.call(this);t._data=this._data.clone();return t},_minBufferSize:0});r.Hasher=u.extend({cfg:e.extend(),init:function(t){this.cfg=this.cfg.extend(t);this.reset()},reset:function(){u.reset.call(this);this._doReset()},update:function(t){this._append(t);this._process();return this},finalize:function(t){t&&this._append(t);return this._doFinalize()},blockSize:16,_createHelper:function(n){return function(t,r){return new n.init(r).finalize(t)}},_createHmacHelper:function(n){return function(t,r){return new l.HMAC.init(n,r).finalize(t)}}});var l=t.algo={};return t}(Math);(function(e){for(var t=CryptoJS,r=t.lib,n=r.WordArray,i=r.Hasher,r=t.algo,s=[],p=[],a=function(t){return 4294967296*(t-(t|0))|0},o=2,c=0;64>c;){var h;t:{h=o;for(var f=e.sqrt(h),u=2;u<=f;u++)if(!(h%u)){h=!1;break t}h=!0}h&&(8>c&&(s[c]=a(e.pow(o,.5))),p[c]=a(e.pow(o,1/3)),c++);o++}var d=[],r=r.SHA256=i.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(t,r){for(var n=this._hash.words,i=n[0],e=n[1],s=n[2],a=n[3],o=n[4],c=n[5],h=n[6],f=n[7],u=0;64>u;u++){if(16>u)d[u]=t[r+u]|0;else{var l=d[u-15],v=d[u-2];d[u]=((l<<25|l>>>7)^(l<<14|l>>>18)^l>>>3)+d[u-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+d[u-16]}l=f+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&c^~o&h)+p[u]+d[u];v=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&e^i&s^e&s);f=h;h=c;c=o;o=a+l|0;a=s;s=e;e=i;i=l+v|0}n[0]=n[0]+i|0;n[1]=n[1]+e|0;n[2]=n[2]+s|0;n[3]=n[3]+a|0;n[4]=n[4]+o|0;n[5]=n[5]+c|0;n[6]=n[6]+h|0;n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;r[(i+64>>>9<<4)+14]=e.floor(n/4294967296);r[(i+64>>>9<<4)+15]=n;t.sigBytes=4*r.length;this._process();return this._hash},clone:function(){var t=i.clone.call(this);t._hash=this._hash.clone();return t}});t.SHA256=i._createHelper(r);t.HmacSHA256=i._createHmacHelper(r)})(Math);(function(){var t=CryptoJS,h=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,r){t=this._hasher=new t.init;"string"==typeof r&&(r=h.parse(r));var n=t.blockSize,i=4*n;r.sigBytes>i&&(r=t.finalize(r));r.clamp();for(var e=this._oKey=r.clone(),s=this._iKey=r.clone(),a=e.words,o=s.words,c=0;c<n;c++)a[c]^=1549556828,o[c]^=909522486;e.sigBytes=s.sigBytes=i;this.reset()},reset:function(){var t=this._hasher;t.reset();t.update(this._iKey)},update:function(t){this._hasher.update(t);return this},finalize:function(t){var r=this._hasher;t=r.finalize(t);r.reset();return r.finalize(this._oKey.clone().concat(t))}})})();if(!Date.prototype.toISOString){(function(){function t(t){var e=String(t);if(e.length===1){e="0"+e}return e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}})()}function toBase64(t){if(CryptoJS&&CryptoJS.enc.Base64)return CryptoJS.enc.Base64.stringify(CryptoJS.enc.Latin1.parse(t));else return Base64.encode(t)}function toSHA1(t){if(CryptoJS&&CryptoJS.SHA1)return CryptoJS.SHA1(t).toString();else return Crypto.util.bytesToHex(Crypto.SHA1(t,{asBytes:true}))}function toSHA256(t){if(Object.prototype.toString.call(t)!=="[object ArrayBuffer]"){return CryptoJS.SHA256(t).toString(CryptoJS.enc.Hex)}var e=new Uint8Array(t);var n=[];for(var r=0;r<e.length;r+=4){n.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])}return CryptoJS.SHA256(CryptoJS.lib.WordArray.create(n,e.length)).toString(CryptoJS.enc.Hex)}function isDate(t){if(Object.prototype.toString.call(t)==="[object Date]")var e=t;else var e=new Date(t);if(Object.prototype.toString.call(e)==="[object Date]"){if(isNaN(e.valueOf())){ADL.XAPIWrapper.log("Invalid date String passed");return null}else{return e}}else{ADL.XAPIWrapper.log("Invalid date object");return null}}(function(T){c.debug=false;function t(t){t=String(t);var e=0;for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);e+=r<1<<7?1:r<1<<11?2:r<1<<16?3:r<1<<21?4:r<1<<26?5:r<1<<31?6:Number.NaN}return e}var e=function(){var t={};return t}();var n=function(t,e){this.lrs=o(t||{});if(this.lrs.user&&this.lrs.password)r(this.lrs,this.lrs.user,this.lrs.password);this.base=n(this.lrs.endpoint);this.withCredentials=false;if(t&&typeof t.withCredentials!="undefined"){this.withCredentials=t.withCredentials}this.strictCallbacks=false;this.strictCallbacks=t&&t.strictCallbacks;function n(t){var e=document.createElement("a");e.href=t;if(e.protocol&&e.host){return e.protocol+"//"+e.host}else if(e.href){var n=e.href.split("//");return n[0]+"//"+n[1].substr(0,n[1].indexOf("/"))}else T.XAPIWrapper.log("Couldn't create base url from endpoint: "+t)}function r(t,e,n){t.auth="Basic "+toBase64(e+":"+n)}if(e&&i.call(this)){window.ADL.XHR_request(this.lrs,this.lrs.endpoint+"about","GET",null,null,function(t){if(t.status==200){try{var e=JSON.parse(t.response);var n=false;for(var r in e.version){if(e.version.hasOwnProperty(r))if(e.version[r]==T.XAPIWrapper.xapiVersion){n=true;break}}if(!n){T.XAPIWrapper.log("The lrs version ["+e.version+"]"+" does not match this wrapper's XAPI version ["+T.XAPIWrapper.xapiVersion+"]")}}catch(t){T.XAPIWrapper.log("The response was not an about object")}}else{T.XAPIWrapper.log("The request to get information about the LRS failed: "+t)}},null,false,null,this.withCredentials,false)}this.searchParams=function(){var t={format:"exact"};return t};this.hash=function(t){if(!t)return null;try{return toSHA1(t)}catch(t){T.XAPIWrapper.log("Error trying to hash -- "+t);return null}};this.changeConfig=function(t){try{T.XAPIWrapper.log("updating lrs object with new configuration");this.lrs=a(this.lrs,t);if(t.user&&t.password)this.updateAuth(this.lrs,t.user,t.password);this.base=n(this.lrs.endpoint);this.withCredentials=t.withCredentials;this.strictCallbacks=t.strictCallbacks}catch(t){T.XAPIWrapper.log("error while changing configuration -- "+t)}};this.updateAuth=r};n.prototype.xapiVersion="1.0.1";n.prototype.prepareStatement=function(t){if(t.actor===undefined){t.actor=JSON.parse(this.lrs.actor)}else if(typeof t.actor==="string"){t.actor=JSON.parse(t.actor)}if(this.lrs.grouping||this.lrs.registration||this.lrs.activity_platform){if(!t.context){t.context={}}}if(this.lrs.grouping){if(!t.context.contextActivities){t.context.contextActivities={}}t.context.contextActivities.grouping=[{id:this.lrs.grouping}]}if(this.lrs.registration){t.context.registration=this.lrs.registration}if(this.lrs.activity_platform){t.context.platform=this.lrs.activity_platform}};n.prototype.testConfig=i;n.prototype.log=c;n.prototype.defaultEncoding="utf-8";n.prototype.sendStatement=function(t,e,n){if(this.testConfig()){this.prepareStatement(t);var r;if(t["id"]){r=t["id"]}else{r=T.ruuid();t["id"]=r}var i=JSON.stringify(t);var s=null;if(n&&n.length>0){s={};i=this.buildMultipartPost(t,n,s)}var a=T.XHR_request(this.lrs,this.lrs.endpoint+"statements","POST",i,this.lrs.auth,e,{id:r},null,s,this.withCredentials,this.strictCallbacks);if(!e)return{xhr:a,id:r}}};n.prototype.stringToArrayBuffer=function(t,e){e=e||T.XAPIWrapper.defaultEncoding;return new TextEncoder(e).encode(t).buffer};n.prototype.stringFromArrayBuffer=function(t,e){e=e||T.XAPIWrapper.defaultEncoding;return new TextDecoder(e).decode(t)};n.prototype.buildMultipartPost=function(t,e,n){t.attachments=[];for(var r=0;r<e.length;r++){if(e[r].type=="signature"){e[r].type={usageType:"http://adlnet.gov/expapi/attachments/signature",display:{"en-US":"A JWT signature"},description:{"en-US":"A signature proving the statement was not modified"},contentType:"application/octet-stream"}}if(typeof e[r].value==="string"){e[r].value=this.stringToArrayBuffer(e[r].value)}e[r].type.length=e[r].value.byteLength;e[r].type.sha2=toSHA256(e[r].value);t.attachments.push(e[r].type)}var i=[];var s=(Math.random()+" ").substring(2,10)+(Math.random()+" ").substring(2,10);n["Content-Type"]="multipart/mixed; boundary="+s;var a="\r\n";var o=["--"+s,"Content-Type: application/json",'Content-Disposition: form-data; name="statement"',"",JSON.stringify(t)].join(a)+a;i.push(o);for(var r in e){if(e.hasOwnProperty(r)){var l=["--"+s,"Content-Type: "+e[r].type.contentType,"Content-Transfer-Encoding: binary","X-Experience-API-Hash: "+e[r].type.sha2].join(a)+a+a;i.push(l);i.push(e[r].value)}}i.push(a+"--"+s+"--"+a);return new Blob(i)};n.prototype.sendStatements=function(t,e){if(this.testConfig()){for(var n in t){if(t.hasOwnProperty(n))this.prepareStatement(t[n])}var r=T.XHR_request(this.lrs,this.lrs.endpoint+"statements","POST",JSON.stringify(t),this.lrs.auth,e,null,false,null,this.withCredentials,this.strictCallbacks);if(!e){return r}}};n.prototype.getStatements=function(t,e,n){if(this.testConfig()){var r=this.lrs.endpoint+"statements";if(e){r=this.base+e}else{var i=new Array;for(s in t){if(t.hasOwnProperty(s)){if(s=="until"||s=="since"){var a=new Date(t[s]);i.push(s+"="+encodeURIComponent(a.toISOString()))}else{i.push(s+"="+encodeURIComponent(t[s]))}}}if(i.length>0)r=r+"?"+i.join("&")}var o=T.XHR_request(this.lrs,r,"GET",null,this.lrs.auth,n,null,false,null,this.withCredentials,this.strictCallbacks);if(o===undefined||o.status==404){return null}try{return JSON.parse(o.response)}catch(t){return o.response}}};n.prototype.getActivities=function(t,e){if(this.testConfig()){var n=this.lrs.endpoint+"activities?activityId=<activityid>";n=n.replace("<activityid>",encodeURIComponent(t));var r=T.XHR_request(this.lrs,n,"GET",null,this.lrs.auth,e,null,true,null,this.withCredentials,this.strictCallbacks);if(r===undefined||r.status==404){return null}try{return JSON.parse(r.response)}catch(t){return r.response}}};n.prototype.sendState=function(t,e,n,r,i,s,a,o){if(this.testConfig()){var l=this.lrs.endpoint+"activities/state?activityId=<activity ID>&agent=<agent>&stateId=<stateid>";l=l.replace("<activity ID>",encodeURIComponent(t));l=l.replace("<agent>",encodeURIComponent(JSON.stringify(e)));l=l.replace("<stateid>",encodeURIComponent(n));if(r){l+="&registration="+encodeURIComponent(r)}var f=null;if(s&&a){c("Can't have both If-Match and If-None-Match")}else if(s){f={"If-Match":T.formatHash(s)}}else if(a){f={"If-None-Match":T.formatHash(a)}}var u="PUT";if(i){if(i instanceof Array){i=JSON.stringify(i);f=f||{};f["Content-Type"]="application/json"}else if(i instanceof Object){i=JSON.stringify(i);f=f||{};f["Content-Type"]="application/json";u="POST"}else{f=f||{};f["Content-Type"]="application/octet-stream"}}else{this.log("No activity state was included.");return false}T.XHR_request(this.lrs,l,u,i,this.lrs.auth,o,null,null,f,this.withCredentials,this.strictCallbacks)}};n.prototype.getState=function(t,e,n,r,i,s){if(this.testConfig()){var a=this.lrs.endpoint+"activities/state?activityId=<activity ID>&agent=<agent>";a=a.replace("<activity ID>",encodeURIComponent(t));a=a.replace("<agent>",encodeURIComponent(JSON.stringify(e)));if(n){a+="&stateId="+encodeURIComponent(n)}if(r){a+="&registration="+encodeURIComponent(r)}if(i){i=isDate(i);if(i!=null){a+="&since="+encodeURIComponent(i.toISOString())}}var o=T.XHR_request(this.lrs,a,"GET",null,this.lrs.auth,s,null,true,null,this.withCredentials,this.strictCallbacks);if(o===undefined||o.status==404){return null}try{return JSON.parse(o.response)}catch(t){return o.response}}};n.prototype.deleteState=function(t,e,n,r,i,s,a){if(this.testConfig()){var o=this.lrs.endpoint+"activities/state?activityId=<activity ID>&agent=<agent>&stateId=<stateid>";o=o.replace("<activity ID>",encodeURIComponent(t));o=o.replace("<agent>",encodeURIComponent(JSON.stringify(e)));o=o.replace("<stateid>",encodeURIComponent(n));if(r){o+="&registration="+encodeURIComponent(r)}var l=null;if(i&&s){c("Can't have both If-Match and If-None-Match")}else if(i){l={"If-Match":T.formatHash(i)}}else if(s){l={"If-None-Match":T.formatHash(s)}}var f=T.XHR_request(this.lrs,o,"DELETE",null,this.lrs.auth,a,null,false,l,this.withCredentials,this.strictCallbacks);if(f===undefined||f.status==404){return null}try{return JSON.parse(f.response)}catch(t){return f}}};n.prototype.sendActivityProfile=function(t,e,n,r,i,s){if(this.testConfig()){var a=this.lrs.endpoint+"activities/profile?activityId=<activity ID>&profileId=<profileid>";a=a.replace("<activity ID>",encodeURIComponent(t));a=a.replace("<profileid>",encodeURIComponent(e));var o=null;if(r&&i){c("Can't have both If-Match and If-None-Match")}else if(r){o={"If-Match":T.formatHash(r)}}else if(i){o={"If-None-Match":T.formatHash(i)}}var l="PUT";if(n){if(n instanceof Array){n=JSON.stringify(n);o=o||{};o["Content-Type"]="application/json"}else if(n instanceof Object){n=JSON.stringify(n);o=o||{};o["Content-Type"]="application/json";l="POST"}else{o=o||{};o["Content-Type"]="application/octet-stream"}}else{this.log("No activity profile was included.");return false}T.XHR_request(this.lrs,a,l,n,this.lrs.auth,s,null,false,o,this.withCredentials,this.strictCallbacks)}};n.prototype.getActivityProfile=function(t,e,n,r){if(this.testConfig()){var i=this.lrs.endpoint+"activities/profile?activityId=<activity ID>";i=i.replace("<activity ID>",encodeURIComponent(t));if(e){i+="&profileId="+encodeURIComponent(e)}if(n){n=isDate(n);if(n!=null){i+="&since="+encodeURIComponent(n.toISOString())}}var s=T.XHR_request(this.lrs,i,"GET",null,this.lrs.auth,r,null,true,null,this.withCredentials,this.strictCallbacks);if(s===undefined||s.status==404){return null}try{return JSON.parse(s.response)}catch(t){return s.response}}};n.prototype.deleteActivityProfile=function(t,e,n,r,i){if(this.testConfig()){var s=this.lrs.endpoint+"activities/profile?activityId=<activity ID>&profileId=<profileid>";s=s.replace("<activity ID>",encodeURIComponent(t));s=s.replace("<profileid>",encodeURIComponent(e));var a=null;if(n&&r){c("Can't have both If-Match and If-None-Match")}else if(n){a={"If-Match":T.formatHash(n)}}else if(r){a={"If-None-Match":T.formatHash(r)}}var o=T.XHR_request(this.lrs,s,"DELETE",null,this.lrs.auth,i,null,false,a,this.withCredentials,this.strictCallbacks);if(o===undefined||o.status==404){return null}try{return JSON.parse(o.response)}catch(t){return o}}};n.prototype.getAgents=function(t,e){if(this.testConfig()){var n=this.lrs.endpoint+"agents?agent=<agent>";n=n.replace("<agent>",encodeURIComponent(JSON.stringify(t)));var r=T.XHR_request(this.lrs,n,"GET",null,this.lrs.auth,e,null,true,null,this.withCredentials,this.strictCallbacks);if(r===undefined||r.status==404){return null}try{return JSON.parse(r.response)}catch(t){return r.response}}};n.prototype.sendAgentProfile=function(t,e,n,r,i,s){if(this.testConfig()){var a=this.lrs.endpoint+"agents/profile?agent=<agent>&profileId=<profileid>";a=a.replace("<agent>",encodeURIComponent(JSON.stringify(t)));a=a.replace("<profileid>",encodeURIComponent(e));var o=null;if(r&&i){c("Can't have both If-Match and If-None-Match")}else if(r){o={"If-Match":T.formatHash(r)}}else if(i){o={"If-None-Match":T.formatHash(i)}}var l="PUT";if(n){if(n instanceof Array){n=JSON.stringify(n);o=o||{};o["Content-Type"]="application/json"}else if(n instanceof Object){n=JSON.stringify(n);o=o||{};o["Content-Type"]="application/json";l="POST"}else{o=o||{};o["Content-Type"]="application/octet-stream"}}else{this.log("No agent profile was included.");return false}T.XHR_request(this.lrs,a,l,n,this.lrs.auth,s,null,false,o,this.withCredentials,this.strictCallbacks)}};n.prototype.getAgentProfile=function(t,e,n,r){if(this.testConfig()){var i=this.lrs.endpoint+"agents/profile?agent=<agent>";i=i.replace("<agent>",encodeURIComponent(JSON.stringify(t)));i=i.replace("<profileid>",encodeURIComponent(e));if(e){i+="&profileId="+encodeURIComponent(e)}if(n){n=isDate(n);if(n!=null){i+="&since="+encodeURIComponent(n.toISOString())}}var s=T.XHR_request(this.lrs,i,"GET",null,this.lrs.auth,r,null,true,null,this.withCredentials,this.strictCallbacks);if(s===undefined||s.status==404){return null}try{return JSON.parse(s.response)}catch(t){return s.response}}};n.prototype.deleteAgentProfile=function(t,e,n,r,i){if(this.testConfig()){var s=this.lrs.endpoint+"agents/profile?agent=<agent>&profileId=<profileid>";s=s.replace("<agent>",encodeURIComponent(JSON.stringify(t)));s=s.replace("<profileid>",encodeURIComponent(e));var a=null;if(n&&r){c("Can't have both If-Match and If-None-Match")}else if(n){a={"If-Match":T.formatHash(n)}}else if(r){a={"If-None-Match":T.formatHash(r)}}var o=T.XHR_request(this.lrs,s,"DELETE",null,this.lrs.auth,i,null,false,a,this.withCredentials,this.strictCallbacks);if(o===undefined||o.status==404){return null}try{return JSON.parse(o.response)}catch(t){return o}}};function i(){try{return this.lrs.endpoint!=undefined&&this.lrs.endpoint!=""}catch(t){return false}}function c(t){if(!c.debug)return false;try{console.log(t);return true}catch(t){return false}}function a(e,n){for(var r in n){if(n.hasOwnProperty(r)==false)continue;var t=n[r];c(r+" : "+t);try{if(n[r].constructor==Object){e[r]=a(e[r],n[r])}else{if(e==undefined){e=new Object}e[r]=n[r]}}catch(t){if(e==undefined){e=new Object}e[r]=n[r]}}return e}function o(t){var e=["endpoint","auth","actor","registration","activity_id","grouping","activity_platform"];var n=new Object;var r,i;r=l();if(r!==undefined&&Object.keys(r).length!==0){for(var s=0;s<e.length;s++){i=e[s];if(r[i]){n[i]=r[i];delete r[i]}}n=a(t,n)}else{n=t}return n}function l(){var t,e,n,r,i;t=window.location.search.substr(1);e=t.split("&");i={};for(r=0;r<e.length;r++){n=e[r].split("=");if(n.length===2&&n[0]){i[n[0]]=decodeURIComponent(n[1])}}return i}function A(){var t=new XMLHttpRequest;var e=window.location+"?forcenocache="+T.ruuid();t.open("GET",e,false);t.send(null)}function N(t,e,n,r){var i=e;var s=new Array;var a=i.indexOf("?");if(a>0){s.push(i.substr(a+1));i=i.substr(0,a)}i=i+"?method="+t;if(n!==null){for(var o in n){if(n.hasOwnProperty(o))s.push(o+"="+encodeURIComponent(n[o]))}}if(r!==null){s.push("content="+encodeURIComponent(r))}return{method:"POST",url:i,headers:{},data:s.join("&")}}T.ruuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t=="x"?e:e&3|8;return n.toString(16)})};T.dateFromISOString=function(t){var e="([0-9]{4})(-([0-9]{2})(-([0-9]{2})"+"([T| ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?"+"(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?";var n=t.match(new RegExp(e));var r=0;var i=new Date(n[1],0,1);if(n[3]){i.setMonth(n[3]-1)}if(n[5]){i.setDate(n[5])}if(n[7]){i.setHours(n[7])}if(n[8]){i.setMinutes(n[8])}if(n[10]){i.setSeconds(n[10])}if(n[12]){i.setMilliseconds(Number("0."+n[12])*1e3)}if(n[14]){r=Number(n[16])*60+Number(n[17]);r*=n[15]=="-"?1:-1}r-=i.getTimezoneOffset();time=Number(i)+r*60*1e3;var s=new Date;s.setTime(Number(time));return s};T.XHR_request=function(t,r,i,e,n,s,a,o,l,f,u){"use strict";var c,p=false,h=false,d=false,g,y=r.toLowerCase().match(/^(.+):\/\/([^:\/]*):?(\d+)?(\/.*)?$/),v=window.location,C,I,m,S,w;var b={};b["Content-Type"]="application/json";b["Authorization"]=n;b["X-Experience-API-Version"]=T.XAPIWrapper.xapiVersion;if(l!==null){for(var x in l){if(l.hasOwnProperty(x))b[x]=l[x]}}h=v.protocol.toLowerCase()!==y[1]||v.hostname.toLowerCase()!==y[2];if(!h){C=y[3]===null?y[1]==="http"?"80":"443":y[3];h=C===v.port}if(t!==null&&t.extended!==undefined){m=new Array;for(S in t.extended){m.push(S+"="+encodeURIComponent(t.extended[S]))}if(m.length>0){r+=(r.indexOf("?")>-1?"&":"?")+m.join("&")}}var O=window.XDomainRequest&&(window.XMLHttpRequest&&(new XMLHttpRequest).responseType===undefined);if(!h||O===undefined||O===false){c=new XMLHttpRequest;c.withCredentials=f;c.open(i,r,s!=null);for(var x in b){c.setRequestHeader(x,b[x])}}else{d=true;g=N(i,r,b,e);c=new XDomainRequest;c.open(g.method,g.url)}function R(){if(!p){p=true;var t=o&&c.status===404;if(c.status===undefined||c.status>=200&&c.status<400||t){if(s){if(a){u?s(null,c,a):s(c,a)}else{var e;try{e=JSON.parse(c.responseText)}catch(t){e=c.responseText}u?s(null,c,e):s(c,e)}}else{I=c;return c}}else{var n;try{n="There was a problem communicating with the Learning Record Store. ( "+c.status+" | "+c.response+" )"+r}catch(t){n=t.toString()}T.XAPIWrapper.log(n);T.xhrRequestOnError(c,i,r,s,a,u);I=c;return c}}else{return I}}c.onreadystatechange=function(){if(c.readyState===4){return R()}};c.onload=R;c.onerror=R;c.send(d?g.data:e);if(!s){if(d){w=1e3+new Date;while(new Date<w&&c.readyState!==4&&!p){A()}}return R()}};T.xhrRequestOnError=function(e,t,n,r,i,s){if(r&&s){var a=e?e.status:undefined;var o;if(a){o=new Error("Request error: "+e.status)}else if(a===0||a===null){o=new Error("Request error: aborted")}else{o=new Error("Reqeust error: unknown")}if(i){r(o,e,i)}else{var l;try{l=JSON.parse(e.responseText)}catch(t){l=e.responseText}r(o,e,l)}}};T.formatHash=function(t){return t==="*"?t:'"'+t+'"'};T.XAPIWrapper=new n(e,false)})(window.ADL=window.ADL||{});var video_log=Array();(function(se){var t=true;var re=function(e){if(typeof e=="undefined")return t;t=e;return e};var e=function(e,t,i){var x=se.XAPIWrapper.lrs.actor?JSON.parse(se.XAPIWrapper.lrs.actor):null;var m=typeof i!="undefined"&&typeof i.completion_threshold!="undefined"&&i.completion_threshold?i.completion_threshold:1;var n=typeof i!="undefined"&&typeof i.seeked_delay!="undefined"&&i.seeked_delay?i.seeked_delay:2;var g=typeof i!="undefined"&&typeof i.name!="undefined"&&i.name?i.name:{"en-US":"Video"};var h=videojs(e);if(x==null)return;var y=typeof t=="string"&&t.length>5?t:h.currentSrc().toString();var w=se.ruuid();var o=false;var d=false;var s=false;var a="";var p=null;var r=null;var u=false;var l=false;var v="";var c=A(h.duration());var f=false;var S=/(?:http:\/\/www\.|http:\/\/|https:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/;var b=S.exec(y);b=b?b[1]:"html5";b=b=="youtu"?"youtube":b;var T=h.textTracks();k("objectID",y);k("video_type",b);function k(){if(typeof window.gbdebug!="undefined")console.error(arguments)}function A(e){if(e==null)return null;return+parseFloat(e).toFixed(3)}function P(e){if(typeof se.XAPIWrapper.lrs.registration=="string"&&se.XAPIWrapper.lrs.registration.length==36){if(typeof e["context"]==undefined)e["context"]=new Object;e["context"]["registration"]=se.XAPIWrapper.lrs.registration}return e}function j(e){p=e}function I(e){var t;t=a==""?[]:a.split("[,]");if(p!=e&&p!=null&&p<e){t.push(p+"[.]"+e)}a=t.join("[,]");r=e;p=null}function D(e){if(r==null||Math.abs(r-e)>=1)return _(e);else return _(r)}function _(e){if(c&&e>c&&e<c+1)return A(c);else return A(e)}function R(){var e,i;if(typeof c=="undefined"||!c||c==null||c==NaN){c=A(h.duration());if(c>0)return R();else return 0}e=a==""?[]:a.split("[,]");if(p!=null){if(q!=null)e.push(p+"[.]"+A(q));else e.push(p+"[.]"+A(G))}i=[];e.forEach(function(e,t){i[t]=e.split("[.]");i[t][0]*=1;i[t][1]*=1});i.sort(function(e,t){return e[0]-t[0]});i.forEach(function(e,t){if(t>0){if(i[t][0]<i[t-1][1]){i[t][0]=i[t-1][1];if(i[t][0]>i[t][1])i[t][1]=i[t][0]}}});var n=0;i.forEach(function(e,t){if(e[1]>e[0])n+=e[1]-e[0]});if(p!=null)var t=(Math.floor(1*(n*1e3/c))/1e3).toFixed(3);else var t=1*(n/c).toFixed(3);t=t>1?1:t;k("progress",t,"progress_length",n,"video_length",c,"played_segments_segment_start",p,"seekStart",q,"seekEnd",K,"previousTime",G);return t}function W(){var e,i;e=a==""?[]:a.split("[,]");if(p!=null){e.push(p+"[.]"+A(h.currentTime()))}i=[];var n=0;e.forEach(function(e,t){i[t]=e.split("[.]");i[t][0]*=1;i[t][1]*=1;if(i[t][1]>i[t][0])n+=i[t][1]-i[t][0]});return n}var X="";X+="g";X+="r";X+="a";X+="s";X+="s";X+="b";X+="l";X+="a";X+="d";X+="e";var E=false;var L=false;var O=0;function U(){u=true;var e=[];e["agent"]=JSON.stringify(x);e["activity"]=y;e["verb"]="https://w3id.org/xapi/video/verbs/paused";e["limit"]=1;if(typeof se.XAPIWrapper.lrs.registration=="string"&&se.XAPIWrapper.lrs.registration.length==36){e["registration"]=se.XAPIWrapper.lrs.registration}ret=se.XAPIWrapper.getStatements(e);if(ret!=undefined&&ret.statements!=undefined&&ret.statements[0]!=undefined&&ret.statements[0]["result"]!=undefined&&ret.statements[0]["result"]["extensions"]!=undefined&&ret.statements[0]["result"]["extensions"]["https://w3id.org/xapi/video/extensions/played-segments"]!=undefined){a=ret.statements[0]["result"]["extensions"]["https://w3id.org/xapi/video/extensions/played-segments"]}if(ret!=undefined&&ret.statements!=undefined&&ret.statements[0]!=undefined&&ret.statements[0]["result"]!=undefined&&ret.statements[0]["result"]["extensions"]!=undefined&&ret.statements[0]["result"]["extensions"]["https://w3id.org/xapi/video/extensions/time"]!=undefined){var t=1*ret.statements[0]["result"]["extensions"]["https://w3id.org/xapi/video/extensions/time"];if(t>0&&Math.abs(h.duration()-t)>3){L=true;O=A(t);F()}}if(ret!=undefined&&ret.statements!=undefined&&ret.statements[0]!=undefined&&ret.statements[0]["result"]!=undefined&&ret.statements[0]["result"]["extensions"]!=undefined&&ret.statements[0]["result"]["extensions"]["https://w3id.org/xapi/video/extensions/progress"]!=undefined){var i=1*ret.statements[0]["result"]["extensions"]["https://w3id.org/xapi/video/extensions/progress"];if(i>=m){H=true;k("Already completed in past, Progress",i)}else H=false}else H=false;M();h.on("canplaythrough",function(e){f=true});h.on("canplay",function(e){f=true;k("canplay called","timeStamp:",new Date/1e3)});window.addEventListener("beforeunload",function(e){k("beforeunload called");E=true;$()})}function F(){k("Resuming ",O," currentTime:",h.currentTime(),"timeStamp:",new Date/1e3);h.currentTime(O);k("Resuming done ",h.currentTime(),"timeStamp:",new Date/1e3)}z=window.location.href.search(X)<=0;function M(){var e=new Date;var t=e.toISOString();var i=h.isFullscreen();var n="";n+=screen.width+"x"+screen.height;var s="";s+=h.currentWidth()+"x"+h.currentHeight();var r=h.playbackRate();var o=A(h.duration());var a=false;var d="";for(var p=0;p<T.length;p++){var u=T[p];if(u.mode==="showing"){var a=true;var d=u.language}}var l=navigator.userAgent.toString();var v=A(h.volume());var c=h.videoHeight();var f={id:w,actor:x,verb:{id:"http://adlnet.gov/expapi/verbs/initialized",display:{"en-US":"initialized"}},object:{id:y,definition:{name:g,type:"https://w3id.org/xapi/video/activity-type/video"},objectType:"Activity"},context:{contextActivities:{category:[{id:"https://w3id.org/xapi/video"}]},extensions:{"https://w3id.org/xapi/video/extensions/completion-threshold":m,"https://w3id.org/xapi/video/extensions/length":o,"https://w3id.org/xapi/video/extensions/full-screen":i,"https://w3id.org/xapi/video/extensions/screen-size":n,"https://w3id.org/xapi/video/extensions/video-playback-size":s,"https://w3id.org/xapi/video/extensions/cc-enabled":a,"https://w3id.org/xapi/video/extensions/speed":r+"x","https://w3id.org/xapi/video/extensions/quality":c,"https://w3id.org/xapi/video/extensions/user-agent":l,"https://w3id.org/xapi/video/extensions/volume":v,"https://w3id.org/xapi/video/extensions/session-id":w}},timestamp:t};if(a==true){f["context"]["extensions"]["https://w3id.org/xapi/video/extensions/cc-subtitle-lang"]=d}f=P(f);k("initialized statement sent",o);se.XAPIWrapper.sendStatement(f,function(e,t){k("Response from LRS: "+e.status+" - "+e.statusText)});k(f)}if(z)document.location.href="/";T.addEventListener("change",function(e){d=true;setTimeout(function(){if(d){k("sendCCSubtitle: "+d);d=false;r=false;o="";var e=new Date;var t=e.toISOString();var i=A(h.currentTime());for(var n=0;n<T.length;n++){var s=T[n];if(s.mode==="showing"){var r=true;var o=s.language}}var a={actor:x,verb:{id:"http://adlnet.gov/expapi/verbs/interacted",display:{"en-US":"interacted"}},object:{id:y,definition:{name:g,type:"https://w3id.org/xapi/video/activity-type/video"},objectType:"Activity"},result:{extensions:{"https://w3id.org/xapi/video/extensions/time":i}},context:{contextActivities:{category:[{id:"https://w3id.org/xapi/video"}]},extensions:{"https://w3id.org/xapi/video/extensions/session-id":w,"https://w3id.org/xapi/video/extensions/cc-enabled":r}},timestamp:t};if(o!="")a.context.extensions["https://w3id.org/xapi/video/extensions/cc-subtitle-lang"]=o;a=P(a);k("interacted statement (CC-Subtitle change) sent");se.XAPIWrapper.sendStatement(a,function(e,t){k("Response from LRS: "+e.status+" - "+e.statusText)});k(a)}},20)});h.on("play",function(){k("play called",h.currentTime(),"resumeTime:",O,"timeStamp:",new Date/1e3);if(u==false){k("video_start called",h.currentTime(),"resumeTime:",O,"timeStamp:",new Date/1e3);U();k("video_start called done",h.currentTime(),"resumeTime:",O,"timeStamp:",new Date/1e3)}if(L){o=false;k("play rejected. resumeTime:",O," at ",h.currentTime(),new Date/1e3);return}if(p!=null){o=false;k("play rejected. video already playing. played_segments_segment_start:",p);return}if(o!==true){V()}else{o=false;if(q!=null){K=A(G);k("seekEnd set in play event","skipPlayEvent",o,"previousTime",G,"seekStart",q," Play skipped.")}else{k("Play skipped.","skipPlayEvent",o,"previousTime",G,"seekStart",q)}}});function V(){var e=h.duration();q=null;k("seekStart reset while sending play",J);var t=new Date;var i=t.toISOString();var n=D(A(h.currentTime()));if(O&&Math.abs(O-n)<1){n=O;O=0}j(n);var s={actor:x,verb:{id:"https://w3id.org/xapi/video/verbs/played",display:{"en-US":"played"}},object:{id:y,definition:{name:g,type:"https://w3id.org/xapi/video/activity-type/video"},objectType:"Activity"},result:{extensions:{"https://w3id.org/xapi/video/extensions/time":n}},context:{contextActivities:{category:[{id:"https://w3id.org/xapi/video"}]},extensions:{"https://w3id.org/xapi/video/extensions/session-id":w}},timestamp:i};s=P(s);k("played statement sent",new Date/1e3);se.XAPIWrapper.sendStatement(s,function(e,t){k("Response from LRS: "+e.status+" - "+e.statusText)});k(s);L=false}h.on("pause",function(){k("pause called","currentTime",h.currentTime(),"previousTime",G,new Date/1e3);if(u==false){k("pause rejected. video not yet started.",h.currentTime(),"timeStamp:",new Date/1e3);return}if(this.seeking()===false){if(L){k("Vimeo?: Resume not done yet, rejected paused.");return}Q();var e=new Date;var t=e.toISOString();if(!i)var i=A(h.duration());var n=_(h.currentTime());if(n>i&&n<i+1)n=_(i);I(n);var s=R();k("video progress percentage:"+s+".");if(s>=m){window.video_completed=true;B()}var r={actor:x,verb:{id:"https://w3id.org/xapi/video/verbs/paused",display:{"en-US":"paused"}},object:{id:y,definition:{name:g,type:"https://w3id.org/xapi/video/activity-type/video"},objectType:"Activity"},result:{extensions:{"https://w3id.org/xapi/video/extensions/time":n,"https://w3id.org/xapi/video/extensions/progress":s,"https://w3id.org/xapi/video/extensions/played-segments":a}},context:{contextActivities:{category:[{id:"https://w3id.org/xapi/video"}]},extensions:{"https://w3id.org/xapi/video/extensions/length":i,"https://w3id.org/xapi/video/extensions/session-id":w,"https://w3id.org/xapi/video/extensions/completion-threshold":m}},timestamp:t};r=P(r);k("paused statement sent");se.XAPIWrapper.sendStatement(r,function(e,t){k("Response from LRS: "+e.status+" - "+e.statusText)});k(r);o=false}else{k("skipPlayEvent set in paused event. Pause skipped.");o=true}});var C=0;var H=null;function N(){if(H==null||h.currentTime()<1||h.seeking())return;if(H){k("already completed");return}var e=(new Date).getTime();if(e<C){return}var t=h.duration();k("length: "+t);if(t<=0)return;var i=R();if(i>=m&&K==null){B()}else{var n=(m-i)*t;C=e+n.toFixed(3)*1e3;k("Progress: "+i+" currentTimestamp: "+e+" next completion check in "+(C-e)/1e3+" seconds")}}function B(){if(H){k("already completed");return}if(p!=null){J=_(h.currentTime());var e=a!=""?a+"[,]":a;e+=p+"[.]"+J}else var e=a;var t=new Date;var i=t.toISOString();if(!n)var n=A(h.duration());var s=R();k("video progress percentage:"+s+".");var r=W();r="PT"+A(r).toFixed(2)+"S";var o={actor:x,verb:{id:"http://adlnet.gov/expapi/verbs/completed",display:{"en-US":"completed"}},object:{id:y,definition:{name:g,type:"https://w3id.org/xapi/video/activity-type/video"},objectType:"Activity"},result:{duration:r,completion:true,extensions:{"https://w3id.org/xapi/video/extensions/time":J,"https://w3id.org/xapi/video/extensions/progress":s,"https://w3id.org/xapi/video/extensions/played-segments":e}},context:{contextActivities:{category:[{id:"https://w3id.org/xapi/video"}]},extensions:{"https://w3id.org/xapi/video/extensions/session-id":w,"https://w3id.org/xapi/video/extensions/length":n,"https://w3id.org/xapi/video/extensions/completion-threshold":m}},timestamp:i};o=P(o);k("completed statement sent");se.XAPIWrapper.sendStatement(o,function(e,t){k("Response from LRS: "+e.status+" - "+e.statusText)});H=true;window.video_completed=true;k(o)}var G=0;var J=0;var q=null;var K=null;h.on("timeupdate",function(){if(L&&f&&b=="html5"){F()}G=J;if(K!=null&&Math.abs(K-G)>=n){Y()}J=A(h.currentTime());N();ie()});h.on("seeking",function(){k("seeking called",h.currentTime()," current values: previousTime:",G,"seekStart:",q,"seekEnd:",K," timeStamp: ",new Date/1e3);if(p===null){k("seeking rejected. not playing (played_segments_segment_start is null)");return}if(L){q=null;k("seeking rejected. resuming.");return}if(q===null){if(G==c)q=0;else q=A(G);k("seekStart set",q)}else if(K!=null){if(Math.abs(K-G)<n){K=null;k("seekEnd reset still seeking")}else{k("seek more than "+n,K,G,q);Y();if(G==c)q=0;else q=A(G)}}});h.on("seeked",function(){k("seeked called at",h.currentTime(),"previousTime:",G," resumeTime:",O,"skipPlayEvent: ",o,"timeStamp: ",new Date/1e3);if(L){L=false;q=K=null;var e=this.paused();if(this.paused())k("not calling play from seeked event, on resume. video already paused. (Vimeo?)",O,"isPaused:",e);else{k("calling play from seeked event, on resume.",O,"isPaused:",e);V()}}else{if(q!==null){K=G=J=_(h.currentTime());k("seekEnd set in seeked event",K)}}});function Q(){if(K!=null){Y()}}function Y(){k("send_seeked",q+"[.]"+K+" called at:"+h.currentTime());if(Math.abs(q-K)<1){K=null;if(h.seeking()==false)q=null;k("seekEnd too close to seekStart. Skip seeked. seekStart:",q,"seekEnd:",K);return}var e=new Date;var t=e.toISOString();K=A(K);I(q);j(K);var i={actor:x,verb:{id:"https://w3id.org/xapi/video/verbs/seeked",display:{"en-US":"seeked"}},object:{id:y,definition:{name:g,type:"https://w3id.org/xapi/video/activity-type/video"},objectType:"Activity"},result:{extensions:{"https://w3id.org/xapi/video/extensions/time-from":q,"https://w3id.org/xapi/video/extensions/time-to":K}},context:{contextActivities:{category:[{id:"https://w3id.org/xapi/video"}]},extensions:{"https://w3id.org/xapi/video/extensions/session-id":w}},timestamp:t};i=P(i);q=null;K=null;k("seekStart and seekEnd reset");k("seeked sent");se.XAPIWrapper.sendStatement(i,function(e,t){k("Response from LRS: "+e.status+" - "+e.statusText)});k(i)}h.on("ended",function(){if(re())setTimeout(function(){$();if(typeof exit_screen=="function")exit_screen()},100)});var Z=false;function $(){if(Z)return;Z=true;if(!h.paused()){h.trigger("pause")}var e=new Date;var t=e.toISOString();J=_(J);var i=R();k("video progress percentage:"+i+".");if(!n)var n=A(h.duration());var s={actor:x,verb:{id:"http://adlnet.gov/expapi/verbs/terminated",display:{"en-US":"terminated"}},object:{id:y,definition:{name:g,type:"https://w3id.org/xapi/video/activity-type/video"},objectType:"Activity"},result:{extensions:{"https://w3id.org/xapi/video/extensions/time":J,"https://w3id.org/xapi/video/extensions/progress":i,"https://w3id.org/xapi/video/extensions/played-segments":a}},context:{contextActivities:{category:[{id:"https://w3id.org/xapi/video"}]},extensions:{"https://w3id.org/xapi/video/extensions/length":n,"https://w3id.org/xapi/video/extensions/session-id":w,"https://w3id.org/xapi/video/extensions/completion-threshold":m}},timestamp:t};s=P(s);k("terminated statement sent");se.XAPIWrapper.sendStatement(s,function(e,t){k("Response from LRS: "+e.status+" - "+e.statusText)});k(s);h.dispose()}var ee=null,te=0;h.on("volumechange",function(){k("volumechange called at:",h.currentTime(),"volume: ",h.volume());var e=(new Date).getTime();ee=e;te=J});function ie(){var e=(new Date).getTime();if(ee!=null&&e>ee+2e3){ne(ee,te);ee=null}}function ne(e,t){var i=new Date(e);var n=i.toISOString();var s=h.muted();if(t==0){return}if(s===true){var r=0}if(s===false){var r=A(h.volume())}k("volume set to: "+r);var o={actor:x,verb:{id:"http://adlnet.gov/expapi/verbs/interacted",display:{"en-US":"interacted"}},object:{id:y,definition:{name:g,type:"https://w3id.org/xapi/video/activity-type/video"},objectType:"Activity"},result:{extensions:{"https://w3id.org/xapi/video/extensions/time":t}},context:{contextActivities:{category:[{id:"https://w3id.org/xapi/video"}]},extensions:{"https://w3id.org/xapi/video/extensions/session-id":w,"https://w3id.org/xapi/video/extensions/volume":r}},timestamp:n};o=P(o);k("interacted statement (volume change) sent");se.XAPIWrapper.sendStatement(o,function(e,t){k("Response from LRS: "+e.status+" - "+e.statusText)});k(o)}h.on("fullscreenchange",function(){k("fullscreenchange called",h.currentTime());var e=h.isFullscreen();if(e===true){var t=new Date;var i=t.toISOString();var n=A(h.currentTime());var s="";s+=screen.width+"x"+screen.height;var r="";r+=h.currentWidth()+"x"+h.currentHeight();var o={actor:x,verb:{id:"http://adlnet.gov/expapi/verbs/interacted",display:{"en-US":"interacted"}},object:{id:y,definition:{name:g,type:"https://w3id.org/xapi/video/activity-type/video"},objectType:"Activity"},result:{extensions:{"https://w3id.org/xapi/video/extensions/time":n}},context:{contextActivities:{category:[{id:"https://w3id.org/xapi/video"}]},extensions:{"https://w3id.org/xapi/video/extensions/session-id":w,"https://w3id.org/xapi/video/extensions/full-screen":e,"https://w3id.org/xapi/video/extensions/screen-size":s,"https://w3id.org/xapi/video/extensions/video-playback-size":r}},timestamp:i};o=P(o);k("interacted statement (fullScreen true) sent");se.XAPIWrapper.sendStatement(o,function(e,t){k("Response from LRS: "+e.status+" - "+e.statusText)});k(o)}if(e===false){var t=new Date;var i=t.toISOString();var n=A(h.currentTime());var s="";s+=screen.width+"x"+screen.height;var r="";r+=h.currentWidth()+"x"+h.currentHeight();var a={actor:x,verb:{id:"http://adlnet.gov/expapi/verbs/interacted",display:{"en-US":"interacted"}},object:{id:y,definition:{name:g,type:"https://w3id.org/xapi/video/activity-type/video"},objectType:"Activity"},result:{extensions:{"https://w3id.org/xapi/video/extensions/time":n}},context:{contextActivities:{category:[{id:"https://w3id.org/xapi/video"}]},extensions:{"https://w3id.org/xapi/video/extensions/session-id":w,"https://w3id.org/xapi/video/extensions/full-screen":e,"https://w3id.org/xapi/video/extensions/screen-size":s,"https://w3id.org/xapi/video/extensions/video-playback-size":r}},timestamp:i};a=P(a);k("interacted statement (fullscreen false) sent");se.XAPIWrapper.sendStatement(a,function(e,t){k("Response from LRS: "+e.status+" - "+e.statusText)});k(a)}});return h};se.GrassBladeVideo=e;se.GrassBladeVideo.terminate_on_end=re})(window.ADL=window.ADL||{});function parseQueryString(){var e,i,t,o,a,n;e=window.location.href.split("?");if(e.length===2){i=e[1];t=i.split("&");n={};for(a=0;a<t.length;a++){o=t[a].split("=");if(o.length===2&&o[0]){n[o[0]]=decodeURIComponent(o[1])}}}return n}function get_params(){var t=parseQueryString();jQuery.each(Object.keys(t),function(e,i){if(typeof t[i]=="string")t[i]=t[i].replace(/<[^>]*>?/gm,"")});if(typeof config=="object"&&typeof config["activity_id"]=="string"){jQuery.each(Object.keys(config),function(e,i){t[i]=config[i]})}return t}function auto_play(){ADL.GrassBladeVideo.myPlayer.ready(function(){var e=this.play();if(e!==undefined){e.then(function(e){}).catch(function(e){})}})}function toggle_play(){jQuery("#video").on("click touchstart",function(){var e=jQuery(this).hasClass("vjs-paused");window.gb_player_status=ADL.GrassBladeVideo.myPlayer.paused();if(e!=window.gb_player_status)return;setTimeout(function(){ADL.GrassBladeVideo.myPlayer.ready(function(){var e=this.paused();if(window.gb_player_status==ADL.GrassBladeVideo.myPlayer.paused()){if(e)this.play();else this.pause()}})},1e3)})}function parent_window_reload(){if(window.opener!=null)window.opener.location.reload(false)}function window_close(){if(window.qvars.target=="iframe"||window.qvars.target=="lightbox")window.top.location.reload();else window.open(window.location,"_self").close()}function get_sizes(){var e=get_params();var i=jQuery(window).width();var t=jQuery(window).height();e.height=typeof e.height=="undefined"||e.height==""?"100%":e.height;e.width=typeof e.width=="undefined"||e.width==""?"56.25%":e.width;var o=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if(o){if(init_height==undefined)init_height=t;if(init_width==undefined)init_width=i;if(i<init_width){init_width=i;init_height=t}i=init_width;t=init_height}var a=e.aspect*1>0?e.aspect*1:0;var n=i;var d=t;if(e.target=="lightbox"||e.target=="iframe"){n=i;if(a>0){d=Math.ceil(n/a)}else{d=t}}else if(a>0){if(e.width.indexOf("%")>0)n=Math.ceil(i*parseFloat(e.width)/100);d=Math.ceil(n/a);if(d>t){n=Math.ceil(n*t/d);d=t}}else{if(e.height.indexOf("%")>0)d=Math.ceil(t*parseFloat(e.height)/100);else d=Math.ceil(parseFloat(e.height));if(e.width.indexOf("%")>0)n=Math.ceil(i*parseFloat(e.width)/100);else n=Math.ceil(parseFloat(e.width))}var s=Math.ceil((i-n)/2);var r=Math.ceil((t-d)/2);s=s<5?0:s;r=r<5?0:r;n=i-n<10?i:n;d=t-d<10?t:d;return{height:d,width:n,top:r,left:s}}function resize_video(){if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement){if(!jQuery("#video").hasClass("vjs-fullscreen"))jQuery("#video").addClass("vjs-fullscreen");console.log("in fullscreen, do not resize");return}else jQuery("#video").removeClass("vjs-fullscreen");var e=get_sizes();if(jQuery("#video_ended_popup").length>0){var i=Math.ceil((jQuery(window).height()-jQuery("#video_ended_popup").height())/2);jQuery("#video_ended_popup").css("margin-top",i);var t=jQuery(window).height();var o=jQuery("#video_ended_popup").height();if(o>t){jQuery("#video_ended_popup").addClass("small");resize_video()}}else{jQuery("#video").css("height",e.height);jQuery("#video").css("width",e.width);jQuery("#video").css("top",e.top);jQuery("#video").css("left",e.left)}}document.addEventListener("fullscreenchange",function(){console.log("index fullscreenchange");resize_video()});document.addEventListener("mozfullscreenchange",function(){console.log("index mozfullscreenchange");resize_video()});document.addEventListener("webkitfullscreenchange",function(){console.log("index webkitfullscreenchange");resize_video()});document.addEventListener("msfullscreenchange",function(){console.log("index msfullscreenchange");resize_video()});jQuery(window).on("orientationchange",function(){resize_video()});jQuery(window).on("resize",function(){resize_video()});function exit_screen(){var e=get_params();var i="You have reached the end of the video";var t="Congratulations! You have completed the video";var o="Exit";var a="Restart";var n="Results";var i="You have reached the end of the video";if(typeof e.exit_msg=="string"&&e.exit_msg.length>0)i=decodeURIComponent(e.exit_msg).replace(new RegExp("\\\\","g"),"");if(typeof e.exit_button_name=="string"&&e.exit_button_name.length>0)o=decodeURIComponent(e.exit_button_name).replace(new RegExp("\\\\","g"),"");if(typeof e.restart_button_name=="string"&&e.restart_button_name.length>0)a=decodeURIComponent(e.restart_button_name).replace(new RegExp("\\\\","g"),"");if(typeof e.result_button_name=="string"&&e.result_button_name.length>0)n=decodeURIComponent(e.result_button_name).replace(new RegExp("\\\\","g"),"");if(typeof e.exit_msg_completed=="string"&&e.exit_msg_completed.length>0)t=decodeURIComponent(e.exit_msg_completed).replace(new RegExp("\\\\","g"),"");var d=typeof e.user=="number"?e.user:0;if(window.video_completed&&(d>0||JSON.parse(e.actor).mbox!=undefined&&JSON.parse(e.actor).mbox.search("mailto:guest-")!=0)){o=n}if(window.video_completed){i=t}var s=document.createElement("div");s.id="video_ended_popup";s.innerHTML="<div class='message'>"+i+"</div><div>";s.innerHTML+="<span class='buttons_wrap restart_button'><a  class='buttons' onClick='parent_window_reload(); window.location = window.location.href;'>"+a+"</a></span>";if(!e.autoplay||e.target!="iframe")s.innerHTML+="<span class='buttons_wrap exit_button'><a class='buttons' onClick='parent_window_reload();window_close();' >"+o+"</a></span>";s.innerHTML+="</div>";if(jQuery("#video_ended_popup").length>0)jQuery("#video_ended_popup").html(s);else jQuery("body").append(s);jQuery("body").css("background","#666");jQuery("body").css("color","white");jQuery("#video_ended_popup").css("margin-top",Math.abs(Math.abs(jQuery(window).height())-Math.abs(jQuery("#video_ended_popup").height()))/2);resize_video()}jQuery(document).ready(function(){var e=get_params();ADL.XAPIWrapper.changeConfig(e);window.qvars=e;window.init_width=typeof e.w!="undefined"?e.w:undefined;window.init_height=typeof e.h!="undefined"?e.h:undefined;var i=get_sizes();var t=i.width;var o=i.height;var a=e.completion_threshold?e.completion_threshold:1;var n=e.activity_name_lang?decodeURIComponent(e.activity_name_lang):"en-US";var d=e.activity_name?decodeURIComponent(e.activity_name):"Video";var s={};s[n]=d;document.title=d;var r=decodeURIComponent(e.activity_id).replace("&amp;","&");var l=/(?:http:\/\/www\.|http:\/\/|https:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer|wistia)/;var c=l.exec(r);c=c?c[1]:"";var u=false;var p=typeof e.activity_id=="string"&&r.search("autoplay=1")>0||typeof e.video_autoplay!="undefined"&&e.video_autoplay!=0?true:false;var v=typeof e.activity_id=="string"&&r.search("controls=0")>0||typeof e.video_controls!="undefined"&&e.video_controls!=1?false:true;window.video_controls=v;jQuery("body").addClass(c);jQuery("body").addClass("controls-"+(v?"enabled":"disabled"));jQuery("body").addClass("autoplay-"+(p?"enabled":"disabled"));jQuery("body").addClass("completion_threshold-"+a);jQuery("body").addClass("target-"+e.target);switch(c){case"youtu":var h={techOrder:["youtube"],sources:[{type:"video/youtube",src:r}],youtube:{color:"#fbc51b"},controls:v,autoplay:p};var f='<video id="video" class="video-js vjs-default-skin vjs-big-play-centered  preview-player-dimensions video-js-'+c+'" controls width="'+t+'" height="'+o+"\" data-setup='"+JSON.stringify(h)+"'></video>";jQuery("body").append(f);ADL.GrassBladeVideo.myPlayer=ADL.GrassBladeVideo("video",r,{completion_threshold:a,name:s});if(!v)toggle_play();break;case"vimeo":var h={techOrder:["vimeo"],sources:[{type:"video/vimeo",src:r}],vimeo:{color:"#fbc51b"},controls:v,autoplay:p};var f='<video id="video" class="video-js vjs-default-skin vjs-big-play-centered preview-player-dimensions video-js-'+c+'" width="'+t+'" height="'+o+"\" data-setup='"+JSON.stringify(h)+"'></video>";jQuery("body").append(f);ADL.GrassBladeVideo.myPlayer=ADL.GrassBladeVideo("video",r,{completion_threshold:a,name:s});if(!v)toggle_play();break;case"wistia":var y=r.search(/\?/)>0?r+"&autoplay="+p:r+"?autoplay="+p;var h={techOrder:["wistia"],sources:[{type:"video/wistia",src:y}],wistia:{color:"#fbc51b"},controls:v,autoplay:p};var f='<video id="video" class="video-js vjs-default-skin vjs-big-play-centered preview-player-dimensions video-js-'+c+'" width="'+t+'" height="'+o+"\" data-setup='"+JSON.stringify(h)+"'></video>";jQuery("body").append(f);ADL.GrassBladeVideo.myPlayer=ADL.GrassBladeVideo("video",r,{completion_threshold:a,name:s});if(!v)toggle_play();break;default:var g=/[^.]+$/.exec(r.split("?")[0])[0].toLowerCase();poster="";var h={controls:v,autoplay:p};if(jQuery.inArray(g,["mp3","wav","flac"])>=0){if(poster=="")o=30;h["controlbar"]={fullscreenToggle:false};var f='<audio id="audio-playlist-vjs-playlist" class="video-js vjs-track video-js-others" preload="auto" width="'+t+'" height="'+o+"\"  data-setup='"+JSON.stringify(h)+"' "+poster+'><source src="'+r+'"><p class="vjs-no-js">To view this audio please enable JavaScript, and consider upgrading to a web browser that supports HTML5 video</a></p></audio>';jQuery("body").append(f);ADL.GrassBladeVideo.myPlayer=ADL.GrassBladeVideo("audio-playlist-vjs-playlist",r,{completion_threshold:a,name:s})}else{var f='<video id="video" class="video-js vjs-default-skin vjs-big-play-centered  video-js-others" preload="auto" width="'+t+'" height="'+o+"\"  data-setup='"+JSON.stringify(h)+"' "+poster+'><source src="'+r+'"><p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that supports HTML5 video</a></p></video>';jQuery("body").append(f);ADL.GrassBladeVideo.myPlayer=ADL.GrassBladeVideo("video",r,{completion_threshold:a,name:s})}if(!v)toggle_play();if(p)auto_play();resize_video();resize_video()}resize_video();resize_video();if(typeof config.video_endscreen!="undefined"&&config.video_endscreen==0)ADL.GrassBladeVideo.terminate_on_end(false)});