(()=>{"use strict";var e={311:e=>{e.exports=jQuery}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=r(311),t=r.n(e);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=["course_navigation","update_drip_date","get_group_courses","try-automator-visibility"];a.includes(e)?t().ajax({method:"POST",url:UncannyToolkitPro.restURL+e+"/",data:t().param(r)+"&"+t().param({doing_rest:1}),beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",UncannyToolkitPro.nonce)},success:function(e){i(n)&&n(e)},statusCode:{403:function(){location.reload()}},fail:function(e){i(o)&&o(e)}}):console.error("The ".concat(e," endPoint does not exists"))}var i=function(e){return null!=e},a=function(e){return"object"===n(e)&&null!==e},s=r(311);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getElements(),this.hasGroupDripTable()&&(this.addDataTables(),this.listenActions())}var t,r;return t=e,(r=[{key:"getElements",value:function(){this.$elements={table:s("#uo-ld-group-drip")}}},{key:"listenActions",value:function(){var e=this;this.$elements.table.on("click",".uo-ld-group-drip__action--save",(function(t){t.preventDefault();var r=s(t.currentTarget),n=r.closest("tr");n.find("input, select").removeClass("ultp-gutenberg-field--invalid");var l,u,d={year:n.find('input[name="year"]'),month:n.find('select[name="month"]'),day:n.find('input[name="day"]'),hour:n.find('input[name="hour"]'),minute:n.find('input[name="minute"]')},p={year:d.year.val(),month:d.month.val(),day:d.day.val(),hour:d.hour.val(),minute:d.minute.val()},f=c(c({},{group_id:n.data("group"),post_id:n.data("post"),course_id:n.data("course"),action:"save"}),p),b=!0;for(var g in p){u=void 0,u=!0,i(l=p[g])&&(u=l.isArray?0==l.length:a(l)?Object.keys(l).length:""==l),(u||isNaN(parseInt(p[g])))&&(b=!1,d[g].addClass("ultp-gutenberg-field--invalid"));var m=parseInt(d[g][0].value);switch(g){case"year":(m<2015||m>2100)&&(b=!1,d[g].addClass("ultp-gutenberg-field--invalid"));break;case"month":(0===m||m>12)&&(b=!1,d[g].addClass("ultp-gutenberg-field--invalid"));break;case"day":(0===m||m>31)&&(b=!1,d[g].addClass("ultp-gutenberg-field--invalid"));break;case"hour":m>23&&(b=!1,d[g].addClass("ultp-gutenberg-field--invalid"));break;case"minute":m>59&&(b=!1,d[g].addClass("ultp-gutenberg-field--invalid"))}}b&&(n.addClass("uo-ld-group-drip-row--loading"),r.addClass("ultp-gutenberg-btn--loading"),o("update_drip_date",f,(function(t){if(n.removeClass("uo-ld-group-drip-row--loading"),r.removeClass("ultp-gutenberg-btn--loading"),t.success){n.addClass("uo-ld-group-drip-row--success"),console.log(f);var o=f.year+"-"+f.month+"-"+f.day+" "+f.hour+":"+f.minute+":00",i=new Date(o).getTime();n.data("sort",i),e.$elements.dataTable.draw(!1)}else n.addClass("uo-ld-group-drip-row--error"),alert("Failed to save: "+t.data.message);setTimeout((function(){n.removeClass("uo-ld-group-drip-row--success uo-ld-group-drip-row--error"),location.reload()}),2e3)}),(function(e){n.addClass("uo-ld-group-drip-row--error"),setTimeout((function(){n.removeClass("uo-ld-group-drip-row--success uo-ld-group-drip-row--error"),location.reload()}),2e3)})))})),this.$elements.dataTable.on("click",".uo-ld-group-drip__action--remove",(function(t){t.preventDefault();var r=s(t.currentTarget),n=r.closest("tr"),i={group_id:n.data("group"),post_id:n.data("post"),course_id:n.data("course"),action:"remove"};n.addClass("uo-ld-group-drip-row--loading"),r.addClass("ultp-gutenberg-btn--loading"),o("update_drip_date",i,(function(t){n.removeClass("uo-ld-group-drip-row--loading"),r.removeClass("ultp-gutenberg-btn--loading"),t.success?(n.addClass("uo-ld-group-drip-row--success"),n.find("input").val(""),n.find("select").prop("selectedIndex",0),n.data("sort",0),e.$elements.dataTable.draw(!1)):n.addClass("uo-ld-group-drip-row--error"),setTimeout((function(){n.removeClass("uo-ld-group-drip-row--success uo-ld-group-drip-row--error")}),3e3)}),(function(e){n.addClass("uo-ld-group-drip-row--error"),setTimeout((function(){n.removeClass("uo-ld-group-drip-row--success uo-ld-group-drip-row--error")}),3e3)}))}))}},{key:"addDataTables",value:function(){this.$elements.table.on("init.dt",(function(){uoAddSwitcher()})),this.$elements.dataTable=this.$elements.table.DataTable({aoColumns:[{bSortable:!0,bSearchable:!0},{bSortable:!0,bSearchable:!1,orderData:[2],targets:[2]},{bSortable:!0,bVisible:!1,sType:"numeric",targets:[1]},{bSortable:!1,bVisible:!1},{bSortable:!1}],order:[[1,"asc"]],lengthMenu:[[25,50,100,-1],[25,50,100,UncannyToolkitPro.i18n.all]]})}},{key:"hasGroupDripTable",value:function(){return this.$elements.table.length>0}}])&&d(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var f=r(311);function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getElements(),this.initSelect2(),this.listenChangesToEnableCheckbox(),this.listenChangesToRedirectCheckbox(),this.listenChangesToRedirectTo()}var t,r;return t=e,(r=[{key:"getElements",value:function(){this.$elements={metabox:f("#ultp-restrict-access"),restrictAccessCheckbox:f("#ultp-restrict-access__enable-restrict-access"),redirectIfDefinedCheckbox:f("#ultp-restrict-access__redirect-if-defined"),redirectToRadio:f(".ultp-restrict-access__redirect-to"),selects:f(".ultp-restrict-access__option select")}}},{key:"initSelect2",value:function(){this.$elements.selects.select2()}},{key:"listenChangesToEnableCheckbox",value:function(){var e=this;this.$elements.restrictAccessCheckbox.on("change",(function(t){e.$elements.restrictAccessCheckbox.is(":checked")?e.$elements.metabox.addClass("ultp-restrict-access--enabled"):e.$elements.metabox.removeClass("ultp-restrict-access--enabled")}))}},{key:"listenChangesToRedirectCheckbox",value:function(){var e=this;this.$elements.redirectIfDefinedCheckbox.on("change",(function(t){e.$elements.redirectIfDefinedCheckbox.is(":checked")?e.$elements.metabox.addClass("ultp-restrict-access--redirect-if-denied"):e.$elements.metabox.removeClass("ultp-restrict-access--redirect-if-denied")}))}},{key:"listenChangesToRedirectTo",value:function(){var e=this;this.$elements.redirectToRadio.on("change",(function(t){var r=e.$elements.redirectToRadio.filter(":checked").val();e.$elements.metabox.removeClass("ultp-restrict-access--redirect-to-post ultp-restrict-access--redirect-to-custom_url"),e.$elements.metabox.addClass("ultp-restrict-access--redirect-to-".concat(r))}))}}])&&b(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var m=r(311);function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getElements(),1==this.$elements.tryAutomatorXIcon.length&&this.handleHide()}var t,r;return t=e,(r=[{key:"getElements",value:function(){this.$elements={tryAutomatorXIcon:m("#ultp-sidebar-try-automator-close")}}},{key:"handleHide",value:function(){this.$elements.tryAutomatorXIcon.on("click",(function(e){e.preventDefault();var t=m(e.currentTarget).closest(".ult-sidebar-featured-item-container");t.addClass("ult-sidebar-featured-item-container--loading"),o("try-automator-visibility",{action:"hide-forever"},(function(e){e.success?t.remove():t.removeClass("ult-sidebar-featured-item-container--loading")}),(function(){t.removeClass("ult-sidebar-featured-item-container--loading")}))}))}}])&&v(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var y=r(311);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shouldLoad()&&this.listenActions()}var t,r;return t=e,r=[{key:"shouldLoad",value:function(){return"undefined"!=typeof UO_LD_Notifications_String&&UO_LD_Notifications_String.length>0}},{key:"listenActions",value:function(){y(document).ready((function(){if("_ld_notifications_group_id"in UO_LD_Notifications_String){var e=UO_LD_Notifications_String._ld_notifications_group_id;0!==e&&y('select[name="_ld_notifications_group_id"] option[value='+e+"]").prop("selected","selected")}})),y('select[name="_ld_notifications_trigger"]').change((function(){event.preventDefault(),"group_lesson_available"===y(this).val()&&y('select[name="_ld_notifications_course_id"]').html('<option value="all">'+UO_LD_Notifications_String.select_group_first+"</option>")})),y('select[name="_ld_notifications_group_id"]').change((function(){event.preventDefault();var e=y(this).val();if("group_lesson_available"===y('select[name="_ld_notifications_trigger"]').val()){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{group_id:e});o("get_group_courses",t,(function(e){e=e.data,y('select[name="_ld_notifications_course_id"]').html('<option value="">'+UO_LD_Notifications_String.select_course+'</option><option value="all">'+UO_LD_Notifications_String.all_courses+"</option>"),y.each(e,(function(e,t){y('select[name="_ld_notifications_course_id"]').append('<option value="'+e+'">'+t+"</option>")}))}))}}))}}],r&&C(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();document.addEventListener("DOMContentLoaded",(function(){new p,new g,new h,new O}))})()})();
//# sourceMappingURL=bundle.min.js.map