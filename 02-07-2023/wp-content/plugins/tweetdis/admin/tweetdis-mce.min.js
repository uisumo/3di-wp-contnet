!function(){tinymce.PluginManager.add("tweetdis",function(t,e){t.addButton("tweetdis",{title:"Tweet",image:e+"/../assets/images/icon.png",onclick:function(){function e(t){var e=_.find(t);e.is(":hidden")&&(e.show(),_.height(_.height()+e.height()+15))}function o(t){var e=_.find(t);e.is(":visible")&&(_.height(_.height()-e.height()-15),e.hide())}function i(t){t.indexOf("_at")>-1?(e(".authority_template_options"),"box_16_at"===t?o(".at_pic_url"):e(".at_pic_url")):o(".authority_template_options")}function l(t){"none"!==t?e(".width_select"):o(".width_select")}function a(t){"0"!=t?e(".custom_text_textarea"):o(".custom_text_textarea")}function n(t,e){return t.is(":visible")&&""!=t.val()?" "+e+'="'+t.val()+'"':""}function s(){_.remove(),d.remove()}$j=jQuery.noConflict(),$j("body").append('<div class="tweetdis_modal_fade"></div><div class="tweetdis_modal"><div class="tweetdis_modal_header">TweetDis</div><div class="tweetdis_modal_content"><div class="tweetdis_modal_group"><label for="entity_select">Add:</label><select id="entity_select"><option selected value="tweet_box">Box</option><option value="tweet_dis">Hint</option><option value="tweet_dis_img">Image</option></select></div><div class="tweetdis_modal_group box_select"><label for="box_select">Design:</label><select id="box_select"><option selected value="default">Default template</option><option value="box_01">Template 1</option><option value="box_02">Template 2</option><option value="box_03">Template 3</option><option value="box_04">Template 4</option><option value="box_05">Template 5</option><option value="box_06">Template 6</option><option value="box_07">Template 7</option><option value="box_08">Template 8</option><option value="box_09">Template 9</option><option value="box_10">Template 10</option><option value="box_11">Template 11</option><option value="box_12_at">Authority Template 1</option><option value="box_13_at">Authority Template 2</option><option value="box_14_at">Authority Template 3</option><option value="box_15_at">Authority Template 4</option><option value="box_16_at">Authority Template 5</option></select></div><div class="tweetdis_modal_group authority_template_options"><label for="at_author">Author Name:</label><input type="text" id="at_author"/><label for="at_pic_url" class="at_pic_url">Picture URL:</label><input type="text" id="at_pic_url" class="at_pic_url"/><label class="tweetdis_modal_link at_pic_url">Show media library</label></div><div class="tweetdis_modal_group float_select"><label for="float_select">Float:</label><select id="float_select"><option selected value="none">None</option><option value="left">Left</option><option value="right">Right</option></select></div><div class="tweetdis_modal_group width_select"><label for="width_select">Width:</label><select id="width_select"><option selected value="40%">40%</option><option value="50%">50%</option><option value="60%">60%</option></select></div><div class="tweetdis_modal_group"><label for="url_select">URL to tweet:</label><select id="url_select"><option selected value="default">This Article</option><option value="custom">Custom URL</option></select></div><div class="tweetdis_modal_group url_input"><label for="url_input">Specify the URL:</label><input type="text" id="url_input" /></div><div class="tweetdis_modal_group"><label for="hidden_text_select">Inject hidden text:</label><select id="hidden_text_select"><option selected value="0">No</option><option value="1">Yes</option></select></div><div class="tweetdis_modal_group hidden_text_textarea"><label>Text to inject:</label><textarea id="hidden_text_textarea" rows="3" cols="21"></textarea></div><div class="tweetdis_modal_group custom_text_select"><label for="custom_text_select">Custom tweet text:</label><select id="custom_text_select"><option selected value="0">No</option><option value="1">Yes</option></select></div><div class="tweetdis_modal_group custom_text_textarea"><label>Custom tweet:</label><textarea id="custom_text_textarea" rows="3" cols="21"></textarea></div></div><div class="tweetdis_modal_footer"><a class="tweetdis_modal_cancel">Cancel</a><a class="tweetdis_modal_confirm">OK</a></div></div>');var _=$j(".tweetdis_modal"),d=$j(".tweetdis_modal_fade");_.find("#entity_select").on("change",function(){"tweet_dis"===$j(this).val()?(o(".box_select"),o(".authority_template_options"),o(".float_select"),o(".width_select"),e(".custom_text_select"),a(_.find("#custom_text_select").val())):"tweet_dis_img"===$j(this).val()?(o(".box_select"),o(".authority_template_options"),o(".float_select"),o(".width_select"),o(".custom_text_select"),o(".custom_text_textarea")):"tweet_box"===$j(this).val()&&(e(".box_select"),e(".float_select"),e(".custom_text_select"),i(_.find("#box_select").val()),l(_.find("#float_select").val()),a(_.find("#custom_text_select").val()))}),_.find("#box_select").on("change",function(){i($j(this).val())}),_.find("#float_select").on("change",function(){l($j(this).val())}),_.find("#url_select").on("change",function(){"default"!==$j(this).val()?e(".url_input"):o(".url_input")}),_.find("#hidden_text_select").on("change",function(){"0"!=$j(this).val()?e(".hidden_text_textarea"):o(".hidden_text_textarea")}),_.find("#custom_text_select").on("change",function(){a($j(this).val())}),_.find(".tweetdis_modal_link").on("click",function(t){t.preventDefault();var e,o;return e?void e.open():(e=window.wp.media({title:"Select Image for Authority Template",button:{text:"Use This Image"},multiple:!1}),e.open(),void e.on("select",function(){var t=e.state().get("selection").first().toJSON();o=t.url,e.close(),"undefined"!=typeof o&&_.find("#at_pic_url").val(o)}))}),_.find(".tweetdis_modal_confirm").on("click",function(){var e={entity:_.find("#entity_select").val(),design:n(_.find("#box_select"),"design"),author:n(_.find("#at_author"),"author"),author_pic:n(_.find("#at_pic_url"),"pic_url"),"float":n(_.find("#float_select"),"float"),width:n(_.find("#width_select"),"width"),url:n(_.find("#url_input"),"url"),hidden:n(_.find("#hidden_text_textarea"),"inject"),custom:n(_.find("#custom_text_textarea"),"excerpt")};t.selection.setContent("["+e.entity+e.design+e.url+e["float"]+e.width+e.author+e.author_pic+e.hidden+e.custom+"]"+t.selection.getContent()+"[/"+e.entity+"]"),s()}),_.find(".tweetdis_modal_cancel").on("click",function(){s()})}})})}();